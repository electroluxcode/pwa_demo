/*! For license information please see 8.637a5762.chunk.js.LICENSE.txt */
(window["webpackJsonp_teamshare-docs"]=window["webpackJsonp_teamshare-docs"]||[]).push([[8],{2470:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return It})),n.d(t,"b",(function(){return br})),n.d(t,"c",(function(){return be})),n.d(t,"d",(function(){return Ee})),n.d(t,"e",(function(){return we})),n.d(t,"f",(function(){return ke})),n.d(t,"g",(function(){return Ui})),n.d(t,"h",(function(){return rn})),n.d(t,"i",(function(){return nn})),n.d(t,"j",(function(){return Lt})),n.d(t,"k",(function(){return ee})),n.d(t,"l",(function(){return te})),n.d(t,"m",(function(){return le})),n.d(t,"n",(function(){return ce})),n.d(t,"o",(function(){return ae})),n.d(t,"p",(function(){return se})),n.d(t,"q",(function(){return mr})),n.d(t,"r",(function(){return wr})),n.d(t,"s",(function(){return kr})),n.d(t,"t",(function(){return xr})),n.d(t,"u",(function(){return cn})),n.d(t,"v",(function(){return gr})),n.d(t,"w",(function(){return Li})),n.d(t,"x",(function(){return ye})),n.d(t,"y",(function(){return Kt})),n.d(t,"z",(function(){return $i})),n.d(t,"A",(function(){return Ki})),n.d(t,"B",(function(){return on})),n.d(t,"C",(function(){return qt})),n.d(t,"D",(function(){return Te})),n.d(t,"E",(function(){return bn})),n.d(t,"F",(function(){return ie})),n.d(t,"G",(function(){return oe})),n.d(t,"H",(function(){return ue})),n.d(t,"I",(function(){return Wi})),n.d(t,"J",(function(){return Ke})),n.d(t,"K",(function(){return Et})),n.d(t,"L",(function(){return et})),n.d(t,"N",(function(){return Je})),n.d(t,"O",(function(){return Ze})),n.d(t,"P",(function(){return it})),n.d(t,"Q",(function(){return Ge})),n.d(t,"R",(function(){return at})),n.d(t,"S",(function(){return ri})),n.d(t,"T",(function(){return ii})),n.d(t,"U",(function(){return Ft})),n.d(t,"V",(function(){return st})),n.d(t,"W",(function(){return Pe})),n.d(t,"X",(function(){return ct})),n.d(t,"Z",(function(){return Fe})),n.d(t,"ab",(function(){return Re})),n.d(t,"bb",(function(){return wt})),n.d(t,"cb",(function(){return yt})),n.d(t,"db",(function(){return Le})),n.d(t,"eb",(function(){return Ae})),n.d(t,"fb",(function(){return dt})),n.d(t,"gb",(function(){return qe})),n.d(t,"hb",(function(){return $e})),n.d(t,"ib",(function(){return rt})),n.d(t,"jb",(function(){return We})),n.d(t,"kb",(function(){return tt})),n.d(t,"lb",(function(){return Xe})),n.d(t,"mb",(function(){return Bt}));var r=n(2491),i=n.n(r);n.d(t,"Y",(function(){return i.a}));var o,a=n(2484),s=n.n(a),l=n(17),c=n(18),d=n(2),u=n(15),h=n(16),p=n(24),f=n(116),v=n(63),g=n(19),m=n(21),b=n(2474),y=n(2475),w=n(2616),k=n.n(w),x=n(4),O=n(1),C=n(122),E=n(2672),j=n.n(E),M=n(312),N=n.n(M),S=n(11),T=n(2495),_=n.n(T),A=n(243),I=n.n(A),D=n(97),z=n.n(D),L=n(2496),R=n(2521),B=n.n(R),P=n(2675),F=n(2676),H=n.n(F),q=n(2525),U=n.n(q),W=n(2690),V=n.n(W),Y=n(2692),G=n.n(Y),Z=n(2694),X=n.n(Z),Q=n(513),K=n(370),$=n.n(K),J=function(){function e(t){if(Object(u.a)(this,e),this.options={limitHeight:5e3,canvasCache:[],canvasCount:0},!t.container)throw new Error("need a cantainer!");this.options=Object(d.a)(Object(d.a)({},this.options),t),t.container.style["line-height"]="0px"}return Object(h.a)(e,[{key:"removeCanvas",value:function(){var e=this.options.canvasCache;null===e||void 0===e||e.forEach((function(e){var t;null===e||void 0===e||null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),this.options.canvasCache=[]}},{key:"getCanvas",value:function(e){var t=this.options.canvasCache;return e=e>0?e-1:e,t?t[e]:void 0}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,i=n.canvasCount,o=n.container,a=this.options.canvasCache,s=Math.ceil(t/(r||0));if(s!==i){this.removeCanvas(),a=[];for(var l=0;l<s;l++){var c=document.createElement("canvas");c.style["vertical-align"]="bottom",c.setAttribute("width",e.toString()),l===s-1?c.setAttribute("height",(t%(r||0)).toString()):c.setAttribute("height",(r||0).toString()),null===o||void 0===o||o.appendChild(c),a.push(c)}this.options.canvasCache=a}else{var d,u=this.getCanvas(s);null===(d=a)||void 0===d||d.forEach((function(t){t.setAttribute("width",e.toString())})),u&&u.setAttribute("height",(t%(r||0)).toString())}}},{key:"handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,i=e.width,o=e.height,a=e.callback,s=this.options.limitHeight,l=this.getCanvas(r);if(l){var c=l.getContext("2d"),u=new DOMRect(t,n-(s||0)*(r-1),i,o);a(Object(d.a)(Object(d.a)({},u.toJSON()),{},{context:c}))}}},{key:"drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,a=e.stroke,s=new DOMRect(t,n,r,i);this.handleRect(Object(d.a)(Object(d.a)({},s.toJSON()),{},{callback:function(e){var t=e.context;t&&(t.fillStyle=void 0===o?"#FFEC3D":o,t.strokeStyle=void 0===a?"#FFEC3D":a,t.fillRect(e.x,e.y,e.width,e.height))}}))}},{key:"handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.callback,a=this.options.limitHeight,s=n+i,l=Math.ceil(n/(a||0)),c=Math.ceil(s/(a||0)),u=new DOMRect(t,n,r,i);this.handleSingleRect(Object(d.a)(Object(d.a)({},u.toJSON()),{},{index:l,callback:o})),l!==c&&this.handleSingleRect(Object(d.a)(Object(d.a)({},u.toJSON()),{},{index:c,callback:o}))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=this.options.limitHeight,a=Math.ceil(n/(o||0)),s=this.getCanvas(a),l=null===s||void 0===s?void 0:s.getContext("2d");return null===l||void 0===l?void 0:l.getImageData(t,n,r,i)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=new DOMRect(t,n,r,i);this.handleRect(Object(d.a)(Object(d.a)({},o.toJSON()),{},{callback:function(e){var t=e.context,n=e.x,r=e.y,i=e.width,o=e.height;null===t||void 0===t||t.clearRect(n,r,i,o)}}))}},{key:"clear",value:function(){var e=this.options.canvasCache;null===e||void 0===e||e.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),r=Number(e.getAttribute("height"));null===t||void 0===t||t.clearRect(0,0,n,r)}))}},{key:"destroy",value:function(){this.removeCanvas()}}]),e}(),ee="data-element",te="data-id",ne="root",re="[".concat(ee,'="').concat(ne,'"]'),ie="ui",oe="[".concat(ee,'="').concat(ie,'"]'),ae="editable",se="[".concat(ee,'="').concat(ae,'"]'),le="data-transient-attributes",ce="data-transient-element",de="am-engine",ue="am-engine-view",he="anchor",pe="focus",fe="cursor",ve="span[".concat(ee,"=").concat(he,"],anchor"),ge="span[".concat(ee,"=").concat(pe,"],focus"),me="span[".concat(ee,"=").concat(fe,"],cursor"),be="data-card-key",ye="data-ready-card",we="data-card-type",ke="data-card-value",xe="data-card-element",Oe="data-card-loading",Ce="data-card-editable",Ee="div[".concat(be,"],span[").concat(be,"]"),je="div[".concat(ye,"],span[").concat(ye,"]"),Me="span[".concat(xe,"=left]"),Ne="div[".concat(xe,"=center],span[").concat(xe,"=center]"),Se="span[".concat(xe,"=right]"),Te="trigger-card-id",_e=("undefined"!==typeof navigator?navigator:window.navigator).userAgent.toLowerCase(),Ae="undefined"===typeof navigator,Ie=/edge/i.test(_e),De=!Ie&&/chrome/i.test(_e),ze=/firefox/i.test(_e),Le=!Ie&&!De&&/safari/i.test(_e),Re=/mobile/i.test(_e),Be=/os [\.\_\d]+ like mac os/i.test(_e),Pe=/android/i.test(_e),Fe=!Be&&/mac os x/i.test(_e),He=/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(_e),qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;e<5&&(e=5);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(62*Math.random()));return n};!function(e){e.UPPER="upper",e.LOWER="lower"}(o||(o={}));var Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LOWER;return e.split("-").map((function(e,n){return"upper"===t||n>0?e.charAt(0).toUpperCase()+e.substr(1):"lower"===t&&0===n?e.charAt(0).toLowerCase()+e.substr(1):e})).join("")},We=function(e){var t=function(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length>1?t:"0"+t};return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,(function(e,n,r,i){return"#"+t(n)+t(r)+t(i)}))},Ve=new Map,Ye=function(e){var t=e.replace(/\s+/g,""),n={};if(!t)return n;var r=Ve.get(t);if(r)return Object.assign({},r);var i,o=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;for(e=e.toLowerCase();i=o.exec(e);){var a=i,s=Object(x.a)(a,3),l=(s[0],s[1]),c=s[2];(l.endsWith("color")||c.includes("rgb"))&&(c=We(c)),n[l.trim()]=c.trim()}return Ve.set(t,n),Object.assign({},n)},Ge=function(e,t){var n=Ue(t),r=window.getComputedStyle(e,null);return r?r[n]:""},Ze=function(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Xe=function(e){return(e||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},Qe=function(e){return e.replace(/&dot;/g,".")},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return e&&/^-?\d+(?:\.\d+)?$/.test(e.toString())?e+t:e},$e=function(e){var t;return e&&(t=/^((-?\d+)(\.\d+)?)/.exec(e))?Math.floor(1e4*parseFloat(t[1]))/1e4:0},Je=function(e){var t="";try{t=encodeURIComponent(JSON.stringify(e||""))}catch(n){}return"data:".concat(t)},et=function(e){try{return e=e.substr(5),JSON.parse(decodeURIComponent(e))}catch(t){return{}}},tt=function(e){return e.replace(/<anchor\s*\/>/gi,"<span ".concat(ee,'="').concat(he,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(ee,'="').concat(pe,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(ee,'="').concat(fe,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,t){var n=function(e){for(var t,n={},r=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=r.exec(e);){var i=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),o=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[i]=o}return n}(t),r=n.type,i=n.name,o=n.value,a=n.editable,s="inline"===r?"span":"div",l=["<".concat(s)];return l.push(" ".concat(we,'="').concat(r||"",'"')),l.push(" ".concat(ye,'="').concat(i||"",'"')),""!==a&&l.push(" ".concat(Ce,'="').concat(a||"false",'"')),Object.keys(n).forEach((function(e){0===e.indexOf("data-")&&0!==e.indexOf("data-card")&&l.push(" ".concat(e,'="').concat(n[e]||"",'"'))})),void 0!==o&&l.push(" ".concat(ke,'="').concat(o,'"')),l.push("></".concat(s,">")),l.join("")}))},nt=function(e){return"string"===typeof e&&(!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!e.match(/^\S*$/)&&(!!["http:","https:","data:","ftp:"].some((function(t){return e.startsWith(t)}))||(!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0))))},rt=function(e){return nt(e)?e:""},it=function(e){var t=e.toLowerCase().split("+");return t=t.map((function(e){return"mod"===e?Fe?"\u2318":"Ctrl":"opt"===e?Fe?"Option":"Alt":e.length>1?e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase():e.toUpperCase()})),t.join("+")},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t=+t))return"\u2022";switch(null===e||void 0===e?void 0:e.toLowerCase()){case"disc":return"\u2022";case"circle":return"\u25e6";case"square":return"\u25fc";case"lower-alpha":return String.fromCharCode("a".charCodeAt(0)+t);case"lower-roman":return String.fromCharCode(8559+t);default:return t}},at=function(t){if("undefined"===typeof document&&"undefined"===typeof e.__amWindow)throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return t?t.ownerDocument||t.document||t:"undefined"===typeof document?e.__amWindow.document:document},st=function e(t,n){var r=[];if(n&&!n(t))return r;for(var i=t.childNodes,o=0;o<i.length;o++){var a=i[o],s=a.nodeType;3===s?r.push(a):1!==s&&9!==s&&11!==s||(r=r.concat(e(a,n)))}return r},lt=function(e){return e.nodeType===at().ELEMENT_NODE&&e.getAttribute(ee)===ne?void 0:e.parentNode||void 0},ct=function(e){return"engine"===e.kind},dt=function(e){return"view"===e.kind},ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=new k.a(t,{html:!0,typographer:!0,linkify:!0});return e.trigger("markdown-it",n),n},ht=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.renderer,o=t.options,a=!1,s=e.schema.getTags("blocks"),l="",c=[];return n.forEach((function(d,u){var h=d.type,p=d.tag,f=d.children,v=d.nesting;if(!1!==e.trigger("markdown-it-token",{token:d,markdown:t,callback:function(e){l+=e}})){var g="";if("inline"===h&&f?(g=i.renderInline(f,o,{}),r&&f.find((function(e){return e.type.endsWith("_open")}))&&(a=!0)):g="undefined"!==typeof i.rules[h]?i.rules[h](n,u,o,{},i):i.renderToken(n,u,o),1===v)c.push(""),l+=g;else if(0===v)0===c.length?(l+=g,p&&!a&&(a=!0)):g&&(c[c.length-1]+=g);else if(-1===v){var m;c.length>0&&!c[c.length-1]&&s.includes(p)&&(c[c.length-1]+="<br />"),l+=null!==(m=c[c.length-1])&&void 0!==m?m:"",c.pop(),c.every((function(e){return!e}))&&(c=[]),l+=g,a||"p"===p||(a=!0)}}else a=!0})),a&&l?l:null},pt=0,ft=1,vt=2,gt="data-uuid",mt="data-color",bt=function(){function e(){Object(u.a)(this,e),this.listeners={}}return Object(h.a)(e,[{key:"on",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),"object"===Object(l.a)(n)&&n.once||this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.listeners[e];if(i){var o=void 0;return i.every((function(e){return"boolean"!==typeof(o=e.apply(void 0,n))||!1!==o})),o}}},{key:"destroy",value:function(){var e=this;Object.keys(this.listeners).forEach((function(t){e.listeners[t].forEach((function(n){e.off(t,n)}))}))}}]),e}(),yt=function(e){return!!e&&void 0!==e.get},wt=function(e){return!!e&&void 0!==e.nodeType},kt=function(e,t){if(e.nodeType!==Node.ELEMENT_NODE||!t)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector||function(e,t){for(var n,r=null===(n=at(e))||void 0===n?void 0:n.querySelectorAll(t),i=r?r.length:0;--i>=0&&(null===r||void 0===r?void 0:r.item(i))!==e;);return i>-1};return n.call(e,t)},xt=function(e){return"card"===e.nodeName||!!e.getAttribute(we)},Ot=function(e){return e.getAttribute(ee)===ae||"true"===e.getAttribute(Ce)||!!(null===e||void 0===e?void 0:e.querySelector(se))},Ct=function(e,t){return e.getAttribute(ee)===ne&&(!t||e===t)},Et=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.parentElement||void 0},r=e||void 0;r;){if(kt(r,t))return r;r=n(r)}return r},jt=new Map;function Mt(e,t){if(!e)return[];if("string"===typeof e){if(!t||/<[^>]+>/g.test(e)){var n=0===e.indexOf("<tr"),r=0===e.indexOf("<td");e=e.trim().replace(/<!--[^>]*-->/g,"");var i=jt.get(e);if(i){if(n){var o=i.querySelector("tbody");return o?o.cloneNode(!0).childNodes:[]}if(r){var a=i.querySelector("tr");return a?a.cloneNode(!0).childNodes:[]}return i.cloneNode(!0).childNodes}n&&(e="<table><tbody>".concat(e,"</tbody></table>")),r&&(e="<table><tbody><tr>".concat(e,"</tr></tbody></table>"));var s=at().createElement("div");if(s.innerHTML=e,jt.set(e,s.cloneNode(!0)),n){var l=s.querySelector("tbody");return l?l.childNodes:[]}if(r){var c=s.querySelector("tr");return c?c.childNodes:[]}return s.childNodes}return t.querySelectorAll(e)}if(function(e){return!!e&&void 0!==e.entries}(e)||Array.isArray(e))return e;if(yt(e)){var d=[];return e.each((function(e){d.push(e)})),d}if(wt(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var u,h=[],p=Object(C.a)(e.childNodes);try{for(p.s();!(u=p.n()).done;){var f=u.value;h.push(f)}}catch(v){p.e(v)}finally{p.f()}return h}return[e]}var Nt,St,Tt,_t,At=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.events=[],this.document=null,this.context=void 0,this.name="",this.type=void 0,this.window=null,this.display=void 0,this.fragment=void 0,wt(t)&&(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(this.fragment=t),t=[t]),t.forEach((function(e,t){r[t]=e,r.events[t]=new bt}));var i=this[0];if(i){this.document=at(n),this.context=n;var o=i.nodeName,a=i.nodeType;this.name=o.toLowerCase(),this.type=a,this.window=this.document.defaultView||window}}return Object(h.a)(e,[{key:"length",get:function(){for(var e=0;this[e];)e++;return e}},{key:"each",value:function(e){for(var t,n=0;(t=this[n])&&!1!==e(t,n);)n++;return this}},{key:"toArray",value:function(){var t=[];return this.each((function(n){t.push(new e(n))})),t}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isCard",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&xt(e)}},{key:"isBlockCard",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&function(e){return"block"===e.getAttribute(we)}(e)}},{key:"isInlineCard",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&function(e){return"inline"===e.getAttribute(we)}(e)}},{key:"isEditableCard",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&Ot(e)}},{key:"isRoot",value:function(e){var t,n=this.get();return(null===n||void 0===n?void 0:n.nodeType)===Node.ELEMENT_NODE&&Ct(n,e?null!==(t=e[0])&&void 0!==t?t:e:void 0)}},{key:"isEditable",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&function(e){return Ct(e)||e.getAttribute(ee)===ae}(e)}},{key:"inEditor",value:function(e){var t,n=this.get();return!!n&&function(e,t){if(e.nodeType===Node.ELEMENT_NODE&&Ct(e,t))return!1;var n=Et(e,re);return!!n&&(!t||n===t)}(n,e?null!==(t=e[0])&&void 0!==t?t:e:void 0)}},{key:"isCursor",value:function(){var e=this.get();return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE&&function(e){var t=e.getAttribute(ee);return!!t&&[he,pe,fe].indexOf(t)>-1}(e)}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===this.length?null:this[e]}},{key:"eq",value:function(t){return t>-1&&t<this.length?new e(this[t]):void 0}},{key:"index",value:function(){for(var e,t=null===(e=this.get())||void 0===e?void 0:e.previousSibling,n=0;t&&t.nodeType===Node.ELEMENT_NODE;)n++,t=t.previousSibling;return n}},{key:"parent",value:function(){var t,n=null===(t=this.get())||void 0===t?void 0:t.parentNode;return n?new e(n):void 0}},{key:"children",value:function(t){if(0===this.length)return new e([]);var n=this.get().childNodes;if(t){for(var r=[],i=0;i<n.length;i++){var o=n[i];kt(o,t)&&r.push(o)}return new e(r)}return new e(n)}},{key:"first",value:function(){var t;if(this.fragment)return this.eq(0)||null;var n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.firstChild;return n?new e(n):null}},{key:"last",value:function(){var t;if(this.fragment)return this.eq(this.length-1)||null;var n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.lastChild;return n?new e(n):null}},{key:"prev",value:function(){var t,n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.previousSibling;return n?new e(n):null}},{key:"next",value:function(){var t,n=0===this.length?null:null===(t=this.get())||void 0===t?void 0:t.nextSibling;return n?new e(n):null}},{key:"prevElement",value:function(){var t=0===this.length?null:this.get().previousElementSibling;return t?new e(t):null}},{key:"nextElement",value:function(){var t=0===this.length?null:this.get().nextElementSibling;return t?new e(t):null}},{key:"getPath",value:function(e,t,n){e=e||document.body;var r=[];if(this.length>0){var i=this.getIndex(t);if(n){var o=n(i,r,this);o&&(r=o)}else r.unshift(i)}if(this.equal(e))return r;for(var a=this.parent();a&&!a.equal(e);){var s=a.getIndex(t);if(n){var l=n(s,r,a);l&&(r=l)}else r.unshift(s);a=a.parent()}return r}},{key:"contains",value:function(e){var t,n=wt(e)?e:e.get();if(0===this.length)return!1;if(this.get().nodeType===Node.DOCUMENT_NODE&&(null===(t=n)||void 0===t?void 0:t.nodeType)!==Node.DOCUMENT_NODE)return!0;if(n===this[0])return!0;for(;n=(null===(r=n)||void 0===r?void 0:r.parentNode)||null;){var r;if(n===this[0])return!0}return!1}},{key:"find",value:function(t){var n;return this.length>0&&(this.isElement()||this.fragment)?new e((null===(n=this.fragment?this.fragment:this.get())||void 0===n?void 0:n.querySelectorAll(t))||[]):new e([])}},{key:"closest",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.parentNode||void 0},r=[],i=this.get()||void 0;i;){if(kt(i,t))return r.push(i),new e(r);i=n(i)}return new e(r)}},{key:"on",value:function(e,t,n){var r=this;return this.each((function(i,o){i.addEventListener(e,t,n),r.events[o]&&r.events[o].on(e,t,n)})),this}},{key:"off",value:function(e,t,n){var r=this;return this.each((function(i,o){i.removeEventListener(e,t,n),r.events[o]&&r.events[o].off(e,t,n)})),this}},{key:"getBoundingClientRect",value:function(e){if(0!==this.length){try{var t=this.get().getBoundingClientRect(),n=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:t.top-n,bottom:t.bottom-n,left:t.left-r,right:t.right-r}}catch(i){console.error(i)}return e}}},{key:"removeAllEvents",value:function(){var e=this;return this.each((function(t,n){e.events[n]&&Object.keys(e.events[n].listeners).forEach((function(r){for(var i=e.events[n].listeners[r],o=0;o<i.length;o++)e.off(r,i[o]),e.events[n].off(r,i[o]),t.removeEventListener(r,i[o],!1)}))})),this}},{key:"attributes",value:function(e,t){if(void 0===e){var n=this.get();if(!n)return{};for(var r={},i=n.attributes,o=i.length;o--;){var a=i[o];r[a.name]=a.value}return r}if("object"===Object(l.a)(e)){for(var s in e){var c=e[s];this.attributes(s,c)}return this}if(void 0===t){var d=this.get();return this.length>0&&this.isElement()&&(null===d||void 0===d?void 0:d.getAttribute(e))||""}var u="style"===e&&""===t;return this.each((function(n){var r=n;u?r.removeAttribute("style"):r.setAttribute(e,t.toString())})),this}},{key:"removeAttributes",value:function(e){return this.each((function(t){t.nodeType===Node.ELEMENT_NODE&&t.removeAttribute(e)})),this}},{key:"hasClass",value:function(e){if(0===this.length)return!1;var t=this.get();if(!t)return!1;for(var n=0,r=null,i=t.classList||{};r=i[n];){if(r===e)return!0;n++}return!1}},{key:"addClass",value:function(e){return this.each((function(t){t.classList.add(e)})),this}},{key:"removeClass",value:function(e){return this.each((function(t){t.classList.remove(e)})),this}},{key:"css",value:function(e,t){if(void 0===e)return Ye(this.attributes("style")||"");if("object"===Object(l.a)(e)){for(var n in e){var r=e[n];this.css(n,r)}return this}if(void 0===t){if(0===this.length||this.isText())return"";var i=this.get();return i&&(i.style[Ue(e)]||Ge(this[0],e))||""}return this.each((function(n){var r=n;r.style[Ue(e)]=t.toString(),0===r.style.length&&r.removeAttribute("style")})),this}},{key:"width",value:function(){var e=this.css("width");"auto"===e&&(e=this.get().offsetWidth.toString());return e&&$e(e)||0}},{key:"height",value:function(){var e=this.css("height");"auto"===e&&(e=this.get().offsetHeight.toString());return e&&parseFloat(e)||0}},{key:"html",value:function(e){if(void 0!==e){var t=Mt(e);return this.each((function(e){if(e.nodeType===Node.ELEMENT_NODE){for(var n=e.firstChild;n;){var r=n.nextSibling;e.removeChild(n),n=r}t.forEach((function(t){e.appendChild(t.cloneNode(!0))}))}})),this}return this.length>0?this[0].innerHTML:""}},{key:"text",value:function(e){var t;return void 0!==e?(this.each((function(t){t.textContent=e})),this):0===this.length?"":(null===(t=this.get())||void 0===t?void 0:t.textContent)||""}},{key:"show",value:function(e){return void 0===e&&(e=this.display||""),"none"===e&&(e=""),"none"!==this.css("display")?this:this.css("display",e)}},{key:"hide",value:function(){var e;return 0===this.length?this:(this.display=null===(e=this.get())||void 0===e?void 0:e.style.display,this.css("display","none"))}},{key:"remove",value:function(){var e=this;return this.each((function(t,n){t.parentNode&&(t.parentNode.removeChild(t),delete e[n])})),this}},{key:"empty",value:function(){return this.each((function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.removeChild(t),t=n}})),this}},{key:"equal",value:function(e){return wt(e)?this.get()===e:!!yt(e)&&this.get()===e.get()}},{key:"clone",value:function(t){var n=[];return this.each((function(e){n.push(e.cloneNode(t))})),new e(n)}},{key:"prepend",value:function(e){var t=Mt(e,this.context),n="string"===typeof e&&/<.+>/.test(e);return this.each((function(e){for(var r=t.length-1;r>=0;r--){var i=n?t[r].cloneNode(!0):t[r];e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}})),this}},{key:"append",value:function(e){var t=Mt(e,this.context),n="string"===typeof e&&/<.+>/.test(e);return this.each((function(r){for(var i=0;i<t.length;i++){var o=n?t[i].cloneNode(!0):t[i];"string"===typeof e?r.append(o):r.appendChild(o)}})),this}},{key:"before",value:function(e){var t=Mt(e,this.context),n="string"===typeof e&&/<.+>/.test(e);return this.each((function(e){var r=e.parentNode;r&&t.forEach((function(t){n&&(t=t.cloneNode(!0)),r.insertBefore(t,e),e=t}))})),this}},{key:"after",value:function(e){var t=Mt(e,this.context),n="string"===typeof e&&/<.+>/.test(e);return this.each((function(e){var r=e.parentNode;r&&t.forEach((function(t){n&&(t=t.cloneNode(!0)),e.nextSibling?(r.insertBefore(t,e.nextSibling),e=t):r.appendChild(t)}))})),this}},{key:"replaceWith",value:function(t){var n=[],r=Mt(t,this.context),i="string"===typeof t&&/<.+>/.test(t);return this.each((function(e){var t=e.parentNode;if(t){var o=i?r[0].cloneNode(!0):r[0];t.replaceChild(o,e),n.push(o)}})),new e(n)}},{key:"getRoot",value:function(){return this.closest(re)}},{key:"traverse",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e(this),function o(a){var s=a.isCard();if(!s||n&&("editable"!==n||a.isEditableCard()))for(var l=t?a.first():a.last();l;){var c=t?l.next():l.prev();r&&r(l);var d=e(l);if(!1===d)return void(i&&i(l,c));if(!0!==d){var u=d&&"boolean"!==typeof d;u&&(i&&i(l,d),l=d),(s=l.isCard())?!0===n?(u&&e(l),o(l)):"editable"===n&&l.isEditableCard()&&function(){var e=l.find(se);e.each((function(t,n){var r=e.eq(n);r&&o(r)}))}():(u&&e(l),o(l))}i&&i(l,c),l=c}}(this)}},{key:"getChildByPath",value:function(e,t){var n=this.get();if(0===e.length)return n;for(var r=function(e){var r,i=0,o=Object(C.a)(n.childNodes);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!t||t(a)){if(i==e)return a;i++}}}catch(s){o.e(s)}finally{o.f()}},i=0;void 0!==e[i];){var o=r(e[i]);if(!o)break;n=o,i++}return n}},{key:"getIndex",value:function(e){var t=this[0].parentNode;if(!t)return 0;var n,r=0,i=Object(C.a)(t.childNodes);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!e||e(o)){if(o===this[0])return r;r++}}}catch(a){i.e(a)}finally{i.f()}return-1}},{key:"findParent",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.closest(re),r=null!==(t=n[0])&&void 0!==t?t:n;if(0===this.length||!r.parentNode)return null;for(var i=this[0];i.parentNode!==r;){if(!i.parentNode)return null;i=i.parentNode}return new e(i)}},{key:"allChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.traverse((function(e){t.push(e)}),void 0,e),t.shift(),t}},{key:"getViewport",value:function(){var e,t=this.window||{innerHeight:0,innerWidth:0},n=t.innerHeight,r=t.innerWidth,i=this.isText()?null===(e=this.parent())||void 0===e?void 0:e.get():this.get();if(!i)return{top:0,left:0,bottom:0,right:0};var o=i.getBoundingClientRect(),a=o.top,s=o.left,l=o.bottom,c=o.right;return{top:a,left:s,bottom:Math.min(l,n),right:Math.min(c,r)}}},{key:"inViewport",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(t.type!==Node.ELEMENT_NODE){if(!t.document)return!1;var o,a;if(i=t.document.createElement("span"),t.next())null===(o=t[0].parentNode)||void 0===o||o.insertBefore(i,t[0].nextSibling);else null===(a=t[0].parentNode)||void 0===a||a.appendChild(i);t=new e(i)}var s=t.get();if(!s)return!0;var l=s.getBoundingClientRect(),c=l.top,d=l.left,u=l.right,h=l.bottom,p=this.getViewport();return i&&(null===(n=i.parentNode)||void 0===n||n.removeChild(i)),r?c>0&&c<=p.bottom||h>0&&h<=p.bottom:c>0&&c>=p.top&&d>0&&d>=p.left&&h<=p.bottom&&u<=p.right}},{key:"scrollIntoView",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest";if("function"===typeof(null===(n=t.document)||void 0===n?void 0:n.body.scrollIntoView)){var i,o,a,s=null;if(t.type!==Node.ELEMENT_NODE||"br"===t.name.toLowerCase())(s=t.document.createElement("span")).innerHTML="&nbsp;",null===(o=t[0].parentNode)||void 0===o||o.insertBefore(s,t[0]),t=new e(s);if(!this.inViewport(t))null===(a=t.get())||void 0===a||a.scrollIntoView({block:r,inline:r});s&&(null===(i=s.parentNode)||void 0===i||i.removeChild(s))}}}]),e}(),It=function(e,t,n){void 0===t&&(t=at());var r=Mt(e,t),i=new(n||At)(r,t||void 0);return wt(e)&&e.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(i.fragment=e),i},Dt=[{from:function(e,t,n){return!!n[be]||!!n[ye]},to:function(e,t,n){var r=n[ke],i=Object(d.a)({},n);for(var o in n=Object(O.a)({type:n[we],name:(n[be]||n[ye]).toLowerCase(),editable:n[Ce]},te,n[te]),i)o!==ye&&0===o.indexOf("data-")&&0!==o.indexOf("data-card")&&(n[o]=i[o]);void 0!==r&&(n.value=r);var a=It("<card />");for(var s in n)a.attributes(s,n[s]);return a}},{from:function(e,t,n){return("div"===e||"section"===e)&&(!n[be]||!n[ye])&&n[ee]!==ne},to:function(e,t,n){var r=It("<p />");for(var i in r.css(t),n)r.attributes(i,n[i]);return r}},{from:function(e){return[fe,he,pe].includes(e)},to:function(e){return{node:It("<".concat(e," />")),replace:!0}}}],zt=[{type:"block",attributes:Object(O.a)({},te,"*")},{name:"p",type:"block",allowIn:["$root"]},{name:"br",type:"inline",isVoid:!0},{name:he,type:"inline",isVoid:!0},{name:pe,type:"inline",isVoid:!0},{name:fe,type:"inline",isVoid:!0},{name:"span",type:"mark",attributes:Object(O.a)({},ee,{required:!0,value:["anchor","cursor","focus"]})},{name:"card",type:"inline",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"inline"},editable:"*",value:"*"}},{name:"span",type:"inline",attributes:(Nt={},Object(O.a)(Nt,be,{required:!0,value:/\w+/}),Object(O.a)(Nt,we,{required:!0,value:"inline"}),Object(O.a)(Nt,ke,"*"),Object(O.a)(Nt,Ce,"*"),Object(O.a)(Nt,"class","*"),Object(O.a)(Nt,"contenteditable","*"),Nt)},{name:"span",type:"inline",attributes:(St={},Object(O.a)(St,ye,{required:!0,value:/\w+/}),Object(O.a)(St,we,{required:!0,value:"inline"}),Object(O.a)(St,ke,"*"),Object(O.a)(St,Ce,"*"),Object(O.a)(St,"class","*"),Object(O.a)(St,"contenteditable","*"),St)},{name:"card",type:"block",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"block"},editable:"*",value:"*"}},{name:"div",type:"block",attributes:(Tt={},Object(O.a)(Tt,be,{required:!0,value:/\w+/}),Object(O.a)(Tt,we,{required:!0,value:"block"}),Object(O.a)(Tt,ke,"*"),Object(O.a)(Tt,Ce,"*"),Object(O.a)(Tt,"class","*"),Object(O.a)(Tt,"contenteditable","*"),Tt)},{name:"div",type:"block",attributes:(_t={},Object(O.a)(_t,ye,{required:!0,value:/\w+/}),Object(O.a)(_t,we,{required:!0,value:"block"}),Object(O.a)(_t,ke,"*"),Object(O.a)(_t,Ce,"*"),Object(O.a)(_t,"class","*"),Object(O.a)(_t,"contenteditable","*"),_t)}],Lt="contenteditable",Rt={},Bt=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if((r=r||i.length)>i.length&&(r=i.length),e)for(t=0;t<e;t++)o[t]=i[0|Math.random()*r];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",t=0;t<36;t++)o[t]||(n=0|16*Math.random(),o[t]=i[19==t?3&n|8:n]);return o.join("")},Pt=new Map,Ft=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="";if("string"!==typeof e){var r,i=null!==(r=e[0])&&void 0!==r?r:e;if(i.nodeType===Node.ELEMENT_NODE){var o=i,a=o.localName;n=a.substring(0,1),e=a;for(var s=o.attributes,l=s.length;l--;){var c=s[l];[te,"id"].includes(c.name)||(e+="".concat(c.name,'="').concat(c.value,'"'))}}else{var d;e=null!==(d=i.textContent)&&void 0!==d?d:""}}var u=Pt.get(e);if(u)n=u;else{var h=j()(e);n=n+h.substr(0,4)+h.substr(h.length-3),Pt.set(e,n)}var p=n;if(t){var f=Rt[p]||0;return Rt[p]=f+1,"".concat(p,"-").concat(Bt(8,48+Rt[p]))}return p},Ht=function(){function e(t){var n=this;Object(u.a)(this,e),this.editor=void 0,this.addBrForBlock=function(e){if(!e.isText()){var t,r=e.get().childNodes,i=0,o=!0,a=!1,s="p"===e.name,l=Object(C.a)(r);try{for(l.s();!(t=l.n()).done;){var c=t.value;if(o&&c.nodeType===Node.TEXT_NODE?o=!1:s||a||c.nodeType!==Node.ELEMENT_NODE||!n.isBlock(c)||(a=!0),c.nodeType===Node.ELEMENT_NODE&&[he,pe,fe].indexOf(c.getAttribute(ee)||"")<1&&i++,!o&&i>1)break}}catch(u){l.e(u)}finally{l.f()}if(s&&0===i){var d=document.createElement("br");e.each((function(e){e.appendChild(d.cloneNode())}))}!a&&o&&n.isBlock(e)&&(1!==r.length||"BR"!==r[0].nodeName)&&n.isEmptyWithTrim(e)&&(e.empty(),e.append(document.createElement("br")))}},this.editor=t}return Object(h.a)(e,[{key:"isVoid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor.schema,n="string"===typeof e?e:"";return wt(e)?n=e.nodeName.toLowerCase():yt(e)&&(n=e.name),t.find((function(e){return e.name===n&&!0===e.isVoid})).length>0}},{key:"isMark",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor.schema;return r.getTags("marks").includes((null!==(t=null===(n=e.nodeName)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:e.name).toLowerCase())&&"mark"===r.getType(e)}},{key:"isInline",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor.schema;return r.getTags("inlines").includes(null!==(t=null===(n=e.nodeName)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:e.name)&&"inline"===r.getType(e)}},{key:"isBlock",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor.schema;return r.getTags("blocks").includes((null!==(t=null===(n=e.nodeName)||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:e.name).toLowerCase())&&"block"===r.getType(e)}},{key:"isNestedBlock",value:function(e){if(!this.isBlock(e))return!1;var t=e.length?e[0]:e;if(!t)return!1;for(var n=t.firstChild;n;){if(this.isBlock(n))return!1;n=n.nextSibling}return!0}},{key:"isRootBlock",value:function(e,t){var n;return!!(null===(n=e.parent())||void 0===n?void 0:n.isEditable())&&(!!this.isNestedBlock(e)&&(t||this.editor.schema).find((function(t){return t.name===e.name})).every((function(e){if("block"!==e.type)return!1;var t=e.allowIn;return!t||t.indexOf("$root")>-1})))}},{key:"isEmpty",value:function(e,t){var n,r;if(e.length>0&&e.isElement()){var i,o=e.attributes(),a=null!==(i=e.fragment)&&void 0!==i?i:e.get(),s=Array.from(a.querySelectorAll("".concat(Ee,",").concat(je,",").concat(se,",br")));if(o[be]||o[ye]||s.some((function(e){return e.hasAttribute(be)||e.hasAttribute(ye)}))&&!s.some((function(e){return e.getAttribute(ee)===ae})))return!1;if("br"!==e.name&&this.isVoid(e))return!1;if(s.filter((function(e){return"br"===e.localName})).length>1)return!1}var l=e.isText()?e[0].nodeValue||"":e.text();return(l=null===(r=l=null===(n=l)||void 0===n?void 0:n.replace(/\u200B/g,""))||void 0===r?void 0:r.replace(/\r\n|\n/,""))&&t&&(l=l.trim()),""===l}},{key:"isEmptyWithTrim",value:function(e){return this.isEmpty(e,!0)}},{key:"isEmptyWidthChild",value:function(e){if(0===e.length)return!0;if(e.isCard())return!1;if(e.isText())return this.isEmpty(e);var t=e[0].childNodes;if(0===t.length)return!0;for(var n=0;n<t.length;n++){var r=t[n];if(r.nodeType===Node.TEXT_NODE){if(""!==r.data.replace(/\u200b/g,""))return!1}else if(r.nodeType===Node.ELEMENT_NODE){if("li"===r.nodeName.toLowerCase()&&!this.editor.list.isEmptyItem(It(r)))return!1;if(r.hasAttribute(be))return!1;if(!this.isEmptyWidthChild(It(r)))return!1}}return!0}},{key:"isList",value:function(e){var t="string"===typeof e?e:"";return wt(e)?t=e.nodeName.toLowerCase():yt(e)&&(t=e.name),["ul","ol"].indexOf(t)>-1}},{key:"isCustomize",value:function(e){var t=this.editor.list;switch(e.name){case"li":return e.hasClass(t.CUSTOMZIE_LI_CLASS);case"ul":return e.hasClass(t.CUSTOMZIE_UL_CLASS);default:return!1}}},{key:"unwrap",value:function(e){for(var t=e.first(),n=[];t;){var r=t.next();e.before(t),n.push(t),t=r}return e.remove(),n}},{key:"wrap",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.editor.mark;if(wt(e)&&(e=It(e)),t=this.clone(t,!1),e.isText())return t.append(this.clone(e,!1)),e.replaceWith(t);if(r&&this.isMark(t)){var o=this.clone(t,!1,!1);if(e.name===t.name){var a=e.attributes();delete a.style,delete a[te],Object.keys(a).forEach((function(e){if(t.attributes(e)){var n=t.attributes(e).split(",");void 0!==n[e]&&n.indexOf(n[e])<0&&n.push(n[e]),t.attributes(e,n.join(","))}else t.attributes(e,a[e])}));var s=e.css();Object.keys(s).forEach((function(e){t.css(e)||t.css(e,s[e])})),t.append(this.clone(e,!0,!1).children())}else t.append(this.clone(e,!0,!1));return t.allChildren().forEach((function(e){!e.isText()&&n.isMark(e)&&i.compare(e,o)&&n.unwrap(e)})),e.replaceWith(t)}var l=e.parent(),c=this.clone(e,!1,!1);return e.after(c),t.append(e),l?c.replaceWith(t):t}},{key:"merge",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e.equal(t)){if(t.isText())return e.append(t),void this.removeSide(e);var r=this.editor,i=r.block,o=r.mark,a=r.list,s=t,l=this.isList(e),c=this.isList(t.name);if(l&&!c){var d=e.find("li");if(0===d.length)return;e=It(d[d.length-1])}if(!l&&c){var u=t.find("li");u.length>0&&(t=It(u[0])),u[1]&&(s=It(u[0]))}if(this.isCustomize(e)){var h,p,f=e.first();if(!(null===(h=f)||void 0===h?void 0:h.isCard())){var v=a.getPlugins(),g=a.getPluginNameByNode(e),m=v.find((function(e){return e.constructor.pluginName===g}));(null===m||void 0===m?void 0:m.cardName)&&(a.addCardToCustomize(e,m.cardName),f=e.first())}if(this.isCustomize(t)&&!(null===(p=f)||void 0===p?void 0:p.equal(t))){var b=t.first();(null===b||void 0===b?void 0:b.isCard())&&f.attributes(be)===b.attributes(be)&&b.remove()}}for(var y=e.last(),w=t.first(),k=i.findPlugin(e);w;){var x,O,C=w.next(),E=o.findPlugin(w);if(k&&E&&k.disableMark&&k.disableMark.indexOf(E.constructor.pluginName)>-1)this.unwrap(w).forEach((function(t){e.append(t)}));else if(w.isText()&&/\u200b/.test(w.text())){var j=w.parent(),M=w.prev(),N=w.next();if(!j||!this.isMark(j)&&(M&&!this.isInline(M)||N&&!this.isInline(N))){w.remove(),w=N;continue}}else if(E&&1===(null===(x=w.get())||void 0===x?void 0:x.childNodes.length)){var S=w.prev();S&&!S.isText()||w.allChildren().forEach((function(e){var t,n=e.text();e.type===at().TEXT_NODE&&n&&!(null===(t=e.next())||void 0===t?void 0:t.isCursor())&&e.text(n.replace(/\u200b/,""))}))}w.length>0&&!w.equal(e)&&!(null===(O=w.parent())||void 0===O?void 0:O.equal(e))&&e.append(w),w=C}if(n&&s.remove(),y&&"br"===y.name)for(var T=y.next();T;){if(T.isCursor()){y.remove();break}T=T.next()}this.removeSide(e)}}},{key:"replace",value:function(e,t){for(var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.clone(t,!1,i),a=this.isCustomize(e)&&"li"===e.name&&(null===(n=e.first())||void 0===n?void 0:n.isCard())?null===(r=e.first())||void 0===r?void 0:r.next():e.first();a;){var s=a.next();o.append(a),a=s}return e.isText()&&o.append(e.clone()),e.replaceWith(o)}},{key:"insertText",value:function(e,t){var n,r=this.editor;if(ct(r)){var i=r.change,o=t||i.range.toTrusty(),a=at(o.startContainer);o.collapsed||i.delete(t);var s=a.createTextNode(e);return null===(n=this.insert(s,o))||void 0===n||n.handleBr(),t||i.apply(o),o}}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yt(e)){if(0===e.length)throw"Not found node";e=e[0]}var i=this.editor;if(ct(i)){var o=i.change,a=i.block,s=i.schema,l=i.mark,c=(t=t||o.range.get()).cloneRange().shrinkToTextNode(),d=c.startNode,u=c.startOffset,h=d.prev(),p=d.parent(),f=d.text()||"",v=f.substr(0,u);d.isText()&&/\u200b$/.test(v)&&f.length>1&&(h&&!this.isInline(h)||!h&&p&&!this.isInline(p))&&d.get().splitText(f.length-1).remove();var g=null===p||void 0===p?void 0:p.attributes(xe);if(!g&&d.isCard()&&t.setStartAfter(d),g&&p&&["left","right"].includes(g)){var m=i.card.find(p);m&&("left"===g?t.setStartBefore(m.root):t.setStartAfter(m.root))}if(this.isBlock(e)){var b=t.commonAncestorNode;b.isText()&&(b=i.block.closest(b));var y=null;if(this.isBlock(b)&&this.isEmpty(b))y=r?b:void 0;else{var w,k=!1;if(a.isFirstOffset(t,"start")&&(k=!0),y=a.split(t),k)y=null===(w=y)||void 0===w?void 0:w.prev()}var x=a.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode);if(!x.isCard()&&s.isAllowIn(x.name,e.nodeName.toLowerCase()))x.find("br").remove(),x.append(e);else{for(var O,C=x.parent();C&&this.isBlock(C)&&!x.isEditable()&&!s.isAllowIn(C.name,e.nodeName.toLowerCase());)C=(x=C).parent();var E=s.getCanMergeTags(),j=e.nodeName.toLowerCase(),M=null;if(y&&x.name===j&&E.includes(x.name)){var N;x=y;var S=document.createDocumentFragment(),T=[],_=null===(N=x.get())||void 0===N?void 0:N.nextSibling;e.childNodes.forEach((function(e){_?T.push(e):T.unshift(e)})),S.append.apply(S,T),e=S,M=S.lastChild}x.isEditable()&&0===(null===(O=x.get())||void 0===O?void 0:O.childNodes.length)?x.append(e):(this.isEmptyWidthChild(x)||a.isLastOffset(t,"start")?(x.after(e),this.isEmptyWidthChild(x)&&y&&x.remove()):(x.before(e),y&&this.isEmptyWidthChild(y)&&y.remove()),M&&(e=M))}(e instanceof Element||e instanceof DocumentFragment)&&i.nodeId.generate(e)}else{var A=a.closest(t.startNode.isEditable()?t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:t.startNode),I=A?a.findPlugin(A):void 0;if(I){var D=It(e),z=function(e){if(n.isMark(e)){var t=l.findPlugin(e);if(!t)return;if(I.disableMark&&I.disableMark.indexOf(t.constructor.pluginName)>-1)return!0}return!1};if(D.allChildren().forEach((function(e){z(e)&&n.unwrap(e)})),z(D)){var L=D.document.createDocumentFragment();D.children().each((function(e){L.appendChild(e)})),D.remove(),e=L.childNodes[L.childNodes.length-1],t.insertNode(L)}else t.insertNode(e);if(0===D.length)return t}else t.insertNode(e)}return e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute(ye)||e.hasAttribute(be))?t.collapse(!1):t.select(e,!this.isVoid(e)&&e.nodeType!==Node.TEXT_NODE).shrinkToElementNode().collapse(!1)}}},{key:"setAttributes",value:function(e,t){var n=t.style;for(var r in t)if("style"!==r)if("className"===r){var i=t[r];Array.isArray(i)?i.forEach((function(t){return e.addClass(t)})):e.addClass(i)}else e.attributes(r,t[r].toString());"number"===typeof n?n={}:"string"===typeof n&&(n=Ye(n)),n=n||{};var o=Object.keys(n);for(var a in n){var s=n[a];/^0(px|em)?$/.test(s.toString())&&(s=""),e.css(a,s.toString())}return 0!==o.length&&0!==Object.keys(e.attributes("style")).length||e.removeAttributes("style"),e}},{key:"removeMinusStyle",value:function(e,t){if(e.isElement()){var n=e.css();if(n[t])(parseInt(n[t]||"0",10)||0)<0&&e.css(t,"")}}},{key:"mergeChild",value:function(e){for(var t=this.editor,n=t.schema,r=t.list,i=n.getAllowInTags(),o=e.first();o;){for(var a=o.next();a&&o.name===a.name&&(i.indexOf(o.name)>-1&&!this.isList(o)||this.isList(o)&&r.isSame(o,a));){for(var s=a.next(),l=a.first();l;){var c=l.next();o.append(l),l=c}a.remove(),this.mergeChild(o),a=s}o=a}}},{key:"removeSide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"br",n=e.first();(null===n||void 0===n?void 0:n.name)===t&&e.children().toArray().filter((function(e){return!e.isCursor()})).length>1&&n.remove();var r=e.last();(null===r||void 0===r?void 0:r.name)===t&&e.children().toArray().filter((function(e){return!e.isCursor()})).length>1&&r.remove()}},{key:"flat",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.editor.block,r=e.first(),i=e.fragment?It("<p />"):this.clone(e,!1);r;){var o=r.next();if(r.isBlockCard()||this.isNestedBlock(r))n.flat(r,t);else if(this.isBlock(r))r=this.flat(r,t);else{var a=this.clone(i,!1),s="li"===a.name;for(r.before(a);r;){var l,c;o=r.next();var d="br"===r.name&&!s;if(d&&(null===(l=r.parent())||void 0===l?void 0:l.isRoot())&&a.append(r),r.isText()){var u=r.text(),h=/^((\n|\r)+)/.exec(u),p=!1;if(h&&(p=!0,0===(u=u.substring(h[1].length)).length&&r.remove()),h=/((\n|\r)+)$/.exec(u)){r.text(u.substr(0,h.index)),a.append(r);break}p&&r.length>0&&r.text(u)}if(r.length>0&&a.append(r),null===(c=o)||void 0===c?void 0:c.isText()){var f=o.text();if(/^(\n|\r)+/.exec(f))break}if(d||!o||this.isBlock(o)||o.isBlockCard())break;r=o}this.removeSide(a),n.flat(a,t),this.addBrForBlock(a)}this.addBrForBlock(r),this.removeSide(r),r=o}return e.fragment&&(e=It(e.fragment)),(r=e.first())||e.remove(),e}},{key:"normalize",value:function(e){return e=this.flat(e),this.mergeChild(e),e}},{key:"html",value:function(e,t){var n,r=this;return void 0===t?e.length>0&&(null===(n=e.get())||void 0===n?void 0:n.innerHTML)||"":(e.each((function(e){var n=e;n.innerHTML=t,r.editor.nodeId.generateAll(n)})),e)}},{key:"clone",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.editor.nodeId,i=[];return e.each((function(e){var o=e.cloneNode(t),a=It(o);n||(r.generateAll(a,!0),r.isNeed(a)&&r.generate(a,!0)),i.push(o)})),It(i)}},{key:"getBatchAppendHTML",value:function(e,t){var n;if(0===e.length)return t;var r=t.startsWith("\\u")||t.startsWith("&#")?It(t,null):It(t);return e.forEach((function(e){(e=e.clone(!1)).append(r),r=e})),(null===(n=r.get())||void 0===n?void 0:n.outerHTML)||""}},{key:"removeZeroWidthSpace",value:function(e){var t=this;e.traverse((function(e){var n=e[0];if(n.nodeType===Node.TEXT_NODE){var r=n.nodeValue;if(2===(null===r||void 0===r?void 0:r.length)){var i=n.nextSibling,o=n.previousSibling;if(!(8203===r.charCodeAt(1)&&i&&i.nodeType===Node.ELEMENT_NODE&&[he,pe,fe].indexOf(i.getAttribute(ee)||"")>=0)){var a=e.parent();if((8203!==r.charCodeAt(1)||!(!i&&a&&t.isInline(a)||i&&t.isInline(i)))&&(8203!==r.charCodeAt(0)||!(!o&&a&&t.isInline(a)||o&&t.isInline(o)))&&8203===r.charCodeAt(0)){var s,l=n.splitText(1);l.previousSibling&&(null===(s=l.parentNode)||void 0===s||s.removeChild(l.previousSibling))}}}}}))}}]),e}(),qt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(u.a)(this,e),this.range=void 0,this.editor=void 0,this.key="",this.anchor=null,this.focus=null,this.editor=t,this.range=n,this.key=r}return Object(h.a)(e,[{key:"has",value:function(){return!!this.focus&&!!this.anchor}},{key:"create",value:function(){var e=this.range,t=e.commonAncestorNode,n=e.startNode,r=e.endNode;if(t.isEditable()||t.inEditor()){var i=t.document;if(i){var o=t.closest(re);if(this.key)o.find('[data-anchor-id="'.concat(this.key,'"]')).remove(),o.find('[data-focus-id="'.concat(this.key,'"]')).remove(),o.find('[data-cursor-id="'.concat(this.key,'"]')).remove();else{var a=o.find(ve);a.each((function(e,t){var n=a.eq(t);n&&!n.attributes("data-anchor-id")&&n.remove()}));var s=o.find(ge);s.each((function(e,t){var n=s.eq(t);n&&!n.attributes("data-focus-id")&&n.remove()}));var l=o.find(me);l.each((function(e,t){var n=l.eq(t);n&&!n.attributes("data-cursor-id")&&n.remove()}))}var c=n.closest(Ee);if(c.length>0)n.closest(Me).length>0&&this.range.setStartBefore(c),n.closest(Se).length>0&&this.range.setStartAfter(c);if(!n.equal(r)){var d=r.closest(Ee);if(d.length>0)r.closest(Me).length>0&&this.range.setEndBefore(d),r.closest(Se).length>0&&this.range.setEndAfter(d)}if(this.range.collapsed){var u=It(i.createElement("span"));return u.attributes(ee,fe),this.key&&u.attributes("data-cursor-id",this.key),this.range.insertNode(u),this.anchor=u,void(this.focus=u)}var h=this.range.cloneRange();h.collapse(!0);var p=It(i.createElement("span"));p.attributes(ee,he),this.key&&p.attributes("data-anchor-id",this.key),h.insertNode(p),this.range.setStartAfter(p);var f=this.range.cloneRange();f.collapse(!1);var v=It(i.createElement("span"));v.attributes(ee,pe),this.key&&v.attributes("data-focus-id",this.key),f.insertNode(v),this.anchor=p,this.focus=v}}}},{key:"move",value:function(){var e,t;if(this.focus&&this.anchor){if(this.key){var n,r,i=this.range.commonAncestorNode.closest(re);this.focus.inEditor()&&(null===(n=this.focus.get())||void 0===n?void 0:n.isConnected)||(this.focus=i.find("[data-".concat(this.focus.attributes(ee),'-id="').concat(this.key,'"]'))),this.anchor.inEditor()&&(null===(r=this.anchor.get())||void 0===r?void 0:r.isConnected)||(this.anchor=i.find("[data-".concat(this.anchor.attributes(ee),'-id="').concat(this.key,'"]')))}var o=this.editor.node;if((null===(e=this.anchor.get())||void 0===e?void 0:e.isConnected)||(this.anchor=this.range.commonAncestorNode.find("[".concat(ee,'="anchor"]'))),(null===(t=this.focus.get())||void 0===t?void 0:t.isConnected)||(this.focus=this.range.commonAncestorNode.find("[".concat(ee,'="focus"]'))),this.anchor.equal(this.focus)){var a,s=this.anchor,l=s.parent();if(!l)return;o.removeZeroWidthSpace(l),l[0].normalize();var c=!1,d=s.prev(),u=s.next();if(d&&d.isCard()){var h=d.find(Se);h.length>0&&(this.range.select(h,!0),this.range.collapse(!1),c=!0)}else if(u&&u.isCard()){var p=u.find(Me);p.length>0&&(this.range.select(p,!0),this.range.collapse(!1),c=!0)}return c||(this.range.setStartBefore(s[0]),this.range.collapse(!0)),Ie?(l[0].normalize(),s.remove()):(s.remove(),l[0].normalize()),void("p"===l.name&&0===(null===(a=l.get())||void 0===a?void 0:a.childNodes.length)&&l.append(It("<br />")))}var f,v=this.anchor.parent();if(v&&(o.removeZeroWidthSpace(v),this.anchor.length>0&&this.range.setStartBefore(this.anchor),this.anchor.remove(),v[0].normalize()),v=this.focus.parent())if(o.removeZeroWidthSpace(v),this.focus.length>0&&this.range.setEndBefore(this.focus),this.focus.remove(),v[0].normalize(),"p"===v.name&&0===(null===(f=v.get())||void 0===f?void 0:f.childNodes.length)&&v.append(It("<br />")),Le){var g=window.getSelection();null===g||void 0===g||g.removeAllRanges(),null===g||void 0===g||g.addRange(this.range.base)}}}},{key:"getNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?e.clone(!0):e;if(!this.focus||!this.anchor)return r;if("left"===t||"center"===t){var i="center"!==t?this.anchor:this.focus,o=It(this.key?"[data-".concat(i.attributes(ee),'-id="').concat(this.key,'"]'):"[".concat(ee,"=").concat(i.attributes(ee),"]"),r.get());this.key||(o=o.toArray().find((function(e){return!e.attributes("data-".concat(i.attributes(ee),"-id"))})));var a=!1;r.traverse((function(e){if(o&&e.equal(o)){var t,r=e.parent();return o.remove(),"p"===(null===r||void 0===r?void 0:r.name)&&0===(null===(t=r.get())||void 0===t?void 0:t.childNodes.length)&&r.append(It("<br />")),void(a=!0)}a&&n(e)&&(e.attributes(ee)!==i.attributes(ee)||"cursor"===i.attributes(ee))&&e.remove()}),!0)}if("right"===t||"center"===t){var s="center"!==t?this.focus:this.anchor,l=It(this.key?"[data-".concat(s.attributes(ee),'-id="').concat(this.key,'"]'):"[".concat(ee,"=").concat(s.attributes(ee),"]"),r.get());this.key||(l=l.toArray().find((function(e){return!e.attributes("data-".concat(s.attributes(ee),"-id"))})));var c=!1;r.traverse((function(e){if(l&&e.equal(l)){var t,r=e.parent();return l.remove(),"p"===(null===r||void 0===r?void 0:r.name)&&0===(null===(t=r.get())||void 0===t?void 0:t.childNodes.length)&&r.append(It("<br />")),void(c=!0)}c&&n(e)&&(e.attributes(ee)!==s.attributes(ee)||"cursor"===s.attributes(ee))&&e.remove()}),!1)}return r}}]),e}();qt.removeTags=function(e){return e.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")};var Ut=function(e,t,n){var r=wt(e)?e:e[0];if(r.nodeType===Node.ELEMENT_NODE){var i=r.getAttribute(ee)||"";if([fe,he,pe].indexOf(i)>-1)return!0;if(r.getAttribute(ce)||i===ie)return!0;var o=r.parentElement,a=(null===o||void 0===o?void 0:o.getAttribute(ee))||"";if(i===ne||a===ne)return!1;var s=xt(r);if((null===o||void 0===o?void 0:o.getAttribute(Oe))&&o&&(null===n||void 0===n||n.push(It(o))),!s&&o&&xt(o)&&!Ot(o))return!0;if(t){if(s)return!1;var l=t.find((function(t){return t===e[0]}));if(l)return l.__card_root&&(null===n||void 0===n||n.push(l.__card_root)),!0}var c=Et(r,"".concat(Ee,",").concat(oe),lt);if(!c||!(c instanceof Element))return!1;if(c.getAttribute(ee)===ie)return!0;if(c.getAttribute(Oe)&&(null===n||void 0===n||n.push(It(c))),!s&&xt(c)&&!Ot(c))return!0;if(!s||Ot(r)||!o)return!1;var d=Et(o,Ee,lt);if(!d||!(d instanceof Element))return!1;if(d.getAttribute(Oe)&&d&&(null===n||void 0===n||n.push(It(d))),d&&xt(d)&&!Ot(d))return!0}return!1},Wt=function(e,t){var n=wt(e)?e:e[0];if(Ct(n))return!0;if(xt(n)&&["id","class","style",Oe,Ce].includes(t))return!0;var r=n.getAttribute(le);return!!("*"===r||r&&r.split(",").some((function(e){return e.trim().toLowerCase()===t.toLowerCase()})))},Vt=function(e,t){var n=e,r=e,i=t,o=t,a=e,s=e,l=t,c=t;return!(!e||!t)&&(n.li&&o.ld?N()(n.li,o.ld)&&N()(e.p,t.p):r.ld&&i.li?N()(r.ld,i.li)&&N()(e.p,t.p):a.si&&c.sd?N()(a.si,c.sd)&&(N()(e.p,t.p)||Yt(e.p,t.p,a.si.length)||Yt(t.p,e.p,a.si.length)):!(!s.sd||!l.si)&&(N()(s.sd,l.si)&&N()(e.p,t.p)))},Yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.length!==t.length)return!1;var r=t.slice();return r[r.length-1]=r[r.length-1]-n,N()(e.slice(),r)},Gt=function e(t){var n=document.createDocumentFragment(),r=null,i=0,o=null;for("string"===typeof t[0]&&(r=t[0],i=1);i<t.length;i++)if(Array.isArray(t[i])){var a=t[i-1];if(a&&"[object Object]"===a.toString()&&Object.keys(a).includes(ye))continue;var s=e(t[i]);s&&n.appendChild(s)}else if("[object Object]"===t[i].toString()){if(r){for(var l in o=document.createElement(r),t[i]){var c;null===(c=o)||void 0===c||c.setAttribute(Qe(l),Xe(t[i][l]))}var d,u,h=Object.keys(t[i]);if(h.indexOf(be)>-1&&h.indexOf(ye)<0)null===(d=o)||void 0===d||d.setAttribute(ye,t[i][be]),null===(u=o)||void 0===u||u.removeAttribute(be)}}else if("number"===typeof t[i]||"string"===typeof t[i]){var p=document.createTextNode(t[i].toString());n.appendChild(p)}return!o&&r&&(o=document.createElement(r)),o?(o.appendChild(n),o):n.childNodes[0]},Zt=function(e,t){e instanceof Node||(e=e[0]);var n=e.childNodes;if(0!==n.length)for(var r=0;r<n.length;r++){var i=n.item(r);if(i){var o=Xt(i);o&&t.push(o)}}},Xt=function(e){var t;if(e instanceof Node||(e=e[0]),!Ut(e)){var n=e.nodeValue;if(e instanceof Element){var r=e.attributes;t=[e.nodeName.toLowerCase()];for(var i={},o=0;r&&o<r.length;o++){var a=r[o],s=a.name,l=a.specified,c=a.value;l&&!Wt(e,s)&&("style"===s&&e instanceof HTMLElement?i.style=We(e.style.cssText||c):"string"===typeof c&&(i[s]=c))}return t.push(i),Zt(e,t),t}if(e instanceof Text)return String(n)}},Qt=function e(t,n){if(!Array.isArray(t)||t.length<1)return null;for(var r=1;r<t.length;r++)if(1===r){var i=t[r];if("object"===Object(l.a)(i)&&n&&n(i))return{path:[],name:t[0],attributes:i,children:t.slice(r+1)}}else if(Array.isArray(t[r])){var o=e(t[r],n);if(o)return o.path.unshift(r),o}return null},Kt=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.editor=void 0,this.base=void 0,this.toRange=function(){return r.base},this.collapse=function(e){return r.base.collapse(e),r},this.cloneRange=function(){return e.from(r.editor,r.base.cloneRange())},this.select=function(e,t){return t?r.base.selectNodeContents(yt(e)?e[0]:e):r.base.selectNode(yt(e)?e[0]:e),r},this.getText=function(){return r.cloneContents().textContent},this.getClientRect=function(){var e=r.getClientRects().item(0);return e||(e=r.getBoundingClientRect()),e},this.enlargeFromTextNode=function(){var e=function(e,t,n){var i;if(e.nodeType===Node.TEXT_NODE)if(0===t)switch(n){case"start":r.setStartBefore(e);break;case"end":r.setEndBefore(e)}else if(t===(null===(i=e.nodeValue)||void 0===i?void 0:i.length))switch(n){case"start":r.setStartAfter(e);break;case"end":r.setEndAfter(e)}};return e(r.startContainer,r.startOffset,"start"),e(r.endContainer,r.endOffset,"end"),r},this.shrinkToTextNode=function(){var e=function(e,t,n){if(e.nodeType===Node.ELEMENT_NODE){var i=e.childNodes;if(0!==i.length){var o,a,s,l;if(t>0&&(o=i[t-1]),t<i.length&&(a=i[t]),o&&o.nodeType===Node.TEXT_NODE)t=(null===(l=(s=o).nodeValue)||void 0===l?void 0:l.length)||0;if(a&&a.nodeType===Node.TEXT_NODE&&(s=a,t=0),s)switch(n){case"start":r.setStart(s,t);break;case"end":r.setEnd(s,t)}}}};return e(r.startContainer,r.startOffset,"start"),e(r.endContainer,r.endOffset,"end"),r},this.enlargeToElementNode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.enlargeFromTextNode(),i=r.editor.node,o=function(r,o,a){var s,l,c=It(r);if(!(c.type===Node.TEXT_NODE||!e&&i.isBlock(c)||c.isEditable()))if(0===o){for(;!c.prev()&&(l=c.parent())&&(e||!i.isBlock(l))&&l.inEditor()&&!l.isEditable();){if(!t){if(!e&&l.isElement())break;if(e&&i.isBlock(l))break}c=l}a?n.setStartBefore(c[0]):n.setEndBefore(c[0])}else if(o===(null===(s=c.get())||void 0===s?void 0:s.childNodes.length)){for(;!c.next()&&(l=c.parent())&&(e||!i.isBlock(l))&&l.inEditor()&&!l.isEditable();){if(!t){if(!e&&l.isElement())break;if(e&&i.isBlock(l))break}c=l}a?n.setStartAfter(c[0]):n.setEndAfter(c[0])}};return o(n.startContainer,n.startOffset,!0),o(n.endContainer,n.endOffset,!1),r},this.shrinkToElementNode=function(){for(var e,t,n=r.editor.node;r.startContainer.nodeType===Node.ELEMENT_NODE&&(e=r.startContainer.childNodes[r.startOffset])&&(t=It(e))&&e.nodeType===Node.ELEMENT_NODE&&!t.isCursor()&&!n.isVoid(e)&&(!t.isCard()||t.isEditableCard()||t.find(Me).length>0);)r.setStart(e,0);for(;r.endContainer.nodeType===Node.ELEMENT_NODE&&r.endOffset>0&&(e=r.endContainer.childNodes[r.endOffset-1])&&(t=It(e))&&e.nodeType===Node.ELEMENT_NODE&&!n.isVoid(e)&&!t.isCursor()&&(!t.isCard()||t.isEditableCard()||t.find(Se).length>0);)r.setEnd(e,e.childNodes.length);return r},this.createSelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new qt(r.editor,r,e);return t.create(),t},this.getSubRanges=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[];return r.commonAncestorNode.traverse((function(o){if(o.isText()){var a,s=o.get(),l=(null===(a=s.nodeValue)||void 0===a?void 0:a.length)||0,c=r.comparePoint(s,0),d=r.comparePoint(s,l),u=e.create(r.editor);if(c<0){if(d<0)return;0===d?u.setOffset(s,r.startOffset,l):u.setOffset(s,r.startOffset,r.endOffset)}else{if(0!==c)return;if(d<0)return;0===d?u.setOffset(s,0,l):u.setOffset(s,0,r.endOffset)}i.push(u)}else if(t&&o.isCard()&&!o.isEditableCard()){var h,p=r.editor.card.find(o);if(!p||n&&!1===p.constructor.singleSelectable)return;var f=p.getCenter(),v=null===(h=f.get())||void 0===h?void 0:h.parentNode;if(!v||!f.inEditor())return;var g=f.index(),m=o.get(),b=r.comparePoint(v,g),y=r.comparePoint(v,g+1),w=e.create(r.editor);if(b<0){if(y<0)return;0===y?w.setOffset(m,r.startOffset,g+1):w.setOffset(m,r.startOffset,r.endOffset)}else{if(0!==b)return;if(y<0)return;0===y?w.setOffset(v,g,g+1):w.setOffset(v,g,r.endOffset)}i.push(w)}})),0===i.length&&i.push(r),i},this.setOffset=function(e,t,n){return yt(e)&&(e=e[0]),r.setStart(e,t),r.setEnd(e,n),r},this.findElements=function(){var e=r.startContainer,t=r.endContainer,n=r.startOffset,i=r.endOffset,o=r.collapsed,a=[];if(e!==t||!0===o||e.nodeType===Node.TEXT_NODE)return a;for(var s=e.childNodes,l=n;l<i;l++)a.push(s[l]);return a},this.inCard=function(){var e=r.startNode.closest(Ee);return e&&e.length>0},this.getStartOffsetNode=function(){var e=r.startContainer,t=r.startOffset;return(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(e.childNodes[t]||e.childNodes[t-1])||e},this.getEndOffsetNode=function(){var e=r.endContainer,t=r.endOffset;return(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(e.childNodes[t]||e.childNodes[t-1])||e},this.scrollIntoView=function(){var e=r.endNode.get();Re&&e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},this.scrollRangeIntoView=function(){var e=r.getEndOffsetNode(),t=e.nodeType===Node.TEXT_NODE?e.parentNode:e,n=r.collapsed?t.getBoundingClientRect():r.getClientRect(),i=window.innerHeight;(n.bottom>=i||n.bottom<=0)&&t.scrollIntoView({block:"center"})},this.scrollIntoViewIfNeeded=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.editor.container,t=arguments.length>1?arguments[1]:void 0;if(r.collapsed)e.scrollIntoView(It(r.getEndOffsetNode()));else{var n=r.getStartOffsetNode(),i=r.getEndOffsetNode();It(n).scrollIntoView(t),It(i).scrollIntoView(t)}},this.containsCard=function(){var e=r.collapsed,t=r.commonAncestorNode;return!e&&(3!==t.type&&t.find(Ee).length>0||t.closest(Ee).length>0)},this.handleBr=function(e){var t,n=r.editor,i=n.list,o=n.block.closest(r.commonAncestorNode);o.find("br").each((function(t){var n,r=It(t),o=r.prev(),a=r.next(),s=r.parent();if((!o||(null===s||void 0===s?void 0:s.hasClass(i.CUSTOMZIE_LI_CLASS))&&(null===s||void 0===s||null===(n=s.first())||void 0===n?void 0:n.equal(o)))&&a&&"br"!==a.name&&!a.isCursor()||!a&&o&&"br"!==o.name){var l;if(e&&o&&(!(null===s||void 0===s?void 0:s.hasClass(i.CUSTOMZIE_LI_CLASS))||!(null===s||void 0===s||null===(l=s.first())||void 0===l?void 0:l.equal(r.prev()))))return;r.remove()}}));var a,s=o.first(),l=o.children();if(!s||1===l.length&&o.hasClass(i.CUSTOMZIE_LI_CLASS)&&(null===s||void 0===s?void 0:s.isCard()))return o.append(It("<br />")),r;if(1===l.length&&s.isText()&&0===s.text().replace(/\r\n|\n|\t|\u200b/g,"").length)return o.html("<br />"),r;2===l.length&&o.hasClass(i.CUSTOMZIE_LI_CLASS)&&(null===s||void 0===s?void 0:s.isCard())&&["cursor","anchor","focus"].includes((null===(t=o.last())||void 0===t?void 0:t.attributes(ee))||"")&&(null===(a=o.first())||void 0===a||a.after("<br />"));return r},this.getPrevNode=function(){r.enlargeFromTextNode();var e=r.startNode,t=r.startOffset;if(!e.isText()){var n=e.children();if(0!==n.length)return n.eq(t-1)}},this.getNextNode=function(){r.enlargeFromTextNode();var e=r.endNode,t=r.endOffset;if(!e.isText()){var n=e.children();if(0!==n.length)return n.eq(t)}},this.editor=t,this.base=n}return Object(h.a)(e,[{key:"collapsed",get:function(){return this.base.collapsed}},{key:"endOffset",get:function(){return this.base.endOffset}},{key:"startOffset",get:function(){return this.base.startOffset}},{key:"startContainer",get:function(){return this.base.startContainer}},{key:"endContainer",get:function(){return this.base.endContainer}},{key:"commonAncestorContainer",get:function(){return this.base.commonAncestorContainer}},{key:"cloneContents",value:function(){return this.base.cloneContents()}},{key:"deleteContents",value:function(){return this.base.deleteContents()}},{key:"extractContents",value:function(){return this.base.extractContents()}},{key:"getBoundingClientRect",value:function(){return this.base.getBoundingClientRect()}},{key:"getClientRects",value:function(){return this.base.getClientRects()}},{key:"insertNode",value:function(e){var t,n;yt(e)&&(e=e[0]);var r,i=this.startNode;It(e).isCursor()||1!==(null===(t=i.get())||void 0===t?void 0:t.childNodes.length)||"br"!==(null===(n=i.first())||void 0===n?void 0:n.name)?"br"===i.name&&i.remove():null===(r=i.first())||void 0===r||r.remove();e.nodeType!==Node.TEXT_NODE&&"BR"!==e.nodeName||!i.isEditable()||this.shrinkToElementNode().shrinkToTextNode(),(e instanceof Element||e instanceof DocumentFragment)&&this.editor.nodeId.generate(e),this.base.insertNode(e)}},{key:"isPointInRange",value:function(e,t){return yt(e)&&(e=e[0]),this.base.isPointInRange(e,t)}},{key:"comparePoint",value:function(e,t){return yt(e)&&(e=e[0]),this.base.comparePoint(e,t)}},{key:"setEnd",value:function(e,t){return yt(e)&&(e=e[0]),this.base.setEnd(e,t)}},{key:"setEndAfter",value:function(e){if(yt(e)&&(e=e[0]),e.parentNode)return this.base.setEndAfter(e)}},{key:"setEndBefore",value:function(e){if(yt(e)&&(e=e[0]),e.parentNode)return this.base.setEndBefore(e)}},{key:"setStart",value:function(e,t){return yt(e)&&(e=e[0]),this.base.setStart(e,t)}},{key:"setStartAfter",value:function(e){if(yt(e)&&(e=e[0]),e.parentNode)return this.base.setStartAfter(e)}},{key:"setStartBefore",value:function(e){if(yt(e)&&(e=e[0]),e.parentNode)return this.base.setStartBefore(e)}},{key:"toString",value:function(){return this.base.toString()}},{key:"startNode",get:function(){return It(this.base.startContainer)}},{key:"endNode",get:function(){return It(this.base.endContainer)}},{key:"commonAncestorNode",get:function(){return It(this.base.commonAncestorContainer)}},{key:"deepCut",value:function(){this.collapsed||this.extractContents();var e=this.startNode;if(!e.isEditable()){var t=e;if(t&&!t.isEditable()){for(var n=t.parent();n&&!n.isEditable();)t=n,n=n.parent();this.setEndAfter(t[0]);var r=this.extractContents();this.insertNode(r),this.collapse(!0)}}}},{key:"equal",value:function(e){return this.startContainer===e.startContainer&&this.startOffset===e.startOffset&&this.endContainer===e.endContainer&&this.endOffset===e.endOffset}},{key:"getRootBlock",value:function(){if(this.startNode.isEditable())return this.startNode.children().eq(this.startOffset);for(var e=this.startNode;(null===(t=e)||void 0===t?void 0:t.parent())&&!e.parent().isEditable();){var t;e=e.parent()}return e}},{key:"filterPath",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];return function(r){var i=It(r);if(t&&["left","right","center","body"].includes(i.attributes(xe))){var o=e.editor.card.closest(i);return o&&(null===o||void 0===o?void 0:o.length)>0&&n.push(o),!0}return!!(t&&i.isCard()&&n.includes(i))||!Ut(i)}}},{key:"toPath",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.editor.container,r=this.cloneRange(),i=r.commonAncestorNode;if(i.isRoot()||i.inEditor()){r.shrinkToElementNode().shrinkToTextNode();var o=function(r,i){var o,a=r.attributes(te),s=a?0:-1,l=r.getPath(n,(null===(o=r.parent())||void 0===o?void 0:o.isRoot())?void 0:e.filterPath(t),(function(e,t,n){if(-1===e)return a="",s=-1,[];a||(a=n.attributes(te),s=t.length),t.unshift(e)}));return s=l.length-s,l.push(i),{path:l,id:a,bi:s}};return{start:o(r.startNode,r.startOffset),end:o(r.endNode,r.endOffset)}}}}]),e}();Kt.create=void 0,Kt.from=void 0,Kt.fromPath=void 0,Kt.create=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=arguments.length>2?arguments[2]:void 0;return t=r?n.caretRangeFromPoint(r.x,r.y):n.createRange(),Kt.from(e,t)},Kt.from=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!Jt(t)){var n=$t(t)?t:t.getSelection();if(!(n&&n.rangeCount>0))return null;t=n.getRangeAt(0)}return new Kt(e,t)},Kt.fromPath=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.container,a=t.start.path.slice(),s=t.end.path.slice(),l=a.pop(),c=s.pop(),d=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.container.get(),r=0;r<t.length;r++){var o=t[r];o<0&&(o=0);for(var a=void 0,s=n.firstChild,l=0;s;)if(!(s instanceof Element)||!s.getAttribute(ce)&&s.getAttribute(ee)!==ie||i&&["left","right"].includes(s.getAttribute(xe)||"")){if(l===o||!s.nextSibling){a=s;break}l++,s=s.nextSibling}else s=s.nextSibling;if(!a)break;n=a}return n},u=function(e,t,n,r){if(null!==n){var i,o;if(r<0&&(r=0),n.nodeType===Node.ELEMENT_NODE&&r>n.childNodes.length&&(r=n.childNodes.length),n.nodeType===Node.TEXT_NODE&&r>((null===(i=n.nodeValue)||void 0===i?void 0:i.length)||0))r=(null===(o=n.nodeValue)||void 0===o?void 0:o.length)||0;t[e](n,r)}},h=t.start.id?null===(n=o.get())||void 0===n?void 0:n.querySelector("[".concat(te,'="').concat(t.start.id,'"]')):o.get(),p=d(t.start.bi>-1&&h instanceof Element?a.slice(t.start.bi):a,h instanceof Element?h:void 0),f=t.end.id?null===(r=o.get())||void 0===r?void 0:r.querySelector("[".concat(te,'="').concat(t.end.id,'"]')):o,v=d(t.end.bi>-1&&f instanceof Element?s.slice(t.end.bi):s,f instanceof Element?f:void 0),g=Kt.create(e,document);return u("setStart",g,p,void 0===l?0:l),u("setEnd",g,v,void 0===c?0:c),g};var $t=function(e){return void 0!==e.getRangeAt},Jt=function(e){return void 0!==e.collapsed},en=function(e){return!!e&&void 0!==e.base};function tn(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}tn(".data-drop-cursor {\r\n\tposition: absolute;\r\n\twidth: 2px;\r\n\tbackground-color: #347EFF;\r\n}\r\n\r\ndiv.data-drag-image {\r\n\tbackground-color: #f9f9f9;\r\n}");var nn,rn,on,an=function(){function e(t,n){Object(u.a)(this,e),this.x=0,this.y=0,this.doc=document,this.range=void 0,this.caretRange=void 0,this.targetCard=void 0,this.caretCard=void 0,this.isCardLeftRange=!1,this.engine=void 0,this.options={className:"data-drop-cursor"},this.engine=t,this.options=Object(d.a)(Object(d.a)({},this.options),n)}return Object(h.a)(e,[{key:"getRangeForPoint",value:function(){var e=this.doc,t=this.x,n=this.y;if(void 0!==e.caretRangeFromPoint){var r=Kt.create(this.engine,e,{x:t,y:n});if(r)return r}if(event&&void 0!==event.rangeParent){var i=Kt.create(this.engine,e);return i.setStart(event.rangeParent,event.rangeOffset),i.collapse(!0),i}}},{key:"getCard",value:function(){return this.targetCard||this.caretCard}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move");var t=this.engine.card;this.x=e.clientX,this.y=e.clientY;var n=It(e.target||[]);this.doc=n.document||document,this.targetCard=t.find(n),this.caretRange=this.getRangeForPoint(),this.caretCard=this.caretRange?t.find(this.caretRange.commonAncestorContainer):void 0}},{key:"getRange",value:function(){var e,t=this.caretRange,n=this.doc,r=this.x,i=this.getCard();if(i&&i.root.length>0){e=Kt.create(this.engine,n);var o=i.root.getBoundingClientRect()||{left:0,right:0},a=(o.left+o.right)/2;e.select(i.root.get()),a<r?(e.collapse(!1),this.isCardLeftRange=!1):(e.collapse(!0),this.isCardLeftRange=!0)}return this.range=e||t,this.range}},{key:"getRect",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=this.isCardLeftRange,i=this.range,o=this.getCard();if(o&&o.root.length>0&&i){if(r){i.setEnd(i.commonAncestorContainer,i.endOffset+1);var a=i.getBoundingClientRect(),s=a.left,l=a.bottom,c=a.top;return i.setEnd(i.commonAncestorContainer,i.endOffset-1),{x:s-n,y:c,height:l-c}}i.setStart(i.commonAncestorContainer,i.startOffset-1);var d=i.getBoundingClientRect(),u=d.right,h=d.top,p=d.bottom;return i.setStart(i.commonAncestorContainer,i.startOffset+1),{x:u-n,y:h,height:p-h}}var f,v=null===(e=this.range)||void 0===e?void 0:e.getBoundingClientRect();0===(null===(t=v)||void 0===t?void 0:t.height)&&(v=(null===(f=this.range)||void 0===f?void 0:f.startContainer).getBoundingClientRect());var g=v||{},m=g.left,b=g.top;return{x:m,y:b,height:(g.bottom||0)-(b||0)}}},{key:"getCursor",value:function(){var e=this.options.className;return It("body > div.".concat(e))}},{key:"removeCursor",value:function(){this.getCursor().remove()}},{key:"setCursor",value:function(){this.removeCursor();var e=this.options.className,t=It('<div class="'.concat(e,'" />'));It(document.body).append(t)}}]),e}(),sn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.events={},this.globalEvents={},this.engine=void 0,this.isComposing=void 0,this.isSelecting=void 0,this.dragoverHelper=void 0,this.options=void 0,this.keydownRange=null,this.engine=t,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new an(t),this.options=n}return Object(h.a)(e,[{key:"isCardInput",value:function(e){for(var t=e.target?It(e.target):null;t;){if(t.isEditable())return!1;if("center"===t.attributes(xe))return!0;if(t.attributes(ee)===ie)return!0;var n=t.parent();if(!n)break;t=n}return!1}},{key:"onInput",value:function(e){var t=this,n=this.options.bindInput;if(!n||n()){var r=null;this.onContainer("compositionstart",(function(e){if(!t.engine.readonly){t.isCardInput(e)||t.engine.ot.startMutationCache();var n=t.engine,r=n.change,i=n.node,o=n.block,a=n.list,s=r.range.get().cloneRange().shrinkToTextNode().enlargeToElementNode();if(!s.collapsed){var l,c=o.closest(s.startNode),d=o.closest(s.endNode);if((i.isCustomize(c)||i.isCustomize(d))&&!c.equal(d))null===(l=a.backspaceEvent)||void 0===l||l.trigger(new KeyboardEvent(""))}t.isComposing=!0}})),this.onContainer("compositionend",(function(){t.engine.readonly||(t.isComposing=!1)})),this.onContainer("beforeinput",(function(e){if(!t.engine.readonly){var n=t.engine,i=n.change,o=n.card,a=n.node,s=n.block,l=n.list;if("@"===e.data&&!t.isCardInput(e))!1===t.engine.trigger("keydown:at",e)&&(t.engine.ot.submitMutationCache(),e.preventDefault());i.rangePathBeforeCommand||i.cacheRangeBeforeCommand();var c=i.range.get().cloneRange().shrinkToTextNode().enlargeToElementNode(),d=c.startNode;if(Le&&"deleteCompositionText"===e.inputType&&"li"===d.name&&d.length>0&&!a.isCustomize(d)){var u=d[0].childNodes;1===u.length&&"BR"!==u[0].nodeName&&(d.prepend("<br />"),setTimeout((function(){var e=d[0].childNodes;2===e.length&&"BR"===e[0].nodeName&&"BR"===e[1].nodeName&&e[0].remove()}),0))}if(Pe&&"li"===d.name&&1===c.startOffset&&a.isCustomize(d)&&t.isComposing){var h=d.first(),p=null===h||void 0===h?void 0:h.next(),f=function(){var e=It("\u200b",null);null===h||void 0===h||h.after(e),c.setOffset(e,1,1),i.range.select(c),r=d};if(null===p||void 0===p?void 0:p.isText()){var v=p.text();/^\u200b/.test(v)||f()}else"br"===(null===p||void 0===p?void 0:p.name)&&p.remove(),f()}if(c.collapsed||("body"===c.commonAncestorNode.attributes(xe)?o.remove(c.commonAncestorNode):("body"===c.startNode.attributes(xe)&&o.remove(c.startNode),"body"===c.endNode.attributes(xe)&&o.remove(c.endNode))),!c.collapsed&&!t.isComposing){var g,m=s.closest(c.startNode),b=s.closest(c.endNode);if((a.isCustomize(m)||a.isCustomize(b))&&!m.equal(b))null===(g=l.backspaceEvent)||void 0===g||g.trigger(new KeyboardEvent("")),a.insertText(e.data||"")}var y=e.inputType;t.isComposing&&!y.includes("Composition")&&t.engine.ot.submitMutationCache();["format","history"].forEach((function(n){if(0===y.indexOf(n)){e.preventDefault();var r=y.substring(n.length).toLowerCase();t.engine.command.queryEnabled(r)&&t.engine.command.execute(r)}}))}}));var i=null;this.onContainer("input",(function(n){t.engine.readonly||t.isCardInput(n)||(t.engine.isEmpty()?t.engine.showPlaceholder():t.engine.hidePlaceholder(),i&&clearTimeout(i),i=setTimeout((function(){if(!t.isComposing){if(Pe&&r){var i=r.first(),o=null===i||void 0===i?void 0:i.next();if(null===o||void 0===o?void 0:o.isText()){var a=o.text();if(/^\u200b/.test(a)){var s=o.get();null===s||void 0===s||s.splitText(1),null===s||void 0===s||s.remove()}}var l=t.engine.change.range.get(),c=l.startNode,d=l.startOffset;if(l.collapsed&&(null===c||void 0===c?void 0:c.isText())){var u=c.text(),h=u.substring(d);/^\u200b/.test(h)&&(c.text(u.substring(0,d)+h.substring(1)),l.setOffset(c,d,d),t.engine.change.range.select(l))}r=null}e(n),t.engine.ot.submitMutationCache()}}),10))}))}}},{key:"onSelect",value:function(e){var t=this,n=this.options.bindSelect;n&&!n()||(this.onContainer(Re?"touchstart":"mousedown",(function(e){t.isCardInput(e)||(t.isSelecting=!0)})),this.onDocument(Re?"touchend":"mouseup",(function(n){t.isSelecting&&(t.isSelecting=!1,window.setTimeout((function(){return e(n)}),10))})),this.onContainer("keydown",(function(){var e=Kt.from(t.engine);t.keydownRange=e})),this.onContainer("keyup",(function(n){if(!t.engine.readonly&&!t.isCardInput(n)&&(i()("left",n)||i()("right",n)||i()("up",n)||i()("down",n)||"Meta"===n.key||i()("shift+left",n)||i()("shift+right",n)||i()("shift+up",n)||i()("shift+down",n)||i()("ctrl+b",n)||i()("ctrl+f",n)||i()("ctrl+n",n)||i()("ctrl+p",n)||i()("ctrl+a",n)||i()("ctrl+e",n)||i()("home",n)||i()("end",n))){var r=Kt.from(t.engine);if(t.keydownRange&&r&&r.equal(t.keydownRange))return;t.isComposing||e(n)}})))}},{key:"onPaste",value:function(e){var t=this,n=this.options.bindPaste;if(!n||n()){var r=!1;this.onContainer("keydown",(function(e){t.engine.readonly||(i()("mod",e)&&i()("shift",e)&&i()("v",e)||(r=!1),(i()("mod+shift+v",e)||i()("mod+alt+shift+v",e))&&(r=!0))})),this.onDocument("paste",(function(n){var i=t.engine.change.range.get();if(t.engine.container.contains(i.commonAncestorNode)&&!t.engine.readonly&&!t.isCardInput(n)){n.preventDefault();var o=t.engine.clipboard.getData(n),a=r;r=!1,e(Object(d.a)(Object(d.a)({},o),{},{isPasteText:a}))}}))}}},{key:"onDrop",value:function(e){var t=this,n=this.options.bindDrop;if(!n||n()){var r,i,o,a=function(e){if(e.target&&!t.engine.readonly){e.stopPropagation(),t.dragoverHelper.setCursor();var n=It(e.target),o=n.attributes("drag-card-trigger");if(r=t.engine.card.find(o||n)){var a,s;if(null===(a=r.toolbarModel)||void 0===a||a.hideCardToolbar(),(i=r.find("img.data-drag-image")).length>0)i=t.engine.node.clone(i);else{i=It('<div class="data-drag-image" />');var l=r.root.get();l&&i.css({width:l.clientWidth+"px",height:l.clientHeight+"px"})}i.css({position:"absolute",top:"-99999px",right:"-99999px"}),It(document.body).append(i),null===(s=e.dataTransfer)||void 0===s||s.setDragImage(i[0],0,0)}}};this.onRoot("dragstart",a),this.onContainer("dragstart",a),this.onContainer("dragover",(function(e){if(!t.engine.readonly){var n=t.dragoverHelper,r=n.getCursor();if(0!==r.length){n.parseEvent(e),o=n.getRange();var i=n.getRect();r.css({height:i.height+"px",top:Math.round(window.pageYOffset+(i.y||0))+"px",left:Math.round(window.pageXOffset+(i.x||0))+"px"})}else t.dragoverHelper.setCursor()}})),this.onContainer("dragleave",(function(){t.dragoverHelper.removeCursor()})),this.onContainer("dragend",(function(){t.dragoverHelper.removeCursor(),i&&(i.remove(),i=void 0)})),this.onContainer("drop",(function(n){if(!t.engine.readonly){n.preventDefault(),t.dragoverHelper.removeCursor(),i&&(i.remove(),i=void 0);var a=n.dataTransfer,s=[];try{a&&a.items&&a.items.length>0?Array.from(a.items).forEach((function(e){if("file"===e.kind){var t=e.getAsFile();t&&s.push(t)}})):a&&a.files&&a.files.length>0&&(s=Array.from(a.files))}catch(l){a&&a.files&&a.files.length>0&&(s=Array.from(a.files))}e({event:n,range:o,card:r,files:s}),r=void 0}}))}}},{key:"onDocument",value:function(e,t,n){this.addEvent("document",e,t,n)}},{key:"onWindow",value:function(e,t,n){this.addEvent("window",e,t,n)}},{key:"onContainer",value:function(e,t,n){this.addEvent("container",e,t,n)}},{key:"onRoot",value:function(e,t,n){this.addEvent("root",e,t,n)}},{key:"addEvent",value:function(e,t,n,r){var i=this;if(this.globalEvents[e]||(this.globalEvents[e]=[]),!this.globalEvents[e].find((function(e){return e.type===t}))){var o=function(){for(var n,r=i.events[e].filter((function(e){return e.type===t})),o=0;o<r.length;o++){var a;if(!1===(n=(a=r[o]).listener.apply(a,arguments)))break}return n};switch(e){case"container":this.engine.container.on(t,o);break;case"root":this.engine.root.on(t,o);break;case"document":document.addEventListener(t,o);break;case"window":window.addEventListener(t,o)}this.globalEvents[e].push({type:t,listener:o})}this.events[e]||(this.events[e]=[]),void 0!==r?this.events[e].splice(r,0,{type:t,listener:n}):this.events[e].push({type:t,listener:n})}},{key:"destroy",value:function(){var e=this;Object.keys(this.globalEvents).forEach((function(t){e.globalEvents[t].forEach((function(n){"window"===t?window.removeEventListener(n.type,n.listener):"document"===t?document.removeEventListener(n.type,n.listener):"container"===t?e.engine.container.off(n.type,n.listener):"root"===t&&e.engine.root.off(n.type,n.listener)}))}))}}]),e}(),ln=function(){function e(t){Object(u.a)(this,e),this.source=void 0,this.source=t}return Object(h.a)(e,[{key:"toHTML",value:function(){var e=Ze(this.source);return(e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),e}(),cn=function(){function e(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(Object(u.a)(this,e),this.root=void 0,this.editor=void 0,this.isNormalize=!0,this.editor=n,this.isNormalize=i,"string"===typeof t){var o;t=(t=null===(o=t=(t=t.replace(/<a\s{0,1000}\/>/gi,"<a></a>")).replace(/<a(\s[^>]+?)\/>/gi,(function(e,t){return"<a".concat(t,"></a>")})))||void 0===o?void 0:o.replace(/<img .*>/gi,(function(e){return e.replace(/on[a-zA-Z]{0,20}=/g,"notallow=")}))).replace(/<p(>|\s+[^>]*>)/gi,"<paragraph$1").replace(/<\/p>/gi,"</paragraph>"),t=tt(t);var a=(new DOMParser).parseFromString(t,"text/html").body.innerHTML.replace(/<paragraph(>|\s+[^>]*>)/gi,"<p$1").replace(/<\/paragraph>/gi,"</p>");this.root=It("<div>".concat(a,"</div>"))}else yt(t)?this.root=t:this.root=It(t);r&&r(this.root)}return Object(h.a)(e,[{key:"convert",value:function(e,t,n){for(var r=e.transform(t),i=[],o=this.editor.node,a=null;r;){var s,l=r.rule;i.push(l);var c=r.node,u=c.name,h=c.attributes,p=c.style;"card"!==u&&delete h[te],delete h.id;var f=It("<".concat(u," />"));if(o.setAttributes(f,Object(d.a)(Object(d.a)({},h),{},{style:p})),null===(s=f.get())||void 0===s||s.append.apply(s,Object(S.a)(t.get().childNodes)),t.isCard())return t.replaceWith(f),f;(r.replace?(t.replaceWith(f),t=f):f.each((function(e){var n=t.get();n&&n instanceof Element&&n.append(e)})),a&&0!==a.length||(a=f),o.isBlock(f,n))?r=e.transform(f,(function(e){return i.indexOf(e)<0})):r=e.transform(t,(function(e){return i.indexOf(e)<0}))}return a}},{key:"normalize",value:function(e,t,n){var r=this,i=this.editor,o=i.node,a=i.inline;if(this.isNormalize){var s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mark",r=e.attributes(),i=Ye(r.style||"");if(delete r.style,0!==Object.keys(r).length||0!==Object.keys(i).length){var o=Object.keys(r).length,a=Object.keys(i).length,s=e.clone();t.filter(e,r,i,!0),s.removeAttributes(te);var l=Object.keys(r),c=0;l.forEach((function(e){r[e]&&(c++,s.removeAttributes(e))}));var d=0;if(Object.keys(i).forEach((function(e){i[e]&&(d++,s.css(e,""))})),(c===o&&d===a||0===c&&0===d)&&t.getType(s)===n){e.before(s);var u=e.children();return s.append(u.length>0?u:"block"===n?"<br />":It("\u200b",null)),e.remove(),void(e=s)}return""===s.attributes("style").trim()&&s.removeAttributes("style"),s}};e.traverse((function(c){if(c[0]!==e[0]&&!["style","script","meta"].includes(c.name))if(c.isElement()){var d=c.isCard();if(n&&(!t.getType(c)||d)){var u=r.convert(n,c,t);if(u)return!!d||u}if(d)return;if(o.isMark(c,t)){var h=function(){var e=[],o=t.getRule(c);if(o){var a=function(){var a;e.push(o),0===(null===(a=c.get())||void 0===a?void 0:a.childNodes.length)&&i.mark.repairCursor(c);var l=s(c);if(!l)return{v:{v:void 0}};var d=t.getType(l,(function(t){return t.name===l.name&&"mark"===t.type&&e.indexOf(t)<0}));if(!d&&n){var u=r.convert(n,l,t);if(u&&u.length>0){var h=c.children();return u.append(h.length>0?h:It("\u200b",null)),c.append(0===l.length?u:l.children()),{v:{v:void 0}}}}for(var p=c;"mark"===d;){for(var f=p.children(),v=l;;){var g=v.children();if(!(g.length>0))break;v=g}if(v.append(f.length>0?f:It("\u200b",null)),p.append(l),p=l,!(l=s(l)))break;if(d=t.getType(l,(function(t){return t.name===l.name&&"mark"===t.type&&e.indexOf(t)<0})),!d){if(n){var m=r.convert(n,l,t);if(m&&m.length>0){l=l.length>0?l.children():m,d="mark";continue}}break}if(!(o=t.getRule(l)))break;e.push(o)}}();if("object"===Object(l.a)(a))return a.v}}();if("object"===Object(l.a)(h))return h.v}else if(o.isInline(c))return a.flat(c,t)}else if(c.isText()){var p=c.text();if(/^\n/.test(p)||/^\s/.test(p)){var f=c.get(),v=f.previousSibling,g=f.nextSibling,m=v?t.getType(v):void 0,b=g?t.getType(g):void 0;if(!v&&g&&(!b||"block"===b))return void c.remove();g||!v||m&&"block"!==m||c.remove()}}}))}else{if(!n)return;var c=e.find(Ee);c.each((function(e,i){var o=c.eq(i);o&&r.convert(n,o,t)}));var d=e.find("".concat(me,",").concat(ve,",").concat(ge));d.each((function(e,i){var o=d.eq(i);o&&r.convert(n,o,t)}))}}},{key:"traverse",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=this.editor.node,a=e.first();a;)if(["style","script","meta"].includes(a.name))a=a.next();else{if(a.isElement()){var s=a.name,l=a.attributes();if(l[ee]===ie){a=a.next();continue}var c=Ye(l.style||"");if(delete l.style,["left","right"].indexOf(l[xe])>=0){a=a.next();continue}var d=!0;if(t&&l[ee]!==ae)if(void 0===t.getType(a)){var u,h;d=!1;var p=a.parent();if(p&&o.isBlock(p,t)&&1===(null===(u=p.get())||void 0===u?void 0:u.childNodes.length)&&0===(null===(h=a.get())||void 0===h?void 0:h.childNodes.length)){var f=It("<br />");a.before(f),a.remove(),a=f,s=f.name,l={},c={},d=!0}}else t.filter(a,l,c);if("center"!==l[xe]&&r.onOpen&&d)if(!1===r.onOpen(a,s,l,c)){a=a.next();continue}("card"===s||l[be]&&"true"!==l[Ce])&&!i||this.traverse(a,t,n,r,i),"center"!==l[xe]&&r.onClose&&d&&r.onClose(a,s,l,c)}else if(a.isText()){var v=a[0].nodeValue?Ze(a[0].nodeValue):"";""===v&&o.isBlock(a.parent(),t||void 0)&&(a.prev()||(v=v.replace(/^[ \n]+/,"")),a.next()||(v=v.replace(/[ \n]+$/,"")));var g=a.prev(),m=a.next();g&&o.isBlock(g,t||void 0)&&m&&o.isBlock(m,t||void 0)&&""===v.trim()&&(v=v.trim()),r.onText&&r.onText(a,v)}a=a.next()}}},{key:"toValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],o=this.editor,a=o.node,s=this.root.clone(!0);e&&this.normalize(s,e,t),o.trigger("parse:value-before",s),this.traverse(s,e,t,{onOpen:function(t,n,r,s){var l;if(!1===o.trigger("parse:value",t,r,s,i))return!1;if(i.push("<"),i.push(n),Object.keys(r).length>0&&i.push(" "+function(e){var t="";for(var n in e)if("style"!==n){var r=Ze(e[n]);t+=" ".concat(n,'="').concat(r,'"')}return t.trim()}(r)),Object.keys(s).length>0){var c=function(e){var t="";for(var n in e){n=n.toLowerCase();var r=Ze(e[n]);/^(padding|margin|text-indent)/.test(n)&&0===$e(r)||(n.endsWith("color")&&(r=_()(r).toHexString()),t+=" ".concat(n,": ").concat(r,";"))}return t.trim()}(s);""!==c&&(i.push(' style="'),i.push(c),i.push('"'))}a.isVoid(n,e||void 0)&&0===(null===(l=t.get())||void 0===l?void 0:l.childNodes.length)?i.push(" />"):i.push(">")},onText:function(e,t){n&&t.length>1&&(t=t.replace(/[\u00a0 ]+/g,(function(e){var t=[];e=e.replace(/\u00a0/g," ");for(var n=0;n<e.length;n++)t[n]=n%2==0?e[n]:"\xa0";return t.join("")}))),i.push(t)},onClose:function(t,n){a.isVoid(n,e||void 0)||i.push("</".concat(n,">"))}}),o.trigger("parse:value-after",i),i.length>0&&/^\n+/g.test(i[0])&&(i[0]=i[0].replace(/^\n+/g,"")),i.length>0&&/\n+$/g.test(i[i.length-1])&&(i[i.length-1]=i[i.length-1].replace(/\n+$/g,""));var l=i.join("");return r?tt(l):l}},{key:"toHTML",value:function(e,t){var n=It("<div />"),r=this.editor,i=r.container.css();return e&&t?(It(e).append(this.root).css(i),n.append(t)):n.append(this.root),r.trigger("parse:html-before",this.root),r.trigger("parse:html",n),r.trigger("parse:html-after",n),n.html()}},{key:"toDOM",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this.toValue(e,t,!1,!0),r=(new DOMParser).parseFromString(n,"text/html"),i=r.createDocumentFragment(),o=r.body.childNodes;o.length>0;){var a=o[0];i.appendChild(a)}return i}},{key:"toText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.root.clone(!0),i=[],o=this.editor;return this.traverse(r,null,null,{onOpen:function(e,t,r,a){if(!1===o.trigger("parse:text",e,r,a,i))return!1;if("br"===t&&i.push("\n"),n&&"li"===e.name){if(e.hasClass(o.list.CUSTOMZIE_LI_CLASS))return;var s=e.parent(),l=null===s||void 0===s?void 0:s.css("listStyleType");if("ol"===(null===s||void 0===s?void 0:s.name)){var c=s[0].start,d=c||1;i.push("".concat(ot(l,d),". ")),s.attributes("start",d+1)}else"ul"===(null===s||void 0===s?void 0:s.name)&&i.push(ot(l)+" ")}},onText:function(e,t){t=(t=Xe(t)).replace(/\u00a0/g," "),i.push(t)},onClose:function(t,n){var r=o.node;if("p"===n||r.isBlock(t,e||o.schema)){var a=Array.from(t.get().childNodes);if(0===a.length||a.some((function(t){if(t instanceof Text)return!1;if("BR"===t.nodeName)return!0;var n=(e||o.schema).getType(t);return!n||"block"===n})))return;i.push("\n")}}},t),i.join("").trim()}}]),e}(),dn=function(){function e(t,n){Object(u.a)(this,e),this.source=void 0,this.engine=void 0,this.schema=void 0,this.source=t,this.engine=n,this.schema=this.engine.schema.clone()}return Object(h.a)(e,[{key:"parser",value:function(){var e=this,t=this.engine.conversion.clone();this.engine.trigger("paste:schema",this.schema);var n=new cn(this.source,this.engine,(function(t){e.engine.trigger("paste:origin",t)}));return n.toDOM(this.schema,t)}},{key:"getDefaultStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.engine.container;return{color:_()(e.css("color")).toHexString(),"background-color":_()(e.css("background-color")).toHexString(),"font-size":e.css("font-size")}}},{key:"elementNormalize",value:function(e){var t=this,n=this.getDefaultStyle(),r=this.engine,i=r.inline,o=r.list,a=this.engine.node,s=this.engine.mark,l=this.engine.block,c=[];It(e).traverse((function(r){var d,u,h,p=r.parent();if(p&&!r.isCard()&&r.fragment!==e)if(r.isText()){var f=r.text();if(/\u200b/.test(f)){var v=!0,g=r.next(),m=r.prev(),b=r.parent();(b&&a.isMark(b,t.schema)||b&&a.isInline(b,t.schema)||g&&a.isInline(g,t.schema)||m&&a.isInline(m,t.schema))&&(v=!1),v&&(f=f.replace(/\u200b/g,""),r.text(f))}else{var y;if(/^\n(\t)+$/.test(f))return r.remove(),void(0===(null===(y=p.get())||void 0===y?void 0:y.childNodes.length)&&p.remove());if(/^\n$/.test(f)){if(a.isList(p))return void r.remove();var w=r.next();w&&a.isBlock(w)&&r.remove()}}if(a.isList(p)){var k=r.next(),x=r.prev(),O=function(e,t){if(a.isCustomize(e)){var n=e.first();if(n&&n.isCard()){var r=n.attributes(be)||n.attributes(ye);r&&o.addCardToCustomize(t,r)}}},C=null;return"li"===(null===k||void 0===k?void 0:k.name)?(C=k.clone(),O(k,C)):"li"===(null===x||void 0===x?void 0:x.name)?(C=x.clone(),O(x,C)):C=It("<li></li>"),r.before(C),C.append(r),C}}else{var E=r.css();for(var j in n){var M=E[j];M&&(j.endsWith("color")&&(M=_()(M).toHexString()),M.toLowerCase()===n[j].toLowerCase()&&r.css(j,""))}var N=t.schema.getType(r);if(!N){var S=r.first();return a.unwrap(r),S}a.removeMinusStyle(r,"text-indent"),a.isList(r)&&r.css("padding-left","");var T=r.attributes();for(T.style&&""===T.style.trim()&&r.removeAttributes("style");"span"===r.name&&a.isEmpty(r);){if(r.children().length>0)break;if(p=r.parent(),r.remove(),!p)return;if(!(p=(r=p).parent()))return;N=void 0,T=void 0}if(T||(T=r.attributes()),!T[ye]){var A=N?"block"===N:a.isBlock(r,t.schema),I=a.isVoid(r,t.schema),D=a.isBlock(p,t.schema);if(!A||"p"===T["data-type"]||I||D||""!==a.html(r)){var z;if("p"===T["data-type"]&&r.removeAttributes("data-type"),A&&"p"===(null===(d=p)||void 0===d?void 0:d.name))a.unwrap(p),(null===(z=p=r.parent())||void 0===z?void 0:z.fragment)===e&&(p=void 0),D=!!p&&a.isBlock(p,t.schema);var L=!!p&&a.isList(p);if("li"===r.name&&p&&!L){var R=It("<ul />");return r.before(R),void R.append(r)}if(a.isList(r)&&p&&a.isList(p)){var B=[],P=[],F=!0,H=p.children().toArray(),q=p.clone(),U=function(){var e,t;return(null!==(e=null===(t=q.get())||void 0===t?void 0:t.childNodes.length)&&void 0!==e?e:0)>0&&(F?B.push(q):P.push(q),q=p.clone(),!0)};H.forEach((function(e,t){if(e)return F&&e.equal(r)?(H.length-1===t?(U(),P.push(r)):(0===t||U(),B.push(r)),void(F=!1)):void("li"!==e.name?(U(),F?B.push(e):P.push(e)):q.append(e))})),U();var W=p.attributes(o.INDENT_KEY)||"0";r.attributes(o.INDENT_KEY,W),o.addIndent(r,1);var V=p;return B.forEach((function(e){var t,n=It(e);n&&0!==(null===(t=n.get())||void 0===t?void 0:t.childNodes.length)&&(V.after(n),V=n)})),P.forEach((function(e){var t,n=It(e);n&&0!==(null===(t=n.get())||void 0===t?void 0:t.childNodes.length)&&(V.after(n),V=n)})),p.remove(),r||void 0}if("li"!==r.name&&L){if("br"===r.name)return void r.remove();var Y=It("<li />");return r.before(Y),void Y.append(r)}if(a.isList(r)&&"li"===(null===(u=p)||void 0===u?void 0:u.name)){var G,Z,X,Q,K,$,J=null===(G=p)||void 0===G?void 0:G.parent();if(!J)return void a.unwrap(p);var ee=J.clone(),te=J.clone(),ne=!0;J.children().toArray().forEach((function(e){e&&(ne&&e.equal(p)?ne=!1:ne?ee.append(e):te.append(e))}));var re=null===(Z=p)||void 0===Z||null===(X=Z.parent())||void 0===X?void 0:X.hasClass("data-list"),ie=null===(Q=p)||void 0===Q?void 0:Q.children(),oe=null,ae=null;ie.each((function(e,n){var r=ie.eq(n);if(r&&(!a.isEmptyWithTrim(r)||a.isVoid(r))){var i=a.isList(r),s=ee[ee.length-1];if(i){var l,c=(null===(l=It(s))||void 0===l?void 0:l.attributes(o.INDENT_KEY))||"0";return r.attributes(o.INDENT_KEY,c),o.addIndent(r,1),ee[ee.length]=r[0],void(oe=null)}if(a.isBlock(e,t.schema)){var d=ee.length;return ee[d]=r[0],ee[d+1]=ee.clone()[0],void(oe=null)}if(!oe){var u;oe=It(re?'<li class="'.concat(o.CUSTOMZIE_LI_CLASS,'" />'):"<li />");var h=null===(u=It(s))||void 0===u?void 0:u.last();h?null===h||void 0===h||h.after(oe):It(s).append(oe)}oe.append(e),ae||(ae=oe)}})),null===(K=p)||void 0===K||K.remove();var se=J;return ee.each((function(e){var t,n=It(e);n&&0!==(null===(t=n.get())||void 0===t?void 0:t.childNodes.length)&&(se.after(n),se=n)})),te.each((function(e){var t,n=It(e);n&&0!==(null===(t=n.get())||void 0===t?void 0:t.childNodes.length)&&(se.after(n),se=n)})),J.remove(),(null===($=ae)||void 0===$?void 0:$.next())||ee.next()||void 0}if("p"===r.name&&L){var le=It("<li />");return a.replace(r,le),le}if(A&&!I&&""===a.html(r).trim()&&(a.isRootBlock(r,t.schema)||"li"===r.name)&&a.html(r,"<br />"),A&&"li"===(null===(h=p)||void 0===h?void 0:h.name)){var ce,de,ue=null!==(ce=null===(de=r.get())||void 0===de?void 0:de.childNodes)&&void 0!==ce?ce:[];if("p"===r.name){var he=r.next();0!==ue.length||he||r.append("<br />");var pe=r.first();return he&&"p"===he.name&&r.append("<br />"),a.unwrap(r),pe}var fe=p.parent();if(!fe)return;for(var ve=fe.clone(),ge=fe.clone(),me=p.prev();me;)ve.prepend(me),me=p.prev();for(var we=p.next();we;)ge.append(we),we=p.next();for(var ke=p.clone(),xe=p.clone(),Oe=r.prev();Oe;)ke.prepend(Oe),Oe=r.prev();for(var Ce=r.next();Ce;)xe.append(Ce),Ce=r.next();return fe.after(r),ke.first()&&ve.append(ke),xe.first()&&ge.prepend(xe),ve.first()&&fe.before(ve),ge.first()&&r.after(ge),void fe.remove()}if(!A&&a.isInline(r)&&!r.isCard()&&!I){var Ee=r.allChildren().some((function(e){return a.isVoid(e,t.schema)}));a.isEmptyWithTrim(r)&&!Ee?r.remove():i.repairCursor(r)}a.removeSide(r);var je=p;for(!function e(n){if(je&&!je.fragment&&a.isBlock(n,t.schema)&&a.isBlock(je,t.schema)&&!t.schema.isAllowIn(je.name,n.name)){var r=n.children();a.unwrap(n),r.each((function(t,n){e(r.eq(n))}))}}(r);r.length>0&&je&&!je.fragment&&a.isBlock(r,t.schema)&&!a.isBlock(je,t.schema);){var Me=r.clone();a.unwrap(r),je.before(Me),Me.append(je),je=(r=Me).parent()}var Ne=a.isMark(r,t.schema);if(r.length>0&&Ne){var Se=l.closest(r);if(!Se.equal(r)){var Te,_e=s.findPlugin(r),Ae=l.findPlugin(Se);if(_e&&(null===Ae||void 0===Ae||null===(Te=Ae.disableMark)||void 0===Te?void 0:Te.includes(_e.name))){var Ie=r.first();return a.unwrap(r),Ie||void 0}}}if(Ne){var De=s.findPlugin(r),ze=c.concat();if(ze.pop(),De){var Le,Re=ze.find((function(e){var t;return(null===(t=e.plugin)||void 0===t?void 0:t.name)===De.name&&e.node.length>0&&!e.node.equal(r)}));if(Re)return void(1===(null===(Le=Re.node.get())||void 0===Le?void 0:Le.childNodes.length)?a.unwrap(Re.node):a.unwrap(r))}}if(je=p,r.length>0&&je&&a.isMark(je,t.schema)&&Ne){var Be,Pe=s.findPlugin(je),Fe=null===(Be=c[c.length-1])||void 0===Be?void 0:Be.plugin;if(Pe&&Fe&&Fe.mergeLeval>Pe.mergeLeval){var He=je.clone(!1),qe=je.children().toArray(),Ue=He.clone(),We=He.clone(),Ve=!0,Ye=-1;if(qe.forEach((function(e,t){if(e.equal(r)){var n=r.children();He.append(n),r.append(He),Ve=!1,Ye=t}else Ve?Ue.append(e):We.append(e)})),Ye>0&&je.before(Ue),Ye<qe.length-1&&je.after(We),Ye>-1)return je.before(r),je.remove(),c.splice(c.length-2,1),r}}}else r.remove()}}}),void 0,void 0,(function(e){if(a.isMark(e)){var t=s.findPlugin(e);e.is_mark=!0,c.push({plugin:t,node:e})}}),(function(e){e.is_mark&&c.pop()}))}},{key:"normalize",value:function(){var e=this,t=this.engine.node,n=this.parser();this.elementNormalize(n);var r=this.engine.change.range.get(),i=r.commonAncestorNode,o=this.engine.inline.closest(i);if(i.inEditor()&&!o.isCard()&&t.isInline(o,this.schema))return this.removeElementNodes(It(n)),n;if(i.inEditor()&&i.isText()&&r.startContainer===r.endContainer){var a=i[0].nodeValue,s=null===a||void 0===a?void 0:a.substr(0,r.startOffset),l=null===a||void 0===a?void 0:a.substr(r.endOffset);if(/\[.*?\]\($/.test(s||"")&&/^\)/.test(l||""))return this.removeElementNodes(It(n)),n}It(n).traverse((function(r){var i;if(r.fragment!==n){var o=null===(i=r.get())||void 0===i?void 0:i.firstChild;if(r.length>0&&r[0].parentNode&&e.engine.trigger("paste:each",r),r.isText()){var a=r.text();if(/^(\r|\n)+$/.test(a)){var s,l=r.prev(),c=r.next();(l&&!t.isBlock(l)||c&&!t.isBlock(c)||l&&t.isBlock(l)&&c&&t.isBlock(c)||"p"===(null===(s=r.parent())||void 0===s?void 0:s.name))&&r.remove()}var d=/((\n)+)/.exec(a);if(d&&d.index>0&&d.index<a.length-1){var u=r.get().splitText(d.index),h=u.splitText(d[0].length);r.after(u),u.after(h),r.text()||r.remove()}}else"pre"===r.name&&r.find(je).length>0&&t.unwrap(r);return 0===r.length&&o?It(o):void 0}})),this.engine.trigger("paste:each-after",It(n));var c=t.normalize(It(n));c.fragment&&(n=c.fragment),n.normalize();var d=It(n).find("ul,ol");return d.each((function(n,r){var i=d.eq(r);i&&t.isList(i)&&e.engine.list.addStart(i)})),this.engine.nodeId.generateAll(It(n),!0),n}},{key:"removeElementNodes",value:function(e){var t=this;e.allChildren().forEach((function(e){e.isElement()&&t.engine.node.unwrap(e)}))}}]),e}();!function(e){e.INLINE="inline",e.BLOCK="block"}(nn||(nn={})),function(e){e.CARD_CHANGE="card_change",e.CLICK="click",e.MOUSE_DOWN="mouse_down"}(rn||(rn={})),function(e){e.NONE="none",e.BACKGROUND="background",e.BORDER="border"}(on||(on={}));var un=Object(y.a)("lastePasteRange"),hn=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,Object.defineProperty(this,un,{writable:!0,value:void 0}),this.prevSelection=null,this.engine=t}return Object(h.a)(e,[{key:"repairInput",value:function(e,t){var n=t.commonAncestorNode,r=this.engine.card.find(n),i=this.engine,o=i.node,a=i.mark,s=i.change;if(r&&r.type===nn.INLINE)if(r.isLeftCursor(n)){var l=n.closest(Me),c=l.text().replace(/\u200B/g,"");c&&(c=Ze(c),t.setStartBefore(r.root),t.collapse(!0),o.html(l,"&#8203;"),o.insertText(c,t),s.apply(t))}else if(r.isRightCursor(n)){var d=n.closest(Se),u=d.text().replace(/\u200B/g,"");if(u){u=Ze(u);var h=r.root.next(),p=r.queryMarks?r.queryMarks(!0):[];if(p.length>0){var f=p[p.length-1];f.append(u);for(var v=p.length-2;v>=0;v--)f=p[v].append(f);r.root.after(f),t.select(f,!0).collapse(!1)}else h&&(h.isText()||o.isMark(h))?(t.select(h,!0).collapse(!0),o.insertText(u,t)):(t.setEndAfter(r.root),t.collapse(!1),o.insertText(u,t));o.html(d,"&#8203;"),s.apply(t)}}else s.range.toTrusty(t);var g=t.cloneRange().shrinkToTextNode(),m=g.startNode,b=g.startOffset,y=m.parent();if(m.isText()&&y&&o.isMark(y)){var w=m.get(),k=m.text();if(b===k.length&&e.data&&0===e.inputType.indexOf("insert")){for(var x=y,O=[];x&&o.isMark(x);){var C,E,j=a.findPlugin(x);j&&!j.followStyle&&O.push(x);var M=null===(C=x=x.parent())||void 0===C?void 0:C.parent();if((null===(E=x)||void 0===E?void 0:E.next())&&M&&o.isMark(M))break}var N=m.next();if(O.forEach((function(e,t){if(y.equal(e)&&N)O.splice(t,1);else{for(var n=e.next(),r=e;!n&&r;){var i=r.parent();if(i&&o.isBlock(i))break;n=(null===i||void 0===i?void 0:i.next())||null,r=i}for(var s=n;s&&!s.isText();){if(o.isMark(s)&&a.compare(s,e)){O.splice(t,1);break}s=s.first()}}})),O.length>0)w.splitText(k.length-e.data.length).remove(),o.isEmpty(y)&&y.remove(),a.unwrap(O.map((function(e){return e.clone()}))),o.insertText(k.substr(k.length-e.data.length)),a.merge(),m=(t=s.range.get().cloneRange().shrinkToTextNode()).startNode,b=t.startOffset,w=m.get(),k=m.text()}else if(e.data&&b===e.data.length&&0===e.inputType.indexOf("insert")){for(var S=y,T=[];S&&o.isMark(S);){var _,A,I=a.findPlugin(S);I&&!I.followStyle&&T.push(S);var D=null===(_=S=S.parent())||void 0===_?void 0:_.parent();if((null===(A=S)||void 0===A?void 0:A.prev())&&D&&o.isMark(D))break}var z=m.prev();T.forEach((function(e,t){if(y.equal(e)&&z)T.splice(t,1);else{for(var n=e.prev(),r=e;!n&&r;){var i=r.parent();if(i&&o.isBlock(i))break;n=(null===i||void 0===i?void 0:i.prev())||null,r=i}for(var s=n;s&&!s.isText();){if(o.isMark(s)&&a.compare(s,e)){T.splice(t,1);break}s=s.last()}}})),T.length>0&&(w.splitText(e.data.length),w.remove(),o.isEmpty(y)&&y.remove(),a.unwrap(T.map((function(e){return e.clone()}))),o.insertText(""===e.data?"\xa0":e.data),a.merge(),m=(t=s.range.get().cloneRange().shrinkToTextNode()).startNode,b=t.startOffset,w=m.get(),k=m.text())}k.length>0&&/^\u200B$/g.test(k.substr(0,1))&&(w.splitText(1),w.remove())}var L=m.prev();if(m.isText()&&L&&o.isMark(L)){var R=m.get(),B=m.text();B.length>0&&/^\u200B$/g.test(B.substr(0,1))&&(R.splitText(1),R.remove())}}},{key:"handleSelectionChange",value:function(){var e,t,n,r,i=this,o=this.engine,a=o.change,s=o.container,l=o.card;if(!a.isComposing()){var c=s.window,d=null===c||void 0===c?void 0:c.getSelection();if(((null===(e=this.prevSelection)||void 0===e?void 0:e.anchorNode)!==(null===d||void 0===d?void 0:d.anchorNode)||(null===(t=this.prevSelection)||void 0===t?void 0:t.anchorOffset)!==(null===d||void 0===d?void 0:d.anchorOffset)||(null===(n=this.prevSelection)||void 0===n?void 0:n.focusNode)!==(null===d||void 0===d?void 0:d.focusNode)||(null===(r=this.prevSelection)||void 0===r?void 0:r.focusOffset)!==(null===d||void 0===d?void 0:d.focusOffset))&&(this.prevSelection=d?{anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}:null,d&&d.anchorNode)){var u=Kt.from(this.engine,d);if(!u.commonAncestorNode.inEditor(s))return;a.onSelect();var h=u.containsCard()||u.commonAncestorNode.closest(Ee).length>0&&0===u.startNode.closest("".concat(Me,",").concat(Se,",").concat(oe)).length,p=u.collapsed;if(!p){var f=u.startNode,v=u.endNode,g=u.startOffset,m=u.endOffset,b=f.isElement()&&!f.isCard()?f.children().eq(g):f,y=v.isElement()&&!v.isCard()?v.children().eq(m-1):v;b&&y&&b.isCard()&&b.equal(y)&&(p=!0)}l.each((function(e){var t=e.getCenter();if(t&&t.length>0){var n=!!d.containsNode&&d.containsNode(t[0]);if(!n&&h&&d.focusNode){var r=i.engine.card.find(d.focusNode);r&&(p=!d.anchorNode||r.root.contains(d.anchorNode))&&e.root.equal(r.root)&&(n=!0),n&&p&&(h=!1)}var o=e.constructor.autoSelected;e.select(n&&(!p||!1!==o))}}))}}}},{key:"init",value:function(){var e=this,t=this.engine,n=t.change,i=t.card,o=t.clipboard;n.event.onInput((function(t){var r=n.range.get();e.repairInput(t,r),n.range.select(r),n.onSelect(r),n.change()})),n.event.onDocument("selectionchange",(function(){e.handleSelectionChange()})),n.event.onSelect((function(e){var t=n.range.get();0!==t.startNode.closest(re).length&&(t.collapsed&&t.containsCard()&&n.range.toTrusty(t),n.range.select(t),Object(r.isHotkey)("shift+left",e)||Object(r.isHotkey)("shift+right",e)||Object(r.isHotkey)("shift+up",e)||Object(r.isHotkey)("shift+down",e)||i.activate(t.commonAncestorNode),n.onSelect(t))})),n.event.onDocument("mousedown",(function(e){if(e.target){var t=It(e.target);if(0!==t.closest("body").length&&!(t.closest(".am-view").length>0)){for(var n=t;n;){var r=n.attributes(ee);if(r&&[ne,ae].indexOf(r)<0)return;n=n.parent()}i.activate(t,rn.MOUSE_DOWN,e)}}})),n.event.onDocument("copy",(function(t){var r=n.range.get();e.engine.container.contains(r.commonAncestorNode)&&o.write(t)})),n.event.onDocument("cut",(function(t){var r=n.range.get();e.engine.container.contains(r.commonAncestorNode)&&!e.engine.readonly&&(o.write(t,void 0)&&(t.stopPropagation(),o.cut(),n.change()))}));var a=function(t){n.cacheRangeBeforeCommand();var r=ut(e.engine,"zero");r.enable(["paragraph","html_inline","newline"]);var i=r.parse(t,{});if(0!==i.length)return ht(e.engine,r,i)},l=function(){var t=Object(c.a)(s.a.mark((function t(r){var i,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(o=a(r))){t.next=3;break}return t.abrupt("return");case 3:if(l=function(){e.engine.history.saveOp(),n.cacheRangeBeforeCommand(),e.paste(o,Object(b.a)(e,un)[un],void 0,!1)},"confirm"===(null===(i=e.engine.options.markdown)||void 0===i?void 0:i.mode)){t.next=7;break}return l(),t.abrupt("return");case 7:e.engine.messageConfirm("markdown",e.engine.language.get("checkMarkdown","title")).then((function(){l()})).catch((function(t){t&&e.engine.messageError("markdown",t)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();n.event.onPaste((function(t){var r=t.html,i=t.text,o=t.files,a=t.isPasteText,s="";if(0===o.length)if(a){var c="";i?c=i:r&&(c=new cn(r,e.engine).toText()),s=new ln(c).toHTML()}else r&&r.indexOf('<meta name="source" content="aomao" />')>-1||r?s=r:i&&(s=new ln(i).toHTML());if(!1!==e.engine.trigger("paste:event",t,s)&&0===o.length){n.cacheRangeBeforeCommand(),e.paste(s);var d=e.engine.options.markdown||{};if(!1!==d.mode)if(d.check||!i||/^https?:\/\/\S+$/i.test(i.trim()))d.check&&d.check(null!==i&&void 0!==i?i:"",null!==r&&void 0!==r?r:"").then((function(e){e&&l(e)}));else{if(!i)return;if(!r)return void setTimeout((function(){l(i)}),0);var u=i.split(/\r\n|\n/)||"",h=0,p=0,f=!1,v=(new DOMParser).parseFromString(r,"text/html").querySelectorAll("li"),g=[];v.forEach((function(e){var t,n,r=null!==(t=e.textContent)&&void 0!==t?t:"";("OL"===(null===(n=e.parentElement)||void 0===n?void 0:n.nodeName)||/\d\.\s+/.test(r))&&g.push(r)}));for(var m=0;m<u.length;m++){var b=u[m];b.trim()&&(b.startsWith("```")?f?f=!1:(f=!0,p++,h++):f||(h++,/^(#|\*|-|\+|\[ \]|\[x\]|>){1}\s+/.test(b)?p++:/^\d\.\s+/.test(b)?g.includes(b)||g.includes(b.replace(/^\d\./,"").trim())||p++:(/^(---|\*\*\*|\+\+\+)/.test(b)||/(\*|~|\^|_|\`|\]\(https?:\/\/)/.test(b))&&p++))}p>0&&(0===h||p/h>.5)&&setTimeout((function(){l(i)}),0)}}}));var d=function(e){return!e||i.closest(e.commonAncestorContainer)};n.event.onDrop((function(t){var r=t.event,i=t.range,o=t.card,a=t.files;if(o){if(r.preventDefault(),d(i))return;var s=o.constructor.cardName,l=o.getValue();e.engine.card.remove(o.root),n.range.select(i),e.engine.card.insert(s,l)}if(a.length>0){if(r.preventDefault(),d(i))return;n.range.select(i),e.engine.trigger("drop:files",a)}}))}},{key:"paste",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4?arguments[4]:void 0,a=this.engine.change,s=new dn(e,this.engine).normalize();this.engine.trigger("paste:before",s),o?o(s,t,void 0,i):a.insert(s,t,(function(e){var t;r.engine.trigger("paste:insert",e);var i=e.cloneRange(),o=i.endNode,s="";o.isCard()&&0===(null===(t=o.get())||void 0===t?void 0:t.childNodes.length)&&(i.setEndAfter(o),s=o.attributes(te)),Object(b.a)(r,un)[un]=i,e.collapse(!1);var l=e.startNode.closest("".concat(Ee,",").concat(je));if(l.length>0){var c=l.attributes();(c[Oe]||c[ye])&&e.setStartAfter(l)}var d=e.createSelection();r.engine.card.render(void 0,(function(t){if(d.move(),s){var o=r.engine.container.find('[data-id="'.concat(s,'"]'));o.length>0&&(i.setEndAfter(o),Object(b.a)(r,un)[un]=i)}e.scrollRangeIntoView(),a.range.select(e),n&&n(t),r.engine.trigger("paste:after")}))}),i)}}]),e}(),pn=Object(y.a)("lastBlurRange"),fn=Object(y.a)("otpions"),vn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.engine=void 0,Object.defineProperty(this,pn,{writable:!0,value:void 0}),Object.defineProperty(this,fn,{writable:!0,value:void 0}),this.engine=t,Object(b.a)(this,fn)[fn]=n}return Object(h.a)(e,[{key:"setLastBlurRange",value:function(e){(null===e||void 0===e?void 0:e.commonAncestorNode.inEditor())?Object(b.a)(this,pn)[pn]=e:Object(b.a)(this,pn)[pn]=void 0}},{key:"toTrusty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.get(),t=e.commonAncestorNode;t.isEditable()||t.inEditor()||e.select(this.engine.container,!0).shrinkToElementNode().collapse(!1);var n=e.cloneRange();if(n.collapse(!0),this.setCardRang(n),e.startNode.equal(n.startNode)&&e.startOffset===n.startOffset||e.setStart(n.startContainer,n.startOffset),(n=e.cloneRange()).collapse(!1),this.setCardRang(n),e.endNode.equal(n.endNode)&&e.endOffset===n.endOffset||e.setEnd(n.endContainer,n.endOffset),e.collapsed){(n=e.cloneRange()).enlargeFromTextNode();var r=It(n.startContainer),i=n.startOffset;this.engine.node.isInline(r)&&0===i&&e.setStartBefore(r[0]),this.engine.node.isInline(r)&&i===r[0].childNodes.length&&e.setStartAfter(r[0]),e.collapse(!0)}return e}},{key:"setCardRang",value:function(e){var t=this,n=e.startNode,r=e.startOffset,i=this.engine.card,o=i.find(n);if(o){var a=o.getCenter().get();if(a&&(!n.isElement()||n[0].parentNode!==o.root[0]||n.attributes(xe))){var s=function(){var e=Kt.create(t.engine);return e.select(a,!0),e.comparePoint(n,r)<0};if("inline"===o.type)return e.select(o.root),void e.collapse(s());s()?i.focusPrevBlock(o,e,!0):i.focusNextBlock(o,e,!0)}}}},{key:"get",value:function(){var e=this.engine.container,t=e.window,n=Kt.from(this.engine,t,!1);return n||(n=Kt.create(this.engine,t.document).select(e,!0).shrinkToElementNode().collapse(!1)),n}},{key:"select",value:function(e){var t,n,r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this.engine,a=o.container,s=o.inline,l=o.node,c=o.change,d=a.window,u=null===d||void 0===d?void 0:d.getSelection();if(!c.isComposing()){if(e.collapsed){var h,p,f,v,g=e.startNode,m=e.startOffset;if((g.isElement()&&1===m&&1===(null===(h=g.get())||void 0===h?void 0:h.childNodes.length)||2===m&&2===(null===(p=g.get())||void 0===p?void 0:p.childNodes.length)&&(null===(f=g.first())||void 0===f?void 0:f.isCard()))&&"br"===(null===(v=g.last())||void 0===v?void 0:v.name)&&(e.setStart(g,m-1),e.collapse(!0)),g.isText()){var y=g.parent();"right"===(null===y||void 0===y?void 0:y.attributes(xe))&&0===m?(e.setStart(g,1),e.collapse(!0)):"left"===(null===y||void 0===y?void 0:y.attributes(xe))&&1===m&&(e.setStart(g,0),e.collapse(!0))}}var w=e.cloneRange().shrinkToTextNode(),k=w.startNode,x=w.endNode,O=w.startOffset,C=w.endOffset,E=k.prev(),j=x.next();if(E&&!E.isCard()&&!l.isVoid(E)&&l.isInline(E)){var M=k.text();/^\u200B/g.test(M)&&0===O&&(e.setStart(x,O+1),e.collapsed&&e.collapse(!0))}if(j&&!j.isCard()&&!l.isVoid(j)&&l.isInline(j)){var N=x.text();/\u200B$/g.test(N)&&C===N.length&&(e.setEnd(x,C-1),e.collapsed&&e.collapse(!1))}var S=s.closest(k);if(!S.isCard()&&l.isInline(S)&&!l.isVoid(S)){var T,_;if(k.isText()&&!k.prev()&&(null===(T=k.parent())||void 0===T?void 0:T.equal(S))&&0===O){var A=k.text();/^\u200B/g.test(A)&&(e.setStart(k,O+1),e.collapsed&&e.collapse(!0))}if(x.isText()&&!x.next()&&(null===(_=x.parent())||void 0===_?void 0:_.equal(S))){var I=x.text();C===I.length&&/\u200B$/g.test(I)&&(e.setEnd(x,C-1),e.collapsed&&e.collapse(!1))}}if(k=e.startNode,x=e.endNode,k.isText()||x.isText()){var D=e.cloneRange().enlargeFromTextNode();k=D.startNode,x=D.endNode}var z=k.children();l.isCustomize(k)&&0===O&&e.setStart(k,1),l.isCustomize(x)&&0===C&&e.setEnd(x,1);var L=this.engine.ot.isStopped();if("p"===k.name&&!L)if(0===z.length)k.append("<br />");else if(!ze&&z.length>1&&"BR"!==z[z.length-2].nodeName&&"BR"===z[z.length-1].nodeName){var R=k.last();null===R||void 0===R||R.remove()}e.collapsed||L||"p"!==x.name||0!==(null===(t=x.get())||void 0===t?void 0:t.childNodes.length)||x.append("<br />");var B=k.children();if(l.isList(k)&&!L&&(0===B.length||"BR"===B[0].nodeName)){var P=It("<p><br /></p>");this.engine.nodeId.create(P),k.before(P),k.remove(),k=P}if("li"===k.name&&!L){var F;if(l.isCustomize(k)&&!(null===(F=k.first())||void 0===F?void 0:F.isCard())){var H,q,U=null===(H=k.parent())||void 0===H?void 0:H.children().toArray().find((function(e){var t;return null===(t=e.first())||void 0===t?void 0:t.isCard()})),W=null===U||void 0===U||null===(q=U.first())||void 0===q?void 0:q.attributes(be);W?this.engine.list.addCardToCustomize(k,W):this.engine.list.unwrapCustomize(k)}if(0===z.length)k.append("<br />");else if(!l.isCustomize(k)&&z.length>1&&"BR"!==z[z.length-2].nodeName&&"BR"===z[z.length-1].nodeName){var V;null===(V=k.last())||void 0===V||V.remove()}else if(l.isCustomize(k)&&1===z.length)k.append("<br />");else if(l.isCustomize(k)&&z.length>2&&"BR"!==z[z.length-2].nodeName&&"BR"===z[z.length-1].nodeName){var Y;null===(Y=k.last())||void 0===Y||Y.remove()}}if(!e.collapsed&&"li"===x.name&&!L){var G=x.children();if(0===G.length)x.append("<br />");else if(!l.isCustomize(x)&&G.length>1&&"BR"!==G[G.length-2].nodeName&&"BR"===G[G.length-1].nodeName){var Z;null===(Z=k.last())||void 0===Z||Z.remove()}else if(l.isCustomize(x)&&1===G.length)x.append("<br />");else if(l.isCustomize(x)&&G.length>2&&"BR"!==G[G.length-2].nodeName&&"BR"===G[G.length-1].nodeName){var X;null===(X=k.last())||void 0===X||X.remove()}}!k.isEditable()||L||0!==(null===(n=k.get())||void 0===n?void 0:n.childNodes.length)||this.engine.ot.isStopped||k.html("<p><br /></p>"),u&&(e.collapsed||u.rangeCount>0&&!e.equal(u.getRangeAt(0)))&&(null===(r=e.startNode.get())||void 0===r?void 0:r.isConnected)&&(u.removeAllRanges(),u.addRange(e.toRange()));var Q=Object(b.a)(this,fn)[fn].onSelect;Q&&i&&Q(e)}}},{key:"focus",value:function(e){var t,n=this,r=Object(b.a)(this,pn)[pn]||this.get();void 0!==e&&r.select(this.engine.container,!0).shrinkToElementNode().collapse(e),this.select(r);var i=r.commonAncestorNode.closest(se);if(null===i||void 0===i||null===(t=i.get())||void 0===t||t.focus(),i.length>0&&!this.engine.container.equal(i)){var o,a=new MouseEvent("mousedown");null===(o=this.engine.container.get())||void 0===o||o.dispatchEvent(a),setTimeout((function(){var e,t=new MouseEvent("mouseup");null===(e=n.engine.container.get())||void 0===e||e.dispatchEvent(t)}),0)}}},{key:"blur",value:function(){var e,t;null===(e=this.get().commonAncestorNode.closest(se).get())||void 0===e||e.blur(),null===(t=this.engine.container.get())||void 0===t||t.blur(),this.engine.trigger("blur")}}]),e}(),gn=Object(y.a)("nativeEvent"),mn=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.engine=void 0,this.options=void 0,this.changeTimer=null,this.event=void 0,this.valueCached=null,this.onChange=void 0,this.onRealtimeChange=void 0,this.onSelect=void 0,this.onSetValue=void 0,this.rangePathBeforeCommand=void 0,this.marks=[],this.blocks=[],this.inlines=[],this.changeTrigger=[],this.range=void 0,Object.defineProperty(this,gn,{writable:!0,value:void 0}),this.options=r,this.engine=t,this.event=new sn(t,{}),this.onChange=this.options.onChange||function(){},this.onRealtimeChange=this.options.onRealtimeChange||function(){};var i=null;this.onSelect=function(e){var r,o,a,s,l=t.mark,c=t.block,d=t.inline;e=e||n.range.get();var u=n.marks.concat(n.blocks).concat(n.inlines);(0===u.length||u.some((function(t){var n,r;return!(null===(n=t.get())||void 0===n?void 0:n.isConnected)||!(null===(r=e)||void 0===r?void 0:r.commonAncestorContainer.contains(t.get()))})))&&(n.marks=l.findMarks(e),n.blocks=c.findBlocks(e),n.inlines=d.findInlines(e)),(null===(r=i)||void 0===r?void 0:r.startContainer)===e.startContainer&&(null===(o=i)||void 0===o?void 0:o.startOffset)===e.startOffset&&(null===(a=i)||void 0===a?void 0:a.endContainer)===e.endContainer&&(null===(s=i)||void 0===s?void 0:s.endOffset)===e.endOffset||(i={startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset},n.options.onSelect&&n.options.onSelect())},this.onSetValue=this.options.onSetValue||function(){},this.range=new vn(t,{onSelect:function(e){n.onSelect(e)}}),Object(b.a)(this,gn)[gn]=new hn(t)}return Object(h.a)(e,[{key:"init",value:function(){Object(b.a)(this,gn)[gn].init()}},{key:"_change",value:function(){if(!this.isComposing()){this.engine.card.gc();var e=2===this.changeTrigger.length?"both":"remote"===this.changeTrigger[0]?"remote":"local";this.onChange(e),this.changeTrigger=[]}}},{key:"change",value:function(e,t){var n=this,r=e?"remote":"local",i=void 0;if(e)null===t||void 0===t||t.forEach((function(e){if((i=e.closest(se))&&i.length>0){var t=n.engine.card.find(i,!0);(null===t||void 0===t?void 0:t.onChange)&&(null===t||void 0===t||t.onChange(r,i))}}));else{var o=this.range.get().startNode;if(o.inEditor())i=o.closest(se);else{var a,s=o.closest(oe).attributes(Te);if(s)i=null===(a=this.engine.card.find(s))||void 0===a?void 0:a.root.closest(se)}if(i&&i.length>0){var l=this.engine.card.find(i,!0);(null===l||void 0===l?void 0:l.onChange)&&(null===l||void 0===l||l.onChange(r,i))}else null===t||void 0===t||t.forEach((function(e){if((i=e.closest(se))&&i.length>0){var t=n.engine.card.find(i,!0);(null===t||void 0===t?void 0:t.onChange)&&(null===t||void 0===t||t.onChange(r,i))}}))}this.onRealtimeChange(r),this.changeTrigger.indexOf(r)<0&&this.changeTrigger.push(r),this.clearChangeTimer(),this.changeTimer=setTimeout((function(){n._change()}),50)}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"isComposing",value:function(){return this.event.isComposing}},{key:"isSelecting",value:function(){return this.event.isSelecting}},{key:"initValue",value:function(e){var t,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.engine.container,o=i.html(),a="<p><br /></p>";if(!(o===a||((null===(t=i.get())||void 0===t?void 0:t.childNodes.length)||0)>0)){var s=It(o||a);0===(null===(n=s.get())||void 0===n?void 0:n.childNodes.length)&&s.html("<br />"),i.empty().append(s);var l=e||this.range.get();!e&&r&&(l.select(s,!0).collapse(!1),this.apply(l))}}},{key:"setValue",value:function(e,t,n){var r=this.range.get(),i=this.engine,o=i.schema,a=i.conversion,s=i.container,l=i.history,c=i.mark,d=i.card;if(""===e)this.engine.container.html(e),this.initValue(void 0,!1),n&&n(0);else{var u=new cn(e,this.engine,(function(e){c.removeEmptyMarks(e),e.allChildren("editable").forEach((function(e){t&&t(e)}))}),!1);s.html(u.toValue(o,a,!1,!0)),d.render(void 0,(function(e){n&&n(e)}));var h=s.find(me),p=new qt(this.engine,r);h.length>0&&(p.anchor=h,p.focus=h);var f=s.find(ve),v=s.find(ge);f.length>0&&v.length>0&&(p.anchor=f,p.focus=v),p.anchor&&p.focus&&(p.move(),this.range.select(r),this.onSelect()),this.onSetValue(),l.clear()}this.change()}},{key:"setHtml",value:function(e,t){var n=this,r=this.engine,i=r.card,o=r.container;Object(b.a)(this,gn)[gn].paste(e,void 0,t,!0,(function(e,r,a,s){o.empty().append(e),i.render(void 0,(function(e){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(e)})),n.change()}))}},{key:"setMarkdown",value:function(e,t){var n=this,r=ut(this.engine,"zero");r.enable(["paragraph","html_inline","newline"]);var i=r.parse(e,{});if(0!==i.length){var o=ht(this.engine,r,i);o||(o=e);var a=this.engine,s=a.card,l=a.container;Object(b.a)(this,gn)[gn].paste(o,void 0,t,!0,(function(e,r,i,o){l.empty().append(e),s.render(void 0,(function(e){n.initValue(void 0,!1),n.engine.trigger("paste:after"),t&&t(e)})),n.change()}))}}},{key:"getOriginValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.engine.container,t=this.engine,n=t.schema,r=t.conversion;return new cn(e.clone(!0),this.engine,void 0,!1).toValue(n,r)}},{key:"getValue",value:function(){var e;if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignoreCursor||this.isComposing())e=this.getOriginValue();else{var t,n,r=this.range.get();if(!r.inCard()){var i=r.toPath(!0);if(!i)return this.getOriginValue();n=(r=Kt.fromPath(this.engine,i,!0)).createSelection()}e=this.getOriginValue(),null===(t=n)||void 0===t||t.move()}return e}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=this.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=void 0,e}},{key:"isEmpty",value:function(){var e=this.engine,t=e.container,n=e.node,r=e.schema.getAllowInTags(),i=t.children();return 0===i.length||1===i.length&&n.isEmpty(t)&&!t.allChildren().some((function(e){return r.includes(e.name)}))}},{key:"combinText",value:function(){var e;(e=this.engine.container)instanceof Node||(e=e[0]),e.normalize()}},{key:"apply",value:function(e){this.combinText();var t=this.engine,n=t.inline,r=t.mark,i=t.nodeId;if(e){var o=e.createSelection("change-apply");n.findInlines(e).forEach((function(e){return n.repairCursor(e)})),r.findMarks(e).forEach((function(e){return r.repairCursor(e)})),o.move(),e.shrinkToTextNode(),this.range.select(e)}this.change(),i.generateAll(this.engine.container)}},{key:"insert",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.engine,a=o.block,s=o.list,l=o.card,c=o.schema,d=o.mark,u=o.inline,h=this.engine.node;t=t||this.range.toTrusty();var p=a.closest(t.startNode),f=a.closest(t.endNode)[0]===p[0],v=a.isLastOffset(t,"end"),g=c.getCanMergeTags(),m=c.getAllowInTags(),b=p.closest(g.join(",")),y=t.collapsed,w=e.childNodes,k=It(e.firstChild||[]),x=function(){var n,r=It(e).first(),i=t.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode;if(i.inEditor()&&r&&"p"===r.name&&(1!==r.length||"br"!==(null===(n=r.first())||void 0===n?void 0:n.name))){if("p"===i.name&&h.isEmptyWidthChild(i)){var o=r.css();i.css(o)}h.unwrap(r)}};if(y){if(x(),t.startNode.isText()){var O=u.closest(t.startNode),C=t.startNode.text();0===O.length&&!O.equal(t.startNode)&&/^\u200B/.test(C)&&t.startNode.text(C.substr(1))}}else this.delete(t,f||!v,i),h.isEmptyWidthChild(t.startNode)&&t.shrinkToElementNode().shrinkToTextNode(),x();var E=void 0,j=function(e){E&&E.node[0].isConnected&&(e.shrinkToElementNode().setStart(E.node,E.offset),e.enlargeToElementNode()),a.merge(e),s.merge(void 0,e),d.merge(e),u.flat(e),r&&r(e),n.apply(e)};if(h.isList(t.startNode)||t.startNode.closest("li").length>0){var M=t.startNode.children();return E={node:t.startNode,offset:1===M.length&&"BR"===M[0].nodeName?0:t.startOffset},s.insert(e,t),void j(t)}if(k[0]){if(!h.isBlock(k)){if(t.shrinkToElementNode(),w.length>0){var N=t.startNode.children();E={node:t.startNode,offset:1===N.length&&"BR"===N[0].nodeName?0:t.startOffset}}var S=k.next(),T=k,_=h.insert(k,t);for(_&&(t=_);S&&!h.isBlock(S);){t.startContainer.nodeType===Node.TEXT_NODE&&t.enlargeToElementNode().collapse(!1);var A=S.next();T.after(S),T=S,S=A}if(T!==k&&t.select(T,!0).collapse(!1),0===w.length)return void j(t)}var I=t.cloneRange().enlargeToElementNode(!0).collapse(!1),D=I.startContainer.childNodes[0===t.startOffset?0:t.startOffset-1],z=I.startContainer.childNodes[t.startOffset];if(0!==w.length){var L=It(w[w.length-1]);if("br"===L.name&&(L.remove(),L=It(w[w.length-1])),!E){var R=t.startNode.children();E={node:t.startNode,offset:1===R.length&&"BR"===R[0].nodeName?0:t.startOffset}}for(var B=It(w[0]),P=null,F=[];B&&B.length>0;){var H,q;h.removeSide(B);var U=B.next();if(U||(L=B),P?P.after(B):h.insert(B,t,!0),(null===(H=B.get())||void 0===H?void 0:H.isConnected)&&F.push(B),this.engine.node.isBlock(B)||(null===U||void 0===U?void 0:U.isText())?P=B:(P&&t.select(B,!0).collapse(!1),P=null),!U&&(null===(q=B.get())||void 0===q?void 0:q.isConnected)&&t.select(B,!0).collapse(!1),E&&!E.node[0].isConnected){var W=B.parent();W&&(E={node:W,offset:B.index()})}B=U}b[0]&&F.forEach((function(e){g.indexOf(e.name)<0&&0===e.closest(b.name).length&&h.wrap(e,h.clone(b,!1,!1))}));var V=l.find(t.startNode);V&&V.focus(t,!1)}var Y=function(e){var t=e.first();if(!t||!h.isBlock(t))return e;for(;m.indexOf(t?t.name:"")>-1;)t=t.first();return t},G=function(e){var t=e.last();if(!t||!h.isBlock(t))return e;for(;m.indexOf(t?t.name:"")>-1;)t=t.last();return t},Z=function(e,t){if(!e.isCard()&&!k.isCard()){var n=t.parent(),r=e.parent(),i=n&&!n.isEditable()&&r&&!r.isEditable()&&n.name===r.name;return"p"===t.name&&i||e.name===t.name&&i&&!("li"===e.name&&!s.isSame(e.parent(),t.parent()))}},X=function(e){for(;!e.isEditable();){var t=e.parent();if(e.remove(),!t||!h.isEmpty(t))break;e=t}};if(D){var Q=Y(It(D.nextSibling||[])),K=G(It(D));"p"===K.name&&Q.name!==K.name&&Z(K,Q)&&(!function(e,t){if(e.name===t.name&&"p"===e.name){var n=t.attributes();n[te]&&delete n[te],e.attributes(n)}h.isEmptyWidthChild(e)&&!h.isEmptyWidthChild(t)&&(e.get().innerHTML=""),h.isCustomize(e)===h.isCustomize(t)&&s.unwrapCustomize(t)}(K,Q),h.merge(K,Q,!1),X(Q))}if(z){var $=G(It(z.previousSibling||[])),J=Y(It(z));$&&Z($,J)&&(h.merge($,J,!1),X(J))}j(t)}else j(t)}},{key:"paste",value:function(e,t,n){Object(b.a)(this,gn)[gn].paste(e,t,n,!0)}},{key:"delete",value:function(e,t){var n,r,i,o,a,s,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=e||this.range.toTrusty();if(c.collapsed)return this.isEmpty()&&this.initValue(c),void(e||this.apply(c));var d=this.engine,u=d.mark,h=d.inline,p=d.card,f=this.engine.node,v=this.engine.block,g=c.cloneRange();g.collapse(!0);var m=l?u.findMarks(g):[];c.enlargeToElementNode();var b=v.closest(c.cloneRange().shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode);if(!b.inEditor()&&!b.isRoot())return this.isEmpty()&&this.initValue(c),void(e||this.apply(c));if(b.isRoot()){for(var y=b.children().eq(c.startOffset);null===(w=y)||void 0===w?void 0:w.isCard();){var w,k=y.equal(c.endNode)||y.contains(c.endNode),x=y.next()||void 0,O=p.find(y);if(O?p.removeNode(O):y.remove(),k){y=void 0;break}y=x}if(!y)return this.isEmpty()&&this.initValue(c),void(e||this.apply(c));b=y}var C=c.endNode,E=c.endOffset,j=!v.closest(c.startNode).equal(v.closest(C)),M=h.closest(C);M.length>0&&(null===(n=C.parent())||void 0===n?void 0:n.equal(M))&&(C.isText()&&E===C.text().length-1&&c.setEndAfter(M));var N=c.cloneRange().shrinkToElementNode().shrinkToTextNode().getEndOffsetNode();c.extractContents();var S=c.startNode;if(S.isEditable()&&0===(null===(r=S.get())||void 0===r?void 0:r.childNodes.length)&&(S.html("<p><br /></p>"),this.engine.nodeId.generate(S)),(S=c.shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode).isCard()&&0===S.find(Ne).length&&p.remove(S),c.collapse(!0),S=c.shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode,b.isElement()&&!b.equal(S)&&0===b.get().childNodes.length&&b.remove(),S.isText()||!b.inEditor())return this.isEmpty()&&this.initValue(c),void(e||this.apply(c));var T=!1;if(j&&0===(null===(i=S.get())||void 0===i?void 0:i.childNodes.length)){var _,A,I,D,z=c.createSelection();S.remove(),(null===(_=z.anchor)||void 0===_||null===(A=_.get())||void 0===A?void 0:A.isConnected)&&(null===(I=z.focus)||void 0===I||null===(D=I.get())||void 0===D?void 0:D.isConnected)&&z.move(),T=!0,S=c.startNode}var L,R,B=b,P=N&&N.isConnected?S:null,F=0===(null===(o=S.get())||void 0===o?void 0:o.childNodes.length);!F&&S.length>0&&S.inEditor()&&(1===S[0].childNodes.length&&(null===(L=S[0].firstChild)||void 0===L?void 0:L.nodeType)===Node.ELEMENT_NODE&&f.isCustomize(S)&&(null===(R=S.first())||void 0===R?void 0:R.isCard())&&(F=!0));if(F&&f.isBlock(S)&&S.inEditor()){if(f.isList(S))S.remove();else{var H=f.getBatchAppendHTML(m,"<br />");S.isEditable()&&(H="<p>".concat(H,"</p>")),S.append(It(H));var q=S.find("br"),U=q.parent();U&&f.isMark(U)&&f.replace(q,It("\u200b",null)),c.select(S,!0)}return c.shrinkToElementNode().shrinkToTextNode(),c.collapse(!1),this.isEmpty()&&this.initValue(c),void(e||this.apply(c))}var W;if(B&&P&&P.length>0&&f.isBlock(B)&&f.isBlock(P)&&!B.equal(P)&&!(null===(a=B.parent())||void 0===a?void 0:a.equal(P))&&P.inEditor()&&function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f.isBlock(n)&&!f.isVoid(n)&&!n.isCard()){t.select(n,!0),t.collapse(!1);var a=t.shrinkToElementNode().shrinkToTextNode().createSelection(),s=r.parent();for(f.merge(n,r);s&&f.isBlock(s)&&f.isEmpty(s);)s.remove(),s=s.parent();a.move(),t.enlargeToElementNode(!0);var l=t.getPrevNode(),c=t.getNextNode(),d=t.startNode;l||c||!f.isBlock(d)||(d.append(It(f.getBatchAppendHTML(i,"<br />"))),t.select(d.find("br"),!0),t.collapse(!1)),l&&c&&!l.isCard()&&!c.isCard()&&o&&e(t,l,c,i)}}(c,B,P,m,t),S.children().each((function(e){var t=It(e);!f.isVoid(t)&&t.isElement()&&""===f.html(t)&&t.remove(),f.isInline(t)&&h.repairCursor(t)})),f.isList(S)&&f.isEmpty(S)&&S.remove(),(g=c.cloneRange().shrinkToTextNode()).startNode.isText()&&/^\u200B/g.test(g.startNode.text())&&0===g.startOffset){var V=g.startNode.prev();V&&this.engine.node.isInline(V)&&(c.select(V,!0),c.collapse(!1))}(f.isBlock(S)&&0===(null===(s=S.get())||void 0===s?void 0:s.childNodes.length)&&S.html("<br />"),T)&&(f.isBlock(B)&&0===(null===(W=B.get())||void 0===W?void 0:W.childNodes.length)&&B.html("<br />"),B.inEditor()&&c.select(B,!0).collapse(!1));this.isEmpty()&&this.initValue(c),e||this.apply(c)}},{key:"unwrap",value:function(e){var t=this.engine.block,n=this.range.get();if((e=e||t.closest(n.startNode)).inEditor()){var r=n.createSelection();this.engine.node.unwrap(e),r.move(),this.range.select(n)}}},{key:"mergeAfterDelete",value:function(e){var t,n,r=this.engine,i=r.block,o=r.card,a=r.list,s=r.mark,l=this.engine.node,c=this.range.get(),d=(e=e||i.closest(c.startNode)).children();if(0===d.length)return e.append(It("<br />")),void this.apply(c);var u=e.first();if(d.length>1&&"br"===(null===u||void 0===u?void 0:u.name))null===u||void 0===u||u.remove();else{var h=e.prev();if(h){if(h.isCard()){(1===d.length&&"br"===(null===u||void 0===u?void 0:u.name)||l.isEmpty(e))&&e.remove();var p=o.find(h);if(p)return void o.focus(p)}if(l.isVoid(h))h.remove();else if(l.isRootBlock(h)&&l.isEmpty(h))h.remove();else{if(h.isText()){var f=It("<p />");h.before(f),f.append(h),h=f}if(l.isList(h)&&(h=h.last()),1===d.length&&"br"===(null===u||void 0===u?void 0:u.name))null===u||void 0===u||u.remove();else if(h&&1===(null===(t=h.get())||void 0===t?void 0:t.childNodes.length)&&"br"===(null===(n=h.first())||void 0===n?void 0:n.name)){var v;null===(v=h.first())||void 0===v||v.remove()}if(!h||h.isText())this.unwrap(e);else{var g=c.createSelection();l.merge(h,e),g.move(),this.range.select(c),s.merge(),a.merge()}}}else{var m=e.parent();(null===m||void 0===m?void 0:m.inEditor())&&!(null===m||void 0===m?void 0:m.isEditable())&&this.unwrap(e)}}}},{key:"destroy",value:function(){this.event.destroy(),this.clearChangeTimer()}}]),e}();tn(".data-tooltip {\r\n\tfont-size: 14px;\r\n\tfont-variant: tabular-nums;\r\n\tline-height: 1.5;\r\n\tcolor: rgba(0, 0, 0, 0.65);\r\n\t-webkit-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tlist-style: none;\r\n\tposition: absolute;\r\n\tz-index: 1060;\r\n\tdisplay: block;\r\n\tvisibility: visible;\r\n\tmax-width: 320px;\r\n\tword-wrap:break-word;\r\n    top: 0;\r\n}\r\n\r\n.data-tooltip-hidden {\r\n\topacity: 0;\r\n\tvisibility: hidden;\r\n\ttransition: opacity 0.3s ease-in-out;\r\n}\r\n\r\n.data-tooltip-active {\r\n\topacity: 1;\r\n\tvisibility: visible;\r\n}\r\n\r\n.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\r\n\tpadding-bottom: 8px;\r\n}\r\n\r\n.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\r\n\tpadding-left: 8px;\r\n}\r\n\r\n.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\r\n\tpadding-top: 8px;\r\n}\r\n\r\n.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\r\n\tpadding-right: 8px;\r\n}\r\n\r\n.data-tooltip-inner {\r\n\tpadding: 6px 8px;\r\n\tcolor: #fff;\r\n\ttext-align: left;\r\n\ttext-decoration: none;\r\n\tbackground-color: rgba(0, 0, 0, 0.75);\r\n\tborder-radius: 4px;\r\n\t-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n\tword-wrap: break-word;\r\n}\r\n\r\n.data-tooltip-arrow {\r\n\tposition: absolute;\r\n\twidth: 0;\r\n\theight: 0;\r\n\tborder-color: transparent;\r\n\tborder-style: solid;\r\n}\r\n\r\n.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\r\n\tbottom: 3px;\r\n\tborder-width: 5px 5px 0;\r\n\tborder-top-color: rgba(0, 0, 0, 0.75);\r\n}\r\n\r\n.data-tooltip-placement-top .data-tooltip-arrow {\r\n\tleft: 50%;\r\n\tmargin-left: -5px;\r\n}\r\n\r\n.data-tooltip-placement-topLeft .data-tooltip-arrow {\r\n\tleft: 16px;\r\n}\r\n\r\n.data-tooltip-placement-topRight .data-tooltip-arrow {\r\n\tright: 16px;\r\n}\r\n\r\n.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r\n\tleft: 3px;\r\n\tborder-width: 5px 5px 5px 0;\r\n\tborder-right-color: rgba(0, 0, 0, 0.75);\r\n}\r\n\r\n.data-tooltip-placement-right .data-tooltip-arrow {\r\n\ttop: 50%;\r\n\tmargin-top: -5px;\r\n}\r\n\r\n.data-tooltip-placement-rightTop .data-tooltip-arrow {\r\n\ttop: 8px;\r\n}\r\n\r\n.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r\n\tbottom: 8px;\r\n}\r\n\r\n.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r\n\tright: 3px;\r\n\tborder-width: 5px 0 5px 5px;\r\n\tborder-left-color: rgba(0, 0, 0, 0.75);\r\n}\r\n\r\n.data-tooltip-placement-left .data-tooltip-arrow {\r\n\ttop: 50%;\r\n\tmargin-top: -5px;\r\n}\r\n\r\n.data-tooltip-placement-leftTop .data-tooltip-arrow {\r\n\ttop: 8px;\r\n}\r\n\r\n.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r\n\tbottom: 8px;\r\n}\r\n\r\n.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r\n\ttop: 3px;\r\n\tborder-width: 0 5px 5px;\r\n\tborder-bottom-color: rgba(0, 0, 0, 0.75);\r\n}\r\n\r\n.data-tooltip-placement-bottom .data-tooltip-arrow {\r\n\tleft: 50%;\r\n\tmargin-left: -5px;\r\n}\r\n\r\n.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\r\n\tleft: 16px;\r\n}\r\n\r\n.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r\n\tright: 16px;\r\n}");var bn=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,null,[{key:"show",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{placement:"top"};e.hide();var i=It(function(e){return"\n    <div ".concat(ee,'="tooltip" class="data-tooltip data-tooltip-placement-').concat(e.placement,' data-tooltip-hidden" style="transform-origin: 50% 45px 0px;">\n        <div class="data-tooltip-content">\n            <div class="data-tooltip-arrow"></div>\n            <div class="data-tooltip-inner" data-role="tooltip"></div>\n        </div>\n    </div>')}(r));"string"===typeof n?i.find("[data-role=tooltip]").html(n):i.find("[data-role=tooltip]").append(n),It(document.body).append(i);var o=i.get(),a=(null===o||void 0===o?void 0:o.clientWidth)||0,s=(null===o||void 0===o?void 0:o.clientHeight)||0,l=t.get(),c=l.clientWidth,d=l.getBoundingClientRect(),u=Math.round(window.pageXOffset+d.left+c/2-a/2),h=Math.round(window.pageYOffset+d.top-s-2);"bottom"===r.placement&&(h+=d.height+s+2),i.css({left:u+"px",top:h+"px"}),i.addClass("data-tooltip-active")}},{key:"hide",value:function(){It("div[".concat(ee,"=tooltip]")).remove()}}]),e}(),yn=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.options=t,this.root=It(function(e){return'\n    <span class="data-toolbar-item">\n        <a class="data-toolbar-btn"'.concat(e.disabled?' disabled="disabled"':""," ").concat(e.link?' href="'+e.link+'" target="_blank"':"",">\n            ").concat(e.content,"\n        </a>\n    </span>")}(t)),t.style&&this.root.attributes("style",t.style),t.class&&this.root.addClass(t.class)}return Object(h.a)(e,[{key:"getPlacement",value:function(){return(this.root.closest(".data-toolbar").attributes("data-placement")||"top").startsWith("top")?"top":"bottom"}},{key:"render",value:function(e){var t=this,n=this.options,r=n.title,i=n.didMount,o=n.onClick,a=n.link;e.append(this.root),r&&(this.root.on("mouseenter",(function(){var e=t.getPlacement();bn.show(t.root,"function"===typeof r?r():r,{placement:e})})),this.root.on("mouseleave",(function(){bn.hide()})),this.root.on("mousedown",(function(){bn.hide()}))),!a&&o&&this.root.find("a").on("click",(function(e){e.preventDefault(),e.stopPropagation(),o(e,t.root)})),i&&i(this.root)}}]),e}(),wn=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.switch=void 0,this.options=t}return Object(h.a)(e,[{key:"renderTo",value:function(e){var t=this;this.root=It(function(e){var t=!!e.checked;return e.getState&&(t=e.getState()),'\n    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-switch">\n        <span class="data-toolbar-dropdown-item-content"'.concat(e.disabled?' disabled="disabled"':"",">").concat(e.content,'</span>\n        <button type="button"').concat(e.disabled?' disabled="disabled"':"",' role="switch" aria-checked="true" class="switch-btn ').concat(t?" switch-checked":"",'">\n            <div class="switch-handle"></div>\n            <span class="switch-inner"></span>\n        </button>\n    </div>')}(this.options)),this.switch=this.root.find(".switch-btn"),e.append(this.root),this.root.on("mousedown",(function(e){return e.preventDefault()}));var n=this.options.onClick;this.root.on("click",(function(e){e.stopPropagation(),n&&(n(e,t.root),t.updateSwitch())}))}},{key:"updateSwitch",value:function(){var e,t;this.options.getState&&(this.options.getState()?null===(e=this.switch)||void 0===e||e.addClass("switch-checked"):null===(t=this.switch)||void 0===t||t.removeClass("switch-checked"))}}]),e}(),kn=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.options=t}return Object(h.a)(e,[{key:"renderTo",value:function(e){var t,n=this;this.root=It((t=this.options,'\n    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-btn">\n        <span class="data-toolbar-dropdown-item-content"'.concat(t.disabled?' disabled="disabled"':"",">\n            ").concat(t.content,"\n        </span>\n    </div>"))),e.append(this.root);var r=this.options.onClick;r&&this.root.on("click",(function(e){return r(e,n.root)}))}}]),e}(),xn=function(){function e(t){var n=this;Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.dropdown=void 0,this.documentMouseDown=function(e){var t;n.root&&!n.root[0].contains(e.target)&&(null===(t=n.dropdown)||void 0===t?void 0:t.hasClass("show"))&&n.hideDropdown()},this.options=t}return Object(h.a)(e,[{key:"initToggleEvent",value:function(){var e=this,t=this.root.find(".data-toolbar-dropdown");t.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),t.on("click",(function(t){t.stopPropagation(),e.toggleDropdown()})),document.addEventListener("mousedown",this.documentMouseDown,!0)}},{key:"toggleDropdown",value:function(){var e;(null===(e=this.dropdown)||void 0===e?void 0:e.hasClass("show"))?this.hideDropdown():this.showDropdown()}},{key:"showDropdown",value:function(){var e;null===(e=this.dropdown)||void 0===e||e.addClass("show")}},{key:"hideDropdown",value:function(){var e;null===(e=this.dropdown)||void 0===e||e.removeClass("show")}},{key:"renderTooltip",value:function(){var e=this,t=this.options.title;t&&(this.root.on("mouseenter",(function(){bn.show(e.root,"function"===typeof t?t():t)})),this.root.on("mouseleave",(function(){bn.hide()})),this.root.on("mousedown",(function(){bn.hide()})))}},{key:"renderDropdown",value:function(e){var t=this;this.dropdown=e.find(".dropdown-container"),this.options.items.forEach((function(e){switch(e.type){case"switch":return new wn(e).renderTo(t.dropdown);case"button":return new kn(e).renderTo(t.dropdown)}})),this.dropdown.on("click",(function(e){e.stopPropagation(),t.hideDropdown()}))}},{key:"render",value:function(e){var t;this.root=It((t=this.options,'\n    <span class="data-toolbar-item data-toolbar-item-dropdown">\n        <a class="data-toolbar-btn data-toolbar-dropdown"'.concat(t.disabled?' disabled="disabled"':"",">").concat(t.content,'</a>\n        <div class="dropdown-container"></div>\n    </span>'))),e.append(this.root),this.initToggleEvent(),this.renderTooltip(),this.renderDropdown(e);var n=this.options.didMount;n&&n(this.root)}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.documentMouseDown,!0)}}]),e}(),On=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.onEnter=void 0,this.onInput=void 0,this.onChange=void 0,this.options=t,this.root=It(function(e){return'\n    <span class="data-toolbar-item data-toolbar-item-input">\n        '.concat(e.prefix?"<span class='data-toolbar-input-prefix'>"+Ze(e.prefix)+"</span>":"",'<input data-role="input" placeholder="').concat(Ze(e.placeholder),'" class="data-toolbar-input" type="input" value="').concat(Ze(e.value.toString()),'" />').concat(e.suffix?"<span class='data-toolbar-input-suffix'>"+Ze(e.suffix)+"</span>":"","\n    </span>")}(t)),this.onEnter=t.onEnter||function(){},this.onInput=t.onInput||function(){},this.onChange=t.onChange||function(){}}return Object(h.a)(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"render",value:function(e){var t=this,n=this.options,r=n.value,o=n.didMount,a=this.find("input"),s=a.get();s&&(s.value=(void 0!==r?r:"").toString(),a.on("keydown",(function(e){e.stopPropagation(),i()("enter",e)&&(e.preventDefault(),s.blur(),t.onEnter(s.value))})),a.on("input",(function(){t.onInput(s.value)})),a.on("change",(function(){setTimeout((function(){t.onChange(s.value)}),10)})),e.append(this.root),o&&o(this.root))}}]),e}(),Cn=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.switch=void 0,this.options=t,this.root=It(function(e){var t=!!e.checked;return e.getState&&(t=e.getState()),'\n    <div class="data-toolbar-switch">\n        <span class="switch-content"'.concat(e.disabled?' disabled="disabled"':"",">").concat(e.content,'</span>\n        <button type="button" role="switch" aria-checked="true" class="switch-btn ').concat(t?" switch-checked":"",'"').concat(e.disabled?' disabled="disabled"':"",'>\n            <div class="switch-handle"></div>\n            <span class="switch-inner"></span>\n        </button>\n    </div>')}(t)),this.switch=this.root.find(".switch-btn"),t.class&&this.root.addClass(t.class)}return Object(h.a)(e,[{key:"render",value:function(e){var t=this,n=this.options,r=n.didMount,i=n.onClick;e.append(this.root),this.root.on("mousedown",(function(e){return e.preventDefault()})),this.root.on("click",(function(e){e.stopPropagation(),i&&(i(e,t.root),t.updateSwitch())})),r&&r(this.root)}},{key:"updateSwitch",value:function(){var e,t;this.options.getState&&(this.options.getState()?null===(e=this.switch)||void 0===e||e.addClass("switch-checked"):null===(t=this.switch)||void 0===t||t.removeClass("switch-checked"))}}]),e}();tn('.data-toolbar {\r\n\tposition: absolute;\r\n\topacity: 0;\r\n\tvisibility: hidden;\r\n\twidth: auto;\r\n\tline-height: 26px;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tfont-size: 14px;\r\n\tfont-weight: normal;\r\n\ttext-indent: 0;\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t -ms-user-select: none;\r\n\t     user-select: none;\r\n    z-index: 127;\r\n}\r\n\r\n.data-toolbar-active {\r\n\topacity: 1;\r\n\tvisibility: visible;\r\n}\r\n\r\n.data-toolbar-block {\r\n\ttop: auto;\r\n\tbottom: -46px;\r\n\tleft: -1px;\r\n\tright: auto;\r\n\theight: 40px;\r\n}\r\n\r\n.data-toolbar-btn {\r\n\tline-height: 26px;\r\n\tmin-width: 28px;\r\n\tdisplay: inline-block;\r\n\ttext-align: center;\r\n\tcolor: #595959;\r\n\ttransition: background-color 0.3s ease-in-out;\r\n\tcursor: pointer;\r\n}\r\n\r\n.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\r\n\tbackground-color: transparent;\r\n\tbox-shadow: none;\r\n\tcursor: not-allowed;\r\n}\r\n\r\n.data-toolbar-group {\r\n\tborder: 1px solid rgba(226, 226, 226, 0.84);\r\n    border-radius: 4px;\r\n    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\r\n    background: #fff;\r\n    position: relative;\r\n    display: inline-flex;\r\n    padding: 5px;\r\n    align-items: center;\r\n}\r\n\r\n.data-toolbar-item {\r\n\tposition: relative;\r\n\tdisplay: inline-block;\r\n\tline-height: 26px;\r\n\ttext-align: left;\r\n\tcolor: #595959;\r\n\tflex: 0 0 auto;\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n}\r\n\r\n.data-toolbar-item:not(.data-toolbar-item-input):hover, .data-toolbar-item.active:not(.data-toolbar-item-input){\r\n    background-color: #f4f4f4;\r\n    border-radius: 2px;\r\n}\r\n\r\n.data-toolbar-item > * {\r\n    font-size: 12px !important;\r\n}\r\n\r\n.data-toolbar-item[disabled] {\r\n\topacity: 0.5;\r\n\tcursor: not-allowed;\r\n}\r\n\r\n.data-toolbar-item-split {\r\n\twidth: 1px;\r\n\theight: 16px;\r\n\tline-height: 16px;\r\n\tmargin: 6px 4px;\r\n\tborder-left: 1px solid #e8e8e8;\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.data-toolbar-item-dropdown-active {\r\n\topacity: 1;\r\n\tvisibility: visible;\r\n\ttransform: translateY(0px);\r\n}\r\n\r\n.data-toolbar-item-input {\r\n\tdisplay: flex;\r\n    margin: 0 4px;\r\n}\r\n\r\n.data-toolbar-item-input .data-toolbar-input {\r\n    width: 46px;\r\n    line-height: 12px;\r\n    font-size: 12px;\r\n    outline: none;\r\n    border: 1px solid #dadada;\r\n    border-radius: 4px;\r\n}\r\n\r\n.data-toolbar-item-input .data-toolbar-input::-moz-selection {\r\n    color: inherit;\r\n    background:transparent\r\n}\r\n\r\n.data-toolbar-item-input .data-toolbar-input::selection {\r\n    color: inherit;\r\n    background:transparent\r\n}\r\n\r\n.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\r\n{\r\n    color: #fff;\r\n    background: #1890ff;\r\n}\r\n\r\n.data-toolbar-item-input .data-toolbar-input:focus::selection\r\n{\r\n    color: #fff;\r\n    background: #1890ff;\r\n}\r\n\r\n.data-toolbar-item-dropdown .dropdown-container {\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\tpadding: 8px 0;\r\n\ttop: 100%;\r\n\tmargin-top: 6px;\r\n\tborder-radius: 2px;\r\n\tbackground-color: #fff;\r\n\tbox-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\r\n    z-index: 99999;\r\n}\r\n\r\n.data-toolbar-item-dropdown .dropdown-container.show {\r\n\tdisplay: block;\r\n}\r\n\r\n.data-toolbar-dropdown-item {\r\n\tpadding: 2px 16px;\r\n\tmargin: 0;\r\n\twhite-space: nowrap;\r\n\tline-height: 26px;\r\n\tcolor: #404040;\r\n\tcursor: pointer;\r\n    display: block;\r\n}\r\n\r\n.data-toolbar-dropdown-item:hover {\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.data-toolbar-dropdown-switch {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\r\n\tflex: 1;\r\n    margin-right: 4px;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn {\r\n    margin: 0;\r\n    padding: 0;\r\n    color: #595959;\r\n    font-size: 14px;\r\n    font-variant: tabular-nums;\r\n    line-height: 1.5;\r\n    list-style: none;\r\n    -webkit-font-feature-settings: "tnum";\r\n    font-feature-settings: "tnum";\r\n    position: relative;\r\n    display: inline-block;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    vertical-align: middle;\r\n    background-color: rgba(0,0,0,.25);\r\n    border: 0;\r\n    border-radius: 100px;\r\n    cursor: pointer;\r\n    -webkit-transition: all .2s;\r\n    transition: all .2s;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    min-width: 28px;\r\n    height: 16px;\r\n    line-height: 16px;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn.switch-checked {\r\n    background-color: #347EFF\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn .switch-handle {\r\n    top: 2px;\r\n    left: 2px;\r\n    width: 12px;\r\n    height: 12px;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r\n    position: absolute;\r\n    -webkit-transition: all .2s ease-in-out;\r\n    transition: all .2s ease-in-out;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\r\n    left: calc(100% - 14px);\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    background-color: #fff;\r\n    border-radius: 9px;\r\n    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r\n    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r\n    content: "";\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn .switch-inner {\r\n    display: block;\r\n    margin: 0 5px 0 18px;\r\n    font-size: 12px;\r\n    color: #fff;\r\n    -webkit-transition: margin .2s;\r\n    transition: margin .2s;\r\n}\r\n\r\n.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\r\n    margin: 0 18px 0 5px;\r\n}\r\n.data-toolbar-switch {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n    padding: 0 4px;\r\n    cursor: pointer;\r\n    width: -webkit-max-content;\r\n    width: -moz-max-content;\r\n    width: max-content;\r\n}\r\n\r\n.data-toolbar-switch:hover {\r\n    background-color: #f4f4f4;\r\n    border-radius: 2px;\r\n}\r\n\r\n.data-toolbar-switch .switch-content {\r\n\tflex: 1;\r\n    margin-right: 4px;\r\n}\r\n\r\n.data-toolbar-switch .switch-btn {\r\n    margin: 0;\r\n    padding: 0;\r\n    color: #595959;\r\n    font-size: 14px;\r\n    font-variant: tabular-nums;\r\n    line-height: 1.5;\r\n    list-style: none;\r\n    -webkit-font-feature-settings: "tnum";\r\n    font-feature-settings: "tnum";\r\n    position: relative;\r\n    display: inline-block;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    vertical-align: middle;\r\n    background-color: rgba(0,0,0,.25);\r\n    border: 0;\r\n    border-radius: 100px;\r\n    cursor: pointer;\r\n    -webkit-transition: all .2s;\r\n    transition: all .2s;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    min-width: 28px;\r\n    height: 16px;\r\n    line-height: 16px;\r\n}\r\n\r\n.data-toolbar-switch .switch-btn.switch-checked {\r\n    background-color: #347EFF\r\n}\r\n\r\n.data-toolbar-switch .switch-btn .switch-handle {\r\n    top: 2px;\r\n    left: 2px;\r\n    width: 12px;\r\n    height: 12px;\r\n}\r\n\r\n.data-toolbar-switch .switch-btn .switch-handle, .data-toolbar-switch .switch-btn .switch-handle:before {\r\n    position: absolute;\r\n    -webkit-transition: all .2s ease-in-out;\r\n    transition: all .2s ease-in-out;\r\n}\r\n\r\n.data-toolbar-switch .switch-btn.switch-checked .switch-handle {\r\n    left: calc(100% - 14px);\r\n}\r\n\r\n.data-toolbar-switch .switch-btn .switch-handle:before {\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    background-color: #fff;\r\n    border-radius: 9px;\r\n    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r\n    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r\n    content: "";\r\n}\r\n\r\n.data-toolbar-switch .switch-btn .switch-inner {\r\n    display: block;\r\n    margin: 0 5px 0 18px;\r\n    font-size: 12px;\r\n    color: #fff;\r\n    -webkit-transition: margin .2s;\r\n    transition: margin .2s;\r\n}\r\n\r\n.data-toolbar-switch .switch-btn.switch-checked .switch-inner {\r\n    margin: 0 18px 0 5px;\r\n}');var En=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.items=[],this.options=Object(d.a)({},t),this.root=It("<div ".concat(ee,'="ui" class="data-toolbar data-toolbar-active" ').concat(Lt,'="false"></div>'))}return Object(h.a)(e,[{key:"getPlacement",value:function(){return(this.root.attributes("data-placement")||"top").startsWith("top")?"top":"bottom"}},{key:"addItems",value:function(e){var t=this;this.options.items.forEach((function(n){var r;("button"===n.type&&(r=new yn(n)).render(e),"switch"===n.type&&(r=new Cn(n)).render(e),"input"===n.type)&&(r=new On(n)).render(e);if("dropdown"===n.type&&(r=new xn(n)).render(e),"node"===n.type){var i=n,o=i.node;o.addClass("data-toolbar-item");var a=i.title;a&&(o.on("mouseenter",(function(){var e=t.getPlacement();bn.show(o,"function"===typeof a?a():a,{placement:e})})),o.on("mouseleave",(function(){bn.hide()})),o.on("mousedown",(function(){bn.hide()}))),e.append(o),n.didMount&&n.didMount(o)}r&&t.items.push(r)}))}},{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove()}},{key:"hide",value:function(){this.root.removeClass("data-toolbar-active")}},{key:"show",value:function(){this.root.addClass("data-toolbar-active")}},{key:"renderGroup",value:function(){return It('<div class="data-toolbar-group"></div>')}},{key:"render",value:function(e){var t=this.renderGroup();return this.root.append(t),this.addItems(t),e&&e.append(this.root),this.root.addClass("data-toolbar-block"),this.root}},{key:"update",value:function(e){this.options=e,this.root.empty();var t=this.renderGroup();this.root.append(t),this.addItems(t)}}]),e}(),jn="ot-user-background",Mn="ot-user-cursor",Nn="ot-user-cursor-card",Sn="ot-card-mask",Tn="ot-user-cursor-trigger",_n="ot-user-cursor-trigger-active",An=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.root=void 0,this.hideCursorInfoTimeoutMap=void 0,this.engine=t,this.root=t.root,this.hideCursorInfoTimeoutMap={}}return Object(h.a)(e,[{key:"destroy",value:function(){var e,t=null!==(e=this.engine.scrollNode)&&void 0!==e?e:this.root;t.find(".".concat(jn)).remove(),t.find(".".concat(Mn)).remove(),t.find(".".concat(Sn)).remove()}},{key:"getRectWithRange",value:function(e,t){var n,r=t.getClientRect(),i=null===(n=e.get())||void 0===n?void 0:n.getBoundingClientRect();return new DOMRect(r.left-((null===i||void 0===i?void 0:i.left)||0),r.top-((null===i||void 0===i?void 0:i.top)||0),r.right-r.left,r.bottom-r.top)}},{key:"isWrapByRange",value:function(e){var t=e.cloneRange().collapse(!0).getClientRect(),n=e.cloneRange().collapse(!1).getClientRect();return t.bottom!==n.bottom}},{key:"drawSubRang",value:function(e,t,n,r){for(var i=n.startOffset,o=n.startNode,a=n.endNode,s=n.startOffset,l=n.endOffset,c=n.getClientRect().top,u=i;s<l;){n.setStart(n.commonAncestorContainer,s),n.setEnd(n.commonAncestorContainer,s+1);var h=n.getClientRect();if(h.top>c||s===l-1){n.setStart(n.commonAncestorContainer,u),u=s,c=h.top;var p=this.getRectWithRange(e,n);t.clearRect(p),t.drawRect(Object(d.a)(Object(d.a)({},p.toJSON()),r))}s++}n.setStart(o,i),n.setEnd(a,l)}},{key:"drawBackground",value:function(e,t){var n,r,i,o,a,s=this,l=this.engine.card,c=t.uuid,u=t.color,h=_()(u);h.setAlpha(.3);var p,f=h.toRgbString(),v=(null!==(n=this.engine.scrollNode)&&void 0!==n?n:this.root).find(".".concat(jn,"[").concat(gt,'="').concat(c,'"]'));v&&v.length>0?(v.attributes(mt,u.toString()),(a=v[0].__canvas).clear()):(v=It('<div class="'.concat(jn,'" ').concat(gt,'="').concat(c,'" ').concat(mt,'="').concat(u,'" />')),(null!==(p=this.engine.scrollNode)&&void 0!==p?p:this.root).append(v),a=new J({container:v.get()}),v[0].__canvas=a);v.css({position:"absolute",top:0,left:0,"pointer-events":"none"}),v[0].__range=e.cloneRange();var g=null!==(r=this.engine.scrollNode)&&void 0!==r?r:this.root,m=(null===(i=g.get())||void 0===i?void 0:i.clientWidth)||g.width(),b=this.root.height();a.resize(m,b);var y=l.find(e.commonAncestorNode,!0);y&&!y.isCenter(e.commonAncestorNode)&&(y=void 0);var w={fill:f},k=e.getSubRanges();if((null===(o=y)||void 0===o?void 0:o.isEditable)&&y.drawBackground){var x=y.drawBackground(v,e,a);if(!1===x)return[e];if(x){if(!Array.isArray(x))return x.x<0&&(a.resize(m-x.x,b),v.css("left","".concat(x.x,"px")),x.x=0),a.clearRect(x),a.drawRect(Object(d.a)(Object(d.a)({},x.toJSON()),w)),[e];k=x}}else if(y)return[e];return k.forEach((function(e){if(s.isWrapByRange(e))s.drawSubRang(v,a,e,w);else{var t=s.getRectWithRange(v,e);a.clearRect(t),a.drawRect(Object(d.a)(Object(d.a)({},t.toJSON()),w))}})),k}},{key:"getNodeRect",value:function(e,t){var n,r=e.parent();if(e.isCard()&&(null===r||void 0===r?void 0:r.hasClass(this.engine.list.CUSTOMZIE_LI_CLASS))&&(null===r||void 0===r||null===(n=r.first())||void 0===n?void 0:n.equal(e))&&e.next()&&(e=e.next()),e.isElement()&&(t=e.get().getBoundingClientRect()),e.isText()){var i=Kt.create(this.engine).cloneRange();i.select(e,!0),t=i.getClientRect()}return t}},{key:"getCursorRect",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=(null===(t=this.root.get())||void 0===t?void 0:t.getBoundingClientRect())||{top:0,left:0};if(en(e)){var o=e,a=o.startNode;o.shrinkToElementNode();var s=o.getClientRect();if(a.isElement()&&0===s.height){var l=It(a[0].childNodes[o.startOffset]);(l&&l.length>0||(l=a.first())&&l.length>0)&&(s=this.getNodeRect(l,s))}var c=s.top-(i.top||0),d=s.left-(i.left||0)-r,u=s.height;return{top:c+"px",left:d+"px",height:u>0?u+"px":-1,elementHeight:s.height||0}}var h=e,p=$e(h.css("outline-width")),f=(null===(n=h.get())||void 0===n?void 0:n.getBoundingClientRect())||{top:0,left:0,height:0},v=f.top-i.top-1,g=f.left-i.left;return p&&(v-=p+1,g-=2),{left:g+"px",top:v+"px",height:0,elementHeight:f.height||0}}},{key:"setCursorRect",value:function(e,t){if(-1!==t.height){if(0===t.height)return e.css(t),void e.addClass(Nn);e.css(t),e.removeClass(Nn)}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,r=t.color;this.hideCursorInfoTimeoutMap[n]&&clearTimeout(this.hideCursorInfoTimeoutMap[n]);var i=e.find(".".concat(Tn)),o=e.css("background-color");e.attributes("data-old-background-color",o),i.addClass("".concat(_n)),e.css("background-color",r),i.css("background-color",r)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".".concat(Tn)),n=e.attributes("data-old-background-color");t.removeClass("".concat(_n)),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t,n){var r=this,i=t.uuid,o=t.name,a=t.color,s=this.getCursorRect(e),l=this.root.children(".".concat(Mn,"[").concat(gt,'="').concat(i,'"]'));if(l&&l.length>0)this.setCursorRect(l,s);else{var c='\n            <div class="'.concat(Mn,'" ').concat(gt,'="').concat(i,'">\n                <div class="').concat(Tn,'">').concat(Ze(o||""),"</div>\n            </div>"),d=(l=It(c)).find(".".concat(Tn));if(0===s.elementHeight){var u=0;!function t(){u++,(s=r.getCursorRect(e)).elementHeight<20&&u<=50?setTimeout((function(){t()}),20):r.setCursorRect(l,s)}()}else this.setCursorRect(l,s);l.on("mouseenter",(function(){return r.showCursorInfo(l,t)}));var h=!0;l.on("transitionstart",(function(){h=!1})),l.on("transitionend",(function(){h=!0})),l.on("mouseleave",(function(){h&&r.hideCursorInfo(l)})),l.css("background-color",a),d.css("background-color",a),this.root.append(l)}if(l&&l[0]){l.css("z-index","");var p=this.engine.card.components.find((function(e){return e.isMaximize}));if(p){var f=this.engine.card.closest(en(e)?e.startNode:e,!0);f&&p.root.equal(f)||l.css("z-index",120)}return l[0].__target=en(e)?e.toPath(!0):e,!1===n?l:(this.showCursorInfo(l,t),this.hideCursorInfoTimeoutMap[i]&&clearTimeout(this.hideCursorInfoTimeoutMap[i]),this.hideCursorInfoTimeoutMap[i]=setTimeout((function(){r.hideCursorInfo(l)}),2e3),l)}}},{key:"drawCard",value:function(e,t,n){var r,i,o=this,a=this.engine.language,s=(null===(r=this.root.get())||void 0===r?void 0:r.getBoundingClientRect())||{left:0,top:0,width:0,height:0},l=(null===(i=e.get())||void 0===i?void 0:i.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c=this.root.children(".".concat(Sn,"[").concat(gt,'="').concat(n.uuid,'"]'));if(c&&c.length>0)return c[0].__node=e[0],void c.css({left:l.left-s.left+"px",top:l.top-s.top+"px"});if((c=It('<div class="'.concat(Sn,'" ').concat(gt,'="').concat(n.uuid,'" />')))[0].__node=e[0],0===l.height){var d=0;!function t(){var n;d++,(l=(null===(n=e.get())||void 0===n?void 0:n.getBoundingClientRect())||{left:0,top:0,width:0,height:0}).height<20&&d<=50?setTimeout((function(){t()}),20):c.css({left:l.left-s.left+"px",top:l.top-s.top+"px",width:l.width+"px",height:l.height+"px"})}()}else c.css({left:l.left-s.left+"px",top:l.top-s.top+"px",width:l.width+"px",height:l.height+"px"});c.on("mouseenter",(function(){o.showCursorInfo(t,n),bn.show(c,a.get("card","lockAlert").toString(),{placement:"bottomLeft"})})),c.on("mousemove",(function(e){It("div[".concat(ee,"=tooltip]")).css({left:e.pageX-16+"px",top:e.pageY+32+"px"})})),c.on("mouseleave",(function(){o.hideCursorInfo(t),bn.hide()})),c.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),c.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),this.root.append(c)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t||{},r=n.uuid,i=n.color;if(i){var o=_()(i);o.setAlpha(.3);var a,s=o.toRgbString();return e.selectedByOther||(a=e.onSelectByOther(!0,{color:i,rgb:s})),e.selectedByOther=r,a}e.selectedByOther&&e.onSelectByOther(!1),e.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){if(!e.isEditable){var n=t||{},r=n.uuid,i=n.color;if(i){var o=_()(i);o.setAlpha(.3);var a,s=o.toRgbString();return e.activatedByOther||(a=e.onActivateByOther(!0,{color:i,rgb:s})),e.activatedByOther=r,a}e.activatedByOther&&e.onActivateByOther(!1),e.activatedByOther=!1}}},{key:"drawRange",value:function(e,t,n){var r=this,i=this.engine.card,o=t.uuid,a=e.commonAncestorNode,s=i.find(a);s&&!s.isCenter(a)&&(s=void 0);var l,c,d=[];(i.each((function(e){e.isEditable||s&&e.root.equal(s.root)||(e.activatedByOther===o&&r.setCardActivatedByOther(e),d.push(o))})),d.length>0)&&(null===(l=this.root.get())||void 0===l||null===(c=l.querySelectorAll(d.map((function(e){return".".concat(Sn,"[").concat(gt,'="').concat(e,'"]')})).join(",")))||void 0===c||c.forEach((function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e),bn.hide()})));if(s&&!s.isEditable){var u=this.setCardActivatedByOther(s,t)||s.root,h=s.constructor.collab;if(void 0===h||!0===h){var p=this.drawCursor(u,t,n);p&&this.drawCard(u,p,t),this.drawBackground(e,t)}}else{if(s)return void this.drawBackground(e,t);i.each((function(n){var i=n.getCenter();if(i&&i.length>0){if(n.isEditable&&i.contains(e.startNode)&&i.contains(e.endNode)&&(e.startNode.closest(se).length>0||e.endNode.closest(se).length>0))return void r.setCardSelectedByOther(n);e.isPointInRange(i.get(),0)?r.setCardSelectedByOther(n,t):n.selectedByOther===o&&r.setCardSelectedByOther(n)}}));var f=i.getSingleSelectedCard(e);if(f){if(f.isEditable){var v=f.getCenter();if(v.contains(e.startNode)&&v.contains(e.endNode)&&(e.startNode.closest(se).length>0||e.endNode.closest(se).length>0))return}var g=this.setCardSelectedByOther(f,t)||f.root;this.drawCursor(g,t,n)}else{e.shrinkToElementNode();var m=this.drawBackground(e,t);e.collapsed||(m.forEach((function(t){t.collapsed||(e=t)})),e.shrinkToElementNode(),e.collapse(!1)),this.drawCursor(e,t,n)}}}},{key:"updateBackgroundPosition",value:function(){var e,t,n,r=this;null===(e=null!==(t=null===(n=this.engine.scrollNode)||void 0===n?void 0:n.get())&&void 0!==t?t:this.root.get())||void 0===e||e.querySelectorAll(".".concat(jn)).forEach((function(e){var t=It(e),n=e.__range,i=t.attributes(gt),o=t.attributes(mt);r.drawBackground(n,{uuid:i,color:o})}))}},{key:"updateCursorPosition",value:function(){var e,t=this;null===(e=this.root.get())||void 0===e||e.querySelectorAll(".".concat(Mn)).forEach((function(e){var n=It(e),r=e.__target;if(r)if(r.name||(r=Kt.fromPath(t.engine,r,!0)),r.startContainer||0!==It(r).closest("body").length){var i=t.getCursorRect(r);t.setCursorRect(n,i)}else n.remove();else n.remove()}))}},{key:"updateCardPosition",value:function(){var e,t,n=(null===(e=this.root.get())||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0};null===(t=this.root.get())||void 0===t||t.querySelectorAll(".".concat(Sn)).forEach((function(e){var t,r=e.__node;if(null===r||void 0===r?void 0:r.isConnected){var i=r.getBoundingClientRect();e.style.left=i.left-n.left+"px",e.style.top=i.top-n.top+"px"}else null===(t=e.parentNode)||void 0===t||t.removeChild(e)}))}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t,n=this.getCursorRect(e);null===(t=this.root.get())||void 0===t||t.querySelectorAll(".".concat(Mn)).forEach((function(e){var t=e.querySelector(".".concat(Tn)),r=e.style.left,i=e.style.top,o=_()(e.style.backgroundColor);n.left===r&&n.top===i?o.setAlpha(.3):o.setAlpha(1);var a=o.toRgbString();e.style.backgroundColor=a,t&&(t.style.backgroundColor=a)}))}},{key:"render",value:function(e,t,n){var r=e.path,i=e.uuid,o=e.active;if(r){var a=Kt.fromPath(this.engine,r,!0);this.drawRange(a,t,o||n)}else this.remove(i)}},{key:"remove",value:function(e){var t,n,r,i=this;null===(t=null!==(n=null===(r=this.engine.scrollNode)||void 0===r?void 0:r.get())&&void 0!==n?n:this.root.get())||void 0===t||t.querySelectorAll("[".concat(gt,'="').concat(e,'"]')).forEach((function(t){var n;if(t.classList.contains(Sn)){var r=t.__node,o=r?i.engine.card.find(r):null;o&&!o.isEditable&&o.activatedByOther===e&&i.setCardActivatedByOther(o)}null===(n=t.parentNode)||void 0===n||n.removeChild(t)})),this.engine.card.each((function(t){t.isEditable||t.selectedByOther!==e||i.setCardSelectedByOther(t)}))}}]),e}(),In=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).engine=void 0,r.prevRange=null,r.rangeColoring=void 0,r.currentRangePath=void 0,r.data=new Map,r.current=null,r.handleScroll=function(e){var t,n=null===(t=r.engine.container.get())||void 0===t?void 0:t.childNodes;if(n){var i,o=Object(C.a)(r.data);try{for(o.s();!(i=o.n()).done;){var a,s,l=Object(x.a)(i.value,2),c=l[0],d=l[1];if(c!==(null===(a=r.current)||void 0===a?void 0:a.uuid)&&(null===(s=d.path)||void 0===s?void 0:s.start.id)){var u=d.path.start.path[0],h=n.item(u);if(h&&e.equal(h)){r.rangeColoring.updatePosition();break}}}}catch(p){o.e(p)}finally{o.f()}}},r.handleMouseDown=function(){var e=r.engine.container;e.off("mouseup",r.handleMouseUp),e.off("mousemove",r.emitSelectChange),e.on("mouseup",r.handleMouseUp),e.on("mousemove",r.emitSelectChange)},r.handleMouseUp=function(){var e=r.engine.container;e.off("mouseup",r.handleMouseUp),e.off("mousemove",r.emitSelectChange),setTimeout((function(){r.emitSelectChange()}),10)},r.observer=null,r.emitSelectChange=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!r.engine.change.isComposing()){var i=r.engine.change.range.get();null===(e=r.observer)||void 0===e||e.disconnect();var o=r.engine.card.find(i.commonAncestorContainer,!0);if(null===o||void 0===o?void 0:o.getSelectionNodes){var a=r.getCardResizeRange(o);a&&(i=a.cloneRange(),r.observer=new ResizeObserver((function(){var e;(a=r.getCardResizeRange(o))?(r.prevRange={startContainer:a.startContainer,endContainer:a.endContainer,startOffset:a.startOffset,endOffset:a.endOffset},r.onSelectionChange(a,!0,n)):null===(e=r.observer)||void 0===e||e.disconnect()})),r.observer.observe(o.root.get()))}(null===(t=r.prevRange)||void 0===t?void 0:t.startContainer)===i.startContainer&&r.prevRange.endContainer===i.endContainer&&r.prevRange.startOffset===i.startOffset&&r.prevRange.endOffset===i.endOffset||(i.commonAncestorNode.isRoot()||i.commonAncestorNode.inEditor()?(r.prevRange={startContainer:i.startContainer,endContainer:i.endContainer,startOffset:i.startOffset,endOffset:i.endOffset},r.onSelectionChange(i,!1,n)):(r.current&&r.removeAttirbute(r.current.uuid),r.prevRange=null))}},r.engine=e,r.rangeColoring=new An(e),e.container.on("keyup",r.emitSelectChange),e.container.on("mousedown",r.handleMouseDown),e.on("scroll",r.handleScroll),r}return Object(h.a)(n,[{key:"getCardResizeRange",value:function(e){if(null===e||void 0===e?void 0:e.getSelectionNodes){var t=e.getSelectionNodes();if(t.length>0){var n,r=Kt.create(this.engine);r.setStart(t[0],0);var i=t[t.length-1];return r.setEnd(i,i.isText()?i.text().length:(null===(n=i.get())||void 0===n?void 0:n.childNodes.length)||0),r}}return null}},{key:"setCurrent",value:function(e){this.current=e}},{key:"setAttribute",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.data.get(e.uuid);!e.force&&N()(i||{},e)||(this.data.set(e.uuid,Object.assign({},e,{active:!i})),e.uuid===(null===(n=this.current)||void 0===n?void 0:n.uuid)?(!0===r&&this.rangeColoring.updatePosition(),this.emit("change",e)):this.rangeColoring.render(e,t))}},{key:"removeAttirbute",value:function(e){var t;this.data.has(e)&&(this.data.delete(e),e===(null===(t=this.current)||void 0===t?void 0:t.uuid)?this.emit("change",{uuid:e,remove:!0}):this.rangeColoring.remove(e))}},{key:"getAttribute",value:function(e){return this.data.get(e)}},{key:"onSelectionChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.current){var r=this.engine.card;e=e.cloneRange();var i=r.active;if(i&&!i.isEditable){var o=i.getCenter();if(Ut(i.root)){var a=i.root.prev();a?e.select(a,!0).collapse(!1):(e.setStartBefore(i.root),e.collapse(!0))}else o&&o.length>0&&e.select(o.get(),!0)}if(!i&&!e.collapsed){var s=this.engine.card.find(e.startNode,!0);s&&s.type===nn.BLOCK&&e.setStart(s.getCenter().parent(),1);var l=this.engine.card.find(e.endNode,!0);l&&l.type===nn.BLOCK&&e.setEnd(l.getCenter().parent(),1)}var c=e.toPath(!0);this.currentRangePath=e.toPath();var d=this.getAttribute(this.current.uuid);this.setAttribute(Object.assign({},d,{path:c,uuid:this.current.uuid,force:t}),this.current,n),this.rangeColoring.updateBackgroundAlpha(e)}}},{key:"refreshAttributes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n=e.getAttribute(t.uuid);n&&e.rangeColoring.render(n,t)}))}},{key:"destory",value:function(){var e=this.engine.container;e.off("mouseup",this.handleMouseUp),e.off("mousemove",this.emitSelectChange),e.off("keyup",this.emitSelectChange),e.off("mousedown",this.handleMouseDown),this.engine.off("scroll",this.handleScroll)}}]),n}(L.EventEmitter2),Dn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).engine=void 0,r.type=null,r.data=void 0,r.engine=e,r.create(),r}return Object(h.a)(n,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.engine?Xt(this.engine.container):[];this.data=e}},{key:"apply",value:function(e,t){if(e.length>0)try{this.data=B.a.type.apply(this.data,e),t&&t(void 0)}catch(r){var n;t?t(r):null===(n=this.engine)||void 0===n||n.messageError("ot",r)}}},{key:"submitOp",value:function(e,t,n){this.apply(e,n)}},{key:"destroy",value:function(){delete this.data}}]),n}(L.EventEmitter2),zn=function(){function e(t){var n=this;Object(u.a)(this,e),this.engine=void 0,this.getElementFromPath=function(e,t){yt(e)&&(e=e[0]);var r=t[0];if(r===ft)return{startNode:e,startOffset:r,endNode:e,endOffset:r};var i=r-vt;if(e instanceof Element&&e.hasAttribute(Oe)){var o=n.engine.card,a=o.find(e);a&&(a.getCenter().empty(),o.renderComponent(a))}var s=[];e.childNodes.forEach((function(e){Ut(e)||s.push(e)}));var l=s[i],c=t[1];return 1===t.length||c===pt||c===ft||l instanceof Text?{startNode:l,startOffset:i,endNode:e,endOffset:c||0}:n.getElementFromPath(l,t.slice(1))},this.engine=t}return Object(h.a)(e,[{key:"fromRemoteAttr",value:function(e){var t;if(e){var n=e.id,r=e.leftText,i=e.rightText,o=null===(t=this.engine.container.get())||void 0===t?void 0:t.querySelector("[".concat(te,'="').concat(n,'"]'));if(o){var a=o.textContent||"";if(""===a)return{container:o,offset:0};if(null===a||void 0===a?void 0:a.startsWith(r)){for(var s=o.firstChild,l=r.length;s&&(3!==s.nodeType||((null===(c=s.textContent)||void 0===c?void 0:c.length)||0)<l);){var c,d,u;if(((null===(d=s.textContent)||void 0===d?void 0:d.length)||0)<l)l-=(null===(u=s.textContent)||void 0===u?void 0:u.length)||0,s=s.nextSibling;else s=s.firstChild}return{container:s,offset:l}}if(null===a||void 0===a?void 0:a.endsWith(i)){for(var h,p,f=i.length,v=o.lastChild;v&&(3!==v.nodeType||((null===(g=v.textContent)||void 0===g?void 0:g.length)||0)<f);){var g,m,b,y;if((null===(m=v.textContent)||void 0===m?void 0:m.length)||0<f)f-=(null===(b=v)||void 0===b||null===(y=b.textContent)||void 0===y?void 0:y.length)||0,v=v.previousSibling;else v=v.lastChild}return{container:v,offset:(null===(h=v)||void 0===h||null===(p=h.textContent)||void 0===p?void 0:p.length)||0-f}}for(var w=0;a[w]===r[w];)w++;for(var k=o.firstChild;k&&(3!==k.nodeType||((null===(x=k.textContent)||void 0===x?void 0:x.length)||0)<w);){var x,O,C;if((null===(O=k.textContent)||void 0===O?void 0:O.length)||0<w)w-=(null===(C=k.textContent)||void 0===C?void 0:C.length)||0,k=k.nextSibling;else k=k.firstChild}return{container:k,offset:w}}}}},{key:"getSideText",value:function(e,t){var n=this.engine.block.closest(e);if(n.length>0){var r=n.attributes(te),i=Kt.create(this.engine),o=Kt.create(this.engine);return i.setStart(n[0],0),i.setEnd(e[0],t),o.setStart(e[0],t),o.setEnd(n[0],n[0].childNodes.length),{id:r,leftText:i.toString(),rightText:o.toString()}}}},{key:"setAttribute",value:function(e,t,n,r,i){var o,a=this.engine.card,s=this.getElementFromPath(e,t).startNode,l=It(s);if(l&&l.length>0&&!l.isRoot()&&(n=Qe(n),r=Xe(r),null===(o=l.get())||void 0===o||o.setAttribute(n,r),l.isCard())){var c=a.find(l);if(!c)return;c.isEditable||a.reRender(c),c.isEditable&&c.onChange&&c.onChange(i?"remote":"local",l)}return l}},{key:"removeAttribute",value:function(e,t,n){var r,i=this.getElementFromPath(e,t).startNode,o=It(i);o.length>0&&!o.isRoot()&&(null===(r=o.get())||void 0===r||r.removeAttribute(n));return o}},{key:"insertNode",value:function(e,t,n,r){var i=this.engine,o=this.getElementFromPath(e,t),a=o.startNode,s=o.endNode,l=It(a),c=It(s);if(c.length>0&&!l.isRoot()&&(!e.isCard()||e.isEditableCard()&&(0===l.length||l.closest(se).isEditable()))){var d,u,h="string"===typeof n?document.createTextNode(n):Gt(n);if(l&&l.parent())null===(d=c.get())||void 0===d||d.insertBefore(h,l.get());else null===(u=c.get())||void 0===u||u.insertBefore(h,null);var p=It(h);return p.isCard()&&p.attributes(Oe,r?"remote":"true"),i.card.render(p),p}}},{key:"deleteNode",value:function(e,t,n){var r=this.engine.card,i=this.getElementFromPath(e,t).startNode,o=It(i);if(o.length>0&&!o.isRoot()){var a=o.parent();return o.isCard()?n?r.removeRemote(o):r.remove(o,!1):o.remove(),(null===a||void 0===a?void 0:a.isRoot())?void 0:a}}},{key:"insertText",value:function(e,t,n,r){var i=this.getElementFromPath(e,t),o=i.startNode,a=i.endNode,s=It(o);if(!o||s.isText()){var l=o&&o.nodeValue?o.nodeValue:"",c=l.substring(0,n)+r+l.substring(n);if(o&&o.parentNode===a)o.nodeValue=c;else if(c){var d,u=document.createTextNode(c);"BR"===(null===(d=a.firstChild)||void 0===d?void 0:d.nodeName)&&a.firstChild.remove(),a.insertBefore(u,a.firstChild)}return s}}},{key:"deleteText",value:function(e,t,n,r){var i=this.getElementFromPath(e,t).startNode,o=It(i);if(o.isText()){var a=i&&i.nodeValue?i.nodeValue:"",s=a.substring(0,n)+a.substring(n+r.length);return i.nodeValue=s,o}}},{key:"handleOperation",value:function(e,t){var n,r,i=e.p;if(0!==i.length){var o=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var a=this.engine.container.find("[".concat(te,'="').concat(e.id,'"]'));a.length>0&&a.inEditor()&&(o=a,i=i.slice(e.bi))}return("si"in e||"sd"in e)&&(r=i[i.length-1],i=i.slice(0,-1)),("oi"in e||"od"in e)&&(n=i[i.length-1].toString(),i=i.slice(0,-1)),"oi"in e?this.setAttribute(o,i,n,e.oi,t):"od"in e?this.removeAttribute(o,i,n):"sd"in e?this.deleteText(o,i,r,e.sd):"si"in e?this.insertText(o,i,r,e.si):"ld"in e?this.deleteNode(o,i,t):"li"in e?this.insertNode(o,i,e.li,t):void 0}}},{key:"handleRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeRemotePath(),r=[];return e.forEach((function(e){var n=t.handleOperation(e,!0);n&&r.push(n)})),n&&this.engine.isFocus()&&this.setRangeByRemotePath(n),this.engine.change.change(!0,r),r}catch(i){return this.engine.messageError("ot",i),[]}}},{key:"handleSelfOperations",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.handleOperation(e);r&&n.push(r)})),this.engine.change.change(!1,n),n}},{key:"setRangeAfterOp",value:function(e){var t,n=this.engine,r=e.p;("si"in e||"sd"in e)&&(t=r[r.length-1],r=r.slice(0,-1)),("oi"in e||"od"in e)&&(r=r.slice(0,-1));var i=this.engine.container;if("id"in e&&e.id&&e.bi&&e.bi>-1){var o=this.engine.container.find("[".concat(te,'="').concat(e.id,'"]'));o.inEditor()&&(i=o,r=r.slice(e.bi))}var a=this.getElementFromPath(i,r),s=a.startNode,l=a.endNode,c=Kt.create(this.engine);if("si"in e||"sd"in e){var d=""===s.data?l:s,u=e,h=t+(u.si?u.si.length:0);return c.setOffset(d,h,h),void n.change.range.select(c)}c.select(s||l.lastChild||l,!0).shrinkToElementNode().collapse(!1),n.change.range.select(c)}},{key:"getRangeRemotePath",value:function(){try{var e;if(0===(null===(e=window.getSelection())||void 0===e?void 0:e.rangeCount))return;var t=Kt.from(this.engine);if(!t||t.inCard())return;t.startNode.isRoot()&&t.shrinkToElementNode();var n=t.startNode,r=t.startOffset,i=t.endNode,o=t.endOffset;return{start:this.getSideText(n,r),end:this.getSideText(i,o)}}catch(a){return void this.engine.messageError("ot",a)}}},{key:"setRangeByRemotePath",value:function(e){try{var t,n=window.getSelection(),r=n?null===(t=Kt.from(this.engine,n))||void 0===t?void 0:t.cloneRange():void 0;if(!r)return;var i,o,a=e.start,s=e.end;a&&(i=this.fromRemoteAttr(a)),s&&(o=this.fromRemoteAttr(s)),i&&i.container&&r.setStart(i.container,i.offset),o&&o.container&&r.setEnd(o.container,o.offset),this.engine.change.range.select(r,!1)}catch(l){this.engine.messageError("ot",l)}}},{key:"setRangeByPath",value:function(e){if(e){var t=e.start,n=e.end;if(t&&n){var r=t.path[t.path.length-1],i=n.path[n.path.length-1],o=t.path.slice(),a=n.path.slice();o.pop(),a.pop();var s=this.engine,l=s.container,c=s.change,d=t.id?l.find("[".concat(te,'="').concat(t.id,'"]')).get():l.getChildByPath(o,(function(e){return!Ut(It(e))}));if(!d)return;var u=n.id?l.find("[".concat(te,'="').concat(n.id,'"]')).get():l.getChildByPath(a,(function(e){return!Ut(It(e))}));if(!u)return;var h=function(e,t){if(e.nodeType===at().TEXT_NODE){var n=e.textContent||"";return n.length<t?n.length:t}var r=e.childNodes;return r.length<t?r.length:t};try{var p=c.range.get();if("BR"===d.nodeName||this.engine.node.isVoid(d)?p.select(d).collapse(!1):(p.setStart(d,h(d,r)),p.setEnd(u,h(u,i))),!p.collapsed){var f=this.engine.card.find(p.startNode,!0),v=this.engine.card.find(p.endNode,!0);if(f&&v&&(null===f||void 0===f?void 0:f.root.equal(v.root))){var g=p.startNode.closest(se);0===g.length&&(g=p.startNode.find(se));var m=p.endNode.closest(se);0===m.length&&(m=p.endNode.find(se)),g.length>0&&m.length>0&&!g.equal(m)&&p.collapse(!0)}}c.range.select(p),p.scrollRangeIntoView()}catch(b){this.engine.messageError("ot",b)}}}}}]),e}(),Ln=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this)).engine=void 0,i.doc=void 0,i.dmp=void 0,i.timer=null,i.lineStart=!1,i.handleFirstLineText=function(e,t,n,r,o){var a=[],s=o[0],l="string"===typeof s,c="root"===e?"":e,d="root"===e?-1:t;if(l&&r!==s)for(var u=i.textToOps(n,s,r),h=0;h<u.length;h++)a.push(Object.assign({},u[h],{id:c,bi:d}));for(var p=o.length-1;p>=(l?1:0);p--){var f=o[p],v=n.concat();v[v.length-1]=p+vt,a.push({id:c,bi:d,p:v,ld:f})}return l||a.push({id:c,bi:d,p:n,li:r}),a},i.isLoadingCard=function(e){if(e.length>ft&&!Array.isArray(e[1])&&"object"===Object(l.a)(e[1])){var t=e[ft],n=t[be],r=t[we],o=t[te];if(n&&r&&o){var a,s=null===(a=i.engine.container.get())||void 0===a?void 0:a.querySelector("[".concat(te,'="').concat(o,'"]'));if(null===s||void 0===s?void 0:s.getAttribute(Oe))return!0}}return!1},i.handleChildren=function(e,t,n,r,o){var a=[],s="root"===e?"":e,c="root"===e?-1:t;if(i.isLoadingCard(o))return[];if(0===r.length)for(var d=0;d<o.length;d++)a.push({id:e,bi:c,p:n.concat(d+vt),li:o[d]});else if(0===o.length)for(var u=r.length-1;u>=0;u--)a.push({id:s,bi:c,p:n.concat(u+vt),ld:r[u]});else if(1===o.length&&"string"===typeof o[0])a.push.apply(a,Object(S.a)(i.handleFirstLineText(e,c,n.concat(vt),o[0],r)));else if(o.every((function(e){return!!Array.isArray(e)&&e[ft][te]}))&&r.every((function(e){return!!Array.isArray(e)&&e[ft][te]}))){for(var h=function(e){var t=r[e];o.find((function(e){return e[ft][te]===t[ft][te]}))||(a.push({id:s,bi:c,p:n.concat(e+vt),ld:t}),r.splice(e,1))},p=r.length-1;p>=0;p--)h(p);for(var f=function(t){var s=o[t],l=r.find((function(e){return e[ft][te]===s[ft][te]}));if(l){if(!N()(s,l)){var d=s[ft],u=l[ft],h=n.concat(t+vt);if(a.push.apply(a,Object(S.a)(i.handleAttributes(e,c,h,u,d))),i.isLoadingCard(s))return"continue";a.push.apply(a,Object(S.a)(i.handleChildren(e,c,h,l.slice(vt),s.slice(vt))))}}else a.push({id:e,bi:c,p:n.concat(t+vt),li:s}),r.splice(t,0,s)},v=0;v<o.length;v++)f(v)}else{if(r.length>o.length)for(var g=r.length-1;g>=o.length;g--)a.push({id:s,bi:c,p:n.concat(g+vt),ld:r[g]});for(var m=0;m<o.length;m++){var b=o[m],y=r[m];if(y){if(!N()(b,y))if("string"!==typeof b&&Object(l.a)(b)===Object(l.a)(y)&&b[pt]===y[pt]){var w=b[ft],k=y[ft],x=n.concat(m+vt);if(a.push.apply(a,Object(S.a)(i.handleAttributes(e,c,x,k,w))),i.isLoadingCard(b))continue;a.push.apply(a,Object(S.a)(i.handleChildren(e,c,x,y.slice(vt),b.slice(vt))))}else a.push({id:s,bi:c,p:n.concat(m+vt),ld:y}),a.push({id:e,bi:c,p:n.concat(m+vt),li:b})}else a.push({id:e,bi:c,p:n.concat(m+vt),li:b})}}return a},i.findCardForDoc=function(e,t,n){var r=Qt(e,(function(e){return e["data-card-key"]===t&&(!n||n(e))}));if(r){var i=r.attributes,o=r.children;return{attributes:i,rendered:Array.isArray(o)&&Array.isArray(o[2])&&Array.isArray(o[2][2])}}},i.engine=e,i.doc=r.doc,i.dmp=new P.diff_match_patch,i}return Object(h.a)(n,[{key:"setDoc",value:function(e){this.doc=e}},{key:"textToOps",value:function(e,t,n){var r=[],i=this.dmp.patch_make(t,n);return Object.keys(i).forEach((function(t){var n=i[t];if(null!==n.start1){var o=n.start1;n.diffs.forEach((function(t){var n=Object(x.a)(t,2),i=n[0],a=n[1];if(i!==P.DIFF_DELETE)if(i!==P.DIFF_INSERT)i===P.DIFF_EQUAL&&(o+=a.length);else{r.push({si:a,p:[].concat(Object(S.a)(e),[o])})}else{r.unshift({sd:a,p:[].concat(Object(S.a)(e),[o])})}}))}})),r}},{key:"handleAttributes",value:function(e,t,n,r,i){var o=[],a="root"===e?"":e,s="root"===e?-1:t;return Object.keys(i).forEach((function(e){var t=i[e],l=[].concat(Object(S.a)(n),[ft,e]);if(r.hasOwnProperty(e)||t===r[e]){var c=r[e];t!==c&&o.push({id:a,bi:s,p:l,od:c,oi:t})}else o.push({id:a,bi:s,p:l,oi:t})})),Object.keys(r).forEach((function(e){i.hasOwnProperty(e)||o.push({id:a,bi:s,p:n.concat(ft,e),od:r[e]})})),o}},{key:"handleMutations",value:function(e){var t,n=this,r=[],i=null===(t=this.doc)||void 0===t?void 0:t.data;if(i&&0!==e.length){if(0===i.length)r.push(this.engine.container.get());else for(var o=function(t){var n=e[t];if(!n)return"continue";var i=n.type,o=n.target,a=o instanceof Element&&Ct(o);if("attributes"===i&&(n.attributeName&&Wt(o,n.attributeName)||a))return"continue";if(o instanceof Text&&(o=o.parentElement),!o||!o.isConnected||!(o instanceof Element)||Ut(o))return"continue";if(a)return r=[o],"break";if(0===r.length||!r.includes(o)&&r.every((function(e){return!e.contains(o)}))){for(var s=r.length,l=0;l<s;l++)o.contains(r[l])&&(r.splice(l,1),s--,l--);r.push(o)}},a=0;a<e.length;a++){var s=o(a);if("continue"!==s&&"break"===s)break}if(0!==r.length){var l=[];r.forEach((function(e){l.push.apply(l,Object(S.a)(n.diff(e,i)))})),l.length>0&&this.emit("ops",l)}}}},{key:"diff",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===(t=this.doc)||void 0===t?void 0:t.data)||[],r=[];if(!e.isConnected)return[];var i=Ct(e)?"root":e.getAttribute(te);if(!i){var o=this.engine.block.closest(It(e),(function(e){return!!e.attributes(te)})).get();if(!(o instanceof Element))return[];i=(e=o).getAttribute(te)}if(!i)return[];var a=Xt(e);if(!a)return[];var s="root"===i,l=s?n:Qt(n,(function(e){return e[te]===i}));if(!l)return[];var c=l.path;if("root"!==i){var d=a[ft],u=l.attributes;r.push.apply(r,Object(S.a)(this.handleAttributes(i,c.length,c,u,d)))}if(this.isLoadingCard(a))return r;var h=a.slice(2),p=Array.isArray(l)?l.slice(2):l.children;return r.push.apply(r,Object(S.a)(this.handleChildren(s?"":i,s?-1:c.length,null!==c&&void 0!==c?c:[],p,h))),r}}]),n}(L.EventEmitter2),Rn={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Bn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this)).node=void 0,i.engine=void 0,i.doc=void 0,i.isStopped=void 0,i.observer=void 0,i.producer=void 0,i.isCache=!1,i.cache=[],i.node=e,i.isStopped=!0,i.engine=r.engine,i.doc=r.doc,i.producer=new Ln(i.engine,{doc:i.doc}),i.observer=new MutationObserver((function(e){var t;i.isCache&&(t=i.cache).push.apply(t,Object(S.a)(e));i.isStopped||i.isCache||i.producer.handleMutations(e)})),i.producer.on("ops",(function(e){i.onChange(e)})),i}return Object(h.a)(n,[{key:"setDoc",value:function(e){this.doc=e,this.producer.setDoc(e)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Rn),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"startCache",value:function(){this.isCache||(this.cache=[],this.isCache=!0)}},{key:"submitCache",value:function(){var e=this;this.isCache&&setTimeout((function(){e.engine.change.isComposing()||(e.isCache=!1,e.cache=e.cache.map((function(e){return"characterData"===e.type&&e.target.nodeType===document.TEXT_NODE&&(e["text-data"]=e.target.textContent),e})),e.cache.length>0&&e.producer.handleMutations(e.cache),e.cache=[])}),20)}},{key:"destroyCache",value:function(){var e=this;this.isCache&&setTimeout((function(){e.isCache=!1,e.cache=[]}),20)}},{key:"getCaches",value:function(){return this.cache}},{key:"onChange",value:function(e){this.isStopped||this.emit("onChange",e)}},{key:"diff",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.engine.container.get();return this.producer.diff(t,null===(e=this.doc)||void 0===e?void 0:e.data)}}]),n}(L.EventEmitter2);tn(".ot-user-cursor {\r\n\tposition: absolute;\r\n\tz-index: 125;\r\n\twidth: 2px;\r\n}\r\n\r\n.ot-user-cursor-trigger {\r\n\tposition: absolute;\r\n\ttop: -5px;\r\n\tleft: -2px;\r\n\tborder-radius: 100%;\r\n\tcolor: #ffffff;\r\n\twidth: 6px;\r\n\theight: 6px;\r\n\tfont-size: 0;\r\n\toverflow: hidden;\r\n\ttransition: all 0.1s linear;\r\n}\r\n\r\n.ot-user-cursor-trigger-active {\r\n\ttop: -17px;\r\n\tborder-radius: 2px;\r\n\tcolor: #ffffff;\r\n\tfont-size: 10px;\r\n\tline-height: 18px;\r\n\theight: 18px;\r\n\twidth: auto;\r\n\tpadding: 0 3px;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.ot-card-mask {\r\n\tposition: absolute;\r\n\tz-index: 10;\r\n\tbackground: transparent;\r\n\tcursor: not-allowed;\r\n}\r\n\r\n.ot-user-background {\r\n  z-index: 120;\r\n}\r\n\r\n.ot-user-cursor-card {\r\n\tposition: absolute;\r\n}\r\n\r\n.ot-user-cursor-card .ot-user-cursor-trigger {\r\n\tdisplay: none;\r\n}\r\n\r\n.ot-user-cursor-card .ot-user-cursor-trigger-active {\r\n\tposition: absolute;\r\n\tdisplay: block;\r\n\ttop: -19px;\r\n\tleft: 0;\r\n\tborder-radius: 2px;\r\n\tcolor: #ffffff;\r\n\tfont-size: 10px;\r\n\tline-height: 18px;\r\n\theight: 18px;\r\n\twidth: auto;\r\n\tpadding: 0 3px;\r\n\twhite-space: nowrap;\r\n}");var Pn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).engine=void 0,r.members=void 0,r.currentMember=void 0,r.clientId=void 0,r.selection=void 0,r.consumer=void 0,r.mutation=void 0,r.doc=null,r.isRemote=!1,r.debounceRefreshAttributes=void 0,r.colors=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],r.handleChange=function(e){var t=r.engine.trigger("opsChange",e);t&&(e=t),r.submitOps(e),r.engine.history.handleSelfOps(e.filter((function(e){return!e.nl&&!e.p.includes(ye)}))),r.engine.trigger("ops",e),e.find((function(e){return("od"in e||"oi"in e)&&e.p.includes(ke)}))&&r.engine.change.change(!1)},r.engine=e,r.members=[],r.selection=new In(e),r.consumer=new zn(e),r.mutation=new Bn(e.container,{engine:e}),r.mutation.on("onChange",r.handleChange),r.clientId=qe(8),r.debounceRefreshAttributes=I()((function(e){var t;(t=r.selection).refreshAttributes.apply(t,Object(S.a)(r.members.filter((function(t){return e.includes(t.uuid)}))))}),200),r}return Object(h.a)(n,[{key:"initLocal",value:function(){var e;this.doc||(this.stopMutation(),this.doc=new Dn(this.engine),null===(e=this.mutation)||void 0===e||e.setDoc(this.doc),this.engine.readonly||this.startMutation())}},{key:"initRemote",value:function(e,t,n){var r,i=this,o=!this.doc||null===this.doc.type;this.stopMutation(),o||this.doc.destroy(),this.isRemote=!0,this.doc=e,null===(r=this.mutation)||void 0===r||r.setDoc(e),this.syncValue(t),e.on("op",(function(e,t){if(i.clientId!==t.toString()){var n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=e[n+1];Vt(r,i)?n++:t.push(r)}return t}(e);n.length>0&&(i.apply(n),i.engine.history.handleRemoteOps(n))}})),this.selection.removeAllListeners(),this.selection.on("change",(function(e){n&&n(e)})),this.engine.readonly||this.startMutation(),o&&this.emit("load")}},{key:"submitOps",value:function(e){var t=this;if(this.doc&&0!==e.length){e.forEach((function(e){var n;e.uid=null===(n=t.currentMember)||void 0===n?void 0:n.uuid}));var n=new Dn,r=JSON.parse(JSON.stringify(this.doc.data));n.create(r),n.submitOp(e,null,(function(i){if(n.destroy(),t.doc){if(i){t.engine.messageError("ot","If there is an error in the collaborative structure, the content of the server will be reset, and the current history will also be cleared.",i,e,r),t.engine.history.clear();for(var o=[],a=t.doc.data,s=a.length-1;s>1;s--){var l=a[s];o.push({bi:-1,id:"",ld:l,p:[s],nl:void 0})}for(var c=[],d=Xt(t.engine.container)||[],u=2;u<d.length;u++){var h=d[u];c.push({bi:-1,id:"",li:h,p:[u],nl:void 0})}return t.doc.submitOp(o.concat(c),{source:t.clientId}),void t.selection.emitSelectChange(!0)}t.doc.submitOp(e,{source:t.clientId},(function(n){var r,i;n&&(t.engine.messageError("ot","SubmitOps Error:",n,"OPS:",e,"DATA:",null===(r=t.doc)||void 0===r?void 0:r.data),null===(i=t.doc)||void 0===i||i.destroy());t.selection.emitSelectChange(!0)}))}}))}}},{key:"diff",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.engine.container.get();return(null===(e=this.mutation)||void 0===e?void 0:e.diff(t))||[]}},{key:"apply",value:function(e){var t=this;this.stopMutation(),this.consumer.handleRemoteOperations(e),this.selection.emitSelectChange();var n=[];e.forEach((function(e){"uid"in e&&n.push(e.uid)})),setTimeout((function(){t.debounceRefreshAttributes(n)}),0),this.startMutation()}},{key:"syncValue",value:function(e){var t=this,n=this.doc,r=this.engine;n&&(n.type&&Array.isArray(n.data)&&n.data.length>2?this.engine.setJsonValue(n.data):(e&&r.setValue(e),n.on("create",(function(){var e=Xt(r.container);n.submitOp([{p:[],oi:e}],{source:t.clientId})}))))}},{key:"startMutation",value:function(){this.mutation&&this.mutation.start()}},{key:"stopMutation",value:function(){this.mutation&&this.mutation.stop()}},{key:"isStopped",value:function(){var e,t;return null!==(e=null===(t=this.mutation)||void 0===t?void 0:t.isStopped)&&void 0!==e&&e}},{key:"startMutationCache",value:function(){this.mutation&&this.mutation.startCache()}},{key:"submitMutationCache",value:function(){this.mutation&&this.mutation.submitCache()}},{key:"destroyMutationCache",value:function(){this.mutation&&this.mutation.destroyCache()}},{key:"getCaches",value:function(){var e;return(null===(e=this.mutation)||void 0===e?void 0:e.getCaches())||[]}},{key:"getColors",value:function(){return this.colors}},{key:"setColors",value:function(e){this.colors=e}},{key:"setMemberColor",value:function(e){var t=e.index||this.members.length+1;t=(t-1)%this.colors.length,e.color=this.colors[t]}},{key:"getMembers",value:function(){return z()(this.members)}},{key:"setMembers",value:function(e){var t=this;(e=z()(e)).forEach((function(e){t.setMemberColor(e)})),this.members=e}},{key:"addMember",value:function(e){e=z()(e),this.setMemberColor(e),this.members.find((function(t){return t.uuid===e.uuid}))||this.members.push(e)}},{key:"removeMember",value:function(e){(e=z()(e)).uuid&&(this.members=this.members.filter((function(t){return t.uuid!==e.uuid})),this.selection.removeAttirbute(e.uuid))}},{key:"setCurrentMember",value:function(e){e=z()(e),this.setMemberColor(e);var t=this.members.find((function(t){return t.uuid===e.uuid}));t&&(this.currentMember=t,this.selection.setCurrent(t))}},{key:"getCurrentMember",value:function(){return this.currentMember}},{key:"renderSelection",value:function(e){var t=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){if(!t.currentMember||e.uuid!==t.currentMember.uuid){var n=t.members.find((function(t){return t.uuid===e.uuid}));"remove"in e||!n?t.selection.removeAttirbute(e.uuid):t.selection.setAttribute(e,n)}}))}},{key:"destroy",value:function(){var e,t;this.doc&&this.doc.destroy(),this.selection.destory(),null===(e=this.mutation)||void 0===e||e.off("onChange",this.handleChange),null===(t=this.mutation)||void 0===t||t.destroyCache(),this.stopMutation(),this.mutation=null}}]),n}(L.EventEmitter2),Fn=Object(y.a)("selfWaiting"),Hn=function(){function e(t){var n=this;Object(u.a)(this,e),this.actionOps=[],this.engine=void 0,this.currentAction={},this.currentActionIndex=0,this.filterEvents=[],this.selfEvents=[],Object.defineProperty(this,Fn,{writable:!0,value:void 0}),this.lazySave=I()((function(){n.saveOp()}),200),this.handlePath=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return!Ut(It(e))},a=n.engine.container.find("[".concat(te,'="').concat(t,'"]'));if(a.length>0&&a.inEditor()){var s,l=a.getPath(n.engine.container,(null===(s=a.parent())||void 0===s?void 0:s.isRoot())?void 0:o);return(i?l.map((function(e){return e+2})):l).concat(e.slice(r))}return e},this.engine=t}return Object(h.a)(e,[{key:"reset",value:function(){this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"onFilter",value:function(e){this.filterEvents.push(e)}},{key:"onSelf",value:function(e){this.selfEvents.push(e)}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex--,t=!0}catch(r){this.reset(),this.engine.messageError("history-undo",r)}this.engine.isEmpty()&&this.engine.change.initValue(),t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.startRangePath),this.engine.change.change(),this.engine.trigger("undo")),this.engine.ot.startMutation()}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t=!1;this.engine.ot.stopMutation();try{var n=this.engine.ot;n.submitOps(e.ops||[]),n.consumer.handleSelfOperations(e.ops),this.currentActionIndex++,t=!0}catch(r){this.reset(),this.engine.messageError("history-redo",r)}t&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(e.rangePath),this.engine.change.change(),this.engine.trigger("redo")),this.engine.ot.startMutation()}}},{key:"clear",value:function(){var e=this;setTimeout((function(){e.reset()}),10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.id=qe(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.engine.trigger("historyChange")),this.currentAction={},this.engine.change.getRangePathBeforeCommand())}},{key:"handleSelfOps",value:function(e){var t,n=this;(null===(t=this.currentAction)||void 0===t?void 0:t.self)||this.saveOp();var r=!1;if(e.forEach((function(e){if(r=!0,n.filterEvents.some((function(t){return t(e)}))){var t;n.actionOps.length>0&&!e.nl&&(null===(t=n.actionOps[n.actionOps.length-1].ops)||void 0===t||t.push(e))}else{n.currentAction.self=!0,n.currentAction.ops||(n.currentAction.ops=[]),n.currentAction.startRangePath||(n.currentAction.startRangePath=n.getRangePathBeforeCommand());var i=n.currentAction.ops[n.currentAction.ops.length-1];i&&Vt(e,i)?n.currentAction.ops.pop():n.currentAction.ops.push(e)}})),r){var i=void 0;if(this.selfEvents.some((function(t){return void 0!==(i=t(e))})),Object(b.a)(this,Fn)[Fn])return;"boolean"===typeof i?i?this.saveOp():this.currentAction={}:"object"===Object(l.a)(i)?(Object(b.a)(this,Fn)[Fn]=i,i.then((function(e){e?n.saveOp():n.currentAction={}})).finally((function(){return Object(b.a)(n,Fn)[Fn]=void 0}))):void 0===i&&this.lazySave()}}},{key:"handleRemoteOps",value:function(e){var t=this;this.currentAction.self&&!Object(b.a)(this,Fn)[Fn]&&this.saveOp();var n=this.engine.change.range.get();this.actionOps.forEach((function(e){var r;if(null===(r=e.ops)||void 0===r||r.forEach((function(e){e.id&&void 0!==e.bi&&(e.p=t.handlePath(e.p,e.id,e.bi))})),e.rangePath){var i=e.rangePath,o=i.start,a=i.end;o.id&&void 0!==o.bi&&(o.path=t.handlePath(o.path,o.id,o.bi,!1,n.filterPath(!0))),a.id&&void 0!==a.bi&&(a.path=t.handlePath(a.path,a.id,a.bi,!1,n.filterPath(!0)))}if(e.startRangePath){var s=e.startRangePath,l=s.start,c=s.end;l.id&&void 0!==l.bi&&(l.path=t.handlePath(l.path,l.id,l.bi,!1,n.filterPath(!0))),c.id&&void 0!==c.bi&&(c.path=t.handlePath(c.path,c.id,c.bi,!1,n.filterPath(!0)))}})),e.forEach((function(e){t.currentAction.ops||(t.currentAction.ops=[]);var n=t.currentAction.ops[t.currentAction.ops.length-1];n&&Vt(e,n)?t.currentAction.ops.pop():t.currentAction.ops.push(e),t.actionOps.some((function(n,r){var i,o=null===(i=n.ops)||void 0===i?void 0:i.some((function(t){return B.a.type.canOpAffectPath(e,t.p)}));if(o){for(var a=[n],s=function(e){var r,i=t.actionOps[e];if(null===(r=i.ops)||void 0===r?void 0:r.some((function(e){var t;return null===(t=n.ops)||void 0===t?void 0:t.some((function(t){return B.a.type.canOpAffectPath(e,t.p)}))}))){var o;a.push(i);var s=e+1,l=t.actionOps[s];l&&(null===(o=l.ops)||void 0===o?void 0:o.some((function(e){var t;return null===(t=i.ops)||void 0===t?void 0:t.some((function(t){return B.a.type.canOpAffectPath(e,t.p)}))})))&&a.push(l)}},l=r+1;l<t.actionOps.length;l++)s(l);var c=t.actionOps.filter((function(e){return void 0===a.find((function(t){return t.id===e.id}))}));return t.actionOps=c,t.currentActionIndex=t.actionOps.length,o}return!1}))}))}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=z()(this.actionOps[e]),n=H()(this.actionOps,(function(e){return e.id==t.id}));-1!==n?t=this.actionOps[n]:n=e;var r=B.a.type.invert(t.ops||[]);r.forEach((function(e,n){var i=(t.ops||[])[r.length-n-1];e.id=i.id,e.bi=i.bi}));try{return{self:!0,ops:r,id:t.id,type:"undo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(i){this.engine.messageError("history-undo-op",i)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=z()(this.actionOps[e]),n=[];"undo"===t.type?(n=B.a.type.invert(t.ops||[])).forEach((function(e,r){var i=(t.ops||[])[n.length-r-1];e.id=i.id,e.bi=i.bi})):n=t.ops;try{return{self:!0,ops:n,id:t.id,type:"redo",rangePath:t.rangePath,startRangePath:t.startRangePath}}catch(r){this.engine.messageError("history-redo-op",r)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine,t=e.ot,n=e.change,r=t.selection.currentRangePath;return r||n.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),e}(),qn=function(){function e(t){var n=this;Object(u.a)(this,e),this.engine=void 0,this.disabled=!1,this.engine=t,this.engine.container.on("keydown",(function(e){return n.trigger(e)}))}return Object(h.a)(e,[{key:"match",value:function(e){var t=this;Object.keys(this.engine.plugin.components).every((function(n){var r=t.engine.plugin.components[n];if(r.hotkey){var o,a=r.hotkey(e),s=!1,c=[];if("string"===typeof a&&i()(a,e)?s=!0:Array.isArray(a)?a.some((function(t){if("string"===typeof t){if(i()(t,e))return s=!0,c=[],!0}else{var n=t.key,r=t.args;if(i()(n,e))return s=!0,c=Array.isArray(r)?r:[r],!0}return!1})):"object"===Object(l.a)(a)&&i()(a.key,e)&&(s=!0,c=Array.isArray(a.args)?a.args:[a.args]),s)return e.preventDefault(),(o=t.engine.command).execute.apply(o,[n].concat(Object(S.a)(c))),!1}return!0}))}},{key:"trigger",value:function(e){this.disabled||this.match(e)}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"destroy",value:function(){this.engine.container.off("keydown",this.trigger)}}]),e}(),Un=function(){function e(t){Object(u.a)(this,e),this.type="keydown",this.hotkey="",this.listeners=[],this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"on",value:function(e){this.listeners.push(e)}},{key:"unshiftOn",value:function(e){this.listeners.unshift(e)}},{key:"off",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e){this.listeners.splice(t,1);break}}},{key:"trigger",value:function(e){for(var t=0;t<this.listeners.length;t++){if(!1===(0,this.listeners[t])(e))break}}},{key:"destroy",value:function(){this.listeners=[]}}]),e}(),Wn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keydown",e.hotkey="backspace",e}return Object(h.a)(n,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.container,i=n.range.get();if(n.cacheRangeBeforeCommand(),n.isEmpty())return e.preventDefault(),r.empty(),void n.initValue();var o=i.commonAncestorNode,a=this.engine.card.find(o,!0),s=(null===a||void 0===a?void 0:a.isEditable)&&(null===a||void 0===a?void 0:a.getSelectionNodes)?a.getSelectionNodes():[];if(s.length>0)return s.forEach((function(e){e.html("<p></br ></p>")})),void n.apply(i.cloneRange().select(s[0],!0).collapse(!0));var l=i.startNode,c=i.startOffset;if(l.isEditable()){var d=l[0].childNodes[c-1],u=It(d);if("br"===u.name)return e.preventDefault(),u.remove(),void n.apply(i)}for(var h=!0,p=0;p<this.listeners.length;p++){if(!1===(h=(0,this.listeners[p])(e)))break}if(!1!==h){if(!i.collapsed){e.preventDefault();var f=l.prev();"br"===(null===f||void 0===f?void 0:f.name)&&f.remove(),n.delete(i);var v=i.startNode.prev();return(null===v||void 0===v?void 0:v.isCard())&&0===v.find(Ne).length&&v.remove(),n.apply(i),void(this.engine.scrollNode&&i.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode))}var g,m=void 0;if(this.engine.node.isBlock(l)){var b=l[0].childNodes[c-1];m=It(b)}else"br"===l.name&&(m=l);if("br"===(null===(g=m)||void 0===g?void 0:g.name)){var y=m.prev(),w=m.next(),k=null===w||void 0===w?void 0:w.next(),x=null===y||void 0===y?void 0:y.prev();"br"!==(null===y||void 0===y?void 0:y.name)&&"br"===(null===w||void 0===w?void 0:w.name)&&"br"!==(null===k||void 0===k?void 0:k.name)?(e.preventDefault(),m.remove(),w.remove(),n.apply(i.shrinkToTextNode())):"br"!==(null===w||void 0===w?void 0:w.name)&&"br"===(null===y||void 0===y?void 0:y.name)&&"br"!==(null===x||void 0===x?void 0:x.name)&&(e.preventDefault(),m.remove(),y.remove(),n.apply(i.shrinkToTextNode()))}}else this.engine.scrollNode&&i.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}}]),n}(Un),Vn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keydown",e.hotkey="delete",e}return Object(h.a)(n,[{key:"getNext",value:function(e){return It(e).isEditable()?null:e.nextSibling?e.nextSibling:null===e.parentNode?null:this.getNext(e.parentNode)}},{key:"getRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(It(e).isEditable())return null;if(!t){var n=this.getNext(e);if(!n)return null;e=n}for(;e;){var r=It(e);if(r.attributes(be)){if(!e.ownerDocument)return null;var i=Kt.create(this.engine,e.ownerDocument);return i.setStartAfter(e),i.collapse(!0),i}if(this.engine.node.isBlock(r)){if(!e.ownerDocument)return null;var o=Kt.create(this.engine,e.ownerDocument);return o.select(r,!0).collapse(!0),o}if("br"===r.name){var a;if(1===(null===(a=e.parentNode)||void 0===a?void 0:a.childNodes.length))return null;if(!e.ownerDocument)return null;var s=Kt.create(this.engine,e.ownerDocument);return s.setStartAfter(e),s.collapse(!0),s}if(e.nodeType===Node.TEXT_NODE){if(0===e.data.length)return this.getRange(e);if(!e.ownerDocument)return null;var l=Kt.create(this.engine,e.ownerDocument);return l.setStart(e,1),l.collapse(!0),l}if(0===e.childNodes.length)return this.getRange(e);e=e.childNodes[0]}return null}},{key:"trigger",value:function(e){var t=this.engine.change;t.cacheRangeBeforeCommand();var n=t.range.get();if(!n.collapsed)return e.preventDefault(),void t.delete();var r,i=this.engine.card.find(n.startNode),o=!1;if(i){if(i.isLeftCursor(n.startNode))return e.preventDefault(),this.engine.card.select(i),void t.delete();if(!i.isRightCursor(n.startNode))return;r=i.root[0]}else if(n.endContainer.nodeType===Node.TEXT_NODE){if(n.endContainer.data.length>n.endOffset){e.preventDefault();var a=n.cloneRange();return a.setEnd(n.endContainer,n.endOffset+1),t.range.select(a),t.delete(),void t.range.select(t.range.get().shrinkToTextNode())}r=n.endContainer}else{if(n.endContainer.nodeType!==Node.ELEMENT_NODE)return;if(0===n.endContainer.childNodes.length)r=n.endContainer;else if(0===n.endOffset){var s;1===n.endContainer.childNodes.length&&"BR"===(null===(s=n.endContainer.firstChild)||void 0===s?void 0:s.nodeName)||(o=!0),r=n.endContainer.childNodes[n.endOffset]}else r=n.endContainer.childNodes[n.endOffset-1]}var l=this.getRange(r,o);if(l){e.preventDefault();var c=n.startOffset;1===c&&1===n.startContainer.childNodes.length&&"BR"===n.startContainer.childNodes[0].nodeName&&(c=0),l.setStart(n.startContainer,c),t.range.select(l),t.delete()}for(var d=0;d<this.listeners.length;d++){if(!1===(0,this.listeners[d])(e))break}}}]),n}(Un),Yn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keydown",e.hotkey="enter",e}return Object(h.a)(n,[{key:"trigger",value:function(e){var t=this.engine.change;t.cacheRangeBeforeCommand();var n=t.range.get();this.engine.block.closest(n.endNode).isEditable()&&this.engine.block.wrap("<p />");for(var r=0;r<this.listeners.length;r++){if(!1===(0,this.listeners[r])(e))break}this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode),this.engine.trigger("select")}}]),n}(Un),Gn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keydown",e.hotkey="tab",e}return Object(h.a)(n,[{key:"trigger",value:function(e){var t=this.engine.node;e.preventDefault(),t.insertText("    ")}}]),n}(Un),Zn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey="shift+tab",e}return n}(Un),Xn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keydown",e.hotkey="shift+enter",e}return Object(h.a)(n,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,i=t.block;e.preventDefault(),n.cacheRangeBeforeCommand();var o,a=n.range.get();if(0!==a.startNode.closest("li").length){var s,l,c=It("<br />");if(r.insert(c,a),i.isLastOffset(a,"end")&&(!c.next()||"br"!==(null===(s=c.next())||void 0===s?void 0:s.name))&&(!c.prev()||"br"!==(null===(l=c.prev())||void 0===l?void 0:l.name))){var d=c.clone();c.after(d),a.select(d).collapse(!1)}for(var u=0;u<this.listeners.length;u++){if(!1===(0,this.listeners[u])(e))break}n.apply(a),this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}else null===(o=this.engine.typing.getHandleListener("enter","keydown"))||void 0===o||o.trigger(e)}}]),n}(Un),Qn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey=function(e){return" "===e.key},e}return n}(Un),Kn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).hotkey=function(e){return"/"===e.key||i()("/",e)||229===e.keyCode&&"Slash"===e.code},e}return n}(Un),$n=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey="mod+a",e}return n}(Un),Jn=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).type="keydown",e.hotkey=function(e){return i()("left",e)||i()("shift+left",e)||i()("ctrl+a",e)||i()("ctrl+b",e)},e}return n}(Un),er=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).type="keydown",e.hotkey=function(e){return i()("right",e)||i()("shift+right",e)||i()("ctrl+e",e)||i()("ctrl+f",e)},e}return n}(Un),tr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).hotkey=function(e){return i()("up",e)||i()("ctrl+p",e)},e}return n}(Un),nr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).hotkey=function(e){return i()("down",e)||i()("ctrl+n",e)},e}return n}(Un),rr=[{name:"default",handle:Un},{name:"enter",handle:Yn,triggerName:"keydown:enter"},{name:"backspace",handle:Wn,triggerName:"keydown:backspace"},{name:"delete",handle:Vn,triggerName:"keydown:backspace"},{name:"tab",handle:Gn,triggerName:"keydown:tab"},{name:"shift-tab",handle:Zn,triggerName:"keydown:shift-tab"},{name:"shift-enter",handle:Xn,triggerName:"keydown:shift-enter"},{name:"space",handle:Qn,triggerName:"keydown:space"},{name:"slash",handle:Kn,triggerName:"keydown:slash"},{name:"all",handle:$n,triggerName:"keydown:all"},{name:"left",handle:Jn,triggerName:"keydown:left"},{name:"right",handle:er,triggerName:"keydown:right"},{name:"up",handle:tr,triggerName:"keydown:up"},{name:"down",handle:nr,triggerName:"keydown:down"}],ir=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keyup",e}return n}(Un),or=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey="enter",e}return n}(ir),ar=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="keyup",e.hotkey="backspace",e}return Object(h.a)(n,[{key:"trigger",value:function(e){if(this.engine.change.isEmpty())e.preventDefault();else for(var t=0;t<this.listeners.length;t++){if(!1===(0,this.listeners[t])(e))break}}}]),n}(ir),sr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey="tab",e}return n}(ir),lr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hotkey=function(e){return" "===e.key},e}return n}(ir),cr=[{name:"default",handle:ir},{name:"enter",handle:or,triggerName:"keyup:enter"},{name:"backspace",handle:ar,triggerName:"keyup:backspace"},{name:"tab",handle:sr,triggerName:"keyup:tab"},{name:"space",handle:lr,triggerName:"keyup:space"}],dr=function(){function e(t){var n=this;Object(u.a)(this,e),this.engine=void 0,this.handleListeners=[],this.bindKeydown=function(e){var t=n.engine,r=t.readonly,o=t.card;r?i()("mod+a",e)&&e.preventDefault():e.target&&o.find(It(e.target))||n.trigger("keydown",e)},this.bindKeyup=function(e){var t=n.engine,r=t.readonly,i=t.card;r||e.target&&i.find(It(e.target))||n.trigger("keyup",e)},this.engine=t,rr.concat(cr).forEach((function(e){n.addHandleListener(e.name,e.handle,e.triggerName)}));var r=t.container;r.on("keydown",this.bindKeydown),r.on("keyup",this.bindKeyup)}return Object(h.a)(e,[{key:"addHandleListener",value:function(e,t,n,r){this.handleListeners.push({name:e,handle:new t(this.engine),triggerName:n,triggerParams:r})}},{key:"getHandleListener",value:function(e,t){var n;return null===(n=this.handleListeners.find((function(n){return n.name===e&&n.handle.type===t})))||void 0===n?void 0:n.handle}},{key:"removeHandleListener",value:function(e,t){for(var n=0;n<this.handleListeners.length;n++)if(this.handleListeners[n].name===e&&this.handleListeners[n].handle.type===t){this.handleListeners[n].handle.destroy(),this.handleListeners.splice(n,1);break}}},{key:"trigger",value:function(e,t){var n,r=this;!1===this.handleListeners.filter((function(t){return t.handle.type===e})).some((function(e){var n=e.name,o=e.handle,a=e.triggerName,s=e.triggerParams;if("default"===n||!o.hotkey)return!1;if("function"===typeof o.hotkey?o.hotkey(t):i()(o.hotkey,t)){var l,c=[t];return"function"===typeof s&&(c=s(r.engine,t)),a&&!1===(l=r.engine).trigger.apply(l,[a].concat(Object(S.a)(c)))||o.trigger(t),!0}return!1}))&&!1!==this.engine.trigger(e+":default",t)&&(null===(n=this.getHandleListener("default",e))||void 0===n||n.trigger(t))}},{key:"destroy",value:function(){var e=this.engine.container;this.handleListeners=[],e.off("keydown",this.bindKeydown),e.off("keyup",this.bindKeyup)}}]),e}(),ur="data-placeholder",hr="am-engine-placeholder",pr=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.options=void 0,this.node=void 0,this._focused=!1,this._setFocus=function(){r._focused=!0},this._setBlur=function(){r._focused=!1},this.handleClick=function(e){var t=r.options,n=t.engine,i=t.autoAppend,o=t.autoPrepend;if(e.target&&!n.readonly&&ct(n)){var a,s,l,c=It(e.target);if(!c.isEditable())return;var d=It("<p><br /></p>"),u=c.closest("".concat(se,",").concat(re)),h=u.first();h||n.change.initValue(void 0,!0,c);var p=u.last(),f=!1;if(!1!==o&&h&&e.offsetY<((null===(a=h.get())||void 0===a?void 0:a.offsetTop)||0)&&!n.node.isEmptyWidthChild(h)?(u.prepend(d),f=!0):!1!==i&&p&&e.offsetY>((null===(s=p.get())||void 0===s?void 0:s.offsetTop)||0)+((null===(l=p.get())||void 0===l?void 0:l.clientHeight)||0)&&!n.node.isEmptyWidthChild(p)&&(u.append(d),f=!0),f){var v=n.change.range.get();v.select(d,!0).collapse(!1),n.change.apply(v)}}},this.handleFocus=function(){var e=r.options.engine;r.triggerFoucs(),!e.ot.isStopped()&&e.isEmpty()&&e.change.initValue()},this.focusTimeout=null,this.triggerFoucs=function(){var e=r.options.engine;r.focusTimeout&&clearTimeout(r.focusTimeout),r.focusTimeout=setTimeout((function(){if(!r._focused){var t=e.change.range.get();(t.commonAncestorNode.isRoot(e.container)||t.commonAncestorNode.inEditor(e.container))&&(e.change.range.setLastBlurRange(),e.trigger("focus"))}}),0)},this.onInput=function(e){var t=r.options.engine;t.readonly||(e.target&&t.card.find(It(e.target))||t.change.range.get().handleBr(!0))},this.onRealtimeChange=function(){var e=r.options.engine;e.isEmpty()?e.showPlaceholder():e.hidePlaceholder()},this.blurTimeout=null,this.docMouseDown=function(e){if(e.target){var t=It(e.target),n=r.options.engine;if(r._focused&&0===t.closest(oe).length&&!t.inEditor(n.container)){r.blurTimeout&&clearTimeout(r.blurTimeout);var i=n.change.range.get();r.blurTimeout=setTimeout((function(){n.change.range.get().commonAncestorNode.inEditor(n.container)||(n.change.range.setLastBlurRange(i),n.trigger("blur"))}),0)}}},this.node=It(t),this.options=n,this._init(),this._focused=null!==document.activeElement&&this.node.equal(document.activeElement);var i=n.engine;i.on("blur",this._setBlur),i.on("focus",this._setFocus)}return Object(h.a)(e,[{key:"_init",value:function(){var e,t=this,n=this.options,r=n.lang,i=n.tabIndex,o=n.className;this.node.attributes((e={},Object(O.a)(e,Lt,"true"),Object(O.a)(e,"role","textbox"),Object(O.a)(e,"autocorrect","en-US"===r?"on":"off"),Object(O.a)(e,"autocomplete","off"),Object(O.a)(e,"spellcheck","en-US"===r?"true":"false"),Object(O.a)(e,"data-gramm","false"),e)),void 0!==i&&this.node.attributes("tabindex",i),this.node.hasClass(de)||this.node.addClass(de),Re&&this.node.addClass("am-engine-mobile"),void 0!==o&&(Array.isArray(o)?o:o.split(/\s+/)).forEach((function(e){""!==e.trim()&&t.node.addClass(e)}))}},{key:"init",value:function(){var e=this.options.engine;this.node.on("input",this.onInput),e.on("realtimeChange",this.onRealtimeChange),this.node.on("click",this.handleClick),document.addEventListener("mousedown",this.docMouseDown),this.node.on(Re?"touchstart":"mousedown",this.triggerFoucs),this.node.on("focus",this.handleFocus)}},{key:"isFocus",value:function(){return this._focused}},{key:"getNode",value:function(){return this.node}},{key:"setReadonly",value:function(e){this.node.attributes(Lt,e?"false":"true")}},{key:"showPlaceholder",value:function(){var e=this.options.placeholder;e&&(this.node.attributes(Object(O.a)({},ur,e)),this.node.addClass(hr))}},{key:"hidePlaceholder",value:function(){this.node.removeAttributes(ur),this.node.removeClass(hr)}},{key:"destroy",value:function(){var e=this,t=this.options,n=t.className,r=t.engine;r.on("blur",this._setBlur),r.on("focus",this._setFocus),r.off("realtimeChange",this.onRealtimeChange),document.removeEventListener("mousedown",this.docMouseDown),this.node.removeAttributes(Lt),this.node.removeAttributes("role"),this.node.removeAttributes("autocorrect"),this.node.removeAttributes("autocomplete"),this.node.removeAttributes("spellcheck"),this.node.removeAttributes("data-gramm"),this.node.removeAttributes("tabindex"),this.node.removeAttributes(ur),this.options.className&&(Array.isArray(n)?n:(n||"").split(/\s+/)).forEach((function(t){""!==t.trim()&&e.node.removeClass(t)})),r.card.closest(this.node)&&this.node.removeClass(de),this.node.removeAllEvents()}}]),e}(),fr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.data={},this.locale="zh-CN",this.locale=t,this.data=n}return Object(h.a)(e,[{key:"add",value:function(e){this.data=U()(this.data,e)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function e(){for(var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r<t.length;r++){var i=n[t[r]];return"object"===Object(l.a)(i)?e(r+1,i):i||""}return n};return r(0,this.data[this.locale])}}]),e}(),vr={"en-US":{dnd:{title:"Drag to reposition"},copy:{title:"Copy",success:"Copied successfully",error:"Copy error"},delete:{title:"Delete"},copyAnchor:{title:"Copy anchor link"},link:{placeholder:"Please enter a link or anchor and press Enter to confirm",save:"Apply",edit:"Change",delete:"Remove link",open:"Open link",text:"link"},copyContent:{title:"copy content"},maximize:{title:"Maximize",back:"Back to document"},expand:{title:"Embedded preview"},collapse:{title:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{title:"Preferences"},download:{title:"Download"},more:{title:"More"},checkMarkdown:{title:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?"},searchEmtpy:{title:"No matching card"}},"zh-CN":{dnd:{title:"\u62d6\u52a8\u8c03\u6574\u4f4d\u7f6e"},copy:{title:"\u590d\u5236",success:"\u590d\u5236\u6210\u529f",error:"\u590d\u5236\u5931\u8d25"},delete:{title:"\u5220\u9664"},copyAnchor:{title:"\u590d\u5236\u951a\u70b9\u94fe\u63a5"},link:{placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5\u6216\u951a\u70b9\uff0c\u56de\u8f66\u786e\u8ba4",save:"\u4fdd\u5b58",edit:"\u7f16\u8f91",delete:"\u53d6\u6d88\u94fe\u63a5",open:"\u6253\u5f00\u94fe\u63a5",text:"\u94fe\u63a5"},copyContent:{title:"\u590d\u5236\u5185\u5bb9"},maximize:{title:"\u6700\u5927\u5316",back:"\u8fd4\u56de\u6587\u6863"},expand:{title:"\u5d4c\u5165\u9884\u89c8"},collapse:{title:"\u7d27\u51d1\u5c55\u793a"},card:{lockAlert:"\u8bf7\u7b49\u5f85\u5bf9\u65b9\u7f16\u8f91\u5b8c\u6bd5\u540e\uff0c\u518d\u8fdb\u5165\u7f16\u8f91"},preferences:{title:"\u8bbe\u7f6e"},download:{title:"\u4e0b\u8f7d"},more:{title:"\u66f4\u591a"},checkMarkdown:{title:"\u68c0\u6d4b\u5230\u7c98\u8d34\u5185\u5bb9\u7b26\u5408 Markdown \u8bed\u6cd5\uff0c\u662f\u5426\u9700\u8981\u8f6c\u6362\uff1f"},searchEmtpy:{title:"\u65e0\u5339\u914d\u5361\u7247"}}},gr=function e(t,n){Object(u.a)(this,e),this.editor=void 0,this.options=void 0,this.kind="plugin",this.name=this.constructor.pluginName,this.disabled=void 0,this.editor=t,this.options=n||{};var r=this.options.disabled;this.disabled=r};gr.pluginName=void 0;var mr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).kind="element",e.sechamCache=void 0,e.tagName=void 0,e.style=void 0,e.attributes=void 0,e.variable=void 0,e}return Object(h.a)(n,[{key:"init",value:function(){var e=this.editor,t=e.schema,n=e.conversion;t.add(this.schema()),this.conversion&&this.conversion().forEach((function(e){var t=e.from,r=e.to;n.add(t,r)}))}},{key:"setStyle",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wt(e)&&(e=It(e)),this.style&&Object.keys(this.style).forEach((function(n){var i,o=t.style[n];"object"===Object(l.a)(o)&&(o=o.value),null===(i=o.match(/@var\d/g))||void 0===i||i.forEach((function(e){var t=parseInt(e.replace("@var",""),10);o=o.replace(new RegExp(e,"gm"),r[t]||"")})),e.css(n,o)}))}},{key:"setAttributes",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wt(e)&&(e=It(e)),this.attributes&&Object.keys(this.attributes).forEach((function(n){var i,o=t.attributes[n];"object"===Object(l.a)(o)&&(o=o.value),null===(i=o.match(/@var\d/g))||void 0===i||i.forEach((function(e){var t=parseInt(e.replace("@var",""),10);o=o.replace(new RegExp(e,"gm"),r[t]||"")})),e.attributes(n,o)}))}},{key:"getStyle",value:function(e){var t=this;wt(e)&&(e=It(e));var n={};return this.style&&this.isSelf(e)&&Object.keys(this.style).forEach((function(r){var i=r.toLowerCase().indexOf("color")>-1?_()(e.css(r)||"").toHexString():e.css(r),o=t.style[r];"object"===Object(l.a)(o)&&(i=o.format(i)),i&&(n[r]=i)})),n}},{key:"getAttributes",value:function(e){var t=this;wt(e)&&(e=It(e));var n={};return this.attributes&&this.isSelf(e)&&Object.keys(this.attributes).forEach((function(r){var i=e.attributes(r),o=t.attributes[r];"object"===Object(l.a)(o)&&(i=o.format(i)),i&&(n[r]=i)})),n}},{key:"isSelf",value:function(e){wt(e)&&(e=It(e));var t=this.schema();return Array.isArray(t)&&(t=t.find((function(t){return t.name===e.name}))),!!t&&((Array.isArray(this.tagName)?this.tagName.indexOf(e.name)>-1:e.name===this.tagName)&&this.editor.schema.checkNode(e,t.attributes))}},{key:"schema",value:function(){var e=this;if(this.sechamCache)return this.sechamCache;var t={};if(this.attributes&&Object.keys(this.attributes).forEach((function(n){var r,i=e.attributes[n];"object"===Object(l.a)(i)&&(i=i.value),t[n]=i,null===(r=i.match(/@var\d/g))||void 0===r||r.forEach((function(r){if(!e.variable)throw"Please specify the variable type";t[n]=e.variable[r]}))})),this.style){var n={};Object.keys(this.style).forEach((function(t){var r,i=e.style[t];"object"===Object(l.a)(i)&&(i=i.value),null===(r=i.match(/@var\d/g))||void 0===r||r.forEach((function(r){if(!e.variable)throw"Please specify the variable type";n[t]=e.variable[r]}))})),t=Object(d.a)(Object(d.a)({},t),{},{style:n})}if(this.sechamCache={type:this.kind,attributes:t},"string"===typeof this.tagName)this.sechamCache.name=this.tagName.toLowerCase();else if(Array.isArray(this.tagName)){var r=[];this.tagName.forEach((function(t){r.push(Object(d.a)(Object(d.a)({},e.sechamCache),{},{name:t}))})),this.sechamCache=r}return this.sechamCache}},{key:"createElement",value:function(){for(var e=It("<".concat(this.tagName," />")),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.setStyle.apply(this,[e].concat(n)),this.setAttributes.apply(this,[e].concat(n)),e}}]),n}(gr),br=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).kind="block",e.allowIn=void 0,e.disableMark=void 0,e.canMerge=void 0,e}return Object(h.a)(n,[{key:"schema",value:function(){var e=this,t=Object(f.a)(Object(v.a)(n.prototype),"schema",this).call(this);return Array.isArray(t)?t.map((function(t){return Object(d.a)(Object(d.a)({},t),{},{allowIn:e.allowIn})})):Object(d.a)(Object(d.a)({},t),{},{allowIn:this.allowIn,canMerge:this.canMerge})}}]),n}(mr),yr=function(e){return"block"===e.kind},wr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).kind="inline",e.markdown=void 0,e}return Object(h.a)(n,[{key:"execute",value:function(){var e=this.editor;if(ct(e)){for(var t=It("<".concat(this.tagName," />")),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.setStyle.apply(this,[t].concat(r)),this.setAttributes.apply(this,[t].concat(r));var o=e.inline;(this.isTrigger?this.isTrigger.apply(this,r):!this.queryState())?o.wrap(t):o.unwrap()}}},{key:"queryState",value:function(){var e=this,t=this.editor;if(ct(t)){var n=t.change;if(!this.style&&!this.attributes)return n.inlines.some((function(t){return t.name===e.tagName}));var r=[];return n.inlines.forEach((function(t){r.push.apply(r,Object(S.a)(Object.values(e.getStyle(t)))),r.push.apply(r,Object(S.a)(Object.values(e.getAttributes(t))))})),0===r.length?void 0:r}}}]),n}(mr);tn('.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\r\n    margin: 0 0 0 3px;\r\n    padding: 0;\r\n    list-style: none;\r\n}\r\n\r\n.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\r\n\tmargin-left: 0;\r\n}\r\n\r\n.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\r\n\tmargin-left: 2em;\r\n}\r\n\r\n.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\r\n\tlist-style-type: decimal;\r\n}\r\n\r\n.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\r\n\tlist-style-type: lower-alpha;\r\n}\r\n\r\n.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\r\n\tlist-style-type: lower-roman;\r\n}\r\n\r\n.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\r\n\tlist-style-type: disc;\r\n}\r\n\r\n.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\r\n\tlist-style-type: circle;\r\n}\r\n\r\n.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\r\n\tlist-style-type: square;\r\n}\r\n\r\n.am-engine li,.am-engine-view li {\r\n\tmargin-left: 23px;\r\n    position: relative;\r\n}\r\n\r\n.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\r\n\tlist-style-type: decimal;\r\n}\r\n\r\n.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\r\n\tlist-style-type: lower-alpha;\r\n}\r\n\r\n.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\r\n\tlist-style-type: lower-roman;\r\n}\r\n\r\n.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r\n\tlist-style-type: disc;\r\n}\r\n\r\n.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r\n\tlist-style-type: circle;\r\n}\r\n\r\n.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r\n\tlist-style-type: square;\r\n}\r\n\r\n.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\r\n\tpadding-left: 2em;\r\n}\r\n\r\n.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\r\n\tpadding-left: 4em;\r\n}\r\n\r\n.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\r\n\tpadding-left: 6em;\r\n}\r\n\r\n.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\r\n\tpadding-left: 8em;\r\n}\r\n\r\n.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\r\n\tpadding-left: 10em;\r\n}\r\n\r\n.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r\n\tpadding-left: 12em;\r\n}\r\n\r\n.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r\n\tpadding-left: 14em;\r\n}\r\n\r\n.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r\n\tpadding-left: 16em;\r\n}\r\n\r\n.am-engine .data-list,.am-engine-view .data-list {\r\n\tcolor: #262626;\r\n\ttext-indent: 0;\r\n}\r\n\r\n.am-engine .data-list-item,.am-engine-view .data-list-item {\r\n    line-height: inherit;\r\n    position: relative;\r\n    list-style: none;\r\n    text-indent: 0;\r\n}');var kr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).cardName=void 0,e.isPasteList=!1,e.pasteBefore=function(t){var n=e.editor;if(e.cardName&&n){var r=n.list,i=It(t).allChildren();i.forEach((function(e){if("li"===e.name&&e.hasClass(r.CUSTOMZIE_LI_CLASS)){var t;if(!(null===(t=e.first())||void 0===t?void 0:t.isCard()))return e.removeClass(r.CUSTOMZIE_LI_CLASS),void e.closest("ul").removeClass(r.CUSTOMZIE_UL_CLASS);e.closest("ul").addClass(r.CUSTOMZIE_UL_CLASS)}})),e.isPasteList=i.some((function(e){return"li"===e.name}))}},e.pasteInsert=function(){var t=e.editor;if(e.cardName&&ct(t)){var n=t.change,r=t.list,i=n.range.get().getRootBlock(),o=null===i||void 0===i?void 0:i.next(),a=null===o||void 0===o?void 0:o.find("li.".concat(r.CUSTOMZIE_LI_CLASS));a&&a.length>0&&a.each((function(t){var n=It(t);0===n.find("[".concat(be,"=").concat(e.cardName,"],[").concat(ye,"=").concat(e.cardName,"]")).length&&r.addReadyCardToCustomize(n,e.cardName)}))}},e.pasteAfter=function(){var t;e.isPasteList&&(null===(t=e.editor)||void 0===t||t.list.merge())},e}return Object(h.a)(n,[{key:"init",value:function(){Object(f.a)(Object(v.a)(n.prototype),"init",this).call(this);var e=this.editor;ct(e)&&(e.on("paste:before",this.pasteBefore),e.on("paste:insert",this.pasteInsert),e.on("paste:after",this.pasteAfter))}},{key:"queryState",value:function(){var e=this.editor;return!!ct(e)&&e.list.getPluginNameByNodes(e.change.blocks)===this.constructor.pluginName}},{key:"destroy",value:function(){var e=this.editor;ct(e)&&(e.off("paste:before",this.pasteBefore),e.off("paste:insert",this.pasteInsert),e.off("paste:after",this.pasteAfter))}}]),n}(br),xr=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).kind="mark",e.copyOnEnter=void 0,e.followStyle=!0,e.combineValueByWrap=!1,e.mergeLeval=1,e}return Object(h.a)(n,[{key:"execute",value:function(){var e=this.editor;if(ct(e)){var t=e.change,n=e.mark,r=this.createElement.apply(this,arguments);if(this.isTrigger?this.isTrigger.apply(this,arguments):!this.queryState()){if(!this.followStyle&&t.range.get().collapsed)return;n.wrap(r)}else n.unwrap(r)}}},{key:"queryState",value:function(){var e=this,t=this.editor;if(ct(t)){var n=t.change;if(!this.style&&!this.attributes)return n.marks.some((function(t){return t.name===e.tagName}));var r=[];return n.marks.forEach((function(t){r.push.apply(r,Object(S.a)(Object.values(e.getStyle(t)))),r.push.apply(r,Object(S.a)(Object.values(e.getAttributes(t))))})),0===r.length?void 0:r}}},{key:"schema",value:function(){var e=Object(f.a)(Object(v.a)(n.prototype),"schema",this).call(this);return Array.isArray(e)?e.map((function(e){return Object(d.a)({},e)})):Object(d.a)({},e)}}]),n}(mr),Or=function(e){return"mark"===e.kind},Cr=function(){function e(t){Object(u.a)(this,e),this.data={},this.components={},this.editor=void 0,this.editor=t}return Object(h.a)(e,[{key:"init",value:function(e,t){var n=this;e.forEach((function(e){n.data[e.pluginName]=e;var r=new e(n.editor,t[e.pluginName]);n.components[e.pluginName]=r,r.init&&r.init()}))}},{key:"add",value:function(e,t){this.data[e.pluginName]=e,t=Object(d.a)({},t);var n=this.editor;if(ct(n)){var r=new e(n,t);r.init&&r.init(),this.components[e.pluginName]=r}}},{key:"findPlugin",value:function(e){var t=this.components[e];if(t)return t}},{key:"findElementPlugin",value:function(e){var t=this.findPlugin(e);if(t)return function(e){return"element"===e.kind}(t)?t:void 0}},{key:"findMarkPlugin",value:function(e){var t=this.findPlugin(e);if(t)return Or(t)?t:void 0}},{key:"findInlinePlugin",value:function(e){var t=this.findPlugin(e);if(t)return function(e){return"inline"===e.kind}(t)?t:void 0}},{key:"findBlockPlugin",value:function(e){var t=this.findPlugin(e);if(t)return yr(t)?t:void 0}},{key:"each",value:function(e){var t=this;Object.keys(this.data).forEach((function(n,r){!e||e(n,t.data[n],r)}))}},{key:"destroy",value:function(){var e=this;Object.keys(this.components).forEach((function(t){var n=e.components[t];n.destroy&&n.destroy()}))}}]),e}(),Er=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.editor=t}return Object(h.a)(e,[{key:"queryEnabled",value:function(e){var t=this.editor,n=t.plugin.components[e];if(!n||n.disabled)return!1;if((!ct(t)||t.readonly||!t.isFocus())&&!1!==n.disabled)return!1;var r=t.card;return!r.active||(!(!Or(n)&&"plugin"!==n.kind||!r.active.executeMark)||!!r.active.isEditable)}},{key:"queryState",value:function(e){var t=this.editor,n=t.plugin.components[e];if(n&&n.queryState)try{for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return n.queryState(i)}catch(a){t.messageError("command-query",a)}}},{key:"handleExecuteBefore",value:function(){var e,t=this.editor;if(ct(t)){var n=(e=t.change).range.get();if(!n.commonAncestorNode.isRoot()&&!n.commonAncestorNode.inEditor()){var r=n.commonAncestorNode.closest(oe),i=void 0;if(r.length>0){var o=r.attributes(Te);if(o){var a=t.card;(i=a.find(o))&&a.select(i)}}i||t.focus()}e.cacheRangeBeforeCommand()}return e}},{key:"execute",value:function(e){var t=this.editor,n=t.plugin.components[e];if(n&&n.execute){for(var r=this.handleExecuteBefore(),i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];t.trigger.apply(t,["beforeCommandExecute",e].concat(o));try{var s=n.execute.apply(n,o);return null===r||void 0===r||r.combinText(),null===r||void 0===r||r.onSelect(),t.trigger.apply(t,["afterCommandExecute",e].concat(o)),s}catch(l){t.messageError("command-execute",l)}}}},{key:"executeMethod",value:function(e,t){var n=this.editor,r=n.plugin.components[e];if(r&&r[t])try{for(var i=ct(n)?n.change:null,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];var l=r[t].apply(r,a);return null===i||void 0===i||i.combinText(),l}catch(c){n.messageError("command-excute-method",c)}}}]),e}(),jr=["blocks","inlines","marks","globals"],Mr=function(){function e(){Object(u.a)(this,e),this._all=[],this._typeMap={},this._invalidKeys=[],this._tagMap={blocks:[],inlines:[],marks:[]},this.data={blocks:[],inlines:[],marks:[],globals:{}}}return Object(h.a)(e,[{key:"add",value:function(e){var t=this;e=z()(e),Array.isArray(e)||(e=[e]),e.forEach((function(e){Sr(e)?(e.attributes&&Object.keys(e.attributes).forEach((function(n){t.data.globals[e.type]&&("style"===n?Object.keys(e.attributes.style).forEach((function(r){t.data.globals[e.type][n]&&t.data.globals[e.type][n][r]===e.attributes.style[r]&&delete e.attributes.style[r]})):t.data.globals[e.type][n]===e.attributes[n]&&delete e.attributes[n])})),"block"===e.type?t.data.blocks.push(e):"inline"===e.type?t.data.inlines.push(e):"mark"===e.type&&t.data.marks.push(e)):t.data["".concat(e.type,"s")]&&(t.data.globals[e.type]=U()(Object.assign({},t.data.globals[e.type]),e.attributes))})),this.updateTagMap();var n=function(e){var t=e.attributes||{},n=t.style||{},r=0,i=0;return Object.keys(t).forEach((function(e){var n=t[e];Nr(n)&&n.required&&r++})),Object.keys(n).forEach((function(e){var t=n[e];Nr(t)&&t.required&&i++})),[r,i]},r=this.data,i=r.blocks,o=r.marks,a=r.inlines;this._all=[].concat(Object(S.a)(i),Object(S.a)(o),Object(S.a)(a)).sort((function(e,t){var r=n(e),i=Object(x.a)(r,2),o=i[0],a=i[1],s=n(t),l=Object(x.a)(s,2),c=l[0],d=l[1];return o>c?-1:o===c?a===d?0:a>d?-1:1:1}))}},{key:"updateTagMap",value:function(){var e=this;this._tagMap.marks=[],this.data.marks.forEach((function(t){e._tagMap.marks.includes(t.name)||e._tagMap.marks.push(t.name)})),this._tagMap.blocks=[],this.data.blocks.forEach((function(t){e._tagMap.blocks.includes(t.name)||e._tagMap.blocks.push(t.name)})),this._tagMap.inlines=[],this.data.inlines.forEach((function(t){e._tagMap.inlines.includes(t.name)||e._tagMap.inlines.push(t.name)}))}},{key:"getTags",value:function(e){return this._tagMap[e]}},{key:"remove",value:function(e){var t=this._all.findIndex((function(t){return N()(t,e)}));t>-1&&this._all.splice(t,1);var n=this.data["".concat(e.type,"s")];n&&(t=n.findIndex((function(t){return N()(t,e)})))>-1&&n.splice(t,1),this._typeMap={},this.updateTagMap()}},{key:"clone",value:function(){var t=new e;return t._all=z()(this._all),t._typeMap=z()(this._typeMap),t._tagMap=z()(this._tagMap),t.data=z()(this.data),t}},{key:"find",value:function(e){var t=this,n=[];return jr.forEach((function(r){if("globals"!==r){var i=t.data[r].filter(e);n.push.apply(n,Object(S.a)(i))}})),n}},{key:"getType",value:function(e,t){var n=wt(e)?e:e[0];if(n&&n.nodeType===Node.ELEMENT_NODE){var r=n.getAttribute(te);if(r=r?r.split("-")[0]:Ft(n,!1),!this._invalidKeys.includes(r)){if(this._typeMap[r]&&(!t||t(this._typeMap[r])))return this._typeMap[r].type;var i=this.getRule(n,t);return i?this._typeMap[r]=i:this._invalidKeys.push(r),null===i||void 0===i?void 0:i.type}}}},{key:"getRule",value:function(e,t){var n=this,r=wt(e)?e:e[0];return t=t||function(e){return e.name===r.localName},this._all.find((function(e){return t(e)&&n.checkNode(r,e.attributes)}))}},{key:"checkNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wt(e)?e:e[0];for(var r in t){var i;if("style"!==r){var o=t;if(!o[r])return!1;if(!this.checkValue(o,r,null!==(i=n.getAttribute(r))&&void 0!==i?i:void 0))return!1}}var a=Ye(n.getAttribute("style")||""),s=t.style||{};for(var l in s){if(!s[l])return!1;if(!this.checkValue(s,l,a[l]))return!1}return!0}},{key:"checkValue",value:function(e,t,n,r){if(!e[t])return!1;var i=e[t];if(Nr(i)){if(void 0===n)return!i.required;i=i.value}else if(!r||void 0===n)return!0;if("string"===typeof i&&"@"===i.charAt(0))switch(i){case"@number":i=/^-?\d+(\.\d+)?$/;break;case"@length":i=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":i=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":i=nt}return"string"===typeof i?"*"===i||("class"===t?(n||"").split(/\s+/).some((function(e){return e.trim()===i})):i===n):Array.isArray(i)?"class"===t?(n||"").split(/\s+/).every((function(e){return""===e.trim()||i.indexOf(e.trim())>-1})):i.indexOf(n)>-1:"object"===Object(l.a)(i)&&"function"===typeof i.test?"class"===t?(n||"").split(/\s+/).every((function(e){return""===e.trim()||i.test(e.trim())})):i.test(n||""):"function"!==typeof i||i(n)}},{key:"filterStyles",value:function(e,t,n){var r=this;Object.keys(e).forEach((function(i){var o;(null===(o=t.attributes)||void 0===o?void 0:o.style)&&r.checkValue(t.attributes.style,i,e[i],!0)||(n&&n(i,e[i]),delete e[i])}))}},{key:"filterAttributes",value:function(e,t,n){var r=this;Object.keys(e).forEach((function(i){t.attributes&&r.checkValue(t.attributes,i,e[i],!0)||(n&&n(i,e[i]),delete e[i])}))}},{key:"filter",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getRule(e);if(i){var o=this.data.globals,a=o[i.type]?i.type:void 0,s=Object.assign({},i,{attributes:U()({},i.attributes,a?o[a]:{})});this.filterAttributes(t,s,r?function(t){return e.removeAttributes(t)}:void 0),this.filterStyles(n,s,r?function(t){return e.css(t,"")}:void 0)}}},{key:"closest",value:function(e){var t=this,n=e;return this.data.blocks.forEach((function(r){if(r.name===e){var i=r;i.allowIn&&(i.allowIn.forEach((function(e){t.isAllowIn(e,n)&&(n=e)})),n=t.closest(n))}})),n}},{key:"isAllowIn",value:function(e,t){return"p"!==e&&this.data.blocks.some((function(n){if(n.name===t){var r=n;return!!(r.allowIn&&r.allowIn.indexOf(e)>-1)||void 0}}))}},{key:"addAllowIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"p",n=this.data.blocks.find((function(e){return e.name===t}));n.allowIn||(n.allowIn=[]),n.allowIn.includes(e)||n.allowIn.push(e)}},{key:"getAllowInTags",value:function(){var e=[];return this.data.blocks.forEach((function(t){var n=t;n.allowIn&&n.allowIn.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),e}},{key:"getCanMergeTags",value:function(){var e=[];return this.data.blocks.forEach((function(t){var n=t;!0===n.canMerge&&e.indexOf(n.name)<0&&e.push(n.name)})),e}}]),e}(),Nr=function(e){return void 0!==e.required},Sr=function(e){return!!e.name},Tr=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.data=[],this.editor=t}return Object(h.a)(e,[{key:"getData",value:function(){return this.data}},{key:"clone",value:function(){var t=z()(this.data),n=new e(this.editor);return n.data=t,n}},{key:"add",value:function(e,t){this.data.push({from:e,to:t})}},{key:"transform",value:function(e,t){var n=e.name,r=e.attributes(),i=Ye(r.style||""),o=!1;delete r.style,e.isCursor()&&(n=r[ee].toLowerCase(),r={},i={});var a=this.data.find((function(e){if(!t||t(e)){var a=e.from,s=e.to,l=!1;if("string"===typeof a)l=a===n;else if("function"===typeof a)l=a(n,i,r);else{var c=Object.keys(a);l=c.indexOf(n)>=0&&c.some((function(e){var t=a[e];return Object.keys(t.style||{}).every((function(e){var n=t.style[e];return i[e]&&Array.isArray(n)?n.indexOf(i[e])>-1:n===i[e]}))&&Object.keys(t.attributes||{}).every((function(e){var n=t.attributes[e];return i[e]&&Array.isArray(n)?n.indexOf(i[e])>-1:n===i[e]}))}))}if(l)if("string"===typeof s)n=s,i={},r={};else{var d="function"===typeof s?s(n,i,r):s,u=d;if(d.hasOwnProperty("replace")){var h=d;u=h.node,o=h.replace}n=u.name,i=u.css(),r=u.attributes()}return l}}));return a?{rule:a,node:{name:n,style:i,attributes:r},replace:o}:void 0}}]),e}(),_r=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"insertNewline",value:function(e,t,n){var r=this.engine.change,i=It("<p><br /></p>");this.engine.nodeId.generate(i),n?t.root.before(i):t.root.after(i),e.select(i,!0),e.collapse(!1),r.range.select(e)}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,i=n.range.get(),o=r.find(i.startNode);if(!o)return!0;if(o.type===nn.INLINE){i.startNode.closest(Me).length>0&&(i.select(o.root),i.collapse(!0),n.range.select(i)),i.startNode.closest(Se).length>0&&(i.select(o.root),i.collapse(!1),n.range.select(i))}else{if(i.startNode.closest(Me).length>0){e.preventDefault();var a=o.root.prev();return!a||a.isCard()?(r.focusPrevBlock(o,i,!0),n.range.select(i)):this.insertNewline(i,o,!0),!1}if(i.startNode.closest(Se).length>0){e.preventDefault();var s=o.root.next();return!s||s.isCard()?(r.focusNextBlock(o,i,!0),n.range.select(i)):this.insertNewline(i,o,!1),!1}}return!0}}]),e}(),Ar=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"focusPrevBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.engine.change,r=n.range.get(),i=(e=e||this.engine.block.closest(r.startNode)).prev();if(i)if(i.isCard()){var o=this.engine.card.find(i);o&&o.focus(r)}else this.engine.node.isList(i)&&(i=i.last()),i&&(t&&this.engine.node.isEmptyWithTrim(i)?i.remove():(r.select(i,!0),r.collapse(!1),n.range.select(r.shrinkToTextNode())))}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get().cloneRange().shrinkToElementNode().shrinkToTextNode();if(n.collapsed){var r=this.engine.card.find(n.startNode);if(!r){var i=n.getPrevNode(),o=null===i||void 0===i?void 0:i.parent();if(!e.isDelete&&i&&i.isCard()&&(!o||!this.engine.node.isCustomize(o))){e.preventDefault();var a=n.cloneRange();return a.setStartBefore(i),a.collapse(!0),this.engine.card.remove(i),t.range.select(a.shrinkToTextNode()),a.handleBr(),!1}return!0}if(e.isDelete)return!0;if(r.type===nn.INLINE){if(n.startNode.closest(Me).length>0){var s=r.root.prev();if(!s)return e.preventDefault(),t.mergeAfterDelete(),!1;var l=this.engine.card.find(s);if(l)return this.engine.card.remove(l.id),n.handleBr(),!1;n.select(r.root).collapse(!0),t.range.select(n)}if(n.startNode.closest(Se).length>0){e.preventDefault();var c=n.cloneRange();return c.setStartBefore(r.root),c.collapse(!0),this.engine.card.remove(r.id),t.range.select(c.shrinkToTextNode()),c.handleBr(),!1}}else{var d;if(n.startNode.closest(Me).length>0)return e.preventDefault(),(null===(d=r.root.parent())||void 0===d?void 0:d.inEditor())?t.unwrap(r.root.parent()):this.focusPrevBlock(r.root,!0),!1;if(n.startNode.closest(Se).length>0)return e.preventDefault(),this.focusPrevBlock(r.root),this.engine.card.remove(r.id,!1),t.isEmpty()&&t.initValue(),!1}return!1!==this.engine.trigger("keydown:backspace",e)}}}]),e}(),Ir=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get().cloneRange(),i=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(Me);if(o.length>0)return e.root.prev()?(r.setStartBefore(e.root[0]),r.collapse(!0)):e.focus(r,!0),n.range.select(r),!0;var a=r.commonAncestorNode.closest(Se),s=0===o.length&&0===a.length;if(a.length>0||s){var l,c;if(t.preventDefault(),s)e.select(!1),null===(l=e.toolbarModel)||void 0===l||l.hide(),e.activate(!1);else if(r.collapsed){var d=this.engine.card.find(r.startNode);if(d&&d.onSelectLeft)return d.onSelectLeft(t)}if(s||!1===i)e.focus(r,!0),e.select(!1),null===(c=e.toolbarModel)||void 0===c||c.hide(),n.range.select(r);else this.engine.card.select(e,t);return!1}return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get(),a=o.commonAncestorNode.closest(Me);if(a.length>0)return e.root.prev()?(t.preventDefault(),i.focusPrevBlock(e,o,!1),r.range.select(o),!1):void 0;var s,l,c=o.commonAncestorNode.closest(Se);0===a.length&&0===c.length&&(e.select(!1),null===(s=e.toolbarModel)||void 0===s||s.hide(),e.activate(!1));if(c.length>0){if(o.collapsed){var d=i.find(o.startNode);if(d&&d.onSelectLeft)return d.onSelectLeft(t)}return t.preventDefault(),i.select(e,t),!1}return!i.getSingleSelectedCard(o)||(t.preventDefault(),e.focus(o,!0),e.select(!1),null===(l=e.toolbarModel)||void 0===l||l.hide(),r.range.select(o),!1)}},{key:"fincPrevCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()&&0===n){var r=t.prevElement();if(r&&r.isCard())return this.engine.card.find(r)}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var o=this.fincPrevCard(n);return!o||(e.preventDefault(),o.focus(n,!1),t.range.select(n),!1)}return!i()("shift+left",e)&&(r.type===nn.INLINE?this.inline(r,e):this.block(r,e))}}]),e}(),Dr=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"inline",value:function(e,t){var n=this.engine.change,r=n.range.get(),i=e.constructor.singleSelectable,o=r.commonAncestorNode.closest(Me),a=r.commonAncestorNode.closest(Se),s=0===o.length&&0===a.length;if(o.length>0||s){var l,c;if(t.preventDefault(),s)e.select(!1),e.activate(!1),null===(l=e.toolbarModel)||void 0===l||l.hide();else if(r.collapsed){var d=this.engine.card.find(r.startNode);if(d&&d.onSelectRight)return d.onSelectRight(t)}if(s||!1===i)e.focus(r,!1),e.select(!1),null===(c=e.toolbarModel)||void 0===c||c.hide(),n.range.select(r);else this.engine.card.select(e,t);return!1}a.length>0&&(e.root.next()?(r.setEndAfter(e.root[0]),r.collapse(!1)):e.focus(r,!1),n.range.select(r));return!0}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get(),a=o.commonAncestorNode.closest(Me);if(a.length>0){if(o.collapsed){var s=this.engine.card.find(o.startNode);if(s&&s.onSelectRight)return s.onSelectRight(t)}return t.preventDefault(),i.select(e,t),!1}var l,c,d=o.commonAncestorNode.closest(Se);0===a.length&&0===d.length&&(e.select(!1),null===(l=e.toolbarModel)||void 0===l||l.hide(),e.activate(!1));return d.length>0?e.root.next()?(t.preventDefault(),i.focusNextBlock(e,o,!1),r.range.select(o),!1):void 0:!this.engine.card.getSingleSelectedCard(o)||(t.preventDefault(),e.focus(o,!1),e.select(!1),null===(c=e.toolbarModel)||void 0===c||c.hide(),r.range.select(o),!1)}},{key:"fincNextCard",value:function(e){if(!e.collapsed)return null;var t=e.startNode,n=e.startOffset;if(t.isText()&&t.text().length===n){var r=t.nextElement();if(r&&r.isCard())return this.engine.card.find(r)}return null}},{key:"trigger",value:function(e){var t=this.engine.change,n=t.range.get(),r=this.engine.card.getSingleCard(n);if(!r){var o=this.fincNextCard(n);return!o||(e.preventDefault(),o.focus(n,!0),t.range.select(n),!1)}if(!i()("shift+right",e))return r.type===nn.INLINE?this.inline(r,e):this.block(r,e)}}]),e}(),zr=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get();if(e.root.prev())return t.preventDefault(),i.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get();if(e.root.prev())return t.preventDefault(),i.focusPrevBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.card,o=t.block,a=n.range.get();if(a.collapsed){var s=o.closest(a.startNode).prev();if(null===s||void 0===s?void 0:s.isCard()){var l=r.find(s);if(l&&l.onSelectUp)return l.onSelectUp(e)}}var c=r.getSingleCard(a);return!c||(i()("shift+up",e)?void 0:c.type===nn.INLINE?this.inline(c,e):this.block(c,e))}}]),e}(),Lr=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"inline",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get();if(e.root.next())return t.preventDefault(),i.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"block",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get();if(e.root.next())return t.preventDefault(),i.focusNextBlock(e,o,!1),r.range.select(o),!1}},{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.block,o=t.card,a=n.range.get(),s=o.getSingleCard(a);if(a.collapsed){var l=r.closest(a.startNode).next();if(null===l||void 0===l?void 0:l.isCard()){var c=o.find(l);if(c&&c.onSelectDown)return c.onSelectDown(e)}}return!s||(!!i()("shift+down",e)||(s.type===nn.INLINE?this.inline(s,e):this.block(s,e)))}}]),e}(),Rr=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"block",value:function(e,t){var n=this.engine,r=n.change,i=n.card,o=r.range.get();return o.commonAncestorNode.closest(Me).length>0?(t.metaKey||t.ctrlKey||(i.focusPrevBlock(e,o,!0),r.range.select(o)),!0):(o.commonAncestorNode.closest(Se).length>0&&(t.metaKey||t.ctrlKey||(i.focusNextBlock(e,o,!0),r.range.select(o))),!0)}},{key:"trigger",value:function(e){var t=this.engine.change.range.get(),n=this.engine.card.getSingleCard(t);return!n||(n.type!==nn.BLOCK||this.block(n,e))}}]),e}();tn('.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\r\n    background: rgba(27, 162, 227, 0.2);\r\n}\r\n\r\n.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\r\n    outline: 2px solid #1890FF;\r\n    border-radius: 2px;\r\n}\r\n\r\n.am-engine .card-selected [data-card-element="center"].data-card-border-selected::-moz-selection {\r\n    background: transparent;\r\n}\r\n\r\n.am-engine .card-selected [data-card-element="center"].data-card-border-selected::selection {\r\n    background: transparent;\r\n}\r\n\r\n.am-engine-view [data-card-element="center"] .data-card-loading,.am-engine [data-card-element="center"] .data-card-loading {\r\n    display: inline-block;\r\n    font-style: normal;\r\n    vertical-align: -0.125em;\r\n    text-align: center;\r\n    text-transform: none;\r\n    line-height: 0;\r\n    text-rendering: optimizeLegibility;\r\n    -webkit-font-smoothing: antialiased;\r\n    margin-right: 5px;\r\n    padding: 16px;\r\n    width: 100%;\r\n}\r\n\r\n.am-engine-view [data-card-element="center"] .data-card-loading .data-card-spin,.am-engine [data-card-element="center"] .data-card-loading .data-card-spin {\r\n    display: inline-block;\r\n    -webkit-animation: loadingCircle 1s infinite linear;\r\n    animation: loadingCircle 1s infinite linear;\r\n}');var Br=function(){function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(u.a)(this,e),this.classes=void 0,this.components=void 0,this.lazyRender=void 0,this.asyncComponents=[],this.editor=void 0,this.renderTimeout=void 0,this.renderAsyncComponents=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.renderTimeout&&clearTimeout(n.renderTimeout),t=n.editor,n.renderTimeout=setTimeout((function(){n.asyncComponents.concat().forEach(function(){var e=Object(c.a)(s.a.mark((function e(r){var i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0===r.root.length||t.root.inViewport(r.root,!0)&&!1!==t.trigger("card:async-render-component",r))&&(n.asyncComponents.splice(n.asyncComponents.findIndex((function(e){return e===r})),1),r.root.length>0&&r.loading&&(r.destroy&&r.destroy(),r.getCenter().empty(),n.renderComponent(r),ct(t)&&t.readonly&&!t.ot.isRemote&&((null===(i=t.ot.doc)||void 0===i?void 0:i.type)?t.ot.doc.data=Xt(t.container):null===(o=t.ot.doc)||void 0===o||o.create(Xt(t.container)))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),50);case 3:case"end":return e.stop()}}),e)}))),this.classes={},this.components=[],this.editor=t,this.lazyRender=r}return Object(h.a)(e,[{key:"active",get:function(){return this.components.find((function(e){return e.activated}))}},{key:"length",get:function(){return this.components.length}},{key:"init",value:function(e){var t,n,r=this,i=this.editor;if(ct(i)){var o,a,s,l,c,d,u,h=i.typing,p=new _r(i);null===(o=h.getHandleListener("enter","keydown"))||void 0===o||o.on((function(e){return p.trigger(e)}));var f=new Ar(i);null===(a=h.getHandleListener("backspace","keydown"))||void 0===a||a.on((function(e){return f.trigger(e)}));var v=new Ir(i);null===(s=h.getHandleListener("left","keydown"))||void 0===s||s.on((function(e){return v.trigger(e)}));var g=new Dr(i);null===(l=h.getHandleListener("right","keydown"))||void 0===l||l.on((function(e){return g.trigger(e)}));var m=new zr(i);null===(c=h.getHandleListener("up","keydown"))||void 0===c||c.on((function(e){return m.trigger(e)}));var b=new Lr(i);null===(d=h.getHandleListener("down","keydown"))||void 0===d||d.on((function(e){return b.trigger(e)}));var y=new Rr(i);null===(u=h.getHandleListener("default","keydown"))||void 0===u||u.on((function(e){return y.trigger(e)}))}e.forEach((function(e){r.classes[e.cardName]=e})),this.lazyRender&&(window.addEventListener("resize",this.renderAsyncComponents),null===(t=i.scrollNode)||void 0===t||null===(n=t.get())||void 0===n||n.addEventListener("scroll",this.renderAsyncComponents),window.addEventListener("scroll",this.renderAsyncComponents),i.on("card:async-render",this.renderAsyncComponents))}},{key:"add",value:function(e){this.classes[e.cardName]=e}},{key:"each",value:function(e){this.components.every((function(t,n){return!e||!1!==e(t,n)}))}},{key:"closest",value:function(e,t){if(wt(e)&&(e=It(e)),!e.isCard()){var n=e.closest(Ee,(function(e){if(!(e&&t?It(e).isRoot():It(e).isEditable()))return e.parentNode||void 0}));if(!n||0===n.length)return;e=n}return e}},{key:"find",value:function(e,t){if("string"!==typeof e){var n=this.closest(e,t);if(!n)return;e=n}var r=this.components.filter((function(t){return"string"===typeof e?t.id===e:t.root.name===(wt(e)?e.nodeName.toString().toLowerCase():e.name)&&(t.root.equal(e)||t.id===function(e){wt(e)&&(e=It(e));var t=e.attributes(ke);return et(t)}(e).id)}));if(0!==r.length)return r[0]}},{key:"findBlock",value:function(e){if(wt(e)&&(e=It(e)),e.get()){var t=e.parent();if(t){var n=this.find(t);if(n)return n.type===nn.BLOCK?n:this.findBlock(n.root)}}}},{key:"getSingleCard",value:function(e){var t=this.find(e.commonAncestorNode);return t||(t=this.getSingleSelectedCard(e)),t}},{key:"getSingleSelectedCard",value:function(e){var t=e.findElements(),n=t[0];if(1===t.length&&n){var r=It(n);if(r.isCard())return this.find(r)}}},{key:"insertNode",value:function(e,t){var n="inline"===t.type,r=this.editor;!e.collapsed&&ct(r)&&r.change.delete(e),this.gc();var i=r.inline,o=r.block,a=r.node,s=[];if(n){if(ct(r)&&t.executeMark){s=r.change.marks.map((function(e){return e.clone()}));var l,c=r.card.find(e.startNode);if(null===c||void 0===c?void 0:c.queryMarks)(l=s).push.apply(l,Object(S.a)(c.queryMarks()))}i.insert(t.root,e)}else o.insert(t.root,e,(function(e){for(var t=e.parent();t&&!t.isEditable();){e=t;var n=t.parent();if(!n||!a.isBlock(n))break;t=n}return e}),!0);this.components.push(t),t.focus(e);var d=t.root.parent();!n&&d&&d.inEditor()&&a.isBlock(d)&&o.unwrap(d,e);for(var u=arguments.length,h=new Array(u>2?u-2:0),p=2;p<u;p++)h[p-2]=arguments[p];return this.renderComponent.apply(this,[t].concat(h)),t.didInsert&&t.didInsert(),s.forEach((function(e){t.executeMark(e,!0)})),t}},{key:"removeNode",value:function(e){e.destroy&&e.destroy(),this.removeComponent(e),e.root.remove()}},{key:"updateNode",value:function(e,t){e.destroy&&e.destroy();var n=e.getCenter();null===n||void 0===n||n.empty(),e.setValue(t);for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];this.renderComponent.apply(this,[e].concat(i)),e.didUpdate&&e.didUpdate()}},{key:"replaceNode",value:function(e,t,n){var r=this.classes[t];if(!r)throw"".concat(t,": This card does not exist");var i=(null===n||void 0===n?void 0:n.type)||r.cardType,o=e.attributes(te),a=tt("<card ".concat(null!==o&&void 0!==o?o:"".concat(te,'="').concat(o,'"'),' type="').concat(i,'" name="').concat(t,'" value="').concat(Je(n),'"></card>')),s=It(a);return e.before(s),s.append(e),s}},{key:"activate",value:function(e,t,n){var r=this.editor;if(ct(r)&&!r.readonly){var i=e.getRoot(),o=this.active;if(!i.get()||r.container.equal(i)){var a=this.find(e),s=e.closest(se);if(!a&&s.length>0){var l=s.parent();a=l?this.find(l):void 0}var c=a?this.findBlock(a.root):void 0;if(c&&(a=c),a&&a.isCursor(e))if(s.length>0){var d=s.parent();a=d?this.find(d):void 0}else a=void 0;var u,h=a&&o&&o.root.equal(a.root);if(o&&!h)null===(u=o.toolbarModel)||void 0===u||u.hide(),o.select(!1),o.activate(!1);if(a){if(a.activatedByOther)return;var p;if(h)a.isEditable?a.select(!1):t===rn.MOUSE_DOWN&&"input"!==e.name&&0===a.root.find(".data-drag-image").length&&(null===n||void 0===n||n.preventDefault());else!1===a.constructor.singleSelectable||t===rn.CLICK&&!ct(r)||this.select(a,n),a.isEditable||!1===a.constructor.autoSelected||a.select(!a.isEditable),a.activate(!0),null===(p=a.toolbarModel)||void 0===p||p.show(n);r.change.onSelect()}}else if(o){var f;null===(f=o.toolbarModel)||void 0===f||f.hide(),o.select(!1),o.activate(!1)}}}},{key:"select",value:function(e,t){var n=this.editor;if(ct(n)&&!1!==e.constructor.singleSelectable&&(e.type!==nn.BLOCK||!e.activated)){var r=n.change.range.get().cloneRange();if(r.startNode.closest(se).length>0&&(!t||t instanceof MouseEvent&&(!t.target||!this.closest(t.target,!1)))||e.isEditable||e.isMaximize)return;null===t||void 0===t||t.preventDefault();var i=e.root,o=i.parent(),a=o.children().toArray().findIndex((function(e){return e.equal(i)}));r.setStart(o,a),r.setEnd(o,a+1),n.change.range.select(r)}}},{key:"focus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.editor;if(ct(n)){var r=n.change,i=n.container,o=n.scrollNode,a=r.range.get();e.focus(a,t),r.range.select(a),this.activate(a.startNode,rn.MOUSE_DOWN),r.onSelect(),o&&a.scrollIntoViewIfNeeded(i,o)}}},{key:"insert",value:function(e,t){var n=this.editor;if(!ct(n))throw"Engine not found";for(var r=this.create(e,{value:t}),i=n.change,o=i.range.toTrusty(),a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];var c=this.insertNode.apply(this,[o,r].concat(s));return i.change(),c}},{key:"update",value:function(e,t){var n=this.editor;if(ct(n)){var r=n.change,i=this.find(e);if(i){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];this.updateNode.apply(this,[i,t].concat(a));var l=r.range.get();i.focus(l,!1),r.change()}}}},{key:"replace",value:function(e,t,n){this.remove(e.root);for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.insert.apply(this,[t,n].concat(i))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.editor;if(ct(n)){var r=n.change,i=n.list,o=n.node,a=r.range.get(),s=this.find(e);if(s){s.type===nn.INLINE?(a.setEndAfter(s.root[0]),a.collapse(!1)):this.focusPrevBlock(s,a,t);var l=s.root.parent();this.removeNode(s),i.addBr(a.startNode),l&&o.isEmpty(l)&&!n.ot.isStopped&&(l.isEditable()?(o.html(l,"<p><br /></p>"),a.select(l,!0),a.shrinkToElementNode(),a.collapse(!1)):(o.html(l,"<br />"),a.select(l,!0),a.collapse(!1))),t?r.apply(a):(r.range.select(a),r.change())}}}},{key:"removeRemote",value:function(e){var t=this.editor;if(ct(t)){var n=t.node,r=this.find(e);if(r){var i=r.root.parent();this.removeNode(r),i&&n.isEmpty(i)&&!t.ot.isStopped&&(i.isEditable()?n.html(i,"<p><br /></p>"):n.html(i,"<br />"))}}}},{key:"create",value:function(e,t){var n,r=this.classes[e];if(!r)throw"".concat(e,": This card does not exist");var i=(null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:n.type)||r.cardType;if(["inline","block"].indexOf(i)<0)throw"".concat(e,': the type of card must be "inline", "block"');(null===t||void 0===t?void 0:t.root)&&t.root.empty();var o=this.editor,a=new r({editor:o,value:null===t||void 0===t?void 0:t.value,root:null===t||void 0===t?void 0:t.root}),s=a.root;s.attributes(we,i),s.attributes(be,e),s.attributes(Oe,"true");var l=i===nn.INLINE?"span":"div",c=It("<".concat(l," ").concat(a.isEditable?le+"='*'":"","/>"));c.attributes(xe,"center");var d=It("<".concat(l," ").concat(xe,'="body" />'));return d.append(c),s.append(d),this.createCursor(a),i===nn.BLOCK&&o.nodeId.generate(a.root),a.init(),a}},{key:"createCursor",value:function(e){var t=this.editor,n=e.constructor,r=void 0!==n.focus?n.focus:ct(t)&&!t.readonly,i=e.getCenter();i.removeAttributes(Lt);var o=e.root;o.removeAttributes(Lt);var a=e.findByKey("left"),s=e.findByKey("right");r?(i.attributes(Lt,"false"),a||i.before(It("<span ".concat(xe,'="left" ').concat(ce,'="true">&#8203;</span>'))),s||i.after(It("<span ".concat(xe,'="right" ').concat(ce,'="true">&#8203;</span>')))):(null===a||void 0===a||a.remove(),null===s||void 0===s||s.remove(),o.attributes(Lt,"false"))}},{key:"reRender",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];0===n.length&&(n=this.components),n.forEach((function(t){t.destroy&&t.destroy(),e.createCursor(t),t.init(),e.renderComponent(t)}))}},{key:"render",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.lazyRender,i=e?e.isCard()?e:e.find("".concat(je)):this.editor.container.find(je);this.gc();var o=[],a=[];i.toArray().forEach((function(e){a.find((function(t){return t.equal(e)}))||a.push(e),e.find("".concat(Ee,",").concat(je)).toArray().forEach((function(t){if(!t.equal(e)){var n=a.findIndex((function(e){return e.equal(t)}));n>-1&&a.splice(n,1)}}))})),a.forEach((function(e){var t=e.attributes(),r=t[ye],i=t[be],a=r||i;if(n.classes[a]){var s,l=t[ke];i&&((s=n.find(e))&&s.root.equal(e)&&(s.destroy&&s.destroy(),n.removeComponent(s)),e.attributes(Oe,"true"),t[Oe]="true",e.empty()),s=n.create(a,{value:et(l),root:i?e:void 0}),Object.keys(t).forEach((function(e){(0===e.indexOf("data-")&&0!==e.indexOf("data-card")||e===Oe)&&s.root.attributes(e,t[e])})),r&&(e.replaceWith(s.root),e.remove()),n.components.push(s),o.push(s),r&&s.root.removeAttributes(ye)}}));var s=!1,l=ct(this.editor)&&this.editor.ot.isRemote;o.forEach((function(e){if(!r||!e.constructor.lazyRender||e.isEditable&&l)n.renderComponent(e);else{if(e.beforeRender){var t=e.beforeRender(),i=e.getCenter();void 0!==t&&i.append("string"===typeof t?It(t):t)}s=!0,n.asyncComponents.push(e)}})),t&&t(o.length),s&&this.renderAsyncComponents()}},{key:"renderComponent",value:function(e){for(var t=this.editor,n=e.getCenter(),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=e.render.apply(e,i);void 0!==a&&n.append("string"===typeof a?It(a):a),e.contenteditable.length>0&&(n.find(e.contenteditable.join(",")).each((function(e){var n=It(e);void 0!==n.attributes(Lt)&&n.attributes(Lt,!ct(t)||t.readonly?"false":"true"),n.attributes(ee,ae),ct(t)&&t.normalize(n)})),this.render(n)),e.didRender()}},{key:"removeComponent",value:function(e){var t=this;this.each((function(n,r){if(n.root.equal(e.root))return t.components.splice(r,1),!1}))}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e];t.root[0]&&0!==t.root.closest("body").length||(t.destroy&&t.destroy(),this.components.splice(e,1),e--)}}},{key:"destroy",value:function(){var e,t;this.gc();var n=this.editor;window.removeEventListener("resize",this.renderAsyncComponents),null===(e=n.scrollNode)||void 0===e||null===(t=e.get())||void 0===t||t.removeEventListener("scroll",this.renderAsyncComponents),window.removeEventListener("scroll",this.renderAsyncComponents),n.off("card:async-render",this.renderAsyncComponents)}},{key:"focusPrevBlock",value:function(e,t,n){var r,i=this.editor;if(!ct(i))throw"Engine not initialized";if("inline"===e.type){var o=i.block.closest(e.root);r=o.isEditable()?e.root.prevElement():o.prevElement()}else r=e.root.prevElement();if(n){if(!r||r.attributes(be)){var a=It("<p><br /></p>");return e.root.before(a),t.select(a,!0),t.collapse(!1),void i.nodeId.generate(a)}}else{if(!r)return;var s;if(r.attributes(be))return void(null===(s=i.card.find(r))||void 0===s||s.focus(t,!1))}t.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!1)}},{key:"focusNextBlock",value:function(e,t,n){var r,i=this.editor;if(!ct(i))throw"Engine not initialized";if("inline"===e.type){var o=i.block.closest(e.root);r=o.isEditable()?e.root.nextElement():o.nextElement()}else r=e.root.nextElement();if(n){if(!r||r.attributes(be)){var a=It("<p><br /></p>");return e.root.after(a),t.select(a,!0),t.collapse(!1),void i.nodeId.generate(a)}}else{if(!r)return;var s;if(r.attributes(be))return void(null===(s=i.card.find(r))||void 0===s||s.focus(t,!0))}t.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!0)}}]),e}(),Pr=Object(y.a)("rules"),Fr=function(){function e(t){Object(u.a)(this,e),this.schema=void 0,Object.defineProperty(this,Pr,{writable:!0,value:{}}),this.schema=t}return Object(h.a)(e,[{key:"init",value:function(){Object(b.a)(this,Pr)[Pr]=this.getRules()}},{key:"getRules",value:function(){var e={};return this.schema.data.blocks.forEach((function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)})),e}},{key:"create",value:function(e){wt(e)&&(e=It(e));var t=Ft(e);return e.attributes(te,t),t}},{key:"generateAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object(b.a)(this,Pr)[Pr],i=Object.keys(r).join(",");yt(e)&&e.fragment&&(e=e.fragment);var o=wt(e)?e:e.get();if(o&&o.nodeType!==Node.TEXT_NODE){var a=wt(e)?e:e.get(),s=null===a||void 0===a?void 0:a.querySelectorAll(i),l=function(e){!n&&e.getAttribute(te)||t.generate(e,n)};a instanceof Element&&i.includes(a.nodeName.toLowerCase())&&l(a),null===s||void 0===s||s.forEach(l)}}},{key:"generate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(wt(e)&&(e=It(e)),!e.isText()){var r=Object(b.a)(this,Pr)[Pr][e.name];if(r&&0!==r.length&&r.some((function(n){return t.schema.checkNode(e,n.attributes)}))){var i=e.closest("".concat(Ee,",").concat(oe),lt);if(!(i.length>0&&i.attributes(ee)===ie)&&(!(!e.isCard()&&i.length>0&&i.isCard())||i.isEditableCard())){if(!n){var o=e.attributes(te);if(o)return o}return this.create(e)}}}}},{key:"isNeed",value:function(e){var t=this,n=Object(b.a)(this,Pr)[Pr][e.name];return!(!n||0===n.length||!n.some((function(n){return t.schema.checkNode(e,n.attributes)})))}}]),e}(),Hr=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.editor=t}return Object(h.a)(e,[{key:"getData",value:function(e){var t,n=function(e){return!!e.dataTransfer}(e)?e.dataTransfer:e.clipboardData,r=null===n||void 0===n?void 0:n.getData("text/html"),i=null===n||void 0===n?void 0:n.getData("text"),o=[];try{(null===n||void 0===n?void 0:n.items)&&n.items.length>0?Array.from(n.items).forEach((function(e){var t,n="file"===e.kind?e.getAsFile():null;null!==n&&(n.type&&n.type.indexOf("image/png")>-1&&!n.lastModified&&(n=new File([n],"image.png",{type:n.type})),n.ext=null===(t=i)||void 0===t?void 0:t.split(".").pop());n&&o.push(n)})):(null===n||void 0===n?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}catch(a){(null===n||void 0===n?void 0:n.files)&&n.files.length>0&&(o=Array.from(n.files))}return""===r&&i&&/^.+\.\w+$/.test(i)&&o.length>0?i="":""===i&&r&&/^(<meta.+?>)?<img.+?>$/.test(r)&&o.length>0?r="":(r||i)&&o.length>0&&!(null===(t=r)||void 0===t?void 0:t.startsWith("<img"))&&(r||!/^https(s)?:/.test(i||""))&&(o=[]),{html:r,text:i,files:o}}},{key:"write",value:function(e,t){var n,r,i=this.editor.getSelectionData(t);if(i){var o=i.html,a=i.text;return null===e||void 0===e||e.preventDefault(),null===e||void 0===e||null===(n=e.clipboardData)||void 0===n||n.setData("text/html",'<meta name="source" content="aomao" />'+o),null===e||void 0===e||null===(r=e.clipboardData)||void 0===r||r.setData("text",a),i}}},{key:"copy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"===typeof e)return V()(e,{format:/<[^>]+>/g.test(e)?"text/html":"text/plain"});var r=this.editor,i=window.getSelection(),o=i&&Kt.from(r,i)||Kt.create(r),a=o.cloneRange(),s=It('<div class="'.concat(ue,'" ').concat(ee,'="').concat(ne,'">&#8203;</div>'));s.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"});var l=function(){s.remove(),null===i||void 0===i||i.removeAllRanges(),null===i||void 0===i||i.addRange(a.toRange())};s.on("copy",(function(e){e.stopPropagation(),t.write(e,o),l()})),It(document.body).append(s),s.append(r.node.clone(It(e),!0)),n&&s.traverse((function(e){e.equal(s)||r.trigger("copy",e)})),s.append(It("&#8203;",null));var c=s.first(),d=s.last();o.select(s,!0),o.setStartAfter(c),o.setEndBefore(d),null===i||void 0===i||i.removeAllRanges(),null===i||void 0===i||i.addRange(o.toRange());var u=!1;try{if(!(u=document.execCommand("copy")))throw"Copy failed"}catch(h){r.messageError("copy","The copy command was not executed successfully ",h),l()}return u}},{key:"cut",value:function(){var e=this.editor,t=Kt.from(e);if(t&&ct(e)){var n=t.commonAncestorNode,r=e.change;r.cacheRangeBeforeCommand(),r.delete(t);for(var i=e.node.isList(n)?n:n.find("ul,ol"),o=0;o<i.length;o++){var a,s=It(i[o]);s.find("li").each((function(e){var t;(""===e.innerText||Le&&"\n"===e.innerText)&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))})),0===(null===(a=s.get())||void 0===a?void 0:a.childNodes.length)&&s.remove()}r.range.select(t)}}}]),e}(),qr=function e(t,n,r,i){var o=void 0,a=void 0,s=/\[\]$/;if(Array.isArray(n))for(a=0;a<n.length;a++){var c=n[a];r||s.test(t)?i(t,c):e(t+"["+("object"===("undefined"===typeof c?"undefined":Object(l.a)(c))?a:"")+"]",c,r,i)}else if("[object Object]"===n.toString())for(o in n)n.hasOwnProperty(o)&&e(t+"["+o+"]",n[o],r,i);else i(t,n)},Ur=function(e,t){return e+(/\?/.test(e)?"&":"?")+t},Wr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,r=[],i=function(e,t){"function"===typeof t?t=t():null!==t&&void 0!==t||(t=""),r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(Array.isArray(e))for(var o=0;o<e.length;o++)i(e[o].name,e[o].value);else for(n in e)e.hasOwnProperty(n)&&qr(n,e[n],t,i);return r.join("&").replace(/%20/g,"+")},Vr=function(e){return"undefined"!==typeof FormData&&e instanceof FormData},Yr=/^http/,Gr=/(^\w+):\/\//,Zr=/^(20\d|1223)$/,Xr="readyState",Qr="Content-Type",Kr="X-Requested-With",$r="XMLHttpRequest",Jr="XDomainRequest",ei={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:$r,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}},ti=function(){function e(t){var n;Object(u.a)(this,e),this.options=void 0,this.headNode=void 0,this.request=void 0,this.isAborted=!1,this.isTimeout=!1,this.timeout=void 0,this.callbackData=void 0,this.callbackPrefix="request_"+new Date,this.uuid=0,this.promise=void 0,this.__resolve=void 0,this.__reject=void 0,"string"===typeof t&&(t={url:t});var r=t.url;G()(r,"//")&&(r=window.location.protocol+r),this.options=Object(d.a)(Object(d.a)(Object(d.a)({},ei),t),{},{url:r,context:t.context||window,doc:t.doc||at(),jsonpCallback:t.jsonpCallback||"callback",method:t.method||"GET"}),this.headNode=null===(n=this.options.doc)||void 0===n?void 0:n.getElementsByTagName("head")[0],this.initPromise(),this.init()}return Object(h.a)(e,[{key:"initPromise",value:function(){var e=this;this.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n})).catch((function(){}))}},{key:"init",value:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,this.options.timeout&&(this.timeout=setTimeout((function(){var t;e.isTimeout=!0,null===(t=e.request)||void 0===t||t.abort()}),this.options.timeout));this.getRequest((function(t){e.triggerSuccess(t)}),(function(t,n){e.triggerError(t,n)})).then((function(t){e.request=t}))}},{key:"abort",value:function(){var e;null===(e=this.request)||void 0===e||e.abort()}},{key:"defaultXHR",value:function(){var e=this.options,t=e.context,n=e.crossOrigin;if(t){if(!0===n){var r=t[$r]?new t[$r]:null;if(r&&"withCredentials"in r)return r;if(t[Jr])return new t[Jr];throw new Error("Browser does not support cross-origin requests")}return t[$r]?new t[$r]:new t.ActiveXObject("Microsoft.XMLHTTP")}}},{key:"succeed",value:function(){var e,t,n,r=this.options,i=r.url,o=r.context,a=Gr.exec(i),s=a?a[1]:"";return s||(s=(null===o||void 0===o?void 0:o.location.protocol)||""),Yr.test(s)?Zr.test((null===(e=this.request)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.toString())||""):!!(null===(n=this.request)||void 0===n?void 0:n.response)}},{key:"noop",value:function(){}},{key:"handleReadyState",value:function(e,t){return this.isAborted?t("Request is aborted",this.request):this.isTimeout?t("Request is aborted: timeout",this.request):void(this.request&&4===this.request[Xr]&&(this.request.onreadystatechange=this.noop,this.succeed()?e(this.request):t(this.request.statusText,this.request)))}},{key:"setHeaders",value:function(e,t){t.Accept=t.Accept||ei.accept[this.options.type||"*"],this.options.crossOrigin||t[Kr]||(t[Kr]=ei.requestedWith),t[Qr]||Vr(this.options.data)||(t[Qr]=this.options.contentType||ei.contentType),Object.keys(t).forEach((function(n){e.setRequestHeader(n,t[n])}))}},{key:"setCredentials",value:function(e){"undefined"!==typeof this.options.withCredentials&&"undefined"!==typeof e.withCredentials&&(e.withCredentials=!!this.options.withCredentials)}},{key:"generalCallback",value:function(e){this.callbackData=e}},{key:"getCallbackPrefix",value:function(e){return this.callbackPrefix+"_"+e}},{key:"handleJsonp",value:function(e,t,n){var r,i=this,o=this.options,a=o.jsonpCallback,s=o.jsonpCallbackName,l=o.doc,c=o.context;if(l&&c){var d=this.uuid++,u=a||"callback",h=s||this.getCallbackPrefix(d),p=new RegExp("((^|\\?|&)"+u+")=([^&]+)"),f=e.match(p),v=l.createElement("script"),g=0,m=-1!==navigator.userAgent.indexOf("MSIE 10.0");return f?"?"===f[3]?e=e.replace(p,"$1="+h):h=f[3]:e=Ur(e,u+"="+h),c[h]=this.generalCallback,v.type="text/javascript",v.src=e,v.async=!0,"undefined"===typeof v.onreadystatechange||m||(v.htmlFor=v.id="_request_"+d),v.onload=v.onreadystatechange=function(){var e;return!(v[Xr]&&"complete"!==v[Xr]&&"loaded"!==v[Xr]||g)&&(v.onload=v.onreadystatechange=null,v.onclick&&v.onclick(),t(i.callbackData),i.callbackData=void 0,null===(e=i.headNode)||void 0===e||e.removeChild(v),g=1,!0)},null===(r=this.headNode)||void 0===r||r.appendChild(v),{abort:function(){var e;v.onload=v.onreadystatechange=null,n("Request is aborted: timeout"),i.callbackData=void 0,null===(e=i.headNode)||void 0===e||e.removeChild(v),g=1}}}}},{key:"getRequest",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,i,o,a,c,d,u,h,p,f,v,g,m,b,y,w,k=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(null===(r=this.options.method)||void 0===r?void 0:r.toUpperCase())||"GET",a=this.options,c=a.processData,d=a.traditional,u=a.type,h=a.context,p=a.xhr,f=a.async,v=a.before,h){e.next=4;break}return e.abrupt("return",Promise.resolve(void 0));case 4:if(g=this.options.url,"function"!==typeof(m=this.options.data)){e.next=10;break}return e.next=9,m();case 9:m=e.sent;case 10:if(((null===(i=this.options.contentType)||void 0===i?void 0:i.indexOf("json"))||-1)>-1&&"object"===Object(l.a)(m)&&(m=JSON.stringify(m)),m=!1!==c&&m&&"string"!==typeof m&&!Vr(m)?Wr(m,d||ei.traditional):m||null,b=void 0,y=!1,"jsonp"!==u&&"GET"!==o||!m||(g=Ur(g,m),m=null),"jsonp"!==u){e.next=17;break}return e.abrupt("return",Promise.resolve(this.handleJsonp(g,t,n)));case 17:if("function"!==typeof(w=this.options.headers||{})){e.next=22;break}return e.next=21,w();case 21:w=e.sent;case 22:if(b=("function"===typeof p?p(this.options):p)||this.defaultXHR()){e.next=25;break}return e.abrupt("return");case 25:return b.open(o,g,!1!==f),this.setHeaders(b,w),this.setCredentials(b),h[Jr]&&b instanceof h[Jr]?(b.onload=t,b.onerror=function(){n("http error",b)},b.onprogress=this.noop,y=!0):b.onreadystatechange=function(){k.handleReadyState(t,n)},v&&v(b),y?setTimeout((function(){var e;null===(e=b)||void 0===e||e.send(m)}),200):b.send(m),e.abrupt("return",Promise.resolve(b));case 32:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getType",value:function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}},{key:"triggerSuccess",value:function(e){var t=this.options,n=t.dataFilter,r=t.context,i=t.success;if(r){var o=this.options.type,a=(n||ei.dataFilter)(e.responseText,o);o||(o=e&&this.getType(e.getResponseHeader("Content-Type")));var s="jsonp"!==o?this.request:e;try{s.responseText=a}catch(l){}if(a)switch(o){case"json":try{s=r.JSON.parse(a)}catch(c){return this.triggerError("Could not parse JSON in response",s)}break;case"html":s=a;break;case"xml":s=s.responseXML&&s.responseXML.parseError&&s.responseXML.parseError.errorCode&&s.responseXML.parseError.reason?null:s.responseXML}i&&i(s),this.triggerComplete(s),this.__resolve&&this.__resolve(s)}}},{key:"triggerError",value:function(e,t){var n=this.options.error,r=new Error(e);r.xhr=t,n&&n(r),this.triggerComplete(r),this.__reject&&this.__reject(r)}},{key:"triggerComplete",value:function(e){var t=this.options.complete;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,t&&t(e)}},{key:"retry",value:function(){this.initPromise(),this.init()}},{key:"then",value:function(e,t){var n;return null===(n=this.promise)||void 0===n?void 0:n.then(e,t)}},{key:"always",value:function(e){var t;return null===(t=this.promise)||void 0===t?void 0:t.then(e,e)}},{key:"fail",value:function(e){var t;return null===(t=this.promise)||void 0===t?void 0:t.then(void 0,e)}},{key:"catch",value:function(e){return this.fail(e)}}]),e}();ti.setup=function(e){Object.keys(e).forEach((function(t){ei[t]&&(ei[t]=e[t])}))};var ni={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},ri=function(e){var t;if("string"===typeof e)return null!==(t=e.split(".").pop())&&void 0!==t?t:"";var n,r=ni[e.type]?ni[e.type][0]:"";!r&&"name"in e&&(r=null!==(n=e.name.split(".").pop())&&void 0!==n?n:"");return r},ii=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He?2:10;return e<1048576?X()(e,{base:t,exponent:1,round:0}):X()(e,{base:t,exponent:2,round:1})},oi=function(){function e(t){Object(u.a)(this,e),this.options=void 0,this.uploadingFiles=[],this.options=t}return Object(h.a)(e,[{key:"createUid",value:function(e){return Date.now()+"-"+e}},{key:"request",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=12;break}return(i=t[r]).uid||(i.uid=this.createUid(r)),e.next=6,this.handleBefore(i,t);case 6:if(e.t0=e.sent,!1!==e.t0){e.next=9;break}t.splice(r,1);case 9:r++,e.next=1;break;case 12:this.upload(t,n);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r=this,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:"file",t.forEach(function(){var e=Object(c.a)(s.a.mark((function e(t){var i,o,a,l,c,d,u,h,p,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new FormData).append(n,t,t.name),t.data&&Object.keys(t.data).forEach((function(e){i.append(e,t.data[e])})),o=r.options,a=o.url,l=o.onUploading,c=o.onSuccess,d=o.onError,u=o.withCredentials,h=o.crossOrigin,p=o.headers,"function"!==typeof(f=r.options.data)){e.next=9;break}return e.next=8,f();case 8:f=e.sent;case 9:return f&&Object.keys(f).forEach((function(e){i.append(e,f[e])})),e.next=12,new ti({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&l&&l(t,{percent:parseInt((e.loaded/e.total*100).toString(),10)})}),!1),e},url:a,data:i,contentType:r.options.contentType,type:r.options.type||"json",withCredentials:u,crossOrigin:h,headers:p,success:function(e){c&&c(e,t)},error:function(e){d&&d(e,t)},method:"POST",processData:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleBefore",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,i,o,a,l,d,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,i=t.uid,o=t.name,a=t.size,l=ri(t),d=this.options.onBefore,e.t0=d,!e.t0){e.next=9;break}return e.next=7,d(t);case 7:e.t1=e.sent,e.t0=!1===e.t1;case 9:if(!e.t0){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",new Promise((function(e,d){var h=new FileReader;h.addEventListener("load",(function(){u.uploadingFiles[i]={uid:i,src:h.result,name:o,size:a,type:r,ext:l},n.every((function(e){return!!u.uploadingFiles[e.uid]}))?Promise.all(Object(S.a)(n.map((function(e){return new Promise(function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.options.onReady){t.next=3;break}return t.next=3,u.options.onReady(u.uploadingFiles[e.uid],e);case 3:n(!0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})))).then((function(){e(!0)})):e(!0)}),!1),h.addEventListener("error",(function(){d(!1)})),h.readAsDataURL(t)})));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ai=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"ajax",value:function(e){return new ti(e)}},{key:"upload",value:function(e,t,n){return new oi(e).request(t,n)}},{key:"getFiles",value:function(e){var t=e||{},n=t.event,r=t.accept,i=t.multiple;r=r||"*",i=void 0===Object(l.a)(i)?100:i;var o=document.createElement("input");o.type="file",o.accept=r,o.style.display="none",o.multiple=!1!==i;var a=function e(){o.remove(),document.removeEventListener("mousedown",e)};return new Promise((function(e){var t=function t(){for(var n=[],r=0;r<((null===(s=o.files)||void 0===s?void 0:s.length)||0);r++){var s;if("number"===typeof i&&r>i)break;n.push(o.files[r])}o.removeEventListener("change",t),a(),e(n)};o.addEventListener("change",t),document.body.appendChild(o),n||(n=document.createEvent("MouseEvents")).initEvent("click",!0,!0);try{if(o.dispatchEvent)o.dispatchEvent(n);else{if(!o.fireEvent)throw"";o.fireEvent(n)}document.addEventListener("mousedown",a)}catch(r){o.removeEventListener("change",t),a(),e([])}}))}}]),e}(),si=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e,t){var n=this.engine,r=n.change,i=n.command,o=n.list,a=n.node,s=r.range.get(),l=this.engine.block;if(s.collapsed){var c=l.closest(s.startNode);if("li"===c.name&&o.isFirst(s))return e.isDelete||(e.preventDefault(),i.execute(o.getPluginNameByNode(c))),!1}else{var d=s.startNode,u=s.endNode,h=l.closest(d),p=l.closest(u);if("li"===h.name||"li"===p.name){e.preventDefault();var f=s.cloneRange(),v=d.first(),g=d.isCard()?d:v;if((null===g||void 0===g?void 0:g.isCard())&&o.isEmptyItem(h)){var m,b=h.parent();h.remove(),b&&a.isCustomize(b)&&0===(null===(m=b.get())||void 0===m?void 0:m.childNodes.length)&&b.remove()}var y,w="li"===h.name?h.parent():null,k="li"===p.name?p.parent():null;if("li"===h.name&&o.isFirst(s)&&f.setStartBefore(h),"li"===p.name&&l.isLastOffset(s,"end")&&f.setEndAfter(p),r.delete(f,t),h.inEditor()&&!h.equal(p)&&p.inEditor()&&"li"===p.name){f.shrinkToElementNode().shrinkToTextNode();var x=f.createSelection();h.append(p.children()),p.remove(),x.move()}if("li"===h.name)a.isCustomize(h)&&0===(null===(y=h.get())||void 0===y?void 0:y.childNodes.length)&&h.remove();var O=function(e){if(a.isList(e)){var t,n=(null===(t=e.get())||void 0===t?void 0:t.childNodes)||[];if(0==n.length)e.remove();else if(1===n.length){var r=e.first();(null===r||void 0===r?void 0:r.isCursor())&&(e.after(r),e.remove())}}};return w&&w.length>0&&a.isList(w)&&O(w),k&&k.length>0&&a.isList(k)&&O(k),o.addBr(h),h.equal(p)||o.addBr(p),s.setStart(f.startContainer,f.startOffset),s.collapse(!0),o.merge(),r.isEmpty()&&r.initValue(s),r.apply(s),!1}}if(l.isFirstOffset(s,"start")){var C=l.closest(s.startNode);if(a.isList(C)){var E=C.first();if(!E||E.isText())return e.preventDefault(),r.mergeAfterDelete(C),!1;C=E,s.setStart(C[0],0),s.collapse(!0),r.range.select(s)}if("li"===C.name){var j;if(a.isCustomize(C))return;e.preventDefault();var M=C.closest("ul");return(null===(j=C.parent())||void 0===j?void 0:j.isEditable())?(r.mergeAfterDelete(C),!1):(M.length>0?i.execute(o.getPluginNameByNode(M)):r.unwrap(C),!1)}return!0}}}]),e}(),li=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.backspace=void 0,this.engine=t,this.backspace=new si(t)}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.command,i=t.list,o=n.range.get();o.shrinkToElementNode();var a=this.engine.block.closest(o.startNode),s=this.engine.block.closest(o.endNode);if("li"===a.name||"li"===s.name){o.collapsed||(this.backspace.trigger(e,a.name!==s.name),o=n.range.get()),e.preventDefault();var l=i.getPluginNameByNode(a);if(i.isLast(o)&&i.isFirst(o))r.execute(l);else{this.engine.block.split(),o=n.range.get();var c=this.engine.block.closest(o.endNode),d=i.getPlugins().find((function(e){return l===e.constructor.pluginName}));if(!d)return;if(d.cardName){var u=c.prev();u&&(i.addCardToCustomize(u,d.cardName),i.addBr(u)),i.addCardToCustomize(c,d.cardName),i.addBr(c);var h=c.next();h&&(i.addCardToCustomize(h,d.cardName),i.addBr(h))}i.merge(void 0,o),i.addBr(o.startNode.closest("ul")),o.setStart(c,this.engine.node.isCustomize(c)?1:0),o.collapse(!0).shrinkToTextNode(),n.apply(o)}return o.scrollIntoView(),!1}return!0}}]),e}(),ci=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.CUSTOMZIE_UL_CLASS="data-list",this.CUSTOMZIE_LI_CLASS="data-list-item",this.INDENT_KEY="data-indent",this.STYLE_POSITION_NAME="list-style-position",this.STYLE_POSITION_VALUE="inside",this.backspaceEvent=void 0,this.editor=t}return Object(h.a)(e,[{key:"init",value:function(){var e=this,t=this.editor;if(ct(t)){var n,r,i=new li(t);null===(n=t.typing.getHandleListener("enter","keydown"))||void 0===n||n.on((function(e){return i.trigger(e)})),this.backspaceEvent=new si(t),null===(r=t.typing.getHandleListener("backspace","keydown"))||void 0===r||r.on((function(t){var n;return null===(n=e.backspaceEvent)||void 0===n?void 0:n.trigger(t)}))}}},{key:"isEmptyItem",value:function(e){var t=e.children().toArray().filter((function(e){return!e.isCursor()})),n=this.editor.node;return"li"===e.name&&(n.isEmpty(e)||(1===t.length?n.isCustomize(e)&&t[0].isCard()||"br"===t[0].name:2===t.length&&n.isCustomize(e)&&!!t[0].isCard()&&"br"===t[1].name))}},{key:"isSame",value:function(e,t){if(e.name!==t.name)return!1;var n=this.editor.node;return n.isCustomize(e)===n.isCustomize(t)&&(parseInt(e.attributes(this.INDENT_KEY),10)||0)===(parseInt(t.attributes(this.INDENT_KEY),10)||0)}},{key:"isSpecifiedType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ul",n=arguments.length>2?arguments[2]:void 0,r=this.editor.node,i=!0;return e.forEach((function(e){var o;if(-1!==["li","p"].indexOf(e.name)||!(e.name===t||e.find(t).length>0))switch(e.name){case"li":if(n){var a,s,l=e.first();(null===(a=l)||void 0===a?void 0:a.isCursor())&&(l=l.next()),i=i&&r.isCustomize(e)&&((null===(s=l)||void 0===s?void 0:s.attributes(be))||"")===n}else i=i&&!r.isCustomize(e);break;case"p":e.parent()&&"li"!==(null===(o=e.parent())||void 0===o?void 0:o.name)&&(i=!1);break;default:i=!1}})),i}},{key:"getPlugins",value:function(){var e=[],t=this.editor.plugin;return Object.keys(t.components).forEach((function(n){var r=t.components[n];r.isCurrent&&e.push(r)})),e}},{key:"getPluginNameByNode",value:function(e){var t=this,n=e.name,r=function(e){var n="";return t.getPlugins().some((function(t){if(t.isCurrent(e))return n=t.constructor.pluginName,!0})),n};return this.editor.node.isCustomize(e)?r(e):"li"===n&&e.parent()?r(e.parent()):""}},{key:"getPluginNameByNodes",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n],i=r.parent(),o="";switch(r.name){case"li":case"ul":case"ol":o=this.getPluginNameByNode(e[n]);break;case"p":if(!i||"li"!==i.name)return"";o=this.getPluginNameByNode(i);break;default:if(this.editor.node.isBlock(r)&&r.find("ul,ol").length>0)break;return""}if(t&&o&&t!==o)return"";t=o}return t}},{key:"unwrapCustomize",value:function(e){var t=this.editor.node;if(t.isCustomize(e))switch(e.name){case"li":if(t.isCustomize(e)){var n=e.first();(null===n||void 0===n?void 0:n.isCard())&&n.remove()}return e.removeAttributes("class"),e;case"ul":return e.removeAttributes("class"),e;default:return e}return e}},{key:"unwrap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:It("<p />"),r=0,i=this.editor,o=i.node,a=i.schema.data.globals.block||{},s=a.style||{};e.forEach((function(e){if(t.unwrapCustomize(e),o.isList(e)&&(r=parseInt(e.attributes(t.INDENT_KEY),10)||0,o.unwrap(e)),"li"===e.name){var i=o.clone(n,!1,!1);0!==r&&i.css("text-indent",2*r+"em"),e.removeAttributes(t.INDENT_KEY);var l=e.attributes();Object.keys(l).forEach((function(e){e!==te&&"id"!==e&&a[e]&&i.attributes(e,l[e])}));var c=e.css();c["text-align"]&&t.addAlign(i,c["text-align"]),delete c["text-align"],c[t.STYLE_POSITION_NAME]="",Object.keys(c).forEach((function(e){s[e]||(c[e]="")})),i.css(c),o.replace(e,i)}}))}},{key:"normalize",value:function(e){var t=this.editor;if(!ct(t))return[];var n=t.change,r=t.block,i=t.node;e=e||n.range.get();var o=r.getBlocks(e),a=[];o.forEach((function(e,t){var n=e.parent();if("p"===e.name){if("li"===(null===n||void 0===n?void 0:n.name))return 0===t&&a.push(n),void i.unwrap(e);if(n&&["ul","ol"].indexOf(n.name)>-1)return e=i.replace(e,It("<li />")),void a.push(e)}if("li"===e.name&&"li"===(null===n||void 0===n?void 0:n.name))return 0===t&&a.push(n),void i.unwrap(e);["ul","ol"].indexOf(e.name)>-1&&"li"===(null===n||void 0===n?void 0:n.name)?i.unwrap(e):a.push(e)}));var s=e.endNode.closest("li");return a.some((function(e){return e[0]===s[0]}))||a.push(s),a}},{key:"split",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=t.node,i=e||n.range.toTrusty(),o=this.normalize(e);if(o.length>0&&("li"===o[0].name||"li"===o[o.length-1].name)){var a,s,l,c,d=i.createSelection(),u=o[0],h=o[o.length-1],p=[],f=[];if(u.prev()){a=u.parent();for(var v=0;o[v]&&"li"===o[v].name;)p.push(o[v]),v+=1}if(h.next()){s=h.parent();for(var g=h.next();g&&"li"===g.name;)f.push(g),g=g.next()}if(f.length>0&&s&&(l=r.clone(s,!1,!1),f.forEach((function(e){var t;null===(t=l)||void 0===t||t.append(e[0])})),s.after(l)),p.length>0&&a&&(c=r.clone(a,!1,!1),p.forEach((function(e){var t;null===(t=c)||void 0===t||t.append(e[0])})),a.after(c)),a&&s&&s.equal(a)&&"ol"===a.name){var m=(parseInt(a.attributes("start"),10)||1)+a.find("li").length;l.attributes("start",m)}d.move()}e||n.apply(i)}}},{key:"merge",value:function(e,t){var n=this,r=this.editor;if(ct(r)){var i=r.change,o=r.block,a=r.node,s=t||i.range.toTrusty(),l=s.cloneRange(),c=e?void 0:l.shrinkToElementNode().createSelection();if((e=e||o.getBlocks(s)).forEach((function(e){if(e=e.closest("ul,ol"),a.isList(e)){var t=e.prev(),r=e.next();t&&n.isSame(t,e)&&(a.merge(t,e),e=t),r&&n.isSame(r,e)&&a.merge(e,r)}})),(e=o.getBlocks(s)).length>0){var d=e[0].closest("ul,ol");this.addStart(d)}null===c||void 0===c||c.move(),t||void 0===c||i.apply(l)}}},{key:"addStart",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=t.node;if(!e){var i=t.block.getBlocks(n.range.get());if(0===i.length)return;e=i[0].closest("ul,ol")}if(e&&r.isList(e)){for(var o=[],a=parseInt(e.attributes(this.INDENT_KEY),10)||0,s=e.prev();s&&r.isList(s);){if("ol"===s.name){var l=parseInt(s.attributes(this.INDENT_KEY),10)||0,c=parseInt(s.attributes("start"),10)||1,d=s.find("li").length;if(0===l){o[l]=c+d;break}l<=a&&(a=l,o[l]=o[l]||c+d)}else a=parseInt(s.attributes(this.INDENT_KEY),10)||0;s=s.prev()}for(var u=e;u;){if(r.isList(u)){var h=parseInt(u.attributes(this.INDENT_KEY),10)||0,p=parseInt(u.attributes("start"),10),f=u.find("li").length;if("ol"===u.name){var v=o[h];h>0?((v=v||1)>1?u.attributes("start",v):u.removeAttributes("start"),o[h]=v+f):v&&v!==p?(v>1?u.attributes("start",v):u.removeAttributes("start"),o[h]=v+f):(o[h]=(p||1)+f,o=o.slice(0,h+1))}}else o=[];var g=u.next();if(!g)break;u=g}}}}},{key:"addIndent",value:function(e,t,n){this.editor.node.isList(e)&&(t=this.getIndent(e)+(t<0?-1:1),n&&t>n&&(t=n),t<1?e.removeAttributes(this.INDENT_KEY):e.attributes(this.INDENT_KEY,t))}},{key:"getIndent",value:function(e){return this.editor.node.isList(e)&&parseInt(e.attributes(this.INDENT_KEY),10)||0}},{key:"addAlign",value:function(e,t){var n;"li"===e.name&&(t&&"left"!==t?(["center","right"].indexOf(t)>-1&&e.css(Object(O.a)({},this.STYLE_POSITION_NAME,this.STYLE_POSITION_VALUE)),e.css({"text-align":t})):e.css((n={},Object(O.a)(n,this.STYLE_POSITION_NAME,""),Object(O.a)(n,"text-align",""),n)))}},{key:"addCardToCustomize",value:function(e,t,n){var r,i;if(wt(e)&&(e=It(e)),"li"===e.name){var o=e.first();if(!((null===o||void 0===o?void 0:o.isBlockCard())||(null===o||void 0===o?void 0:o.isCard())&&o.attributes(be)===t)){var a,s=this.editor,l=s.card,c=l.create(t,{value:n}),d=Kt.create(s),u=It("<br />");if((null!==(r=null===(i=e.get())||void 0===i?void 0:i.childNodes.length)&&void 0!==r?r:0)>0)null===(a=e.first())||void 0===a||a.before(u);else e.append(u);d.select(u,!0),l.insertNode(d,c);var h=e.last();return"br"===(null===h||void 0===h?void 0:h.name)&&h.remove(),c}}}},{key:"addReadyCardToCustomize",value:function(e,t,n){if(wt(e)&&(e=It(e)),"li"===e.name){var r=e.first();if(!((null===r||void 0===r?void 0:r.isBlockCard())||(null===r||void 0===r?void 0:r.isCard())&&r.attributes(be)===t)){var i=It("<span />");return e.prepend(i),this.editor.card.replaceNode(i,t,n),i}}}},{key:"addBr",value:function(e){var t=this,n=this.editor.node;if(n.isList(e))e.find("li").each((function(e){t.addBr(It(e))}));else if(n.isCustomize(e)){for(var r=e.last();null===(i=r)||void 0===i?void 0:i.isCursor();){var i;r=r.prev()}if(r){var o,a=e.children();if(1===a.length&&r.isCard())return void e.append(It("<br />"));if(a.length>2&&"br"===r.name)return void("br"!==(null===(o=r.prev())||void 0===o?void 0:o.name)&&r.remove());for(;r;){if(r.equal(e.first())&&(r.isCard()||""===r.text()))return void e.append(It("<br />"));if(r.type===Node.TEXT_NODE){if(""!==r.text())return;r=r.prev()}else if(r.type===Node.ELEMENT_NODE){if(!n.isMark(r)||""!==r.text())return;r=e.prev()}else r=r.prev()}}else e.append(It("<br />"))}}},{key:"insert",value:function(e,t){var n,r,i,o=this,a=this.editor;if(ct(a)&&0!==e.childNodes.length){var s=a.change,l=a.node,c=a.block,d=t||s.range.toTrusty();d.collapsed||s.delete(d,!0,!0);var u=d.cloneRange().shrinkToElementNode(),h=u.startNode,p=u.startOffset,f=h;if(l.isList(h)&&(f=h.children().eq(p)),0!==(null===(r=f=null===(n=f)||void 0===n?void 0:n.closest("li",(function(e){return l.isBlock(e)&&"LI"!==e.nodeName?void 0:e.parentElement||void 0})))||void 0===r?void 0:r.length)&&"li"===(null===(i=f)||void 0===i?void 0:i.name)){d.shrinkToElementNode().shrinkToTextNode(),c.split(d);var v=d.createSelection("list-insert");this.split(d);var g=function(e){c.merge(e),o.merge(void 0,e),null===v||void 0===v||v.move(),t||s.apply(e)},m=It(e).toArray().some((function(e){return l.isBlock(e)}))?It(e.childNodes[0]):It("<p></p>").append(It(e)),b=d.startNode.closest("ul,ol");if(b&&l.isList(b)){var y=d.startNode.closest("li");if(l.isCustomize(b)){var w,k,x=null===(w=b.prev())||void 0===w||null===(k=w.first())||void 0===k?void 0:k.first();if(x){var O=a.card.find(x);O&&this.addCardToCustomize(y,O.name,O.getValue())}}var C=!l.isList(m)||this.isSame(b,m);if(C){for(var E,j;l.isBlock(m);){var M=m.first();if(!M||!l.isBlock(M))break;m=M}var N=null===(E=y.parent())||void 0===E||null===(j=E.prev())||void 0===j?void 0:j.last();if("li"===(null===N||void 0===N?void 0:N.name)){var S,T,_=null===N||void 0===N?void 0:N.children();if(null===_||void 0===_||_.each((function(e,t){var n;"BR"===e.nodeName&&(null===(n=_.eq(t))||void 0===n||n.remove())})),l.isCustomize(m))null===(S=m.first())||void 0===S||S.remove();if(m.isBlockCard())null===(T=N.parent())||void 0===T||T.after(m);else null===N||void 0===N||N.append(l.isBlock(m)?m.children():m),N&&this.addBr(N),l.isBlock(m)&&m.remove()}}else{var A,I,D,z,L,R=null===(A=y.parent())||void 0===A||null===(I=A.prev())||void 0===I?void 0:I.last();if(R&&(l.isEmpty(R)||this.isEmptyItem(R)))R.remove(),0===(null===(D=R.parent())||void 0===D||null===(z=D.get())||void 0===z?void 0:z.childNodes.length)&&(null===(L=R.parent())||void 0===L||L.remove())}if(0!==e.childNodes.length){var B=d.startNode.closest("li").parent();if(B){for(var P=e.childNodes.length,F=It(e.childNodes[P-1]),H=(!l.isList(F)||this.isSame(b,F))&&!F.isBlockCard(),q=!1,U=0;U<e.childNodes.length;U++){var W=It(e.childNodes[U]);if(l.isList(e.childNodes[U])&&!this.isSame(b,W)||W.isBlockCard()){q=!0;break}}for(var V=B.prev(),Y=V?[V]:[],G=0;G<(H&&!q?P-1:P);G++){var Z=It(e.childNodes[0]);if(l.isList(Z)){var X;if(0===(null===(X=Z.get())||void 0===X?void 0:X.childNodes.length)){Z.remove();continue}B.before(Z),Y.push(Z)}else{if(q){null===B||void 0===B||B.before(Z);continue}if(l.isBlock(Z)&&Z.allChildren().forEach((function(e){e.type!==at().TEXT_NODE&&l.isBlock(e)&&l.unwrap(e)})),l.isCustomize(B)){var Q,K=null===(Q=B.first())||void 0===Q?void 0:Q.first();if(K&&K.isCard()){var $=K.attributes(be)||K.attributes("name"),J=this.toCustomize(Z,$);J&&(Array.isArray(J)?J:[J]).forEach((function(e){null===B||void 0===B||B.before(e)}))}}else{var ee=this.toNormal(Z,B.name);(Array.isArray(ee)?ee:[ee]).forEach((function(e){a.node.isList(e)&&(null===B||void 0===B||B.before(e))}))}}}if(Y.length>0&&this.merge(Y),!C&&l.isEmptyWidthChild(B)&&B.remove(),0!==e.childNodes.length){for(;l.isBlock(F);){var te=F.last();if(!te||!l.isBlock(te))break;F=te}var ne=y;if(ne){var re;if(!(null===(re=F.parent())||void 0===re?void 0:re.fragment))for(var ie=ne,oe=F.prev();oe&&oe.length>0;){var ae=oe.prev();ie.before(oe),ie=oe,oe=ae}if("br"===F.name)F.remove();else{var se=F.children();if(se.each((function(e,t){var n;"BR"===e.nodeName&&(null===(n=se.eq(t))||void 0===n||n.remove())})),l.isCustomize(ne)){var le;if(l.isCustomize(F)){var ce=F.first();(null===ce||void 0===ce?void 0:ce.isCard())&&ce.remove()}null===(le=ne.first())||void 0===le||le.after(l.isBlock(F)?F.children():F)}else ne.prepend(l.isBlock(F)?F.children():F);this.addBr(ne),l.isBlock(F)&&F.remove()}}g(d)}else{if(l.isEmpty(y)||this.isEmptyItem(y)){var de,ue,he,pe,fe=null===(de=y.parent())||void 0===de?void 0:de.prev();y.find("br").remove(),l.isCustomize(y)&&(null===(ue=y.first())||void 0===ue||ue.remove()),fe&&l.isList(fe)?null===(he=fe.last())||void 0===he||he.append(y.children()):fe&&fe.append(y.children()),null===(pe=y.parent())||void 0===pe||pe.remove()}g(d)}}else g(d)}else{var ve=y.parent();if(m.isBlockCard()){if(ve){var ge;this.isEmptyItem(y)&&1===(null===(ge=ve.get())||void 0===ge?void 0:ge.childNodes.length)&&ve.remove();var me=[ve],ye=m.prev();ye&&l.isList(ye)&&me.push(ye),this.merge(me)}}else{var we,ke,xe;if(l.isCustomize(y))null===(xe=y.first())||void 0===xe||xe.remove();y.find("br").remove(),null===ve||void 0===ve||null===(we=ve.prev())||void 0===we||null===(ke=we.last())||void 0===ke||ke.append(y.children()),null===ve||void 0===ve||ve.remove()}g(d)}}else g(d)}}}},{key:"blockToItem",value:function(e,t,n,r){var i=It("<li></li>"),o=this.editor,a=o.node,s=o.schema;if(!a.isList(t))return t;var l=$e(e.css("text-indent"))/2,c=s.data.globals.block||{},d=e.attributes();Object.keys(d).forEach((function(e){e!==te&&"id"!==e&&c.name&&i.attributes(e,d[e])}));var u=c.style||{},h=e.css();return h["text-align"]&&this.addAlign(i,h["text-align"]),delete h["text-align"],delete h[this.STYLE_POSITION_NAME],Object.keys(h).forEach((function(e){u[e]||delete h[e]})),i.css(h),e=a.replace(e,i),n&&(e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,n,r)),l&&t.attributes(this.INDENT_KEY,l),a.wrap(e,t)}},{key:"toCustomize",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ul",o=this.editor.node;if(Array.isArray(e)){var a=[];return e.forEach((function(e){o.isCustomize(e)&&r.unwrapCustomize(e),a=a.concat(r.toCustomize(e,t,n,i))})),a}var s=It("<".concat(i,' class="').concat(this.CUSTOMZIE_UL_CLASS,'"/>'));switch(e.name){case"li":return e.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(e,t,n),e;case"ul":case"ol":return s.attributes(e.attributes()),e=o.replace(e,s);default:if("p"===e.name||o.isNestedBlock(e)&&!e.isBlockCard()){var l;if("li"===(null===(l=e.parent())||void 0===l?void 0:l.name))return o.unwrap(e),e;e=this.blockToItem(e,s,t,n)}return e}}},{key:"toNormal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ul",r=arguments.length>2?arguments[2]:void 0,i=this.editor.node;if(Array.isArray(e)){var o=[];return e.forEach((function(e){var i=t.toNormal(e,n,r);o=o.concat(i)})),o}this.unwrapCustomize(e);var a=It("<".concat(n," />"));switch(e.name){case"li":case n:return e;case"ol":case"ul":return a.attributes(e.attributes()),"ul"===a.name&&a.removeAttributes("start"),e=i.replace(e,a);default:if("p"===e.name||i.isNestedBlock(e)&&!e.isBlockCard()){var s;if("li"===(null===(s=e.parent())||void 0===s?void 0:s.name))return i.unwrap(e),e;e=this.blockToItem(e,a),r&&e.attributes("start",r)}return e}}},{key:"isFirst",value:function(e){var t=e.startNode,n=e.startOffset,r=e.cloneRange(),i="li"===t.name?t:t.closest("li");if(!i[0])return!1;r.select(i,!0),r.setEnd(t[0],n);var o=r.cloneContents();if(!o.firstChild)return!0;var a=It(o.firstChild),s=It(o.lastChild||[]);if(1===o.childNodes.length&&"br"===a.name)return!0;if(1===o.childNodes.length&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&a.isCard())return!0;var l=this.editor.node;if(2===o.childNodes.length&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&a.isCard()&&l.isEmpty(s))return!0;var c=It("<div />");return c.append(o),l.isEmpty(c)}},{key:"isLast",value:function(e){var t=e.endNode,n=e.endOffset,r=e.cloneRange(),i="li"===t.name?t:t.closest("li");if(!i[0])return!1;r.select(i,!0),r.setStart(t,n);var o=r.cloneContents();if(!o.firstChild)return!0;var a=It(o.firstChild),s=It(o.lastChild||[]);if(1===o.childNodes.length&&"br"===a.name)return!0;if(1===o.childNodes.length&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&a.isCard())return!0;var l=this.editor.node;if(2===o.childNodes.length&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&a.isCard()&&l.isEmpty(s))return!0;var c=It("<div />");return c.append(o),l.isEmpty(c)}}]),e}(),di=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,i=t.block,o=n.range.get(),a=o.cloneRange().shrinkToTextNode(),s=a.collapsed,l=a.endNode,c=a.startNode,d=a.startOffset,u=a.endOffset;if(s){var h=i.closest(c);if(h.length>0&&r.isEmpty(h))return}if(l.type===Node.TEXT_NODE||c.type===Node.TEXT_NODE){if(!s){var p=l.parent();if(p&&l.type===Node.TEXT_NODE&&r.isMark(p)){var f=l.text().substr(u);if(!/^\u200b$/.test(f))return!0;o.setEnd(l,u+1)}return!0}var v=c.parent();if(v&&c.type===Node.TEXT_NODE&&r.isMark(v)){if(d<1)return!0;var g=c.text().substr(d-1,1);if(!/^\u200b$/.test(g))return!0;if(1===d){var m=v.prev();if(m&&!r.isEmpty(m)){var b=o.cloneRange().select(m,!0).shrinkToTextNode().collapse(!1),y=b.startNode,w=b.startOffset;o.setStart(y,w-1)}else if(!m&&r.isEmpty(v)){var k=v.parent(),x=v.getIndex();v.remove(),k&&o.setStart(k,x<=0?0:x-1)}}else o.setStart(c,d-1);return!0}if((v=c.prev()||void 0)&&c.type===Node.TEXT_NODE&&r.isMark(v)){var O=c.text().substr(d-1,1);if(!/^\u200b$/.test(O))return!0;if(1===d){var C=o.cloneRange().select(v,!0).shrinkToTextNode().collapse(!1),E=C.startNode,j=C.startOffset;o.setStart(E,j-1)}else o.setStart(c,d>0?d-1:0)}}return!0}}]),e}(),ui=function(){function e(t){var n=this;Object(u.a)(this,e),this.editor=void 0,this.pluginCaches=new Map,this.findSameParent=function(e,t){if(n.editor.node.isMark(e)){var r=void 0;if(n.compare(e,t,!0))return!0;if(r=e.parent())return n.findSameParent(r,t)}return!1},this.editor=t}return Object(h.a)(e,[{key:"init",value:function(){var e=this,t=this.editor;if(ct(t)){var n,r=new di(t);null===(n=t.typing.getHandleListener("backspace","keydown"))||void 0===n||n.on((function(e){return r.trigger(e)})),t.on("keydown:space",(function(t){return e.triggerMarkdown(t)})),t.on("keydown:enter",(function(t){return e.triggerMarkdown(t)}))}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(ct(n)&&!1!==(null===(t=n.options.markdown)||void 0===t?void 0:t.mode)){var r=n.change,i=r.range.get();if(i.collapsed&&!r.isComposing()){var o=i.cloneRange().shrinkToTextNode(),a=o.startNode,s=o.startOffset,l=a.type===Node.TEXT_NODE?a:a.children().eq(s-1);if(l){var c=i.toPath(),d=l.type===Node.TEXT_NODE?l.text().substr(0,s):l.text(),u=ut(n,"zero"),h=u.renderer,p=u.options,f=u.parseInline(d,{});if(0!==f.length){var v=!1,g="";if(f.forEach((function(e){var t="",r=e.children||[];r.forEach((function(i,o){var a=i.type;!1!==n.trigger("markdown-it-token",{token:e,markdown:u,callback:function(e){t+=e}})?(v||"text"===a||(v=!0),"undefined"!==typeof h.rules[a]?t+=h.rules[a](r,o,p,{},h):t+=h.renderToken(r,o,p)):v=!0})),g+=t})),v){var m=n.node;e.preventDefault(),i.setStart(l[0],0),i.setEnd(l[0],s),r.paste(g,i),r.rangePathBeforeCommand=c,i.collapse(!1),i.enlargeToElementNode();var b=It(g),y=b.last(),w=b.eq(b.length-1);(m.isMark(b)||y&&m.isMark(y)||w&&m.isMark(w))&&m.insertText("\xa0",i),r.range.select(i)}return!v}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.plugin,i=t.schema;if(0!==e.length&&n.isMark(e)){var o=e.get().cloneNode().outerHTML,a=this.pluginCaches.get(o);if(a)return a;for(var s in r.components){var l=r.components[s];if(Or(l)&&e.name===l.tagName){var c=l.schema();if(Array.isArray(c)?c.find((function(t){return i.checkNode(e,t.attributes)})):i.checkNode(e,c.attributes))return this.pluginCaches.set(o,l),l}}return a}}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isMark(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotMark",value:function(e){for(;(this.editor.node.isMark(e)||e.isText())&&!e.isEditable();){var t=e.parent();if(!t)break;e=t}return e}},{key:"compare",value:function(e,t,n){if(e.name!==t.name)return!1;var r=e.attributes();delete r.style,delete r[te];var i=t.attributes();delete i.style,delete i[te];var o=e.css(),a=t.css();delete r.class,delete i.class;var s=e.get().className.trim(),l=t.get().className.trim(),c=""!==s?s.split(/\s+/):[],d=""!==l?l.split(/\s+/):[],u=this.editor.schema,h=u.find((function(t){return t.name===e.name})),p=function(e){for(var t=0;t<h.length;t++){var n=h[t];if(n.attributes&&u.checkValue(n.attributes,"class",e.join(" ").trim()))return n.attributes.class.toString()}return e.join(" ").trim()};return n||(c=c.length>0?[p(c)]:[],d=d.length>0?[p(d)]:[]),Object.keys(r).length===Object.keys(i).length&&(!!Object.keys(r).every((function(e){return n?r[e]===i[e]:!!i[e]}))&&(Object.keys(o).length===Object.keys(a).length&&(!!Object.keys(o).every((function(e){return n?o[e]===a[e]:!!a[e]}))&&(c.length===d.length&&!!c.every((function(e){return-1!==d.indexOf(e)}))))))}},{key:"contain",value:function(e,t){var n=t.attributes(),r=n.style||{};delete n.style;var i=e.attributes(),o=i.style||{};return delete i.style,Object.keys(n).every((function(e){return!!i[e]}))&&Object.keys(r).every((function(e){return!o[e]}))}},{key:"unwrapEmptyMarks",value:function(e,t){var n=this.editor.node;e.allChildren().forEach((function(e){if(n.isEmpty(e)&&n.isMark(e)&&(!t||t(e))){var r=e.children();1===r.length&&r.isText()?e.remove():n.unwrap(e)}}))}},{key:"splitOnCollapsed",value:function(e,t,n){var r=this;if(e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var i=e.startNode,o=i.parent(),a=i.isCard()?i:i.closest(Ee),s=this.editor.node;if((0===a.length||"inline"!==a.attributes(we))&&(s.isMark(i)||o&&s.isMark(o))){var l,c=this.closestNotMark(i),d=e.createSelection(),u=d.getNode(c,"left"),h=void 0,p=void 0,f=[];if(n){wt(n)&&(n=It(n));var v=n.getPath(c.get()),g=c.clone(!0);f=v.slice(1),p=It(g.getChildByPath(v.slice(0,1))),h=d.getNode(g,"right",!1)}else h=d.getNode(c,"right");this.unwrapEmptyMarks(u,(function(e){return!e.isCursor()})),this.unwrapEmptyMarks(h,(function(e){return t&&!Array.isArray(t)&&(t=[t]),!t||0===t.length||!e.isCard()&&t.some((function(t){return r.compare(e,t)}))}));var m=c.children();m.each((function(e,t){var n=m.eq(t);(null===n||void 0===n?void 0:n.isCard())||null===n||void 0===n||n.remove()}));var b=void 0,y=function(e){e.each((function(t,n){var r=e.eq(n);(null===r||void 0===r?void 0:r.isCard())?(b=b?b.next():c.first())&&(e[n]=b[0]):b?(b.after(t),b=r):(b=r,c.prepend(t))}))},w=u.children(),k=w.toArray();y(w);var x=h.children(),O=x.toArray();p&&(n=null===(l=O.find((function(e){return e.equal(p)})))||void 0===l?void 0:l.getChildByPath(f)),y(x),O=x.toArray();var C=It("\u200b",null);if(1===k.length&&"br"===k[0].name&&(k[0].remove(),k.splice(0,1)),1===O.length&&"br"===O[0].name&&(O[0].remove(),O.splice(0,1)),O.filter((function(e){return!e.isCursor()})).length>0){for(var E=O[0],j=0;j<O.length-1&&(E=O[j]).isCursor();j++);if(s.isEmpty(E)){for(var M=E.first();M&&!M.isText();)E=M,M=M.first();E.isText()?E.before(C):E.prepend(C)}else{var N=s.isMark(i)?i:i.parent(),S=C;t&&!Array.isArray(t)&&(t=[t]);for(var T=function(){var e=N.clone();if(!t.some((function(t){return r.compare(e,t)}))){var n=C.equal(S);S=s.wrap(S,e),n&&(C=S.first())}N=N.parent()};t&&t.length>0&&N&&s.isMark(N);)T();E.before(S)}e.select(C).collapse(!1)}else if(k.filter((function(e){return!e.isCursor()})).length>0){k[k.length-1].after(C),e.select(C).collapse(!1)}else e.select(c,!0).collapse(!0);var _=!1;c.children().each((function(e){var t=It(e);if(t.isText()){var n=e.textContent,r=(null===n||void 0===n?void 0:n.replace(/\u200b+/g,"\u200b"))||"";if(n!==r&&(e.textContent=r),_){var i=t.next(),o=t.parent();(!i&&o&&!s.isInline(o)||i&&!s.isInline(i))&&r.startsWith("\u200b")?(r=r.substring(1))?e.textContent=r:t.remove():_=!1}r.endsWith("\u200b")&&(_=!0)}else _=!1}));var A=s;if(C[0].parentNode){var I=C[0],D=null,z=0,L=function(e,t){for(var n=function(e){return t?e.previousSibling:e.nextSibling};e;){if(e.nodeType!==I.nodeType)return;var r=n(e);if(e.textContent===D){var i;if(r&&A.isInline(r)||!r&&e.parentNode&&A.isInline(e.parentNode))break;null===(i=e.parentNode)||void 0===i||i.removeChild(e),e=r}else{var o,a;if(t)for(;D&&(null===(s=e.textContent)||void 0===s?void 0:s.endsWith(D));){var s;if(r&&A.isInline(r)||!r&&e.parentNode&&A.isInline(e.parentNode))break;e.textContent=e.textContent.substring(0,e.textContent.length-z)}else for(;D&&(null===(l=e.textContent)||void 0===l?void 0:l.startsWith(D));){var l;if(r&&A.isInline(r)||!r&&e.parentNode&&A.isInline(e.parentNode))break;e.textContent=e.textContent.substring(D.length)}if(0!==(null===(o=e.textContent)||void 0===o?void 0:o.length))return;null===(a=e.parentNode)||void 0===a||a.removeChild(e),e=r}}};if(I.nodeType===Node.TEXT_NODE){var R=I.textContent;z=(D=R).length,L(I.previousSibling,!0),L(I.nextSibling,!1)}}}return n}}},{key:"splitOnExpanded",value:function(e,t){if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,i=n.isCard()?n:n.closest(Ee),o=r.isCard()?r:r.closest(Ee);if(!(i.length>0&&"inline"===i.attributes(we)||o.length>0&&"inline"===o.attributes(we))){var a=this.closestNotMark(n),s=this.closestNotMark(r);if(!a.equal(s)){var l=e.cloneRange();l.collapse(!0);var c=e.cloneRange();c.collapse(!1);var d=void 0,u=l.startOffset,h=c.endOffset;return void(a.contains(s)?(d=this.splitOnCollapsed(l,t,c.endNode),e.setStart(l.startContainer,l.startOffset),d&&c.setOffset(d,h,h),this.splitOnCollapsed(c,t),e.setEnd(c.startContainer,c.startOffset)):(d=this.splitOnCollapsed(c,t,l.startNode),e.setEnd(c.startContainer,c.startOffset),d&&l.setOffset(d,u,u),this.splitOnCollapsed(l,t),e.setStart(l.startContainer,l.startOffset)))}var p=this.editor.node,f=n.parent(),v=p.isMark(n)||f&&p.isMark(f),g=r.parent(),m=p.isMark(r)||g&&p.isMark(g);if(!v&&!m)return;var b=e.commonAncestorNode;b.isText()&&(b=b.parent());var y=this.closestNotMark(b),w=e.createSelection(),k=w.getNode(y,"left"),x=w.getNode(y),O=w.getNode(y,"right");this.unwrapEmptyMarks(k),this.unwrapEmptyMarks(O);var C=y.children();C.each((function(e,t){var n=C.eq(t);(null===n||void 0===n?void 0:n.isCard())||null===n||void 0===n||n.remove()}));var E=void 0,j=function(e){e.each((function(t,n){var r=e.eq(n);(null===r||void 0===r?void 0:r.isCard())?(E=E?E.next():y.first())&&(e[n]=E[0]):E?(E.after(t),E=r):(E=r,y.prepend(t))}))};j(k.children());var M=x.children(),N=M.toArray();j(M),j(O.children()),e.setStartBefore(N[0][0]),e.setEndAfter(N[N.length-1][0])}}}},{key:"split",value:function(e,t){var n=this.editor;if(ct(n)){var r=n.change,i=e||r.range.toTrusty(),o=at(i.startContainer),a=i.collapsed;if(("string"===typeof t||!Array.isArray(t)&&t&&wt(t))&&(t=It(t,o)),a)this.splitOnCollapsed(i,t);else{var s=i.createSelection("mark-split");this.splitOnExpanded(i,t),s.move()}e||r.apply(i)}}},{key:"wrapByNode",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.findPlugin(t),i=this.editor.node;if(i.isMark(e)){var o;0===(null===(o=e.get())||void 0===o?void 0:o.childNodes.length)&&e.html("&#8203;");for(var a=e,s=a.children().toArray(),l=this.findPlugin(a),c=!1;i.isMark(a)&&1===s.filter((function(e){return!e.isCursor()})).length&&r&&l&&r.mergeLeval<=l.mergeLeval;){var d=s.find((function(e){return!e.isCursor()}));if(i.isMark(d))s=(a=d).children().toArray();else{if(!d.isText())break;a=d}if(r.name===l.name){c=!0;break}l=this.findPlugin(a)}i.removeZeroWidthSpace(a);var u=a.parent();if(a.isText()||c){for(var h=!1;u&&i.isMark(u);){if(this.compare(u.clone(),t,!0)){h=!0;break}if(1===u.children().toArray().filter((function(e){return!e.isCursor()})).length){var p=this.findPlugin(u);if(r&&r===p&&!0===r.combineValueByWrap){i.wrap(u,t,!0),h=!0;break}if(r&&r===p){i.unwrap(u),h=!1;break}}u=u.parent()}if(h)return!1}return a.allChildren().forEach((function(e){e.type!==at().TEXT_NODE&&(i.isMark(e)&&(n.findPlugin(e)!==r||(null===r||void 0===r?void 0:r.combineValueByWrap)||i.unwrap(e)))})),i.wrap(a,t)}if("br"===e.name){var f=e.parent();if(f&&i.isBlock(f)){var v=t.clone(!0);return v.html("&#8203;"),i.replace(e,v),v}}else if(e.isCard()){var g=this.editor.card.find(e);if(g&&g.executeMark)return g.executeMark(t,!0)}else if(e.isText()&&!i.isEmpty(e)){i.removeZeroWidthSpace(e);for(var m=e.parent(),b=!1;m&&i.isMark(m);){if(this.compare(m.clone(),t,!0)){b=!0;break}if(1===m.children().toArray().filter((function(e){return!e.isCursor()})).length){var y=this.findPlugin(m);if(r&&r===y&&!0===r.combineValueByWrap){i.wrap(m,t,!0),b=!0;break}if(r&&r===y){var w=i.unwrap(m),k=w.find((function(e){return!e.isCursor()&&i.isMark(e)}));k?m=k:w.length>0&&(m=w[0].parent()),b=!1;break}}var x=m.parent();if(!x||!i.isMark(m))break;m=x}if(b)return!1;for(var O=e.parent(),C=O?this.findPlugin(O):void 0,E=!1,j=function(){E=!0;var r=O.children().toArray(),o=O.clone();r.forEach((function(n){n.isCursor()||3===n.type&&/^\u200b$/.test(n.text()||"")||(e.equal(n)||n.contains(e)?e=i.wrap(i.replace(e,o),t):(n=i.wrap(n,o),i.wrap(n,t)))})),i.unwrap(O),O=n.closest(e)};O&&i.isMark(O)&&r&&C&&r.mergeLeval>C.mergeLeval;)j();return E||i.wrap(e,t),e}}},{key:"wrap",value:function(e,t){var n=this,r=this.editor,i=ct(r)?r.change:void 0;if(t||i){var o=r.node,a=t||i.range.toTrusty(),s=at(a.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,s)),o.isMark(e)){var l=a.commonAncestorNode;l.type===Node.TEXT_NODE&&(l=l.parent());var c=r.card.find(l,!0),d=null===c||void 0===c?void 0:c.isEditable,u=d?(null===c||void 0===c?void 0:c.getSelectionNodes)?c.getSelectionNodes():[]:[l];0===u.length&&(d=!1,u.push(l));var h=o,p=this.findPlugin(e);if(a.collapsed&&(!d||!(null===c||void 0===c?void 0:c.getSelectionNodes)||1===u.length)){0===e.children().toArray().filter((function(e){return!e.isCursor()})).length&&e.append(s.createTextNode("\u200b"));var f=a.shrinkToTextNode().startNode,v=f.parent(),g=[],m=!1;if(f.isText()){for(var b=!1;v&&h.isMark(v);){var y;if(this.compare(v.clone(),e,!0)){b=!0;break}var w=this.findPlugin(v);if(1===(null===(y=v.get())||void 0===y?void 0:y.childNodes.length)){if(p&&p===w&&!0===p.combineValueByWrap){h.wrap(v,e,!0),b=!0;break}if(p&&p===w){if(this.split(a),a.collapsed)for(var k=v.parent();k&&h.isMark(k);)e=h.wrap(e,k),k=k.parent();b=!1;break}}p&&(!w||p.mergeLeval>w.mergeLeval)?g.push(v.clone(!1)):!m&&g.length>0&&(g.push(e.clone(!1)),m=!0),v=v.parent()}if(b)return}if(g.length>0){var x=g[0];x.append(e.children());for(var O=1;O<g.length;O++)x=h.wrap(x,g[O]);e=m?x:h.wrap(x,e),this.split(a)}return h.insert(e,a),this.merge(a),a.handleBr(),void(t||null===i||void 0===i||i.apply(a))}d||(this.split(a),(l=a.commonAncestorNode).type===Node.TEXT_NODE&&(l=l.parent()),u[0]=l);var C=d?void 0:a.createSelection();if(!C||C.anchor||C.focus){var E=!!d;if(u.forEach((function(t){t.traverse((function(t){if(d||!t.equal(null===C||void 0===C?void 0:C.anchor)){if(E){if(!d&&t.equal(null===C||void 0===C?void 0:C.focus))return E=!1,!1;var r=h.isMark(t),i=n.wrapByNode(t,e,p);if(i&&"boolean"!==typeof i&&r){var o;if(!d&&(null===C||void 0===C?void 0:C.focus)&&i.find('[data-element="'.concat(C.focus.attributes(ee),'"]')).equal(C.focus))return E=!1,!1;if((null===C||void 0===C?void 0:C.focus)&&(null===(o=i.next())||void 0===o?void 0:o.equal(C.focus)))return E=!1,!1}if("undefined"!==typeof i)return!0}}else E=!0}),!0,"editable")})),null===C||void 0===C||C.move(),d){var j=[];u.forEach((function(e){e.allChildren().forEach((function(e){e.isElement()&&o.isMark(e)&&j.push(e)}))})),this.mergeMarks(j)}else this.merge(a);t||null===i||void 0===i||i.apply(a)}else t||null===i||void 0===i||i.apply(a)}}}},{key:"mergeMarks",value:function(e){var t=this,n=this.editor.node;e.forEach((function(e){var r=e.prev(),i=e.next(),o=e.parent();if(o&&t.findSameParent(o,e))n.unwrap(e);else{r&&t.compare(r,e,!0)&&(n.merge(r,e),e=r),i&&t.compare(i,e,!0)&&n.merge(e,i);var a=[],s=e.children();s.each((function(e,t){var r=s.eq(t);r&&!r.isCursor()&&n.isMark(r)&&a.push(r)})),a.length>0&&t.mergeMarks(a)}}))}},{key:"merge",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=e||n.range.toTrusty(),i=this.findMarks(r);if(0!==i.length){var o=r.shrinkToElementNode().createSelection();this.mergeMarks(i),o.move(),r.handleBr(),e||n.apply(r)}}}},{key:"unwrapByNodes",value:function(e,t){var n=this,r=this.editor,i=r.node;e.forEach((function(e){!t||!e.isCard()&&(Array.isArray(t)?t:[t]).some((function(t){return n.compare(e,t)}))?i.unwrap(e):t?(Array.isArray(t)?t:[t]).forEach((function(t){var n,i=t.css();Object.keys(i).forEach((function(t){e.css(t,"")}));var o=null===(n=t.get())||void 0===n?void 0:n.className.split(/\s+/);o&&function(){for(var t=r.schema,n=t.find((function(t){return t.name===e.name})),i=function(r){var i=n[r];o.forEach((function(n){""!==(n=n.trim())&&i.attributes&&t.checkValue(i.attributes,"class",n)&&e.removeClass(n)}))},a=0;a<n.length;a++)i(a)}()})):(e.removeAttributes("class"),e.removeAttributes("style"))}))}},{key:"unwrap",value:function(e,t){var n=this.editor;if(ct(n)){var r=n.change,i=n.node,o=t||r.range.toTrusty(),a=at(o.startContainer)||document;void 0===e||Array.isArray(e)||"string"!==typeof e&&!wt(e)||(e=It(e,a));var s=o.commonAncestorNode;s.type===Node.TEXT_NODE&&(s=s.parent());var l=n.card.find(s,!0),c=null===l||void 0===l?void 0:l.isEditable,d=c?(null===l||void 0===l?void 0:l.getSelectionNodes)?l.getSelectionNodes():[]:[s];if(0===d.length&&(c=!1,d.push(s)),c||(this.split(o,o.collapsed?e:void 0),(s=o.commonAncestorNode).type===Node.TEXT_NODE&&(s=s.parent()),d[0]=s),!o.collapsed||c&&(null===l||void 0===l?void 0:l.getSelectionNodes)&&1!==d.length){var u=c?void 0:o.createSelection("mark-unwrap");if(u&&!u.has())return this.merge(o),void(t||r.apply(o));var h=[],p=!!c;if(d.forEach((function(t){t.traverse((function(t){if(c||!t.isText()&&(null===u||void 0===u?void 0:u.anchor))if(c||(null===u||void 0===u?void 0:u.anchor)&&!t.equal(u.anchor)){if(p&&(c||!t.equal(null===u||void 0===u?void 0:u.focus)))if(i.isMark(t)&&!t.isCard()&&(c||o.isPointInRange(t,0)))h.push(t);else if(t.isCard()){var r=n.card.find(t);r&&r.executeMark&&(Array.isArray(e)?e:[e]).forEach((function(e){r.executeMark(e,!1)}))}}else if(!c&&(p=!0,(null===u||void 0===u?void 0:u.anchor)&&t.equal(u.anchor)&&!u.anchor.prev()))for(var a=u.anchor.parent();a&&!a.isCard()&&i.isMark(a);){var s,l;if(h.push(a),(a=a.parent())&&(null!==(s=null===(l=a.get())||void 0===l?void 0:l.childNodes.length)&&void 0!==s?s:0)>1)break}}),!0,"editable")})),this.unwrapByNodes(h,e),null===u||void 0===u||u.move(),c){var f=[];d.forEach((function(e){e.allChildren().forEach((function(e){e.isElement()&&i.isMark(e)&&f.push(e)}))})),this.mergeMarks(f)}else this.merge(o);t||r.apply(o)}else t||r.apply(o)}}},{key:"insert",value:function(e,t){var n,r=this.editor;if(ct(r)){var i=r.change,o=r.node,a=t||i.range.toTrusty();if("string"===typeof e||wt(e)){var s=at(a.startContainer);e=It(e,s)}a.collapsed||i.delete(a),null===(n=o.insert(e,a))||void 0===n||n.handleBr().select(e).collapse(!1),t||i.apply(a)}}},{key:"findMarks",value:function(e){var t=this.editor,n=e.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||t.card.find(n.startNode))return[];var r=t.node,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var i=t.startNode,o=t.startOffset,a=i.findParent();if(a){var s=t.cloneRange();if(s.select(a,!0),n){s.setEnd(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var l=i.get().childNodes,c=s.endNode,d=s.endOffset,u=c.get().childNodes.item(d),h=l.item(o)||l.item(o-1);if(!e&&c.type===Node.ELEMENT_NODE&&u&&r.isBlock(u)&&(i.type!==Node.ELEMENT_NODE||h&&!r.isBlock(h)))return;s.select(a,!0),s.setStart(c,d),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setStart(s.startContainer,s.startOffset),t.collapse(!0)}else{s.setStart(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var p=i.get().childNodes,f=s.startNode,v=s.startOffset,g=f.get().childNodes.item(v),m=p.item(o)||p.item(o-1);if(!e&&f.type===Node.ELEMENT_NODE&&g&&r.isBlock(g)&&(i.type!==Node.ELEMENT_NODE||m&&!r.isBlock(m)))return;s.select(a,!0),s.setEnd(f,v),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setEnd(s.endContainer,s.endOffset),t.collapse(!1)}}}};if(!n.collapsed){var o=n.cloneRange(),a=n.cloneRange();o.collapse(!0),a.collapse(!1),i(!0,o,!0),i(!0,a),n.setStart(o.startContainer,o.startOffset),n.setEnd(a.startContainer,a.startOffset)}i(!1,n);var s=n.startContainer,l=n.startOffset,c=n.endContainer,d=n.endOffset,u=s,h=c;s.nodeType===Node.ELEMENT_NODE&&s.childNodes[l]&&(u=s.childNodes[l]||s),c.nodeType===Node.ELEMENT_NODE&&d>0&&c.childNodes[d-1]&&(h=c.childNodes[d-1]||s),n.collapsed&&(u=h);var p=function(e,t){e.push(t)},f=r,v=function(e){for(var n=[];e&&(e.type!==Node.ELEMENT_NODE||!e.isEditable());){if(!f.isMark(e)||e.attributes(be)||e.attributes(xe)){if(e.isCard()){var r=t.card.find(e);(null===r||void 0===r?void 0:r.queryMarks)&&n.push.apply(n,Object(S.a)(r.queryMarks()))}}else n.push(e);var i=e.parent();if(!i)break;e=i}return n},g=v(It(u)),m=n.commonAncestorNode,b=t.card.find(m,!0),y=null===b||void 0===b?void 0:b.isEditable,w=y?(null===b||void 0===b?void 0:b.getSelectionNodes)?b.getSelectionNodes():[]:[m];if(0===w.length&&(y=!1,w.push(m)),(!n.collapsed||y)&&(v(It(h)).forEach((function(e){return p(g,e)})),s!==c||y)){var k=!1,x=!1;w.forEach((function(e){e.traverse((function(e){if(x)return!1;if(e[0]!==s){if(k){if(e[0]===c)return x=!0,!1;if(!f.isMark(e)||e.attributes(be)||e.attributes(xe)){if(e.isCard()){var n=t.card.find(e);(null===n||void 0===n?void 0:n.queryMarks)&&n.queryMarks().forEach((function(e){p(g,e)}))}}else p(g,e)}}else k=!0}),!0,"editable")}))}for(var O=0;O<g.length;O++)for(var C=O+1;C<g.length;C++)g[O][0]==g[C][0]&&(g.splice(C,1),C--);return g}},{key:"removeEmptyMarks",value:function(e,t){if(!(0===e.length||e.isEditable()||e.isCard()||e.attributes(ee))){var n=this.editor.node;if(!e.attributes(ee)){var r,i,o=e.parent();if(1===(null===(r=e.get())||void 0===r?void 0:r.childNodes.length)&&(null===(i=e.first())||void 0===i?void 0:i.attributes(ee)))return void(n.isMark(e)?(e.before(e.first()),e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&e.prepend("<br />"));var a=n.html(e);""!==a&&"\u200b"!==a||(n.isMark(e)?(e.remove(),o&&this.removeEmptyMarks(o,!0)):t&&n.isBlock(e)&&n.html(e,"<br />"))}}}},{key:"repairCursor",value:function(e){var t=this.editor.node;if(e=wt(e)?It(e):e,t.isMark(e)&&!e.isCursor()){var n=e.children();n.each((function(e,t){var r,i=n.eq(t);if((null===i||void 0===i?void 0:i.isText())&&!(null===(r=i.next())||void 0===r?void 0:r.isCursor())){var o=i.text();if(1===o.length&&/\u200b/.test(o))return void i.remove();i.text(o.replace(/\u200b/g,""))}}));var r=e.children().toArray().filter((function(e){return!e.isCursor()}));r.length<2&&(0===r.length||1===r.length&&r[0].isText()&&0===r[0].text().length)&&(r.length>0&&r[0].remove(),e.prepend(It("\u200b",null)));var i=e.next(),o=null===i||void 0===i?void 0:i.next();i&&o&&i.isText()&&/^\u200b$/g.test(i.text())&&!t.isInline(o)&&i.remove();var a=e.prev(),s=null===a||void 0===a?void 0:a.prev();a&&s&&a.isText()&&/^\u200b$/g.test(a.text())&&!t.isInline(s)&&a.remove()}}}]),e}(),hi=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=(t.mark,t.inline),i=t.node,o=n.range.get(),a=o.cloneRange().shrinkToTextNode(),s=a.collapsed,l=a.endNode,c=a.startNode,d=a.startOffset;if(l.type===Node.TEXT_NODE||c.type===Node.TEXT_NODE){if(!s){var u=r.closest(l);if(i.isInline(u)&&!u.isCard()&&i.isEmpty(u)){if(d>1)return!0;var h=l.prev(),p=l.parent();if(p&&i.isInline(p)){if(h)return!0;var f=l.text().substr(0,d);if(!/^\u200b$/.test(f))return!0;var v=u.next(),g=null===v||void 0===v?void 0:v.text();if(v&&v.isText()&&g&&/^\u200b/.test(g))return o.setEnd(v,1),!1}}return i.isInline(u)&&!u.isCard()&&setTimeout((function(){r.repairCursor(u)}),100),!0}var m=r.closest(c);if(i.isInline(m)){if(m.isCard())return!0;if(d>1)return!0;var b=c.prev(),y=c.parent();if(y&&i.isInline(y)){if(b)return!0;var w=c.text().substr(0,d);if(!/\u200b$/.test(w))return!0}else{if(0!==d)return!0;for(;!b&&y&&!i.isInline(y);){var k;b=y.prev(),y=null===(k=y)||void 0===k?void 0:k.parent()}if(b&&!b.isText())return!0;if(b&&!/\u200b$/.test(b.text()))return!0}var x=m.prev(),O=null===x||void 0===x?void 0:x.text();if(x&&x.isText()&&O&&/\u200b$/.test(O)){if(o.setStart(x,O.length-1),i.isEmpty(m)){var C=m.next(),E=null===C||void 0===C?void 0:C.text();C&&C.isText()&&E&&/^\u200b/.test(E)&&o.setEnd(C,1)}else o.collapse(!0);return n.range.select(o),!1}return!0}var j=c.prev(),M=c.parent(),N=void 0;if(j){if(i.isInline(j)&&!j.isCard()){var S=c.text().substr(0,d);if(!/^\u200b$/.test(S))return!0;N=j}}else{if(0!==d)return!0;for(;!j&&M&&!i.isBlock(M);){var T;j=M.prev(),M=null===(T=M)||void 0===T?void 0:T.parent()}if(j&&!j.isText())return!0;if(j){if(!/^\u200b$/.test(j.text()))return!0;if(!(j=j.prev())||!i.isInline(j))return!0;N=j}}if(N){var _=N.last(),A=null===_||void 0===_?void 0:_.text();if(_&&_.isText()&&A&&/\u200b$/.test(A))return e.preventDefault(),o.setStart(_,A.length-1),o.collapse(!0),n.range.select(o),!1}}return!0}}]),e}(),pi=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,o=t.node,a=n.range.get().cloneRange().shrinkToTextNode(),s=a.startNode,l=a.startOffset;if(!this.engine.card.getSingleCard(a)&&s.type===Node.TEXT_NODE){var c=r.closest(s);if(o.isInline(c)){if(c.isCard())return;if(l>1)return!0;var d=s.prev(),u=s.parent();if(u&&o.isInline(u)){if(d)return!0;var h=s.text().substr(0,l);if(!/^\u200b$/.test(h))return!0}else{if(0!==l)return!0;for(;!d&&u&&!o.isInline(u);){var p;d=u.prev(),u=null===(p=u)||void 0===p?void 0:p.parent()}if(d&&!d.isText())return!0;if(d&&!/^\u200b$/.test(d.text()))return!0}var f=c.prev(),v=null===f||void 0===f?void 0:f.text();if(f&&f.isText()&&v&&/\u200b$/.test(v)){e.preventDefault();var g=a.cloneRange().collapsed;return a.setStart(f,v.length-1),g&&a.collapse(!0),n.range.select(a),!1}return!0}var m=s.prev(),b=s.parent(),y=void 0;if(m){if(o.isInline(m)&&!m.isCard()){var w=s.text().substr(0,l);if(!/^\u200b$/.test(w))return!0;y=m}}else{if(0!==l)return!0;for(;!m&&b&&!o.isBlock(b);){var k;m=b.prev(),b=null===(k=b)||void 0===k?void 0:k.parent()}if(m&&!m.isText())return!0;if(m){if(!/^\u200b$/.test(m.text()))return!0;if(!(m=m.prev())||!o.isInline(m))return!0;y=m}}if(y){e.preventDefault();var x=y.last(),O=null===x||void 0===x?void 0:x.text();if(x&&x.isText()&&O&&/\u200b$/.test(O)){var C=a.cloneRange().collapsed;return a.setStart(x,O.length-1),C&&!i()("shift+left",e)&&a.collapse(!0),n.range.select(a),!1}}}return!0}}]),e}(),fi=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.inline,o=t.node,a=n.range.get().cloneRange().shrinkToTextNode(),s=a.endNode,l=a.endOffset;if(!this.engine.card.getSingleCard(a)&&s.type===Node.TEXT_NODE){var c=r.closest(s),d=s.text();if(o.isInline(c)){if(c.isCard())return;if(l<d.length-1)return!0;var u=s.next(),h=s.parent();if(h&&o.isInline(h)){if(u)return!0;var p=d.substr(l);if(!/^\u200b$/.test(p))return!0}else{if(l!==d.length&&l!==d.length-1)return!0;for(;!u&&h&&!o.isInline(h);){var f;u=h.next(),h=null===(f=h)||void 0===f?void 0:f.parent()}if(u&&!u.isText())return!0;if(u){if(!/^\u200b$/.test(u.text()))return!0;if(l===d.length-1){e.preventDefault();var v=a.cloneRange().collapsed;return a.setEnd(u,0),v&&a.collapse(!1),n.range.select(a),!1}}}var g=c.next(),m=null===g||void 0===g?void 0:g.text();if(g&&g.isText()&&m&&/^\u200b/.test(m)){e.preventDefault();var b=a.cloneRange().collapsed;return a.setEnd(g,1),b&&a.collapse(!1),n.range.select(a),!1}return!0}var y=s.next(),w=s.parent(),k=void 0;if(y){if(o.isInline(y)&&!y.isCard()){var x=d.substr(l);if(!/^\u200b$/.test(x))return!0;k=y}}else{if(l!==d.length)return!0;for(;!y&&w&&!o.isBlock(w);){var O;y=w.next(),w=null===(O=w)||void 0===O?void 0:O.parent()}if(y&&!y.isText())return!0;if(y){if(!/^\u200b$/.test(y.text()))return!0;if(!(y=y.next())||!o.isInline(y))return!0;k=y}}if(k){e.preventDefault();var C=k.first(),E=null===C||void 0===C?void 0:C.text();if(C&&C.isText()&&E&&/^\u200b/.test(E)){var j=a.cloneRange().collapsed;return a.setEnd(C,1),j&&!i()("shift+right",e)&&a.collapse(!1),n.range.select(a),!1}}}return!0}}]),e}(),vi=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.editor=t}return Object(h.a)(e,[{key:"init",value:function(){var e=this.editor;if(ct(e)){var t,n,r,i=e.typing,o=(e.event,new hi(e));null===(t=i.getHandleListener("backspace","keydown"))||void 0===t||t.on((function(e){return o.trigger(e)}));var a=new pi(e);null===(n=i.getHandleListener("left","keydown"))||void 0===n||n.on((function(e){return a.trigger(e)}));var s=new fi(e);null===(r=i.getHandleListener("right","keydown"))||void 0===r||r.on((function(e){return s.trigger(e)}))}}},{key:"repairRange",value:function(e){var t=this.editor,n=t.change,r=t.node,i=e=e||n.range.get(),o=i.startNode,a=i.startOffset,s=i.endNode,l=i.endOffset;if(i.collapsed)return e;var c=this.closest(o);if(c&&r.isInline(c)&&a<=1){for(var d=!0,u=o;u&&!u.equal(c);){if(u.prev()){d=!1;break}u=u.parent()}if(d){var h=c.prev(),p=(null===h||void 0===h?void 0:h.text())||"";h&&h.isText()&&/\u200B$/g.test(p)&&e.setStart(h,p.length-1)}}var f=this.closest(s),v=f.last();if(f&&r.isInline(f)&&v&&s.equal(v)&&l>=v.text().length-1){for(var g=!0,m=o;m&&!m.equal(f);){if(m.next()){g=!1;break}m=m.parent()}if(g){var b=f.next(),y=(null===b||void 0===b?void 0:b.text())||"";b&&b.isText()&&/^\u200B/g.test(y)&&e.setEnd(b,1)}}return e}},{key:"closest",value:function(e){for(var t=this.editor.node,n=e.parent();n&&!n.isEditable()&&!t.isBlock(n);){if(t.isInline(n))return n;var r=n.parent();if(!r)break;n=r}return e}},{key:"closestNotInline",value:function(e){for(var t=this.editor.node;(t.isInline(e)||t.isMark(e)||e.isText())&&!e.isEditable();){var n=e.parent();if(!n)break;e=n}return e}},{key:"wrap",value:function(e,t){var n=this,r=this.editor;if(ct(r)){var i=r.change,o=r.mark,a=r.node,s=t||i.range.toTrusty(),l=at(s.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,l)),a.isInline(e)){if(s.collapsed)return this.insert(e,s),void(t||i.apply(s));o.split(s),this.split(s);var c=s.commonAncestorNode;if(c.type===Node.TEXT_NODE||a.isMark(c))for(c=c.parent();a.isMark(c);)c=c.parent();var d=s.enlargeToElementNode().createSelection();if(d.has()){var u=!1,h=a.clone(e,!1),p=[];c.traverse((function(e){if(e.equal(d.anchor))u=!0;else if(u){if(e.equal(d.focus))return u=!1,!1;if(a.isInline(e))if(e.isCard())p.push(e);else{var t=e.children();a.unwrap(e),e=t}if(a.isMark(e)&&!e.isCard()||e.isText())return a.isEmpty(e)?(e.remove(),!0):(h.parent()||e.before(h),h.append(e),n.repairCursor(h),p.push(h),!0);0!==h[0].childNodes.length&&h.parent()&&(h=a.clone(h,!1,!1))}}));var f=d.anchor,v=d.focus,g=null===f||void 0===f?void 0:f.parent();if(g&&a.isRootBlock(g)&&!f.prev()&&!f.next()&&f.after("<br />"),!f.equal(v)){var m=null===v||void 0===v?void 0:v.parent();m&&a.isRootBlock(m)&&!v.prev()&&!v.next()&&v.before("<br />")}if(d.move(),p.length>0){var b=p[0];if(!b.isCard()){var y=b.first();s.setStart(y,1)}var w=p[p.length-1];if(!w.isCard()){var k=w.last();s.setEnd(k,k.text().length-1)}}t||i.apply(s)}else t||i.apply(s)}}}},{key:"unwrap",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=t.mark,i=e&&en(e)?e:n.range.toTrusty();this.repairRange(i),r.split(i);var o=e&&!en(e)?[e]:this.findInlines(i),a=i.createSelection();o.forEach((function(e){var n,r,i,o,a=e.prev();a&&a.isCursor()&&(a=a.prev());var s=e.next();s&&s.isCursor()&&(s=s.prev());var l=e.first();l&&l.isCursor()&&(l=l.next());var c=(null===(n=a)||void 0===n?void 0:n.text())||"",d=(null===(r=s)||void 0===r?void 0:r.text())||"",u=(null===(i=l)||void 0===i?void 0:i.text())||"";a&&a.isText()&&/\u200B$/g.test(c)&&(/^\u200B$/g.test(c)?a.remove():a.text(c.substr(0,c.length-1))),s&&s.isText()&&/^\u200B/g.test(d)&&(/^\u200B$/g.test(d)?s.remove():s.text(d.substr(1))),l&&l.isText()&&/^\u200B/g.test(u)&&(/^\u200B$/g.test(u)||l.get().splitText(1),l.remove());var h=e.last();h&&h.isCursor()&&(h=h.prev());var p=(null===(o=h)||void 0===o?void 0:o.text())||"";h&&h.isText()&&/\u200B$/g.test(p)&&(/^\u200B$/g.test(p)?h.remove():h.get().splitText(p.length-1).remove()),t.node.unwrap(e)})),a.move(),r.merge(i),e||n.apply(i)}}},{key:"insert",value:function(e,t){var n,r,i=this.editor;if(ct(i)){var o=i.change,a=i.node,s=i.mark,l=t||o.range.toTrusty(),c=at(l.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,c)),a.isInline(e)){l.collapsed||o.delete(l),s.split(l),this.split(l),null===(n=a.insert(e,l))||void 0===n||n.select(e).collapse(!1),"br"!==e.name&&l.handleBr();var d=0!==(null===(r=e.get())||void 0===r?void 0:r.childNodes.length);if(this.repairCursor(e),!e.isCard()&&!a.isVoid(e))if(d){var u=e.next();l.setStart(u,1),l.setEnd(u,1)}else{var h=e.last(),p=h.text();l.setStart(h,p.length-1),l.setEnd(h,p.length-1)}t||o.apply(l)}}}},{key:"unwrapEmptyInlines",value:function(e,t){var n=this.editor.node;e.allChildren().forEach((function(e){n.isEmpty(e)&&n.isInline(e)&&(!t||t(e))&&n.unwrap(e)}))}},{key:"splitOnCollapsed",value:function(e,t){var n=this;if(e.collapsed){e.enlargeFromTextNode(),e.shrinkToElementNode();var r=e.startNode,i=r.parent(),o=this.editor.node,a=r.isCard()?r:r.closest(Ee);if((0===a.length||"inline"!==a.attributes(we))&&(o.isInline(r)||i&&o.isInline(i))){var s,l=this.closestNotInline(r),c=e.createSelection(),d=c.getNode(l,"left"),u=void 0,h=void 0,p=[];if(t){wt(t)&&(t=It(t));var f=t.getPath(l.get()),v=l.clone(!0);p=f.slice(1),h=It(v.getChildByPath(f.slice(0,1))),u=c.getNode(v,"right",!1)}else u=c.getNode(l,"right");this.unwrapEmptyInlines(d),this.unwrapEmptyInlines(u);var g=l.children();g.each((function(e,t){var n,r;(null===(n=g.eq(t))||void 0===n?void 0:n.isCard())||(null===(r=g.eq(t))||void 0===r||r.remove())}));var m=void 0,b=function(e){e.each((function(t,n){var r=e.eq(n);(null===r||void 0===r?void 0:r.isCard())?(m=m?m.next():l.first())&&(e[n]=m[0]):m?(m.after(t),m=r):(m=r,l.prepend(t))}))},y=d.children(),w=y.toArray();b(y);var k=u.children(),x=k.toArray();if(h&&(t=null===(s=x.find((function(e){return e.equal(h)})))||void 0===s?void 0:s.getChildByPath(p)),b(k),x=k.toArray(),1===w.length&&"br"===w[0].name&&(w[0].remove(),w.splice(0,1)),1===x.length&&"br"===x[0].name&&(x[0].remove(),x.splice(0,1)),x.filter((function(e){return!e.isCursor()})).length>0){for(var O=x[0],C=0;C<x.length-1&&(O=x[C]).isCursor();C++);e.setStartBefore(O),e.collapse(!0)}else if(w.filter((function(e){return!e.isCursor()})).length>0){for(var E=w[w.length-1],j=w.length-1;j>=0&&(E=w[j]).isCursor();j--);e.setStartAfter(E),e.collapse(!0)}else e.select(l,!0).collapse(!0);l.traverse((function(e){o.isInline(e)&&n.repairCursor(e)}))}return e.enlargeToElementNode(!o.isBlock(e.startNode),!1),t}}},{key:"splitOnExpanded",value:function(e){var t=this;if(!e.collapsed){e.enlargeToElementNode(),e.shrinkToElementNode();var n=e.startNode,r=e.endNode,i=n.isCard()?n:n.closest(Ee),o=r.isCard()?r:r.closest(Ee);if(!(i.length>0&&"inline"===i.attributes(we)||o.length>0&&"inline"===o.attributes(we))){var a=this.closestNotInline(n),s=this.closestNotInline(r);if(!a.equal(s)){var l=e.cloneRange();l.collapse(!0);var c=e.cloneRange();c.collapse(!1);var d=void 0,u=l.startOffset,h=c.endOffset;return void(a.contains(s)?(d=this.splitOnCollapsed(l,c.endNode),e.setStart(l.startContainer,l.startOffset),d&&c.setOffset(d,h,h),this.splitOnCollapsed(c),e.setEnd(c.startContainer,c.startOffset)):(d=this.splitOnCollapsed(c,l.startNode),e.setEnd(c.startContainer,c.startOffset),d&&l.setOffset(d,u,u),this.splitOnCollapsed(l),e.setStart(l.startContainer,l.startOffset)))}var p=this.editor.node,f=n.parent(),v=p.isInline(n)||f&&p.isInline(f),g=r.parent(),m=p.isInline(r)||g&&p.isInline(g);if(!v&&!m)return;var b=e.commonAncestorNode;b.isText()&&(b=b.parent());var y=this.closestNotInline(b),w=e.createSelection(),k=w.getNode(y,"left"),x=w.getNode(y),O=w.getNode(y,"right");this.unwrapEmptyInlines(k),this.unwrapEmptyInlines(O);var C=y.children();C.each((function(e,t){var n,r;(null===(n=C.eq(t))||void 0===n?void 0:n.isCard())||(null===(r=C.eq(t))||void 0===r||r.remove())}));var E=void 0,j=function(e){e.each((function(t,n){var r;(null===(r=e.eq(n))||void 0===r?void 0:r.isCard())?(E=E?E.next():y.first())&&(e[n]=E[0]):E?(E.after(t),E=e.eq(n)):(E=e.eq(n),y.prepend(t))}))};j(k.children());var M=x.children(),N=M.toArray();j(M),j(O.children()),y.traverse((function(e){p.isInline(e)&&t.repairCursor(e)})),e.setStartBefore(N[0][0]),e.setEndAfter(N[N.length-1][0])}}}},{key:"split",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=e||n.range.toTrusty();r.collapsed?this.splitOnCollapsed(r):this.splitOnExpanded(r),e||n.apply(r)}}},{key:"findInlines",value:function(e){var t=this.editor,n=e.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||t.card.find(n.startNode))return[];var r=t.node,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var i=t.startNode,o=t.startOffset,a=i.findParent();if(a){var s=t.cloneRange();if(s.select(a,!0),n){s.setEnd(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var l=i.children(),c=s.endNode,d=s.endOffset,u=c.children().eq(d),h=l.eq(o)||l.eq(o-1);if(!e&&c.type===Node.ELEMENT_NODE&&u&&r.isBlock(u)&&(i.type!==Node.ELEMENT_NODE||h&&!r.isBlock(h)))return;s.select(a,!0),s.setStart(c,d),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setStart(s.startContainer,s.startOffset),t.collapse(!0)}else{s.setStart(i,o),s.enlargeFromTextNode(),s.enlargeToElementNode(!0);var p=i.children(),f=s.startNode,v=s.startOffset,g=f.children().eq(v),m=p.eq(o)||p.eq(o-1);if(!e&&f.type===Node.ELEMENT_NODE&&g&&r.isBlock(g)&&(i.type!==Node.ELEMENT_NODE||m&&!r.isBlock(m)))return;s.select(a,!0),s.setEnd(f,v),s.shrinkToElementNode(),s.shrinkToTextNode(),t.setEnd(s.endContainer,s.endOffset),t.collapse(!1)}}}};if(!n.collapsed){var o=n.cloneRange(),a=n.cloneRange();o.collapse(!0),a.collapse(!1),i(!0,o,!0),i(!0,a),n.setStart(o.startContainer,o.startOffset),n.setEnd(a.startContainer,a.startOffset)}i(!1,n);var s=n.startContainer,l=n.startOffset,c=n.endContainer,d=n.endOffset,u=s,h=c;s.nodeType===Node.ELEMENT_NODE&&s.childNodes[l]&&(u=s.childNodes[l]||s),c.nodeType===Node.ELEMENT_NODE&&d>0&&c.childNodes[d-1]&&(h=c.childNodes[d-1]||s),n.collapsed&&(u=h);var p=function(e,t){e.some((function(e){return e[0]===t[0]}))||e.push(t)},f=function(e){for(var t=[];e&&!e.isEditable();){r.isInline(e)&&t.push(e);var n=e.parent();if(!n)break;e=n}return t},v=f(It(u)),g=n.commonAncestorNode,m=t.card.find(g,!0),b=null===m||void 0===m?void 0:m.isEditable,y=b?(null===m||void 0===m?void 0:m.getSelectionNodes)?m.getSelectionNodes():[]:[g];if(0===y.length&&(b=!1,y.push(g)),(!n.collapsed||b)&&(f(It(h)).forEach((function(e){return p(v,e)})),s!==c||b)){var w=!1,k=!1;y.forEach((function(e){e.traverse((function(e){if(k)return!1;if(e.equal(s))w=!0;else if(w){if(e.equal(c))return k=!0,!1;!r.isInline(e)||e.attributes(be)||e.attributes(xe)||p(v,e)}}))}))}return v}},{key:"repairCursor",value:function(e){var t,n,r=this.editor.node;if(wt(e)&&(e=It(e)),!r.isInline(e)||"false"===e.closest(Ee).attributes(Ce)||r.isVoid(e)||e.isCard()){var i=e.prev(),o=(null===i||void 0===i?void 0:i.isText())?i.text():void 0;if(o&&/\u200b$/.test(o)){var a=null===i||void 0===i?void 0:i.prev();a&&r.isInline(a)||(1===o.length?null===i||void 0===i||i.remove():null===i||void 0===i||i.text(o.slice(0,-1)))}var s=e.next(),l=(null===s||void 0===s?void 0:s.isText())?s.text():void 0;if(l&&/^\u200b/.test(l)){var c=null===s||void 0===s?void 0:s.next();c&&r.isInline(c)||(1===l.length?null===s||void 0===s||s.remove():null===s||void 0===s||s.text(l.slice(1)))}}else{var d=e.children();d.each((function(e,t){var n=d.eq(t);if(null===n||void 0===n?void 0:n.isText()){var r=n.text();if(1===r.length&&/\u200b/.test(r))return void n.remove();n.text(r.replace(/\u200b/g,""))}})),this.repairBoth(e);var u=e.first();(null===(t=u)||void 0===t?void 0:t.isCursor())&&(u=u.next()),u&&u.type===Node.TEXT_NODE&&/^\u200B/g.test(u.text())||(u?u.isText()?u.text("\u200b"+u.text()):u.before(It("\u200b",null)):e.append(It("\u200b",null)));var h=e.last();(null===(n=h)||void 0===n?void 0:n.isCursor())&&(h=h.prev()),!h||!/^\u200B$/g.test(e.text())&&h.type===Node.TEXT_NODE&&/\u200B$/g.test(h.text())||(h.isText()?h.text(h.text()+"\u200b"):h.after(It("\u200b",null)))}}},{key:"repairBoth",value:function(e){var t,n=this.editor.node;if(wt(e)&&(e=It(e)),(null===(t=e.get())||void 0===t?void 0:t.parentNode)&&!n.isVoid(e)){var r=It("\u200b",null),i=e.prev(),o=null===i||void 0===i?void 0:i.prev(),a=(null===i||void 0===i?void 0:i.text())||"";!i||!i.isText()||!/\u200B$/g.test(a)||o&&n.isInline(o)&&!/\u200B.*\u200B$/g.test(a)?i&&i.isText()?i.text(a+"\u200b"):e.before(n.clone(r,!0,!1)):i&&i.isText()&&/\u200B\u200B$/g.test(a)&&o&&!n.isInline(o)&&i.text(a.substr(0,a.length-1));var s=e.next(),l=(null===s||void 0===s?void 0:s.text())||"",c=null===s||void 0===s?void 0:s.next();!s||!s.isText()||!/^\u200B/g.test(l)||c&&n.isInline(c)&&!/^\u200B\u200B/g.test(l)?s&&s.isText()?s.text("\u200b"+s.text()):(e.after(n.clone(r,!0,!1)),"br"===(null===s||void 0===s?void 0:s.name)&&s.remove()):s&&s.isText()&&/\u200B\u200B$/g.test(l)&&c&&!n.isInline(c)&&s.text(l.substr(0,l.length-1))}}},{key:"flat",value:function(e,t){var n=this,r=this.editor;if(en(e)){var i=e.cloneRange().shrinkToElementNode().createSelection(),o=this.findInlines(e),a=[];o.forEach((function(e){if(!e.isCard()){var t=n.flat(e);t&&a.push(t)}})),i.move();var s=r.node;a.forEach((function(e){var t,n,r=null===(t=e.prev())||void 0===t?void 0:t.prev(),i=null===(n=e.next())||void 0===n?void 0:n.next();r&&s.isMark(r)&&0===r.get().childNodes.length&&r.remove(),i&&s.isMark(i)&&0===i.get().childNodes.length&&i.remove()}))}else if(!e.isCard()){var c=r.node,d=r.mark;if(c.isInline(e,t)&&"br"!==e.name){var u=this.closest(e);if(!u.equal(e)&&c.isInline(u,t))c.unwrap(e);else{var h=function(){for(var r=d.closest(e),i=e,o=function(){var t=r.clone(),o=e.clone();r.children().each((function(e){if(3!==e.nodeType||!/^\u200b$/.test(e.textContent||"")){var r=It(e);i.equal(r)||r.contains(i)?(i=c.wrap(c.replace(i,t),o),n.repairBoth(i)):c.wrap(r,t)}})),c.unwrap(r),r=d.closest(i)};r&&!r.equal(e)&&c.isMark(r,t);)o();return{v:i}}();if("object"===Object(l.a)(h))return h.v}}}}}]),e}(),gi=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,i=(t.list,n.range.get().shrinkToElementNode().shrinkToTextNode()),o=this.engine.block,a=o.closest(i.endNode),s=a.parent();if(s&&s.inEditor()&&r.isBlock(s)){var l;if("li"===s.name&&"p"===a.name){var c,d;1===(null===(c=a.get())||void 0===c?void 0:c.childNodes.length)&&"br"===(null===(d=a.first())||void 0===d?void 0:d.name)&&a.first().remove();var u=i.createSelection();n.unwrap(a),u.move(),a=o.closest(i.endNode)}if(i.collapsed&&(1===i.startContainer.childNodes.length&&"BR"===(null===(l=i.startContainer.firstChild)||void 0===l?void 0:l.nodeName)||o.isLastOffset(i,"end")&&o.isFirstOffset(i,"end")))return e.preventDefault(),["li"].indexOf(s.name)>=0?(o.unwrap("<".concat(s.name," />")),o.setBlocks("<".concat(s.name," />"))):(o.unwrap("<".concat(s.name," />")),o.setBlocks("<p />")),!1}return!r.isBlock(a)||s&&r.isList(s)||a.isCard()?"li"!==a.name||void 0:(e.preventDefault(),o.insertOrSplit(i,a),!1)}}]),e}(),mi=function(){function e(t){Object(u.a)(this,e),this.engine=void 0,this.engine=t}return Object(h.a)(e,[{key:"trigger",value:function(e){var t=this.engine,n=t.change,r=t.node,i=t.block,o=t.card,a=n.range.get();if(a.collapsed){var s=a.getPrevNode();if(s&&r.isBlock(s)&&r.isEmptyWithTrim(s)){e.preventDefault();var l=s.parent();return s.remove(),l&&this.engine.node.isEmpty(l)&&(l.isEditable()?(this.engine.node.html(l,"<p><br /></p>"),a.select(l,!0).shrinkToElementNode().collapse(!1)):(this.engine.node.html(l,"<br />"),a.select(l,!0).collapse(!1)),n.apply(a)),!1}var c=!!o.closest(a.startNode);if(c||i.isFirstOffset(a,"start")){var d=i.closest(a.startNode);return!(!c&&r.isRootBlock(d))||(e.preventDefault(),r.isEmpty(d)&&d.html("<br />"),n.mergeAfterDelete(d),n.change(!1),!1)}var u=a.cloneRange().shrinkToElementNode().shrinkToTextNode();u.startContainer.nodeType===Node.TEXT_NODE&&function(e){var t,i,o,a=e,s=a.commonAncestorContainer,l=a.commonAncestorNode.parent(),c=null===l||void 0===l?void 0:l.attributes();if(e.collapsed&&1===e.startOffset&&e.startContainer===s&&s.nodeType===Node.TEXT_NODE&&(!c||!["left","right"].includes(c[xe]))&&(e=e.cloneRange(),((null===(t=s.parentNode)||void 0===t||null===(i=t.childNodes)||void 0===i?void 0:i.length)||0)<=1&&1===(null===(o=s.textContent)||void 0===o?void 0:o.length))){var d=e,u=d.startNode,h=d.startOffset,p=u.parent();if(p&&r.isMark(p)&&h>0){var f=u.text().substr(h-1,1);if(/^\u200b$/.test(f))if(1===h){var v=p.prev();if(v&&!r.isEmpty(v)){var g=e.cloneRange().select(v,!0).shrinkToTextNode().collapse(!1),m=g.startNode,b=g.startOffset;e.setStart(m,b-1)}}else e.setStart(u,h-1)}return e.collapsed&&e.select(s,!0),n.delete(e,!0),n.apply(e),!0}return!1}(u)&&(e.preventDefault(),e.isDelete=!0,n.change())}}}]),e}(),bi=function(){function e(t){Object(u.a)(this,e),this.editor=void 0,this.pluginCaches=new Map,this.editor=t}return Object(h.a)(e,[{key:"init",value:function(){var e=this,t=this.editor;if(ct(t)){var n,r,i=t.typing,o=t.event,a=new gi(t);null===(n=i.getHandleListener("enter","keydown"))||void 0===n||n.on((function(e){return a.trigger(e)}));var s=new mi(t);null===(r=i.getHandleListener("backspace","keydown"))||void 0===r||r.on((function(e){return s.trigger(e)})),o.on("keyup:space",(function(t){return e.triggerMarkdown(t)})),o.on("keydown:enter",(function(t){return e.triggerMarkdown(t)}))}}},{key:"triggerMarkdown",value:function(e){var t,n=this.editor;if(ct(n)&&!1!==(null===(t=n.options.markdown)||void 0===t?void 0:t.mode)){var r=n.change,i=r.range.get();if(i.collapsed&&!r.isComposing()){var o=i.startNode,a=i.startOffset,s=o.type===Node.TEXT_NODE?o:o.children().eq(a-1);if(s){var l=this.closest(s);if(n.node.isRootBlock(l)){var c=s.text().trimEnd(),d=i.toPath(),u=ut(n,"zero"),h=u.parse(c,{});if(0!==h.length){var p=ht(n,u,h,!1);return!p||(e.preventDefault(),i.select(l,!0),r.paste(p,i),r.rangePathBeforeCommand=d,r.range.select(i),!1)}}}}}}},{key:"findPlugin",value:function(e){var t=this.editor,n=t.node,r=t.schema,i=t.plugin;if(0!==e.length&&n.isBlock(e)){var o=e.get().cloneNode().outerHTML,a=this.pluginCaches.get(o);if(a)return a;for(var s in i.components){var l=i.components[s];if(yr(l)&&(l.tagName&&"string"!==typeof l.tagName?l.tagName.indexOf(e.name)>-1:e.name===l.tagName)){var c=l.schema();if(Array.isArray(c)?c.find((function(t){return r.checkNode(e,t.attributes)})):r.checkNode(e,c.attributes))return this.pluginCaches.set(o,l),l}}return a}}},{key:"findTop",value:function(e,t){var n=this.editor,r=n.schema,i=n.node,o=n.list,a=r.closest(e.name),s=r.closest(t.name);if(a===parent.name||s===t.name)return t;if(r.isAllowIn(e.name,t.name))return e;if(i.isList(e)&&i.isList(t)){var l=parseInt(t.attributes(o.INDENT_KEY),10)||0,c=parseInt(e.attributes(o.INDENT_KEY),10)||0;t.attributes(o.INDENT_KEY,c?c+1:l+1)}return t}},{key:"closest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=e;e;){if((e.isEditable()||this.editor.node.isBlock(e))&&t(e))return e;var r=e.parent();if(!r)break;e=r}return n}},{key:"wrap",value:function(e,t){var n,r=this,i=this.editor;if(ct(i)){var o=i.change,a=i.node,s=i.schema,l=i.list,c=i.mark,d=t||o.range.toTrusty(),u=at(d.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,u)),a.isBlock(e)){var h=this.getBlocks(d),p=this.findPlugin(e);if(0===(h=h.map((function(t){var n;if(!t||t.isCard())return null;for(var i=e,o=null===(n=t)||void 0===n?void 0:n.parent();o&&!o.isEditable();){t=o;var l=o.parent();if(!l||!a.isBlock(l))break;o=l}return s.isAllowIn(i.name,t.name)?t:r.findPlugin(t)===p?t.children():null})).filter((function(e){return null!==e}))).length){var f=this.closest(d.startNode);if(f.isCard()||f.isEditable()||!s.isAllowIn(e.name,f.name))return;var v=d.createSelection();return f.children().each((function(t){e.append(t)})),f.append(e),void v.move()}var g=d.createSelection();null===(n=h[0])||void 0===n||n.before(e),h.forEach((function(t){t&&(p&&t.allChildren().forEach((function(e){if(a.isMark(e)){var t,n=c.findPlugin(e);if(!n)return;(null===(t=p.disableMark)||void 0===t?void 0:t.indexOf(n.constructor.pluginName))&&a.unwrap(e)}})),e.append(t))})),g.move(),this.merge(d),l.merge(void 0,d),t||o.apply(d)}}}},{key:"unwrap",value:function(e,t){var n=this.editor;if(ct(n)){var r=n.change,i=n.node,o=t||r.range.toTrusty(),a=at(o.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,a)),i.isBlock(e)){var s=this.getSiblings(o,e);if(0!==s.length){var l=s[0].node.parent();if(null===l||void 0===l?void 0:l.inEditor()){var c=s.some((function(e){return"left"===e.position})),d=s.some((function(e){return"right"===e.position})),u=void 0;if(c){var h=l;u=i.clone(h,!1,!1),h.before(u)}var p=void 0;if(d){var f=s[s.length-1].node.parent();f&&(p=i.clone(f,!1,!1),null===f||void 0===f||f.after(p))}var v=o.createSelection(),g=i;s.forEach((function(t){var n,r,i,o=t.position,a=t.node,s=a.parent();"left"===o&&(null===(n=u)||void 0===n||n.append(a));"center"===o&&((null===s||void 0===s?void 0:s.name)===(null===(r=e)||void 0===r?void 0:r.name)&&(null===s||void 0===s?void 0:s.inEditor())&&g.unwrap(s));"right"===o&&(null===(i=p)||void 0===i||i.append(a))})),u&&"ol"===u.name&&p&&"ol"===p.name&&p.attributes("start",(parseInt(u.attributes("start"),10)||1)+u.find("li").length),v.move(),t||r.apply(o)}}}}}},{key:"getSiblings",value:function(e,t){var n=this,r=[],i=this.editor.node;if(!i.isBlock(t))return r;for(var o=function(e,t){for(var r=n.closest(e);r;){var i=r.parent();if(!i)break;if(!r.inEditor())break;if(r.text().trim()!==i.text().trim())break;if(i.name===t)break;r=i}return r},a=o(e.startNode,t.name),s=o(e.endNode,t.name),l=a.parent(),c="left",d=null===l||void 0===l?void 0:l.first();d;){if(d=It(d),!i.isBlock(d))return r;if(!d.inEditor())return r;d[0]===a[0]&&(c="center"),r.push({position:c,node:d}),d[0]===s[0]&&(c="right"),d=d.next()}return r}},{key:"split",value:function(e){var t,n,r=this.editor;if(ct(r)){var i=r.change,o=r.mark,a=r.nodeId,s=e||i.range.toTrusty();s.collapsed||i.delete(s);var l=this.closest(s.startNode);if(l.isEditable()||l.inEditor()){if(l.isEditable()){var c=s.getStartOffsetNode();return c&&s.select(c,!0).shrinkToElementNode().collapse(!1),void(e||i.apply(s))}var d=s.cloneRange();d.shrinkToElementNode().shrinkToTextNode().collapse(!0);var u=o.findMarks(d).filter((function(e){var t=r.mark.findPlugin(e);return!1!==(null===t||void 0===t?void 0:t.copyOnEnter)&&!1!==(null===t||void 0===t?void 0:t.followStyle)})),h=this.getBlockByRange({block:l[0],range:s,isLeft:!1,keepDataId:!0}),p=r.node;h.traverse((function(e){!p.isVoid(e)&&(p.isInline(e)||p.isMark(e))&&p.isEmpty(e)&&e.remove()}),!0);var f=function(e){return p.isBlock(e)&&(0===e.childNodes.length||""===e.innerText)};return f(l[0])&&!f(h[0])?a.generate(l,!0):a.generate(h,!0),l.after(h),p.isEmpty(l)&&p.html(l,p.getBatchAppendHTML(u,u.length>0?"&#8203;":"<br />")),p.isEmpty(h)&&p.html(h,p.getBatchAppendHTML(u,u.length>0?"&#8203;":"<br />")),l.children().each((function(e){p.isInline(e)&&r.inline.repairCursor(e)})),h.children().each((function(e){p.isInline(e)&&r.inline.repairCursor(e)})),s.select(h,!0).shrinkToElementNode(),1===(null===(t=h.get())||void 0===t?void 0:t.childNodes.length)&&"br"===(null===(n=h.first())||void 0===n?void 0:n.name)?s.collapse(!1):s.collapse(!0),e||i.apply(s),h}}}},{key:"insert",value:function(e,t,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.editor;if(ct(a)){var s=a.change,l=a.node,c=a.list,d=a.inline,u=t||s.range.toTrusty(),h=at(u.startContainer);if(("string"===typeof e||wt(e))&&(e=It(e,h)),l.isBlock(e)){u.collapsed||s.delete(u);var p=this.closest(u.startNode);if(p.isEditable()||p.inEditor()){if(p.isEditable())return l.insert(e,u,o),u.collapse(!1),void(t||s.apply(u));if(l.isList(u.startNode)||u.startNode.closest("li").length>0){var f=h.createDocumentFragment();return f.appendChild(e[0]),c.insert(f,u),void(t||s.apply(u))}1===(null===(r=p.get())||void 0===r?void 0:r.childNodes.length)&&"br"===(null===(i=p.first())||void 0===i?void 0:i.name)&&u.select(p,!0).collapse(!1);var v=u.enlargeToElementNode().createSelection();if(v.has()){p=n?n(p):p;var g=v.getNode(p,"left");g.traverse((function(e){e.equal(g)||l.isBlock(e)&&(l.isEmpty(e)||c.isEmptyItem(e))&&e.remove()}));var m,b=v.getNode(p,"right",!0,(function(e){if(e.isCard()){var t=e.parent();if(t&&l.isCustomize(t))return!1}return!0})),y=p.children();if(l.isEmpty(p)||y.each((function(e,t){var n,r=y.eq(t);(null===r||void 0===r?void 0:r.isCard())||(null===(n=y.eq(t))||void 0===n||n.remove())})),b.traverse((function(e){e.equal(b)&&(l.isBlock(e)&&(l.isEmpty(e)||c.isEmptyItem(e))?e.remove():l.isList(e)&&c.addBr(e))})),b.length>0&&!l.isEmpty(b)&&!c.isEmptyItem(b)){var w=b.clone(!1);a.nodeId.generate(w,!0);var k=b.children();k.each((function(e,t){var n;if(null===(n=k.eq(t))||void 0===n?void 0:n.isCard()){var r=a.card.find(e);r&&w.append(r.root)}else w.append(e)})),b=w,p.after(w)}if(g.length>0&&!l.isEmpty(g)&&!c.isEmptyItem(g)){var x=void 0;(m=g.children()).each((function(e,t){var n=m.eq(t);n&&l.isInline(n)&&d.repairCursor(n),(null===n||void 0===n?void 0:n.isCard())?(x=x?x.next():p.first())&&(m[t]=x[0]):x?(x.after(e),x=n):(x=n,p.prepend(e))}))}p&&p.length>0&&(u.select(p,!0),u.collapse(!1)),v.focus&&v.focus.remove(),v.anchor&&v.anchor.remove(),l.insert(e,u,o),t||s.apply(u)}else t||s.apply(u)}else t||s.apply(u)}}}},{key:"setBlocks",value:function(e,t){var n=this,r=this.editor;if(ct(r)){var i=r.node,o=r.schema,a=r.mark,s=r.change,l=t||s.range.toTrusty(),c=at(l.startContainer),d=null,u={};"string"===typeof e?(d=It(e,c),(u=d.attributes()).style=d.css()):u=e;var h=this.getBlocks(l),p=l.startNode;if(p.isEditable()&&0===h.length){if(p.isCard()||p.isEditable())return;var f=d||It("<p></p>");if(!o.isAllowIn(f.name,p.name))return;i.setAttributes(f,u);var v=l.createSelection();p.children().each((function(e){f.append(e)}));var g=o.data.globals.block||{},m=p.attributes();Object.keys(m).forEach((function(e){e!==te&&"id"!==e&&g.name&&f.attributes(e,m[e])}));var b=g.style||{},y=p.css();return Object.keys(y).forEach((function(e){b[e]||delete y[e]})),f.css(y),p.append(f),v.move(),void(t||s.apply(l))}var w=d?this.findPlugin(d):void 0,k=l.createSelection();h.forEach((function(e){if(!e.attributes(be)){if(d){var t=o.data.globals.block||{},r=e.attributes();Object.keys(r).forEach((function(e){var n;e!==te&&"id"!==e&&t.name&&(null===(n=d)||void 0===n||n.attributes(e,r[e]))}));var s=t.style||{},l=e.css();Object.keys(l).forEach((function(e){s[e]||delete l[e]})),d.css(l)}if(!d||n.findPlugin(e)===w&&e.name===d.name)return d&&(u=d.attributes()),void i.setAttributes(e,u);if("p"===d.name||!o.isAllowIn(e.name,d.name)){w&&e.allChildren().forEach((function(e){if(i.isMark(e)){var t=a.findPlugin(e);if(!t)return;w.disableMark&&w.disableMark.indexOf(t.constructor.pluginName)>-1&&i.unwrap(e)}}));var c=i.replace(e,d),h=c.parent();!h||h.isEditable()||o.isAllowIn(h.name,c.name)||i.unwrap(h)}}})),k.move(),t||s.apply(l)}}},{key:"merge",value:function(e){var t=this.editor;if(ct(t)){var n=t.change,r=t.schema,i=e||n.range.toTrusty(),o=this.getBlocks(i);if(0!==o.length){var a=o[0].closest(re),s=r.getCanMergeTags();if(0!==s.length){var l=a.find(s.join(","));if(l.length>0){for(var c=i.createSelection(),d=l.next();d&&s.indexOf(d.name)>0;){var u=d.prev(),h=d.attributes(),p=null===u||void 0===u?void 0:u.attributes();d.name===(null===u||void 0===u?void 0:u.name)&&h.class===(p?p.class:void 0)&&Object.keys(h).join(",")===Object.keys(p||{}).join(",")&&t.node.merge(u,d),d=d.next()}c.move()}e||n.apply(i)}}}}},{key:"findBlocks",value:function(e){var t,n=this.editor;if((e=e.cloneRange()).startNode.isRoot()&&e.shrinkToElementNode(),!e.startNode.inEditor()||(null===(t=n.card.find(e.startNode))||void 0===t?void 0:t.type)===nn.BLOCK)return[];var r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,s=r,l=o;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[i]&&(s=r.childNodes[i]||r),o.nodeType===Node.ELEMENT_NODE&&a>0&&o.childNodes[a-1]&&(l=o.childNodes[a-1]||r),e.collapsed&&(s=l);var c=function(e,t,n){e.some((function(e){return e[0]===t[0]}))||(n?e.unshift(t):e.push(t))},d=function(e){for(var t=[];e&&!e.isEditable();){n.node.isBlock(e)&&t.push(e);var r=e.parent();if(!r)break;e=r}return t},u=this.getBlocks(e);d(It(s)).forEach((function(e){return c(u,e,!0)}));var h=e.commonAncestorNode,p=n.card.find(h,!0),f=null===p||void 0===p?void 0:p.isEditable,v=f&&(null===p||void 0===p?void 0:p.getSelectionNodes)?p.getSelectionNodes():[];return 0===v.length&&(f=!1),e.collapsed&&!f||(d(It(l)).forEach((function(e){return c(u,e)})),v.forEach((function(e){e.traverse((function(e){e.isElement()&&!e.isCard()&&n.node.isBlock(e)&&c(u,e)}),!0,"editable")}))),u}},{key:"isFirstOffset",value:function(e,t){var n=e,r=n.startNode,i=n.endNode,o=n.startOffset,a=n.endOffset,s="start"===t?r:i,l="start"===t?o:a;e=e.cloneRange();var c=this.closest(s);e.select(c,!0),e.setEnd(s[0],l);var d=this.editor;d.node.isBlock(s)||e.enlargeToElementNode();var u=e.cloneContents();if(!u.firstChild)return!0;var h=d.node;if(1===u.childNodes.length&&"br"===It(u.firstChild).name)return!0;var p=It("<div />");return p.append(u),h.isEmpty(p)}},{key:"isLastOffset",value:function(e,t){var n=e,r=n.startNode,i=n.endNode,o=n.startOffset,a=n.endOffset,s="start"===t?r:i,l="start"===t?o:a;e=e.cloneRange();var c=this.closest(s);e.select(c,!0),e.setStart(s,l);var d=this.editor.node;d.isBlock(s)||e.enlargeToElementNode();var u=e.cloneContents();if(!u.firstChild)return!0;var h=It("<div />");return h.append(u),0>=h.find("br").length&&d.isEmpty(h)}},{key:"getBlocks",value:function(e){(e=e.cloneRange()).shrinkToElementNode(),e.shrinkToTextNode();var t=this.editor,n=t.node,r=this.closest(e.startNode);e.startNode.isRoot()&&(r=It(e.getStartOffsetNode()));var i=this.closest(e.endNode);e.endNode.isRoot()&&(i=It(e.getEndOffsetNode()));var o=this.closest(e.commonAncestorNode),a=[],s=!1,l=e.commonAncestorNode,c=t.card.find(l,!0),d=null===c||void 0===c?void 0:c.isEditable,u=d?(null===c||void 0===c?void 0:c.getSelectionNodes)?c.getSelectionNodes():[]:[o];return 0===u.length&&(d=!1,u.push(o)),u.forEach((function(e){e.traverse((function(e){var n=It(e);if(n.equal(r)&&(s=!0),(s||d)&&t.node.isBlock(n)&&!n.isCard()&&n.inEditor()&&a.push(n),n.equal(i))return s=!1,!1}),!0,"editable")})),a.length>1&&this.isFirstOffset(e,"end")&&!n.isEmpty(i)&&a.pop(),a}},{key:"getBlockByRange",value:function(e){var t=e.block,n=e.range,r=e.isLeft,i=e.clone,o=void 0!==i&&i,a=e.keepDataId,s=void 0!==a&&a;wt(t)&&(t=It(t));var l=this.editor,c=Kt.create(l,t.document);r?(c.select(t,!0),c.setEnd(n.startContainer,n.startOffset)):(c.select(t,!0),c.setStart(n.endContainer,n.endOffset));var d=o?c.cloneContents():c.extractContents(),u=s?t.clone(!1):l.node.clone(t,!1,!1);return u.append(d),o&&u.find(Ee).each((function(e){var t=It(e),n=t.attributes(be);t.attributes(ye,n),t.removeAttributes(be)})),u}},{key:"getLeftText",value:function(e,t){var n=this.editor;return ct(n)?(t=t||n.change.range.get(),this.getBlockByRange({block:e,range:t,isLeft:!0,clone:!0}).text().replace(/\u200B/g,"")):""}},{key:"removeLeftText",value:function(e,t){var n=this.editor;if(ct(n)){t=t||n.change.range.get(),wt(e)&&(e=It(e)),t.createSelection();var r=e.find(me),i=!1;e.traverse((function(e){var t=It(e);if(t.equal(r))return r.remove(),void(i=!0);i&&t.isText()&&t.remove()}),!1)}}},{key:"flat",value:function(e,t){var n=this.editor;if(ct(n))for(var r=n.schema,i=n.node,o=r.getCanMergeTags(),a=e.parent(),s=t.fragment?t[0].parentNode:t.get();a&&s&&a.get()!==s&&a.inEditor();){if(e.isCard())a.before(e);else if(i.isList(a)&&"li"===e.name||o.indexOf(a.name)>-1&&i.isBlock(e)&&a.name!==e.name){var l=i.clone(a,!1,!1);l.append(e),e=l,a.before(e)}else e=i.replace(e,i.clone(this.findTop(a,e),!1,!1)),a.before(e);a.first()||a.remove(),a=e.parent()}}},{key:"insertEmptyBlock",value:function(e,t){var n=this.editor;if(ct(n)){var r=n.change,i=r.blocks,o=r.marks,a=n.node;if(this.insert(t),i[0]){var s=i[0].css();t.css(s)}var l=t.find("br");o.forEach((function(e){var t=n.mark.findPlugin(e);e=a.clone(e,!1,!1),!1!==(null===t||void 0===t?void 0:t.copyOnEnter)&&!1!==(null===t||void 0===t?void 0:t.followStyle)&&(e=a.clone(e,!1,!1),l.before(e),e.append(l),l=e)}));var c=(l=t.find("br")).parent();c&&a.isMark(c)&&(l=a.replace(l,It("\u200b",null))),e.select(l).shrinkToTextNode(),e.collapse(!1),e.scrollIntoView(),r.range.select(e)}}},{key:"insertOrSplit",value:function(e,t){var n,r,i,o=e.cloneRange();if(o.enlargeFromTextNode(),this.isLastOffset(e,"end")||o.endNode.type===Node.ELEMENT_NODE&&((null===(n=t.get())||void 0===n?void 0:n.childNodes.length)||0)>0&&o.endContainer.childNodes[o.endOffset]===(null===(r=t.last())||void 0===r?void 0:r.get())&&"br"===(null===(i=t.first())||void 0===i?void 0:i.name)){var a=It("<p><br /></p>");if("p"===t.name){var s=t.attributes();Object.keys(s).forEach((function(e){e!==te&&a.attributes(e,s[e])}))}this.insertEmptyBlock(e,a)}else this.split()}}]),e}(),yi=Object(y.a)("_scrollNode"),wi=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.kind="editor",this.options={lang:"zh-CN",locale:{},plugins:[],cards:[],config:{},iconFonts:"url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff2?t=1638071536645') format('woff2'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff?t=1638071536645') format('woff'), url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.ttf?t=1638071536645') format('truetype')"},this.container=void 0,this.language=void 0,this.root=void 0,this.card=void 0,this.plugin=void 0,this.node=void 0,this.nodeId=void 0,this.list=void 0,this.mark=void 0,this.inline=void 0,this.block=void 0,this.event=void 0,this.schema=void 0,this.conversion=void 0,this.command=void 0,this.clipboard=void 0,this.request=void 0,Object.defineProperty(this,yi,{writable:!0,value:null}),this.options=Object(d.a)(Object(d.a)({},this.options),n);var i=this.options.iconFonts,o=document.querySelector("#am-iconfont");if(!o&&!1!==i){(o=document.createElement("style")).setAttribute("type","text/css"),o.setAttribute("id","am-iconfont");var a='@font-face { font-family: "data-icon";';Array.isArray(i)&&(i=i.map((function(e){return"url('".concat(e.url,"') format('").concat(e.format,"')")})).join(",")),a+="src: ".concat(i,";}"),o.innerHTML=a,document.head.appendChild(o)}this.container=It(t),this.container.attributes(ee,ne),this.language=new fr(this.options.lang||"zh-CN",U()(vr,null===n||void 0===n?void 0:n.locale)),this.event=new bt,this.command=new Er(this),this.schema=new Mr,this.schema.add(zt),this.conversion=new Tr(this),Dt.forEach((function(e){return r.conversion.add(e.from,e.to)})),this.card=new Br(this,this.options.lazyRender),this.clipboard=new Hr(this),this.request=new ai,this.plugin=new Cr(this),this.node=new Ht(this),this.nodeId=new Fr(this.schema),this.list=new ci(this),this.mark=new ui(this),this.inline=new vi(this),this.block=new bi(this),this.root=It(this.options.root||this.container.parent()||document.body);var s=this.root.css("position");s&&"static"!==s||this.root.css("position","relative")}return Object(h.a)(e,[{key:"scrollNode",get:function(){if(Object(b.a)(this,yi)[yi])return Object(b.a)(this,yi)[yi];for(var e=this.options.scrollNode,t=e?"function"===typeof e?e():e:null,n=["auto","scroll"],r=this.container.parent();!t&&r&&r.length>0&&"body"!==r.name;){if(n.includes(r.css("overflow"))||n.includes(r.css("overflow-y"))){t=r.get();break}r=r.parent()}return null===t&&(t=document.documentElement),Object(b.a)(this,yi)[yi]=t?It(t):null,Object(b.a)(this,yi)[yi]}},{key:"init",value:function(){this.mark.init(),this.inline.init(),this.block.init(),this.list.init(),this.card.init(this.options.cards||[]),this.plugin.init(this.options.plugins||[],this.options.config||{}),this.nodeId.init()}},{key:"setScrollNode",value:function(e){Object(b.a)(this,yi)[yi]=e?It(e):null}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"trigger",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.event).trigger.apply(t,[e].concat(r))}},{key:"messageSuccess",value:function(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).log.apply(n,[e,"success:".concat(t)].concat(i))}},{key:"messageError",value:function(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).error.apply(n,[e,"error:".concat(t)].concat(i))}},{key:"messageConfirm",value:function(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return(n=console).log.apply(n,[e,"confirm:".concat(t)].concat(i)),Promise.reject(!1)}},{key:"getSelectionData",value:function(e){var t,n,r=this;if(e||(e=null!==(t=Kt.from(this))&&void 0!==t?t:void 0),e){var i=(e=e.cloneRange()).startNode.closest("[".concat(be,"]"),(function(e){return It(e).isEditable()?void 0:e.parentNode||void 0}));if(i.length>0&&!e.collapsed&&0===e.endOffset&&(e.endContainer.previousSibling&&e.setEndAfter(e.endContainer.previousSibling),!e.collapsed&&e.endOffset>0&&e.endContainer.childNodes[e.endOffset-1]===i[0])){var o=e.startNode.closest("[".concat(xe,'="center"]'),(function(e){return It(e).isEditable()?void 0:e.parentNode||void 0}));o.length>0?e.setEnd(o[0],o[0].childNodes.length):e.setEnd(i[0],i[0].childNodes.length)}var a=e.commonAncestorNode;if(i=a.closest("[".concat(be,"]"),(function(e){return It(e).isEditable()?void 0:e.parentNode||void 0})),i.length>0){var s=a.closest("[".concat(xe,'="center"]'),(function(e){return It(e).isEditable()?void 0:e.parentNode||void 0}));0===s.length&&(e.select(i),a=e.commonAncestorNode)}if((a.inEditor()||a.isRoot())&&!e.collapsed){var l=function(e){if(0===e.length)return{};for(var t=e.length-1;t>0;t--){e[t].appendChild(e[t-1])}return{inner:e[0],outter:e[e.length-1]}};if(i=a.closest("[".concat(be,"]"),(function(e){return e.parentNode||void 0})),i.length>0){var c=this.card.find(i);if(c&&c.getSelectionNodes){var d=c.getSelectionNodes();if(d.length>0){var u=l(d.map((function(e){return e[0]}))),h=u.inner,p=u.outter,f=d.map((function(e){return e.html()})).join("");return{html:f=new cn("<div>".concat(f,"</div>"),this).toHTML(h,p),text:new cn(f,this).toText(this.schema,!0)}}}else if(!(null===c||void 0===c?void 0:c.isEditable))return}var v,g=this.node,m=this.list,b=e.startNode.closest("li");if(b&&g.isCustomize(b)){var y=e.endNode.closest("li");if(!b.equal(y)||m.isLast(e)&&m.isFirst(e))if(m.isFirst(e)){var w=b.parent(),k=b.getIndex();w&&e.setStart(w,k<0?0:k)}else{var x,O,C=b.parent(),E=e.createSelection(),j=E.getNode(b,"center",!0);if(null===(x=E.anchor)||void 0===x||x.remove(),null===(O=E.focus)||void 0===O||O.remove(),ct(this)&&this.change.combinText(),j.length>0){var M=!1;j.each((function(e,t){var n=j.eq(t);M||"li"!==(null===n||void 0===n?void 0:n.name)?M&&(null===n||void 0===n||n.remove()):M=!0}));var N=b.first(),S=N?this.card.find(N):void 0;S&&(v=j,this.list.addCardToCustomize(v,S.name,S.getValue()),C&&g.wrap(v,null===C||void 0===C?void 0:C.clone()))}}}var T=e.enlargeToElementNode(!0).cloneContents(),_=[];if(a.isText()&&1===T.childNodes.length&&(null===(n=T.firstChild)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE)for(var A=a.parent();A&&(g.isMark(A)||g.isInline(A));)_.push(A.clone(!1).get()),A=A.parent();T.querySelectorAll("li").forEach((function(e){var t,n,i=It(e),o=i.attributes(te);if(o){var a=null===(t=r.container.get())||void 0===t?void 0:t.querySelector("[".concat(te,"=").concat(o,"]"));g.isCustomize(i)&&!(null===(n=i.first())||void 0===n?void 0:n.isCard())&&(null===a||void 0===a?void 0:a.firstChild)&&i.prepend(g.clone(It(a.firstChild),!0,!1));var s=null===a||void 0===a?void 0:a.parentElement;s=s?It(s.cloneNode(!1)):null;var l=e.parentElement;!(a&&s&&g.isList(s))||l&&g.isList(l)||("ol"===s.name&&s.removeAttributes("start"),g.wrap(e,s))}}));var I=l(_),D=I.inner,z=I.outter,L=[];T.childNodes.forEach((function(e){var t=It(e);(g.isList(t)||"li"===t.name)&&L.push(t)})),this.nodeId.generateAll(It(T),!0),this.list.merge(L);var R=new cn(T,this).toHTML(D,z);return{html:R,text:new cn(R,this).toText(this.schema,!0)}}}}},{key:"destroy",value:function(){this.container.removeAttributes(ee),this.event.destroy(),this.plugin.destroy(),this.card.destroy(),this.container.empty()}}]),e}();tn('  .data-icon {\r\n    font-family: "data-icon" !important;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n  }\r\n  \r\n  .data-icon-block-image:before {\r\n    content: "\\ea20";\r\n  }\r\n  \r\n  .data-icon-inline-image:before {\r\n    content: "\\e601";\r\n  }\r\n  \r\n  .data-icon-no-border:before {\r\n    content: "\\e608";\r\n  }\r\n  \r\n  .data-icon-line-height:before {\r\n    content: "\\e697";\r\n  }\r\n  \r\n  .data-icon-text:before {\r\n    content: "\\e600";\r\n  }\r\n  \r\n  .data-icon-comment:before {\r\n    content: "\\e73e";\r\n  }\r\n  \r\n  .data-icon-huanyuan:before {\r\n    content: "\\e60a";\r\n  }\r\n  \r\n  .data-icon-label:before {\r\n    content: "\\e714";\r\n  }\r\n  \r\n  .data-icon-video:before {\r\n    content: "\\e741";\r\n  }\r\n  \r\n  .data-icon-table:before {\r\n    content: "\\e6a8";\r\n  }\r\n  \r\n  .data-icon-h:before {\r\n    content: "\\e7a0";\r\n  }\r\n  \r\n  .data-icon-collapse-subtree:before {\r\n    content: "\\e754";\r\n  }\r\n  \r\n  .data-icon-expand-subtree:before {\r\n    content: "\\e792";\r\n  }\r\n  \r\n  .data-icon-sub-node:before {\r\n    content: "\\e78e";\r\n  }\r\n  \r\n  .data-icon-sister-node:before {\r\n    content: "\\e784";\r\n  }\r\n  \r\n  .data-icon-sup:before {\r\n    content: "\\e790";\r\n  }\r\n  \r\n  .data-icon-sub:before {\r\n    content: "\\e75a";\r\n  }\r\n  \r\n  .data-icon-maximize:before {\r\n    content: "\\e752";\r\n  }\r\n  \r\n  .data-icon-codeblock:before {\r\n    content: "\\e709";\r\n  }\r\n  \r\n  .data-icon-emoji:before {\r\n    content: "\\e73a";\r\n  }\r\n  \r\n  .data-icon-h4:before {\r\n    content: "\\e759";\r\n  }\r\n  \r\n  .data-icon-h1:before {\r\n    content: "\\e75b";\r\n  }\r\n  \r\n  .data-icon-h5:before {\r\n    content: "\\e75c";\r\n  }\r\n  \r\n  .data-icon-h2:before {\r\n    content: "\\e75d";\r\n  }\r\n  \r\n  .data-icon-h3:before {\r\n    content: "\\e760";\r\n  }\r\n  \r\n  .data-icon-h6:before {\r\n    content: "\\e761";\r\n  }\r\n  \r\n  .data-icon-liuchengtu:before {\r\n    content: "\\e61c";\r\n  }\r\n  \r\n  .data-icon-website:before {\r\n    content: "\\e694";\r\n  }\r\n  \r\n  .data-icon-preferences:before {\r\n    content: "\\e788";\r\n  }\r\n  \r\n  .data-icon-hr:before {\r\n    content: "\\e76a";\r\n  }\r\n  \r\n  .data-icon-task-list:before {\r\n    content: "\\e79f";\r\n  }\r\n  \r\n  .data-icon-unordered-list:before {\r\n    content: "\\e777";\r\n  }\r\n  \r\n  .data-icon-ordered-list:before {\r\n    content: "\\e795";\r\n  }\r\n  \r\n  .data-icon-arrow-left:before {\r\n    content: "\\e748";\r\n  }\r\n  \r\n  .data-icon-arrow-up:before {\r\n    content: "\\e769";\r\n  }\r\n  \r\n  .data-icon-arrow-right:before {\r\n    content: "\\e779";\r\n  }\r\n  \r\n  .data-icon-arrow-down:before {\r\n    content: "\\e79a";\r\n  }\r\n  \r\n  .data-icon-moremark:before {\r\n    content: "\\e772";\r\n  }\r\n  \r\n  .data-icon-clean:before {\r\n    content: "\\e74d";\r\n  }\r\n  \r\n  .data-icon-paintformat:before {\r\n    content: "\\e756";\r\n  }\r\n  \r\n  .data-icon-lock:before {\r\n    content: "\\e768";\r\n  }\r\n  \r\n  .data-icon-loading:before {\r\n    content: "\\e76b";\r\n  }\r\n  \r\n  .data-icon-unlock:before {\r\n    content: "\\e796";\r\n  }\r\n  \r\n  .data-icon-collapse:before {\r\n    content: "\\e79e";\r\n  }\r\n  \r\n  .data-icon-align-bottom:before {\r\n    content: "\\e72b";\r\n  }\r\n  \r\n  .data-icon-attachment:before {\r\n    content: "\\e72c";\r\n  }\r\n  \r\n  .data-icon-bold:before {\r\n    content: "\\e72d";\r\n  }\r\n  \r\n  .data-icon-border-color:before {\r\n    content: "\\e72e";\r\n  }\r\n  \r\n  .data-icon-border-all:before {\r\n    content: "\\e72f";\r\n  }\r\n  \r\n  .data-icon-border-inner:before {\r\n    content: "\\e730";\r\n  }\r\n  \r\n  .data-icon-border-left:before {\r\n    content: "\\e731";\r\n  }\r\n  \r\n  .data-icon-border-bottom:before {\r\n    content: "\\e732";\r\n  }\r\n  \r\n  .data-icon-border-none:before {\r\n    content: "\\e733";\r\n  }\r\n  \r\n  .data-icon-box:before {\r\n    content: "\\e734";\r\n  }\r\n  \r\n  .data-icon-border-outer:before {\r\n    content: "\\e735";\r\n  }\r\n  \r\n  .data-icon-border-right:before {\r\n    content: "\\e736";\r\n  }\r\n  \r\n  .data-icon-clear:before {\r\n    content: "\\e737";\r\n  }\r\n  \r\n  .data-icon-close:before {\r\n    content: "\\e738";\r\n  }\r\n  \r\n  .data-icon-code-example:before {\r\n    content: "\\e739";\r\n  }\r\n  \r\n  .data-icon-clip:before {\r\n    content: "\\e73b";\r\n  }\r\n  \r\n  .data-icon-border-up:before {\r\n    content: "\\e73c";\r\n  }\r\n  \r\n  .data-icon-code:before {\r\n    content: "\\e73d";\r\n  }\r\n  \r\n  .data-icon-command:before {\r\n    content: "\\e73f";\r\n  }\r\n  \r\n  .data-icon-compact-display:before {\r\n    content: "\\e740";\r\n  }\r\n  \r\n  .data-icon-copy:before {\r\n    content: "\\e742";\r\n  }\r\n  \r\n  .data-icon-download:before {\r\n    content: "\\e743";\r\n  }\r\n  \r\n  .data-icon-deletecolumn:before {\r\n    content: "\\e744";\r\n  }\r\n  \r\n  .data-icon-cut:before {\r\n    content: "\\e745";\r\n  }\r\n  \r\n  .data-icon-decreasedecimalplace:before {\r\n    content: "\\e746";\r\n  }\r\n  \r\n  .data-icon-drag:before {\r\n    content: "\\e747";\r\n  }\r\n  \r\n  .data-icon-delete:before {\r\n    content: "\\e749";\r\n  }\r\n  \r\n  .data-icon-drag-circle:before {\r\n    content: "\\e74a";\r\n  }\r\n  \r\n  .data-icon-deleterow:before {\r\n    content: "\\e74b";\r\n  }\r\n  \r\n  .data-icon-edit:before {\r\n    content: "\\e74c";\r\n  }\r\n  \r\n  .data-icon-filter:before {\r\n    content: "\\e74e";\r\n  }\r\n  \r\n  .data-icon-expand:before {\r\n    content: "\\e74f";\r\n  }\r\n  \r\n  .data-icon-error:before {\r\n    content: "\\e750";\r\n  }\r\n  \r\n  .data-icon-freezerowcoloum:before {\r\n    content: "\\e751";\r\n  }\r\n  \r\n  .data-icon-freezefirstrow:before {\r\n    content: "\\e753";\r\n  }\r\n  \r\n  .data-icon-freezzecolumn:before {\r\n    content: "\\e755";\r\n  }\r\n  \r\n  .data-icon-border-style:before {\r\n    content: "\\e757";\r\n  }\r\n  \r\n  .data-icon-gotolink:before {\r\n    content: "\\e758";\r\n  }\r\n  \r\n  .data-icon-increasedecimalplace:before {\r\n    content: "\\e75e";\r\n  }\r\n  \r\n  .data-icon-insertrowbelow:before {\r\n    content: "\\e75f";\r\n  }\r\n  \r\n  .data-icon-image:before {\r\n    content: "\\e762";\r\n  }\r\n  \r\n  .data-icon-italic:before {\r\n    content: "\\e763";\r\n  }\r\n  \r\n  .data-icon-indent:before {\r\n    content: "\\e764";\r\n  }\r\n  \r\n  .data-icon-insertrowabove:before {\r\n    content: "\\e765";\r\n  }\r\n  \r\n  .data-icon-insertrowright:before {\r\n    content: "\\e766";\r\n  }\r\n  \r\n  .data-icon-left-circle-fill:before {\r\n    content: "\\e767";\r\n  }\r\n  \r\n  .data-icon-link:before {\r\n    content: "\\e76c";\r\n  }\r\n  \r\n  .data-icon-keyboard:before {\r\n    content: "\\e76d";\r\n  }\r\n  \r\n  .data-icon-more:before {\r\n    content: "\\e76e";\r\n  }\r\n  \r\n  .data-icon-merge-cells:before {\r\n    content: "\\e76f";\r\n  }\r\n  \r\n  .data-icon-outdent:before {\r\n    content: "\\e770";\r\n  }\r\n  \r\n  .data-icon-mention:before {\r\n    content: "\\e771";\r\n  }\r\n  \r\n  .data-icon-plus:before {\r\n    content: "\\e773";\r\n  }\r\n  \r\n  .data-icon-minus-circle-o:before {\r\n    content: "\\e774";\r\n  }\r\n  \r\n  .data-icon-highlight:before {\r\n    content: "\\e775";\r\n  }\r\n  \r\n  .data-icon-paste:before {\r\n    content: "\\e776";\r\n  }\r\n  \r\n  .data-icon-insertrowleft:before {\r\n    content: "\\e778";\r\n  }\r\n  \r\n  .data-icon-quote:before {\r\n    content: "\\e77a";\r\n  }\r\n  \r\n  .data-icon-plus-circle-o:before {\r\n    content: "\\e77b";\r\n  }\r\n  \r\n  .data-icon-right-circle-fill:before {\r\n    content: "\\e77c";\r\n  }\r\n  \r\n  .data-icon-question-circle-o:before {\r\n    content: "\\e77d";\r\n  }\r\n  \r\n  .data-icon-preview:before {\r\n    content: "\\e77e";\r\n  }\r\n  \r\n  .data-icon-reload:before {\r\n    content: "\\e77f";\r\n  }\r\n  \r\n  .data-icon-rotate-left:before {\r\n    content: "\\e780";\r\n  }\r\n  \r\n  .data-icon-math:before {\r\n    content: "\\e781";\r\n  }\r\n  \r\n  .data-icon-overflow:before {\r\n    content: "\\e782";\r\n  }\r\n  \r\n  .data-icon-redo:before {\r\n    content: "\\e783";\r\n  }\r\n  \r\n  .data-icon-searchreplace:before {\r\n    content: "\\e785";\r\n  }\r\n  \r\n  .data-icon-save:before {\r\n    content: "\\e786";\r\n  }\r\n  \r\n  .data-icon-singleselect:before {\r\n    content: "\\e787";\r\n  }\r\n  \r\n  .data-icon-rotate-right:before {\r\n    content: "\\e789";\r\n  }\r\n  \r\n  .data-icon-sort-ascending:before {\r\n    content: "\\e78a";\r\n  }\r\n  \r\n  .data-icon-sort-descending:before {\r\n    content: "\\e78b";\r\n  }\r\n  \r\n  .data-icon-toc:before {\r\n    content: "\\e78c";\r\n  }\r\n  \r\n  .data-icon-solit-cells:before {\r\n    content: "\\e78d";\r\n  }\r\n  \r\n  .data-icon-translate:before {\r\n    content: "\\e78f";\r\n  }\r\n  \r\n  .data-icon-successful:before {\r\n    content: "\\e791";\r\n  }\r\n  \r\n  .data-icon-strikethrough:before {\r\n    content: "\\e793";\r\n  }\r\n  \r\n  .data-icon-undo:before {\r\n    content: "\\e794";\r\n  }\r\n  \r\n  .data-icon-underline:before {\r\n    content: "\\e797";\r\n  }\r\n  \r\n  .data-icon-unlink:before {\r\n    content: "\\e798";\r\n  }\r\n  \r\n  .data-icon-wrap:before {\r\n    content: "\\e799";\r\n  }\r\n  \r\n  .data-icon-upload:before {\r\n    content: "\\e79b";\r\n  }\r\n  \r\n  .data-icon-zoom-out:before {\r\n    content: "\\e79c";\r\n  }\r\n  \r\n  .data-icon-zoom-in:before {\r\n    content: "\\e79d";\r\n  }\r\n  \r\n  .data-icon-align-center:before {\r\n    content: "\\e725";\r\n  }\r\n  \r\n  .data-icon-align-justify:before {\r\n    content: "\\e726";\r\n  }\r\n  \r\n  .data-icon-align-left:before {\r\n    content: "\\e727";\r\n  }\r\n  \r\n  .data-icon-align-top:before {\r\n    content: "\\e728";\r\n  }\r\n  \r\n  .data-icon-align-right:before {\r\n    content: "\\e729";\r\n  }\r\n  \r\n  .data-icon-align-middle:before {\r\n    content: "\\e72a";\r\n  }\r\n\r\n.data-anticon {\r\n    display: inline-block;\r\n    font-style: normal;\r\n    vertical-align: -0.125em;\r\n    text-align: center;\r\n    text-transform: none;\r\n    line-height: 0;\r\n    text-rendering: optimizeLegibility;\r\n    -webkit-font-smoothing: antialiased;\r\n}\r\n\r\n.data-anticon svg {\r\n    display: inline-block;\r\n}\r\n\r\n@-webkit-keyframes loadingCircle {\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n}\r\n@keyframes loadingCircle {\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n.data-anticon .data-anticon-spin {\r\n    display: inline-block;\r\n    -webkit-animation: loadingCircle 1s infinite linear;\r\n    animation: loadingCircle 1s infinite linear;\r\n}\r\n\r\n.data-anticon > * {\r\n    line-height: 1;\r\n}\r\n\r\n.am-engine {\r\n    position: relative;\r\n    background-color: #FFFFFF;\r\n}\r\n\r\n.am-engine.am-engine-placeholder:before {\r\n  content: attr(data-placeholder);\r\n  pointer-events: none;\r\n  position: absolute;\r\n  color: #bbbfc4;\r\n  height: 0;\r\n}\r\n\r\n.am-engine ::-moz-selection {\r\n    background: rgba(180, 213, 254, 0.5) !important;\r\n    color: inherit!important;\r\n}\r\n\r\n.am-engine ::selection {\r\n    background: rgba(180, 213, 254, 0.5) !important;\r\n    color: inherit!important;\r\n}\r\n\r\n.am-engine , .am-engine-view {\r\n    font-family: \'Chinese Quote\', \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif, \'Apple Color Emoji\';\r\n\tword-wrap: break-word;\r\n\toutline-style: none;\r\n\twhite-space: pre-wrap;\r\n    -webkit-user-select: auto;\r\n       -moz-user-select: auto;\r\n        -ms-user-select: auto;\r\n            user-select: auto;\r\n    font-size: 14px;\r\n    line-height: 1.74;\r\n    color: #262626;\r\n    letter-spacing: .05em;\r\n    /* pt / px \u6362\u7b97\u8868\uff1ahttps://websemantics.uk/articles/font-size-conversion/ */\r\n}\r\n\r\n.am-engine > *:first-child,.am-engine-view > *:first-child {\r\n\tmargin-top: 0 !important;\r\n}\r\n\r\n.am-engine p , .am-engine-view p {\r\n    white-space: normal;\r\n    margin: 0;\r\n    line-height: 1.74;\r\n}\r\n\r\n.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\r\n\toutline-style: none;\r\n}\r\n\r\n.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\r\n\tbackground: transparent;\r\n}\r\n\r\n.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\r\n\tbackground: transparent;\r\n}\r\n/*---------------------------\u5361\u7247 begin-----------------------*/\r\n\r\n.am-engine [data-card-type], .am-engine-view [data-card-type] {\r\n    white-space: normal;\r\n}\r\n.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\r\n\tdisplay: inline-block;\r\n\ttext-indent: 0;\r\n\tvertical-align: baseline;\r\n\twhite-space: initial;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\r\n\tvertical-align: bottom;\r\n  border-radius: 2px;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r\n.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],\r\n.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r\n\ttext-align: left;\r\n\t-webkit-user-select: text;\r\n\t   -moz-user-select: text;\r\n\t    -ms-user-select: text;\r\n\t        user-select: text;\r\n  min-width: 1px;\r\n  background: transparent;\r\n  bottom: 0;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r\n.am-engine-view span[data-card-type="inline"] span[data-card-element="left"] {\r\n  left: -1px;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r\n  right: -1px;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r\n.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r\n.am-engine span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection {\r\n  background: transparent !important;\r\n}\r\n\r\n.am-engine span[data-card-type="inline"] span[data-card-element="left"]::selection,\r\n.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::selection,\r\n.am-engine span[data-card-type="inline"] span[data-card-element="right"]::selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::selection {\r\n  background: transparent !important;\r\n}\r\n\r\n.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\r\n\tdisplay: block;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r\n\tbottom: 0;\r\n\tposition: absolute;\r\n\twidth: 2px;\r\n\toverflow: hidden;\r\n\toutline: none;\r\n\ttext-align: left;\r\n\ttext-indent: 0;\r\n\t-webkit-box-flex: 0;\r\n\tflex: 0 0 auto;\r\n\t-webkit-user-select: text;\r\n\t-moz-user-select: text;\r\n\t -ms-user-select: text;\r\n\t     user-select: text;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\r\n\tleft: -2px;\r\n\ttext-align: left;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r\n\tright: -2px;\r\n\ttext-align: right;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r\n.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r\n.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r\n.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection { \r\n  background: transparent !important;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r\n.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r\n.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r\n.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection { \r\n  background: transparent !important;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r\n.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r\n.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r\n.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection {\r\n\tbackground: transparent !important;\r\n}\r\n\r\n.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r\n.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r\n.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r\n.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection {\r\n\tbackground: transparent !important;\r\n}\r\n\t\r\n\r\n.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\r\n\tposition: relative;\r\n}\r\n\r\n.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\r\n\t-webkit-user-select: text;\r\n\t-moz-user-select: text;\r\n\t -ms-user-select: text;\r\n\t     user-select: text;\r\n}\r\n.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\r\n{\r\n    cursor: text;\r\n}\r\n/*---------------------------\u5361\u7247 end-----------------------*/');var ki=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e,r){var i;Object(u.a)(this,n),(i=t.call(this,e,r))._readonly=!1,i._container=void 0,i.kind="engine",i.typing=void 0,i.ot=void 0,i.change=void 0,i.history=void 0,i.hotkey=void 0,i.options=Object(d.a)(Object(d.a)({},i.options),r),i.history=new Hn(Object(p.a)(i)),i._container=new pr(i.container,{engine:Object(p.a)(i),lang:i.options.lang,className:i.options.className,tabIndex:i.options.tabIndex,placeholder:i.options.placeholder,autoPrepend:i.options.autoPrepend,autoAppend:i.options.autoAppend}),i.root=It(i.options.root||i.container.parent()||at().body);var o=i.root.css("position");return o&&"static"!==o||i.root.css("position","relative"),i._container.init(),i.change=new mn(Object(p.a)(i),{onChange:function(e){return i.trigger("change",e)},onSelect:function(){return i.trigger("select")},onRealtimeChange:function(e){i.trigger("realtimeChange",e)},onSetValue:function(){return i.trigger("afterSetValue")}}),i.change.init(),i.typing=new dr(Object(p.a)(i)),i._readonly=void 0!==i.options.readonly&&i.options.readonly,i._container.setReadonly(i._readonly),i.hotkey=new qn(Object(p.a)(i)),i.init(),i.ot=new Pn(Object(p.a)(i)),i.isEmpty()&&i._container.showPlaceholder(),i.ot.initLocal(),i}return Object(h.a)(n,[{key:"readonly",get:function(){return this._readonly},set:function(e){this.readonly!==e&&(e?(this.hotkey.disable(),this._container.setReadonly(!0),this.ot.stopMutation()):(this.hotkey.enable(),this._container.setReadonly(!1),this.ot.startMutation()),this._readonly=e,this.card.reRender(),this.trigger("readonly",e))}},{key:"isFocus",value:function(){return this._container.isFocus()}},{key:"isEmpty",value:function(){return this.change.isEmpty()}},{key:"focus",value:function(e){this.change.range.focus(e)}},{key:"blur",value:function(){this.change.range.blur()}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.change.getValue({ignoreCursor:e});return e?qt.removeTags(t):t}},{key:"getValueAsync",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,r=this,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],n=i.length>1?i[1]:void 0,e.abrupt("return",new Promise(function(){var e=Object(c.a)(s.a.mark((function e(i,o){var a,c,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.a.mark((function e(t){var i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.plugin.components[t],e.next=3,new Promise((function(e){i.waiting?i.waiting(n).then((function(){return e(!0)})).catch(e):e(!0)}));case 3:if(a=e.sent,"object"!==Object(l.a)(a)){e.next=7;break}return o(a),e.abrupt("return",{v:void 0});case 7:case"end":return e.stop()}}),e)})),e.t0=s.a.keys(r.plugin.components);case 2:if((e.t1=e.t0()).done){e.next=10;break}return c=e.t1.value,e.delegateYield(a(c),"t2",5);case 5:if(d=e.t2,"object"!==Object(l.a)(d)){e.next=8;break}return e.abrupt("return",d.v);case 8:e.next=2;break;case 10:i(r.getValue(t));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getHtml",value:function(){var e=It(this.container[0].cloneNode(!0));return e.removeAttributes(Lt),e.removeAttributes("tabindex"),e.removeAttributes("autocorrect"),e.removeAttributes("autocomplete"),e.removeAttributes("spellcheck"),e.removeAttributes("data-gramm"),e.removeAttributes(ur),e.removeClass(hr),e.removeAttributes("role"),new cn(e,this).toHTML()}},{key:"initDocOnReadonly",value:function(){var e,t;this.readonly&&!this.ot.isRemote&&((null===(e=this.ot.doc)||void 0===e?void 0:e.type)?this.ot.doc.data=Xt(this.container):null===(t=this.ot.doc)||void 0===t||t.create(Xt(this.container)))}},{key:"setValue",value:function(e,t){return e=this.trigger("beforeSetValue",e)||e,this.change.setValue(e,void 0,t),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setHtml",value:function(e,t){var n=this;return this.change.setHtml(e,(function(e){n.normalize(),n.container.allChildren("editable").forEach((function(e){n.node.isInline(e)?n.inline.repairCursor(e):n.node.isMark(e)&&n.mark.repairCursor(e)})),t&&t(e)})),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setMarkdown",value:function(e,t){var n=this;return this.change.setMarkdown(e,(function(e){n.normalize(),n.container.allChildren("editable").forEach((function(e){n.node.isInline(e)?n.inline.repairCursor(e):n.node.isMark(e)&&n.mark.repairCursor(e)})),t&&t(e)})),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"setJsonValue",value:function(e,t){var n=It(Gt(e)),r=this.node.html(n);return this.change.setValue(r,void 0,t),this.normalize(),this.nodeId.generateAll(this.container),this.initDocOnReadonly(),this}},{key:"getJsonValue",value:function(){return Xt(this.container)}},{key:"getText",value:function(e){return new cn(this.container,this).toText(this.schema,e)}},{key:"normalize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container,n=It("<p />"),r=t.children();r.each((function(t,i){var o=r.eq(i);o&&(e.node.isBlock(o)?(n.get().childNodes.length>0&&o.before(n),n=It("<p />")):o.isCursor()||n.append(o))})),n.get().childNodes.length>0&&t.append(n),(r=t.children()).each((function(t,n){var i=r.eq(n);if(i&&(e.node.removeMinusStyle(i,"text-indent"),e.node.isRootBlock(i))){var o=i.get().childNodes.length;if(0===o)i.append(It("<br />"));else{var a=i.first();1===o&&"span"===(null===a||void 0===a?void 0:a.name)&&[fe,he,pe].indexOf(a.attributes(ee))>=0&&i.prepend(It("<br />"))}}}))}},{key:"showPlaceholder",value:function(){this._container.showPlaceholder()}},{key:"hidePlaceholder",value:function(){this._container.hidePlaceholder()}},{key:"destroy",value:function(){this._container.destroy(),this.change.destroy(),this.hotkey.destroy(),this.typing.destroy(),this.ot&&this.ot.destroy(),Object(f.a)(Object(v.a)(n.prototype),"destroy",this).call(this)}}]),n}(wi);tn('.card-maximize-header {\r\n    position: fixed !important;\r\n    top: 0;\r\n    right: 0;\r\n    left: 0;\r\n    z-index: 9999;\r\n    height: 56px;\r\n    background: #fff;\r\n    border-bottom: 1px solid #e8e8e8;\r\n    width: 100%;\r\n}\r\n\r\n.card-maximize-header .header-crumb {\r\n    float: left;\r\n    line-height: 32px;\r\n    display: flex;\r\n    height: 100%;\r\n    align-items: center;\r\n    -webkit-box-align: center;\r\n    -ms-flex-align: center;\r\n}\r\n\r\n.card-maximize-header .header-crumb a\r\n{\r\n    color: #595959 !important;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n\r\n.card-maximize-header .header-crumb .split {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    padding: 0 15px;\r\n    font-size: 20px;\r\n    padding-right: 8px;\r\n    font-weight: 200;\r\n    margin: 0 8px;\r\n}\r\n\r\n.card-maximize-header .header-crumb .split + a {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n}\r\n\r\n.card-maximize-header .header-crumb .split + a:hover {\r\n\tcolor: #8C8C8C;\r\n}\r\n\r\n.data-card-block-max > [data-card-element="body"] > [data-card-element="center"], .data-card-block-max > [data-card-element="body"] > [data-card-element="center"].data-card-background-selected {\r\n    top: 96px;\r\n    background: #fafafa !important;\r\n    position: fixed!important;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: 124;\r\n    overflow: auto;\r\n    padding: 20px;\r\n}\r\n\r\n.am-engine-mobile .data-card-block-max > [data-card-element="body"] > [data-card-element="center"],.am-engine-view .data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r\n    top:56px;\r\n}');var xi=function(){function e(t,n){Object(u.a)(this,e),this.card=void 0,this.node=void 0,this.editor=void 0,this.editor=t,this.card=n}return Object(h.a)(e,[{key:"restore",value:function(){this.card.root.removeClass("data-card-block-max"),this.node&&(this.node.remove(),this.node=void 0);var e=this.editor;ct(e)&&(e.trigger("card:minimize",this.card),e.history.reset())}},{key:"maximize",value:function(){var e=this;if(!this.node){var t=this.editor,n=t.language.get("maximize","back").toString(),r=It('<div class="card-maximize-header" '.concat(ce,'="true" ').concat(ee,'="').concat(ie,'">\n            <div class="header-crumb">\n                <a class="split">\n                    <span class="data-icon data-icon-arrow-left"></span>\n                </a>\n                <a>').concat(n,"</a>\n            </div>\n        </div>"));r.on("click",(function(e){e.stopPropagation()})),this.card.root.addClass("data-card-block-max"),r.find(".header-crumb").on("click",(function(){e.card.minimize()}));var i=this.card.findByKey("body");null===i||void 0===i||i.prepend(r),ct(t)&&(t.trigger("card:maximize",this.card),t.history.reset()),this.node=r}}}]),e}();tn(".data-card-resize {\r\n    position: absolute;\r\n    bottom: -3px;\r\n    right: 0px;\r\n    left: 0px;\r\n    margin: 0 auto;\r\n    z-index: 2;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.data-card-resize-btn{\r\n    background: #d9dbdd;\r\n    border-radius: 3px;\r\n    height: 6px;\r\n    padding: 0 50px;\r\n    display: block;\r\n}\r\n\r\n.data-card-resize-btn svg {\r\n    display: block;\r\n    color: #999;\r\n}\r\n\r\n.data-card-resize-btn:hover {\r\n    cursor: row-resize;\r\n}");var Oi=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.editor=void 0,this.card=void 0,this.point=void 0,this.options={},this.component=void 0,this.start=!1,this.touchStart=function(e){e.preventDefault(),e.cancelBubble=!0,r.point={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY};var t=r.options.dragStart;t&&t(r.point)},this.dragStart=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,r.point={x:e.clientX,y:e.clientY};var t=r.options.dragStart;t&&t(r.point)},this.dragMove=function(e){if(r.point){var t=r.options.dragMove;t&&t(e.clientY-r.point.y)}},this.touchMove=function(e){if(e.preventDefault(),r.point){var t=r.options.dragMove;t&&t(e.targetTouches[0].clientY-r.point.y)}},this.dragEnd=function(e){r.point=void 0;var t=r.options.dragEnd;t&&t()},this.editor=t,this.card=n}return Object(h.a)(e,[{key:"create",value:function(e){this.options=e;var t=It('<div class="data-card-resize" '.concat(ee,'="').concat(ie,'" draggable="true"><span class="data-card-resize-btn"><svg viewBox="0 0 3413 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="8px" height="6px"><path d="M341.333333 341.333333h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 1 0 0 341.333333zM341.333333 1024h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 0 0 0 341.333333z"></path></svg></span></div>'));Re?(t.on("touchstart",this.touchStart),t.on("touchmove",this.touchMove),t.on("touchend",this.dragEnd),t.on("touchcancel",this.dragEnd)):(t.on("dragstart",this.dragStart),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd)),t.on("click",(function(e){e.stopPropagation()})),this.component=t}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.card.root,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;this.start=!1;var r=0,i=0,o=this.card;this.create({dragStart:function(){r=t.height(),e.start=!0,o.onActivate(!1)},dragMove:function(o){e.start&&(i=(i=r+o)<n?n:i,t.css("height","".concat(i,"px")))},dragEnd:function(){e.start&&(o.setValue({height:t.height()}),e.start=!1,o.onActivate(!0))}});var a=this.component;if(a){o.activated||a.hide(),t.append(a);var s=o.getValue()||{};s.height&&t.css("height","".concat(s.height,"px"))}}},{key:"show",value:function(){var e;null===(e=this.component)||void 0===e||e.show()}},{key:"hide",value:function(){var e;this.start||null===(e=this.component)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e=this.component;if(Re){if(!e)return;e.off("touchstart",this.touchStart),e.off("touchmove",this.touchMove),e.off("touchend",this.dragEnd),e.off("touchcancel",this.dragEnd)}else null===e||void 0===e||e.off("dragstart",this.dragStart),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd);null===e||void 0===e||e.remove()}}]),e}(),Ci={adjustX:!0,adjustY:!0},Ei=[0,0],ji={left:{points:["cr","cl"],overflow:Ci,offset:[-4,0],targetOffset:Ei},right:{points:["cl","cr"],overflow:Ci,offset:[4,0],targetOffset:Ei},top:{points:["bc","tc"],overflow:Ci,offset:[0,-4],targetOffset:Ei},bottom:{points:["tc","bc"],overflow:Ci,offset:[0,4],targetOffset:Ei},topLeft:{points:["bl","tl"],overflow:Ci,offset:[0,-4],targetOffset:Ei},leftTop:{points:["tr","tl"],overflow:Ci,offset:[-4,0],targetOffset:Ei},topRight:{points:["br","tr"],overflow:Ci,offset:[0,-4],targetOffset:Ei},rightTop:{points:["tl","tr"],overflow:Ci,offset:[4,0],targetOffset:Ei},bottomRight:{points:["tr","br"],overflow:Ci,offset:[0,4],targetOffset:Ei},rightBottom:{points:["bl","br"],overflow:Ci,offset:[4,0],targetOffset:Ei},bottomLeft:{points:["tl","bl"],overflow:Ci,offset:[0,4],targetOffset:Ei},leftBottom:{points:["br","bl"],overflow:Ci,offset:[-4,0],targetOffset:Ei}},Mi=Object(y.a)("editor"),Ni=Object(y.a)("container"),Si=Object(y.a)("target"),Ti=Object(y.a)("align"),_i=Object(y.a)("offset"),Ai=Object(y.a)("root"),Ii=Object(y.a)("onUpdate"),Di=Object(y.a)("updateTimeout"),zi=Object(y.a)("observer"),Li=function(){function e(t){var n=this;Object(u.a)(this,e),Object.defineProperty(this,Mi,{writable:!0,value:void 0}),Object.defineProperty(this,Ni,{writable:!0,value:void 0}),Object.defineProperty(this,Si,{writable:!0,value:void 0}),Object.defineProperty(this,Ti,{writable:!0,value:"bottomLeft"}),Object.defineProperty(this,_i,{writable:!0,value:[0,0]}),Object.defineProperty(this,Ai,{writable:!0,value:void 0}),Object.defineProperty(this,Ii,{writable:!0,value:void 0}),Object.defineProperty(this,Di,{writable:!0,value:void 0}),Object.defineProperty(this,zi,{writable:!0,value:void 0}),this.updateListener=function(){Object(b.a)(n,Di)[Di]&&clearTimeout(Object(b.a)(n,Di)[Di]),Object(b.a)(n,Di)[Di]=setTimeout((function(){n.update()}),50)},this.update=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object(b.a)(n,Ni)[Ni]&&0!==Object(b.a)(n,Ni)[Ni].length&&Object(b.a)(n,Si)[Si]&&0!==Object(b.a)(n,Si)[Si].length){var t=Object(Q.c)(Object(b.a)(n,Ni)[Ni].get(),Object(b.a)(n,Si)[Si].get(),Object(d.a)(Object(d.a)({},ji[Object(b.a)(n,Ti)[Ti]]),{},{targetOffset:Object(b.a)(n,_i)[_i]}));if(Object(b.a)(n,Ii)[Ii]&&e){var r=Object.keys(ji).find((function(e){var n=ji[e].points;return n[0]===t.points[0]&&n[1]===t.points[1]}));Object(b.a)(n,Ni)[Ni].attributes("data-placement",r),Object(b.a)(n,Ii)[Ii](Object(d.a)(Object(d.a)({},t),{},{align:r}))}}},Object(b.a)(this,Mi)[Mi]=t}return Object(h.a)(e,[{key:"bind",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(b.a)(this,Ti)[Ti],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(b.a)(this,_i)[_i],a=arguments.length>4?arguments[4]:void 0;(Object(b.a)(this,Ni)[Ni]=e,Object(b.a)(this,Si)[Si]=t,Object(b.a)(this,Ti)[Ti]=i,Object(b.a)(this,_i)[_i]=o,Object(b.a)(this,Ai)[Ai]=It('<div style="position: absolute; top: 0px; left: 0px; width: 100%;"></div>'),Object(b.a)(this,Ai)[Ai].append(Object(b.a)(this,Ni)[Ni]),Object(b.a)(this,Mi)[Mi].root.append(Object(b.a)(this,Ai)[Ai]),Object(b.a)(this,Ii)[Ii]=a,Re||window.addEventListener("scroll",this.updateListener),window.addEventListener("resize",this.updateListener),ct(Object(b.a)(this,Mi)[Mi])&&!Re)&&(null===(n=Object(b.a)(this,Mi)[Mi].scrollNode)||void 0===n||n.on("scroll",this.updateListener));if(t&&t.length>0){var s={width:t.width(),height:t.height()};"undefined"!==typeof ResizeObserver&&(Object(b.a)(this,zi)[zi]=new ResizeObserver((function(){var e=t.width(),n=t.height();e===s.width&&n===s.height||(s={width:e,height:n},r.updateListener())})),Object(b.a)(this,zi)[zi].observe(t.get()))}this.update()}},{key:"setOffset",value:function(e){Object(b.a)(this,_i)[_i]=e}},{key:"destroy",value:function(){var e,t,n;(Object(b.a)(this,Ii)[Ii]=void 0,Re||window.removeEventListener("scroll",this.updateListener),window.removeEventListener("resize",this.updateListener),ct(Object(b.a)(this,Mi)[Mi])&&!Re)&&(null===(n=Object(b.a)(this,Mi)[Mi].scrollNode)||void 0===n||n.off("scroll",this.updateListener));null===(e=Object(b.a)(this,zi)[zi])||void 0===e||e.disconnect(),null===(t=Object(b.a)(this,Ai)[Ai])||void 0===t||t.remove()}}]),e}();tn(".data-card-dnd {\r\n    position: absolute;\r\n    top: 0;\r\n    left: -21px;\r\n    right: auto;\r\n    bottom: auto;\r\n    width: 18px;\r\n    height: 24px;\r\n    line-height: 24px;\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n    display: none;\r\n    opacity: 0;\r\n    z-index: 125;\r\n    transition: all 0.3s ease-in-out;\r\n    background: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n.data-card-dnd-active {\r\n    display: block;\r\n    opacity: 1;\r\n    cursor: pointer;\r\n}\r\n\r\n.data-card-dnd:hover {\r\n\tbackground: #f4f4f4;\r\n\tcolor: #595959;\r\n}\r\n\r\n.data-card-dnd-trigger {\r\n    width: 18px;\r\n    height: 24px;\r\n    text-align: center;\r\n    color: #BFBFBF;\r\n    font-size: 16px;\r\n    border-radius: 2px 2px;\r\n    cursor: move;\r\n    cursor: grab;\r\n    cursor: -moz-grab;\r\n    cursor: -webkit-grab;\r\n}\r\n\r\n.am-engine-view .data-toolbar-active {\r\n\tmin-width: 200px;\r\n}\r\n\r\n.data-card-toolbar.data-toolbar-block {\r\n\ttop: -48px;\r\n\tbottom: auto;\r\n\tdisplay: none;\r\n}\r\n\r\n.data-card-toolbar.data-card-toolbar-active {\r\n\tdisplay: block;\r\n}\r\n\r\n.data-card-toolbar.data-toolbar-active {\r\n\tdisplay: block;\r\n}");var Ri=function(e){return-1===["button","input","dropdown","node","switch"].indexOf(e.type)},Bi=Object(y.a)("hideTimeout"),Pi=Object(y.a)("showTimeout"),Fi=Object(y.a)("defaultAlign"),Hi=Object(y.a)("dndNode"),qi=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.card=void 0,this.toolbar=void 0,this.editor=void 0,this.offset=void 0,this.position=void 0,Object.defineProperty(this,Bi,{writable:!0,value:null}),Object.defineProperty(this,Pi,{writable:!0,value:null}),Object.defineProperty(this,Fi,{writable:!0,value:"topLeft"}),Object.defineProperty(this,Hi,{writable:!0,value:null}),this.clearHide=function(){Object(b.a)(r,Bi)[Bi]&&clearTimeout(Object(b.a)(r,Bi)[Bi]),Object(b.a)(r,Bi)[Bi]=null},this.clearShow=function(){Object(b.a)(r,Pi)[Pi]&&clearTimeout(Object(b.a)(r,Pi)[Pi]),Object(b.a)(r,Pi)[Pi]=null},this.enterHide=function(){r.clearShow(),Object(b.a)(r,Bi)[Bi]=setTimeout((function(){var e,t;r.hide(),Object(b.a)(r,Bi)[Bi]=null;var n=r.toolbar;null===n||void 0===n||null===(e=n.root)||void 0===e||e.off("mouseenter",r.clearHide),null===n||void 0===n||null===(t=n.root)||void 0===t||t.off("mouseleave",r.enterHide)}),200)},this.enterShow=function(){r.clearHide(),Object(b.a)(r,Pi)[Pi]=setTimeout((function(){var e,t;Object(b.a)(r,Pi)[Pi]=null,r.show();var n=r.toolbar;null===n||void 0===n||null===(e=n.root)||void 0===e||e.on("mouseenter",r.clearHide),null===n||void 0===n||null===(t=n.root)||void 0===t||t.on("mouseleave",r.enterHide)}),200)},this.editor=t,this.card=n,this.position=new Li(t),this.unbindEnterShow(),ct(t)&&!t.readonly||this.bindEnterShow()}return Object(h.a)(e,[{key:"setDefaultAlign",value:function(e){Object(b.a)(this,Fi)[Fi]=e}},{key:"bindEnterShow",value:function(){this.card.root.on("mouseenter",this.enterShow),this.card.root.on("mouseleave",this.enterHide)}},{key:"unbindEnterShow",value:function(){this.card.root.off("mouseenter",this.enterShow),this.card.root.off("mouseleave",this.enterHide)}},{key:"setOffset",value:function(e){this.offset=e}},{key:"getContainer",value:function(){var e;return null===(e=this.toolbar)||void 0===e?void 0:e.root}},{key:"getDefaultItem",value:function(e){var t=this,n=this.editor,r=n.language,i=n.clipboard,o=n.card;switch(e.type){case"separator":return{key:"separator",type:"node",node:e.node||It('<span class="data-toolbar-item-split"></span>')};case"copy":return{key:"copy",type:"button",content:e.content||'<span class="data-icon data-icon-copy"></span>',title:e.title||r.get("copy","title"),onClick:function(o,a){e.onClick?e.onClick(o,a):i.copy(t.card.root[0],!0)?n.messageSuccess("copy",r.get("copy","success")):n.messageError("copy",r.get("copy","error"))}};case"delete":return{key:"delete",type:"button",content:e.content||'<span class="data-icon data-icon-delete"></span>',title:e.title||r.get("delete","title").toString(),onClick:function(n,r){e.onClick?e.onClick(n,r):o.remove(t.card.root)}};case"maximize":return{key:"maximize",type:"button",content:e.content||'<span class="data-icon data-icon-maximize"></span>',title:e.title||r.get("maximize","title").toString(),onClick:function(n,r){e.onClick?e.onClick(n,r):t.card.maximize()}};case"more":return{key:"more",type:"dropdown",content:e.content||'<span class="data-icon data-icon-more"></span>',title:e.title||r.get("more","title").toString(),items:e.items}}}},{key:"getItems",value:function(){var e=this;if(!this.card.toolbar)return[[],[]];var t=this.card.toolbar(),n=[];return t.forEach((function(t){if(Ri(t))if("dnd"===t.type);else{var r=e.getDefaultItem(t);r&&n.push(r)}else n.push(t)})),[n,t]}},{key:"create",value:function(){this.hide();var e=this.getItems(),t=Object(x.a)(e,2),n=t[0],r=t[1];if(n.length>0){var i=r.find((function(e){return Ri(e)&&"dnd"===e.type}));if(i&&!Re&&"dnd"===i.type){var o=this.editor,a=o.root,s=o.language,l=this.createDnd(i.content||'<span class="data-icon data-icon-drag"></span>',i.title||s.get("dnd","title").toString());a.append(l),Object(b.a)(this,Hi)[Hi]=l}var c=new En({items:n});c.root.addClass("data-card-toolbar"),c.root.attributes(Te,this.card.id),c.render(It(document.body)),c.hide(),this.toolbar=c}}},{key:"update",value:function(){var e,t=this.getItems(),n=Object(x.a)(t,1)[0];null===(e=this.toolbar)||void 0===e||e.update({items:n})}},{key:"hide",value:function(){var e;null===(e=Object(b.a)(this,Hi)[Hi])||void 0===e||e.remove(),this.hideCardToolbar()}},{key:"show",value:function(e){this.showCardToolbar(e)}},{key:"hideCardToolbar",value:function(){var e;null===(e=this.toolbar)||void 0===e||e.destroy(),this.position.destroy()}},{key:"showDnd",value:function(){var e=this;Object(b.a)(this,Hi)[Hi]&&0!==Object(b.a)(this,Hi)[Hi].length&&(this.card.isMaximize?Object(b.a)(this,Hi)[Hi].removeClass("data-card-dnd-active"):Object(b.a)(this,Hi)[Hi].length>0&&(Object(b.a)(this,Hi)[Hi].addClass("data-card-dnd-active"),setTimeout((function(){e.position.bind(Object(b.a)(e,Hi)[Hi],e.card.root,"leftTop",e.offset)}))))}},{key:"showCardToolbar",value:function(e){var t=this;this.create();var n=this.getContainer();if(n&&n.length>0){this.showDnd();var r=this.card;n.addClass("data-toolbar-active"),n.attributes("toolbar-trigger-key",r.constructor.cardName),this.toolbar&&this.toolbar.show();var i=Object(b.a)(this,Fi)[Fi],o=this.position;setTimeout((function(){o.bind(n,r.isMaximize?r.getCenter().first():r.root,Object(b.a)(t,Fi)[Fi],t.offset,(function(e){t.offset&&4===t.offset.length&&"bottomLeft"===e.align&&e.align!==i?(o.setOffset([t.offset[2],t.offset[3]]),i=e.align,o.update(!1)):t.offset&&e.align===Object(b.a)(t,Fi)[Fi]&&e.align!==i&&(o.setOffset(t.offset),i=e.align,o.update(!1)),i=e.align}))}),10)}}},{key:"createDnd",value:function(e,t){var n=this,r=It("<div ".concat(ee,'="').concat(ie,'" class="data-card-dnd" draggable="true" dnd-trigger-key="').concat(this.card.constructor.cardName,'" drag-card-trigger="').concat(this.card.id,'" ').concat(Lt,'="false">\n                <div class="data-card-dnd-trigger">\n                    ').concat(e,"\n                </div>\n            </div>"));return r.on("mouseenter",(function(){bn.show(r,t)})),r.on("mouseleave",(function(){bn.hide()})),r.on("mousedown",(function(e){e.stopPropagation(),bn.hide(),n.hideCardToolbar()})),r.on("mouseup",(function(){n.showCardToolbar()})),r}},{key:"destroy",value:function(){this.unbindEnterShow(),this.position.destroy()}}]),e}(),Ui=function(){function e(t){var n,r=t.editor,i=t.value,o=t.root;Object(u.a)(this,e),this.editor=void 0,this.root=void 0,this.toolbarModel=void 0,this.resizeModel=void 0,this.activatedByOther=!1,this.selectedByOther=!1,this.contenteditable=[],this.defaultMaximize=void 0,this.isMaximize=!1,this._id=void 0,this.resize=void 0,this.editor=r;var a=(null===(n=i)||void 0===n?void 0:n.type)||this.constructor.cardType,s="inline"===a?"span":"div";this.root=o||It("<".concat(s," />")),"string"===typeof i&&(i=et(i)),(i=i||{}).id=this.getId(i.id),this._id=i.id,i.type=a,this.setValue(i),this.defaultMaximize=new xi(r,this)}return Object(h.a)(e,[{key:"isEditable",get:function(){return this.contenteditable.length>0}},{key:"activated",get:function(){return this.root.hasClass("card-activated")}},{key:"setActivated",value:function(e){e?this.root.addClass("card-activated"):this.root.removeClass("card-activated")}},{key:"selected",get:function(){return this.root.hasClass("card-selected")}},{key:"setSelected",value:function(e){e?this.root.addClass("card-selected"):this.root.removeClass("card-selected")}},{key:"id",get:function(){if(this._id)return this._id;var e=this.root.attributes(ke);if(!e)return{};var t=et(e);return"object"===Object(l.a)(t)&&(null===t||void 0===t?void 0:t.id)||""}},{key:"name",get:function(){return this.root.attributes(be)}},{key:"type",get:function(){var e=this.root.attributes(we);if(!e){var t=this.root.attributes(ke),n=et(t||"{}");e=(null===n||void 0===n?void 0:n.type)||this.constructor.cardType}return e},set:function(e){if(this.name&&e!==this.type){var t=this.editor.card,n=this.root.attributes(ke),r=et(n||"{}"),i=t.replace(this,this.name,Object(d.a)(Object(d.a)({},r),{},{type:e}));t.render(i.root),i.activate(!1),t.activate(i.root)}}},{key:"loading",get:function(){return!!this.root.attributes(Oe)}},{key:"init",value:function(){this.root.attributes(Ce,this.isEditable?"true":"false");var e=this.toolbarModel;null===e||void 0===e||e.hide(),null===e||void 0===e||e.destroy();var t=this.editor;this.toolbar&&(this.toolbarModel=new qi(t,this)),this.resize&&(this.resizeModel=new Oi(t,this))}},{key:"getId",value:function(e){var t=[];if(this.editor.card.each((function(e){t.push(e.id)})),e&&t.indexOf(e)<0)return e;for(var n=qe();t.indexOf(n)>=0;)n=qe();return n}},{key:"setValue",value:function(e){if(null!=e){var t=this.root.attributes(ke),n=et(t||"{}");(null===n||void 0===n?void 0:n.id)&&delete e.id,(e=Object(d.a)(Object(d.a)({},n),e)).type&&(null===n||void 0===n?void 0:n.type)!==e.type&&(this.type=e.type),this.root.attributes(ke,Je(e))}}},{key:"getValue",value:function(){var e=this.root.attributes(ke);return e?et(e):{}}},{key:"find",value:function(e){return this.root.find(e)}},{key:"findByKey",value:function(e){var t=this.root.first()||It([]);if("body"===e||0===t.length)return t;var n=t.children();if(["left","center","right"].indexOf(e)>-1)return n.toArray().find((function(t){return t.attributes(xe)===e}));var r=this.type===nn.BLOCK?"div":"span",i=this.find("".concat(r,"[").concat(xe,"=").concat(e,"]"));return i.name===r&&i.attributes(xe)===e?i:void 0}},{key:"activate",value:function(e){e?this.activated||(this.setActivated(e),this.onActivate(e)):this.activated&&(this.setActivated(e),this.onActivate(!1))}},{key:"select",value:function(e){ct(this.editor)&&!this.activatedByOther&&(e?this.selected||this.isMaximize||(this.setSelected(e),this.onSelect(e)):this.selected&&(this.setSelected(e),this.onSelect(!1)))}},{key:"getCenter",value:function(){var e=this.findByKey("center");return e||It([])}},{key:"isCenter",value:function(e){var t,n=e.closest(this.type===nn.BLOCK?"div[".concat(xe,"=center]"):"span[".concat(xe,"=center]"));return n.length>0&&!!(null===(t=this.findByKey("center"))||void 0===t?void 0:t.equal(n))}},{key:"isCursor",value:function(e){return this.isLeftCursor(e)||this.isRightCursor(e)}},{key:"isLeftCursor",value:function(e){var t;if(e.isElement()&&"left"!==e.attributes(xe))return!1;var n=e.closest(Me);return n.length>0&&!!(null===(t=this.findByKey("left"))||void 0===t?void 0:t.equal(n))}},{key:"isRightCursor",value:function(e){var t;if(e.isElement()&&"right"!==e.attributes(xe))return!1;var n=e.closest(Se);return n.length>0&&!!(null===(t=this.findByKey("right"))||void 0===t?void 0:t.equal(n))}},{key:"focus",value:function(e,t){var n=this.findByKey("left"),r=this.findByKey("right");if(n&&0!==n.length&&r&&0!==r.length){var i=t?n:r;e.select(i,!0).shrinkToTextNode();var o=i.first();o&&(e.setStart(o,t?0:1),e.collapse(!0),this.onFocus&&this.onFocus())}}},{key:"maximize",value:function(){var e;this.isMaximize=!0,this.defaultMaximize.maximize(),null===(e=this.toolbarModel)||void 0===e||e.show()}},{key:"minimize",value:function(){var e;this.isMaximize=!1,this.defaultMaximize.restore(),null===(e=this.toolbarModel)||void 0===e||e.show()}},{key:"onSelect",value:function(e){var t=this.constructor.selectStyleType;if(t!==on.NONE){var n="data-card-".concat(t,"-selected"),r=this.getCenter();e?r.addClass(n):r.removeClass(n)}}},{key:"onSelectByOther",value:function(e,t){var n=this.getCenter();this.constructor.selectStyleType===on.BACKGROUND?n.css("background-color",e?t.rgb:""):n.css("outline",e?"2px solid "+t.color:"");var r="card-selected-other";return e?this.root.addClass(r):this.root.removeClass(r),n}},{key:"onActivate",value:function(e){var t,n;this.resize&&(e?null===(t=this.resizeModel)||void 0===t||t.show():null===(n=this.resizeModel)||void 0===n||n.hide())}},{key:"onActivateByOther",value:function(e,t){return this.onSelectByOther(e,t)}},{key:"initToolbar",value:function(){var e,t;this.toolbar?(this.toolbarModel||(this.toolbarModel=new qi(this.editor,this)),this.activated&&this.toolbarModel.show()):(null===(e=this.toolbarModel)||void 0===e||e.hide(),null===(t=this.toolbarModel)||void 0===t||t.destroy(),this.toolbarModel=void 0)}},{key:"initResize",value:function(){if(this.resize){var e,t="function"===typeof this.resize?this.resize():this.findByKey("body");if(t&&t.length>0)null===(e=this.resizeModel)||void 0===e||e.render(t)}}},{key:"didUpdate",value:function(){this.initResize(),this.initToolbar()}},{key:"beforeRender",value:function(){var e=this.getCenter(),t=It("<".concat(this.type===nn.BLOCK?"div":"span",' class="').concat(Oe,'" ').concat(ee,'="').concat(ie,'" />'));t.append('<svg viewBox="0 0 1024 1024" class="data-card-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>'),e.empty().append(t)}},{key:"didRender",value:function(){var e=this;this.loading&&(this.find(".".concat(Oe)).remove(),setTimeout((function(){e.root.removeAttributes(Oe)}),200)),this.initResize(),this.initToolbar(),this.isEditable&&this.editor.nodeId.generateAll(this.getCenter().get())}},{key:"destroy",value:function(){var e,t,n,r;null===(e=this.toolbarModel)||void 0===e||e.hide(),null===(t=this.toolbarModel)||void 0===t||t.destroy(),this.toolbarModel=void 0,null===(n=this.resizeModel)||void 0===n||n.hide(),null===(r=this.resizeModel)||void 0===r||r.destroy(),this.resizeModel=void 0}}]),e}();Ui.cardName=void 0,Ui.cardType=void 0,Ui.autoActivate=void 0,Ui.autoSelected=!0,Ui.singleSelectable=void 0,Ui.collab=!0,Ui.focus=void 0,Ui.selectStyleType=on.BORDER,Ui.lazyRender=!1;var Wi=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this,e,r)).kind="view",i.init(),i.container.hasClass(ue)||i.container.addClass(ue),i}return Object(h.a)(n,[{key:"render",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new cn(e,this).toValue(this.schema,this.conversion,!1,!0);this.container.html(r),this.card.render(this.container,(function(){n&&t.trigger("render",t.container)}))}}]),n}(wi);tn(".data-scrollable::-webkit-scrollbar {\r\n    display: none;\r\n    overflow: hidden;\r\n  }\r\n  .data-scrollable.scroll-x {\r\n    padding-bottom: 10px;\r\n    overflow-x: hidden;\r\n  }\r\n  \r\n  .data-scrollable.scroll-y {\r\n    padding-right: 10px;\r\n    overflow-y: hidden;\r\n  }\r\n\r\n  .data-scrollable:hover .data-scrollbar {\r\n    display: block;\r\n  }\r\n  .data-scrollable.scrolling {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n  }\r\n  .data-scrollable.scrolling .data-scrollbar {\r\n    display: block;\r\n  }\r\n  .data-scrollable .data-scrollbar {\r\n    display: none;\r\n    position: absolute;\r\n    cursor: default;\r\n    transition: opacity 0.3s ease-in-out;\r\n  }\r\n  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\r\n    position: absolute;\r\n    background: #c1c1c1;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n  }\r\n  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\r\n    background: #888;\r\n  }\r\n  .data-scrollable .data-scrollbar.data-scrollbar-x {\r\n    height: 8px;\r\n    bottom: 0px;\r\n  }\r\n  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r\n    height: 8px;\r\n    min-width: 60px;\r\n  }\r\n  .data-scrollable .data-scrollbar.data-scrollbar-y {\r\n    top: 0;\r\n    width: 8px;\r\n    height: 100%;\r\n    right: 0px;\r\n  }\r\n  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\r\n    width: 8px;\r\n    min-height: 60px;\r\n  }\r\n  .data-scrollable .scrollbar-shadow-left {\r\n    position: absolute;\r\n    z-index: 10;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 4px;\r\n    opacity: 0.8;\r\n    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r\n    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r\n    pointer-events: none;\r\n  }\r\n  .data-scrollable .scrollbar-shadow-right {\r\n    position: absolute;\r\n    z-index: 10;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 4px;\r\n    opacity: 0.8;\r\n    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r\n    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r\n    pointer-events: none;\r\n  }");var Vi=Object(y.a)("observer"),Yi=Object(y.a)("reverse"),Gi=Object(y.a)("content"),Zi=Object(y.a)("enableScroll"),Xi=Object(y.a)("scroll"),Qi=Object(y.a)("isScrolling"),Ki=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;return Object(u.a)(this,n),(r=t.call(this)).container=void 0,r.x=void 0,r.y=void 0,r.shadow=void 0,r.scrollBarX=void 0,r.slideX=void 0,r.slideXDragging=void 0,r.scrollBarY=void 0,r.slideY=void 0,r.slideYDragging=void 0,r.shadowLeft=void 0,r.shadowRight=void 0,r.oWidth=0,r.oHeight=0,r.sWidth=0,r.sHeight=0,r.xWidth=0,r.yHeight=0,Object.defineProperty(Object(p.a)(r),Vi,{writable:!0,value:void 0}),Object.defineProperty(Object(p.a)(r),Yi,{writable:!0,value:void 0}),Object.defineProperty(Object(p.a)(r),Gi,{writable:!0,value:void 0}),r.shadowTimer=void 0,Object.defineProperty(Object(p.a)(r),Zi,{writable:!0,value:!0}),Object.defineProperty(Object(p.a)(r),Xi,{writable:!0,value:void 0}),Object.defineProperty(Object(p.a)(r),Qi,{writable:!0,value:!1}),r.refresh=function(){var e=r.container.get();if(e){var t,n,i=function(){setTimeout((function(){Object(b.a)(Object(p.a)(r),Qi)[Qi]=!1}),0)},o=e.scrollTop,a=null===(t=Object(b.a)(Object(p.a)(r),Gi)[Gi])||void 0===t?void 0:t.get(),s=$e(r.container.css("padding-left")),l=$e(r.container.css("padding-right")),c=$e(r.container.css("padding-top")),d=$e(r.container.css("padding-bottom")),u=a?Object(b.a)(Object(p.a)(r),Gi)[Gi].width()+s+l:e.scrollWidth,h=a?Object(b.a)(Object(p.a)(r),Gi)[Gi].height()+c+d:e.scrollHeight;if(r.oWidth=r.getWidth(),r.oHeight=r.container.height()-$e(r.container.css("border-top-width"))-$e(r.container.css("border-bottom-width")),r.sWidth=u,r.sHeight=h,r.xWidth=Math.floor(r.oWidth*r.oWidth/u),r.yHeight=Math.floor(r.oHeight*r.oHeight/h),r.x){var f,v,g,m;null===(f=r.slideX)||void 0===f||f.css("width",r.xWidth+"px");var y=Math.round(r.oWidth)-s-l===r.sWidth||a&&Math.round(Object(b.a)(Object(p.a)(r),Gi)[Gi].width())<=Math.round(r.oWidth-s-l)?"none":"block";null===(v=r.slideX)||void 0===v||v.css("display",y),r.emit("display",y),null===(g=r.shadowLeft)||void 0===g||g.css("display",y),null===(m=r.shadowRight)||void 0===m||m.css("display",y)}if(r.y){var w,k;null===(w=r.slideY)||void 0===w||w.css("height",r.yHeight+"px");var x=Math.round(r.oHeight)-c-d===r.sHeight||a&&Math.round(Object(b.a)(Object(p.a)(r),Gi)[Gi].height())<=Math.round(r.oHeight-c-d)?"none":"block";null===(k=r.slideY)||void 0===k||k.css("display",x),r.emit("display",x)}if(r.x&&a&&e.scrollWidth-s-l>Object(b.a)(Object(p.a)(r),Gi)[Gi].width()){Object(b.a)(Object(p.a)(r),Qi)[Qi]=!0;var O=e.scrollWidth-s-l-Object(b.a)(Object(p.a)(r),Gi)[Gi].width();if(Object(b.a)(Object(p.a)(r),Xi)[Xi]){var C=Object(b.a)(Object(p.a)(r),Xi)[Xi],E=C.onScrollX,j=C.getScrollLeft;if((O=j?j(-0)+e.scrollLeft-O:e.scrollLeft-O)<0&&(O=0),E){var M=E(O);e.scrollLeft=M>0?M:0}r.scroll({left:O})}else e.scrollLeft-=O,i();return}if(r.y&&a&&e.scrollHeight-c-d!==Object(b.a)(Object(p.a)(r),Gi)[Gi].height())return Object(b.a)(Object(p.a)(r),Qi)[Qi]=!0,e.scrollTop-=e.scrollHeight-c-d-Object(b.a)(Object(p.a)(r),Gi)[Gi].height(),void i();var N=(null===(n=Object(b.a)(Object(p.a)(r),Xi)[Xi])||void 0===n?void 0:n.getScrollLeft)?Object(b.a)(Object(p.a)(r),Xi)[Xi].getScrollLeft(e.scrollLeft):e.scrollLeft;if(Object(b.a)(Object(p.a)(r),Xi)[Xi]){var S=Object(b.a)(Object(p.a)(r),Xi)[Xi].onScrollX;if(S){Object(b.a)(Object(p.a)(r),Qi)[Qi]=!0;var T=S(N);e.scrollLeft=T>0?T:0,i()}r.scroll({left:N})}else r.reRenderX(N);r.reRenderY(o)}},r.scroll=function(e){var t=0,n=0;if(!Object(b.a)(Object(p.a)(r),Xi)[Xi]&&e instanceof Event){var i=e.target;t=i.scrollTop,n=i.scrollLeft}else{if(e instanceof Event)return Object(b.a)(Object(p.a)(r),Qi)[Qi]?void 0:void r.refresh();var o,a;void 0===e.top&&(e.top=(null===(o=r.container.get())||void 0===o?void 0:o.scrollTop)||0);void 0===e.left&&(e.left=(null===(a=r.container.get())||void 0===a?void 0:a.scrollLeft)||0);t=e.top,n=e.left}r.reRenderX(n),r.reRenderY(t)},r.wheelXScroll=$()((function(e){var t,n;e.preventDefault();var i=(Fe?e.wheelDeltaX:e.wheelDelta/120||-e.detail)>0?"up":"down",o=r.container.get();if(o){var a=r.container.width(),s=(null===(t=Object(b.a)(Object(p.a)(r),Xi)[Xi])||void 0===t?void 0:t.getOffsetWidth)?Object(b.a)(Object(p.a)(r),Xi)[Xi].getOffsetWidth(a):a,l=Math.max(s/(Fe?20-Math.abs(e.wheelDelta):8),20),c=((null===(n=Object(b.a)(Object(p.a)(r),Xi)[Xi])||void 0===n?void 0:n.getScrollLeft)?Object(b.a)(Object(p.a)(r),Xi)[Xi].getScrollLeft(o.scrollLeft):o.scrollLeft)+("up"===i?-l:l);if(c="up"===i?Math.max(0,c):Math.min(c,r.sWidth-r.oWidth),Object(b.a)(Object(p.a)(r),Xi)[Xi]){var d=Object(b.a)(Object(p.a)(r),Xi)[Xi].onScrollX;if(d){var u=d(c);o.scrollLeft=u>0?u:0}r.scroll({left:c})}else o.scrollLeft=c}}),Fe?50:0,{trailing:!0}),r.wheelYScroll=$()((function(e){e.preventDefault();var t=(Fe?e.wheelDeltaX:e.wheelDelta/120||-e.detail)>0?"up":"down",n=r.container.get();if(n){var i=r.container.height(),o=Math.max(i/(Fe?20-Math.abs(e.wheelDelta):8),20),a=n.scrollTop+("up"===t?-o:o);a="up"===t?Math.max(0,a):Math.min(a,r.sHeight-r.oHeight),n.scrollTop=a}}),Fe?100:0,{trailing:!0}),r.bindWheelScroll=function(e){Object(b.a)(Object(p.a)(r),Zi)[Zi]&&(r.x&&e.wheelDeltaX!==e.wheelDeltaY&&Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r.slideX&&"none"!==r.slideX.css("display")&&r.wheelXScroll(e):r.y&&0!==e.wheelDeltaY&&r.slideY&&"none"!==r.slideY.css("display")&&r.wheelYScroll(e))},r.bindContainerTouchX=function(e){e.target&&Object(b.a)(Object(p.a)(r),Zi)[Zi]&&(It(e.target).hasClass("data-scrollbar-trigger")||(Object(b.a)(Object(p.a)(r),Yi)[Yi]=!0,r.scrollXStart(e)))},r.bindContainerTouchY=function(e){e.target&&Object(b.a)(Object(p.a)(r),Zi)[Zi]&&(It(e.target).hasClass("data-scrollbar-trigger")||(Object(b.a)(Object(p.a)(r),Yi)[Yi]=!0,r.scrollYStart(e)))},r.getEventClientOffset=function(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}},r.scrollX=function(e){if(r.slideXDragging){var t,n=r.slideXDragging,i=n.point,o=n.position,a=r.getEventClientOffset(e),s=Object(b.a)(Object(p.a)(r),Yi)[Yi]?o-(a.x-i):o+(a.x-i);s=Math.max(0,Math.min(s,r.oWidth-r.xWidth)),null===(t=r.slideX)||void 0===t||t.css("left",s+"px");var l=s/(r.oWidth-r.xWidth);l=Math.min(1,l);var c=r.container.get(),d=(r.sWidth-r.oWidth)*l;if(Object(b.a)(Object(p.a)(r),Xi)[Xi]){var u=Object(b.a)(Object(p.a)(r),Xi)[Xi].onScrollX;if(u){var h=u(d);c.scrollLeft=h>0?h:0}r.scroll({left:d})}else c.scrollLeft=d}},r.scrollY=function(e){if(r.slideYDragging){var t,n=r.slideYDragging,i=n.point,o=n.position,a=r.getEventClientOffset(e),s=Object(b.a)(Object(p.a)(r),Yi)[Yi]?o-(a.y-i):o+(a.y-i);s=Math.max(0,Math.min(s,r.oHeight-r.yHeight)),null===(t=r.slideY)||void 0===t||t.css("top",s+"px");var l=s/(r.oHeight-r.yHeight);l=Math.min(1,l),r.container.get().scrollTop=(r.sHeight-r.oHeight)*l}},r.scrollXEnd=function(){r.slideXDragging=void 0,Object(b.a)(Object(p.a)(r),Yi)[Yi]=!1,document.body.removeEventListener(Re?"touchmove":"mousemove",r.scrollX),document.body.removeEventListener(Re?"touchend":"mouseup",r.scrollXEnd),r.container.removeClass("scrolling")},r.scrollYEnd=function(){r.slideYDragging=void 0,document.body.removeEventListener(Re?"touchmove":"mousemove",r.scrollY),document.body.removeEventListener(Re?"touchend":"mouseup",r.scrollYEnd),r.container.removeClass("scrolling")},r.scrollXStart=function(e){var t,n=r.getEventClientOffset(e);r.container.addClass("scrolling"),r.slideXDragging={point:n.x,position:parseInt((null===(t=r.slideX)||void 0===t?void 0:t.css("left"))||"0")},document.body.addEventListener(Re?"touchmove":"mousemove",r.scrollX),document.body.addEventListener(Re?"touchend":"mouseup",r.scrollXEnd)},r.scrollYStart=function(e){var t,n=r.getEventClientOffset(e);r.container.addClass("scrolling"),r.slideYDragging={point:n.y,position:parseInt((null===(t=r.slideY)||void 0===t?void 0:t.css("top"))||"0")},document.body.addEventListener(Re?"touchmove":"mousemove",r.scrollY),document.body.addEventListener(Re?"touchend":"mouseup",r.scrollYEnd)},r.bindXScrollEvent=function(){var e;r.x&&(null===(e=r.slideX)||void 0===e||e.on(Re?"touchstart":"mousedown",r.scrollXStart))},r.bindYScrollEvent=function(){var e;r.y&&(null===(e=r.slideY)||void 0===e||e.on(Re?"touchstart":"mousedown",r.scrollYStart))},r.reRenderShadow=function(e){if(r.shadow){var t,n,i=r.container.get();if(i)null===(n=r.shadowLeft)||void 0===n||n.css("left",(Object(b.a)(Object(p.a)(r),Xi)[Xi]?i.scrollLeft:e)+"px");null===(t=r.shadowRight)||void 0===t||t.css("left",e+r.oWidth-4+"px")}},r.reRenderX=function(e){if(r.x){var t,n,i;null===(t=r.scrollBarX)||void 0===t||t.css("left",e+"px");var o=r.sWidth-r.oWidth,a=o<=0?0:e/o;a=Math.min(1,a),null===(n=r.slideX)||void 0===n||n.css("left",(r.oWidth-r.xWidth)*a+"px"),r.emit("change",{x:e,y:$e((null===(i=r.scrollBarY)||void 0===i?void 0:i.css("top"))||"0")}),r.oWidth=r.getWidth(),r.reRenderShadow(e)}},r.reRenderY=function(e){if(r.y){var t,n,i;null===(t=r.scrollBarY)||void 0===t||t.css("top",e+"px");var o=r.sHeight-r.oHeight,a=o<=0?0:e/o;a=Math.min(1,a),null===(n=r.slideY)||void 0===n||n.css("top",(r.oHeight-r.yHeight)*a+"px"),r.emit("change",{x:$e((null===(i=r.scrollBarX)||void 0===i?void 0:i.css("left"))||"0"),y:e})}},r.container=wt(e)?It(e):e,r.x=i,r.y=o,r.shadow=a,Object(b.a)(Object(p.a)(r),Xi)[Xi]=s,r.init(),r}return Object(h.a)(n,[{key:"setContentNode",value:function(e){Object(b.a)(this,Gi)[Gi]=e&&wt(e)?It(e):e}},{key:"init",value:function(){var e=this.container.children(),t=!1;e.each((function(e){!t&&It(e).hasClass("data-scrollbar")&&(t=!0)})),t||(this.container.css("position","relative"),this.container.addClass("data-scrollable"),this.x&&(this.scrollBarX=It("<div ".concat(ee,'="').concat(ie,'" class="data-scrollbar data-scrollbar-x"><div class="data-scrollbar-trigger"></div></div>')),this.slideX=this.scrollBarX.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarX),this.container.addClass("scroll-x")),this.y&&(this.scrollBarY=It("<div ".concat(ee,'="').concat(ie,'" class="data-scrollbar data-scrollbar-y"><div class="data-scrollbar-trigger"></div></div>')),this.slideY=this.scrollBarY.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarY),this.container.addClass("scroll-y")),this.shadow&&(this.shadowLeft=It("<div ".concat(ee,'="').concat(ie,'" class="scrollbar-shadow-left"></div>')),this.shadowRight=It("<div ".concat(ee,'="').concat(ie,'" class="scrollbar-shadow-right"></div>')),this.container.append(this.shadowLeft),this.container.append(this.shadowRight)),this.refresh(),this.bindEvents())}},{key:"getWidth",value:function(){var e;if(!this.container.get())return 0;var t=this.container.width();return(null===(e=Object(b.a)(this,Xi)[Xi])||void 0===e?void 0:e.getOffsetWidth)?Object(b.a)(this,Xi)[Xi].getOffsetWidth(t):t}},{key:"enableScroll",value:function(){Object(b.a)(this,Zi)[Zi]=!0}},{key:"disableScroll",value:function(){Object(b.a)(this,Zi)[Zi]=!1}},{key:"bindEvents",value:function(){Re?(this.x&&this.container.on("touchstart",this.bindContainerTouchX),this.y&&this.container.on("touchstart",this.bindContainerTouchY)):this.container.on(ze?"DOMMouseScroll":"mousewheel",this.bindWheelScroll),this.container.on("scroll",this.scroll),this.container.get()&&(window.addEventListener("resize",this.refresh),this.bindXScrollEvent(),this.bindYScrollEvent())}},{key:"destroy",value:function(){var e,t,n,r,i,o,a;(null===(e=this.slideX)||void 0===e||e.off(Re?"touchstart":"mousedown",this.scrollXStart),null===(t=this.slideY)||void 0===t||t.off(Re?"touchstart":"mousedown",this.scrollYStart),Re?(this.x&&this.container.off("touchstart",this.bindContainerTouchX),this.y&&this.container.off("touchstart",this.bindContainerTouchY)):this.container.off(ze?"DOMMouseScroll":"mousewheel",this.bindWheelScroll),this.container.off("scroll",this.scroll),this.container.removeClass("data-scrollable"),this.x)&&(null===(r=this.scrollBarX)||void 0===r||r.remove(),this.container.removeClass("scroll-x"));this.y&&(null===(i=this.scrollBarY)||void 0===i||i.remove(),this.container.removeClass("scroll-y"));this.shadow&&(null===(o=this.shadowLeft)||void 0===o||o.remove(),null===(a=this.shadowRight)||void 0===a||a.remove());null===(n=Object(b.a)(this,Vi)[Vi])||void 0===n||n.disconnect(),window.removeEventListener("resize",this.refresh),window.removeEventListener("scroll",this.refresh)}}]),n}(L.EventEmitter2);tn(".data-resizer {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0px;\r\n    right: 0;\r\n    z-index: 1;\r\n    outline: 2px solid #1890FF;\r\n    max-width: initial !important;\r\n}\r\n.data-resizer img {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    cursor: pointer;\r\n    width: 100%;\r\n    height: 100%;\r\n    opacity: 0.3;\r\n}\r\n.data-resizer-holder {\r\n    position: absolute;\r\n    width: 14px;\r\n    height: 14px;\r\n    border: 2px solid #fff;\r\n    border-radius: 50%;\r\n    background: #1890FF;\r\n    display: inline-block;\r\n}\r\n.data-resizer-holder-right-top {\r\n    top: -6px;\r\n    right: -6px;\r\n    cursor: nesw-resize;\r\n}\r\n.data-resizer-holder-right-bottom {\r\n    bottom: -6px;\r\n    right: -6px;\r\n    cursor: nwse-resize;\r\n}\r\n.data-resizer-holder-left-bottom {\r\n    bottom: -6px;\r\n    left: -6px;\r\n    cursor: nesw-resize;\r\n}\r\n.data-resizer-holder-left-top {\r\n    left: -6px;\r\n    top: -6px;\r\n    cursor: nwse-resize;\r\n}\r\n\r\n.data-resizer-number {\r\n    position: absolute;\r\n    display: inline-block;\r\n    line-height: 24px;\r\n    padding: 0 4px;\r\n    font-size: 12px;\r\n    border-radius: 3px 3px;\r\n    background: rgba(0, 0, 0, 0.86);\r\n    color: rgba(255, 255, 255, 0.96);\r\n    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    transition: opacity 0.3s ease-in-out;\r\n    transform: scale(0.8);\r\n}\r\n\r\n.data-resizer-number-right-top {\r\n    top: 0px;\r\n    right: -6px;\r\n    transform: translateX(100%) scale(0.8);\r\n}\r\n\r\n.data-resizer-number-right-bottom {\r\n    right: -6px;\r\n    bottom: 0px;\r\n    transform: translateX(100%) scale(0.8);\r\n}\r\n\r\n.data-resizer-number-left-bottom {\r\n    left: -6px;\r\n    bottom: 0px;\r\n    transform: translateX(-100%) scale(0.8);\r\n}\r\n\r\n.data-resizer-number-left-top {\r\n    left: -6px;\r\n    top: 0px;\r\n    transform: translateX(-100%) scale(0.8);\r\n}\r\n\r\n.data-resizer-number-active {\r\n    opacity: 1;\r\n    visibility: visible;\r\n}");var $i=function(){function e(t){var n,r=this;Object(u.a)(this,e),this.options=void 0,this.root=void 0,this.image=void 0,this.resizerNumber=void 0,this.point={x:0,y:0},this.position=void 0,this.size=void 0,this.maxWidth=void 0,this.resizing=!1,this.onMouseMove=function(e){e.preventDefault(),e.stopPropagation();var t=window.TouchEvent&&e instanceof TouchEvent?e.touches[0]:e,n=t.clientX,i=t.clientY;if(n!==r.point.x||i!==r.point.y){var o=r.point.x-n,a=r.point.y-i;r.updateSize(o,a)}r.resizing=!0},this.onMouseUp=function(e){var t;e.preventDefault(),e.stopPropagation();var n=r.root.get();if(n){var i=n.clientWidth,o=n.clientHeight;r.size={width:i,height:o},r.resizerNumber.removeClass("data-resizer-number-".concat(r.position)),r.resizerNumber.removeClass("data-resizer-number-active"),r.position=void 0,r.resizing=!1,r.root.removeClass("data-resizing"),document.removeEventListener(Re?"touchmove":"mousemove",r.onMouseMove),document.removeEventListener(Re?"touchend":"mouseup",r.onMouseUp);var a=r.options.onChange;a&&a(r.size),null===(t=r.image)||void 0===t||t.hide()}},this.options=t,this.root=It(this.renderTemplate(t.imgUrl)),t.imgUrl&&(this.image=this.root.find("img")),null===(n=this.image)||void 0===n||n.hide(),this.resizerNumber=this.root.find(".data-resizer-number");var i=this.options,o=i.width,a=i.height;this.size={width:o,height:a},this.maxWidth=this.options.maxWidth}return Object(h.a)(e,[{key:"renderTemplate",value:function(e){return'\n\t\t\t<span class="data-resizer">\n\t\t\t\t'.concat(e?'<img src="'.concat(e,'">'):"",'\n\t\t\t\t<span class="data-resizer-holder data-resizer-holder-right-top"></span>\n\t\t\t\t<span class="data-resizer-holder data-resizer-holder-right-bottom"></span>\n\t\t\t\t<span class="data-resizer-holder data-resizer-holder-left-bottom"></span>\n\t\t\t\t<span class="data-resizer-holder data-resizer-holder-left-top"></span>\n\t\t\t\t<span class="data-resizer-number"></span>\n\t\t\t</span>')}},{key:"onMouseDown",value:function(e,t){var n;this.resizing||(e.preventDefault(),e.stopPropagation(),this.root.css("top",["right-top","left-top"].indexOf(t)>-1?"auto":0),this.root.css("left",["left-top","left-bottom"].indexOf(t)>-1?"auto":0),this.root.css("bottom",["right-bottom","left-bottom"].indexOf(t)>-1?"auto":0),this.root.css("right",["right-top","right-bottom"].indexOf(t)>-1?"auto":0),this.point={x:window.TouchEvent&&e instanceof TouchEvent?e.touches[0].clientX:e.clientX,y:window.TouchEvent&&e instanceof TouchEvent?e.touches[0].clientY:e.clientY},this.position=t,this.resizing=!0,this.root.addClass("data-resizing"),this.resizerNumber.addClass("data-resizer-number-".concat(this.position)),this.resizerNumber.addClass("data-resizer-number-active"),null===(n=this.image)||void 0===n||n.show(),document.addEventListener(Re?"touchmove":"mousemove",this.onMouseMove),document.addEventListener(Re?"touchend":"mouseup",this.onMouseUp))}},{key:"updateSize",value:function(e,t){e=["right-top","right-bottom"].indexOf(this.position||"")>-1?this.size.width-e:this.size.width+e,this.setSize(e,t)}},{key:"setSize",value:function(e,t){e<24&&(e=24);var n=this.options.rate;e>this.maxWidth&&(e=this.maxWidth),(t=e*n)<24&&(e=(t=24)/n),e=Math.round(e),t=Math.round(t),this.root.css({width:e+"px",height:t+"px"}),this.resizerNumber.html("".concat(e,"\xb7").concat(t))}},{key:"on",value:function(e,t){this.root.on(e,t)}},{key:"off",value:function(e,t){this.root.off(e,t)}},{key:"render",value:function(){var e=this,t=this.options,n=t.width,r=t.height;return this.setSize(n,r),this.root.find(".data-resizer-holder-right-top").on(Re?"touchstart":"mousedown",(function(t){return e.onMouseDown(t,"right-top")})),this.root.find(".data-resizer-holder-right-bottom").on(Re?"touchstart":"mousedown",(function(t){return e.onMouseDown(t,"right-bottom")})),this.root.find(".data-resizer-holder-left-bottom").on(Re?"touchstart":"mousedown",(function(t){return e.onMouseDown(t,"left-bottom")})),this.root.find(".data-resizer-holder-left-top").on(Re?"touchstart":"mousedown",(function(t){return e.onMouseDown(t,"left-top")})),this.root}},{key:"destroy",value:function(){this.root.remove(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}]),e}();t.M=ki}).call(this,n(73))},2472:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return r.call(e,t)}function o(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!==(65535&e)&&65534!==(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function a(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=new RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,d=n(2513);var u=/[&<>"]/,h=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function f(e){return p[e]}var v=/[.?*+^$[\]\\(){}|-]/g;var g=n(2492);t.lib={},t.lib.mdurl=n(2514),t.lib.ucmicro=n(2623),t.assign=function(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t){if("object"!==typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=i,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(s,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(l,(function(e,t,n){return t||function(e,t){var n=0;return i(d,t)?d[t]:35===t.charCodeAt(0)&&c.test(t)&&o(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?a(n):e}(e,n)}))},t.isValidEntityCode=o,t.fromCodePoint=a,t.escapeHtml=function(e){return u.test(e)?e.replace(h,f):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return g.test(e)},t.escapeRE=function(e){return e.replace(v,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(e=e.replace(/\u1e9e/g,"\xdf")),e.toLowerCase().toUpperCase()}},2474:function(e,t,n){"use strict";function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}n.d(t,"a",(function(){return r}))},2475:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=0;function i(e){return"__private_"+r+++"_"+e}},2476:function(e,t,n){(function(e){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=9007199254740991,t.dig=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){e=e[arguments[t]]||(t===arguments.length-1?void 0:{})}return e},t.digOrCreate=function(){for(var e=arguments[0],t=arguments[arguments.length-1],n=1;n<arguments.length-1;n++){var r=arguments[n];e=e[r]||(e[r]=n===arguments.length-2?t():{})}return e},t.digAndRemove=function(){for(var e=arguments[0],n=[e],r=1;r<arguments.length-1;r++){var i=arguments[r];if(!e.hasOwnProperty(i))break;e=e[i],n.push(e)}for(r=n.length-1;r>=0;r--){var o=n[r],a=o[i=arguments[r+1]];r!==n.length-1&&t.hasKeys(a)||delete o[i]}},t.supportsPresence=function(e){return e&&"function"===typeof e.transformPresence},t.callEach=function(e,t){var n=!1;return e.forEach((function(e){e&&(e(t),n=!0)})),n},t.truthy=function(e){return!!e},t.nextTick=function(t){if("undefined"!==typeof e&&e.nextTick)return e.nextTick.apply(null,arguments);for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];setTimeout((function(){t.apply(null,n)}))},t.clone=function(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))}}).call(this,n(74))},2477:function(e,t,n){"use strict";function r(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}n.d(t,"a",(function(){return r}))},2478:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2535);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Object(r.a)(e,t,"get"))}},2480:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return ue})),n.d(t,"d",(function(){return L}));var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=n(17),c=n(2),d=n(11),u=n(24),h=n(116),p=n(63),f=n(2474),v=n(2475),g=n(0),m=n.n(g),b=n(4),y=n(2750),w=n(41),k=n.n(w),x=n(2550),O=n.n(x),C=n(2606),E=(n(2751),n(2832)),j=(n(2753),n(2525)),M=n.n(j),N=n(368),S=n.n(N),T=n(2495),_=n.n(T);function A(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}A("\r\n  .data-toolbar-table-selector .data-toolbar-table-selector-tr {\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n  }\r\n  .data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td {\r\n    width: 20px;\r\n    height: 16px;\r\n    border: 1px solid #d9d9d9;\r\n    margin-right: -1px;\r\n    margin-bottom: -1px;\r\n    cursor: pointer;\r\n  }\r\n  .data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td.actived {\r\n    background: #ddefff;\r\n  }\r\n  .data-toolbar-table-selector .data-toolbar-table-selector-info {\r\n    text-align: center;\r\n  }");var I=function(e){var t=Object(g.useState)(e.maxRows||10),n=Object(b.a)(t,1)[0],r=Object(g.useState)(e.maxCols||10),i=Object(b.a)(r,1)[0],o=Object(g.useState)(e.minRows||4),a=Object(b.a)(o,1)[0],s=Object(g.useState)(e.minCols||4),l=Object(b.a)(s,1)[0],c=Object(g.useState)(4),d=Object(b.a)(c,2),u=d[0],h=d[1],p=Object(g.useState)(4),f=Object(b.a)(p,2),v=f[0],w=f[1],k=Object(g.useState)(0),x=Object(b.a)(k,2),O=x[0],C=x[1],E=Object(g.useState)(0),j=Object(b.a)(E,2),M=j[0],N=j[1],S=function(t,r){for(var o=[],s=function(r){var s=Object(y.a)({"data-toolbar-table-selector-td":!0,actived:t<O&&r<M});o.push(m.a.createElement("div",{className:s,key:r,onMouseDown:function(n){return n.preventDefault(),function(t,n,r){e.onSelect(t,n+1,r+1)}(n,t,r)},onMouseOver:function(){return function(e,t){var r=Math.max(a,Math.min(n,e+2)),o=Math.max(l,Math.min(i,t+2));h(r),w(o),C(e+1),N(t+1)}(t,r)}}))},c=0;c<r;c++)s(c);return o},T=void 0===O?0:O,_=void 0===M?0:M;return m.a.createElement("div",{className:"data-toolbar-table-selector","data-element":"ui"},function(e,t){for(var n=[],r=0;r<e;r++)n.push(m.a.createElement("div",{className:"data-toolbar-table-selector-tr",key:r},S(r,t)));return n}(u,v),m.a.createElement("div",{className:"data-toolbar-table-selector-info"},T,"x",_))},D=function(e,t,n){var r=null===e||void 0===e?void 0:e.plugin.components[t];if(r&&r.hotkey){var i=r.hotkey();if(i){if(Array.isArray(i))if(n){var o=i.findIndex((function(e){return"object"===Object(l.a)(e)&&e.args===n}));i=i[o>-1?o:0]}else i=i[0];return"object"===Object(l.a)(i)&&(i=i.key),i}}},z={},L=[{key:"default",value:""},{key:"arial",value:"Arial"},{key:"comicSansMS",value:'"Comic Sans MS"'},{key:"courierNew",value:'"Courier New"'},{key:"georgia",value:"Georgia"},{key:"helvetica",value:"Helvetica"},{key:"impact",value:"Impact"},{key:"timesNewRoman",value:'"Times New Roman"'},{key:"trebuchetMS",value:'"Trebuchet MS"'},{key:"verdana",value:"Verdana"},{key:"fangSong",value:"FangSong, \u4eff\u5b8b, FZFangSong-Z02S, STFangsong, fangsong"},{key:"stFangsong",value:"STFangsong, \u534e\u6587\u4eff\u5b8b, FangSong, FZFangSong-Z02S, fangsong"},{key:"stSong",value:'STSong, \u534e\u6587\u5b8b\u4f53, SimSun, "Songti SC", NSimSun, serif'},{key:"stKaiti",value:'STKaiti, \u534e\u6587\u6977\u4f53, KaiTi, "Kaiti SC", cursive'},{key:"simSun",value:'SimSun, \u5b8b\u4f53, "Songti SC", NSimSun, STSong, serif'},{key:"microsoftYaHei",value:'"Microsoft YaHei", \u5fae\u8f6f\u96c5\u9ed1, "PingFang SC", SimHei, STHeiti, sans-serif'},{key:"kaiTi",value:'KaiTi, \u6977\u4f53, STKaiti, "Kaiti SC", cursive'},{key:"kaitiSC",value:'"Kaiti SC"'},{key:"simHei",value:'SimHei, \u9ed1\u4f53, "Microsoft YaHei", "PingFang SC", STHeiti, sans-serif'},{key:"heitiSC",value:'"Heiti SC"'},{key:"fzHei",value:"FZHei-B01S"},{key:"fzKai",value:"FZKai-Z03S"},{key:"fzFangSong",value:"FZFangSong-Z02S"}],R=function(e,t){return e.map((function(e){var n=e.key,r=e.value,i="default"!==n&&!r.split(",").some((function(e){return function(e){if("string"!==typeof e)return console.log("Font name is not legal !"),!1;if(void 0!==z[e])return z[e];var t,n=document.body,r=document.createElement("span");r.innerHTML=Array(10).join("wi"),r.style.cssText=["position:absolute","width:auto","font-size:128px","left:-99999px"].join(" !important;");var i=function(e){return r.style.fontFamily=e,n.appendChild(r),t=r.clientWidth,n.removeChild(r),t},o=i("monospace"),a=i("serif"),s=i("sans-serif"),l=o!==i(e+",monospace")||s!==i(e+",sans-serif")||a!==i(e+",serif");return z[e]=l,l}(e.trim())}));return{key:r,faimlyName:t?t[n]:n,content:function(){return m.a.createElement("span",{style:{fontFamily:r}},t?t[n]:n)},hotkey:!1,disabled:i,title:i?t&&t.notInstalled||"The font may not be installed":void 0}}))};A(".editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .toolbar-button {\r\n    font-weight: bold;\r\n    min-width: 73px;\r\n}\r\n\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h1,\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h2,\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h3,\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h4,\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h5,\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\r\n    line-height: 1.6;\r\n    font-weight: bold;\r\n    color: #262626;\r\n}\r\n\r\n.heading-item-h1 {\r\n    font-size: 28px;\r\n}\r\n\r\n.heading-item-h2 {\r\n    font-size: 24px;\r\n}\r\n\r\n.heading-item-h3 {\r\n    font-size: 20px;\r\n}\r\n\r\n.heading-item-h4 {\r\n    font-size: 16px;\r\n}\r\n\r\n.heading-item-h5 {\r\n    font-size: 14px;\r\n}\r\n\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n}\r\n\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-fontsize .toolbar-button {\r\n    font-weight: bold;\r\n    min-width: 58px;\r\n}\r\n\r\n.editor-toolbar .toolbar-dropdown.toolbar-dropdown-fontfamily .toolbar-button {\r\n    font-size: 12px;\r\n}");var B=function(e){var t=e.language.get("toolbar"),n=t.heading,r=e.container.css("font-size");return[{type:"collapse",header:t.collapse.title,icon:"collapse",groups:[{items:[{name:"image-uploader",icon:m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},m.a.createElement("g",{fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:"#E8E8E8",strokeWidth:".667",fill:"#FFF",x:".333",y:".333",width:"23.333",height:"23.333",rx:"1.333"}),m.a.createElement("g",{fillRule:"nonzero"},m.a.createElement("path",{d:"M8.625 8a1.126 1.126 0 010 2.25 1.126 1.126 0 010-2.25z",fill:"#FFD666"}),m.a.createElement("path",{d:"M17.95 14.88a.144.144 0 01-.092.033H6.14a.139.139 0 01-.14-.137.14.14 0 01.033-.089l2.981-3.45a.143.143 0 01.198-.018c.005.005.012.01.017.017l1.74 2.016 2.767-3.203a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z",fill:"#CCC"}),m.a.createElement("path",{d:"M17.91 14.88a.144.144 0 01-.092.033H9.333l4.363-4.864a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z",fill:"#737373"}))))),title:t.image.title,search:"\u56fe\u7247,tupian,image,img"},{name:"codeblock",icon:m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},m.a.createElement("g",{fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:"#E8E8E8",fill:"#FFF",x:".5",y:".5",width:"23",height:"23",rx:"2"}),m.a.createElement("path",{d:"M19.331 11.815c-.407-.22-.665-.678-.665-1.181V8.062c0-.202-.148-.367-.33-.367h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.651 0 1.18.588 1.18 1.312v2.572c0 .14.072.269.186.33l.843.455c.05.026.08.078.08.134v.894c0 .056-.03.108-.08.134l-.843.455a.373.373 0 00-.186.33v2.572c0 .724-.529 1.312-1.18 1.312h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.182 0 .33-.165.33-.367v-2.572c0-.503.258-.961.665-1.18l.344-.186-.344-.185zM5.044 11.815c.407-.22.665-.678.665-1.181V8.062c0-.202.148-.367.33-.367h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.651 0-1.18.588-1.18 1.312v2.572c0 .14-.072.269-.186.33l-.843.455a.153.153 0 00-.08.134v.894c0 .056.03.108.08.134l.843.455c.114.061.186.19.186.33v2.572c0 .724.529 1.312 1.18 1.312h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.182 0-.33-.165-.33-.367v-2.572c0-.503-.258-.961-.665-1.18L4.7 12l.344-.185z",fill:"#595959",fillRule:"nonzero"}),m.a.createElement("path",{fill:"#1890FF",opacity:".25",d:"M8.25 8.25h7.5v1.125h-7.5z"}),m.a.createElement("path",{fill:"#D2E8DB",d:"M8.25 10.5h4.5v1.125h-4.5z"}),m.a.createElement("path",{fill:"#E0E0E0",d:"M8.25 12.75h4.5v1.125h-4.5zM8.25 15h6v1.125h-6z"})))),title:t.codeblock.title,search:"\u4ee3\u7801\u5757,daimakuai,code"},{name:"table",command:{name:"table",args:[3,3]},placement:"rightTop",onDisabled:function(){return!!e.card.active||!e.command.queryEnabled("table")},prompt:e.card.active||!e.command.queryEnabled("table")?void 0:function(t){return m.a.createElement(I,{onSelect:function(n,r,i){t.onClick&&t.onClick(n,"table",e),e.command.execute("table",r,i)}})},icon:m.a.createElement("span",null,m.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},m.a.createElement("g",{transform:"translate(-16.000000, -93.000000)"},m.a.createElement("g",null,m.a.createElement("g",{transform:"translate(16.000000, 53.000000)"},m.a.createElement("g",{transform:"translate(0.000000, 40.000000)"},m.a.createElement("g",null,m.a.createElement("rect",{stroke:"#E8E8E8",strokeWidth:"0.666666667",fill:"#FFFFFF",x:"0.333333333",y:"0.333333333",width:"23.3333333",height:"23.3333333",rx:"1.33333333"}),m.a.createElement("g",{transform:"translate(5.250000, 6.750000)"},m.a.createElement("path",{d:"M0.75,0 L3.75,0 L3.75,10.5 L0.75,10.5 C0.335786438,10.5 5.07265313e-17,10.1642136 0,9.75 L0,0.75 C-5.07265313e-17,0.335786438 0.335786438,7.6089797e-17 0.75,0 Z",id:"Rectangle",fill:"#F0F0F0"}),m.a.createElement("path",{d:"M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z",id:"Rectangle",stroke:"#595959",strokeWidth:"0.5",fillOpacity:"0.15",fill:"#25B864"}),m.a.createElement("rect",{id:"Rectangle",fill:"#E8E8E8",x:"0",y:"5.25",width:"13.5",height:"1"}),m.a.createElement("rect",{id:"Rectangle-Copy",fill:"#E8E8E8",x:"0",y:"7.5",width:"13.5",height:"1"}),m.a.createElement("rect",{id:"Rectangle",fill:"#E8E8E8",x:"6.75",y:"0",width:"1",height:"10.5"}),m.a.createElement("rect",{id:"Rectangle-Copy-5",fill:"#E8E8E8",x:"9.75",y:"0",width:"1",height:"10.5"}),m.a.createElement("rect",{id:"Rectangle",stroke:"#737373",strokeWidth:"0.75",x:"0.375",y:"0.375",width:"12.75",height:"9.75",rx:"0.75"}),m.a.createElement("path",{d:"M3.5,10.25 L3.5,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,9.75 C0.25,10.0261424 0.473857625,10.25 0.75,10.25 L3.5,10.25 Z",id:"Rectangle",stroke:"#737373",strokeWidth:"0.5"}),m.a.createElement("path",{d:"M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z",id:"Rectangle",stroke:"#737373",strokeWidth:"0.5"})))))))))),title:t.table.title,search:"biaoge,table"},{name:"file-uploader",icon:m.a.createElement("span",null,m.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("g",{fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:"#E8E8E8",fill:"#FFF",x:".5",y:".5",width:"23",height:"23",rx:"2"}),m.a.createElement("path",{fill:"#E0E0E0",d:"M11.25 15h8.25v1.125h-8.25zM14.25 11.25h5.25v1.125h-5.25zM14.25 8.25h5.25v1.125h-5.25z"}),m.a.createElement("path",{d:"M11.216 8.324a2.593 2.593 0 00-3.791 0l-2.896 3.04a.108.108 0 00-.029.074c0 .028.01.055.029.075l.41.43c.038.041.101.041.14 0l2.896-3.04a1.841 1.841 0 012.69 0c.36.378.557.88.557 1.413 0 .534-.197 1.035-.557 1.413l-2.95 3.1-.48.502c-.446.47-1.173.47-1.62 0a1.226 1.226 0 01-.335-.851c0-.322.119-.624.335-.851l2.928-3.075a.382.382 0 01.276-.12h.001c.105 0 .201.043.274.12.075.078.115.18.115.29a.416.416 0 01-.115.288l-2.393 2.512a.108.108 0 00-.029.075c0 .028.01.054.03.074l.409.43c.038.041.102.041.14 0l2.392-2.513c.221-.232.342-.54.342-.867 0-.328-.122-.637-.342-.868a1.131 1.131 0 00-1.653 0l-.284.3-2.642 2.776a2.06 2.06 0 00-.564 1.43c0 .54.2 1.047.564 1.428.376.394.868.591 1.36.591.494 0 .986-.197 1.361-.591l3.43-3.602c.505-.532.785-1.24.785-1.991a2.867 2.867 0 00-.784-1.992z",fill:"#595959"})))),title:t.file.title,search:"\u9644\u4ef6,\u6587\u4ef6,fujian,wenjian,file"},{name:"video-uploader",icon:m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},m.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},m.a.createElement("g",{transform:"translate(-16.000000, -641.000000)"},m.a.createElement("g",null,m.a.createElement("g",{transform:"translate(16.000000, 641.000000)"},m.a.createElement("g",null,m.a.createElement("rect",{stroke:"#E8E8E8",fill:"#FFFFFF",x:"0.5",y:"0.5",width:"23",height:"23",rx:"2"}),m.a.createElement("g",{transform:"translate(6.000000, 6.000000)",fillRule:"nonzero"},m.a.createElement("rect",{fill:"#000000",opacity:"0",x:"0",y:"0",width:"12",height:"12"}),m.a.createElement("path",{d:"M6,0.75 C3.10078125,0.75 0.75,3.10078125 0.75,6 C0.75,8.89921875 3.10078125,11.25 6,11.25 C8.89921875,11.25 11.25,8.89921875 11.25,6 C11.25,3.10078125 8.89921875,0.75 6,0.75 Z M6,10.359375 C3.59296875,10.359375 1.640625,8.40703125 1.640625,6 C1.640625,3.59296875 3.59296875,1.640625 6,1.640625 C8.40703125,1.640625 10.359375,3.59296875 10.359375,6 C10.359375,8.40703125 8.40703125,10.359375 6,10.359375 Z",id:"Shape",fill:"#595959"}),m.a.createElement("path",{d:"M7.93963415,5.8884912 L5.23140244,4.02687575 C5.13445122,3.96020395 5,4.02514402 5,4.13857268 L5,7.86180356 C5,7.97523223 5.13536585,8.03930643 5.23140244,7.97350049 L7.93963415,6.11188505 C8.02012195,6.05646952 8.02012195,5.94390673 7.93963415,5.8884912 Z",id:"Shape",fill:"#71D19A"}))))))))),title:t.video.title,search:"\u89c6\u9891,MP4,shipin,video"},{name:"math",icon:m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},m.a.createElement("g",{fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:"#E8E8E8",fill:"#FFF",x:".5",y:".5",width:"23",height:"23",rx:"2"}),m.a.createElement("path",{d:"M14.073 14.18a.122.122 0 01.004.073l-.346 1.404a.122.122 0 01-.119.093H9.438a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h.61v-3.924h-.61a.122.122 0 01-.122-.122v-.384c0-.068.055-.122.122-.122h.355l-.012-.063a.976.976 0 00-.96-.8h-.487v3.845H9.35c.068 0 .122.055.122.122v.384a.122.122 0 01-.122.122H6.341a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h1.017V9.706H6.87a.976.976 0 00-.96.8l-.097.535h-.437a.122.122 0 01-.122-.132l.143-1.797A.122.122 0 015.52 9h4.654c.064 0 .117.049.122.112l.116 1.458h3.19c.06 0 .113.046.12.107l.214 1.718a.122.122 0 01-.121.137h-.339a.122.122 0 01-.117-.09l-.16-.577a.91.91 0 00-.877-.667h-1.134v1.57h.423c.26 0 .471-.211.471-.471v-.192c0-.068.055-.122.122-.122h.407c.067 0 .122.054.122.122v1.953a.122.122 0 01-.122.122h-.407a.122.122 0 01-.122-.122v-.192a.47.47 0 00-.47-.47h-.424v1.726h1.187c.34 0 .655-.177.832-.467l.291-.475h-.155a.122.122 0 01-.122-.122v-.384c0-.067.054-.122.122-.122h.577l1.468-2.004-1.305-1.92h-.659a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h2.196c.067 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-.317l.718 1.057.774-1.057h-.362a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h1.87c.068 0 .123.055.123.122v.384a.122.122 0 01-.122.122h-.614l-1.238 1.69 1.518 2.234h.659c.067 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-2.196a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h.317l-.931-1.37-1.004 1.37h.398c.068 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-1.14z",fillOpacity:".65",fill:"#000"})))),title:t.math.title,search:"\u516c\u5f0f,\u6570\u5b66\u516c\u5f0f,gongshi,formula,math,latex"},{name:"status",icon:m.a.createElement("span",null,m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},m.a.createElement("g",{fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:"#E8E8E8",strokeWidth:".667",fill:"#FFF",x:".333",y:".333",width:"23.333",height:"23.333",rx:"1.333"}),m.a.createElement("g",{transform:"translate(6 6)"},m.a.createElement("path",{d:"M2.534 6.192L.53 4.34a.667.667 0 01-.144-.788L1.98.37A.667.667 0 012.575 0h9.714c.369 0 .667.298.667.667v5.036a.667.667 0 01-.667.666H2.986a.667.667 0 01-.452-.177z",fill:"#BFBFBF"}),m.a.createElement("path",{d:"M.598 4.07a.267.267 0 00.02.226l4.125 7.146a.267.267 0 00.364.097l4.62-2.666a.267.267 0 00.097-.365L5.698 1.363a.267.267 0 00-.186-.13L2.095.648a.267.267 0 00-.295.17L.598 4.07z",stroke:"#595959",strokeWidth:".8",fill:"#FFF"}),m.a.createElement("path",{d:"M3.956 3.036a.667.667 0 11-1.333 0 .667.667 0 011.333 0z",fill:"#595959"}),m.a.createElement("circle",{fill:"#595959",transform:"scale(-1 1) rotate(30 0 -9.207)",cx:"3.283",cy:"3.047",r:"1"}))))),title:t.status.title,search:"status,label,\u72b6\u6001"}]}]},{type:"button",name:"undo",icon:"undo",title:t.undo.title,onDisabled:function(){return!e.command.queryState("undo")||!e.command.queryEnabled("undo")},onActive:function(){return!1}},{type:"button",name:"redo",icon:"redo",title:t.redo.title,onDisabled:function(){return!e.command.queryState("redo")||!e.command.queryEnabled("redo")},onActive:function(){return!1}},{type:"button",name:"paintformat",icon:"paintformat",title:t.paintformat.title},{type:"button",name:"removeformat",icon:"clean",title:t.removeformat.title},{type:"dropdown",name:"heading",className:"toolbar-dropdown-heading",title:n.title,items:[{key:"p",className:"heading-item-p",content:n.p},{key:"h1",className:"heading-item-h1",content:n.h1},{key:"h2",className:"heading-item-h2",content:n.h2},{key:"h3",className:"heading-item-h3",content:n.h3},{key:"h4",className:"heading-item-h4",content:n.h4},{key:"h5",className:"heading-item-h5",content:n.h5},{key:"h6",className:"heading-item-h6",content:n.h6}]},{type:"dropdown",name:"fontsize",className:"toolbar-dropdown-fontsize",title:t.fontsize.title,items:[{key:"12px",content:"12px",hotkey:!1},{key:"13px",content:"13px",hotkey:!1},{key:"14px",content:"14px",hotkey:!1},{key:"15px",content:"15px",hotkey:!1},{key:"16px",content:"16px",hotkey:!1},{key:"19px",content:"19px",hotkey:!1},{key:"22px",content:"22px",hotkey:!1},{key:"24px",content:"24px",hotkey:!1},{key:"29px",content:"29px",hotkey:!1},{key:"32px",content:"32px",hotkey:!1},{key:"40px",content:"40px",hotkey:!1},{key:"48px",content:"48px",hotkey:!1}].map((function(e){return e.key===r?Object(c.a)(Object(c.a)({},e),{},{isDefault:!0}):e})),onDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)||!e.command.queryEnabled("fontsize")}},{type:"dropdown",name:"fontfamily",className:"toolbar-dropdown-fontfamily",title:t.fontfamily.title,items:R(L,Object(c.a)(Object(c.a)({},t.fontfamily.items),{},{notInstalled:t.fontfamily.notInstalled})),onActive:function(t){var n,r=e.command.queryState("fontfamily");if(!r||!Array.isArray(r)||0===r.length)return"";var i=r[0].split(",").map((function(e){return e.replace(/"/g,"").trim().toLowerCase()}));return(null===(n=t.find((function(e){return i.indexOf(e.faimlyName.trim().toLowerCase())>-1})))||void 0===n?void 0:n.key)||""}},{type:"button",name:"bold",icon:"bold",title:t.bold.title,onDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)||!e.command.queryEnabled("bold")}},{type:"button",name:"italic",icon:"italic",title:t.italic.title},{type:"button",name:"strikethrough",icon:"strikethrough",title:t.strikethrough.title},{type:"button",name:"underline",icon:"underline",title:t.underline.title},{type:"dropdown",name:"moremark",icon:"moremark",single:!1,title:t.moremark.title,items:[{key:"sup",icon:"sup",content:t.moremark.sup,disabled:!e.command.queryEnabled("sup"),command:{name:"sup",args:[]}},{key:"sub",icon:"sub",disabled:!e.command.queryEnabled("sub"),content:t.moremark.sub,command:{name:"sub",args:[]}},{key:"code",icon:"code",disabled:!e.command.queryEnabled("code"),content:t.moremark.code,command:{name:"code",args:[]}}],onDisabled:function(){var t=[];return!0===e.command.queryEnabled("sup")&&t.push("sup"),!0===e.command.queryEnabled("sub")&&t.push("sub"),!0===e.command.queryEnabled("code")&&t.push("code"),0===t.length},onActive:function(){var t=[];return!0===e.command.queryState("sup")&&t.push("sup"),!0===e.command.queryState("sub")&&t.push("sub"),!0===e.command.queryState("code")&&t.push("code"),t}},{type:"color",name:"fontcolor",defaultColor:"#262626",defaultActiveColor:"#F5222D",buttonTitle:t.fontcolor.title,dropdownTitle:t.fontcolor.more,content:function(e,t,n){return!0===n&&(e="#BFBFBF",t="#BFBFBF"),m.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",style:{marginBottom:-2}},m.a.createElement("title",null,"color-font"),m.a.createElement("desc",null,"Created with Sketch."),m.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{id:"Rectangle-55",stroke:t,strokeWidth:"0.5",fill:e,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),m.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}},{type:"color",name:"backcolor",defaultColor:"transparent",defaultActiveColor:"#FADB14",buttonTitle:t.backcolor.title,dropdownTitle:t.backcolor.more,content:function(e,t,n){return!0===n&&(e="#BFBFBF",t="#BFBFBF"),m.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",style:{marginBottom:-2}},m.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},m.a.createElement("rect",{stroke:t,strokeWidth:"0.5",fill:e,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),m.a.createElement("g",{transform:"translate(2.781250, 1.375000)",fillRule:"nonzero"},m.a.createElement("path",{fill:"#595959",d:"M2.86079849,6.64817222 L2.05713835,5.84451208 C2.00832281,5.79569655 2.00832281,5.71655092 2.05713835,5.66773539 L3.61029491,4.11457882 L3.11963835,3.62392225 C3.07082281,3.57510672 3.07082281,3.49596109 3.11963835,3.44714556 L6.47839556,0.0883883476 C6.52721109,0.0395728112 6.60635672,0.0395728112 6.65517225,0.0883883476 L11.5165314,4.94974747 C11.5653469,4.998563 11.5653469,5.07770863 11.5165314,5.12652416 L8.15777416,8.48528137 C8.10895863,8.53409691 8.029813,8.53409691 7.98099747,8.48528137 L7.38889678,7.89318068 L5.83574021,9.44633725 C5.78692467,9.49515278 5.70777905,9.49515278 5.65896351,9.44633725 L5.0267407,8.81411444 L4.48856529,9.35326519 C4.39477378,9.44720966 4.26747335,9.5 4.13472392,9.5 L0.608857988,9.5 C0.470786801,9.5 0.358857988,9.38807119 0.358857988,9.25 C0.358857988,9.18363253 0.385247413,9.11998865 0.432210608,9.07309408 L2.86079849,6.64817222 Z M6.56678391,1.67937861 L4.71062861,3.53553391 L8.06938582,6.89429112 L9.92554112,5.03813582 L6.56678391,1.67937861 Z M3.64812861,5.75612373 L5.74735186,7.85534699 L6.54284699,7.05985186 L4.44362373,4.96062861 L3.64812861,5.75612373 Z",id:"Combined-Shape"}))))}},{type:"dropdown",name:"alignment",title:t.alignment.title,items:[{key:"left",icon:"align-left",content:t.alignment.left},{key:"center",icon:"align-center",content:t.alignment.center},{key:"right",icon:"align-right",content:t.alignment.right},{key:"justify",icon:"align-justify",content:t.alignment.justify}]},{type:"button",name:"unorderedlist",icon:"unordered-list",title:t.unorderedlist.title},{type:"button",name:"orderedlist",icon:"ordered-list",title:t.orderedlist.title},{type:"button",name:"tasklist",icon:"task-list",title:t.tasklist.title},{type:"dropdown",name:"indent",icon:"indent",hasDot:!1,title:t.indent.title,items:[{key:"in",icon:"indent",content:t.indent.in},{key:"out",icon:"outdent",content:t.indent.out}]},{type:"dropdown",name:"line-height",renderContent:function(){return m.a.createElement("span",{className:"data-icon data-icon-line-height"})},title:t["line-height"].title,items:[{key:"default",content:t["line-height"].default},{key:"1",content:"1"},{key:"1.15",content:"1.15"},{key:"1.5",content:"1.5"},{key:"2",content:"2"},{key:"2.5",content:"2.5"},{key:"3",content:"3"}]},{type:"button",name:"link",icon:"link",command:{name:"link",args:["_blank"]},title:t.link.title,onDisabled:function(){var t=e.card,n=Object(s.X)(e)?e.change.range.get():s.y.from(e);if(!n)return!e.command.queryEnabled("link");var r=t.find(n.startNode);return!!r&&!r.isCursor(n.startNode)||n.containsCard()||!e.command.queryEnabled("link")}},{type:"button",name:"quote",icon:"quote",title:t.quote.title},{type:"button",name:"hr",icon:"hr",title:t.hr.title}]};A(".editor-toolbar .toolbar-button {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: auto;\r\n    min-width: 26px;\r\n    margin: 0;\r\n    text-align: center;\r\n    padding: 0 7px;\r\n    background-color: transparent;\r\n    border: 1px solid transparent;\r\n    border-radius: 3px 3px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: #595959;\r\n    outline: none;\r\n}\r\n\r\n.editor-toolbar.editor-toolbar-popup .toolbar-button {\r\n    min-width: 24px;\r\n    line-height: 24px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button {\r\n    padding: 0 4px;\r\n    margin: 0 1px;\r\n}\r\n\r\n.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button:hover {\r\n    border: 1px solid transparent;\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button:active,.editor-toolbar .toolbar-button-active,.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button-active:hover {\r\n    background-color: #e8e8e8;\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.editor-toolbar .toolbar-button-disabled,.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button-disabled:hover {\r\n    background-color: transparent;\r\n    border: 1px solid transparent;\r\n    box-shadow: none;\r\n    color: #000000;\r\n    opacity: 0.25;\r\n    cursor: not-allowed;\r\n}");var P=m.a.forwardRef((function(e,t){var n=e.name,r=e.engine,i=e.command,o=Object(g.useState)(!1),a=Object(b.a)(o,2),l=a[0],c=a[1],u=function(t){var i=e.command,o=e.onClick,a=e.disabled,s=e.autoExecute,l=t.target.nodeName;if("INPUT"!==l&&"TEXTAREA"!==l&&t.preventDefault(),!a&&(!o||!1!==o(t,r))&&!1!==s){var c,u=n,h=[];i&&(Array.isArray(i)?h=i:(u=i.name,h=i.args)),null===r||void 0===r||(c=r.command).execute.apply(c,[u].concat(Object(d.a)(h)))}},h=function(t){t.preventDefault();var n=e.onMouseDown;e.disabled||(n&&n(t,r),c(!1))},p=function(t){var n=e.onMouseEnter;n&&n(t,r),c(!0)},f=function(t){var n=e.onMouseLeave;n&&n(t,r),c(!1)},v=function(){var n=e.icon,i=e.content,o=e.className,a=e.active,s=e.disabled;return m.a.createElement("button",{className:Object(y.a)("toolbar-button",o,{"toolbar-button-active":a,"toolbar-button-disabled":s}),ref:t,onClick:u,onMouseDown:h,onMouseEnter:p,onMouseLeave:f},"string"===typeof n?m.a.createElement("span",{className:"data-icon data-icon-".concat(n)}):n,"function"===typeof i?i(r):i)},w=e.title?m.a.createElement("div",{className:"toolbar-tooltip-title"},e.title):null,k=e.hotkey;return!r||!0!==k&&void 0!==k||(k=D(r,i&&!Array.isArray(i)?i.name:n)),"string"===typeof k&&""!==k&&(w=m.a.createElement(m.a.Fragment,null,w,m.a.createElement("div",{className:"toolbar-tooltip-hotkey"},Object(s.P)(k)))),w&&!s.ab?m.a.createElement(C.a,{placement:e.placement||"bottom",title:w,visible:l},v()):v()})),F=function(e){var t=Object(g.useState)(!1),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(g.useEffect)((function(){if(e.current&&s.ab){var t=e.current.getBoundingClientRect();i(t.left>window.visualViewport.width/2)}}),[]),r},H=function(e){var t=Object(g.useState)(!1),n=Object(b.a)(t,2),r=n[0],i=n[1],o=e.engine,a=e.name,s=e.icon,l=e.title,c=e.disabled,u=e.description,h=e.className,p=e.prompt,f=e.placement,v=function(t){if(!c){var n=e.command,r=e.onClick,i=e.autoExecute,s=t.target.nodeName;if("INPUT"!==s&&"TEXTAREA"!==s&&t.preventDefault(),(!r||!1!==r(t,a,o))&&!1!==i){var l,u=a,h=[];n&&(Array.isArray(n)?h=n:(u=n.name,h=n.args)),null===o||void 0===o||(l=o.command).execute.apply(l,[u].concat(Object(d.a)(h)))}}},w=function(t){e.onMouseDown&&e.onMouseDown(t,o)},k=function(){return m.a.createElement("div",{className:Object(y.a)("toolbar-collapse-item",{"toolbar-collapse-item-active":r},{"toolbar-collapse-item-disabled":c},h),onMouseEnter:function(){return i(!c)},onMouseLeave:function(){return i(!1)},onClick:v,onMouseDown:w},"string"===typeof s?m.a.createElement("span",{className:"data-icon data-icon-".concat(s)}):s,l&&m.a.createElement("div",{className:"toolbar-collapse-item-text"},m.a.createElement("div",{className:"toolbar-collapse-item-title"},l),u&&m.a.createElement("div",{className:"toolbar-collapse-item-description"},u)))};return p?m.a.createElement(E.a,{placement:f||"right",content:m.a.createElement("div",{onClick:function(t){e.onClick&&(t.preventDefault(),e.onClick(t,a))}},"function"===typeof p?p(e):p)},k()):k()},q=function(e){var t=e.engine,n=e.title,r=e.items,i=e.onSelect;return m.a.createElement("div",{className:"toolbar-collapse-group"},n&&m.a.createElement("div",{className:"toolbar-collapse-group-title"},n),r.map((function(e){return m.a.createElement(H,Object(c.a)(Object(c.a)({key:e.name,engine:t},e),{},{onClick:function(t,n){var r;return e.onClick&&(r=e.onClick(t,n)),i&&i(t,n),r}}))})))};A(".toolbar-collapse-header {\r\n    color: #8c8c8c;\r\n    margin: 4px 16px 0;\r\n    font-size: 12px;\r\n    line-height: 20px;\r\n    text-align: left;\r\n    padding-bottom: 8px;\r\n    margin-bottom: 6px;\r\n    border-bottom: 1px solid #e8e8e8;\r\n}\r\n\r\n.toolbar-collapse-header code{\r\n    background-color: #f5f5f5;\r\n    border-radius: 4px;\r\n    padding: 2px;\r\n    border: 1px solid #d9d9d9;\r\n}\r\n\r\n.toolbar-collapse-content {\r\n    min-width: 200px\r\n}\r\n\r\n.toolbar-collapse-group-title {\r\n    padding: 2px 16px;\r\n    text-align: left;\r\n    color: #8c8c8c;\r\n    font-weight: 700;\r\n    font-size: 12px;\r\n    line-height: 24px;\r\n}\r\n\r\n.toolbar-collapse-item {\r\n    display: flex;\r\n    cursor: pointer;\r\n    padding: 4px 16px 0;\r\n}\r\n\r\n.toolbar-collapse-item-active {\r\n    background-color: #f4f4f4;\r\n}\r\n\r\n.editor-toolbar .toolbar-collapse-item-disabled, .data-toolbar-component-list .toolbar-collapse-item-disabled, .editor-toolbar:not(.editor-toolbar-mobile) .toolbar-collapse-item-disabled:hover,  .data-toolbar-component-list .toolbar-collapse-item-disabled:hover {\r\n  background-color: transparent;\r\n  border: 1px solid transparent;\r\n  box-shadow: none;\r\n  color: #000000;\r\n  opacity: 0.25;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.toolbar-collapse-item .toolbar-collapse-item-text\r\n{\r\n    display: block;\r\n    text-align: left;\r\n    margin-left: 8px;\r\n}\r\n\r\n.toolbar-collapse-item .toolbar-collapse-item-title{\r\n    display: block;\r\n    color: #595959;\r\n    line-height: 24px;\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n}\r\n\r\n.toolbar-collapse-item .toolbar-collapse-item-description\r\n{\r\n    display: block;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,.45);\r\n}");var U=function(e){var t=e.icon,n=e.content,r=e.header,i=e.groups,o=e.engine,a=e.className,s=e.onSelect,l=!(t||n),d=Object(g.useState)(l),u=Object(b.a)(d,2),h=u[0],p=u[1],f=Object(g.useRef)(null),v=F(f);Object(g.useEffect)((function(){if(!l)return function(){return document.removeEventListener("click",w)}}),[l]);var w=function e(t){if(t)t.target;document.removeEventListener("click",e),p(!1)};return m.a.createElement("div",{className:Object(y.a)("toolbar-dropdown toolbar-collapse",{"toolbar-dropdown-right":v},a),ref:f},!l&&m.a.createElement(P,{name:"collapse",icon:t,content:n,onClick:function(){h?w():(p(!0),setTimeout((function(){document.addEventListener("click",w)}),10))},active:h,disabled:!i.some((function(e){return e.items.some((function(e){return!e.disabled}))}))}),h&&m.a.createElement("div",{className:"toolbar-dropdown-list","data-element":"ui"},"string"===typeof r?m.a.createElement("div",{className:"toolbar-collapse-header",dangerouslySetInnerHTML:{__html:r}}):r&&m.a.createElement("div",{className:"toolbar-collapse-header"},r),m.a.createElement("div",{className:"toolbar-collapse-content"},i.map((function(e,t){return m.a.createElement(q,Object(c.a)(Object(c.a)({key:t,engine:o},e),{},{onSelect:s}))})))))},W=Object(v.a)("position"),V=function(){function e(t,n){var i=this;Object(r.a)(this,e),this.engine=void 0,this.root=void 0,this.otpions=void 0,Object.defineProperty(this,W,{writable:!0,value:void 0}),this.SCOPE_NAME="data-toolbar-component",this.handlePreventDefault=function(e){var t;if(0!==(null===(t=i.root)||void 0===t?void 0:t.closest("body").length))return e.preventDefault(),!1},this.otpions=n,this.engine=t,Object(f.a)(this,W)[W]=new s.w(t)}return Object(i.a)(e,[{key:"select",value:function(e){var t,n,r;null===(t=this.root)||void 0===t||t.find(".toolbar-collapse-item-active").removeClass("toolbar-collapse-item-active"),null===(n=this.root)||void 0===n||null===(r=n.find(".toolbar-collapse-item").eq(e))||void 0===r||r.addClass("toolbar-collapse-item-active")}},{key:"scroll",value:function(e){if(this.root){var t=this.root.find(".toolbar-collapse-item").toArray(),n=this.root.find(".toolbar-collapse-item-active"),r=t.findIndex((function(e){return e.equal(n)})),i="up"===e?r-1:r+1;i<0&&(i=t.length-1),i>=t.length&&(i=0),n=t[i],this.select(i);var o=0;this.root.find(".toolbar-collapse-group-title,.toolbar-collapse-item").each((function(e){if(n.equal(e))return!1;o+=e.clientHeight}));var a=this.root.get();a.scrollTop=o-a.clientHeight/2}}},{key:"unbindEvents",value:function(){Object(x.deleteScope)(this.SCOPE_NAME),Object(x.unbind)("enter",this.SCOPE_NAME),Object(x.unbind)("up",this.SCOPE_NAME),Object(x.unbind)("down",this.SCOPE_NAME),Object(x.unbind)("esc",this.SCOPE_NAME),this.engine.off("keydown:enter",this.handlePreventDefault)}},{key:"bindEvents",value:function(){var e=this;this.unbindEvents(),Object(x.setScope)(this.SCOPE_NAME),O()("enter",this.SCOPE_NAME,(function(t){var n,r,i;if(0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)){t.preventDefault();var o=null===(r=e.root)||void 0===r?void 0:r.find(".toolbar-collapse-item-active");null===o||void 0===o||null===(i=o.get())||void 0===i||i.click()}})),O()("up",this.SCOPE_NAME,(function(t){var n;0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)&&(t.preventDefault(),e.scroll("up"))})),O()("down",this.SCOPE_NAME,(function(t){var n;0!==(null===(n=e.root)||void 0===n?void 0:n.closest("body").length)&&(t.preventDefault(),e.scroll("down"))})),O()("esc",this.SCOPE_NAME,(function(t){t.preventDefault(),e.unbindEvents();var n=e.otpions.onCancel;n&&n()})),this.engine.on("keydown:enter",this.handlePreventDefault)}},{key:"remove",value:function(){var e;this.root&&0!==this.root.length&&(null===(e=Object(f.a)(this,W)[W])||void 0===e||e.destroy(),k.a.unmountComponentAtNode(this.root.get()),this.root.remove(),this.root=void 0)}},{key:"render",value:function(e,t,n){var r=this;this.unbindEvents(),this.remove(),this.root=Object(s.a)('<div class="data-toolbar-component-list" />'),e.append(this.root);var i=this.root.get();k.a.render(0===n.length?m.a.createElement("div",{className:"data-toolbar-component-list-empty"},this.engine.language.get("toolbar","searchEmtpy","title")):m.a.createElement(U,{engine:this.engine,groups:n,onSelect:this.otpions.onSelect}),i,(function(){var e;null===(e=Object(f.a)(r,W)[W])||void 0===e||e.bind(r.root,t)})),this.select(0),this.bindEvents()}}]),e}(),Y=function(e){var t=e.engine,n=e.name,r=e.direction,i=e.items,o=e.className,a=e.onSelect,l=e.values,c=e.hasDot;r||(r="vertical");var u=Object(g.useRef)(null),h=Object(g.useState)(),p=Object(b.a)(h,2),f=p[0],v=p[1];Object(g.useEffect)((function(){var e,n=u.current;if(n){var r=null===t||void 0===t||null===(e=t.scrollNode)||void 0===e?void 0:e.get();if(r){var i=n.getBoundingClientRect(),o=r.getBoundingClientRect();i.top<o.top&&v("bottom"),i.bottom>o.bottom&&v("top")}}}),[u]);var w=function(e){var o=e.key,u=e.title,h=e.icon,p=e.content,f=e.command,v=e.placement,g=e.className,b=e.hotkey,w=e.disabled,k=function(){return m.a.createElement("a",{key:o,className:Object(y.a)("toolbar-dropdown-list-item",g,{"toolbar-dropdown-list-item-disabled":w}),onClick:function(e){if(!w)return function(e,r){e.preventDefault(),e.stopPropagation();var o=i.find((function(e){return e.key===r}));if(o){var s=o.autoExecute,l=o.command;if((!a||!1!==a(e,r))&&!1!==s){var c,u=n,h=[r];l&&(Array.isArray(l)?h=h.concat(l):(u=l.name,h=h.concat(l.args))),null===t||void 0===t||(c=t.command).execute.apply(c,[u].concat(Object(d.a)(h)))}}}(e,o)}},("string"===typeof l&&l===o||Array.isArray(l)&&l.indexOf(o)>-1)&&"horizontal"!==r&&!1!==c&&m.a.createElement("span",{className:"data-icon data-icon-dot"}),"string"===typeof h?m.a.createElement("span",{className:"data-icon data-icon-".concat(h)}):h,"function"===typeof p?p(t):p)},x=u?m.a.createElement("div",{className:"toolbar-tooltip-title"},u):null;return t&&!1!==b&&(b=D(t,f&&!Array.isArray(f)?f.name:n,o)),"string"===typeof b&&""!==b&&(x=m.a.createElement(m.a.Fragment,null,u,m.a.createElement("div",{className:"toolbar-tooltip-hotkey"},Object(s.P)(b)))),x&&!s.ab?m.a.createElement(C.a,{key:"".concat(o,"-tooltip"),title:x,placement:v||"right"},k()):k()};return m.a.createElement("div",{ref:u,className:Object(y.a)("toolbar-dropdown-list","toolbar-dropdown-".concat(r),f?"toolbar-dropdown-placement-".concat(f):"",{"toolbar-dropdown-dot":!1!==c},o)},i.map((function(e){return w(e)})))};A(".toolbar-dropdown {\r\n    position: relative;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-trigger {\r\n    display: flex;\r\n    align-items: stretch;\r\n    height: 100%;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-trigger .toolbar-button {\r\n    margin: 0;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-trigger .toolbar-dropdown-button-text {\r\n    font-size: 12px;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-trigger-arrow .toolbar-button{\r\n    padding-right: 20px;\r\n    margin: 0;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-trigger-arrow .data-icon-arrow {\r\n    position: absolute;\r\n    right: 6px;\r\n    top: calc(100% / 2 - 2px);\r\n    width: 8px;\r\n    height: 8px;\r\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+);\r\n    background-repeat: no-repeat;\r\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list {\r\n    position: absolute;\r\n    top: 32px;\r\n    font-size: 12px;\r\n    background: #ffffff;\r\n    border: 1px solid #e8e8e8;\r\n    border-radius: 3px 3px;\r\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\r\n    padding: 5px 0;\r\n    height: auto;\r\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r\n    z-index: 999;\r\n    max-height: calc(80vh);\r\n    overflow: auto;\r\n}\r\n\r\n.toolbar-dropdown.toolbar-dropdown-right:not(.toolbar-dropdown-right) .toolbar-dropdown-list{\r\n    left: 0px;\r\n}\r\n\r\n.editor-toolbar-mobile .toolbar-dropdown .toolbar-dropdown-list, .editor-toolbar-popup .toolbar-dropdown .toolbar-dropdown-list:not(.toolbar-dropdown-placement-bottom) {\r\n    bottom: 32px;\r\n    top: auto;\r\n    overflow: auto;\r\n}\r\n\r\n.editor-toolbar-mobile .toolbar-dropdown .toolbar-dropdown-list {\r\n    max-height: calc(30vh);\r\n}\r\n\r\n\r\n.editor-toolbar-mobile .toolbar-dropdown.toolbar-dropdown-right .toolbar-dropdown-list,.editor-toolbar-popup .toolbar-dropdown.toolbar-dropdown-right .toolbar-dropdown-list{\r\n    right: 0px;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item {\r\n    padding: 2px 10px 2px 16px;\r\n    line-height: 30px;\r\n    color: #595959;\r\n    text-align: left;\r\n    position: relative;\r\n    display: flex;\r\n    white-space: nowrap;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item-disabled {\r\n    color: rgba(17, 31, 44, 0.24);\r\n    cursor: not-allowed;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item:not(.toolbar-dropdown-list-item-disabled):hover {\r\n    color: #262626;\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon {\r\n    margin-right: 8px;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-horizontal .toolbar-dropdown-list-item {\r\n    display: inline-block;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-dot .toolbar-dropdown-list-item {\r\n    padding-left: 30px;\r\n    padding-right: 16px;\r\n    white-space: nowrap;\r\n}\r\n\r\n.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon-dot\r\n{\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 8px;\r\n    margin-top: -7px;\r\n    width: 14px;\r\n    height: 14px;\r\n    display: block;\r\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjQgKDY3Mzc4KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5VbnRpdGxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPgogICAgICAgIDxnIGlkPSJjaGVjayIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDY4NzUsMi41OTc2NTYyNSBMMTEuNTEzMDg1OSwyLjU5NzY1NjI1IEMxMS4zNzkxMDE2LDIuNTk3NjU2MjUgMTEuMjUxOTUzMSwyLjY1OTE3OTY5IDExLjE2OTkyMTksMi43NjQ0NTMxMiBMNS41MzMwMDc4MSw5LjkwNTI3MzQ0IEwyLjgzMDA3ODEyLDYuNDgwNDY4NzUgQzIuNzQ2Njc5NjksNi4zNzUxOTUzMSAyLjYyMDg5ODQ0LDYuMzEzNjcxODcgMi40ODY5MTQwNiw2LjMxMzY3MTg3IEwxLjUzMTI1LDYuMzEzNjcxODcgQzEuNDM5NjQ4NDQsNi4zMTM2NzE4NyAxLjM4OTA2MjUsNi40MTg5NDUzMSAxLjQ0NTExNzE5LDYuNDkwMDM5MDYgTDUuMTg5ODQzNzUsMTEuMjM0MTc5NyBDNS4zNjQ4NDM3NSwxMS40NTU2NjQxIDUuNzAxMTcxODcsMTEuNDU1NjY0MSA1Ljg3NzUzOTA2LDExLjIzNDE3OTcgTDEyLjU1NDg4MjgsMi43NzI2NTYyNSBDMTIuNjEwOTM3NSwyLjcwMjkyOTY5IDEyLjU2MDM1MTYsMi41OTc2NTYyNSAxMi40Njg3NSwyLjU5NzY1NjI1IFoiIGlkPSJQYXRoIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);\r\n    background-repeat: no-repeat;\r\n}");var G=function(e){var t=e.engine,n=e.direction,r=e.name,i=e.icon,o=e.content,a=e.title,s=e.className,l=e.items,c=e.disabled,d=e.single,u=e.values,h=e.onSelect,p=e.hasArrow,f=e.renderContent,v=e.hasDot,w=e.placement,k=Object(g.useState)(!1),x=Object(b.a)(k,2),O=x[0],C=x[1],E=Object(g.useRef)(null),j=Object(g.useRef)(null),M=F(E);Object(g.useEffect)((function(){return O&&document.addEventListener("click",S),function(){document.removeEventListener("click",S)}}),[O]);var N=function(){C(!0)},S=Object(g.useCallback)((function(e){e&&j.current&&j.current.contains(e.target)||C(!1)}),[]),T=function(e,n){return e?m.a.createElement("span",{className:"data-icon data-icon-".concat(e)}):"string"===typeof n?m.a.createElement("span",{className:"toolbar-dropdown-button-text"},n):"function"===typeof n?n(t):n};!1!==d&&(u=Array.isArray(u)&&u.length>0?u[0]:u);var _=l.find((function(e){return"string"===typeof u&&e.key===u||Array.isArray(u)&&u.indexOf(e.key)>-1})),A=l.length>0?l.find((function(e){return!0===e.isDefault}))||l[0]:null,I=_?f?f(_,t):Array.isArray(u)&&u.length>1?T(i,o):T(_.icon,_.content):i||o?Array.isArray(u)&&u.length>0?"":T(i,o):A?T(A.icon,A.content):"";return!1!==p&&(I=m.a.createElement(m.a.Fragment,null,I,m.a.createElement("span",{className:"data-icon data-icon-arrow"}))),m.a.createElement("div",{className:Object(y.a)("toolbar-dropdown",{"toolbar-dropdown-right":M},s),onClick:function(e){e.preventDefault(),c||(O?S():N())},ref:E},m.a.createElement("div",{className:Object(y.a)("toolbar-dropdown-trigger",{"toolbar-dropdown-trigger-active":O,"toolbar-dropdown-trigger-arrow":!1!==p})},m.a.createElement(P,{name:r,content:I,title:a,active:O,disabled:c,placement:w,ref:j})),O&&m.a.createElement(Y,{hasDot:v,engine:t,direction:n,name:r,items:l,values:u||(i||o?"":(null===A||void 0===A?void 0:A.key)||""),onSelect:function(e,n){S(),h&&h(e,n,t)}}))},Z=function e(){Object(r.a)(this,e)};Z.colors=void 0,Z._map=void 0,Z.getStroke=void 0,Z.getColors=void 0,Z.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],Z._map=function(){for(var e={},t=Z.colors,n=0,r=t.length;n<r;n++)for(var i=0,o=t[n].length;i<o;i++){e[t[n][i]]={y:n,x:i}}return e}(),Z.getStroke=function(e){var t=Z._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},Z.getColors=function(){return this.colors};var X=function(e){var t=e.engine,n=e.color,r=e.activeColors,i=e.setStroke,o=e.onSelect,a=function(e,t){var n=e.hex?_()(e.hex):_()(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#".concat(a),rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}}(n||"#FFFFFF"),s=["#ffffff","#fafafa","transparent"].indexOf(a.hex)>=0,l=r.indexOf(n)>=0,c="transparent"===n,d={check:{fill:function(e){return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=210?"#8C8C8C":"#FFFFFF"}(a),display:l?"block":"none"},block:{backgroundColor:n}};return i&&(d.block.border="1px solid ".concat(Z.getStroke(n))),m.a.createElement("span",{className:Object(y.a)("colorpicker-group-item",{"colorpicker-group-item-border":s,"colorpicker-group-item-active":l,"colorpicker-group-item-special":c}),onClick:function(e){e.preventDefault(),e.stopPropagation(),o&&o(n,e)},title:t.language.get("toolbar","colorPicker")[n.toUpperCase()]},m.a.createElement("span",{style:d.block},m.a.createElement("svg",{style:d.check,viewBox:"0 0 18 18"},m.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))},Q=function(e){var t=e.engine,n=e.colors,r=e.activeColors,i=e.onSelect,o=e.setStroke;return m.a.createElement("span",{className:"colorpicker-group"},n.map((function(e){return m.a.createElement(X,{engine:t,color:e,key:e,activeColors:r,onSelect:i,setStroke:o})})))};A('.colorpicker-default {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    margin: 4px 0 8px;\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n}\r\n\r\n.colorpicker-default:hover {\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n.colorpicker-default-text {\r\n    margin-left: 8px; \r\n}\r\n\r\n.colorpicker-group {\r\n    display: flex;\r\n    width: 100%;\r\n    height: auto;\r\n    position: relative;\r\n    padding: 0 8px;\r\n}\r\n\r\n.colorpicker-group:nth-child(2){\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.colorpicker-group:last-child {\r\n    margin-bottom: 0px;\r\n}\r\n\r\n.colorpicker-group-item {\r\n    width: 24px;\r\n    height: 24px;\r\n    padding: 2px 2px;\r\n    display: inline-block;\r\n    border-radius: 3px 3px;\r\n    border: 1px solid transparent;\r\n    flex: 0 0 auto;\r\n    cursor: pointer;\r\n    background-color: #fff;\r\n}\r\n.colorpicker-group-item > span {\r\n    position: relative;\r\n    width: 18px;\r\n    height: 18px;\r\n    display: block;\r\n    border-radius: 2px 2px;\r\n    border: 1px solid transparent;\r\n}\r\n.colorpicker-group-item > span svg {\r\n    position: absolute;\r\n    top: -1px;\r\n    left: 1px;\r\n    width: 12px;\r\n    height: 12px;\r\n}\r\n.colorpicker-group-item-border > span {\r\n    border: 1px solid #e8e8e8;\r\n}\r\n.colorpicker-group-item-special {\r\n    position: relative;\r\n}\r\n.colorpicker-group-item-special:after {\r\n    content: "";\r\n    display: block;\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 0px;\r\n    width: 22px;\r\n    height: 0;\r\n    border-bottom: 2px solid #ff5151;\r\n    transform: rotate(45deg);\r\n}\r\n.colorpicker-group-item:hover {\r\n    border: 1px solid #d9d9d9;\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);\r\n}');var K=function(e){var t=e.engine,n=e.colors,r=e.defaultActiveColor,i=e.defaultColor,o=e.onSelect,a=e.setStroke,s=Object(g.useState)([r]),l=Object(b.a)(s,2),c=l[0],d=l[1];n||(n=Z.getColors());var u=function(e,t){d([e]),o&&o(e,t)};return m.a.createElement("div",{className:"colorpicker-board",onMouseDown:function(e){"INPUT"!==e.target.tagName&&e.preventDefault()}},m.a.createElement("div",{className:"colorpicker-default",onClick:function(e){return u(i,e)}},m.a.createElement(X,{engine:t,color:i,activeColors:[],onSelect:u}),m.a.createElement("span",{className:"colorpicker-default-text"},t.language.get("toolbar","colorPicker","transparent"===i?"nonFillText":"defaultText"))),n.map((function(e,n){return m.a.createElement(Q,{engine:t,colors:e,key:n,activeColors:c,onSelect:u,setStroke:a})})))};A(".editor-toolbar .colorpicker-button .colorpicker-button-group {\r\n    padding: 0 2px;\r\n}\r\n\r\n.colorpicker-button-group .toolbar-button {\r\n    padding: 0;\r\n}\r\n\r\n.colorpicker-button-group .colorpicker-button-text {\r\n    margin-right: 0;\r\n    min-width: 26px;\r\n    border-radius: 3px 0 0 3px;\r\n    display: block;\r\n}\r\n\r\n.editor-toolbar.editor-toolbar-popup .colorpicker-button-group .colorpicker-button-text {\r\n    margin: 0;\r\n    border-radius: 3px 0 0 3px;\r\n}\r\n\r\n.colorpicker-button-group .colorpicker-button-text:active {\r\n    background-color: #e8e8e8;\r\n}\r\n\r\n.colorpicker-button-group .colorpicker-button-dropdown {\r\n    margin-left: -1px;\r\n    min-width: 17px;\r\n    text-align: center;\r\n    padding: 0 0;\r\n    border-radius: 0 3px 3px 0;\r\n    display: block;\r\n}\r\n\r\n.editor-toolbar.editor-toolbar-popup .colorpicker-button-group .colorpicker-button-dropdown {\r\n    line-height: 24px;\r\n    min-width: 17px;\r\n    padding: 0 4px;\r\n    margin: 0;\r\n    margin-left: -1px;\r\n    border-radius: 0 3px 3px 0;\r\n}\r\n  \r\n.colorpicker-button-group .colorpicker-button-dropdown:hover,\r\n.colorpicker-button-group .colorpicker-button-dropdown:active {\r\n    background-color: #e8e8e8;\r\n}\r\n\r\n.colorpicker-button-group .colorpicker-button-dropdown .colorpicker-button-dropdown-empty {\r\n    display: inline-block;\r\n}\r\n\r\n.colorpicker-button-group:hover .toolbar-button {\r\n    border: 1px solid #e8e8e8;\r\n}\r\n.colorpicker-button-group-active .toolbar-button,\r\n.colorpicker-button-group-active:hover .toolbar-button {\r\n    border: 1px solid #e8e8e8;\r\n}");var $=function(e){var t=e.engine,n=e.autoExecute,r=e.command,i=e.name,o=e.content,a=e.buttonTitle,s=e.dropdownTitle,l=e.disabled,c=e.colors,u=e.defaultActiveColor,h=e.defaultColor,p=e.onSelect,f=e.setStroke,v=e.placement,w=Object(g.useState)(!1),k=Object(b.a)(w,2),x=k[0],O=k[1],C=Object(g.useState)("string"===typeof o?o:o(u,Z.getStroke(u),l)),E=Object(b.a)(C,2),j=E[0],M=E[1],N=Object(g.useState)(u),S=Object(b.a)(N,2),T=S[0],_=S[1],A=Object(g.useRef)(null),I=Object(g.useRef)(null),D=F(I);Object(g.useEffect)((function(){M("string"===typeof o?o:o(T,Z.getStroke(T),l))}),[o,l,T]);var z=Object(g.useRef)(null),L=Object(g.useState)(),R=Object(b.a)(L,2),B=R[0],H=R[1];Object(g.useEffect)((function(){var e,n=z.current;if(n&&x){var r=null===t||void 0===t||null===(e=t.scrollNode)||void 0===e?void 0:e.get();if(r){var i=n.getBoundingClientRect(),o=r.getBoundingClientRect();i.top<o.top&&H("bottom"),i.bottom>o.bottom&&H("top")}}}),[x,z]);Object(g.useEffect)((function(){return x&&document.addEventListener("click",U),function(){document.removeEventListener("click",U)}}),[x]);var q=Object(g.useCallback)((function(){O(!0)}),[]),U=Object(g.useCallback)((function(e){e&&A.current&&A.current.contains(e.target)||O(!1)}),[]),W=function(e,o){if(_(e),U(),!1!==n){var a,s=i,l=[e,h];r&&(Array.isArray(r)?l=r:(s=r.name,l=r.args)),null===t||void 0===t||(a=t.command).execute.apply(a,[s].concat(Object(d.a)(l)))}p&&p(e,o)};return m.a.createElement("div",{ref:I,className:Object(y.a)("toolbar-dropdown","colorpicker-button",{"toolbar-dropdown-right":D})},m.a.createElement("div",{className:Object(y.a)("toolbar-dropdown-trigger colorpicker-button-group",{"colorpicker-button-group-active":x})},m.a.createElement(P,{className:"colorpicker-button-text",name:i,title:a,content:j,disabled:l,onClick:function(e){return W(T,e)},placement:v}),m.a.createElement(P,{className:"colorpicker-button-dropdown toolbar-dropdown-trigger-arrow",name:i,title:s,disabled:l,icon:m.a.createElement("span",{className:"colorpicker-button-dropdown-empty"}),content:m.a.createElement("span",{className:"data-icon data-icon-arrow"}),onClick:function(e){e.preventDefault(),x?U():q()},placement:v,ref:A})),x&&m.a.createElement("div",{ref:z,className:Object(y.a)("toolbar-dropdown-list",B?"toolbar-dropdown-placement-".concat(B):""),"data-element":"ui"},m.a.createElement(K,{engine:t,colors:c,defaultActiveColor:T,defaultColor:h,onSelect:W,setStroke:f})))};A(".editor-toolbar-group {\r\n    padding: 4px;\r\n    width: auto;\r\n    border-left: 1px solid #e8e8e8;\r\n    display: flex;\r\n    align-items: stretch;\r\n}\r\n\r\n.editor-toolbar .editor-toolbar-group:nth-child(1) {\r\n    border-left: none;\r\n}");var J=function(e){var t=e.engine,n=e.items,r=e.icon,i=e.content,o=e.popup,a=function(e){return n.map((function(n,r){switch(n.type){case"button":return m.a.createElement(P,Object(c.a)(Object(c.a)({engine:t,key:n.name},n),{},{placement:e}));case"dropdown":return m.a.createElement(G,Object(c.a)(Object(c.a)({engine:t,key:n.name},n),{},{placement:e}));case"color":return m.a.createElement($,Object(c.a)(Object(c.a)({engine:t,key:n.name},n),{},{placement:e}));case"collapse":return m.a.createElement(U,Object(c.a)({engine:t,key:r},n))}}))};return m.a.createElement("div",{className:"editor-toolbar-group"},r||i?m.a.createElement(E.a,{getPopupContainer:function(){return document.querySelector(".data-toolbar-popup-wrapper")||document.querySelector(".editor-toolbar")||document.body},overlayClassName:"editor-toolbar-popover",content:m.a.createElement("div",{className:Object(y.a)("editor-toolbar",{"editor-toolbar-mobile":s.ab&&!o,"editor-toolbar-popup":o}),"data-element":"ui"},a("top")),arrowPointAtCenter:!0,placement:s.ab?"topRight":void 0},m.a.createElement(P,{name:"group-popover",icon:r,content:i})):a())},ee={"en-US":{toolbar:{collapse:{title:"Type <code>".concat(s.Z?"\u2318":"Ctrl","</code> + <code>/</code> to quickly insert a card")},undo:{title:"Undo"},redo:{title:"Redo"},paintformat:{title:"Format brush"},removeformat:{title:"Clear format"},heading:{title:"Text and title",p:"Text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},fontfamily:{title:"Font family",notInstalled:"The font may not be installed",items:{default:"Default",arial:"Arial",comicSansMS:"Comic Sans MS",courierNew:"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact",timesNewRoman:"Times New Roman",trebuchetMS:"Trebuchet MS",verdana:"Verdana",fangSong:"FangSong",stFangsong:"STFangsong",stSong:"STSong",stKaiti:"STKaiti",simSun:"SimSum",microsoftYaHei:"Microsoft YaHei",kaiTi:"KaiTi",kaitiSC:"KaiTi SC",simHei:"SimHei",heitiSC:"Heiti SC",fzHei:"FZHeiTi",fzKai:"FZKaiTi",fzFangSong:"FZFangSong"}},fontsize:{title:"Font size"},fontcolor:{title:"Font color",more:"More colors"},backcolor:{title:"Background color",more:"More colors"},bold:{title:"Bold"},italic:{title:"Italic"},strikethrough:{title:"Strikethrough"},underline:{title:"Underline"},moremark:{title:"More text styles",sup:"Sup",sub:"Sub",code:"Inline code"},alignment:{title:"Alignment",left:"Align left",center:"Align center",right:"Align right",justify:"Align justify"},unorderedlist:{title:"Unordered list"},orderedlist:{title:"Ordered list"},tasklist:{title:"Task list"},indent:{title:"Ident",in:"Increase indent",out:"Reduce indent"},"line-height":{title:"Line height",default:"Default"},link:{title:"Insert Link"},quote:{title:"Insert reference"},hr:{title:"Insert dividing line"},colorPicker:{defaultText:"Default Color",nonFillText:"No fill color","#000000":"Black","#262626":"Dark Gray 3","#595959":"Dark Gray 2","#8C8C8C":"Dark Gray 1","#BFBFBF":"Gray","#D9D9D9":"Light Gray 4","#E9E9E9":"Light Gray 3","#F5F5F5":"Light Gray 2","#FAFAFA":"Light Gray 1","#FFFFFF":"White","#F5222D":"Red","#FA541C":"Chinese Red","#FA8C16":"Orange","#FADB14":"Yellow","#52C41A":"Green","#13C2C2":"Cyan","#1890FF":"Light Blue","#2F54EB":"Blue","#722ED1":"Purple","#EB2F96":"Magenta","#FFE8E6":"Red 1","#FFECE0":"Chinese Red 1","#FFEFD1":"Orange 1","#FCFCCA":"Yellow 1","#E4F7D2":"Green 1","#D3F5F0":"Cyan 1","#D4EEFC":"Light Blue 1","#DEE8FC":"Blue 1","#EFE1FA":"Purple 1","#FAE1EB":"Magenta 1","#FFA39E":"Red 2","#FFBB96":"Chinese Red 2","#FFD591":"Orange 2","#FFFB8F":"Yellow 2","#B7EB8F":"Green 2","#87E8DE":"Cyan 2","#91D5FF":"Light Blue 2","#ADC6FF":"Blue 2","#D3ADF7":"Purple 2","#FFADD2":"Magenta 2","#FF4D4F":"Red 3","#FF7A45":"Chinese Red 3","#FFA940":"Orange 3","#FFEC3D":"Yellow 3","#73D13D":"Green 3","#36CFC9":"Cyan 3","#40A9FF":"Light Blue 3","#597EF7":"Blue 3","#9254DE":"Purple 3","#F759AB":"Magenta 3","#CF1322":"Red 4","#D4380D":"Chinese Red 4","#D46B08":"Orange 4","#D4B106":"Yellow 4","#389E0D":"Green 4","#08979C":"Cyan 4","#096DD9":"Light Blue 4","#1D39C4":"Blue 4","#531DAB":"Purple 4","#C41D7F":"Magenta 4","#820014":"Red 5","#871400":"Chinese Red 5","#873800":"Orange 5","#614700":"Yellow 5","#135200":"Green 5","#00474F":"Cyan 5","#003A8C":"Light Blue 5","#061178":"Blue 5","#22075E":"Purple 5","#780650":"Magenta 5"},component:{placeholder:"Card name"},image:{title:"Image"},codeblock:{title:"Codeblock"},table:{title:"Table"},file:{title:"File"},video:{title:"Video"},math:{title:"Formula"},status:{title:"Status"},mind:{title:"Mind Map"},commonlyUsed:{title:"Commonly used"},searchEmtpy:{title:"No matching card"}}},"zh-CN":{toolbar:{collapse:{title:"\u8f93\u5165  <code>".concat(s.Z?"\u2318":"Ctrl","</code> + <code>/</code>  \u5feb\u901f\u63d2\u5165\u5361\u7247")},undo:{title:"\u64a4\u9500"},redo:{title:"\u91cd\u505a"},paintformat:{title:"\u683c\u5f0f\u5237"},removeformat:{title:"\u6e05\u9664\u683c\u5f0f"},heading:{title:"\u6b63\u6587\u4e0e\u6807\u9898",p:"\u6b63\u6587",h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",h5:"\u6807\u9898 5",h6:"\u6807\u9898 6"},fontfamily:{title:"\u5b57\u4f53",notInstalled:"\u53ef\u80fd\u672a\u5b89\u88c5\u8be5\u5b57\u4f53",items:{default:"\u9ed8\u8ba4",arial:"Arial",comicSansMS:"Comic Sans MS",courierNew:"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact",timesNewRoman:"Times New Roman",trebuchetMS:"Trebuchet MS",verdana:"Verdana",fangSong:"\u4eff\u5b8b",stFangsong:"\u534e\u6587\u4eff\u5b8b",stSong:"\u534e\u6587\u5b8b\u4f53",stKaiti:"\u534e\u6587\u6977\u4f53",simSun:"\u5b8b\u4f53",microsoftYaHei:"\u5fae\u8f6f\u96c5\u9ed1",kaiTi:"\u6977\u4f53",kaitiSC:"\u6977\u4f53-\u7b80",simHei:"\u9ed1\u4f53",heitiSC:"\u9ed1\u4f53-\u7b80",fzHei:"\u65b9\u6b63\u9ed1\u4f53",fzKai:"\u65b9\u6b63\u6977\u4f53",fzFangSong:"\u65b9\u6b63\u4eff\u5b8b"}},fontsize:{title:"\u5b57\u53f7"},fontcolor:{title:"\u5b57\u4f53\u989c\u8272",more:"\u66f4\u591a\u989c\u8272"},backcolor:{title:"\u80cc\u666f\u989c\u8272",more:"\u66f4\u591a\u989c\u8272"},bold:{title:"\u7c97\u4f53"},italic:{title:"\u659c\u4f53"},strikethrough:{title:"\u5220\u9664\u7ebf"},underline:{title:"\u4e0b\u5212\u7ebf"},moremark:{title:"\u66f4\u591a\u6587\u672c\u6837\u5f0f",sup:"\u4e0a\u6807",sub:"\u4e0b\u6807",code:"\u884c\u5185\u4ee3\u7801"},alignment:{title:"\u5bf9\u9f50\u65b9\u5f0f",left:"\u5de6\u5bf9\u9f50",center:"\u5c45\u4e2d\u5bf9\u9f50",right:"\u53f3\u5bf9\u9f50",justify:"\u4e24\u7aef\u5bf9\u9f50"},unorderedlist:{title:"\u65e0\u5e8f\u5217\u8868"},orderedlist:{title:"\u6709\u5e8f\u5217\u8868"},tasklist:{title:"\u4efb\u52a1\u5217\u8868"},indent:{title:"\u7f29\u8fdb",in:"\u589e\u52a0\u7f29\u8fdb",out:"\u51cf\u5c11\u7f29\u8fdb"},"line-height":{title:"\u884c\u9ad8",default:"\u9ed8\u8ba4"},link:{title:"\u94fe\u63a5"},quote:{title:"\u63d2\u5165\u5f15\u7528"},hr:{title:"\u63d2\u5165\u5206\u5272\u7ebf"},colorPicker:{defaultText:"\u9ed8\u8ba4",nonFillText:"\u65e0\u586b\u5145\u8272","#000000":"\u9ed1\u8272","#262626":"\u6df1\u7070 3","#595959":"\u6df1\u7070 2","#8C8C8C":"\u6df1\u7070 1","#BFBFBF":"\u7070\u8272","#D9D9D9":"\u6d45\u7070 4","#E9E9E9":"\u6d45\u7070 3","#F5F5F5":"\u6d45\u7070 2","#FAFAFA":"\u6d45\u7070 1","#FFFFFF":"\u767d\u8272","#F5222D":"\u7ea2\u8272","#FA541C":"\u6731\u7ea2","#FA8C16":"\u6a59\u8272","#FADB14":"\u9ec4\u8272","#52C41A":"\u7eff\u8272","#13C2C2":"\u9752\u8272","#1890FF":"\u6d45\u84dd","#2F54EB":"\u84dd\u8272","#722ED1":"\u7d2b\u8272","#EB2F96":"\u73ab\u7ea2","#FFE8E6":"\u7ea2\u8272 1","#FFECE0":"\u6731\u7ea2 1","#FFEFD1":"\u6a59\u8272 1","#FCFCCA":"\u9ec4\u8272 1","#E4F7D2":"\u7eff\u8272 1","#D3F5F0":"\u9752\u8272 1","#D4EEFC":"\u6d45\u84dd 1","#DEE8FC":"\u84dd\u8272 1","#EFE1FA":"\u7d2b\u8272 1","#FAE1EB":"\u73ab\u7ea2 1","#FFA39E":"\u7ea2\u8272 2","#FFBB96":"\u6731\u7ea2 2","#FFD591":"\u6a59\u8272 2","#FFFB8F":"\u9ec4\u8272 2","#B7EB8F":"\u7eff\u8272 2","#87E8DE":"\u9752\u8272 2","#91D5FF":"\u6d45\u84dd 2","#ADC6FF":"\u84dd\u8272 2","#D3ADF7":"\u7d2b\u8272 2","#FFADD2":"\u73ab\u7ea2 2","#FF4D4F":"\u7ea2\u8272 3","#FF7A45":"\u6731\u7ea2 3","#FFA940":"\u6a59\u8272 3","#FFEC3D":"\u9ec4\u8272 3","#73D13D":"\u7eff\u8272 3","#36CFC9":"\u9752\u8272 3","#40A9FF":"\u6d45\u84dd 3","#597EF7":"\u84dd\u8272 3","#9254DE":"\u7d2b\u8272 3","#F759AB":"\u73ab\u7ea2 3","#CF1322":"\u7ea2\u8272 4","#D4380D":"\u6731\u7ea2 4","#D46B08":"\u6a59\u8272 4","#D4B106":"\u9ec4\u8272 4","#389E0D":"\u7eff\u8272 4","#08979C":"\u9752\u8272 4","#096DD9":"\u6d45\u84dd 4","#1D39C4":"\u84dd\u8272 4","#531DAB":"\u7d2b\u8272 4","#C41D7F":"\u73ab\u7ea2 4","#820014":"\u7ea2\u8272 5","#871400":"\u6731\u7ea2 5","#873800":"\u6a59\u8272 5","#614700":"\u9ec4\u8272 5","#135200":"\u7eff\u8272 5","#00474F":"\u9752\u8272 5","#003A8C":"\u6d45\u84dd 5","#061178":"\u84dd\u8272 5","#22075E":"\u7d2b\u8272 5","#780650":"\u73ab\u7ea2 5"},component:{placeholder:"\u5361\u7247\u540d\u79f0"},image:{title:"\u56fe\u7247"},codeblock:{title:"\u4ee3\u7801\u5757"},table:{title:"\u8868\u683c"},file:{title:"\u9644\u4ef6"},video:{title:"\u89c6\u9891"},math:{title:"\u516c\u5f0f"},status:{title:"\u72b6\u6001"},mind:{title:"\u8111\u56fe"},commonlyUsed:{title:"\u5e38\u7528"},searchEmtpy:{title:"\u65e0\u5339\u914d\u5361\u7247"}}}};A(".ant-tooltip .toolbar-tooltip-title {\r\n    font-size: 12px;\r\n    text-align: center;\r\n}\r\n\r\n.ant-tooltip .toolbar-tooltip-hotkey {\r\n    font-size: 12px;\r\n    color: rgba(255, 255, 255, 0.85);\r\n    text-align: center;\r\n}\r\n\r\n.editor-toolbar {\r\n    position: relative;\r\n    width: 100%;\r\n    padding:0;\r\n    z-index: 200;\r\n    border-top:1px solid rgba(0,0,0,.05);\r\n    border-bottom: 1px solid rgba(0,0,0,.05);\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\n.editor-toolbar .editor-toolbar-content {\r\n    position: relative;\r\n    flex-direction: row;\r\n    background: transparent;\r\n    text-align: center;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.editor-toolbar.editor-toolbar-mobile,.editor-toolbar.editor-toolbar-popover {\r\n    position: absolute;\r\n    left: 0;\r\n    box-shadow: none;\r\n}\r\n\r\n.editor-toolbar.editor-toolbar-popup {\r\n    position: initial;\r\n    box-shadow: none;\r\n    top: 0;\r\n    left: 0;\r\n    border: 0 none;\r\n}\r\n\r\n.editor-toolbar-mobile .editor-toolbar-content {\r\n    text-align: left;\r\n    padding: 0 12px;\r\n}\r\n\r\n.editor-toolbar-mobile .editor-toolbar-group,.editor-toolbar-popup .editor-toolbar-group {\r\n    border: 0 none;\r\n    padding: 0;\r\n}\r\n\r\n.editor-toolbar-popup .editor-toolbar-content {\r\n    text-align: center;\r\n    padding: 0;\r\n}\r\n\r\n.editor-toolbar-popover .editor-toolbar {\r\n    position: relative;\r\n    box-shadow: none;\r\n    border: 0 none;\r\n    left: 0;\r\n    top: 0;\r\n    display: flex;\r\n}\r\n\r\n.editor-toolbar-popover {\r\n    border-radius: 3px;\r\n    background: transparent;\r\n}\r\n\r\n.editor-toolbar-popover .ant-popover-inner {\r\n    border-radius: 3px;\r\n}\r\n\r\n.editor-toolbar-popover .ant-popover-inner-content {\r\n    padding: 2px;\r\n}\r\n\r\n.am-engine-mobile {\r\n  margin-bottom: 40px;\r\n}");var te=function(t){var n=t.engine,r=t.className,i=t.popup,o=t.items,a=void 0===o?[]:o,d=Object(g.useState)([]),u=Object(b.a)(d,2),h=u[0],p=u[1],f=Object(g.useRef)(null),v=Object(g.useRef)(null),w=Object(g.useState)({top:0}),k=Object(b.a)(w,2),x=k[0],O=k[1],C=Object(g.useRef)(null),E=function(){n.isFocus()&&!n.readonly&&(C.current&&clearTimeout(C.current),C.current=setTimeout((function(){var t=f.current,n=t.getBoundingClientRect(),r=Object(s.hb)(getComputedStyle(t).borderTopWidth),i=Object(s.hb)(getComputedStyle(t).borderBottomWidth),o=n.height||0;O({top:e.Math.max(document.body.scrollTop,document.documentElement.scrollTop)+(window.visualViewport.height||0)-o+r+i})}),20))},j=Object(g.useCallback)((function(){var e=[],t=B(n);a.forEach((function(r){var i={items:[]};Array.isArray(r)||(i.icon=r.icon,i.content=r.content,r=r.items),r.forEach((function(e){var r=void 0;if("string"===typeof e){var o=t.find((function(t){return"collapse"===e?t.type===e:"collapse"!==t.type&&t.name===e}));o&&(r=o)}else{var a=t.find((function(t){return"collapse"===e.type?t.type===e.type:"collapse"!==t.type&&t.name===e.name}));if("collapse"===e.type){var s=Object(c.a)(Object(c.a)({},M()(S()(Object(c.a)({},a),"groups"),S()(Object(c.a)({},e),"groups"))),{},{groups:[]});e.groups.forEach((function(e){var t=[];e.items.forEach((function(e){var n=void 0;a.groups.some((function(t){return t.items.some((function(t){var r=t.name===("string"===typeof e?e:e.name);return r&&(n=Object(c.a)(Object(c.a)({},t),"string"===typeof e?{}:e)),r}))})),n?t.push(n):"object"===Object(l.a)(e)&&t.push(e)})),t.length>0&&s.groups.push(Object(c.a)(Object(c.a)({},S()(e,"itmes")),{},{items:t}))})),r=s.groups.length>0?s:void 0}else"dropdown"===e.type?(r=a?M()(a,S()(Object(c.a)({},e),"type","items")):Object(c.a)({},e)).items=e.items:r=a?M()(a,S()(Object(c.a)({},e),"type")):Object(c.a)({},e)}r&&("button"===r.type?r.onActive?r.active=r.onActive():n.command.queryEnabled(r.name)&&(r.active=n.command.queryState(r.name)):"dropdown"===r.type&&(r.onActive?r.values=r.onActive(r.items):r.values=n.command.queryState(r.name)),"collapse"!==r.type?r.disabled=r.onDisabled?r.onDisabled():!n.command.queryEnabled(r.name):r.groups.forEach((function(e){return e.items.forEach((function(e){e.disabled=e.onDisabled?e.onDisabled():!n.command.queryEnabled(e.name)}))})),i.items.push(r))})),i.items.length>0&&e.push(i)})),p(e)}),[n,a]);Object(g.useMemo)((function(){j()}),[n,a]);var N=function(){v.current&&clearTimeout(v.current),v.current=setTimeout((function(){j()}),100)};Object(g.useEffect)((function(){var e;n.language.add(ee),n.on("select",N),n.on("change",N),n.on("blur",N),n.on("focus",N),n.on("historyChange",N);var t=function(){O({top:-120}),clearTimeout(e),e=setTimeout((function(){E()}),200)},r=function(){n.readonly?t():E()};return s.ab?(n.on("readonly",r),n.on("blur",t),n.isFocus()||t(),document.addEventListener("scroll",E),visualViewport.addEventListener("resize",E),visualViewport.addEventListener("scroll",E)):n.on("readonly",N),function(){n.off("select",N),n.off("change",N),n.off("blur",N),n.off("focus",N),n.off("historyChange",N),s.ab?(n.off("readonly",r),n.off("blur",t),document.removeEventListener("scroll",E),visualViewport.removeEventListener("resize",E),visualViewport.removeEventListener("scroll",E)):n.off("readonly",N)}}),[n]);return m.a.createElement("div",{ref:f,className:Object(y.a)("editor-toolbar",r,{"editor-toolbar-mobile":s.ab&&!i,"editor-toolbar-popup":i}),style:s.ab?{top:"".concat(x.top,"px")}:{},"data-element":"ui",onMouseDown:function(e){var t=e.target.nodeName;"INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault()},onMouseOver:function(e){return e.preventDefault()},onMouseMove:function(e){return e.preventDefault()},onContextMenu:function(e){return e.preventDefault()}},m.a.createElement("div",{className:"editor-toolbar-content"},h.map((function(e,t){return m.a.createElement(J,Object(c.a)({key:t,engine:n,popup:i},e))}))))},ne=Object(v.a)("editor"),re=Object(v.a)("root"),ie=Object(v.a)("point"),oe=Object(v.a)("align"),ae=Object(v.a)("options"),se=function(){function e(t){var n,i,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,e),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:{left:0,top:-9999}}),Object.defineProperty(this,oe,{writable:!0,value:"bottom"}),Object.defineProperty(this,ae,{writable:!0,value:{}}),this.onSelect=function(){var e;if(0!==Object(f.a)(o,re)[re].length){var t=null===(e=s.y.from(Object(f.a)(o,ne)[ne]))||void 0===e?void 0:e.cloneRange().shrinkToTextNode(),n=window.getSelection();if(t&&n&&n.focusNode&&!t.collapsed&&!Object(f.a)(o,ne)[ne].card.getSingleSelectedCard(t)&&(t.commonAncestorNode.inEditor(Object(f.a)(o,ne)[ne].container)||t.commonAncestorNode.isRoot(Object(f.a)(o,ne)[ne].container))){var r=t.startNode.next();if((null===r||void 0===r?void 0:r.isElement())&&1===Math.abs(t.endOffset-t.startOffset))if(Object(f.a)(o,ne)[ne].card.closest(r))return void o.hide();var i=t.startNode.prev();if((null===i||void 0===i?void 0:i.isElement())&&1===Math.abs(t.startOffset-t.endOffset))if(Object(f.a)(o,ne)[ne].card.closest(i))return void o.hide();var a=t.getSubRanges(!0),l=Object(f.a)(o,ne)[ne].card.active;if(0===a.length||l&&!l.isEditable)o.hide();else{var c=a[0],d=a[a.length-1],u=c.cloneRange().collapse(!0).getBoundingClientRect(),h=d.cloneRange().collapse(!1).getBoundingClientRect(),p=void 0;o.showContent((function(){var e,t,r;if(p=null===(e=Object(f.a)(o,re)[re].get())||void 0===e?void 0:e.getBoundingClientRect()){Object(f.a)(o,oe)[oe]=d.startNode.equal(n.focusNode)&&(!c.startNode.equal(n.focusNode)||n.focusOffset>n.anchorOffset)?"bottom":"top";var i="bottom"===Object(f.a)(o,oe)[oe]?h:u;"top"===Object(f.a)(o,oe)[oe]&&i.top-p.height-12<window.innerHeight-((null===(t=Object(f.a)(o,ne)[ne].scrollNode)||void 0===t?void 0:t.height())||0)?Object(f.a)(o,oe)[oe]="bottom":"bottom"===Object(f.a)(o,oe)[oe]&&i.bottom+p.height+12>window.innerHeight&&(Object(f.a)(o,oe)[oe]="top"),i="bottom"===Object(f.a)(o,oe)[oe]?h:u;var a=null===(r=Object(f.a)(o,ne)[ne].scrollNode)||void 0===r?void 0:r.get(),s=null===a||void 0===a?void 0:a.getBoundingClientRect(),l="top"===Object(f.a)(o,oe)[oe]?i.top-p.height-12-((null===s||void 0===s?void 0:s.top)||0)+((null===a||void 0===a?void 0:a.scrollTop)||0):i.bottom+12-((null===s||void 0===s?void 0:s.top)||0)+((null===a||void 0===a?void 0:a.scrollTop)||0),v=i.left-((null===s||void 0===s?void 0:s.left)||0)+((null===a||void 0===a?void 0:a.scrollLeft)||0)+i.width-p.width/2;v<0&&(v=16),Object(f.a)(o,ie)[ie]={left:v,top:l},Object(f.a)(o,re)[re].css({left:"".concat(Object(f.a)(o,ie)[ie].left,"px"),top:"".concat(Object(f.a)(o,ie)[ie].top,"px")})}else o.hide()}))}}else o.hide()}},this.hide=function(e){if(null===e||void 0===e?void 0:e.target){var t=Object(s.a)(e.target);if(t.closest(".data-toolbar-popup-wrapper").length>0||t.closest(s.G).length>0)return}Object(f.a)(o,re)[re].css({left:"0px",top:"-9999px"})},Object(f.a)(this,ae)[ae]=a,Object(f.a)(this,ne)[ne]=t,Object(f.a)(this,re)[re]=Object(s.a)('<div class="data-toolbar-popup-wrapper"></div>'),((null===(n=Object(f.a)(this,ne)[ne].scrollNode)||void 0===n?void 0:n.get())||document.body).appendChild(Object(f.a)(this,re)[re][0]),Object(s.X)(t)?Object(f.a)(this,ne)[ne].on("select",this.onSelect):document.addEventListener("selectionchange",this.onSelect),s.ab||window.addEventListener("scroll",this.onSelect),window.addEventListener("resize",this.onSelect),null===(i=Object(f.a)(this,ne)[ne].scrollNode)||void 0===i||i.on("scroll",this.onSelect),document.addEventListener("mousedown",this.hide)}return Object(i.a)(e,[{key:"showContent",value:function(e){var t=Object(f.a)(this,ne)[ne].trigger("toolbar-render",Object(f.a)(this,ae)[ae]);t||0!==(Object(f.a)(this,ae)[ae].items||[]).length?k.a.render("object"===Object(l.a)(t)?t:m.a.createElement(te,{popup:!0,engine:Object(f.a)(this,ne)[ne],items:Object(f.a)(this,ae)[ae].items||[]}),Object(f.a)(this,re)[re].get(),(function(){e&&e()})):this.hide()}},{key:"destroy",value:function(){var e;Object(f.a)(this,re)[re].remove(),Object(s.X)(Object(f.a)(this,ne)[ne])?Object(f.a)(this,ne)[ne].off("select",this.onSelect):document.removeEventListener("selectionchange",this.onSelect),s.ab||window.removeEventListener("scroll",this.onSelect),window.removeEventListener("resize",this.onSelect),null===(e=Object(f.a)(this,ne)[ne].scrollNode)||void 0===e||e.off("scroll",this.onSelect),document.removeEventListener("mousedown",this.hide)}}]),e}();A(".data-toolbar-component-list {\r\n    position: absolute;\r\n    min-height: 0px;\r\n    top: 10px;\r\n    left: 0;\r\n}\r\n\r\n.data-toolbar-component-list  .toolbar-dropdown-list {\r\n    top:0px;\r\n    position: relative;\r\n}\r\n\r\n.data-toolbar-component-placeholder {\r\n    color: rgba(0,0,0,0.25);\r\n    pointer-events: none;\r\n    width: 76px;\r\n}\r\n\r\n.data-toolbar-component-list-empty {\r\n    position: relative;\r\n    font-size: 14px;\r\n    background: #ffffff;\r\n    border: 1px solid #e8e8e8;\r\n    border-radius: 3px 3px;\r\n    box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\r\n    padding: 5px 16px;\r\n    line-height: 32px;\r\n    min-width: 200px;\r\n    height: auto;\r\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r\n    z-index: 999;\r\n    max-height: calc(80vh);\r\n    overflow: auto;\r\n}\r\n/** ------------------- popup ---------------------- **/\r\n.data-toolbar-popup-wrapper {\r\n    position: absolute;\r\n    z-index: 9999;\r\n    padding: 4px;\r\n    background-color: #fff;\r\n    border-radius: 4px;\r\n    border: 1px solid #dee0e3;\r\n    box-shadow: 0 4px 8px 0 rgba(31, 35, 41, 0.1);\r\n}\r\n\r\n.data-toolbar-popup-wrapper .editor-toolbar-popover {\r\n    width: -webkit-max-content;\r\n    width: -moz-max-content;\r\n    width: max-content;\r\n}\r\n\r\n.data-toolbar-popup-wrapper .editor-toolbar-popover .ant-popover-inner-content {\r\n    padding: 4px;\r\n    background-color: #fff;\r\n    border-radius: 4px;\r\n    border: 1px solid #dee0e3;\r\n}\r\n\r\n.data-toolbar-popup-wrapper .editor-toolbar-popover .ant-popover-arrow {\r\n    display: none;\r\n}");var le=Object(v.a)("collapseData"),ce=Object(v.a)("data"),de=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).keyword=void 0,e.placeholder=void 0,e.component=void 0,Object.defineProperty(Object(u.a)(e),le,{writable:!0,value:void 0}),Object.defineProperty(Object(u.a)(e),ce,{writable:!0,value:void 0}),e}return Object(i.a)(n,[{key:"init",value:function(){var e=this,t=this.editor;Object(s.X)(t)&&!s.eb&&(this.component=new V(t,{onCancel:function(){e.changeToText()},onSelect:function(){e.remove()}}))}},{key:"setData",value:function(e){Object(f.a)(this,ce)[ce]=e}},{key:"getData",value:function(){var e=this.editor;if(!Object(s.X)(e))return[];var t=[],n=B(e).find((function(e){return"collapse"===e.type})),r=[];n&&(r=n.groups);var i=[];r.forEach((function(e){i.push.apply(i,Object(d.a)(e.items))}));var o=this.getValue();return(Object(f.a)(this,ce)[ce]||(o?o.data:[])||[]).forEach((function(n){var r=n.title,o=[];n.items.forEach((function(t){var n=t;"string"!==typeof t&&(n=t.name);var r=i.find((function(e){return e.name===n}));r?o.push(Object(c.a)(Object(c.a)(Object(c.a)({},r),"string"!==typeof t?t:{}),{},{disabled:r.onDisabled?r.onDisabled():!e.command.queryEnabled(n)})):"object"===Object(l.a)(t)&&o.push(t)})),t.push({title:r,items:o})})),t}},{key:"search",value:function(e){var t=[];"string"===typeof e&&(e=e.toLowerCase()),Object(f.a)(this,le)[le]||(Object(f.a)(this,le)[le]=[]),Object(f.a)(this,le)[le].forEach((function(n){n.items.forEach((function(n){n.search&&n.search.toLowerCase().indexOf(e)>=0&&(t.find((function(e){return e.name===n.name}))||t.push(Object(c.a)({},n)))}))}));var n=[];return t.length>0&&n.push({title:"",items:t}),n}},{key:"remove",value:function(){var e,t=this.editor;Object(s.X)(t)&&(null===(e=this.component)||void 0===e||e.remove(),t.card.remove(this.id))}},{key:"changeToText",value:function(){var e,t,n=this.editor;if(this.root.inEditor()&&Object(s.X)(n)){var r=(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)||"";this.remove(),n.node.insertText(r)}}},{key:"destroy",value:function(){var e,t;null===(e=this.component)||void 0===e||e.unbindEvents(),null===(t=this.component)||void 0===t||t.remove()}},{key:"activate",value:function(e){var t;(Object(h.a)(Object(p.a)(n.prototype),"activate",this).call(this,e),e)||(null===(t=this.component)||void 0===t||t.unbindEvents(),this.changeToText())}},{key:"handleInput",value:function(){var e,t,n,r=this.editor;if(Object(s.X)(r)){var i=r.change,o=r.card;if(!i.isComposing()){var a,l=(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText.replace(/[\r\n]/g,""))||"";if(""===l)return null===(a=this.component)||void 0===a||a.remove(),void o.remove(this.id);var c=l.substr(1);if(""!==c){var d=this.search(c);null===(n=this.component)||void 0===n||n.render(r.root,this.root,d)}else{var u;null===(u=this.component)||void 0===u||u.render(r.root,this.root,Object(f.a)(this,le)[le]||[])}}}}},{key:"resetPlaceHolder",value:function(){var e,t,n,r;"/"===(null===(e=this.keyword)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)?null===(n=this.placeholder)||void 0===n||n.show():null===(r=this.placeholder)||void 0===r||r.hide()}},{key:"render",value:function(e){var t,n,r,i=this;Object(f.a)(this,ce)[ce]=e;var o=this.editor;if(Object(s.X)(o)&&!s.eb){var a=o.language.get("toolbar","component");this.root.attributes("data-transient","true"),this.root.attributes(s.j,"false");var l=Object(s.a)('<span class="data-toolbar-component-keyword" '.concat(s.j,'="true">/</span><span class="data-toolbar-component-placeholder">').concat(a.placeholder,"</span>")),c=this.getCenter();c.empty().append(l),this.keyword=c.find(".data-toolbar-component-keyword"),this.placeholder=c.find(".data-toolbar-component-placeholder"),null===(t=this.keyword)||void 0===t||t.on("keydown",(function(e){Object(s.Y)("enter",e)&&e.preventDefault()}));var d=Date.now();null===(n=this.keyword)||void 0===n||n.on("input",(function(){if(i.resetPlaceHolder(),Date.now()-d<200){var e,t,n=null===(e=i.keyword)||void 0===e?void 0:e.first();if(n&&n.isText()&&"/\u3001"===n[0].nodeValue||"//"===(null===n||void 0===n||null===(t=n.get())||void 0===t?void 0:t.nodeValue)){var r,o=null===(r=n.get())||void 0===r?void 0:r.splitText(1);null===o||void 0===o||o.remove()}}setTimeout((function(){i.handleInput()}),10)})),Object(f.a)(this,le)[le]||(Object(f.a)(this,le)[le]=this.getData()),null===(r=this.component)||void 0===r||r.render(o.root,this.root,Object(f.a)(this,le)[le])}}}],[{key:"cardName",get:function(){return"toolbar"}},{key:"cardType",get:function(){return s.i.INLINE}},{key:"singleSelectable",get:function(){return!1}},{key:"autoSelected",get:function(){return!1}}]),n}(s.g),ue=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).popup=void 0,e.paserValue=function(e){return!e.isCard()||e.attributes("name")!==de.cardName},e.onSlash=function(t){var n=e.editor;if(Object(s.X)(n)){var r=n.change,i=r.range.get(),o=n.block.closest(i.startNode),a=o.text().trim();if("/"===a&&s.db&&o.empty(),""===a||"/"===a&&s.db||t.ctrlKey||t.metaKey){if(!1===e.options.config)return;if((i=r.range.get()).collapsed){t.preventDefault();var l=e.options.config||function(e){return[{title:e.language.get("toolbar","commonlyUsed","title"),items:["image-uploader","codeblock","table","file-uploader","video-uploader","math","status"]}]}(n),c=n.card.insert(de.cardName,{},l);c.setData(l),c.root.attributes(s.n,"true"),n.card.activate(c.root),i=r.range.get();var d=c.find(".data-toolbar-component-keyword");i.select(d,!0),i.collapse(!1),r.range.select(i)}}}},e}return Object(i.a)(n,[{key:"init",value:function(){var e=this.editor;Object(s.X)(e)&&(e.on("keydown:slash",this.onSlash),e.on("parse:value",this.paserValue)),e.language.add(ee),this.options.popup&&(this.popup=new se(e,{items:this.options.popup.items}))}},{key:"execute",value:function(){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){var e;null===(e=this.popup)||void 0===e||e.destroy();var t=this.editor;t.off("keydown:slash",this.onSlash),t.off("parse:value",this.paserValue)}}],[{key:"pluginName",get:function(){return"toolbar"}}]),n}(s.v);t.c=te}).call(this,n(73))},2481:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2535);function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Object(r.a)(e,t,"set"),n),n}},2482:function(e,t,n){var r=n(220).EventEmitter;t.EventEmitter=r,t.mixin=function(e){for(var t in r.prototype)e.prototype[t]=r.prototype[t]}},2484:function(e,t,n){var r=n(2615)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},2485:function(e,t){function n(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="ShareDBError",n.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED:"ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_APPLIED:"ERR_OT_OP_NOT_APPLIED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PRESENCE_TRANSFORM_FAILED:"ERR_PRESENCE_TRANSFORM_FAILED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE:"ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=n},2487:function(e,t,n){},2490:function(e,t,n){t.defaultType=n(2521).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},2491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),i={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},a={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=1;s<20;s++)a["f"+s]=111+s;function l(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map((function(e){return c(e,t)})),i=function(e){return r.some((function(t){return d(t,e)}))};return null==n?i:i(n)}function c(e,t){var n=t&&t.byKey,r={},s=(e=e.replace("++","+add")).split("+"),l=s.length;for(var c in i)r[i[c]]=!1;var d=!0,p=!1,f=void 0;try{for(var v,g=s[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var m=v.value,b=m.endsWith("?")&&m.length>1;b&&(m=m.slice(0,-1));var y=h(m),w=i[y];if(m.length>1&&!w&&!o[m]&&!a[y])throw new TypeError('Unknown modifier: "'+m+'"');1!==l&&w||(n?r.key=y:r.which=u(m)),w&&(r[w]=!b||null)}}catch(k){p=!0,f=k}finally{try{!d&&g.return&&g.return()}finally{if(p)throw f}}return r}function d(e,t){for(var n in e){var r=e[n],i=void 0;if(null!=r&&((null!=(i="key"===n&&null!=t.key?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&i!==r))return!1}return!0}function u(e){return e=h(e),a[e]||e.toUpperCase().charCodeAt(0)}function h(e){return e=e.toLowerCase(),e=o[e]||e}t.default=l,t.isHotkey=l,t.isCodeHotkey=function(e,t){return l(e,t)},t.isKeyHotkey=function(e,t){return l(e,{byKey:!0},t)},t.parseHotkey=c,t.compareHotkey=d,t.toKeyCode=u,t.toKeyName=h},2492:function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},2493:function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},r.prototype.at=function(e,t,n){var r=this.__find__(e),i=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},2494:function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},2495:function(e,t,n){var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,c=i.min,d=i.max,u=i.random;function h(e,t){if(t=t||{},(e=e||"")instanceof h)return e;if(!(this instanceof h))return new h(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,l=null,u=!1,h=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(T[e])e=T[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{r:z(t[1]),g:z(t[2]),b:z(t[3]),a:P(t[4]),format:n?"name":"hex8"};if(t=F.hex6.exec(e))return{r:z(t[1]),g:z(t[2]),b:z(t[3]),format:n?"name":"hex"};if(t=F.hex4.exec(e))return{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),a:P(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=F.hex3.exec(e))return{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(p=e.r,f=e.g,v=e.b,t={r:255*I(p,255),g:255*I(f,255),b:255*I(v,255)},u=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(r=R(e.s),s=R(e.v),t=function(e,t,n){e=6*I(e,360),t=I(t,100),n=I(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),c=r%6,d=[n,s,a,a,l,n][c],u=[l,n,n,s,a,a][c],h=[a,a,l,n,n,s][c];return{r:255*d,g:255*u,b:255*h}}(e.h,r,s),u=!0,h="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(r=R(e.s),l=R(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=I(e,360),t=I(t,100),n=I(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,l),u=!0,h="hsl"),e.hasOwnProperty("a")&&(n=e.a));var p,f,v;return n=A(n),{ok:u,format:e.format||h,r:c(255,d(t.r,0)),g:c(255,d(t.g,0)),b:c(255,d(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function p(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=d(e,t,n),a=c(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function f(e,t,n){e=I(e,255),t=I(t,255),n=I(n,255);var r,i,o=d(e,t,n),a=c(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function v(e,t,n,r){var i=[L(l(e).toString(16)),L(l(t).toString(16)),L(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[L(B(r)),L(l(e).toString(16)),L(l(t).toString(16)),L(l(n).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.s-=t/100,n.s=D(n.s),h(n)}function b(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.s+=t/100,n.s=D(n.s),h(n)}function y(e){return h(e).desaturate(100)}function w(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.l+=t/100,n.l=D(n.l),h(n)}function k(e,t){t=0===t?0:t||10;var n=h(e).toRgb();return n.r=d(0,c(255,n.r-l(-t/100*255))),n.g=d(0,c(255,n.g-l(-t/100*255))),n.b=d(0,c(255,n.b-l(-t/100*255))),h(n)}function x(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.l-=t/100,n.l=D(n.l),h(n)}function O(e,t){var n=h(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,h(n)}function C(e){var t=h(e).toHsl();return t.h=(t.h+180)%360,h(t)}function E(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+120)%360,s:t.s,l:t.l}),h({h:(n+240)%360,s:t.s,l:t.l})]}function j(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+90)%360,s:t.s,l:t.l}),h({h:(n+180)%360,s:t.s,l:t.l}),h({h:(n+270)%360,s:t.s,l:t.l})]}function M(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+72)%360,s:t.s,l:t.l}),h({h:(n+216)%360,s:t.s,l:t.l})]}function N(e,t,n){t=t||6,n=n||30;var r=h(e).toHsl(),i=360/n,o=[h(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(h(r));return o}function S(e,t){t=t||6;for(var n=h(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(h({h:r,s:i,v:o})),o=(o+s)%1;return a}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=A(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[L(l(e).toString(16)),L(l(t).toString(16)),L(l(n).toString(16)),L(B(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*I(this._r,255))+"%",g:l(100*I(this._g,255))+"%",b:l(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%)":"rgba("+l(100*I(this._r,255))+"%, "+l(100*I(this._g,255))+"%, "+l(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=h(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(k,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(N,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},h.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:R(e[r]));e=n}return h(e,t)},h.equals=function(e,t){return!(!e||!t)&&h(e).toRgbString()==h(t).toRgbString()},h.random=function(){return h.fromRatio({r:u(),g:u(),b:u()})},h.mix=function(e,t,n){n=0===n?0:n||50;var r=h(e).toRgb(),i=h(t).toRgb(),o=n/100;return h({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},h.readability=function(e,t){var n=h(e),r=h(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},h.isReadable=function(e,t,n){var r,i,o=h.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},h.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=h.readability(e,t[c]))>l&&(l=r,s=h(t[c]));return h.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,h.mostReadable(e,["#fff","#000"],n))};var T=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=h.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(T);function A(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function I(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,d(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function D(e){return c(1,d(0,e))}function z(e){return parseInt(e,16)}function L(e){return 1==e.length?"0"+e:""+e}function R(e){return e<=1&&(e=100*e+"%"),e}function B(e){return i.round(255*parseFloat(e)).toString(16)}function P(e){return z(e)/255}var F=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(e){return!!F.CSS_UNIT.exec(e)}e.exports?e.exports=h:void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}(Math)},2496:function(e,t,n){(function(r,i){var o;!function(a){var s=Object.hasOwnProperty,l=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},c="object"==typeof r&&"function"==typeof r.nextTick,d="function"===typeof Symbol,u="object"===typeof Reflect,h="function"===typeof i?i:setTimeout,p=d?u&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function f(){this._events={},this._conf&&v.call(this,this._conf)}function v(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==a&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!==typeof r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var m=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function b(e,t){for(var n={},r=e.length,i=t?t.length:0,o=0;o<r;o++)n[e[o]]=o<i?t[o]:a;return n}function y(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!==typeof r)throw TypeError("on method must be a function");if("function"!==typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function w(e,t,n,r){var i=Object.assign({},t);if(!e)return i;if("object"!==typeof e)throw TypeError("options must be an object");var o,l,c,d=Object.keys(e),u=d.length;function h(e){throw Error('Invalid "'+o+'" option value'+(e?". Reason: "+e:""))}for(var p=0;p<u;p++){if(o=d[p],!r&&!s.call(t,o))throw Error('Unknown "'+o+'" option');(l=e[o])!==a&&(c=n[o],i[o]=c?c(l,h):l)}return i}function k(e,t){return"function"===typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function x(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=typeof r,a=n;a-- >0;)if(o===e[a])return r;i(t)}}Object.assign(y.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=m.apply(null,arguments),a={data:r,name:t,original:e};n?!1!==n.call(i,a)&&o.emit.apply(o,[a.name].concat(r)):o.emit.apply(o,[t].concat(r))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,r._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&a[e]&&(a[e]=null,r._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,l=this._target;if(e&&"string"!==typeof e)throw TypeError("event must be a string");function c(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=j.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(l,e,t),delete o[e],--this._listenersCount||c()}else{for(r=(n=p(o)).length;r-- >0;)e=n[r],s.call(l,e,o[e]);this._listeners={},this._listenersCount=0,c()}}});var O=x(["function"]),C=x(["object","function"]);function E(e,t,n){var r,i,o,a=0,s=new e((function(l,c,d){function u(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=w(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!==typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"===typeof e.prototype.cancel&&"function"===typeof d;var h=function(e){u(),l(e)},p=function(e){u(),c(e)};r?t(h,p,d):(i=[function(e){p(e||Error("canceled"))}],t(h,p,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!==typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),n.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),c(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function j(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function M(e,t,n,r,i){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var a,s,l=0,c=0,d=this.delimiter,u=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[l++]=t.slice(c,s),c=s+u}while(-1!==(s=t.indexOf(d,c)));a[l++]=t.slice(c),t=a,i=l}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var h,f,v,g,m,b,y,w=null,k=t[r],x=t[r+1];if(r===i)n._listeners&&("function"===typeof n._listeners?(e&&e.push(n._listeners),w=[n]):(e&&e.push.apply(e,n._listeners),w=[n]));else{if("*"===k){for(s=(b=p(n)).length;s-- >0;)"_listeners"!==(h=b[s])&&(y=M(e,t,n[h],r+1,i))&&(w?w.push.apply(w,y):w=y);return w}if("**"===k){for((m=r+1===i||r+2===i&&"*"===x)&&n._listeners&&(w=M(e,t,n,i,i)),s=(b=p(n)).length;s-- >0;)"_listeners"!==(h=b[s])&&("*"===h||"**"===h?(n[h]._listeners&&!m&&(y=M(e,t,n[h],i,i))&&(w?w.push.apply(w,y):w=y),y=M(e,t,n[h],r,i)):y=M(e,t,n[h],h===x?r+2:r,i),y&&(w?w.push.apply(w,y):w=y));return w}n[k]&&(w=M(e,t,n[k],r+1,i))}if((f=n["*"])&&M(e,t,f,r+1,i),v=n["**"])if(r<i)for(v._listeners&&M(e,t,v,i,i),s=(b=p(v)).length;s-- >0;)"_listeners"!==(h=b[s])&&(h===x?M(e,t,v[h],r+2,i):h===k?M(e,t,v[h],r+1,i):((g={})[h]=v[h],M(e,t,{"**":g},r+1,i)));else v._listeners?M(e,t,v,i,i):v["*"]&&v["*"]._listeners&&M(e,t,v["*"],i,i);return w}function N(e,t,n){var r,i,o=0,a=0,s=this.delimiter,l=s.length;if("string"===typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,r),a=r+l}while(-1!==(r=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var c,d=this.listenerTree;for(r=0;r<o;r++)if(d=d[c=i[r]]||(d[c]={}),r===o-1)return d._listeners?("function"===typeof d._listeners&&(d._listeners=[d._listeners]),n?d._listeners.unshift(t):d._listeners.push(t),!d._listeners.warned&&this._maxListeners>0&&d._listeners.length>this._maxListeners&&(d._listeners.warned=!0,g.call(this,d._listeners.length,c))):d._listeners=t,!0;return!0}function S(e,t,n,r){for(var i,o,a,s,l=p(e),c=l.length,d=e._listeners;c-- >0;)i=e[o=l[c]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"===typeof o,d&&t.push(s?a:a.join(this.delimiter)),"object"===typeof i&&S.call(this,i,t,a,s);return t}function T(e){for(var t,n,r,i=p(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||T(t)||delete e[n]);return r}function _(e,t,n){this.emitter=e,this.event=t,this.listener=n}function A(e,t,n){if(!0===n)o=!0;else if(!1===n)i=!0;else{if(!n||"object"!==typeof n)throw TypeError("options should be an object or true");var i=n.async,o=n.promisify,s=n.nextTick,l=n.objectify}if(i||s||o){var d=t,u=t._origin||t;if(s&&!c)throw Error("process.nextTick is not supported");o===a&&(o="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return o?s?Promise.resolve():new Promise((function(e){h(e)})).then((function(){return t.event=n,d.apply(t,e)})):(s?r.nextTick:h)((function(){t.event=n,d.apply(t,e)}))},t._async=!0,t._origin=u}return[t,l?new _(this,e,t):this]}function I(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,v.call(this,e)}_.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},I.EventEmitter2=I,I.prototype.listenTo=function(e,t,n){if("object"!==typeof e)throw TypeError("target musts be an object");var r=this;function i(t){if("object"!==typeof t)throw TypeError("events must be an object");var i,o=n.reducers,a=j.call(r,e);i=-1===a?new y(r,e,n):r._observers[a];for(var s,l=p(t),c=l.length,d="function"===typeof o,u=0;u<c;u++)s=l[u],i.subscribe(s,t[s]||s,d?o:o&&o[s])}return n=w(n,{on:a,off:a,reducers:a},{on:O,off:O,reducers:C}),l(t)?i(b(t)):i("string"===typeof t?b(t.split(/\s+/)):t),this},I.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!==typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},I.prototype.delimiter=".",I.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},I.prototype.getMaxListeners=function(){return this._maxListeners},I.prototype.event="",I.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},I.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},I.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},I.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},I.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},I.prototype._many=function(e,t,n,r,i){var o=this;if("function"!==typeof n)throw new Error("many only accepts instances of Function");function a(){return 0===--t&&o.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,r,i)},I.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e,t,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(s&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"===typeof a)){if(n=a.length,d)for(r=0;r<n;r++)if("symbol"===typeof a[r]){o=!0;break}o||(a=a.join(this.delimiter))}var l,c=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=a,c){case 1:l[r].call(this,a);break;case 2:l[r].call(this,a,arguments[1]);break;case 3:l[r].call(this,a,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(s)l=[],M.call(this,l,e,this.listenerTree,0,n);else{if("function"===typeof(l=this._events[a])){switch(this.event=a,c){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=a,c){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},I.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e,t,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"===typeof a)){if(r=a.length,d)for(i=0;i<r;i++)if("symbol"===typeof a[i]){t=!0;break}t||(a=a.join(this.delimiter))}var l,c=[],u=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=a,u){case 1:c.push(this._all[i].call(this,a));break;case 2:c.push(this._all[i].call(this,a,arguments[1]));break;case 3:c.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:c.push(this._all[i].apply(this,arguments))}if(s?(l=[],M.call(this,l,e,this.listenerTree,0)):l=this._events[a],"function"===typeof l)switch(this.event=a,u){case 1:c.push(l.call(this));break;case 2:c.push(l.call(this,arguments[1]));break;case 3:c.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(u-1),o=1;o<u;o++)n[o-1]=arguments[o];c.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),u>3)for(n=new Array(u-1),o=1;o<u;o++)n[o-1]=arguments[o];for(i=0,r=l.length;i<r;i++)switch(this.event=a,u){case 1:c.push(l[i].call(this));break;case 2:c.push(l[i].call(this,arguments[1]));break;case 3:c.push(l[i].call(this,arguments[1],arguments[2]));break;default:c.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},I.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},I.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},I.prototype.onAny=function(e){return this._onAny(e,!1)},I.prototype.prependAny=function(e){return this._onAny(e,!0)},I.prototype.addListener=I.prototype.on,I.prototype._onAny=function(e,t){if("function"!==typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},I.prototype._on=function(e,t,n,r){if("function"===typeof e)return this._onAny(e,t),this;if("function"!==typeof t)throw new Error("on only accepts instances of Function");this._events||f.call(this);var i,o=this;return r!==a&&(t=(i=A.call(this,e,t,r))[0],o=i[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(N.call(this,e,t,n),o):(this._events[e]?("function"===typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,g.call(this,this._events[e].length,e))):this._events[e]=t,o)},I.prototype.off=function(e,t){if("function"!==typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"===typeof e?e.split(this.delimiter):e.slice();if(!(r=M.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var a=r[o];if(n=a._listeners,l(n)){for(var s=-1,c=0,d=n.length;c<d;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){s=c;break}if(s<0)continue;return this.wildcard?a._listeners.splice(s,1):this._events[e].splice(s,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete a._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&T(this.listenerTree),this},I.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},I.prototype.removeListener=I.prototype.off,I.prototype.removeAllListeners=function(e){if(e===a)return!this._events||f.call(this),this;if(this.wildcard){var t,n=M.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&T(this.listenerTree)}else this._events&&(this._events[e]=null);return this},I.prototype.listeners=function(e){var t,n,r,i,o,s=this._events;if(e===a){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(i=(t=p(s)).length,r=[];i-- >0;)"function"===typeof(n=s[t[i]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var l=[],c="string"===typeof e?e.split(this.delimiter):e.slice();return M.call(this,l,c,o,0),l}return s&&(n=s[e])?"function"===typeof n?[n]:n:[]},I.prototype.eventNames=function(e){var t=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,e):t?p(t):[]},I.prototype.listenerCount=function(e){return this.listeners(e).length},I.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"===typeof e?e.split(this.delimiter):e.slice();return M.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,i=this._all;return!!(i&&i.length||r&&(e===a?p(r).length:r[e]))},I.prototype.listenersAny=function(){return this._all?this._all:[]},I.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),E((t=w(t,{timeout:0,filter:a,handleError:!1,Promise:Promise,overload:!1},{filter:O,Promise:k})).Promise,(function(r,i,o){function a(){var o=t.filter;if(!o||o.apply(n,arguments))if(n.off(e,a),t.handleError){var s=arguments[0];s?i(s):r(m.apply(null,arguments).slice(1))}else r(m.apply(null,arguments))}o((function(){n.off(e,a)})),n._on(e,a,!1)}),{timeout:t.timeout,overload:t.overload})};var D=I.prototype;Object.defineProperties(I,{defaultMaxListeners:{get:function(){return D._maxListeners},set:function(e){if("number"!==typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");D._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return E((n=w(n,{Promise:Promise,timeout:0,overload:!1},{Promise:k})).Promise,(function(n,r,i){var o;if("function"===typeof e.addEventListener)return o=function(){n(m.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(m.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),r(n)},e.once("error",a)),i((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(D,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(o=function(){return I}.call(t,n,t,e))===a||(e.exports=o)}()}).call(this,n(74),n(440).setImmediate)},2497:function(e,t,n){var r=n(2689);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},2499:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return L}));var r=n(2484),i=n.n(r),o=n(18),a=n(15),s=n(16),l=n(19),c=n(21),d=n(2470),u=n(11),h=n(116),p=n(63),f=n(2),v=n(24),g=n(2496),m=n(2698),b=n.n(m),y=n(2699),w=n.n(y),k=(n(2700),n(1)),x=n(17),O=function(){function e(t,n){Object(a.a)(this,e),this.pswp=void 0,this.editor=void 0,this.prevStatus="default",this.nextStatus="default",this.zoomInStatus="default",this.zoomOutStatus="default",this.originSizeStatus="default",this.bestSizeStatus="default",this.editor=t,this.pswp=n}return Object(s.a)(e,[{key:"init",value:function(){var e=this;this.pswp.on("afterzoom",(function(){e.afterZoom()})),this.pswp.on("afterchange",(function(){e.afterChange()})),this.pswp.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.render()}},{key:"renderTemplate",value:function(){var e=this,t=Object(d.a)('\n        <div class="data-pswp-tool-bar">\n            <div class="pswp-toolbar-content"></div>\n        </div>\n        '),n=t.find(".pswp-toolbar-content"),r=this.editor.language.get("image");return n.append(this.renderBtn("arrow-left",r.prev,this.prevStatus,(function(){"disable"!==e.prevStatus&&e.pswp.prev()}))),n.append('<span class="data-pswp-counter"></span>'),n.append(this.renderBtn("arrow-right",r.next,this.nextStatus,(function(){"disable"!==e.nextStatus&&e.pswp.next()}))),n.append('<span class="separation"></span>'),n.append(this.renderBtn("zoom-in",r.zoomIn,this.zoomInStatus,(function(){"disable"!==e.zoomInStatus&&e.pswp.zoomIn()}))),n.append(this.renderBtn("zoom-out",r.zoomOut,this.zoomOutStatus,(function(){"disable"!==e.zoomOutStatus&&e.pswp.zoomOut()}))),n.append(this.renderBtn("origin-size",r.originSize,this.originSizeStatus,(function(){"disable"!==e.originSizeStatus&&e.pswp.zoomToOriginSize()}))),n.append(this.renderBtn("best-size",r.bestSize,this.bestSizeStatus,(function(){"disable"!==e.bestSizeStatus&&e.pswp.zoomToBestSize()}))),t}},{key:"afterZoom",value:function(){var e=this.pswp.getCurrentZoomLevel(),t=this.pswp.getInitialZoomLevel(),n="default";e===t&&(n="activated"),1===t&&(n="disable"),this.zoomOutStatus=.05===e?"disable":"default",this.zoomInStatus=5===e?"disable":"default",this.originSizeStatus=1===e?"activated":"default",this.bestSizeStatus=n,this.render()}},{key:"afterChange",value:function(){var e=this.pswp.getCount();this.nextStatus=1===e?"disable":"default",this.prevStatus=1===e?"disable":"default",this.render()}},{key:"renderBtn",value:function(e,t,n,r){var i=Object(d.a)('<span class="data-pswp-'.concat(e," btn ").concat(n,'"></span>'));return i.on("mouseenter",(function(){d.E.show(i,t)})),i.on("mouseleave",(function(){d.E.hide()})),i.on("mousedown",(function(e){e.stopPropagation(),d.E.hide()})),i.on("click",r),i}},{key:"render",value:function(){this.pswp.barUI.empty(),this.pswp.barUI.append(this.renderTemplate())}}]),e}();function C(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}C(".pswp .data-pswp-tool-bar {\r\n    position: absolute;\r\n    top: initial;\r\n    margin: 0 auto;\r\n    bottom: 20px;\r\n    vertical-align: middle;\r\n    height: 54px;\r\n    width: 100%;\r\n    text-align: center;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .separation {\r\n    width: 1px;\r\n    margin: 0px 10px;\r\n    display: inline-block;\r\n    height: 20px;\r\n    border: 0.5px solid #383838;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn {\r\n    color: #f8f9fa;\r\n    display: inline-block;\r\n    width: 32px;\r\n    height: 32px;\r\n    padding: 6px;\r\n    margin: 0 6px;\r\n    border: 1px solid #383838;\r\n    border-radius: 2px;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn::before {\r\n    width: 20px;\r\n    height: 20px;\r\n    margin: 0 auto;\r\n    content: ' ';\r\n    display: inline-block;\r\n    background-repeat: no-repeat;\r\n    opacity: 0.65;\r\n    background-position: -1px -1px;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-arrow-left {\r\n    padding: 8px;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-arrow-right {\r\n    padding: 8px;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-arrow-left::before {\r\n    width: 16px;\r\n    height: 16px;\r\n    background-size: 16px 16px;\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5sZWZ0LWNpcmNsZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJsZWZ0LWNpcmNsZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImxlZnQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuMTQwNjI1LDQuMjYzNjcxODggTDE0LjE0MDYyNSwyLjc1MzkwNjI1IEMxNC4xNDA2MjUsMi42MjMwNDY4OCAxMy45OTAyMzQ0LDIuNTUwNzgxMjUgMTMuODg4NjcxOSwyLjYzMDg1OTM3IEw1LjA4Mzk4NDM4LDkuNTA3ODEyNSBDNC43NjM2NzE4OCw5Ljc1NzgxMjUgNC43NjM2NzE4OCwxMC4yNDAyMzQ0IDUuMDgzOTg0MzgsMTAuNDkwMjM0NCBMMTMuODg4NjcxOSwxNy4zNjcxODc1IEMxMy45OTIxODc1LDE3LjQ0NzI2NTYgMTQuMTQwNjI1LDE3LjM3NSAxNC4xNDA2MjUsMTcuMjQ0MTQwNiBMMTQuMTQwNjI1LDE1LjczNDM3NSBDMTQuMTQwNjI1LDE1LjYzODY3MTkgMTQuMDk1NzAzMSwxNS41NDY4NzUgMTQuMDIxNDg0NCwxNS40ODgyODEzIEw2Ljk5MDIzNDM4LDEwIEwxNC4wMjE0ODQ0LDQuNTA5NzY1NjMgQzE0LjA5NTcwMzEsNC40NTExNzE4OCAxNC4xNDA2MjUsNC4zNTkzNzUgMTQuMTQwNjI1LDQuMjYzNjcxODggWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-arrow-right::before {\r\n    width: 16px;\r\n    height: 16px;\r\n    background-size: 16px 16px;\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5yaWdodC1jaXJjbGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0icmlnaHQtY2lyY2xlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0icmlnaHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuOTU1MDc4MSw5LjUwNzgxMjUgTDYuMTUwMzkwNjIsMi42MzA4NTkzNyBDNi4wNDY4NzUsMi41NTA3ODEyNSA1Ljg5ODQzNzUsMi42MjMwNDY4NyA1Ljg5ODQzNzUsMi43NTM5MDYyNSBMNS44OTg0Mzc1LDQuMjYzNjcxODggQzUuODk4NDM3NSw0LjM1OTM3NSA1Ljk0MzM1OTM4LDQuNDUxMTcxODggNi4wMTc1NzgxMiw0LjUwOTc2NTYyIEwxMy4wNDg4MjgxLDEwIEw2LjAxNzU3ODEyLDE1LjQ5MDIzNDQgQzUuOTQxNDA2MjUsMTUuNTQ4ODI4MSA1Ljg5ODQzNzUsMTUuNjQwNjI1IDUuODk4NDM3NSwxNS43MzYzMjgxIEw1Ljg5ODQzNzUsMTcuMjQ2MDkzOCBDNS44OTg0Mzc1LDE3LjM3Njk1MzEgNi4wNDg4MjgxMiwxNy40NDkyMTg4IDYuMTUwMzkwNjIsMTcuMzY5MTQwNiBMMTQuOTU1MDc4MSwxMC40OTIxODc1IEMxNS4yNzUzOTA2LDEwLjI0MjE4NzUgMTUuMjc1MzkwNiw5Ljc1NzgxMjUgMTQuOTU1MDc4MSw5LjUwNzgxMjUgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-zoom-in::before {\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIGluPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Inpvb20taW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDQxNDA2Myw4LjY1MjM0Mzc1IEwxMC4xMzY3MTg4LDguNjUyMzQzNzUgTDEwLjEzNjcxODgsNi4wMzUxNTYyNSBDMTAuMTM2NzE4OCw1Ljk0OTIxODc1IDEwLjA2NjQwNjMsNS44Nzg5MDYyNSA5Ljk4MDQ2ODc1LDUuODc4OTA2MjUgTDguODA4NTkzNzUsNS44Nzg5MDYyNSBDOC43MjI2NTYyNSw1Ljg3ODkwNjI1IDguNjUyMzQzNzUsNS45NDkyMTg3NSA4LjY1MjM0Mzc1LDYuMDM1MTU2MjUgTDguNjUyMzQzNzUsOC42NTIzNDM3NSBMNi4zNDc2NTYyNSw4LjY1MjM0Mzc1IEM2LjI2MTcxODc1LDguNjUyMzQzNzUgNi4xOTE0MDYyNSw4LjcyMjY1NjI1IDYuMTkxNDA2MjUsOC44MDg1OTM3NSBMNi4xOTE0MDYyNSw5Ljk4MDQ2ODc1IEM2LjE5MTQwNjI1LDEwLjA2NjQwNjMgNi4yNjE3MTg3NSwxMC4xMzY3MTg4IDYuMzQ3NjU2MjUsMTAuMTM2NzE4OCBMOC42NTIzNDM3NSwxMC4xMzY3MTg4IEw4LjY1MjM0Mzc1LDEyLjc1MzkwNjMgQzguNjUyMzQzNzUsMTIuODM5ODQzNyA4LjcyMjY1NjI1LDEyLjkxMDE1NjMgOC44MDg1OTM3NSwxMi45MTAxNTYzIEw5Ljk4MDQ2ODc1LDEyLjkxMDE1NjMgQzEwLjA2NjQwNjMsMTIuOTEwMTU2MyAxMC4xMzY3MTg4LDEyLjgzOTg0MzcgMTAuMTM2NzE4OCwxMi43NTM5MDYzIEwxMC4xMzY3MTg4LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-zoom-out::before {\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIG91dDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJ6b29tLW91dCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40NDE0MDYzLDguNjUyMzQzNzUgTDYuMzQ3NjU2MjUsOC42NTIzNDM3NSBDNi4yNjE3MTg3NSw4LjY1MjM0Mzc1IDYuMTkxNDA2MjUsOC43MjI2NTYyNSA2LjE5MTQwNjI1LDguODA4NTkzNzUgTDYuMTkxNDA2MjUsOS45ODA0Njg3NSBDNi4xOTE0MDYyNSwxMC4wNjY0MDYzIDYuMjYxNzE4NzUsMTAuMTM2NzE4OCA2LjM0NzY1NjI1LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-origin-size::before {\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hY3R1YWwgc2l6ZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJhY3R1YWwtc2l6ZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNS45Mzc1LDE1LjM5MDYyNSBMNC4xMTY3NzYzMiwxNS4zOTA2MjUgTDQuMTE2Nzc2MzIsNy40NDU3MDk3NSBMMS44NzUsNy40NDU3MDk3NSBMMS44NzUsNi40MjA3NTQ5NCBDMi42NjcxNzc2LDYuNDE3MjcwNjUgMy4zMDI5MzEwOCw2LjI2Mzg2MzM2IDMuNzc5NjI2MzcsNS45NTM5MDU1MyBDNC4yMzAwNDk4Miw1LjY2MTAzMDIxIDQuNTI4ODg0MSw1LjIwODg0ODQxIDQuNjc2MDQ5NzgsNC42MDkzNzUgTDUuOTM3NSw0LjYwOTM3NSBMNS45Mzc1LDE1LjM5MDYyNSBaIE05LjY4NzUsNy41MzkwNjI1IEwxMS40MDYyNSw3LjUzOTA2MjUgTDExLjQwNjI1LDkuNTcwMzEyNSBMOS42ODc1LDkuNTcwMzEyNSBMOS42ODc1LDcuNTM5MDYyNSBaIE05LjY4NzUsMTMuMzU5Mzc1IEwxMS40MDYyNSwxMy4zNTkzNzUgTDExLjQwNjI1LDE1LjM5MDYyNSBMOS42ODc1LDE1LjM5MDYyNSBMOS42ODc1LDEzLjM1OTM3NSBaIE0xNy41LDE1LjM5MDYyNSBMMTcuNSw0LjYwOTM3NSBMMTYuMjM4NTQ5OCw0LjYwOTM3NSBDMTYuMDkxMzg0MSw1LjIwODg0ODQxIDE1Ljc5MjU0OTgsNS42NjEwMzAyMSAxNS4zNDIxMjY0LDUuOTUzOTA1NTMgQzE0Ljg2NTQzMTEsNi4yNjM4NjMzNiAxNC4yMjk2Nzc2LDYuNDE3MjcwNjUgMTMuNDM3NSw2LjQyMDc1NDk0IEwxMy40Mzc1LDcuNDQ1NzA5NzUgTDE1LjY3OTI3NjMsNy40NDU3MDk3NSBMMTUuNjc5Mjc2MywxNS4zOTA2MjUgTDE3LjUsMTUuMzkwNjI1IFoiIGlkPSLlvaLnirbnu5PlkIgiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .data-pswp-best-size::before {\r\n    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5maXQgc2NyZWVuPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImZpdC1zY3JlZW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJhcnJhd3NhbHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTYuNjk5MjE4OCwzLjEyNjk1MzEyIEwxMy4wMDM5MDYzLDMuNTg1OTM3NSBDMTIuODc1LDMuNjAxNTYyNSAxMi44MjIyNjU2LDMuNzU3ODEyNSAxMi45MTIxMDk0LDMuODQ5NjA5MzcgTDEzLjk4MDQ2ODgsNC45MTc5Njg3NSBMMTAuOTgyNDIxOSw3LjkxNjAxNTYyIEMxMC45MjE4NzUsNy45NzY1NjI1IDEwLjkyMTg3NSw4LjA3NjE3MTg3IDEwLjk4MjQyMTksOC4xMzY3MTg3NSBMMTEuODYzMjgxMyw5LjAxNzU3ODEyIEMxMS45MjM4MjgxLDkuMDc4MTI1IDEyLjAyMzQzNzUsOS4wNzgxMjUgMTIuMDgzOTg0NCw5LjAxNzU3ODEyIEwxNS4wODM5ODQ0LDYuMDE3NTc4MTIgTDE2LjE1MjM0MzgsNy4wODU5Mzc1IEMxNi4yNDQxNDA2LDcuMTc3NzM0MzcgMTYuNDAwMzkwNiw3LjEyMzA0Njg3IDE2LjQxNjAxNTYsNi45OTQxNDA2MiBMMTYuODczMDQ2OSwzLjMwMDc4MTI1IEMxNi44ODY3MTg4LDMuMTk5MjE4NzUgMTYuODAwNzgxMywzLjExMzI4MTI1IDE2LjY5OTIxODgsMy4xMjY5NTMxMiBaIE04LjEzNjcxODc1LDEwLjk4MjQyMTkgQzguMDc2MTcxODgsMTAuOTIxODc1IDcuOTc2NTYyNSwxMC45MjE4NzUgNy45MTYwMTU2MywxMC45ODI0MjE5IEw0LjkxNzk2ODc1LDEzLjk4MjQyMTkgTDMuODQ5NjA5MzgsMTIuOTE0MDYyNSBDMy43NTc4MTI1LDEyLjgyMjI2NTYgMy42MDE1NjI1LDEyLjg3Njk1MzEgMy41ODU5Mzc1LDEzLjAwNTg1OTQgTDMuMTI2OTUzMTMsMTYuNjk5MjE4OCBDMy4xMTUyMzQzOCwxNi44MDA3ODEyIDMuMTk5MjE4NzUsMTYuODg0NzY1NiAzLjMwMDc4MTI1LDE2Ljg3MzA0NjkgTDYuOTk2MDkzNzUsMTYuNDE0MDYyNSBDNy4xMjUsMTYuMzk4NDM3NSA3LjE3NzczNDM4LDE2LjI0MjE4NzUgNy4wODc4OTA2MywxNi4xNTAzOTA2IEw2LjAxOTUzMTI1LDE1LjA4MjAzMTIgTDkuMDE5NTMxMjUsMTIuMDgyMDMxMiBDOS4wODAwNzgxMywxMi4wMjE0ODQ0IDkuMDgwMDc4MTMsMTEuOTIxODc1IDkuMDE5NTMxMjUsMTEuODYxMzI4MSBMOC4xMzY3MTg3NSwxMC45ODI0MjE5IEw4LjEzNjcxODc1LDEwLjk4MjQyMTkgWiIgaWQ9IuW9oueKtiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn:not(.disable):hover {\r\n    cursor: pointer;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn:not(.disable):hover::before {\r\n    opacity: 1;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn.disable {\r\n    background: none;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn.activated {\r\n    background: #454545;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn.activated::before {\r\n    opacity: 1;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .btn.disable::before {\r\n    opacity: 0.25;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .disable:hover {\r\n    cursor: not-allowed;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .pswp-toolbar-content {\r\n    display: inline-block;\r\n    width: auto;\r\n    background: #252525;\r\n    border-radius: 4px;\r\n    padding: 12px;\r\n   \r\n}\r\n\r\n.pswp .data-pswp-tool-bar .pswp-toolbar-content .data-pswp-counter {\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    display: inline-block;\r\n    font-size: 16px;\r\n    vertical-align: top;\r\n    line-height: 34px;\r\n    color: #DEDEDE;\r\n    margin: 0 2px;\r\n   \r\n}\r\n\r\n.pswp.data-pswp-mobile .data-pswp-tool-bar {\r\n    display: none;\r\n   \r\n}\r\n\r\n.pswp__ui {\r\n   -webkit-font-smoothing: auto;\r\n   visibility: visible;\r\n   opacity: 1;\r\n   z-index: 1550;\r\n}\r\n\r\n.pswp__button {\r\n   width: 44px;\r\n   height: 44px;\r\n   position: relative;\r\n   background: none;\r\n   cursor: pointer;\r\n   overflow: visible;\r\n   display: block;\r\n   border: 0;\r\n   padding: 0;\r\n   margin: 0;\r\n   float: right;\r\n   opacity: 0.75;\r\n   -webkit-transition: opacity 0.2s;\r\n   transition: opacity 0.2s;\r\n   box-shadow: none;\r\n}\r\n\r\n.pswp-fade-out {\r\n   opacity: 0;\r\n   -webkit-animation: fadeOut 0.333s;\r\n           animation: fadeOut 0.333s;\r\n}\r\n\r\n.pswp .data-pswp-button-close {\r\n   margin: 32px;\r\n   margin-right: 0px;\r\n   width: 40px;\r\n   height: 40px;\r\n   z-index: 999999;\r\n   position: relative;\r\n   background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jbG9zZS1kZWZhdWx0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IueUu+advyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ4LjAwMDAwMCwgLTczNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImNsb3NlLWRlZmF1bHQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4LjAwMDAwMCwgNzM1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzFBMUExQSIgb3BhY2l0eT0iMC4zNSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9ImNsb3NlIiBvcGFjaXR5PSIwLjY1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy4yMTQwNjI1LDEyIEwxOS4zNjY0MDYyLDQuNjY2NDA2MjUgQzE5LjQ2OTUzMTIsNC41NDQ1MzEyNSAxOS4zODI4MTI1LDQuMzU5Mzc1IDE5LjIyMzQzNzUsNC4zNTkzNzUgTDE3LjM1MzEyNSw0LjM1OTM3NSBDMTcuMjQyOTY4Nyw0LjM1OTM3NSAxNy4xMzc1LDQuNDA4NTkzNzUgMTcuMDY0ODQzNyw0LjQ5Mjk2ODc1IEwxMS45OTA2MjUsMTAuNTQyMTg3NSBMNi45MTY0MDYyNSw0LjQ5Mjk2ODc1IEM2Ljg0NjA5Mzc1LDQuNDA4NTkzNzUgNi43NDA2MjUsNC4zNTkzNzUgNi42MjgxMjUsNC4zNTkzNzUgTDQuNzU3ODEyNSw0LjM1OTM3NSBDNC41OTg0Mzc1LDQuMzU5Mzc1IDQuNTExNzE4NzUsNC41NDQ1MzEyNSA0LjYxNDg0Mzc1LDQuNjY2NDA2MjUgTDEwLjc2NzE4NzUsMTIgTDQuNjE0ODQzNzUsMTkuMzMzNTkzNyBDNC41MTE3MTg3NSwxOS40NTU0Njg4IDQuNTk4NDM3NSwxOS42NDA2MjUgNC43NTc4MTI1LDE5LjY0MDYyNSBMNi42MjgxMjUsMTkuNjQwNjI1IEM2LjczODI4MTI1LDE5LjY0MDYyNSA2Ljg0Mzc1LDE5LjU5MTQwNjIgNi45MTY0MDYyNSwxOS41MDcwMzEyIEwxMS45OTA2MjUsMTMuNDU3ODEyNSBMMTcuMDY0ODQzNywxOS41MDcwMzEyIEMxNy4xMzUxNTYyLDE5LjU5MTQwNjIgMTcuMjQwNjI1LDE5LjY0MDYyNSAxNy4zNTMxMjUsMTkuNjQwNjI1IEwxOS4yMjM0Mzc1LDE5LjY0MDYyNSBDMTkuMzgyODEyNSwxOS42NDA2MjUgMTkuNDY5NTMxMiwxOS40NTU0Njg4IDE5LjM2NjQwNjIsMTkuMzMzNTkzNyBMMTMuMjE0MDYyNSwxMiBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r\n}\r\n\r\n");var E=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this)).editor=void 0,i.options=void 0,i.timeouts=[],i.pswpUI=void 0,i.zoom=void 0,i.isDestroy=!0,i.zoomUI=void 0,i.root=void 0,i.barUI=void 0,i.closeUI=void 0,i.reset=function(){i.root.removeClass(d.ab?"data-pswp-mobile":"data-pswp-pc"),i.root.addClass(d.ab?"data-pswp-mobile":"data-pswp-pc"),i.unbindKeyboardEvnet(),i.unbindControllerFadeInAndOut(),d.ab||(i.bindKeyboardEvnet(),i.bindControllerFadeInAndOut())},i.onBarMouseEnter=function(){i.removeFadeOut(i.barUI,"barFadeInAndOut"),i.removeFadeOut(i.closeUI,"closeFadeInAndOut")},i.onBarMouseLeave=function(){i.fadeOut(i.barUI,"barFadeInAndOut"),i.fadeOut(i.closeUI,"closeFadeInAndOut")},i.onCloseMouseEnter=function(){i.removeFadeOut(i.barUI,"barFadeInAndOut"),i.removeFadeOut(i.closeUI,"closeFadeInAndOut")},i.onCloseMouseLeave=function(){i.fadeOut(i.barUI,"barFadeInAndOut"),i.fadeOut(i.closeUI,"closeFadeInAndOut")},i.onKeyboardEvent=function(e){(e.metaKey||e.ctrlKey)&&187===e.keyCode&&(e.preventDefault(),i.zoomIn()),Object(d.Y)("mod+-",e)&&(e.preventDefault(),i.zoomOut())},i.close=function(){var e;null===(e=i.pswpUI)||void 0===e||e.close()},i.editor=e,i.options=Object(f.a)({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!1,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:d.ab,tapToClose:!0,bgOpacity:.8,barsSize:{top:44,bottom:80}},r),i.isDestroy=!0,i.root=i.renderTemplate(),i.barUI=i.root.find(".data-pswp-custom-top-bar"),i.closeUI=i.root.find(".data-pswp-button-close"),Object(d.a)(document.body).append(i.root),i.zoomUI=new O(e,Object(v.a)(i)),i.zoomUI.render(),i.reset(),i.bindClickEvent(),window.addEventListener("resize",i.reset),i}return Object(s.a)(n,[{key:"renderTemplate",value:function(){return Object(d.a)('\n        <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="pswp__bg"></div>\n            <div class="pswp__scroll-wrap">\n                <div class="pswp__container">\n                    <div class="pswp__item"></div>\n                    <div class="pswp__item"></div>\n                    <div class="pswp__item"></div>\n                </div>\n                <div class="pswp__ui pswp__ui--hidden">\n                    <button type="button" class="pswp__button data-pswp-button-close" title="Close (Esc)"></button>\n                    <div class="data-pswp-custom-top-bar"></div>\n                </div>\n            </div>\n        </div>')}},{key:"bindControllerFadeInAndOut",value:function(){this.barUI.on("mouseenter",this.onBarMouseEnter),this.barUI.on("mouseleave",this.onBarMouseLeave),this.closeUI.on("mouseenter",this.onCloseMouseEnter),this.closeUI.on("mouseleave",this.onCloseMouseLeave)}},{key:"unbindControllerFadeInAndOut",value:function(){this.barUI.off("mouseenter",this.onBarMouseEnter),this.barUI.off("mouseleave",this.onBarMouseLeave),this.closeUI.off("mouseenter",this.onCloseMouseEnter),this.closeUI.off("mouseleave",this.onCloseMouseLeave)}},{key:"removeFadeOut",value:function(e,t){this.timeouts[t]&&clearTimeout(this.timeouts[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){this.timeouts[t]&&clearTimeout(this.timeouts[t]),this.timeouts[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this;this.root.on("click",(function(t){var n=window.TouchEvent&&t instanceof TouchEvent?Object(d.a)(t.touches[0].target):Object(d.a)(t.target||[]);n.hasClass("pswp__img")&&setTimeout((function(){e.zoom=void 0,e.afterZoom()}),366),(n.hasClass("pswp__bg")||n.hasClass("data-pswp-tool-bar"))&&e.close()})),this.closeUI.on("click",this.close)}},{key:"prev",value:function(){var e;null===(e=this.pswpUI)||void 0===e||e.prev()}},{key:"next",value:function(){var e;null===(e=this.pswpUI)||void 0===e||e.next()}},{key:"renderCounter",value:function(){var e,t;this.barUI.find(".data-pswp-counter").html("".concat(((null===(e=this.pswpUI)||void 0===e?void 0:e.getCurrentIndex())||0)+1," / ").concat((null===(t=this.pswpUI)||void 0===t?void 0:t.items.length)||""))}},{key:"getCurrentZoomLevel",value:function(){return this.zoom&&+this.zoom.toFixed(2)||this.pswpUI&&+this.pswpUI.getZoomLevel().toFixed(2)||0}},{key:"zoomTo",value:function(e){this.pswpUI&&(this.pswpUI.zoomTo(e,{x:this.pswpUI.viewportSize.x/2,y:this.pswpUI.viewportSize.y/2},100),this.zoom=e,this.afterZoom())}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=(e||0)+.2;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(.05!==e&&void 0!==e){var t=e-.2;.05>t&&(t=.05),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){this.root.on("keydown",this.onKeyboardEvent)}},{key:"unbindKeyboardEvnet",value:function(){this.root.off("keydown",this.onKeyboardEvent)}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();e&&this.zoomTo(e)}},{key:"updateCursor",value:function(){var e=this.root,t=this.getCurrentZoomLevel(),n=this.getInitialZoomLevel();1===t?e.addClass("pswp--zoomed-in"):n===n&&e.removeClass("pswp--zoomed-in")}},{key:"getInitialZoomLevel",value:function(){var e;return this.pswpUI?+((null===(e=this.pswpUI.currItem.initialZoomLevel)||void 0===e?void 0:e.toFixed(2))||0):0}},{key:"afterZoom",value:function(){this.updateCursor(),this.emit("afterzoom")}},{key:"getCount",value:function(){var e;return(null===(e=this.pswpUI)||void 0===e?void 0:e.items.length)||0}},{key:"afterChange",value:function(){var e=this;if(!d.ab){var t=this.getInitialZoomLevel();this.renderCounter(),this.zoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.zoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e,t,n,r,i=this;null===(e=this.pswpUI)||void 0===e||e.listen("afterChange",(function(){i.afterChange()})),null===(t=this.pswpUI)||void 0===t||t.listen("destroy",(function(){i.isDestroy=!0})),null===(n=this.pswpUI)||void 0===n||n.listen("resize",(function(){i.emit("resize")})),null===(r=this.pswpUI)||void 0===r||r.listen("imageLoadComplete",(function(){i.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){this.root.find(".pswp__img").each((function(e){var t=e;t.complete?(t.style.background="white",t.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"):t.onload=function(){t.style.background="white",t.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"}}))}},{key:"open",value:function(e,t){if(!0===this.isDestroy){var n=this.root,r=new b.a(this.root.get(),w.a,e,Object(f.a)({index:t},this.options));r.items=e,r.init(),this.pswpUI=r,this.isDestroy=!1,d.ab||(this.barUI.removeClass("pswp-fade-out"),this.fadeOut(this.barUI,"barFadeInAndOut"),this.closeUI.removeClass("pswp-fade-out"),this.fadeOut(this.closeUI,"closeFadeInAndOut")),n.removeClass("pswp-fade-in"),n.addClass("pswp-fade-in"),this.afterChange(),this.bindPswpEvent()}}},{key:"destroy",value:function(){window.removeEventListener("resize",this.reset),this.close()}}]),n}(g.EventEmitter2);C('.am-engine [data-card-key="image"].card-selected [data-card-element="center"].data-card-border-selected {\r\n    outline: none;\r\n}\r\n\r\n.am-engine [data-card-key="image"].card-selected [data-card-element="center"].data-card-border-selected .data-image-disable-resize {\r\n    outline: 2px solid #1890FF;\r\n}\r\n\r\n.data-image {\r\n    position: relative;\r\n    display: inline-block;\r\n    font-size: 14px;\r\n    text-align: left;\r\n    border-radius: 3px 3px;\r\n    line-height: 24px;\r\n    text-indent: 0;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\n.data-image-blcok {\r\n    display: flex;\r\n    margin: 0 auto;\r\n    width: -webkit-max-content;\r\n    width: -moz-max-content;\r\n    width: max-content;\r\n}\r\n\r\n.data-image-blcok.data-image-disable-resize {\r\n    width: 100%;\r\n    display: block;\r\n}\r\n\r\n.data-image-detail {\r\n  display: inline-block;\r\n}\r\n\r\n.data-image-blcok .data-image-detail {\r\n    display: block;\r\n}\r\n\r\n.data-image-meta {\r\n    position: relative;\r\n    color: #595959;\r\n    line-height: 0;\r\n}\r\n\r\n.data-image-progress {\r\n    padding-left: 8px;\r\n    color: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n.data-image-progress .data-anticon {\r\n    color: rgba(255, 255, 255, 0.9);\r\n    line-height: 24px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.data-image-maximize {\r\n    position: absolute;\r\n    z-index: 2;\r\n    right: 10px;\r\n    top: 10px;\r\n    background-color: rgba(0, 0, 0, 0.65);\r\n    width: 20px;\r\n    height: 20px;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    line-height: 20px;\r\n    border-radius: 4px;\r\n    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.08);\r\n    cursor: pointer;\r\n}\r\n\r\n.data-image-maximize .data-icon-maximize {\r\n    margin-left: 1px;\r\n}\r\n\r\n.data-image-loading , .data-image-loaded {\r\n    display: inline-block;\r\n    border-radius: 0 0;\r\n    padding: 0 0;\r\n    background: transparent;\r\n    border-color: transparent;\r\n}\r\n\r\n.data-image-blcok .data-image-loading, .data-image-blcok .data-image-loaded {\r\n    display: block;\r\n}\r\n\r\n.data-image-loading .data-image-meta, .data-image-loaded .data-image-meta {\r\n    display: inline-block;\r\n}\r\n\r\n.data-image-blcok .data-image-loading .data-image-meta, .data-image-blcok .data-image-loaded .data-image-meta {\r\n    display: block;\r\n}\r\n\r\n.data-image-loading .data-image-meta img,.data-image-loaded .data-image-meta img {\r\n    border-radius: 2px 2px;\r\n    display: inline-block;\r\n    width: 100%;\r\n    opacity: 0.6;\r\n    text-align: left;\r\n    cursor: pointer;\r\n    transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;\r\n}\r\n\r\n.data-image-blcok .data-image-loading .data-image-meta img, .data-image-blcok .data-image-loaded .data-image-meta img {\r\n    display: block;\r\n}\r\n\r\n.data-image-loading .data-image-meta img , .data-image-blcok .data-image-loading .data-image-meta img {\r\n    display: none;\r\n}\r\n\r\n.data-image-loading  .data-image-meta .data-image-progress,.data-image-loaded .data-image-meta .data-image-progress {\r\n    font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\r\n    position: absolute;\r\n    bottom: 8px;\r\n    right: 8px;\r\n    font-size: 12px;\r\n    line-height: 24px;\r\n    color: rgba(255, 255, 255, 0.9);\r\n    padding: 0px 6px;\r\n    border-radius: 2px 2px;\r\n    background: rgba(0, 0, 0, 0.8);\r\n    white-space: nowrap;\r\n}\r\n\r\n.data-image-loaded .data-image-meta img {\r\n    opacity: 1;\r\n}\r\n\r\n.data-image-error {\r\n    padding: 2px 4px;\r\n    background: #f5f5f5;\r\n    display: flex;\r\n    border-radius: 4px;\r\n    max-width: 200px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    font-size: 12px;\r\n    align-items: center;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\n.data-image-error .data-icon {\r\n    font-size: 12px;\r\n}\r\n\r\n.data-image-error .data-icon-error {\r\n    color: red;\r\n    margin-right: 8px;\r\n}\r\n\r\n.data-image-error .data-icon-copy {\r\n    margin-left: 8px;\r\n    cursor: pointer;\r\n}\r\n\r\n.am-engine [data-card-key="image"].card-selected [data-card-element=center].data-card-background-selected {\r\n    border-radius: 4px;\r\n}\r\n\r\n.data-image-bg {\r\n    display: none;\r\n    border-radius: 2px;\r\n    opacity: 0.6;\r\n    background-size:100% 100%;\r\n    background-color: #FAFAFA;\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjggMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5pbWFnZS1maWxs5aSH5Lu9PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9veWbvueJhyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTU3Mi4wMDAwMDAsIC01MDYuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJpbWFnZS1maWxs5aSH5Lu9IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzAuMDAwMDAwLCA1MDEuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yOSw1IEwzLDUgQzIuNDQ2ODc1LDUgMiw1LjQ0Njg3NSAyLDYgTDIsMjYgQzIsMjYuNTUzMTI1IDIuNDQ2ODc1LDI3IDMsMjcgTDI5LDI3IEMyOS41NTMxMjUsMjcgMzAsMjYuNTUzMTI1IDMwLDI2IEwzMCw2IEMzMCw1LjQ0Njg3NSAyOS41NTMxMjUsNSAyOSw1IFogTTEwLjU2MjUsOS41IEMxMS42NjU2MjUsOS41IDEyLjU2MjUsMTAuMzk2ODc1IDEyLjU2MjUsMTEuNSBDMTIuNTYyNSwxMi42MDMxMjUgMTEuNjY1NjI1LDEzLjUgMTAuNTYyNSwxMy41IEM5LjQ1OTM3NSwxMy41IDguNTYyNSwxMi42MDMxMjUgOC41NjI1LDExLjUgQzguNTYyNSwxMC4zOTY4NzUgOS40NTkzNzUsOS41IDEwLjU2MjUsOS41IFogTTI2LjYyMTg3NSwyMy4xNTkzNzUgQzI2LjU3ODEyNSwyMy4xOTY4NzUgMjYuNTE4NzUsMjMuMjE4NzUgMjYuNDU5Mzc1LDIzLjIxODc1IEw1LjUzNzUsMjMuMjE4NzUgQzUuNCwyMy4yMTg3NSA1LjI4NzUsMjMuMTA2MjUgNS4yODc1LDIyLjk2ODc1IEM1LjI4NzUsMjIuOTA5Mzc1IDUuMzA5Mzc1LDIyLjg1MzEyNSA1LjM0Njg3NSwyMi44MDYyNSBMMTAuNjY4NzUsMTYuNDkzNzUgQzEwLjc1NjI1LDE2LjM4NzUgMTAuOTE1NjI1LDE2LjM3NSAxMS4wMjE4NzUsMTYuNDYyNSBDMTEuMDMxMjUsMTYuNDcxODc1IDExLjA0Mzc1LDE2LjQ4MTI1IDExLjA1MzEyNSwxNi40OTM3NSBMMTQuMTU5Mzc1LDIwLjE4MTI1IEwxOS4xLDE0LjMyMTg3NSBDMTkuMTg3NSwxNC4yMTU2MjUgMTkuMzQ2ODc1LDE0LjIwMzEyNSAxOS40NTMxMjUsMTQuMjkwNjI1IEMxOS40NjI1LDE0LjMgMTkuNDc1LDE0LjMwOTM3NSAxOS40ODQzNzUsMTQuMzIxODc1IEwyNi42NTkzNzUsMjIuODA5Mzc1IEMyNi43NDA2MjUsMjIuOTEyNSAyNi43MjgxMjUsMjMuMDcxODc1IDI2LjYyMTg3NSwyMy4xNTkzNzUgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRThFOEU4Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==);\r\n}\r\n\r\n.data-image-loading .data-image-bg {\r\n    display: inline-block;\r\n}\r\n\r\n.data-image-blcok .data-image-loading .data-image-bg {\r\n    display: block;\r\n}\r\n\r\n.data-image-loading .data-image-maximize {\r\n    display: none;\r\n}');var j=window.devicePixelRatio,M=void 0,N=function(){function e(t,n){var r=this;Object(a.a)(this,e),this.editor=void 0,this.options=void 0,this.root=void 0,this.progress=void 0,this.image=void 0,this.detail=void 0,this.meta=void 0,this.maximize=void 0,this.bg=void 0,this.resizer=void 0,this.pswp=void 0,this.src=void 0,this.status=void 0,this.size=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.rate=1,this.isLoad=!1,this.message=void 0,this.onWindowResize=function(){if(Object(d.X)(r.editor)){r.maxWidth=r.getMaxWidth(),r.resetSize();var e=r.image.get();if(e){var t=e.clientWidth,n=e.clientHeight;r.resizer&&(r.resizer.maxWidth=r.maxWidth,r.resizer.setSize(t,n))}}},this.getSrc=function(){var e=r.options.onBeforeRender;return e&&"error"!==r.status?e(r.status,r.src):r.src},this.openZoom=function(e){e.preventDefault(),e.stopPropagation();var t=r.editor,n=[],i=t.card.closest(r.root),o=0;t.container.find('[data-card-key="image"]').toArray().filter((function(e){return e.find("img").length>0})).forEach((function(e,a){var s=t.card.find(e),l=null===s||void 0===s?void 0:s.getValue();if(s&&l){var c=s.getCenter().find("img"),d=parseInt(c.css("width")),u=parseInt(c.css("height")),h=l.size,p=h?h.naturalWidth||r.size.naturalWidth:d*j,f=h?h.naturalHeight||r.size.naturalHeight:u*j,v=l.src,g=r.options.onBeforeRender;g&&(v=g("done",v));var m=c.attributes("src");n.push({src:v,msrc:m,w:p,h:f}),(null===i||void 0===i?void 0:i.equal(e))&&(o=a)}})),r.pswp.open(n,o)},this.focus=function(){Object(d.X)(r.editor)&&(r.root.addClass("data-image-active"),"done"===r.status&&(r.destroyEditor(),r.renderEditor()))},this.blur=function(){Object(d.X)(r.editor)&&(r.root.removeClass("data-image-active"),"done"===r.status&&r.destroyEditor())},this.editor=t,this.options=n,this.src=this.options.src,this.size=this.options.size||{width:0,height:0,naturalHeight:0,naturalWidth:0},this.maxHeight=this.options.maxHeight,this.status=this.options.status,this.root=Object(d.a)(this.renderTemplate()),this.progress=this.root.find(".data-image-progress"),this.image=this.root.find("img"),this.detail=this.root.find(".data-image-detail"),this.meta=this.root.find(".data-image-meta"),this.maximize=this.root.find(".data-image-maximize"),this.bg=this.root.find(".data-image-bg"),this.maxWidth=this.getMaxWidth(),this.pswp=M||new E(t),this.message=this.options.message,M=this.pswp}return Object(s.a)(e,[{key:"renderTemplate",value:function(e){var t=this.options,n=t.link,r=t.percent,i=t.className,o=t.onBeforeRender;if("error"===this.status)return'<span class="data-image-error" style="max-width:'.concat(this.maxWidth,'px"><span class="data-icon data-icon-error"></span>').concat(e||this.options.message,'<span class="data-icon data-icon-copy"></span></span>');var a=o?o(this.status,this.options.src):this.options.src,s='<span class="data-image-progress">\n                            <i class="data-anticon">\n                                <svg viewBox="0 0 1024 1024" class="data-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n                                    <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n                                </svg>\n                            </i>\n                            <span class="percent">'.concat(r||0,"%</span>\n                        </span>"),l=Object(d.O)(this.options.alt||""),c=l?' alt="'.concat(l,'" title="').concat(l,'" '):"",u='<img src="'.concat(Object(d.ib)(a),'" class="').concat(i||"",' data-drag-image" ').concat(c,"/>");if(n&&!Object(d.X)(this.editor)){var h=n.target||"_blank";u='<a href="'.concat(Object(d.ib)(n.href),'" target="').concat(h,'">').concat(u,"</a>")}return'\n        <span class="data-image">\n            <span class="data-image-content data-image-loading">\n                <span class="data-image-detail">\n                    <span class="data-image-meta">\n                        '.concat(u,"\n                        ").concat(s,'\n\t\t\t\t\t\t<span class="data-image-bg"></span>\n                        ').concat('<span class="data-image-maximize" style="display: none;"><span class="data-icon data-icon-maximize"></span></span>',"\n                    </span>\n                </span>\n            </span>\n        </span>")}},{key:"bindErrorEvent",value:function(e){var t=this,n=this.editor,r=e.find(".data-icon-copy");r.on("mouseenter",(function(){d.E.show(r,n.language.get("image","errorMessageCopy").toString())})),r.on("mouseleave",(function(){d.E.hide()})),r.on("click",(function(e){e.stopPropagation(),e.preventDefault(),d.E.hide(),n.clipboard.copy(t.message||t.options.message||"Error message"),n.messageSuccess("copy",n.language.get("copy","success").toString())}))}},{key:"setProgressPercent",value:function(e){this.progress.find(".percent").html("".concat(e,"%"))}},{key:"imageLoadCallback",value:function(){var e=this.editor;if(e.card.closest(this.root)&&"uploading"!==this.status){if("done"===this.status){var t=this.root.find(".data-image-content");t.addClass("data-image-loaded"),t.removeClass("data-image-loading")}var n=this.image.get();if(n){var r=n.naturalWidth,i=n.naturalHeight;this.rate=i/r,this.size.naturalWidth=r,this.size.naturalHeight=i,this.size.width||(this.size.width=r),this.size.height||(this.size.height=i),this.resetSize(),this.image.css("visibility","visible"),this.detail.css("height",""),this.detail.css("width","");var o=this.options.onChange;Object(d.X)(e)&&o&&o(this.size,!0),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize),e.off("editor:resize",this.onWindowResize),e.on("editor:resize",this.onWindowResize),this.resizer&&this.resizer.setSize(n.clientWidth,n.clientHeight),this.isLoad=!0,this.options.onLoad&&this.options.onLoad()}}}},{key:"imageLoadError",value:function(){if("uploading"!==this.status){this.status="error";var e=this.options.container;e.empty(),e.append(this.renderTemplate(this.editor.language.get("image","loadError").toString())),this.detail.css("width",""),this.detail.css("height",""),this.bindErrorEvent(e);var t=this.options.onError;t&&t(),this.isLoad=!0}}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.root,t=this.editor.block.closest(e).get();return t?t.clientWidth-6:0}},{key:"resetSize",value:function(){this.meta.css({"background-color":"",width:""}),this.image.css({width:""});var e=this.image.get();if(e){var t=this.size,n=t.width,r=t.height;if(r)if(n)if(n&&r)r=Math.round(this.rate*n),this.size.height=r;else{n=e.clientWidth,r=e.clientHeight;var i=this.size,o=i.naturalWidth,a=i.naturalHeight;this.isSvg()&&o&&a&&(n=o,r=a)}else n=Math.round(r/this.rate);else r=Math.round(this.rate*n);n>this.maxWidth&&(n=this.maxWidth,r=Math.round(n*this.rate)),!1===this.options.enableResizer?this.image.css("width",""):this.image.css("width","".concat(n,"px"))}}},{key:"changeSize",value:function(e,t){e<24&&(t=(e=24)*this.rate),e>this.maxWidth&&(t=(e=this.maxWidth)*this.rate),t<24&&(e=(t=24)/this.rate),e=Math.round(e),t=Math.round(t),this.size.width=e,this.size.height=t,this.image.css({width:"".concat(e,"px")});var n=this.options.onChange;n&&n(this.size),this.destroyEditor(),this.renderEditor()}},{key:"changeUrl",value:function(e){this.src!==e&&(this.src=e,this.isLoad=!1,this.image.attributes("src",this.getSrc()))}},{key:"isSvg",value:function(){return this.src.split("?")[0].endsWith(".svg")||this.src.startsWith("data:image/svg+xml")}},{key:"closeZoom",value:function(){var e;null===(e=this.pswp)||void 0===e||e.close()}},{key:"renderEditor",value:function(){var e=this,t=this.image.get();if(t){var n=t.clientWidth,r=t.clientHeight;if(n&&r){var i=this.editor;if(this.maxWidth=this.getMaxWidth(),this.rate=r/n,!d.ab&&Object(d.X)(i)&&!i.readonly&&!1!==this.options.enableResizer){var o=new d.z({imgUrl:this.getSrc(),width:n,height:r,rate:this.rate,maxWidth:this.maxWidth,onChange:function(t){var n=t.width,r=t.height;return e.changeSize(n,r)}}),a=o.render();this.root.find(".data-image-detail").append(a),this.resizer=o,this.resizer.on("dblclick",this.openZoom)}}}}},{key:"destroyEditor",value:function(){var e,t;null===(e=this.resizer)||void 0===e||e.off("dblclick",this.openZoom),null===(t=this.resizer)||void 0===t||t.destroy()}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize),this.destroyEditor(),this.image.off("click",this.openZoom),this.image.off("dblclick",this.openZoom),this.maximize.off("click",this.openZoom)}},{key:"render",value:function(e){var t=this,n=this.options,r=n.container,i=n.display,o=n.enableResizer;i===d.i.BLOCK&&this.root.addClass("data-image-blcok");var a=this.editor;if(!1===o&&this.root.addClass("data-image-disable-resize"),"error"===this.status&&Object(d.X)(a))return this.root=Object(d.a)(this.renderTemplate(this.message||a.language.get("image","uploadError"))),this.bindErrorEvent(this.root),r.empty().append(this.root),void this.progress.remove();if("uploading"===this.status?(this.progress.show(),r.empty().append(this.root)):this.progress.remove(),"done"===this.status&&this.isLoad){var s=this.root.find(".data-image-content");s.addClass("data-image-loaded"),s.removeClass("data-image-loading")}"done"!==this.status||this.isLoad||this.root.inEditor()||r.empty().append(this.root),this.maxWidth=this.getMaxWidth();var l=this.size,c=l.width,u=l.height;if(c&&u||!this.src){if(c>this.maxWidth?(c=this.maxWidth,u=Math.round(c*u/this.size.width)):this.src||c||u||(c=this.maxWidth,u=this.maxWidth/2),this.src){!1===this.options.enableResizer?this.image.css({width:"100%"}):this.image.css({width:c+"px"});var h=this.options.onChange;c>0&&u>0&&(this.size=Object(f.a)(Object(f.a)({},this.size),{},{width:c,height:u}),h&&h(this.size))}!1===this.options.enableResizer?this.bg.css({width:"100%"}):this.bg.css({width:c+"px",height:u+"px"}),e&&this.bg.css("background-image","url(".concat(e,")"))}(this.image.on("load",(function(){return t.imageLoadCallback()})),this.image.on("error",(function(){return t.imageLoadError()})),d.ab||(this.root.on("mouseenter",(function(){t.maximize.show()})),this.root.on("mouseleave",(function(){t.maximize.hide()}))),!Object(d.X)(a)||a.readonly)&&(0===this.image.closest("a").length&&this.image.on("click",this.openZoom));this.maximize.on("click",this.openZoom),!Object(d.X)(a)&&this.root.inEditor()||this.image.on("dblclick",this.openZoom)}}]),e}(),S=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).image=void 0,e.widthInput=void 0,e.heightInput=void 0,e.isLocalError=void 0,e}return Object(s.a)(n,[{key:"setProgressPercent",value:function(e){var t;null===(t=this.image)||void 0===t||t.setProgressPercent(e),this.setValue({percent:e})}},{key:"setSize",value:function(e,t){if(e.width&&e.height){var n=this.getValue();t&&n.size&&n.size.height&&n.size.width||this.setValue({size:e}),this.widthInput&&(this.widthInput.get().value=e.width.toString()),this.heightInput&&(this.heightInput.get().value=e.height.toString())}}},{key:"onInputChange",value:function(e,t){var n,r=this.getValue();if("string"===typeof e){var i,o;if(!/^[1-9]+(\d+)?$/.test(e)&&this.widthInput)e=(null===r||void 0===r||null===(i=r.size)||void 0===i?void 0:i.width)||(null===r||void 0===r||null===(o=r.size)||void 0===o?void 0:o.naturalWidth)||0,this.widthInput.get().value=e.toString();e=parseInt(e.toString(),10)}if("string"===typeof t){var a,s;if(!/^[1-9]+(\d+)?$/.test(t)&&this.heightInput)t=(null===r||void 0===r||null===(a=r.size)||void 0===a?void 0:a.height)||(null===r||void 0===r||null===(s=r.size)||void 0===s?void 0:s.naturalHeight)||0,this.heightInput.get().value=t.toString();t=parseInt(t.toString(),10)}null===(n=this.image)||void 0===n||n.changeSize(parseInt(e.toString(),10),t)}},{key:"toolbar",value:function(){var e,t=this,n=this.editor,r=function(){var e,r,i,o,a,s,l;if(!Object(d.X)(n)||n.readonly)return[];var c=n.language,h=t.getValue();if(!0===t.isLocalError||"done"!==(null===(e=h)||void 0===e?void 0:e.status))return[{key:"delete",type:"delete"}];var p=[{key:"copy",type:"copy"},{key:"delete",type:"delete"}];if(d.ab)return p;var f=[{key:"width",type:"input",placeholder:c.get("image","toolbbarWidthTitle").toString(),prefix:"W:",value:(null===(r=h)||void 0===r||null===(i=r.size)||void 0===i?void 0:i.width)||0,didMount:function(e){t.widthInput=e.find("input[type=input]")},onChange:function(e){var n,r=Math.round(parseInt(e,10)*((null===(n=t.image)||void 0===n?void 0:n.rate)||1));t.onInputChange(e,r)}},{key:"height",type:"input",placeholder:c.get("image","toolbbarHeightTitle").toString(),prefix:"H:",value:(null===(o=h)||void 0===o||null===(a=o.size)||void 0===a?void 0:a.height)||0,didMount:function(e){t.heightInput=e.find("input[type=input]")},onChange:function(e){var n,r=Math.round(parseInt(e,10)/((null===(n=t.image)||void 0===n?void 0:n.rate)||1));t.onInputChange(r,e)}},{key:"resize",type:"button",content:'<span class="data-icon data-icon-huanyuan"></span>',title:c.get("image","toolbarReductionTitle"),onClick:function(){var e,n,r,i;h=t.getValue(),t.onInputChange((null===(e=h)||void 0===e||null===(n=e.size)||void 0===n?void 0:n.naturalWidth)||0,(null===(r=h)||void 0===r||null===(i=r.size)||void 0===i?void 0:i.naturalHeight)||0)}}],v=[{key:"block",type:"button",content:'<span class="data-icon data-icon-block-image"></span>',title:c.get("image","displayBlockTitle"),onClick:function(){t.type=d.i.BLOCK}},{key:"inline",type:"button",content:'<span class="data-icon data-icon-inline-image"></span>',title:c.get("image","displayInlineTitle"),onClick:function(){t.type=d.i.INLINE}}],g=n.plugin.findPlugin("image");return p.concat([].concat(Object(u.a)(!1===(null===g||void 0===g||null===(s=g.options)||void 0===s?void 0:s.enableResizer)?[]:f),Object(u.a)(!1===(null===g||void 0===g||null===(l=g.options)||void 0===l?void 0:l.enableTypeSwitch)?[]:v)))},i=null===(e=n.plugin.findPlugin("image"))||void 0===e?void 0:e.options;return(null===i||void 0===i?void 0:i.cardToolbars)?i.cardToolbars(r()):r()}},{key:"onActivate",value:function(e){var t,r;Object(h.a)(Object(p.a)(n.prototype),"onActivate",this).call(this,e),e&&!this.selectedByOther?null===(t=this.image)||void 0===t||t.focus():null===(r=this.image)||void 0===r||r.blur()}},{key:"onSelectByOther",value:function(e,t){var n,r,i;null===(n=this.image)||void 0===n||null===(r=n.root)||void 0===r||r.css("outline",e?"2px solid "+t.color:"");var o="card-selected-other";return e?this.root.addClass(o):this.root.removeClass(o),null===(i=this.image)||void 0===i?void 0:i.root}},{key:"render",value:function(e){var t=this,n=this.getValue();if(n){var r=this.editor;if(this.image&&0!==this.image.root.length){var i,o,a;this.image.changeUrl(n.src),this.image.status=n.status||"done",this.image.message=n.message,this.image.size.width=(null===(i=n.size)||void 0===i?void 0:i.width)||0,this.image.size.height=(null===(o=n.size)||void 0===o?void 0:o.height)||0,n.percent&&this.image.setProgressPercent(n.percent),null===(a=this.image.resizer)||void 0===a||a.destroy()}else{var s,l,c=r.plugin.findPlugin("image");this.image=new N(r,{root:this.root,container:this.getCenter(),status:n.status||"done",src:n.src,size:n.size,alt:n.alt,link:n.link,display:this.type,percent:n.percent,message:n.message,enableResizer:null===c||void 0===c||null===(s=c.options)||void 0===s?void 0:s.enableResizer,onBeforeRender:function(e,t){var n=r.plugin.findPlugin("image");if(n){var i=(n.options||{}).onBeforeRender;if(i)return i(e,t)}return t},onChange:function(e,n){Object(d.X)(r)&&!r.readonly&&e&&t.setSize(e,n)},onError:function(){t.isLocalError=!0,t.didUpdate()},onLoad:function(){var e;t.activated&&(null===(e=t.image)||void 0===e||e.focus())},maxHeight:null===c||void 0===c||null===(l=c.options)||void 0===l?void 0:l.maxHeight})}this.image.render(e)}}},{key:"didUpdate",value:function(){var e,t,r,i;Object(h.a)(Object(p.a)(n.prototype),"didUpdate",this).call(this),null===(e=this.toolbarModel)||void 0===e||null===(t=e.getContainer())||void 0===t||t.remove(),null===(r=this.toolbarModel)||void 0===r||r.create(),null===(i=this.toolbarModel)||void 0===i||i.setDefaultAlign("top")}},{key:"didRender",value:function(){var e;Object(h.a)(Object(p.a)(n.prototype),"didRender",this).call(this),null===(e=this.toolbarModel)||void 0===e||e.setDefaultAlign("top")}}],[{key:"cardName",get:function(){return"image"}},{key:"cardType",get:function(){return d.i.INLINE}},{key:"collab",get:function(){return!1}}]),n}(d.g),T="drop:files",_="paste:event",A="paste:schema",I="paste:each",D="paste:after",z="markdown-it",L=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).cardComponents={},e.loadCounts={},e.extensionNames={svg:"image/svg+xml",png:"image/png",bmp:"image/bmp",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tif:"image/tiff",tiff:"image/tiff",emf:"image/emf",webp:"image/webp"},e.dropFiles=function(t){var n=e.editor;if(Object(d.X)(n)&&0!==(t=t.filter((function(t){return e.isImage(t)}))).length)return n.command.execute("image-uploader",t),!1},e.pasteSchema=function(e){e.add({type:"inline",name:"img",isVoid:!0,attributes:{src:{required:!0,value:"@url"},width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-type":"*","data-size":"@number","data-width":"@number","data-height":"@number"}})},e.pasteFiles=function(t){var n=t.files,r=e.editor;if(Object(d.X)(r)&&0!==(n=n.filter((function(t){return e.isImage(t)}))).length)return r.command.execute("image-uploader",n),!1},e.pasteEach=function(t){var n=e.editor,r=e.options.isRemote;if(t.isCard()&&t.attributes(d.x)){if("image"!==t.attributes(d.x))return;var i=Object(d.L)(t.attributes(d.f));return i&&i.src?void(r&&r(i.src)?(i.status="uploading",i.percent=0,n.card.replaceNode(t,"image",i)):"uploading"===i.status&&(i.percent=0,t.attributes(d.f,Object(d.N)(Object(f.a)(Object(f.a)({},i),{},{status:"done"}))))):void t.remove()}if("img"===t.name){var o=t.attributes(),a=o.src||o["data-src"],s=o.alt;if(!a)return void t.remove();var l=n.plugin.findPlugin("image"),c=t.css("width"),u=t.css("height"),h=o["data-type"]||(null===l||void 0===l?void 0:l.options.defaultType),p=d.i.INLINE;if("block"===h){var v=t.parent();v&&"p"===v.name&&n.node.unwrap(v),p=d.i.BLOCK}n.card.replaceNode(t,"image",{type:p,src:a,status:r&&r(a)||/^data:image\//i.test(a)?"uploading":"done",alt:s,percent:0,size:{width:Object(d.hb)(c),height:Object(d.hb)(u)}}),t.remove()}},e.pasteAfter=function(){var t=e.editor;t.container.find("[data-card-key=image]").each((function(n,r){var i=t.card.find(n);if(i&&Object(d.X)(t)){var o=i.getValue();if("uploading"===(null===o||void 0===o?void 0:o.status)&&!Object.keys(e.cardComponents).find((function(t){return e.cardComponents[t].id===i.id}))){var a=o.src;if(/^data:image\//i.test(a)){var s=e.dataURIToFile(a),l=Object(d.S)(s),c=l?"image.".concat(l):"image",u=new globalThis.File([s],c);return u.uid=(new Date).getTime()+"-"+Object(d.gb)(),t.command.execute("image-uploader",[u]),void(e.cardComponents[u.uid]=i)}var h=e.options.isRemote;h&&h(a)&&e.uploadAddress(a,i)}}}))},e.markdownIt=function(t){!1!==e.options.markdown&&(t.enable("image"),t.enable("reference"))},e}return Object(s.a)(n,[{key:"init",value:function(){var e=this.editor;Object(d.X)(this.editor)&&(e.on(T,this.dropFiles),e.on(_,this.pasteFiles),e.on(A,this.pasteSchema),e.on(I,this.pasteEach),e.on(D,this.pasteAfter),e.on(z,this.markdownIt));var t=(this.options.file||{}).accept;if("string"===typeof t&&(t=t.split(",")),Array.isArray(t)){var n=[];(t||[]).forEach((function(e){var t=(e=e.trim()).split(".").pop();t&&n.push(t)})),n.length>0&&(this.extensionNames=n)}else"object"===Object(x.a)(t)&&(this.extensionNames=t)}},{key:"isImage",value:function(e){var t=Object(d.S)(e),n=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return n.indexOf("*")>=0||n.indexOf(t)>=0}},{key:"dataURIToFile",value:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([r],{type:n})}},{key:"getUrl",value:function(e){var t=this.editor.plugin.components.image;if(t){var n=(t.options||{}).onBeforeRender;if(n)return n(e.status,e.src)}return e.src}},{key:"loadImage",value:function(e,t){var n=this;this.loadCounts[e]||(this.loadCounts[e]=1);var r=new Image,i=this.editor;r.src=this.getUrl(t),r.onload=function(){delete n.loadCounts[e],i.card.update(e,t)},r.onerror=function(){n.loadCounts[e]<=3?setTimeout((function(){n.loadCounts[e]++,n.loadImage(e,t)}),500):(delete n.loadCounts[e],t.status="error",t.message=i.language.get("image","loadError"),i.card.update(e,t))}}},{key:"execute",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s,l,c,h,p,v,g,m,b,y,w,k,x,O=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.editor,Object(d.X)(n)){e.next=3;break}return e.abrupt("return");case 3:if(r=n.request,o=n.card,a=n.language,s=this.options.file,l=s.action,c=s.data,h=s.type,p=s.contentType,v=s.multiple,g=s.crossOrigin,m=s.withCredentials,b=s.headers,y=s.name,w=this.options.parse,k=this.options.file.limitSize||5242880,Array.isArray(t)||"string"===typeof t){e.next=14;break}return x=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),e.next=11,r.getFiles({event:t,accept:d.W?"image/*":x.length>0?x:"",multiple:v});case 11:t=e.sent,e.next=17;break;case 14:if("string"!==typeof t){e.next=17;break}return this.insertRemote(t),e.abrupt("return");case 17:if(0!==t.length){e.next=19;break}return e.abrupt("return");case 19:return r.upload({url:l,crossOrigin:g,withCredentials:m,headers:b,data:c,type:h,contentType:p,onBefore:function(e){return!(e.size>k)||(n.messageError("upload-limit",a.get("image","uploadLimitError").toString().replace("$size",(k/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(d.X)(n)&&!O.cardComponents[e.uid]){var t=e.src||"",r="string"!==typeof t?window.btoa(String.fromCharCode.apply(String,Object(u.a)(new Uint8Array(t)))):t,i=function(t){var i,a=n.plugin.findPlugin("image"),s=o.insert("image",Object(f.a)(Object(f.a)({},t),{},{status:"uploading",type:t.type||(null===a||void 0===a||null===(i=a.options)||void 0===i?void 0:i.defaultType)}),r);O.cardComponents[e.uid]=s};return new Promise((function(e){var t=new Image;t.src=r;var o=n.plugin.findPlugin("image");t.onload=function(){var n,r=t.naturalWidth,a=t.naturalHeight,s=t.height,l=t.width,c=s,d=null===o||void 0===o||null===(n=o.options)||void 0===n?void 0:n.maxHeight;d&&a>r&&s>d&&(c=d,l=r*(d/a)),i({src:"",size:{width:l,height:c,naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth}}),e()},t.onerror=function(){i({src:"",status:"error"}),e()}}))}},onUploading:function(e,t){var n=t.percent,r=O.cardComponents[e.uid||""];r&&r.setProgressPercent(n)},onSuccess:function(e,t){var n=O.cardComponents[t.uid||""];if(n){var r=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,i=w?w(e):r?{result:!0,data:r}:{result:!1};i.result?r=i.data:o.update(n.id,{status:"error",message:i.data||a.get("image","uploadError")});var s={status:"done"};r&&(s.src=r,O.loadImage(n.id,s)),delete O.cardComponents[t.uid||""]}},onError:function(e,t){var n=O.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||a.get("image","uploadError")}),delete O.cardComponents[t.uid||""])}},t,y),e.abrupt("return");case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadAddress",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a,s,l,c,u,h,p,v,g,m,b,y=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.editor,Object(d.X)(r)){e.next=3;break}return e.abrupt("return");case 3:a=this.options.remote,s=a.action,l=a.type,c=a.contentType,u=a.crossOrigin,h=a.withCredentials,p=a.headers,v=a.name,g=a.data,m=this.options.parse,b=v||"url",r.request.ajax({url:s,method:"POST",contentType:c||"application/json",type:void 0===l?"json":l,crossOrigin:u,withCredentials:h,headers:p,data:"function"===typeof g?Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return n=e.sent,e.abrupt("return",Object(f.a)(Object(f.a)({},n),{},Object(k.a)({},b,t)));case 4:case"end":return e.stop()}}),e)}))):Object(f.a)(Object(f.a)({},g),{},Object(k.a)({},b,t)),success:function(e){var t=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,i=m?m(e):t?{result:!0,data:t}:{result:!1};i.result?t=i.data:r.card.update(n.id,{status:"error",message:i.data||r.language.get("image","uploadError")});var o={status:"done"};t&&(o.src=t,y.loadImage(n.id,o))},error:function(e){r.card.update(n.id,{status:"error",message:e.message||r.language.get("image","uploadError")})}});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"insertRemote",value:function(e,t){var n=this.editor,r=n.plugin.findPlugin("image"),i={src:e,alt:t,status:"uploading",type:(null===r||void 0===r?void 0:r.options.defaultType)||d.i.INLINE},o=this.options.isRemote;if(o&&o(e)){var a=n.card.insert("image",i);this.uploadAddress(e,a)}else i.status="done",n.card.insert("image",i)}},{key:"destroy",value:function(){var e=this.editor;Object(d.X)(e)&&(e.off(T,this.dropFiles),e.off(_,this.pasteFiles),e.off(A,this.pasteSchema),e.off(I,this.pasteEach),e.off(D,this.pasteAfter),e.off(z,this.markdownIt))}}],[{key:"pluginName",get:function(){return"image-uploader"}}]),n}(d.v),R={"en-US":{image:{next:"Next",prev:"Previous",zoomIn:"Zoom In",zoomOut:"Zoom Out",originSize:"Origin Size",bestSize:"Best Size",errorMessageCopy:"Copy error message",loadError:"The picture failed to load!",uploadError:"The picture failed to upload!",uploadLimitError:"Upload image size is limited to $size",toolbarReductionTitle:"Reduction size",toolbarWidthTitle:"Width",toolbarHeightTitle:"Height",displayBlockTitle:"Block",displayInlineTitle:"In line"}},"zh-CN":{image:{next:"\u4e0b\u4e00\u5f20",prev:"\u4e0a\u4e00\u5f20",zoomIn:"\u653e\u5927",zoomOut:"\u7f29\u5c0f",originSize:"\u5b9e\u9645\u5c3a\u5bf8",bestSize:"\u9002\u5e94\u5c4f\u5e55",errorMessageCopy:"\u590d\u5236\u9519\u8bef\u4fe1\u606f",loadError:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\uff01",uploadError:"\u4e0a\u4f20\u56fe\u7247\u5931\u8d25\uff01",uploadLimitError:"\u4e0a\u4f20\u56fe\u7247\u5927\u5c0f\u9650\u5236\u4e3a $size",toolbarReductionTitle:"\u8fd8\u539f",toolbarWidthTitle:"\u5bbd\u5ea6",toolbarHeightTitle:"\u5bbd\u5ea6",displayBlockTitle:"\u72ec\u5360\u4e00\u884c",displayInlineTitle:"\u5d4c\u5165\u884c\u5185"}}},B="parse:html",P=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).parseHtml=function(t,n){var r=[],i=e.editor;return t.find("[".concat(d.c,'="').concat(S.cardName,'"],[').concat(d.x,'="').concat(S.cardName,'"]')).each((function(t){var o=Object(d.a)(t),a=i.card.find(o),s=(null===a||void 0===a?void 0:a.getValue())||Object(d.L)(o.attributes(d.f));if((null===s||void 0===s?void 0:s.src)&&"done"===s.status){var l=o.find(".data-image-meta img"),c=l.length>0?l.clone(!0):Object(d.a)("<img />");o.empty();var u=s.src,h=e.options.onBeforeRender;h&&(u=h(s.status,s.src));var p=o.attributes(d.e);c.attributes("src",u),c.css("visibility","visible");var f=s.size;(null===f||void 0===f?void 0:f.width)&&c.css("width","".concat(f.width,"px")),(null===f||void 0===f?void 0:f.height)&&c.css("height","".concat(f.height,"px")),c.removeAttributes("class"),c.attributes("data-type",p),n&&(c=n(c,s)),p===d.i.BLOCK&&(c=i.node.wrap(c,Object(d.a)('<p style="text-align:center;"></p>'))),o.replaceWith(c),r.push(c)}else o.remove()})),r},e}return Object(s.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(R),e.on(B,this.parseHtml)}},{key:"execute",value:function(e,t,n){var r={status:e,src:t,alt:n};"error"===e&&(r.src="",r.message=t),this.editor.card.insert("image",r)}},{key:"waiting",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,s,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.editor.card,r=function(e){var t;return e.root.inEditor()&&e.name===S.cardName&&"uploading"===(null===(t=e.getValue())||void 0===t?void 0:t.status)},a=function(){return n.components.find(r)},s=function(e){var n=6e4;return new Promise((function(i,o){if(t){var a=t(l.constructor.pluginName,e);if(!1===a)return o({name:l.constructor.pluginName,card:e});"number"===typeof a&&(n=a)}var s=(new Date).getTime(),c=(new Date).getTime();!function t(){if(c-s>=n)return i();setTimeout((function(){r(e)?t():i()}),10)}()}))},e.abrupt("return",new Promise(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),o=function e(r){s(r).then((function(){var n=a();n?e(n):t()})).catch(n)},r?o(r):t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.editor.off(B,this.parseHtml)}}],[{key:"pluginName",get:function(){return"image"}}]),n}(d.v);t.c=P},2503:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},2504:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(2503),i=(Object(r.a)("bottomLeft","bottomRight","topLeft","topRight"),function(e){return void 0===e||"topLeft"!==e&&"topRight"!==e?"slide-up":"slide-down"}),o=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)}},2505:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return w}));var r=n(2484),i=n.n(r),o=n(18),a=n(15),s=n(16),l=n(19),c=n(21),d=n(2470),u=n(24),h=n(116),p=n(63),f=n(17),v=n(2);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.data-file {\r\n    display: flex;\r\n    height: 24px;\r\n    line-height: 24px;\r\n    cursor: pointer;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .data-file .data-file-icon {\r\n    flex: auto;\r\n    width: 24px;\r\n    height: 24px;\r\n    font-size: 16px;\r\n    text-align: center;\r\n  }\r\n  .data-file .data-file-title {\r\n    flex: auto;\r\n    font-size: 14px;\r\n    margin-right: 4px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .data-file .data-file-size {\r\n    flex: auto;\r\n    font-size: 12px;\r\n  }\r\n  .data-file-done {\r\n    color: #096DD9;\r\n  }\r\n  .data-file-uploading,\r\n  .data-file-error {\r\n    color: #595959;\r\n  }\r\n  .data-file-uploading .data-file-size,\r\n  .data-file-error .data-file-size {\r\n    color: #8C8C8C;\r\n  }\r\n  .data-file-error {\r\n    padding: 2px 4px;\r\n    background: #f5f5f5;\r\n    display: flex;\r\n    border-radius: 4px;\r\n    max-width: 200px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    font-size: 12px;\r\n    align-items: center;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.am-engine [data-card-key="file"].card-selected [data-card-element=center].data-card-background-selected {\r\n    border-radius: 4px;\r\n}\r\n\r\n.data-file-error .data-icon {\r\n    font-size: 12px;\r\n}\r\n\r\n.data-file-error .data-icon-error {\r\n    color: red;\r\n    margin-right: 8px;\r\n}\r\n\r\n.data-file-error .data-icon-copy {\r\n    margin-left: 8px;\r\n    cursor: pointer;\r\n}');var g=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e,r;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(r=t.call.apply(t,[this].concat(o))).container=void 0,r.getMaxWidth=function(){var e,t=r.editor.block.closest(r.root),n=r.root.find(".data-file-size");return t.get().clientWidth-36-((null===n||void 0===n||null===(e=n.get())||void 0===e?void 0:e.clientWidth)||0)},r.onWindowResize=function(){r.updateMaxWidth()},r.updateMaxWidth=function(){var e=r.getMaxWidth();r.root.find(".data-file-title").css("max-width",Math.max(e,0)+"px")},r.onBeforeRender=function(e,t){var n=r.editor.plugin.findPlugin("file");if(n){var i=(n.options||{}).onBeforeRender;if(i)return i(e,t)}return t},r.destroy=function(){Object(h.a)((e=Object(u.a)(r),Object(p.a)(n.prototype)),"destroy",e).call(e),r.container=void 0,window.removeEventListener("resize",r.onWindowResize),r.editor.off("editor:resize",r.onWindowResize)},r}return Object(s.a)(n,[{key:"getLocales",value:function(){return this.editor.language.get("file")}},{key:"toolbar",value:function(){var e,t,n=this,r=this.editor,i=null!==(e=null===(t=r.plugin.findPlugin("file"))||void 0===t?void 0:t.options)&&void 0!==e?e:{},o=function(){var e=[],t=n.getValue();if(!t)return e;var o=t.status,a=t.preview,s=t.download,l=n.getLocales();if("done"===o){if(a){e.push({key:"preview",type:"button",content:'<span class="data-icon data-icon-preview" />',title:l.preview,link:i.onPreview?void 0:Object(d.ib)(n.onBeforeRender("preview",a)),onClick:i.onPreview?function(){i.onPreview&&i.onPreview(a,t)}:void 0})}if(s){e.push({key:"download",type:"button",content:'<span class="data-icon data-icon-download" />',title:l.download,link:i.onDownload?void 0:Object(d.ib)(n.onBeforeRender("download",s)),onClick:i.onDownload?function(){i.onDownload&&i.onDownload(s,t)}:void 0})}Object(d.X)(r)&&!r.readonly&&e.length>0&&e.push({key:"separator",type:"separator"})}return Object(d.X)(r)&&!r.readonly&&e.push({key:"delete",type:"delete"}),e};return(null===i||void 0===i?void 0:i.cardToolbars)?i.cardToolbars(o()):o()}},{key:"renderTemplate",value:function(e){var t=e.name,n=e.status,r=e.message,i=e.percent,o=e.size,a=this.getLocales();if("error"===n)return'<span class="data-file-error"><span class="data-icon data-icon-error"></span>'.concat(r||a.loadError,'<span class="data-icon data-icon-copy"></span></span>');var s='<span class="data-icon data-icon-attachment"></span>';"uploading"===n&&(s='<i class="data-anticon">\n                        <svg viewBox="0 0 1024 1024" class="data-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n                            <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n                        </svg>\n                    </i>\n                    ');var l="",c=o?Object(d.T)(o):"";c&&(l='<span class="data-file-size">('.concat(Object(d.O)(c),")</span>"));var u="";return"uploading"===n&&(u='<span class="percent">'.concat(i||0,"%</span>")),'\n        <a class="data-file data-file-'.concat(n,'">\n            <span class="data-file-icon">').concat(s,"</span>\n            ").concat(u,'\n            <span class="data-file-title">').concat(Object(d.O)(t),"</span>\n            ").concat(l,"\n        </a>\n        ")}},{key:"bindErrorEvent",value:function(e){var t=this,n=this.editor,r=e.find(".data-icon-copy");r.on("mouseenter",(function(){d.E.show(r,n.language.get("image","errorMessageCopy").toString())})),r.on("mouseleave",(function(){d.E.hide()})),r.on("click",(function(e){var r;e.stopPropagation(),e.preventDefault(),d.E.hide(),n.clipboard.copy((null===(r=t.getValue())||void 0===r?void 0:r.message)||"Error message"),n.messageSuccess("copy",n.language.get("copy","success").toString())}))}},{key:"setProgressPercent",value:function(e){var t;null===(t=this.container)||void 0===t||t.find(".percent").html("".concat(e,"%")),this.setValue({percent:e})}},{key:"onActivate",value:function(e){var t,n;e?null===(t=this.container)||void 0===t||t.addClass("data-file-active"):null===(n=this.container)||void 0===n||n.removeClass("data-file-active")}},{key:"render",value:function(){var e,t=this.getValue();if(t){this.container&&0!==this.container.length?this.container=this.getCenter().first():(this.container=Object(d.a)(this.renderTemplate(t)),this.getCenter().empty().append(this.container));var n=this.editor;Object(d.X)(n)?this.container.attributes("draggable","true"):this.renderView(),"error"===t.status&&this.bindErrorEvent(this.root),null===(e=this.container)||void 0===e||e.find(".percent").html("".concat(t.percent,"%")),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),n.on("editor:resize",this.onWindowResize)}}},{key:"renderView",value:function(){var e,t,n,r,i,o=this.getValue(),a=null!==(e=null===(t=this.editor.plugin.findPlugin("file"))||void 0===t?void 0:t.options)&&void 0!==e?e:{},s=Object(d.ib)(this.onBeforeRender("download",o.download||""));a.onDownload?null===(n=this.container)||void 0===n||n.on("click",(function(){a.onDownload(s,o)})):(null===(r=this.container)||void 0===r||r.attributes("target","_blank"),null===(i=this.container)||void 0===i||i.attributes("href",s))}},{key:"didUpdate",value:function(){var e,t,r;Object(h.a)(Object(p.a)(n.prototype),"didUpdate",this).call(this),null===(e=this.toolbarModel)||void 0===e||null===(t=e.getContainer())||void 0===t||t.remove(),null===(r=this.toolbarModel)||void 0===r||r.create()}}],[{key:"cardName",get:function(){return"file"}},{key:"cardType",get:function(){return d.i.INLINE}},{key:"selectStyleType",get:function(){return d.B.BACKGROUND}},{key:"autoSelected",get:function(){return!1}},{key:"collab",get:function(){return!1}}]),n}(d.g),m="drop:files",b="paste:event",y="paste:each",w=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).cardComponents={},e.extensionNames={"*":"*"},e.dropFiles=function(t){var n=e.editor;if(Object(d.X)(n)&&0!==(t=t.filter((function(t){return e.isFile(t)}))).length)return n.command.execute("file-uploader",t),!1},e.pasteFiles=function(t){var n=t.files,r=e.editor;if(Object(d.X)(r)&&0!==(n=n.filter((function(t){return e.isFile(t)}))).length)return r.command.execute("file-uploader",n.filter((function(t){return e.isFile(t)})),n),!1},e.pasteEach=function(e){if(e.isCard()&&e.attributes(d.x)){if("file"!==e.attributes(d.x))return;var t=Object(d.L)(e.attributes(d.f));return t&&t.url?void("uploading"===t.status&&(t.percent=0,e.attributes(d.f,Object(d.N)(Object(v.a)(Object(v.a)({},t),{},{status:"done"}))))):void e.remove()}},e}return Object(s.a)(n,[{key:"init",value:function(){var e,t,n,r=this.editor;Object(d.X)(r)&&(r.on(m,this.dropFiles),r.on(b,this.pasteFiles),r.on(y,this.pasteEach));var i=(null===(e=this.options)||void 0===e?void 0:e.accept)||(null===(t=this.options)||void 0===t||null===(n=t.file)||void 0===n?void 0:n.accept)||"*";if("string"===typeof i&&(i=i.split(",")),Array.isArray(i)){var o=[];(i||[]).forEach((function(e){var t=(e=e.trim()).split(".").pop();t&&o.push(t)})),o.length>0&&(this.extensionNames=o)}else"object"===Object(f.a)(i)&&(this.extensionNames=i)}},{key:"isFile",value:function(e){var t,n=null!==(t=Object(d.S)(e))&&void 0!==t?t:"",r=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return r.indexOf("*")>=0||r.indexOf(n)>=0}},{key:"execute",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s,l,c,u,h,p,f,g,m,b,y,w,k,x=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.editor,Object(d.X)(n)){e.next=3;break}return e.abrupt("return");case 3:if(r=n.request,o=n.card,a=n.language,s=this.options,l=s.action,c=s.type,u=s.contentType,h=s.multiple,p=s.crossOrigin,f=s.withCredentials,g=s.headers,m=s.name,"function"!==typeof(b=this.options.data)){e.next=10;break}return e.next=9,b();case 9:b=e.sent;case 10:if(y=this.options.parse,w=this.options.limitSize||5242880,Array.isArray(t)){e.next=17;break}return k=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),e.next=16,r.getFiles({event:t,accept:d.W?"*":k.length>0?k:"",multiple:h});case 16:t=e.sent;case 17:if(0!==t.length){e.next=19;break}return e.abrupt("return");case 19:return r.upload({url:l,data:b,type:c,contentType:u,crossOrigin:p,withCredentials:f,headers:g,onBefore:function(e){return!(e.size>w)||(n.messageError("upload-limit",a.get("file","uploadLimitError").toString().replace("$size",(w/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(d.X)(n)&&!x.cardComponents[e.uid]){var t=o.insert("file",{status:"uploading",name:e.name,size:e.size});x.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,r=x.cardComponents[e.uid||""];r&&r.setProgressPercent(n)},onSuccess:function(e,t){var r=x.cardComponents[t.uid||""];if(r){var i=e.url||e.data&&e.data.url,s={result:!0,data:{status:"done",url:i,preview:e.preview||e.data&&e.data.preview,download:e.download||e.data&&e.data.download}};if(y){var l=y(e);if(l.result){var c=s.data;"string"===typeof l.data?s.data=Object(v.a)(Object(v.a)({},c),{},{url:l.data}):(c.url=l.data.url,void 0!==l.data.status&&(c=Object(v.a)(Object(v.a)({},c),{},{status:l.data.status})),void 0!==l.data.preview&&(c=Object(v.a)(Object(v.a)({},c),{},{preview:l.data.preview})),void 0!==l.data.download&&(c=Object(v.a)(Object(v.a)({},c),{},{download:l.data.download})),s.data=Object(v.a)({},c))}else s={result:!1,data:l.data.toString()}}else i||(s={result:!1,data:e.data});if(s.result){var d="string"===typeof s.data?{url:s.data}:Object(v.a)({},s.data);n.card.update(r.id,d)}else o.update(r.id,{status:"error",message:"string"===typeof s.data?s.data:a.get("file","uploadError")});delete x.cardComponents[t.uid||""]}},onError:function(e,t){var n=x.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||a.get("file","uploadError")}),delete x.cardComponents[t.uid||""])}},t,m),e.abrupt("return");case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this.editor;Object(d.X)(e)&&(e.off(m,this.dropFiles),e.off(b,this.pasteFiles),e.off(y,this.pasteEach))}}],[{key:"pluginName",get:function(){return"file-uploader"}}]),n}(d.v),k={"en-US":{file:{errorMessageCopy:"Copy error message",loadError:"The file failed to load!",uploadError:"The picture failed to upload!",uploadLimitError:"Upload file size is limited to $size",download:"Download",preview:"Preview"}},"zh-CN":{file:{errorMessageCopy:"\u590d\u5236\u9519\u8bef\u4fe1\u606f",loadError:"\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25\uff01",uploadError:"\u4e0a\u4f20\u6587\u4ef6\u5931\u8d25\uff01",uploadLimitError:"\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u4e3a $size",download:"\u4e0b\u8f7d",preview:"\u9884\u89c8"}}},x="parse:html",O="paste:schema",C="paste:each",E=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).pasteSchema=function(e){e.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:g.cardName},"data-value":"*"}})},e.pasteHtml=function(t){var n=e.editor;if(Object(d.X)(n)){if(t.isElement())if(t.attributes("data-type")===g.cardName){var r=t.attributes("data-value"),i=Object(d.L)(r);if(!i.url)return;return n.card.replaceNode(t,g.cardName,i),t.remove(),!1}return!0}},e.parseHtml=function(t,n){var r=[];return t.find("[".concat(d.c,'="').concat(g.cardName,'"],[').concat(d.x,'="').concat(g.cardName,'"')).each((function(t){var i=Object(d.a)(t),o=e.editor.card.find(i),a=(null===o||void 0===o?void 0:o.getValue())||Object(d.L)(i.attributes(d.f));if((null===a||void 0===a?void 0:a.url)&&"done"===a.status){var s='<span data-type="'.concat(g.cardName,'" data-value="').concat(Object(d.N)(a),'"><a target="_blank" href="').concat(a.url,'" style="word-wrap: break-word;color: #096DD9;touch-action: manipulation;background-color: rgba(0,0,0,0);text-decoration: none;outline: none;cursor: pointer;transition: color .3s;"><span style="font-size: 14px;">\ud83d\udcce</span>').concat(a.name,"</a></span>");i.empty();var l=Object(d.a)(s);n&&(l=n(l,a)),i.replaceWith(l),r.push(l)}else i.remove()})),r},e}return Object(s.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(k),e.on(x,this.parseHtml),e.on(C,this.pasteHtml),e.on(O,this.pasteSchema)}},{key:"execute",value:function(e,t,n,r,i,o){var a={status:e,url:t,name:n||t,size:r,preview:i,download:o};"error"===e&&(a.url="",a.message=t),this.editor.card.insert("file",a)}},{key:"waiting",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,s,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.editor.card,r=function(e){var t;return e.root.inEditor()&&e.name===g.cardName&&"uploading"===(null===(t=e.getValue())||void 0===t?void 0:t.status)},a=function(){return n.components.find(r)},s=function(e){var n=6e4;return new Promise((function(i,o){if(t){var a=t(l.name,e);if(!1===a)return o({name:l.name,card:e});"number"===typeof a&&(n=a)}var s=(new Date).getTime(),c=(new Date).getTime();!function t(){if(c-s>=n)return i();setTimeout((function(){r(e)?t():i()}),10)}()}))},e.abrupt("return",new Promise(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),o=function e(r){s(r).then((function(){var n=a();n?e(n):t()})).catch(n)},r?o(r):t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this.editor;e.off(x,this.parseHtml),e.off(C,this.pasteHtml),e.off(O,this.pasteSchema)}}],[{key:"pluginName",get:function(){return"file"}}]),n}(d.v);t.c=E},2506:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y}));var r=n(2484),i=n.n(r),o=n(18),a=n(15),s=n(16),l=n(19),c=n(21),d=n(2470),u=n(2),h=n(116),p=n(63),f=n(17);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".data-video {\r\n  margin: 0 auto;\r\n  position: relative;\r\n  cursor: pointer;\r\n}\r\n  .data-video-content {\r\n    position: relative;\r\n    height: 420px;\r\n    background: #f7f7f7;\r\n  }\r\n  .data-video-content video {\r\n    width: 100%;\r\n    height: 100%;\r\n    outline: none;\r\n    position: relative;\r\n    z-index: 1;\r\n    background: #000;\r\n  }\r\n  .data-video-uploading,\r\n  .data-video-uploaded,\r\n  .data-video-error {\r\n    border: 1px solid #e6e6e6;\r\n    background: #f6f6f6;\r\n  }\r\n  .data-video-content .data-video-mask {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 1;\r\n  }\r\n  .data-video-done {\r\n    height: auto;\r\n    border: none;\r\n    background: none;\r\n    line-height: 0;\r\n  }\r\n  .data-video-active {\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n  }\r\n  .data-video-center {\r\n    position: absolute;\r\n    top: 50%;\r\n    margin-top: -48px;\r\n    width: 100%;\r\n    height: 96px;\r\n  }\r\n  .data-video-center .data-video-icon,\r\n  .data-video-center .data-video-name,\r\n  .data-video-center .data-video-message,\r\n  .data-video-center .data-video-progress,\r\n  .data-video-center .data-video-transcoding {\r\n    text-align: center;\r\n  }\r\n  .data-video-center .data-video-icon {\r\n    font-size: 24px;\r\n    color: #BFBFBF;\r\n    margin-bottom: 12px;\r\n  }\r\n  .data-video-center .data-video-name {\r\n    color: #595959;\r\n    margin-bottom: 12px;\r\n  }\r\n  .data-video-center .data-video-message {\r\n    color: #595959;\r\n  }\r\n  .data-video-center .data-video-anticon {\r\n    display: inline-block;\r\n    font-style: normal;\r\n    vertical-align: -0.125em;\r\n    text-align: center;\r\n    text-transform: none;\r\n    line-height: 0;\r\n    text-rendering: optimizeLegibility;\r\n    -webkit-font-smoothing: antialiased;\r\n    margin-right: 5px;\r\n  }\r\n  .data-video-center .data-video-anticon .data-video-anticon-spin {\r\n    display: inline-block;\r\n    -webkit-animation: loadingCircle 1s infinite linear;\r\n    animation: loadingCircle 1s infinite linear;\r\n  }\r\n  .data-video-center .data-error-icon {\r\n    width: 16px;\r\n    height: 16px;\r\n    display: inline-block;\r\n    background: #F5222D;\r\n    text-align: center;\r\n    font-size: 12px;\r\n    color: #ffffff;\r\n    padding: 1px 0 0 0;\r\n    line-height: 16px;\r\n    border-radius: 100%;\r\n    vertical-align: middle;\r\n    margin: -2px 5px 0 0;\r\n  }\r\n\r\n.data-video-title {\r\n  text-align: center;\r\n}\r\n.data-video-title::-moz-selection {\r\n  background: transparent\r\n}\r\n.data-video-title::selection {\r\n  background: transparent\r\n}\r\n.data-video .data-resizer {\r\n  z-index: inherit;\r\n}\r\n.data-video .data-resizer .data-resizer-holder {\r\n  z-index: 2;\r\n}\r\n\r\n.data-video .data-resizing {\r\n  z-index: 3;\r\n}");var v=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).maxWidth=0,e.resizer=void 0,e.video=void 0,e.isLoad=!1,e.container=void 0,e.videoContainer=void 0,e.title=void 0,e.mask=void 0,e.rate=1,e._fullWidth=void 0,e._naturalSize={width:0,height:0},e.onBeforeRender=function(t,n){var r=e.editor.plugin.findPlugin("video");if(r){var i=(r.options||{}).onBeforeRender;if(i)return i(t,n)}return n},e.downloadFile=function(){var t=e.getValue();(null===t||void 0===t?void 0:t.download)&&window.open(Object(d.ib)(e.onBeforeRender("download",t.url)))},e.onWindowResize=function(){var t,n;Object(d.X)(e.editor)&&(e.maxWidth=e.getMaxWidth(),e.resetSize(),e.resizer&&(e.resizer.maxWidth=e.maxWidth,e.resizer.setSize((null===(t=e.videoContainer)||void 0===t?void 0:t.width())||0,(null===(n=e.videoContainer)||void 0===n?void 0:n.height())||0)))},e.handleClick=function(t){var n=e.editor;Object(d.X)(n)&&!e.activated&&n.card.activate(e.root,d.h.MOUSE_DOWN,t)},e}return Object(s.a)(n,[{key:"getLocales",value:function(){return this.editor.language.get("video")}},{key:"renderTemplate",value:function(e){var t=e.name,n=e.status,r=e.size,i=e.message,o=e.percent,a=this.getLocales(),s='<div class="data-video-icon">\n                <svg width="32px" height="24px" viewBox="0 0 32 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.25"><g transform="translate(-704.000000, -550.000000)" fill="#000000" fill-rule="nonzero">  <g transform="translate(704.000000, 550.000000)">    <g>      <path d="M13.09375,17.30625 L20.65625,12.375 C20.95,12.16875 20.95,11.809375 20.65625,11.603125 L13.09375,6.696875 C12.66875,6.4 12,6.6375 12,7.084375 L12,16.921875 C12,17.365625 12.671875,17.603125 13.09375,17.30625 Z" id="Path"></path>      <path d="M30,0 L2,0 C0.896875,0 0,0.896875 0,2 L0,22 C0,23.103125 0.896875,24 2,24 L30,24 C31.103125,24 32,23.103125 32,22 L32,2 C32,0.896875 31.103125,0 30,0 Z M5.25,21.25 C5.25,21.525 5.025,21.75 4.75,21.75 L2.5,21.75 C2.225,21.75 2,21.525 2,21.25 L2,18.5 C2,18.225 2.225,18 2.5,18 L4.75,18 C5.025,18 5.25,18.225 5.25,18.5 L5.25,21.25 Z M5.25,13.375 C5.25,13.65 5.025,13.875 4.75,13.875 L2.5,13.875 C2.225,13.875 2,13.65 2,13.375 L2,10.625 C2,10.35 2.225,10.125 2.5,10.125 L4.75,10.125 C5.025,10.125 5.25,10.35 5.25,10.625 L5.25,13.375 Z M5.25,5.5 C5.25,5.775 5.025,6 4.75,6 L2.5,6 C2.225,6 2,5.775 2,5.5 L2,2.75 C2,2.475 2.225,2.25 2.5,2.25 L4.75,2.25 C5.025,2.25 5.25,2.475 5.25,2.75 L5.25,5.5 Z M24.75,21.75 L7.25,21.75 L7.25,2.25 L24.75,2.25 L24.75,21.75 Z M30,21.25 C30,21.525 29.775,21.75 29.5,21.75 L27.25,21.75 C26.975,21.75 26.75,21.525 26.75,21.25 L26.75,18.5 C26.75,18.225 26.975,18 27.25,18 L29.5,18 C29.775,18 30,18.225 30,18.5 L30,21.25 Z M30,13.375 C30,13.65 29.775,13.875 29.5,13.875 L27.25,13.875 C26.975,13.875 26.75,13.65 26.75,13.375 L26.75,10.625 C26.75,10.35 26.975,10.125 27.25,10.125 L29.5,10.125 C29.775,10.125 30,10.35 30,10.625 L30,13.375 Z M30,5.5 C30,5.775 29.775,6 29.5,6 L27.25,6 C26.975,6 26.75,5.775 26.75,5.5 L26.75,2.75 C26.75,2.475 26.975,2.25 27.25,2.25 L29.5,2.25 C29.775,2.25 30,2.475 30,2.75 L30,5.5 Z" id="Shape"></path>    </g>  </g></g> </g></svg></div>',l='<i class="data-video-anticon"><svg viewBox="0 0 1024 1024" class="data-video-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></i>',c='<span class="data-error-icon">X</span>';if("error"===n)return'\n            <div class="data-video">\n                <div class="data-video-content data-video-error">\n                    <div class="data-video-center">\n                        <div class="data-video-name">'.concat(Object(d.O)(t),'</div>\n                        <div class="data-video-message">\n                            ').concat(c,"\n                            ").concat(i||a.loadError,"\n                        </div>\n                    </div>\n                </div>\n            </div>");var u=r?Object(d.T)(r):"",h=t?'<div class="data-video-title">'.concat(Object(d.O)(t),"</div>"):"";if("uploading"===n)return'\n            <div class="data-video">\n                <div class="data-video-content data-video-uploading">\n                    <div class="data-video-center">\n                        '.concat(s,'\n                        <div class="data-video-name">\n                        ').concat(Object(d.O)(t)," (").concat(Object(d.O)(u),')\n                        </div>\n                        <div class="data-video-progress">\n                            ').concat(l,'\n                            <span class="percent">').concat(o||0,"%<span>\n                        </div>\n                    </div>\n                </div>\n            </div>");var p="undefined"===typeof n;if("transcoding"===n||p)return'\n            <div class="data-video">\n                <div class="data-video-content data-video-uploaded">\n                    <div class="data-video-center">\n                        '.concat(s,'\n                        <div class="data-video-name">\n                        ').concat(Object(d.O)(t)," (").concat(Object(d.O)(u),')\n                        </div>\n                        <div class="data-video-transcoding">\n                            ').concat(l,'\n                            <span class="transcoding">').concat(p?a.loading:a.transcoding,"%<span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ");var f=this.editor.plugin.components.video;return'\n        <div class="data-video">\n            <div class="data-video-content data-video-done"></div>\n\t\t\t'.concat(f&&!1!==f.options.showTitle?h:"","\n        </div>\n        ")}},{key:"initPlayer",value:function(){var e,t,n,r=this,i=this.getValue();if(i){var o=Object(d.ib)(this.onBeforeRender("query",i.url)),a=document.createElement("video");a.preload="metadata",a.setAttribute("src",o),a.setAttribute("webkit-playsinline","webkit-playsinline"),a.setAttribute("playsinline","playsinline");var s=i.cover;s&&(a.poster=Object(d.ib)(this.onBeforeRender("cover",s))),this.maxWidth=this.getMaxWidth();var l=null===(e=this.container)||void 0===e?void 0:e.find(".data-video-content");if(l){l.append(a),this.mask=Object(d.a)('<div class="data-video-mask" />'),l.append(this.mask),this.videoContainer=null===(t=this.container)||void 0===t?void 0:t.find(".data-video-content"),a.oncontextmenu=function(){return!1};var c=this.editor.plugin.findPlugin("video"),u=null===c||void 0===c?void 0:c.options.fullEditor,h=this.editor;a.onloadedmetadata=function(){i.naturalWidth&&i.naturalHeight||(i.naturalWidth=a.videoWidth,i.naturalHeight=a.videoHeight,r.setValue({naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight})),u&&r._fullWidth&&(i.naturalWidth<r._fullWidth||"number"===typeof u)?("boolean"===typeof u?(r.rate=a.videoHeight/a.videoWidth,u=r._fullWidth*r.rate):r.rate=u/r._fullWidth,r._naturalSize={width:r._fullWidth,height:u}):(r._naturalSize={width:i.naturalWidth||a.videoWidth,height:i.naturalHeight||a.videoHeight},r.rate=r._naturalSize.height/r._naturalSize.width),r.resetSize()},this.video=Object(d.a)(a),this.title=null===(n=this.container)||void 0===n?void 0:n.find(".data-video-title"),i.width&&i.height&&(this.rate=i.height/i.width),this._naturalSize={width:i.naturalWidth||a.videoWidth,height:i.naturalHeight||a.videoHeight},this.resetSize(),setTimeout((function(){a.controls=!0,Object(d.X)(h)||(a.controlsList="nodownload")}),0)}}}},{key:"toolbar",value:function(){var e,t=this,n=this.editor,r=function(){var e=[],r=t.getValue();if(!r)return e;var i=r.status,o=r.download,a=t.getLocales();return"done"===i&&(o&&e.push({key:"dropdown",type:"button",content:'<span class="data-icon data-icon-download" />',title:a.download,onClick:t.downloadFile}),Object(d.X)(n)&&!n.readonly&&(e.push({key:"copy",type:"copy"}),e.push({key:"separator",type:"separator"}))),Object(d.X)(n)&&!n.readonly&&e.push({key:"delete",type:"delete"}),e},i=null===(e=n.plugin.findPlugin("video"))||void 0===e?void 0:e.options;return(null===i||void 0===i?void 0:i.cardToolbars)?i.cardToolbars(r()):r()}},{key:"setProgressPercent",value:function(e){var t;null===(t=this.container)||void 0===t||t.find(".percent").html("".concat(e,"%")),this.setValue({percent:e})}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCenter(),t=this.editor.block.closest(e).get();return t?t.clientWidth:0}},{key:"resetSize",value:function(){var e,t,n;if(this.videoContainer){var r=this.getValue();if(r){this.videoContainer.css({width:"",height:""}),null===(e=this.container)||void 0===e||e.css({width:""});var i=this.editor.plugin.findPlugin("video"),o=null===i||void 0===i?void 0:i.options.fullEditor;if(null===(t=this.video)||void 0===t?void 0:t.get()){var a=r.width,s=r.height;s?a?a&&s?s=Math.round(this.rate*a):(a=this._naturalSize.width,s=this._naturalSize.height):(s=this._naturalSize.height,a=Math.round(s/this.rate)):(a=this._naturalSize.width,s=Math.round(this.rate*a)),a>this.maxWidth&&(a=this.maxWidth,s=Math.round(a*this.rate)),0!==a&&0!==s&&(null===(n=this.container)||void 0===n||n.css({width:a>0?"".concat(a,"px"):""}),this.videoContainer.css("width",a>0?"".concat(a,"px"):""),"number"===typeof o&&this.videoContainer.css("height",s>0?"".concat(s,"px"):""))}}}}},{key:"changeSize",value:function(e,t){var n,r,i;e<24&&(t=(e=24)*this.rate),e>this.maxWidth&&(t=(e=this.maxWidth)*this.rate),t<24&&(e=(t=24)/this.rate),e=Math.round(e),t=Math.round(t),null===(n=this.videoContainer)||void 0===n||n.css({width:e>0?"".concat(e,"px"):""});var o,a=this.editor.plugin.findPlugin("video");"number"===typeof(null===a||void 0===a?void 0:a.options.fullEditor)&&(null===(o=this.videoContainer)||void 0===o||o.css({height:"".concat(t,"px")}));null===(r=this.container)||void 0===r||r.css({width:e>0?"".concat(e,"px"):""}),this.setValue({width:e,height:t}),null===(i=this.resizer)||void 0===i||i.destroy(),this.initResizer()}},{key:"initResizer",value:function(){var e,t=this,n=this.getValue();if(n&&"done"===n.status){var r=n.width,i=n.height,o=n.cover;this.maxWidth=this.getMaxWidth();var a=new d.z({imgUrl:o,width:r||this._naturalSize.width,height:i||this._naturalSize.height,rate:this.rate,maxWidth:this.maxWidth,onChange:function(e){var n=e.width,r=e.height;return t.changeSize(n,r)}});this.resizer=a;var s=a.render();null===(e=this.videoContainer)||void 0===e||e.append(s)}}},{key:"onActivate",value:function(e){var t,r,i,o,a;(Object(h.a)(Object(p.a)(n.prototype),"onActivate",this).call(this,e),e)?(null===(t=this.container)||void 0===t||t.addClass("data-video-active"),null===(r=this.mask)||void 0===r||r.hide(),this.initResizer()):(null===(i=this.container)||void 0===i||i.removeClass("data-video-active"),null===(o=this.mask)||void 0===o||o.show(),null===(a=this.resizer)||void 0===a||a.destroy())}},{key:"onSelectByOther",value:function(e,t){var n;null===(n=this.container)||void 0===n||n.css("outline",e?"2px solid "+t.color:"");var r="card-selected-other";return e?this.root.addClass(r):this.root.removeClass(r),this.container}},{key:"checker",value:function(e,t,n){var r=this.editor.command;!function i(){r.executeMethod("video-uploader","query",e,(function(e){e&&"done"!==e.status?setTimeout(i,3e3):t(e)}),(function(e){n(e)}))}()}},{key:"render",value:function(){var e=this,t=this.getValue(),n=this.getCenter(),r=this.editor;if(this._fullWidth=r.container.width()-Object(d.hb)(r.container.css("padding-left"))-Object(d.hb)(r.container.css("padding-right")),!t||this.container&&this.container.inEditor())return this.container=Object(d.a)(this.renderTemplate(Object(u.a)({},t))),n.empty(),n.append(this.container),void this.initPlayer();n.empty();var i=r.command,o=r.plugin,a=t.video_id,s=t.status,l=this.getLocales();if(this.maxWidth=this.getMaxWidth(),Object(d.X)(r)){if("transcoding"===s){if(this.container=Object(d.a)(this.renderTemplate(t)),!a)throw"video id is undefined";return this.checker(a,(function(r){var i=Object(u.a)(Object(u.a)({},t),{},{url:(null===r||void 0===r?void 0:r.url)?r.url:t.url,name:(null===r||void 0===r?void 0:r.name)?r.name:t.name,cover:(null===r||void 0===r?void 0:r.cover)?r.cover:t.cover,download:(null===r||void 0===r?void 0:r.download)?r.download:t.download,status:"done"});e.setValue(i),e.container=Object(d.a)(e.renderTemplate(i)),n.empty(),n.append(e.container),e.initPlayer()}),(function(r){var i=Object(u.a)(Object(u.a)({},t),{},{status:"error",message:r||l.loadError});e.setValue(i),e.container=Object(d.a)(e.renderTemplate(i)),n.empty(),n.append(e.container)})),this.container}return"done"===s?(this.container=Object(d.a)(this.renderTemplate(Object(u.a)(Object(u.a)({},t),{},{status:void 0}))),i.executeMethod("video-uploader","query",a,(function(r){var i=Object(u.a)(Object(u.a)({},t),{},{url:(null===r||void 0===r?void 0:r.url)?r.url:t.url,name:(null===r||void 0===r?void 0:r.name)?r.name:t.name,cover:(null===r||void 0===r?void 0:r.cover)?r.cover:t.cover,download:(null===r||void 0===r?void 0:r.download)?r.download:t.download});e.container=Object(d.a)(e.renderTemplate(i)),e.video=e.container.find("video"),n.empty(),n.append(e.container),e.initPlayer()}),(function(r){e.container=Object(d.a)(e.renderTemplate(Object(u.a)(Object(u.a)({},t),{},{status:"error",message:r||l.loadError}))),n.empty(),n.append(e.container)})),this.container):(this.container=Object(d.a)(this.renderTemplate(t)),this.container)}if("done"===s){this.container=Object(d.a)(this.renderTemplate(Object(u.a)(Object(u.a)({},t),{},{status:void 0})));var c=function(r){var i=Object(u.a)(Object(u.a)({},t),{},{url:(null===r||void 0===r?void 0:r.url)?r.url:t.url,name:(null===r||void 0===r?void 0:r.name)?r.name:t.name,cover:(null===r||void 0===r?void 0:r.cover)?r.cover:t.cover,download:(null===r||void 0===r?void 0:r.download)?r.download:t.download});e.container=Object(d.a)(e.renderTemplate(i)),n.empty(),n.append(e.container),e.initPlayer()};return o.components["video-uploader"]?i.executeMethod("video-uploader","query",a,(function(e){c(e)}),(function(r){e.container=Object(d.a)(e.renderTemplate(Object(u.a)(Object(u.a)({},t),{},{status:"error",message:r||l.loadError}))),n.empty(),n.append(e.container)})):c(),this.container}return"error"===s?Object(d.a)(this.renderTemplate(Object(u.a)(Object(u.a)({},t),{},{message:t.message||l.loadError}))):void 0}},{key:"didUpdate",value:function(){var e;Object(h.a)(Object(p.a)(n.prototype),"didUpdate",this).call(this),null===(e=this.toolbarModel)||void 0===e||e.setDefaultAlign("top")}},{key:"didRender",value:function(){var e,t;Object(h.a)(Object(p.a)(n.prototype),"didRender",this).call(this),this.onWindowResize();var r,i=this.editor;(window.addEventListener("resize",this.onWindowResize),i.on("editor:resize",this.onWindowResize),null===(e=this.toolbarModel)||void 0===e||e.setDefaultAlign("top"),null===(t=this.container)||void 0===t||t.on("mousedown",this.handleClick),!Object(d.X)(i)||i.readonly)&&(null===(r=this.mask)||void 0===r||r.hide())}},{key:"destroy",value:function(){var e;Object(h.a)(Object(p.a)(n.prototype),"destroy",this).call(this),null===(e=this.container)||void 0===e||e.off("mousedown",this.handleClick),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"video"}},{key:"cardType",get:function(){return d.i.BLOCK}},{key:"autoSelected",get:function(){return!1}}]),n}(d.g),g="drop:files",m="paste:event",b="paste:each",y=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).cardComponents={},e.extensionNames={mp4:"video/mp4"},e.dropFiles=function(t){var n=e.editor;if(Object(d.X)(n)&&0!==(t=t.filter((function(t){return e.isVideo(t)}))).length)return n.command.execute("video-uploader",t),!1},e.pasteFiles=function(t){var n=t.files,r=e.editor;if(Object(d.X)(r)&&0!==(n=n.filter((function(t){return e.isVideo(t)}))).length)return r.command.execute("video-uploader",n.filter((function(t){return e.isVideo(t)})),n),!1},e.pasteEach=function(e){if(e.isCard()&&e.attributes(d.x)){if("video"!==e.attributes(d.x))return;var t=Object(d.L)(e.attributes(d.f));return t&&t.url?void("uploading"===t.status&&(t.percent=0,e.attributes(d.f,Object(d.N)(Object(u.a)(Object(u.a)({},t),{},{status:"done"}))))):void e.remove()}},e}return Object(s.a)(n,[{key:"init",value:function(){var e=this.editor;Object(d.X)(e)&&(e.on(g,this.dropFiles),e.on(m,this.pasteFiles),e.on(b,this.pasteEach));var t=(this.options.file||{}).accept;if("string"===typeof t&&(t=t.split(",")),Array.isArray(t)){var n=[];(t||[]).forEach((function(e){var t=(e=e.trim()).split(".").pop();t&&n.push(t)})),n.length>0&&(this.extensionNames=n)}else"object"===Object(f.a)(t)&&(this.extensionNames=t)}},{key:"isVideo",value:function(e){var t=Object(d.S)(e),n=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return n.indexOf("*")>=0||n.indexOf(t)>=0}},{key:"execute",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,s,l,c,h,p,f,v,g,m,b,y,w,k,x=this,O=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}e.t0=t,e.next="query"===e.t0?4:5;break;case 4:return e.abrupt("return",this.query(O.length<=1?void 0:O[1],O.length<=2?void 0:O[2],O.length<=3?void 0:O[3]));case 5:return e.abrupt("return");case 6:if(n=this.editor,r=n.request,o=n.card,a=n.language,s=this.options,l=s.action,c=s.data,h=s.type,p=s.contentType,f=s.multiple,v=s.crossOrigin,g=s.withCredentials,m=s.headers,b=s.name,y=this.options.parse,w=this.options.limitSize||5242880,Array.isArray(t)){e.next=16;break}return k=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),e.next=15,r.getFiles({event:t,accept:d.W?"video/*":k.length>0?k:"",multiple:f});case 15:t=e.sent;case 16:if(0!==t.length){e.next=18;break}return e.abrupt("return");case 18:return r.upload({url:l,data:c,type:h,contentType:p,crossOrigin:v,withCredentials:g,headers:m,onBefore:function(e){return!(e.size>w)||(n.messageError("upload-limit",a.get("video","uploadLimitError").toString().replace("$size",(w/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(d.X)(n)&&!x.cardComponents[e.uid]){var t=o.insert("video",{status:"uploading",name:e.name,size:e.size});x.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,r=x.cardComponents[e.uid||""];r&&r.setProgressPercent(n)},onSuccess:function(e,t){var r=x.cardComponents[t.uid||""];if(r){var i=e.id||e.data&&e.data.id,s=e.url||e.data&&e.data.url,l=e.cover||e.data&&e.data.cover,c=e.download||e.data&&e.data.download,d=e.width||e.data&&e.data.width,h=e.height||e.data&&e.data.height,p=e.status||e.data&&e.data.status,f={result:!0,data:{video_id:i,url:s,cover:l,download:c,status:p="transcoding"===p?"transcoding":"done",width:d,height:h}};if(y){var v=y(e);if(v.result){var g=f.data;"string"===typeof v.data?f.data=Object(u.a)(Object(u.a)({},g),{},{url:v.data}):(g.url=v.data.url,void 0!==v.data.status&&(g=Object(u.a)(Object(u.a)({},g),{},{status:v.data.status})),void 0!==v.data.id&&(g=Object(u.a)(Object(u.a)({},g),{},{video_id:v.data.id})),void 0!==v.data.cover&&(g=Object(u.a)(Object(u.a)({},g),{},{cover:v.data.cover})),void 0!==v.data.width&&(g=Object(u.a)(Object(u.a)({},g),{},{width:v.data.width})),void 0!==v.data.height&&(g=Object(u.a)(Object(u.a)({},g),{},{height:v.data.height})),f.data=Object(u.a)({},g))}else f={result:!1,data:v.data.toString()}}else s||(f={result:!1,data:e.data});f.result?n.card.update(r.id,"string"===typeof f.data?{url:f.data}:Object(u.a)(Object(u.a)({},f.data),{},{naturalWidth:f.data.width,naturalHeight:f.data.height})):o.update(r.id,{status:"error",message:"string"===typeof f.data?f.data:a.get("video","uploadError")}),delete x.cardComponents[t.uid||""]}},onError:function(e,t){var n=x.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||a.get("video","uploadError")}),delete x.cardComponents[t.uid||""])}},t,b),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.editor,a=r.request,s=r.language,l=this.options,c=l.query,d=l.parse;if(!c||!e)return t();var h=c.action,p=c.type,f=c.contentType,v=c.data,g=c.headers;a.ajax({url:h,contentType:f||"",type:void 0===p?"json":p,headers:g,data:"function"===typeof v?Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return n=t.sent,t.abrupt("return",Object(u.a)(Object(u.a)({},n),{},{id:e}));case 4:case"end":return t.stop()}}),t)}))):Object(u.a)(Object(u.a)({},v),{},{id:e}),success:function(e){var r=e.result,i=e.data;if(r){var o=d?d(e):e;!1===o.result?n(o.data||s.get("video","loadError")):t(Object(u.a)(Object(u.a)({},o.data),{},{status:"transcoding"!==o.data.status?"done":"transcoding"}))}else n(i)},error:function(e){n(e.message||s.get("video","loadError"))},method:"GET"})}},{key:"destroy",value:function(){var e=this.editor;e.off(g,this.dropFiles),e.off(m,this.pasteFiles),e.off(b,this.pasteEach)}}],[{key:"pluginName",get:function(){return"video-uploader"}}]),n}(d.v),w={"en-US":{video:{errorMessageCopy:"Copy error message",loadError:"The video failed to load!",uploadError:"The video failed to upload!",uploadLimitError:"Upload video size is limited to $size",download:"Download",preview:"Preview",loading:"Loading...",transcoding:"Transcoding..."}},"zh-CN":{video:{errorMessageCopy:"\u590d\u5236\u9519\u8bef\u4fe1\u606f",loadError:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff01",uploadError:"\u4e0a\u4f20\u89c6\u9891\u5931\u8d25\uff01",uploadLimitError:"\u4e0a\u4f20\u89c6\u9891\u5927\u5c0f\u9650\u5236\u4e3a $size",download:"\u4e0b\u8f7d",preview:"\u9884\u89c8",loading:"\u52a0\u8f7d\u4e2d...",transcoding:"\u8f6c\u7801\u4e2d..."}}},k="parse:html",x="paste:each",O="paste:schema",C=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).pasteSchema=function(e){e.add({type:"block",name:"div",attributes:{"data-value":"*","data-type":{required:!0,value:v.cardName}}})},e.pasteHtml=function(t){var n=e.editor;if(Object(d.X)(n)){if(t.isElement())if(t.attributes("data-type")===v.cardName){var r=t.attributes("data-value"),i=Object(d.L)(r);if(!i.url)return;return n.card.replaceNode(t,v.cardName,i),t.remove(),!1}return!0}},e.parseHtml=function(t,n){var r=[];return t.find("[".concat(d.c,'="').concat(v.cardName,'"],[').concat(d.x,'="').concat(v.cardName,'"]')).each((function(t){var i=Object(d.a)(t),o=e.editor.card.find(i),a=(null===o||void 0===o?void 0:o.getValue())||Object(d.L)(i.attributes(d.f));if((null===a||void 0===a?void 0:a.url)&&"done"===a.status){var s=e.options.onBeforeRender,l=a.cover,c=a.url,u='<div data-type="'.concat(v.cardName,'"  data-value="').concat(Object(d.N)(a),'"><video controls src="').concat(Object(d.ib)(s?s("query",c):c),'" poster="').concat(l?Object(d.ib)(s?s("cover",l):l):"none",'" webkit-playsinline="webkit-playsinline" playsinline="playsinline" style="outline:none;" /></div>');i.empty();var h=Object(d.a)(u);n&&(h=n(h,a)),i.replaceWith(h),r.push(h)}else i.remove()})),r},e}return Object(s.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(w),e.on(k,this.parseHtml),e.on(x,this.pasteHtml),e.on(O,this.pasteSchema)}},{key:"execute",value:function(e,t,n,r,i,o,a,s,l,c,d){var u={status:e,video_id:r,cover:i,url:t,name:n||t,size:o,download:a,width:c,height:d,naturalWidth:s,naturalHeight:l};"error"===e&&(u.url="",u.message=t),this.editor.card.insert("video",u)}},{key:"waiting",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,s,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.editor.card,r=function(e){var t;return e.root.inEditor()&&e.name===v.cardName&&"uploading"===(null===(t=e.getValue())||void 0===t?void 0:t.status)},a=function(){return n.components.find(r)},s=function(e){var n=6e4;return new Promise((function(i,o){if(t){var a=t(l.constructor.pluginName,e);if(!1===a)return o({name:l.constructor.pluginName,card:e});"number"===typeof a&&(n=a)}var s=(new Date).getTime(),c=(new Date).getTime();!function t(){if(c-s>=n)return i();setTimeout((function(){r(e)?t():i()}),10)}()}))},e.abrupt("return",new Promise(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),o=function e(r){s(r).then((function(){var n=a();n?e(n):t()})).catch(n)},r?o(r):t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this.editor;e.off(k,this.parseHtml),e.off(x,this.pasteHtml),e.off(O,this.pasteSchema)}}],[{key:"pluginName",get:function(){return"video"}}]),n}(d.v);t.c=C},2507:function(e,t,n){var r=new(n(2819));e.exports=r},2513:function(e,t,n){"use strict";e.exports=n(2618)},2514:function(e,t,n){"use strict";e.exports.encode=n(2619),e.exports.decode=n(2620),e.exports.format=n(2621),e.exports.parse=n(2622)},2515:function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},2516:function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},2517:function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},2518:function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",o=new RegExp("^(?:"+r+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),a=new RegExp("^(?:"+r+"|"+i+")");e.exports.HTML_TAG_RE=o,e.exports.HTML_OPEN_CLOSE_TAG_RE=a},2519:function(e,t,n){"use strict";function r(e,t){var n,r,i,o,a,s=[],l=t.length;for(n=0;n<l;n++)126===(i=t[n]).marker&&-1!==i.end&&(o=t[i.end],(a=e.tokens[i.token]).type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",(a=e.tokens[o.token]).type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="","text"===e.tokens[o.token-1].type&&"~"===e.tokens[o.token-1].content&&s.push(o.token-1));for(;s.length;){for(r=(n=s.pop())+1;r<e.tokens.length&&"s_close"===e.tokens[r].type;)r++;n!==--r&&(a=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=a)}}e.exports.tokenize=function(e,t){var n,r,i,o,a=e.pos,s=e.src.charCodeAt(a);if(t)return!1;if(126!==s)return!1;if(i=(r=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(s),i<2)return!1;for(i%2&&(e.push("text","",0).content=o,i--),n=0;n<i;n+=2)e.push("text","",0).content=o+o,e.delimiters.push({marker:s,length:0,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},2520:function(e,t,n){"use strict";function r(e,t){var n,r,i,o,a,s;for(n=t.length-1;n>=0;n--)95!==(r=t[n]).marker&&42!==r.marker||-1!==r.end&&(i=t[r.end],s=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===i.token+1,a=String.fromCharCode(r.marker),(o=e.tokens[r.token]).type=s?"strong_open":"em_open",o.tag=s?"strong":"em",o.nesting=1,o.markup=s?a+a:a,o.content="",(o=e.tokens[i.token]).type=s?"strong_close":"em_close",o.tag=s?"strong":"em",o.nesting=-1,o.markup=s?a+a:a,o.content="",s&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}e.exports.tokenize=function(e,t){var n,r,i=e.pos,o=e.src.charCodeAt(i);if(t)return!1;if(95!==o&&42!==o)return!1;for(r=e.scanDelims(e.pos,42===o),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(o),e.delimiters.push({marker:o,length:r.length,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(r(e,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&r(e,n[t].delimiters)}},2521:function(e,t,n){e.exports={type:n(2673)}},2522:function(e,t){e.exports=function(e,t,n,r){var i=e.transformX=function(e,o){n(e),n(o);for(var a,s,l,c=[],d=0;d<o.length;d++){for(var u=o[d],h=[],p=0;p<e.length;){var f=[];if(a=e[p],l=f,t(h,a,s=u,"left"),t(l,s,a,"right"),p++,1!==f.length){if(0===f.length){for(var v=p;v<e.length;v++)r(h,e[v]);u=null;break}for(var g=i(e.slice(p),f),m=0;m<g[0].length;m++)r(h,g[0][m]);for(var b=0;b<g[1].length;b++)r(c,g[1][b]);u=null;break}u=f[0]}null!=u&&r(c,u),e=h}return[e,c]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?i(e,n)[0]:i(n,e)[1]}}},2523:function(e,t,n){var r=n(126);e.exports=function(e){return e===e&&!r(e)}},2524:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},2525:function(e,t,n){var r=n(533),i=n(536)((function(e,t,n){r(e,t,n)}));e.exports=i},2526:function(e,t,n){(function(t){var n="__lodash_hash_undefined__",r=1/0,i="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,c=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,v=p||f||Function("return this")();var g=Array.prototype,m=Function.prototype,b=Object.prototype,y=v["__core-js_shared__"],w=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),k=m.toString,x=b.hasOwnProperty,O=b.toString,C=RegExp("^"+k.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=v.Symbol,j=g.splice,M=B(v,"Map"),N=B(Object,"create"),S=E?E.prototype:void 0,T=S?S.toString:void 0;function _(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function D(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!==n&&r!==r)return i;return-1}function z(e,t){var n;t=function(e,t){if(q(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||W(e))return!0;return l.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:q(n=t)?n:P(n);for(var r=0,i=t.length;null!=e&&r<i;)e=e[F(t[r++])];return r&&r==i?e:void 0}function L(e){if(!U(e)||(t=e,w&&w in t))return!1;var t,n=function(e){var t=U(e)?O.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?C:h;return n.test(function(e){if(null!=e){try{return k.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function R(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return L(n)?n:void 0}_.prototype.clear=function(){this.__data__=N?N(null):{}},_.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},_.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===n?void 0:r}return x.call(t,e)?t[e]:void 0},_.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:x.call(t,e)},_.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?n:t,this},A.prototype.clear=function(){this.__data__=[]},A.prototype.delete=function(e){var t=this.__data__,n=D(t,e);return!(n<0)&&(n==t.length-1?t.pop():j.call(t,n,1),!0)},A.prototype.get=function(e){var t=this.__data__,n=D(t,e);return n<0?void 0:t[n][1]},A.prototype.has=function(e){return D(this.__data__,e)>-1},A.prototype.set=function(e,t){var n=this.__data__,r=D(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},I.prototype.clear=function(){this.__data__={hash:new _,map:new(M||A),string:new _}},I.prototype.delete=function(e){return R(this,e).delete(e)},I.prototype.get=function(e){return R(this,e).get(e)},I.prototype.has=function(e){return R(this,e).has(e)},I.prototype.set=function(e,t){return R(this,e).set(e,t),this};var P=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(W(e))return T?T.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}(t);var n=[];return c.test(e)&&n.push(""),e.replace(d,(function(e,t,r,i){n.push(r?i.replace(u,"$1"):t||e)})),n}));function F(e){if("string"==typeof e||W(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(H.Cache||I),n}H.Cache=I;var q=Array.isArray;function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function W(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&O.call(e)==a}e.exports=function(e,t,n){var r=null==e?void 0:z(e,t);return void 0===r?n:r}}).call(this,n(73))},2535:function(e,t,n){"use strict";function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,"a",(function(){return r}))},2541:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=n(2),c=n(24),d=n(116),u=n(63),h=n(2474),p=n(2475);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".data-embed-form {\n    position: relative;\n    border-radius: 2px;\n    border: 1px solid #e8e8e8;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 8px;\n}\n\n.data-embed-icon {\n   flex: 1 0;\n}\n\n.data-embed-editor {\n   flex: 1 0;\n}\n\n.data-embed-input {\n    border: 0;\n    height: 32px;\n    line-height: 32px;\n    font-size: 14px;\n    outline: none;\n    width: 100%;\n}\n\n.data-embed-button {\n   margin-left: 12px;\n}\n\n.data-embed-ui-button {\n    line-height: 1.499;\n    display: inline-block;\n    font-weight: 400;\n    text-align: center;\n    cursor: pointer;\n    white-space: nowrap;\n    padding: 0 15px;\n    font-size: 14px;\n    border-radius: 4px;\n    height: 30px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    transition: all .3s cubic-bezier(.645,.045,.355,1);\n    position: relative;\n    box-shadow: 0 2px 0 rgba(0,0,0,.015);\n    color: rgba(0,0,0,.65);\n    background-color: #fff;\n    color: #fff;\n    background-color: #347eff;\n    border: 1px solid #347eff;\n    text-shadow: 0 -1px 0 rgba(0,0,0,.12);\n    outline: 0\n}\n\n.data-embed-ui-button:hover {\n    background-color: #466fb6;\n    border-color: #466fb6\n}\n\n.data-embed-collapse, .data-embed-header {\n    background: #fafafa;\n    position: relative;\n    border-radius: 2px;\n    border: 1px solid #e8e8e8;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 8px;\n}\n\n.data-embed-collapse a, .data-embed-header a {\n    color: rgba(0,0,0,.65);\n}\n\n.data-embed-collapse a:hover, .data-embed-header a:hover {\n    color: #347eff;\n}\n\n.data-embed-title {\n    flex: 1 0;\n    margin: 0 8px;\n}\n\n.data-embed .data-embed-spin {\n    display: inline-block;\n    -webkit-animation: loadingCircle 1s infinite linear;\n    animation: loadingCircle 1s infinite linear;\n}\n.data-embed .data-embed-mask {\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 100%;\n    z-index: 3;\n    display: block;\n    transition: all .3s cubic-bezier(.3,1.2,.2,1)\n}\n\n.data-embed .data-embed-mask:hover {\n    cursor: pointer\n}\n\n.data-embed-content-bg {\n    width: 80px;\n    height: 80px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -40px;\n    margin-left: -40px;\n    text-align: center;\n    line-height: 80px;\n    color: #666;\n    font-size: 36px;\n    z-index: 1;\n    visibility: visible;\n    opacity: 1;\n    transition: all .3s linear;\n    -webkit-animation: loading .8s linear infinite;\n            animation: loading .8s linear infinite\n}\n\n.data-embed-header {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.data-embed-body {\n    border: 1px solid #e8e8e8;\n    border-top: 0;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.data-embed-body iframe {\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    position: relative;\n    z-index: 2;\n}");var f=Object(p.a)("mask"),v=Object(p.a)("iframe"),g=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e,i;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),p=0;p<o;p++)a[p]=arguments[p];return(i=t.call.apply(t,[this].concat(a))).renderBefore=void 0,Object.defineProperty(Object(c.a)(i),f,{writable:!0,value:void 0}),Object.defineProperty(Object(c.a)(i),v,{writable:!0,value:void 0}),i.resize=function(){var e,t=i.getValue();if(null===t||void 0===t?void 0:t.isResize)return null===(e=Object(h.a)(Object(c.a)(i),v)[v])||void 0===e?void 0:e.parent()},i.handleSubmit=function(){var t,r=i.editor,o=r.language.get("embed"),a=i.getCenter(),h=Object(s.ib)((null===(t=a.find('[data-role="url"]').get())||void 0===t?void 0:t.value)||"");if(h){var p={url:h,title:h,ico:'<span class="data-icon data-icon-website"></span>',isResize:!0};if(i.renderBefore){var f=i.renderBefore(h);p=Object(l.a)(Object(l.a)({},p),f)}i.setValue(p),i.render(),Object(d.a)((e=Object(c.a)(i),Object(u.a)(n.prototype)),"didRender",e).call(e)}else r.messageError("embed",o.addressInvalid)},i}return Object(i.a)(n,[{key:"onActivate",value:function(e){var t,r;Object(d.a)(Object(u.a)(n.prototype),"onActivate",this).call(this,e),e?null===(t=Object(h.a)(this,f)[f])||void 0===t||t.hide():Object(s.X)(this.editor)&&(null===(r=Object(h.a)(this,f)[f])||void 0===r||r.show())}},{key:"collapse",value:function(){var e=this.getValue();(null===e||void 0===e?void 0:e.collapsed)||(this.setValue({collapsed:!0}),this.render(),Object(d.a)(Object(u.a)(n.prototype),"didRender",this).call(this))}},{key:"expand",value:function(){var e=this.getValue();(null===e||void 0===e?void 0:e.collapsed)&&(this.setValue({collapsed:!1}),this.render(),Object(d.a)(Object(u.a)(n.prototype),"didRender",this).call(this))}},{key:"toolbar",value:function(){var e,t=this,n=this.editor,r=function(){if(Object(s.X)(n)){var e=[],r=t.getValue();return(null===r||void 0===r?void 0:r.url)&&e.push({key:"expand",type:"button",content:'<span class="data-icon data-icon-expand" />',title:n.language.get("embed","expand"),onClick:function(){return t.expand()}},{key:"collapse",type:"button",content:'<span class="data-icon data-icon-compact-display" />',title:n.language.get("embed","collapse"),onClick:function(){return t.collapse()}}),n.readonly||e.unshift({key:"dnd",type:"dnd"},{key:"copy",type:"copy"},{key:"delete",type:"delete"},{key:"separator",type:"separator"}),e}return[]},i=null===(e=n.plugin.findPlugin("embed"))||void 0===e?void 0:e.options;return(null===i||void 0===i?void 0:i.cardToolbars)?i.cardToolbars(r()):r()}},{key:"handleInputKeydown",value:function(e){Object(s.Y)("enter",e)&&this.handleSubmit()}},{key:"renderEdit",value:function(e){var t=this,n=this.editor.language.get("embed"),r=Object(s.a)('<div class="data-embed data-embed-active">\n                <div class="data-embed-form">\n                    <span class="data-embed-editor">\n                        <input data-role="url" placeholder="'.concat(e||n.placeholder,'" spellcheck="false" class="data-embed-input" value="" autocomplete="off"/>\n                    </span>\n                    <span class="data-embed-button">\n                        <button type="button" class="data-embed-ui-button" data-role="submit">\n                            <span>').concat(n.submit,"</span>\n                        </button>\n                    </span>\n                </div>\n            </div>"));return r.find('[data-role="url"]').on("keydown",(function(e){return t.handleInputKeydown(e)})),r.find('[data-role="submit"]').on("click",this.handleSubmit),r}},{key:"renderCollapse",value:function(){var e=this.getValue(),t=(null===e||void 0===e?void 0:e.url)||"",n='<div class="data-embed data-embed-collapse">\n            <span class="data-embed-ico">'.concat(null===e||void 0===e?void 0:e.ico,'</span>\n            <span class="data-embed-title"><a target="_blank" href="').concat(t,'">').concat(Object(s.O)((null===e||void 0===e?void 0:e.title)||""),'</a></span>\n            <a target="_blank" class="data-icon data-icon-preview" href="').concat(t,'" />\n        </div>\n        ');return Object(s.a)(n)}},{key:"renderExpand",value:function(){var e=this.getValue(),t=(null===e||void 0===e?void 0:e.url)||"",n=(null===e||void 0===e?void 0:e.height)||"auto",r=Object(s.a)('\n            <div class="data-embed data-embed-expand">\n                <div class="data-embed-header">\n                    '.concat(null===e||void 0===e?void 0:e.ico,'\n                    <span class="data-embed-title"><a target="_blank" href="').concat(t,'">').concat(Object(s.O)((null===e||void 0===e?void 0:e.title)||""),'</a></span>\n                    <a target="_blank" class="data-icon data-icon-preview" href="').concat(t,'"></a>\n                </div>\n                <div class="data-embed-body" style="height:').concat(n).concat("auto"===n?"":"px",'">\n                    <div class="data-embed-content-bg">\n                        <svg viewBox="0 0 1024 1024" class="data-embed-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>\n                    </div>\n                    <iframe frameborder="0" allowfullscreen="true"></iframe>\n                    <div class="data-embed-mask"></div>\n                </div>\n            </div>\n        ')),i=r.find("iframe");return i.on("load",(function(){r.find(".data-embed-content-bg").hide()})),Object(h.a)(this,f)[f]=r.find(".data-embed-mask"),this.activated&&Object(h.a)(this,f)[f].hide(),(null===e||void 0===e?void 0:e.height)&&i.attributes("data-height",e.height),i.attributes("src",t),Object(h.a)(this,v)[v]=i,r}},{key:"render",value:function(e){this.renderBefore=e;var t=this.getValue(),n=(null===t||void 0===t?void 0:t.url)||"",r=this.getCenter();r.empty(),n&&t?t.collapsed?r.append(this.renderCollapse()):r.append(this.renderExpand()):r.append(this.renderEdit())}}],[{key:"cardName",get:function(){return"embed"}},{key:"cardType",get:function(){return s.i.BLOCK}},{key:"lazyRender",get:function(){return!0}},{key:"singleSelectable",get:function(){return!1}},{key:"autoSelected",get:function(){return!1}}]),n}(s.g),m={"en-US":{embed:{placeholder:"Please paste the link here",submit:"submit",addressInvalid:"Link error, please check and re-enter",validUrl:"Illegal link, can't be embedded",canNotShowCard:"Card cannot be displayed",expand:"Expand",collapse:"Collapse"}},"zh-CN":{embed:{placeholder:"\u8bf7\u5728\u6b64\u7c98\u8d34\u94fe\u63a5",submit:"\u786e\u5b9a",addressInvalid:"\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165",validUrl:"\u975e\u6cd5\u94fe\u63a5\uff0c\u65e0\u6cd5\u5d4c\u5165",canNotShowCard:"Card\u65e0\u6cd5\u5c55\u793a",expand:"\u5d4c\u5165\u9884\u89c8",collapse:"\u7d27\u51d1\u5c55\u793a"}}},b="parse:html",y="paste:schema",w="paste:each",k=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).pasteSchema=function(e){e.add({type:"block",name:"div",attributes:{"data-type":{required:!0,value:g.cardName},"data-value":"*"}})},e.pasteHtml=function(t){var n=e.editor;if(Object(s.X)(n)){if(t.isElement()){var r=t.attributes(),i=r["data-type"];if(i&&i===g.cardName){var o=r["data-value"],a=Object(s.L)(o);if(!a.url)return;return n.card.replaceNode(t,g.cardName,a),t.remove(),!1}}return!0}},e.parseHtml=function(t,n){var r=[];return t.find("[".concat(s.c,'="').concat(g.cardName,'"],[').concat(s.x,'="').concat(g.cardName,'"]')).each((function(t){var i=Object(s.a)(t),o=e.editor.card.find(i),a=(null===o||void 0===o?void 0:o.getValue())||Object(s.L)(i.attributes(s.f));if(a&&a.url){var l=Object(s.a)('<iframe frameborder="0" allowfullscreen="true" style="height: '.concat(null===a||void 0===a?void 0:a.height,'px;width: 100%;margin:0;padding:0;"></iframe>'));i.empty();var c=(null===a||void 0===a?void 0:a.url)||"",d=Object(s.a)('<div style="background: #fafafa;border-bottom-left-radius: 0; border-bottom-right-radius: 0;position: relative;border-radius: 2px;border: 1px solid #e8e8e8;display: flex;justify-content: space-between;align-items: center;padding: 4px 8px;">\n               \t\t<span style="flex: 1 0;;margin: 0 8px;"><a target="_blank" href="'.concat(c,'">').concat(Object(s.O)(a.title||""),"</a></span>\n                </div>")),u=Object(s.a)('<div data-type="'.concat(g.cardName,'" data-value="').concat(Object(s.N)(a),'"></span>'));l.attributes("src",c),u.append(d);var h=Object(s.a)('<div style="border: 1px solid #e8e8e8; border-top: 0; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px;"></div>');h.append(l),a.collapsed||u.append(h),n&&(u=n(u,a)),i.replaceWith(u),r.push(u)}else i.remove()})),r},e}return Object(i.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(m),e.on(b,this.parseHtml),e.on(y,this.pasteSchema),e.on(w,this.pasteHtml)}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"execute",value:function(){var e=this.options.renderBefore,t=this.editor.card,n=t.insert(g.cardName,{url:(arguments.length<=0?void 0:arguments[0])||"",ico:arguments.length<=1?void 0:arguments[1],title:arguments.length<=2?void 0:arguments[2],collapsed:arguments.length<=3?void 0:arguments[3],isResize:arguments.length<=4?void 0:arguments[4]},e);t.activate(n.root)}},{key:"destroy",value:function(){var e=this.editor;e.off(b,this.parseHtml),e.off(y,this.pasteSchema),e.off(w,this.pasteHtml)}}],[{key:"pluginName",get:function(){return"embed"}}]),n}(s.v);t.b=k},2550:function(e,t,n){!function(t){var n,r={},i={16:!1,18:!1,17:!1,91:!1},o="all",a={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return s[e]||e.toUpperCase().charCodeAt(0)},c=[];for(n=1;n<20;n++)s["f"+n]=111+n;function d(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function u(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(n in i)i[n]=e[h[n]]}function f(e,t,n){var i,o;i=g(e),void 0===n&&(n=t,t="all");for(var a=0;a<i.length;a++)o=[],(e=i[a].split("+")).length>1&&(o=m(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in r||(r[e]=[]),r[e].push({shortcut:i[a],scope:t,method:n,key:i[a],mods:o})}for(n in a)f[n]=!1;function v(){return o||"all"}function g(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function m(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=a[t[n]];return t}function b(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}b(document,"keydown",(function(e){!function(e){var t,n,o,s,l,u;if(t=e.keyCode,-1==d(c,t)&&c.push(t),93!=t&&224!=t||(t=91),t in i)for(o in i[t]=!0,a)a[o]==t&&(f[o]=!0);else if(p(e),f.filter.call(this,e)&&t in r)for(u=v(),s=0;s<r[t].length;s++)if((n=r[t][s]).scope==u||"all"==n.scope){for(o in l=n.mods.length>0,i)(!i[o]&&d(n.mods,+o)>-1||i[o]&&-1==d(n.mods,+o))&&(l=!1);(0!=n.mods.length||i[16]||i[18]||i[17]||i[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),b(document,"keyup",(function(e){var t,n=e.keyCode,r=d(c,n);if(r>=0&&c.splice(r,1),93!=n&&224!=n||(n=91),n in i)for(t in i[n]=!1,a)a[t]==n&&(f[t]=!1)})),b(window,"focus",(function(){for(n in i)i[n]=!1;for(n in a)f[n]=!1}));var y=t.key;t.key=f,t.key.setScope=function(e){o=e||"all"},t.key.getScope=v,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=d(c,e)},t.key.getPressedKeyCodes=function(){return c.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=y,e},t.key.unbind=function(e,t){var n,i,o,a,s,c=[];for(n=g(e),a=0;a<n.length;a++){if((i=n[a].split("+")).length>1&&(c=m(i),e=i[i.length-1]),e=l(e),void 0===t&&(t=v()),!r[e])return;for(o=0;o<r[e].length;o++)(s=r[e][o]).scope===t&&u(s.mods,c)&&(r[e][o]={})}},e.exports=f}(this)},2553:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d=function(){function e(){Object(r.a)(this,e),this.headingTags={h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0}}return Object(i.a)(e,[{key:"getHeadings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.headingTags;Object(c.cb)(e)||(e=Object(c.a)(e));var n=e.children();if(!n)return[];var r=[];return n.each((function(e){t[e.nodeName.toLowerCase()]&&r.push(e)})),r}},{key:"getText",value:function(e){var t=Object(c.V)(e,(function(e){return!e.getAttribute(c.c)})),n="";return t.forEach((function(e){n+=e.textContent})),n}},{key:"normalize",value:function(e){var t=this;if(0===(e=e||[]).length)return[];var n=[];e.forEach((function(e){var r=(t.getText(e)||"").trim(),i=e.id||e[c.l];r&&i&&n.push({id:i,text:r,level:parseInt(e.tagName.substr(1)),depth:-1,node:e})}));var r=[];n.forEach((function(e){r.indexOf(e.level)<0&&r.push(e.level)})),r.sort();var i={};return r.forEach((function(e,t){i[e]=t+1})),n.forEach((function(e){e.depth=i[e.level]})),n}},{key:"getFromDom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.headingTags;try{var n=this.getHeadings(e,t);return this.normalize(n)}catch(r){return[]}}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".data-anchor-button {\r\n\tposition: absolute;\r\n\twidth: 24px;\r\n\theight: 24px;\r\n\tline-height: 24px;\r\n\ttext-align: center;\r\n\tfont-size: 14px;\r\n\tdisplay: block;\r\n\tbackground: rgba(255, 255, 255, 0.9);\r\n\tcolor: #BFBFBF;\r\n\tborder-radius: 2px 2px;\r\n\tcursor: pointer;\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n\topacity: 0;\r\n\tvisibility: hidden;\r\n\t-webkit-transition: opacity 0.3s ease-in-out;\r\n\ttransition: opacity 0.3s ease-in-out;\r\n}\r\n\r\n.data-anchor-button.data-anchor-button-active {\r\n\topacity: 1;\r\n\tvisibility: visible;\r\n}\r\n\r\n.data-anchor-button .data-icon {\r\n\twidth: 18px;\r\n}\r\n\r\n.data-anchor-button:hover {\r\n\tbackground: #f4f4f4;\r\n\tcolor: #595959;\r\n}\r\n\r\n.am-engine-view h1,.am-engine-view h2,.am-engine-view h3,.am-engine-view h4,.am-engine-view h5,.am-engine-view h6 {\r\n    position: relative;\r\n}\r\n\r\n.am-engine-view h1 .data-anchor-button,.am-engine-view h2 .data-anchor-button,.am-engine-view h3 .data-anchor-button,.am-engine-view h4 .data-anchor-button,.am-engine-view h5 .data-anchor-button,.am-engine-view h6 .data-anchor-button{\r\n    position: absolute;\r\n    left: -24px;\r\n    display: none;\r\n}\r\n\r\n.am-engine-view h1:hover .data-anchor-button,.am-engine-view h2:hover .data-anchor-button,.am-engine-view h3:hover .data-anchor-button,.am-engine-view h4:hover .data-anchor-button,.am-engine-view h5:hover .data-anchor-button,.am-engine-view h6:hover .data-anchor-button {\r\n    display: inline-block;\r\n    opacity: 1;\r\n    visibility: visible;\r\n}\r\n\r\n.am-engine-view h1 , .am-engine h1,.am-engine-view h2 , .am-engine h2,.am-engine-view h3 , .am-engine h3,.am-engine-view h4 , .am-engine h4,.am-engine-view h5 , .am-engine h5,.am-engine-view h6 , .am-engine h6 {\r\n    margin: 0;\r\n    word-spacing: 1px;\r\n    color: #262626;\r\n    font-weight: bold;\r\n    padding:0;\r\n}\r\n\r\n.am-engine-view h1 , .am-engine h1 {\r\n    font-size: 28px;\r\n    line-height: 36px;\r\n    padding: 7px 0;\r\n}\r\n\r\n.am-engine-view h2 , .am-engine h2 {\r\n    font-size: 24px;\r\n    line-height: 32px;\r\n    padding: 7px 0;\r\n}\r\n\r\n.am-engine-view h3 , .am-engine h3 {\r\n    font-size: 20px;\r\n    line-height: 28px;\r\n    padding: 7px 0;\r\n}\r\n\r\n.am-engine-view h4 , .am-engine h4 {\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    padding: 7px 0;\r\n}\r\n\r\n.am-engine-view h5 , .am-engine h5 {\r\n    font-size: 14px;\r\n    line-height: 24px;\r\n    padding: 7px 0;\r\n}\r\n\r\n.am-engine-view h6 , .am-engine h6 {\r\n    font-size: 14px;\r\n    line-height: 24px;\r\n    padding: 7px 0;\r\n    font-weight: normal;\r\n}");var u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).attributes={id:"@var0"},e.variable={"@var0":/^[\w\.\-]+$/},e.tagName=["h1","h2","h3","h4","h5","h6"].filter((function(t){return!e.options.enableTypes||e.options.enableTypes.indexOf(t)>-1})),e.allowIn=["blockquote","$root"],e.disableMark=e.options.disableMark||["fontsize","bold"],e.onRender=function(t){var n=e.editor,r=n.language,i=Object(c.a)(t);0!==e.tagName.length&&i.find(e.tagName.join(",")).each((function(t){var i=Object(c.a)(t),o=i.attributes("id");if(o){i.find(".data-anchor-button").remove(),c.E.hide();var a=Object(c.a)('<a class="data-anchor-button" '.concat(c.k,'="').concat(c.F,'"><span class="data-icon data-icon-').concat(i.name,'"></span></a>'));24!==i.height()&&a.css({top:(i.height()-24)/2+"px"}),a.on("mouseenter",(function(){c.E.show(a,r.get("copyAnchor","title").toString())})),a.on("mouseleave",(function(){c.E.hide()})),a.on("click",(function(t){t.preventDefault(),t.stopPropagation();var i=e.options.anchorCopy?e.options.anchorCopy(o):window.location.href+"/"+o;n.clipboard.copy(i)?n.messageSuccess("copy",r.get("copy","success").toString()):n.messageError("copy",r.get("copy","error").toString())})),i.prepend(a)}}))},e.updateId=function(){0!==e.tagName.length&&e.editor.container.find(e.tagName.join(",")).each((function(e){var t,n=Object(c.a)(e);if(null===(t=n.parent())||void 0===t?void 0:t.isEditable()){var r=n.attributes("id");(!r||Object(c.a)('[id="'.concat(r,'"]')).length>1)&&(r=n.attributes(c.l)||Object(c.U)(n),n.attributes("id",r))}else n.removeAttributes("id")}))},e.realtimeChange=function(){e.updateId(),e.showAnchor()},e.updateAnchorPosition=function(){var t,n=e.editor;if(Object(c.X)(n)){var r=n.change,i=n.root,o=i.find(".data-anchor-button");if(0!==o.length){var a=r.range.get().startNode.closest("h1,h2,h3,h4,h5,h6");if(0===a.length)return o.remove(),void c.E.hide();var s=(null===(t=i.get())||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0},l=a.get().getBoundingClientRect(),d=Math.round(l.left-s.left-o.get().clientWidth-1),u=Math.round(l.top-s.top+l.height/2-o.get().clientHeight/2);o.css({top:"".concat(u,"px"),left:"".concat(d,"px")})}}},e.showAnchor=function(){var t,n,r=e.editor;if(Object(c.X)(r)&&0!==e.tagName.length){var i=r.change,o=r.root,a=r.clipboard,s=r.language,l=r.card,d=i.range.get(),u=o.find(".data-anchor-button"),h=d.startNode.closest(e.tagName.join(","));if((0===h.length||u.length>0&&0===u.find(".data-icon-".concat(h.name)).length||!r.isFocus())&&(u.remove(),c.E.hide()),0!==h.length&&!l.closest(h,!0)&&r.isFocus()&&(null===(t=h.parent())||void 0===t?void 0:t.isEditable()))if(u.find(".data-icon-".concat(h.name)).length>0)e.updateAnchorPosition();else{u=Object(c.a)('<span class="data-anchor-button" '.concat(c.k,'="').concat(c.F,'"><span class="data-icon data-icon-').concat(h.name,'"></span></span>')),o.append(u);var p=(null===(n=o.get())||void 0===n?void 0:n.getBoundingClientRect())||{left:0,top:0},f=h.get().getBoundingClientRect(),v=Math.round(f.left-p.left-u.get().clientWidth-1),g=Math.round(f.top-p.top+f.height/2-u.get().clientHeight/2);u.css({top:"".concat(g,"px"),left:"".concat(v,"px")}),u.addClass("data-anchor-button-active"),u.on("mouseenter",(function(){c.E.show(u,s.get("copyAnchor","title").toString())})),u.on("mouseleave",(function(){c.E.hide()})),u.on("click",(function(t){t.preventDefault(),t.stopPropagation();var n=h.attributes("id"),i=e.options.anchorCopy?e.options.anchorCopy(n):window.location.href+"/"+n;a.copy(i)?r.messageSuccess("copy",s.get("copy","success").toString()):r.messageError("copy",s.get("copy","error").toString())}))}}},e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("heading")},e.onBackspace=function(t){var n,r=e.editor;if(Object(c.X)(r)){var i=r.change,o=r.node,a=i.range.get();if(a.collapsed){var s=r.block;if(s.isFirstOffset(a,"start")){var l=s.closest(a.startNode);if(e.tagName.indexOf(l.name)>-1&&o.isEmptyWithTrim(l)&&(null===(n=l.parent())||void 0===n?void 0:n.isEditable()))return t.preventDefault(),s.setBlocks("<p />"),!1;var d=l.parent();return!(e.tagName.indexOf(l.name)>-1)||d&&o.isBlock(d)?void 0:(t.preventDefault(),i.mergeAfterDelete(l),!1)}}}},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;if(Object(c.X)(e))e.on("keydown:backspace",this.onBackspace),e.on("markdown-it",this.markdownIt),e.on("setValue",this.updateId),e.on("realtimeChange",this.realtimeChange),e.on("select",this.showAnchor),e.on("blur",this.showAnchor),window.addEventListener("resize",this.updateAnchorPosition);else{if(!1===this.options.showAnchor)return;e.on("render",this.onRender)}}},{key:"execute",value:function(e){var t=this.editor;if(Object(c.X)(t)){e&&e!==this.queryState()||(e="p");var n=this.options.enableTypes;if(!("p"!==e&&n&&n.indexOf(e)<0)){var r=t.list,i=t.block;r.split(),i.setBlocks("<".concat(e," />"))}}}},{key:"queryState",value:function(){var e=this.editor;if(Object(c.X)(e)){var t=e.change.blocks;return 0===t.length?"":this.tagName.find((function(e){return t.some((function(t){return t.name===e}))}))||""}}},{key:"hotkey",value:function(){var e,t,n,r,i,o,a=(null===(e=this.options.hotkey)||void 0===e?void 0:e.h1)||"mod+opt+1",s=(null===(t=this.options.hotkey)||void 0===t?void 0:t.h2)||"mod+opt+2",l=(null===(n=this.options.hotkey)||void 0===n?void 0:n.h3)||"mod+opt+3",c=(null===(r=this.options.hotkey)||void 0===r?void 0:r.h4)||"mod+opt+4",d=(null===(i=this.options.hotkey)||void 0===i?void 0:i.h5)||"mod+opt+5",u=(null===(o=this.options.hotkey)||void 0===o?void 0:o.h6)||"mod+opt+6",h=this.options.enableTypes;return[{key:a,args:"h1"},{key:s,args:"h2"},{key:l,args:"h3"},{key:c,args:"h4"},{key:d,args:"h5"},{key:u,args:"h6"}].filter((function(e){return!h||h.indexOf(e.key)>-1}))}},{key:"destroy",value:function(){var e=this.editor;Object(c.X)(e)?(e.off("keydown:backspace",this.onBackspace),e.off("markdown-it",this.markdownIt),e.off("setValue",this.updateId),e.off("realtimeChange",this.realtimeChange),e.off("select",this.showAnchor),e.off("blur",this.showAnchor),window.removeEventListener("resize",this.updateAnchorPosition)):e.off("render",this.onRender)}}],[{key:"pluginName",get:function(){return"heading"}}]),n}(c.b);t.b=u},2556:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=n(116),c=n(63);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".am-engine .card-hr,.am-engine-view .card-hr {\r\n    border: 1px solid transparent;\r\n    padding: 18px 0;\r\n    border-radius: 2px 2px;\r\n}\r\n\r\n.am-engine .card-hr hr,.am-engine-view .card-hr hr {\r\n    box-sizing: border-box;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 0;\r\n    margin-top: -1px;\r\n    width: 100%;\r\n    height: 2px;\r\n    background-color: #e8e8e8;\r\n    padding: 0;\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.am-engine .card-hr:hover , .am-engine .card-hr.hr-activated {\r\n    background-color: #f4f4f4;\r\n}");var d=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"toolbar",value:function(){var e,t=this.editor,n=function(){return!Object(s.X)(t)||t.readonly?[]:[{key:"dnd",type:"dnd"},{key:"copy",type:"copy"},{key:"delete",type:"delete"}]},r=null===(e=t.plugin.findPlugin("hr"))||void 0===e?void 0:e.options;return(null===r||void 0===r?void 0:r.cardToolbars)?r.cardToolbars(n()):n()}},{key:"onActivate",value:function(e){Object(l.a)(Object(c.a)(n.prototype),"onActivate",this).call(this,e);var t="hr-activated",r=this.getCenter();e?r.addClass(t):r.removeClass(t)}},{key:"onSelectByOther",value:function(e,t){Object(l.a)(Object(c.a)(n.prototype),"onSelectByOther",this).call(this,e,t),this.getCenter().find("hr").css("background-color",e?t.rgb:"")}},{key:"onActivateByOther",value:function(e,t){this.onSelectByOther(e,t)}},{key:"render",value:function(){return this.getCenter().addClass("card-hr"),"<hr />"}}],[{key:"cardName",get:function(){return"hr"}},{key:"cardType",get:function(){return s.i.BLOCK}},{key:"autoActivate",get:function(){return!1}},{key:"selectStyleType",get:function(){return s.B.BACKGROUND}}]),n}(s.g),u="parse:html",h="paste:schema",p="paste:each",f="markdown-it",v=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).markdownIt=function(t){!1!==e.options.markdown&&t.enable("hr")},e.pasteSchema=function(e){e.add([{type:"block",name:"hr",isVoid:!0}])},e.pasteHtml=function(t){var n=e.editor;if(Object(s.X)(n))return"hr"!==t.name||(n.card.replaceNode(t,d.cardName),!1)},e.parseHtml=function(t,n){var r=[];return t.find("[".concat(s.c,"=").concat(d.cardName,"]")).each((function(t){var i=Object(s.a)(t),o=i.find("hr");if(o.css({"background-color":"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),n){var a=e.editor.card.find(i),l=(null===a||void 0===a?void 0:a.getValue())||Object(s.L)(i.attributes(s.f));o=n(o,l)}i.replaceWith(o),r.push(o)})),r},e}return Object(i.a)(n,[{key:"init",value:function(){var e=this.editor;e.on(u,this.parseHtml),e.on(h,this.pasteSchema),e.on(p,this.pasteHtml),Object(s.X)(e)&&e.on(f,this.markdownIt)}},{key:"execute",value:function(){var e=this.editor;Object(s.X)(e)&&e.card.insert(d.cardName)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+e"}},{key:"destroy",value:function(){var e=this.editor;e.off(u,this.parseHtml),e.off(h,this.pasteSchema),e.off(p,this.pasteHtml),Object(s.X)(e)&&e.off(f,this.markdownIt)}}],[{key:"pluginName",get:function(){return"hr"}}]),n}(s.v);t.b=v},2564:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(2484),i=n.n(r),o=n(2),a=n(18),s=n(15),l=n(16),c=n(24),d=n(19),u=n(21),h=n(2474),p=n(2475),f=n(2470),v=n(116),g=n(63),m=n(243),b=n.n(m),y=function(e){return e.language.get("math")},w=function(){function e(t,n){Object(s.a)(this,e),this.editor=void 0,this.options=void 0,this.container=void 0,this.editor=t,this.options=n}return Object(l.a)(e,[{key:"focus",value:function(){var e,t;null===(e=this.container)||void 0===e||null===(t=e.find("textarea").get())||void 0===t||t.focus()}},{key:"render",value:function(e,t){this.destroy(),this.container=Object(f.a)('<div class="data-card-math-editor'.concat(f.ab?" data-card-math-editor-mobile":"",'" ').concat(f.k,'="').concat(f.F,'" ').concat(f.D,'="').concat(e,'"></div>'));var n=y(this.editor),r=this.options,i=r.onBlur,o=r.onFocus,a=r.onChange,s=r.onOk,l=r.tips,c=Object(f.a)("<textarea>".concat(t||"","</textarea>"));c.on("focus",(function(){o&&o()})),c.on("blur",(function(){i&&i()})),c.on("input",(function(e){a&&a(e.target.value)})),c.on("mousedown",(function(){var e;null===(e=c.get())||void 0===e||e.focus()})),c.on("keydown",(function(e){s&&Object(f.Y)("mod+enter",e)&&s(e)})),this.container.append(c);var d=Object(f.a)('<div class="data-math-editor-toolbar"></div>');l&&d.append(Object(f.a)('<div class="data-math-editor-toolbar-tips">'.concat(l,"</div>")));var u=Object(f.a)('<div class="data-math-editor-toolbar-button"><a class="data-embed-toolbar-btn">'.concat(n.ok,"</div>")),h=u.find("a");return h.on("mouseenter",(function(){f.E.show(h,n.buttonTips)})),h.on("mouseleave",(function(){f.E.hide()})),h.on("mousedown",(function(){f.E.hide()})),s&&h.on("click",s),d.append(u),this.container.append(d),this.container}},{key:"destroy",value:function(){var e;null===(e=this.container)||void 0===e||e.remove();var t=this.options.onDestroy;t&&t()}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('\r\n.am-engine .data-math-content-tmp,\r\n.am-engine-view .data-math-content-tmp {\r\n    padding: 0 6px;\r\n    border-radius: 3px 3px;\r\n    height: 100%;\r\n    color: rgba(0, 0, 0, 0.25);\r\n    display: inline-block;\r\n    white-space:nowrap;\r\n  }\r\n  .am-engine span[data-card-key="math"]:not(.card-selected) .data-math-content-tmp {\r\n    background: #f5f5f5;\r\n  }\r\n  .am-engine-view span[data-card-key="math"] .data-math-content-tmp {\r\n    background: #f5f5f5;\r\n  }\r\n\r\n.am-engine span[data-card-key="math"] [data-card-element="center"] {\r\n    max-width: calc(100% - 2px);\r\n}\r\n  .am-engine span[data-card-key="math"] .data-math-container {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    border: 2px solid transparent; \r\n  }\r\n  .am-engine span[data-card-key="math"] ::-moz-selection {\r\n    background: transparent !important;\r\n}\r\n  .am-engine span[data-card-key="math"] ::selection {\r\n    background: transparent !important;\r\n}\r\n .data-card-math-editor {\r\n    outline: none;\r\n    width: 420px;\r\n    border-radius: 3px 3px;\r\n    position: absolute;\r\n    border: 1px solid #e8e8e8;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r\n    z-index: 125;\r\n    text-indent: 0;\r\n  }\r\n.data-card-math-editor-mobile {\r\n    width: calc(100vw - 40px);\r\n}\r\n  .data-card-math-editor textarea {\r\n    width: 100%;\r\n    border: none;\r\n    min-width: 400px;\r\n    min-height: 88px;\r\n    padding: 6px 6px;\r\n    line-height: 24px;\r\n    color: #595959;\r\n    outline: none;\r\n    font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\r\n    vertical-align: bottom;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n  }\r\n\r\n  .data-card-math-editor-mobile textarea{\r\n    min-width:auto;\r\n  }\r\n  .data-card-math-editor .data-math-editor-toolbar {\r\n    position: relative;\r\n    background: #f9f9f9;\r\n    border-top: 1px solid #e8e8e8;\r\n    padding: 2px 8px;\r\n    text-align: left;\r\n    text-indent: 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips a {\r\n    font-size: 12px;\r\n    color: #8c8c8c;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips a:hover {\r\n      color: #595959;\r\n  }\r\n\r\n  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips .data-icon {\r\n    vertical-align: middle;\r\n    margin-right: 4px;\r\n    color: #8c8c8c;\r\n  }\r\n  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-button .data-embed-toolbar-btn {\r\n    font-size: 14px;\r\n    display: block;\r\n  }\r\n\r\n  .am-engine span[data-card-key="math"].card-selected [data-card-element="center"].data-card-border-selected {\r\n    outline: none;\r\n  }\r\n\r\n  .am-engine span[data-card-key="math"] .data-card-border-selected .data-math-container {\r\n    border: 2px solid #1890FF;\r\n    border-radius: 4px;\r\n}');var k=Object(p.a)("position"),x=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object.defineProperty(Object(c.a)(e),k,{writable:!0,value:void 0}),e.container=void 0,e.editorContainer=void 0,e.mathEditor=void 0,e.isSaving=!1,e.queryMath=b()((function(t){return e.renderMath(t)}),300),e.onWindowResize=function(){e.updateMaxWidth()},e.updateMaxWidth=function(){var t,n,r=e.getMaxWidth();null===(t=e.container)||void 0===t||null===(n=t.find("img"))||void 0===n||n.css("max-width",Math.max(r,0)+"px")},e}return Object(l.a)(n,[{key:"init",value:function(){var e=this;Object(v.a)(Object(g.a)(n.prototype),"init",this).call(this);var t=this.editor,r=y(t).tips,i=t.card;Object(h.a)(this,k)[k]||(Object(h.a)(this,k)[k]=new f.w(t)),this.mathEditor||(this.mathEditor=new w(t,{tips:'<a class="tips-text" href="'.concat(r.href,'" target="_blank"><span class="data-icon data-icon-question-circle-o"></span>').concat(r.text,"</a>"),onFocus:function(){var t;null===(t=e.editorContainer)||void 0===t||t.addClass("textarea-focus")},onBlur:function(){var t;null===(t=e.editorContainer)||void 0===t||t.removeClass("textarea-focus")},onChange:this.queryMath,onOk:function(t){t.stopPropagation(),t.preventDefault(),i.activate(Object(f.a)(document.body)),i.focus(e)},onDestroy:function(){var t;null===(t=Object(h.a)(e,k)[k])||void 0===t||t.destroy()}}))}},{key:"query",value:function(e,t,n){this.editor.command.executeMethod("math","action","query",this.id,e,t,n)}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,t=this.editor,n=t.block.closest(e).get();if(!n)return 0;var r=window.getComputedStyle(n),i=parseInt(r.width)-parseInt(r["padding-left"])-parseInt(r["padding-right"]);return Object(f.X)(t)?i-2:i}},{key:"focusTextarea",value:function(){var e;null===(e=this.mathEditor)||void 0===e||e.focus()}},{key:"onActivate",value:function(e){var t,r=this.editor;Object(v.a)(Object(g.a)(n.prototype),"onActivate",this).call(this,e),Object(f.X)(r)&&!r.readonly&&(e?this.renderEditor():null===(t=this.mathEditor)||void 0===t||t.destroy())}},{key:"toolbar",value:function(){var e,t=null===(e=this.editor.plugin.findPlugin("math"))||void 0===e?void 0:e.options;return(null===t||void 0===t?void 0:t.cardToolbars)?t.cardToolbars([]):[]}},{key:"renderPureText",value:function(e){var t,n,r=this.getMaxWidth();null===(t=this.container)||void 0===t||t.html('<span class="data-math-content-tmp" style="max-width: '.concat(r,'px">').concat(e,"</span>")),null===(n=Object(h.a)(this,k)[k])||void 0===n||n.update()}},{key:"renderMath",value:function(e){var t=this;this.isSaving=!0,this.query(e,(function(n){var r=new Image;r.src=n,r.onload=function(){var e,n;t.renderImage(Object(f.a)(r)),null===(e=t.container)||void 0===e||e.empty(),null===(n=t.container)||void 0===n||n.append(r)},t.setValue({url:n,code:e}),t.isSaving=!1}),(function(){t.renderPureText(e),t.setValue({url:"",code:e}),t.isSaving=!1}))}},{key:"renderImage",value:function(e){var t,n=this.getMaxWidth(),r=e.get(),i=r.naturalWidth,o=r.naturalHeight,a=parseInt("".concat(14/17.4*i)),s=parseInt("".concat(14/17.4*o));e.css("width","".concat(a,"px")),e.css("height","".concat(s,"px")),e.css("max-width","".concat(n,"px")),null===(t=Object(h.a)(this,k)[k])||void 0===t||t.update()}},{key:"renderView",value:function(){var e=this,t=this.editor,n=this.getValue(),r=y(t),i=n||{url:"",code:""},o=i.url,a=i.code;if(this.container||(this.container=Object(f.a)('<span class="data-math-container"></span>'),this.getCenter().empty().append(this.container)),o){var s=this.container.find("img");0===s.length?(s=Object(f.a)('<img src="'.concat(o,'" />')),this.container.empty().append(s)):s.attributes("src",o),s.on("load",(function(){e.renderImage(s)})),s.on("error",(function(){e.renderMath(a)}))}else a?Object(f.X)(t)?this.renderMath(a):this.renderPureText(a):this.renderPureText(r.placeholder);Object(f.X)(t)&&!t.readonly||(this.container.css("cursor","pointer"),this.container.attributes("draggable","true"),this.container.css("user-select","none"))}},{key:"renderEditor",value:function(){var e;if(this.mathEditor){var t=this.getValue();t&&t.id&&(this.editorContainer=this.mathEditor.render(t.id,t.code),this.container&&(null===(e=Object(h.a)(this,k)[k])||void 0===e||e.bind(this.editorContainer,this.container)))}}},{key:"render",value:function(){this.renderView()}},{key:"didRender",value:function(){Object(v.a)(Object(g.a)(n.prototype),"didRender",this).call(this),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e;Object(v.a)(Object(g.a)(n.prototype),"destroy",this).call(this),null===(e=this.mathEditor)||void 0===e||e.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"math"}},{key:"cardType",get:function(){return f.i.INLINE}},{key:"autoSelected",get:function(){return!1}}]),n}(f.g),O={"en-US":{math:{errorMessageCopy:"Copy error message",getError:"Failed to get svg code",placeholder:"Add Tex formula",ok:"Ok",buttonTips:"".concat(f.Z?"\u2318":"Ctrl"," + Enter"),tips:{text:"Understand LaTeX syntax",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference"}}},"zh-CN":{math:{errorMessageCopy:"\u590d\u5236\u9519\u8bef\u4fe1\u606f",getError:"\u83b7\u53d6svg\u4ee3\u7801\u5931\u8d25",placeholder:"\u6dfb\u52a0 Tex \u516c\u5f0f",ok:"\u786e\u5b9a",buttonTips:"".concat(f.Z?"\u2318":"Ctrl"," + Enter"),tips:{text:"\u4e86\u89e3 LaTeX \u8bed\u6cd5",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference"}}}},C="parse:html",E="paste:schema",j="paste:each",M=Object(p.a)("request"),N=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Object.defineProperty(Object(c.a)(e),M,{writable:!0,value:{}}),e.pasteSchema=function(e){e.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:x.cardName},"data-value":"*"}})},e.pasteHtml=function(t){var n=e.editor;if(Object(f.X)(n)){if(t.isElement()){var r=t.attributes(),i=r["data-type"];if(i&&i===x.cardName){var o=r["data-value"],a=Object(f.L)(o);if(!a.url)return;return n.card.replaceNode(t,x.cardName,a),t.remove(),!1}}return!0}},e.parseHtml=function(t,n){var r=[];return t.find("[".concat(f.c,'="').concat(x.cardName,'"],[').concat(f.x,'="').concat(x.cardName,'"]')).each((function(t){var i=Object(f.a)(t),o=e.editor.card.find(i),a=(null===o||void 0===o?void 0:o.getValue())||Object(f.L)(i.attributes(f.f));if(a){var s=Object(f.a)("<img />");i.empty(),s.attributes("src",a.url),s.css("visibility","visible"),s.css("vertical-align","middle");var l=Object(f.a)('<span data-type="'.concat(x.cardName,'" data-value="').concat(Object(f.N)(a),'"></span>'));n&&(s=n(s,a)),l.append(s),i.replaceWith(l),r.push(l)}else i.remove()})),r},e}return Object(l.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(O),e.on(C,this.parseHtml),e.on(j,this.pasteHtml),e.on(E,this.pasteSchema)}},{key:"execute",value:function(){var e=this.editor.card,t=e.insert(x.cardName,{code:(arguments.length<=0?void 0:arguments[0])||"",url:(arguments.length<=1?void 0:arguments[1])||""});e.activate(t.root),window.setTimeout((function(){t.focusTextarea()}),10)}},{key:"action",value:function(e){if("query"===e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];return this.query(i,o,a,s)}}},{key:"query",value:function(e,t,n,r){var s,l=this,c=this.editor,d=c.request,u=c.language,p=this.options,f=p.action,v=p.type,g=p.contentType,m=p.parse,b=p.headers,y=this.options.data;null===(s=Object(h.a)(this,M)[M][e])||void 0===s||s.abort(),Object(h.a)(this,M)[M][e]=d.ajax({url:f,method:"POST",contentType:g||"application/json",type:void 0===v?"json":v,headers:b,data:"function"===typeof y?Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return n=e.sent,e.abrupt("return",Object(o.a)(Object(o.a)({},n),{},{content:t}));case 4:case"end":return e.stop()}}),e)}))):Object(o.a)(Object(o.a)({},y),{},{content:t}),success:function(e){var t=e.url||e.data&&e.data.url,i=m?m(e):t?{result:!0,data:t}:{result:!1};if(i.result){var o=0===i.data.indexOf("http")||0===i.data.indexOf("/"),a=i.data;o||(a=((a=l.exConvertToPx(i.data)).indexOf("data:")<0?"data:image/svg+xml,":"")+encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22")),n(a)}else r(i.data)},error:function(e){r(e.message||u.get("image","uploadError"))}})}},{key:"exConvertToPx",value:function(e){var t=/width="([\d\.]+ex)"/.exec(e),n=t?t[1]:null,r=/height="([\d\.]+ex)"/.exec(e),i=r?r[1]:null;if(n){var o=9*parseFloat(n.substring(0,n.length-2));e=e.replace('width="'.concat(n,'"'),'width="'.concat(o,'px"'))}if(i){var a=9*parseFloat(i.substring(0,i.length-2));e=e.replace('height="'.concat(i,'"'),'height="'.concat(a,'px"'))}return e}},{key:"waiting",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,o,s,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.editor.card,r=function(e){return e.root.inEditor()&&e.name===x.cardName&&e.isSaving},o=function(){return n.components.find(r)},s=function(e){var n=6e4;return new Promise((function(i,o){if(t){var a=t(l.constructor.pluginName,e);if(!1===a)return o({name:l.constructor.pluginName,card:e});"number"===typeof a&&(n=a)}var s=(new Date).getTime(),c=(new Date).getTime();!function t(){if(c-s>=n)return i();setTimeout((function(){r(e)?t():i()}),10)}()}))},e.abrupt("return",new Promise(function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o(),a=function e(r){s(r).then((function(){var n=o();n?e(n):t()})).catch(n)},r?a(r):t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this.editor;e.off(C,this.parseHtml),e.off(j,this.pasteHtml),e.off(E,this.pasteSchema)}}],[{key:"pluginName",get:function(){return"math"}}]),n}(f.v);t.b=N},2567:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(2),i=n(23),o=n(15),a=n(16),s=n(19),l=n(21),c=n(2470),d=n(24),u=n(116),h=n(63),p=n(2474),f=n(2475),v=n(2550),g=n.n(v),m=Object(f.a)("position"),b=function(){function e(t,n){var r=this;Object(o.a)(this,e),this.engine=void 0,this.root=void 0,this.target=void 0,this.otpions=void 0,this.SCOPE_NAME="data-mention-component",Object.defineProperty(this,m,{writable:!0,value:void 0}),this.renderEmpty=function(){return'<div class="data-mention-item"><span class="data-mention-item-text">Empty Data</span></div>'},this.getPluginOptions=function(){var e=r.engine.plugin.findPlugin("mention");return null===e||void 0===e?void 0:e.options},this.handlePreventDefault=function(e){var t;if(0!==(null===(t=r.root)||void 0===t?void 0:t.closest("body").length))return e.preventDefault(),!1},this.bindItem=function(e,t){var n=r.otpions.onSelect;e.addClass("data-mention-item");var i=t.key,o=t.name;return i?e.attributes({"data-key":Object(c.O)(i)}):e.removeAttributes("data-key"),e.attributes({"data-name":Object(c.O)(o)}),e.removeAllEvents(),e.on("click",(function(e){i&&(e.stopPropagation(),e.preventDefault(),n&&n(e,t))}),{once:!0}),e.on("mouseenter",(function(){var t;i&&(null===(t=r.root)||void 0===t||t.find(".data-mention-item-active").removeClass("data-mention-item-active"),e.addClass("data-mention-item-active"))})),e},this.otpions=n,this.engine=t,Object(p.a)(this,m)[m]=new c.w(this.engine)}return Object(a.a)(e,[{key:"select",value:function(e){var t,n,r;null===(t=this.root)||void 0===t||t.find(".data-mention-item-active").removeClass("data-mention-item-active"),null===(n=this.root)||void 0===n||null===(r=n.find(".data-mention-item").eq(e))||void 0===r||r.addClass("data-mention-item-active")}},{key:"scroll",value:function(e){var t;if(this.root){var n=this.root.find(".data-mention-item").toArray();if(0!==n.length){var r=n.find((function(e){return e.hasClass("data-mention-item-active")}))||n[0],i=r;for(r="up"===e?r.prev():r.next();r||(r="up"===e?n[n.length-1]:n[0]),!r.attributes("data-key")&&!i.equal(r);)r="up"===e?r.prev():r.next();r&&r.attributes("data-key")?(this.select(n.findIndex((function(e){return e.equal(r)}))),null===(t=r.get())||void 0===t||t.scrollIntoView({block:"nearest"})):this.select(-1)}}}},{key:"unbindEvents",value:function(){var e;Object(v.deleteScope)(this.SCOPE_NAME),Object(v.unbind)("enter",this.SCOPE_NAME),Object(v.unbind)("up",this.SCOPE_NAME),Object(v.unbind)("down",this.SCOPE_NAME),Object(v.unbind)("esc",this.SCOPE_NAME),this.engine.off("keydown:enter",this.handlePreventDefault),null===(e=Object(p.a)(this,m)[m])||void 0===e||e.destroy()}},{key:"bindEvents",value:function(){var e,t=this;this.unbindEvents(),Object(v.setScope)(this.SCOPE_NAME),g()("enter",this.SCOPE_NAME,(function(e){var n,r,i;if(0!==(null===(n=t.root)||void 0===n?void 0:n.closest("body").length)){e.preventDefault(),e.stopImmediatePropagation();var o=null===(r=t.root)||void 0===r?void 0:r.find(".data-mention-item-active");null===o||void 0===o||null===(i=o.get())||void 0===i||i.click()}})),g()("up",this.SCOPE_NAME,(function(e){var n;0!==(null===(n=t.root)||void 0===n?void 0:n.closest("body").length)&&(e.preventDefault(),t.scroll("up"))})),g()("down",this.SCOPE_NAME,(function(e){var n;0!==(null===(n=t.root)||void 0===n?void 0:n.closest("body").length)&&(e.preventDefault(),t.scroll("down"))})),g()("esc",this.SCOPE_NAME,(function(e){e.preventDefault(),t.unbindEvents();var n=t.otpions.onCancel;n&&n()})),this.engine.on("keydown:enter",this.handlePreventDefault),this.root&&this.target&&0!==this.target.length&&(null===(e=Object(p.a)(this,m)[m])||void 0===e||e.bind(this.root,this.target))}},{key:"remove",value:function(){this.root&&0!==this.root.length&&(this.unbindEvents(),this.root.remove(),this.root=void 0)}},{key:"renderTemplate",value:function(e){var t=e.name,n=e.avatar;return'<div class="data-mention-item">\n            '.concat(n?'<span class="data-mention-item-avatar"><img src="'.concat(n,'" /></span>'):"",'\n            <span class="data-mention-item-text">').concat(Object(c.lb)(t),"</span>\n        </div>")}},{key:"getBody",value:function(){var e;return null===(e=this.root)||void 0===e?void 0:e.find(".data-mention-component-body")}},{key:"createRoot",value:function(){this.root=Object(c.a)('<div class="data-mention-component-list" '.concat(c.k,'="').concat(c.F,'"><div class="data-mention-component-body"></div></div>'))}},{key:"renderRootEmpty",value:function(){var e,t,n,r=this.getBody(),i=null===r||void 0===r?void 0:r.children();r&&r.length>0&&(0===(null===i||void 0===i?void 0:i.length)||1===(null===i||void 0===i?void 0:i.length)&&(null===(e=i.eq(0))||void 0===e?void 0:e.hasClass("data-scrollbar")))?null===(t=this.root)||void 0===t||t.addClass("data-mention-component-empty"):null===(n=this.root)||void 0===n||n.removeClass("data-mention-component-empty")}},{key:"render",value:function(e,t){var n=this;if(this.root||this.createRoot(),this.root){this.target=e;var r,i=this.getBody(),o=null,a=this.getPluginOptions();if("boolean"===typeof t&&!0===t)o=(null===a||void 0===a?void 0:a.onLoading)?a.onLoading(this.root):this.engine.trigger("mention:loading",this.root),i=this.getBody(),o&&(null===(r=i)||void 0===r||r.empty().append(o));else if(0===t.filter((function(e){return!!e.key})).length){var s,l=this.engine.trigger("mention:empty",this.root)||((null===a||void 0===a?void 0:a.onEmpty)?null===a||void 0===a?void 0:a.onEmpty(this.root):this.renderEmpty(this.root));i=this.getBody(),l&&(null===(s=i)||void 0===s||s.empty().append(l))}else{if((null===a||void 0===a?void 0:a.onRender)||(o=this.engine.trigger("mention:render",this.root,t,this.bindItem)))return((null===a||void 0===a?void 0:a.onRender)?a.onRender(this.root,t,this.bindItem):o).then((function(e){var t=n.getBody();e&&(null===t||void 0===t||t.empty().append(e)),n.select(0),n.bindEvents()})),void this.renderRootEmpty();var d;i&&0!==i.length||(this.createRoot(),i=this.getBody()),null===(d=i)||void 0===d||d.empty(),t.forEach((function(e){var t,r=n.engine.trigger("mention:render-item",e,n.root),o=r||((null===a||void 0===a?void 0:a.onRenderItem)?a.onRenderItem(e,n.root):n.renderTemplate(e));o&&(null===(t=i)||void 0===t||t.append(n.bindItem(Object(c.a)(o),e)))})),this.select(0)}this.renderRootEmpty(),this.bindEvents()}}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.am-engine .data-mention-component, .am-engine-view .data-mention-component {\n    color: #1890ff !important;\n    cursor: pointer;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    display: inline-block;\n    vertical-align: top;\n}\n\n.am-engine [data-card-key="mention"].card-selected [data-card-element="center"].data-card-border-selected {\n    outline: 0 none;\n}\n\n.am-engine [data-card-key="mention"].card-activated ::-moz-selection {\n    background: transparent !important;\n}\n\n.am-engine [data-card-key="mention"].card-activated ::selection {\n    background: transparent !important;\n}\n\n.data-mention-component-list {\n    position: absolute;\n    font-size: 12px;\n    background: #ffffff;\n    border: 1px solid #e8e8e8;\n    border-radius: 3px 3px;\n    box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n    z-index: 999;\n    overflow: hidden;\n    padding: 5px 0;\n    max-width: 250px;\n}\n\n.data-mention-component-empty {\n    padding: 0;\n    box-shadow: none;\n    border: none;\n}\n\n.data-mention-component-body {\n    max-height: calc(40vh);\n    overflow-y: auto;\n}\n\n.data-mention-component-placeholder {\n    color: rgba(0,0,0,0.25);\n    pointer-events: none;\n    min-width: 78px;\n}\n\n.data-mention-item {\n    display: flex;\n    cursor: pointer;\n    padding: 4px 16px;\n    min-width: 160px;\n    align-items: center;\n}\n\n.data-mention-item .data-mention-item-text {\n    display: block;\n    text-align: left;\n    margin-left: 8px;\n    color: #595959;\n    line-height: 24px;\n    font-size: 14px;\n    font-weight: normal;\n}\n\n.data-mention-item.data-mention-item-active {\n    background-color: #f4f4f4;\n}\n\n.data-mention-item-avatar img {\n    max-width: 38px;\n}\n\n.data-mention-component-body.data-scrollable.scroll-y {\n    padding-right: 0 !important;\n}\n\n.data-mention-hover-layout {\n  position: absolute;\n  font-size: 12px;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 999;\n}\n');var y=["id","key","name","marks","type"],w=["id","key","name"],k=Object(f.a)("container"),x=Object(f.a)("keyword"),O=Object(f.a)("placeholder"),C=Object(f.a)("position"),E=Object(f.a)("showTimeout"),j=Object(f.a)("hideTimeout"),M=Object(f.a)("enterLayout"),N=Object(f.a)("request"),S=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).component=void 0,Object.defineProperty(Object(d.a)(e),k,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),x,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),O,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),C,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),E,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),j,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),M,{writable:!0,value:void 0}),Object.defineProperty(Object(d.a)(e),N,{writable:!0,value:void 0}),e.getMaxWidth=function(){return e.editor.block.closest(e.root).get().clientWidth-4},e.onWindowResize=function(){e.updateMaxWidth()},e.updateMaxWidth=function(){var t,n=e.getMaxWidth();null===(t=Object(p.a)(Object(d.a)(e),k)[k])||void 0===t||t.css("max-width",Math.max(n,0)+"px")},e.getPluginOptions=function(){var t=e.editor.plugin.findPlugin("mention");return null===t||void 0===t?void 0:t.options},e.search=function(t){var n=e.getPluginOptions(),r=e.editor;if(n&&n.onSearch)return n.onSearch(t);var i=r.trigger("mention:search",t);if(void 0!==i)return i;var o=r.request;return new Promise((function(r){if(null===n||void 0===n?void 0:n.action){var i,a=n.type,s=n.contentType,l=n.parse,c=n.headers;null===(i=Object(p.a)(Object(d.a)(e),N)[N])||void 0===i||i.abort(),Object(p.a)(Object(d.a)(e),N)[N]=o.ajax({url:n.action,contentType:s||"",type:void 0===a?"json":a,data:{keyword:t},headers:c,success:function(e){var t=l?l(e):e,n=t.result,i=t.data;n&&r(i)},method:"GET"})}else r([])}))},e.hideEnter=function(){Object(p.a)(Object(d.a)(e),j)[j]=setTimeout((function(){var t,n;null===(t=Object(p.a)(Object(d.a)(e),C)[C])||void 0===t||t.destroy(),null===(n=Object(p.a)(Object(d.a)(e),M)[M])||void 0===n||n.remove()}),200)},e.showEnter=function(){var t=e.getPluginOptions();if(Object(p.a)(Object(d.a)(e),k)[k]&&(null===t||void 0===t?void 0:t.onMouseEnter)){var n=e.getValue();if(null===n||void 0===n?void 0:n.name){n.id;var o=n.key,a=n.name,s=(n.marks,n.type,Object(i.a)(n,y));Object(p.a)(Object(d.a)(e),j)[j]&&clearTimeout(Object(p.a)(Object(d.a)(e),j)[j]),Object(p.a)(Object(d.a)(e),E)[E]&&clearTimeout(Object(p.a)(Object(d.a)(e),E)[E]),Object(p.a)(Object(d.a)(e),M)[M]&&Object(p.a)(Object(d.a)(e),M)[M].length>0||(Object(p.a)(Object(d.a)(e),E)[E]=setTimeout((function(){Object(p.a)(Object(d.a)(e),k)[k]&&(Object(p.a)(Object(d.a)(e),M)[M]=Object(c.a)('<div class="data-mention-hover-layout" '.concat(c.k,'="').concat(c.F,'"></div>')),Object(p.a)(Object(d.a)(e),M)[M].on("mouseenter",(function(){Object(p.a)(Object(d.a)(e),j)[j]&&clearTimeout(Object(p.a)(Object(d.a)(e),j)[j])})),Object(p.a)(Object(d.a)(e),M)[M].on("mouseleave",e.hideEnter),e.editor.trigger("mention:enter",Object(p.a)(Object(d.a)(e),M)[M],Object(r.a)({key:Object(c.lb)(o||""),name:Object(c.lb)(a)},s)),t.onMouseEnter(Object(p.a)(Object(d.a)(e),M)[M],Object(r.a)({key:Object(c.lb)(o||""),name:Object(c.lb)(a)},s)),setTimeout((function(){var t;null===(t=Object(p.a)(Object(d.a)(e),C)[C])||void 0===t||t.bind(Object(p.a)(Object(d.a)(e),M)[M],Object(p.a)(Object(d.a)(e),k)[k])}),10))}),200))}}},e}return Object(a.a)(n,[{key:"init",value:function(){var e=this,t=this.editor;if(Object(p.a)(this,C)[C]||(Object(p.a)(this,C)[C]=new c.w(t)),Object(c.X)(t)&&!c.eb&&(Object(u.a)(Object(h.a)(n.prototype),"init",this).call(this),!this.component)){var i=this.getPluginOptions();this.component=new b(t,{onCancel:function(){e.changeToText()},onSelect:function(o,a){var s,l,d=t.trigger("mention:select",a)||{};delete d.id,(null===i||void 0===i?void 0:i.onSelect)&&delete(d=i.onSelect(a)||{}).id;var u=t.card,h=e.getValue();null===(s=e.component)||void 0===s||s.remove(),e.component=void 0,null===(l=Object(p.a)(e,x)[x])||void 0===l||l.remove(),u.focus(e,!1);var f=u.insert(n.cardName,Object(r.a)(Object(r.a)({},a),{},{marks:h.marks},d));if(u.removeNode(e),t.trigger("mention:insert",f),(null===i||void 0===i?void 0:i.onInsert)&&i.onInsert(f),Object(c.X)(t)){var v=t.change,g=v.range.get().cloneRange();g.setStartAfter(f.root.get()),g.collapse(!0),v.range.select(g)}else u.focus(f,!1)}})}}},{key:"remove",value:function(){var e,t,n=this.editor;Object(c.X)(n)&&(null===(e=this.component)||void 0===e||e.remove(),null===(t=Object(p.a)(this,x)[x])||void 0===t||t.remove(),n.card.remove(this.id))}},{key:"changeToText",value:function(){var e,t,n=this.editor;if(this.root.inEditor()&&Object(c.X)(n)){var r=(null===(e=Object(p.a)(this,x)[x])||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)||"";this.remove(),n.node.insertText(r)}}},{key:"activate",value:function(e){var t;(Object(u.a)(Object(h.a)(n.prototype),"activate",this).call(this,e),!e&&Object(p.a)(this,x)[x]&&Object(p.a)(this,x)[x].length>0)&&(null===(t=this.component)||void 0===t||t.unbindEvents(),this.changeToText())}},{key:"handleInput",value:function(){var e,t,n,r,i=this,o=this.editor;if(Object(c.X)(o)){var a=o.change,s=o.card;if(!a.isComposing()){var l,d=(null===(e=Object(p.a)(this,x)[x])||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText.replace(/[\r\n]/g,""))||"";if(""===d)return null===(l=this.component)||void 0===l||l.remove(),void s.remove(this.id);var u=d.substr(1),h=o.trigger("mention:default")||(null===(n=this.getPluginOptions())||void 0===n?void 0:n.defaultData);if(""===u&&h){var f;null===(f=this.component)||void 0===f||f.render(this.root,h)}else{null===(r=this.component)||void 0===r||r.render(this.root,!0);o.trigger("mention:search",u);this.search(u).then((function(e){var t;null===(t=i.component)||void 0===t||t.render(i.root,e)}))}}}}},{key:"resetPlaceHolder",value:function(){var e,t,n,r;"@"===(null===(e=Object(p.a)(this,x)[x])||void 0===e||null===(t=e.get())||void 0===t?void 0:t.innerText)?null===(n=Object(p.a)(this,O)[O])||void 0===n||n.show():null===(r=Object(p.a)(this,O)[O])||void 0===r||r.hide()}},{key:"executeMark",value:function(e,t){if(Object(p.a)(this,k)[k]){var n=this.editor.mark,r=Object(p.a)(this,k)[k].children();if(e)if(t){r.each((function(t,i){var o=r.eq(i);o&&n.wrapByNode(o,e)}));var i=this.queryMarks().map((function(e){var t;return(null===(t=e.clone().get())||void 0===t?void 0:t.outerHTML)||""}));this.setValue({marks:i})}else{n.unwrapByNodes(this.queryMarks(!1),e);var o=this.queryMarks().map((function(e){var t;return(null===(t=e.get())||void 0===t?void 0:t.outerHTML)||""}));this.setValue({marks:o})}else n.unwrapByNodes(this.queryMarks(!1)),this.setValue({marks:[]})}}},{key:"queryMarks",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(p.a)(this,k)[k]?Object(p.a)(this,k)[k].allChildren().filter((function(t){return t.isElement()&&e.editor.node.isMark(t)})).map((function(e){return t?e.clone():e})):[]}},{key:"toolbar",value:function(){var e,t=null===(e=this.editor.plugin.findPlugin("mention"))||void 0===e?void 0:e.options;return(null===t||void 0===t?void 0:t.cardToolbars)?t.cardToolbars([]):[]}},{key:"render",value:function(){var e=this,t=this.getValue(),n=this.editor;if((null===t||void 0===t?void 0:t.name)&&!Object(p.a)(this,k)[k]){t.id;var o=t.key,a=t.name,s=Object(i.a)(t,w);Object(p.a)(this,k)[k]=Object(c.a)('<span class="data-mention-component">@'.concat(Object(c.lb)(a),"</span>")),(t.marks||[]).forEach((function(t){e.executeMark(Object(c.a)(t),!0)})),Object(p.a)(this,k)[k].on("click",(function(){Object(p.a)(e,k)[k]&&(n.trigger("mention:item-click",Object(p.a)(e,k)[k],Object(r.a)({key:Object(c.lb)(o||""),name:Object(c.lb)(a)},s)),(null===v||void 0===v?void 0:v.itemClick)&&(null===v||void 0===v||v.itemClick(Object(p.a)(e,k)[k],Object(r.a)({key:Object(c.lb)(o||""),name:Object(c.lb)(a)},s))))})),Object(p.a)(this,k)[k].on("mouseenter",this.showEnter),Object(p.a)(this,k)[k].on("mouseleave",this.hideEnter)}else if(Object(p.a)(this,k)[k])return void(t&&(Object(p.a)(this,k)[k].html("@".concat(Object(c.lb)(t.name||""))),((null===t||void 0===t?void 0:t.marks)||[]).forEach((function(t){e.executeMark(Object(c.a)(t),!0)}))));if(!Object(c.X)(n))return Object(p.a)(this,k)[k];var l,d,u,h=n.language.get("mention"),f=void 0,v=this.getPluginOptions();if(Object(p.a)(this,k)[k])return null===(l=this.component)||void 0===l||l.remove(),Object(p.a)(this,k)[k];Object(p.a)(this,k)[k]=Object(c.a)('<span class="data-mention-component-keyword data-mention-component" '.concat(c.j,'="true">@</span><span class="data-mention-component-placeholder">').concat(h.placeholder,"</span>")),Object(p.a)(this,x)[x]=Object(p.a)(this,k)[k].eq(0),Object(p.a)(this,O)[O]=Object(p.a)(this,k)[k].eq(1),null===(d=Object(p.a)(this,x)[x])||void 0===d||d.on("keydown",(function(e){Object(c.Y)("enter",e)&&e.preventDefault()}));var g,m=Date.now();null===(u=Object(p.a)(this,x)[x])||void 0===u||u.on("input",(function(){if(e.resetPlaceHolder(),Date.now()-m<200){var t,n=null===(t=Object(p.a)(e,x)[x])||void 0===t?void 0:t.allChildren().find((function(e){return e.isText()}));if(n&&n.isText()&&"@@"===n[0].nodeValue){var r,i=null===(r=n.get())||void 0===r?void 0:r.splitText(1);null===i||void 0===i||i.remove()}}f&&clearTimeout(f),f=setTimeout((function(){e.handleInput()}),100)})),this.getCenter().append(Object(p.a)(this,k)[k]),setTimeout((function(){if(Object(c.X)(n)){var t,r=n.change.range.get();Object(p.a)(e,x)[x]=null===(t=Object(p.a)(e,k)[k])||void 0===t?void 0:t.eq(0),r.select(Object(p.a)(e,x)[x],!0).collapse(!1);var i=window.getSelection();null===i||void 0===i||i.removeAllRanges(),null===i||void 0===i||i.addRange(r.toRange())}}),10),((null===v||void 0===v?void 0:v.defaultData)?null===v||void 0===v?void 0:v.defaultData:n.trigger("mention:default"))?null===(g=this.component)||void 0===g||g.render(this.root,n.trigger("mention:default")||(null===v||void 0===v?void 0:v.defaultData)||[]):setTimeout((function(){e.handleInput()}),50)}},{key:"didRender",value:function(){Object(u.a)(Object(h.a)(n.prototype),"didRender",this).call(this),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e,t;null===(e=this.component)||void 0===e||e.remove(),null===(t=Object(p.a)(this,C)[C])||void 0===t||t.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"mention"}},{key:"cardType",get:function(){return c.i.INLINE}},{key:"autoSelected",get:function(){return!1}},{key:"selectStyleType",get:function(){return c.B.NONE}}]),n}(c.g),T={"en-US":{mention:{placeholder:"User name"}},"zh-CN":{mention:{placeholder:"\u7528\u6237\u540d"}}},_=["key","name"],A="parse:value",I="parse:html",D="paste:schema",z="paste:each",L="keydown:at",R=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).paserValue=function(e){if(e.isCard()&&e.attributes("name")===S.cardName){var t=e.attributes("value"),n=Object(c.L)(t);if(!n||!n.name)return!1}return!0},e.renderTime=Date.now(),e.onAt=function(t){var n=e.editor;if(Object(c.X)(n)){if(Date.now()-e.renderTime<200)return!1;var r=n.change,i=r.range.get();if(e.options.spaceTrigger){var o=i.createSelection();if(o.anchor){var a=Object(c.a)(o.anchor).prev(),s=a&&a.isText()?a[0].nodeValue:"";if(o.move(),s&&/[^\s@]$/.test(s))return}}if(t.preventDefault(),i.collapsed){t.preventDefault();var l=n.card.insert(S.cardName);l.root.attributes(c.n,"true"),n.card.activate(l.root),i=r.range.get();var d=l.find(".data-mention-component-keyword");i.select(d,!0),i.collapse(!1),r.range.select(i)}return e.renderTime=Date.now(),!1}},e.pasteSchema=function(e){e.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:S.cardName},"data-value":"*"}})},e.pasteHtml=function(t){var n=e.editor;if(Object(c.X)(n)){if(t.isElement()){var r=t.attributes(),i=r["data-type"];if(i&&i===S.cardName){var o=r["data-value"],a=Object(c.L)(o);if(!a.name)return;return n.card.replaceNode(t,S.cardName,a),t.remove(),!1}}return!0}},e.parseHtml=function(t,n){var r=e.editor,i=[];return t.find("[".concat(c.c,'="').concat(S.cardName,'"],[').concat(c.x,'="').concat(S.cardName,'"]')).each((function(e){var t=Object(c.a)(e),o=r.card.find(t),a=(null===o||void 0===o?void 0:o.getValue())||Object(c.L)(t.attributes(c.f));if((null===a||void 0===a?void 0:a.id)&&a.name){var s='<span data-type="'.concat(S.cardName,'" data-value="').concat(Object(c.N)(a),'" style="color:#1890ff"></span>'),l=a.marks||[],d=Object(c.a)("<div>@".concat(a.name,"</div>")).first();l.forEach((function(e){var t=Object(c.a)(e);d=r.node.wrap(d,t)})),t.empty();var u=Object(c.a)(s);u.append(d),n&&(u=n(u,a)),t.replaceWith(u),i.push(u)}else t.remove()})),i},e}return Object(a.a)(n,[{key:"init",value:function(){var e=this.editor;e.on(A,this.paserValue),e.on(I,this.parseHtml),e.on(z,this.pasteHtml),e.on(D,this.pasteSchema),Object(c.X)(e)&&e.on(L,this.onAt),e.language.add(T)}},{key:"getList",value:function(){var e=[];return this.editor.card.each((function(t){if(t.name===S.cardName){var n=t.getValue()||{},o=n.key,a=n.name,s=Object(i.a)(n,_);a&&o&&e.push(Object(r.a)({key:Object(c.lb)(o),name:Object(c.lb)(a)},s))}})),e}},{key:"execute",value:function(){}},{key:"destroy",value:function(){var e=this.editor;e.off(A,this.paserValue),e.off(I,this.parseHtml),e.off(z,this.pasteHtml),e.off(D,this.pasteSchema),Object(c.X)(e)&&e.off(L,this.onAt)}}],[{key:"pluginName",get:function(){return"mention"}}]),n}(c.v);t.b=R},2577:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=n(2),c=n(24),d=n(116),u=n(63),h=n(2474),p=n(2475),f=Object(p.a)("color"),v=Object(p.a)("value"),g=function(){function e(t){Object(r.a)(this,e),this.options=void 0,this.container=void 0,Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),this.options=t}return Object(i.a)(e,[{key:"focus",value:function(){var e,t;null===(e=this.container)||void 0===e||null===(t=e.find("input").get())||void 0===t||t.focus()}},{key:"change",value:function(){var e=this.options.onChange;e&&e(Object(h.a)(this,v)[v],Object(h.a)(this,f)[f])}},{key:"updateActive",value:function(e){var t,n=null===(t=this.container)||void 0===t?void 0:t.find("svg");null===n||void 0===n||n.css("display","none");var r,i=this.options.colors.findIndex((function(t){return t.background===e.background&&t.color===e.color}));i>-1?null===n||void 0===n||null===(r=n.eq(i))||void 0===r||r.css("display","block"):Object(h.a)(this,f)[f]=void 0}},{key:"render",value:function(e,t,n){var r=this;this.destroy(),Object(h.a)(this,v)[v]=t,Object(h.a)(this,f)[f]=n,this.container=Object(s.a)('<div class="data-card-status-editor'.concat(s.ab?" data-card-status-editor-mobile":"",'" ').concat(s.k,'="').concat(s.F,'" ').concat(s.D,'="').concat(e,'"></div>'));var i=this.options,o=i.colors,a=i.onBlur,l=i.onFocus,c=i.onOk,d=Object(s.a)('<input value="'.concat(t,'" />'));d.on("focus",(function(){l&&l()})),d.on("blur",(function(){a&&a()})),d.on("input",(function(e){Object(h.a)(r,v)[v]=e.target.value,r.change()})),d.on(s.ab?"touchstart":"mousedown",(function(e){})),c&&d.on("keydown",(function(e){-1!==[13,27].indexOf(e.keyCode)&&c(e)})),this.container.append(d);var u=Object(s.a)('<div class="data-status-editor-color-panle"></div>');return o.forEach((function(e){var t=Object(s.a)('<span><span style="background-color:'.concat(e.background,'"><svg \n            style="fill: ').concat("#8C8C8C"===e.background.toUpperCase()?"#FFFFFF":"#8C8C8C","; \n            display: ").concat(e.background===n.background&&e.color===n.color?"block":"none",';" \n            viewBox="0 0 18 18"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg></span></span>'));t.on("mousedown",(function(t){t.preventDefault(),Object(h.a)(r,f)[f]=e,r.change()})),u.append(t)})),this.container.append(u),this.container}},{key:"destroy",value:function(){var e;null===(e=this.container)||void 0===e||e.remove();var t=this.options.onDestroy;t&&t()}}]),e}();!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.am-engine [data-card-key="status"].card-selected:not(.card-activated) [data-card-element="center"] .data-label-container::before\r\n{\r\n    content: "";\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #1890FF;\r\n    opacity: 0.2;\r\n    border-radius: 2px;\r\n}\r\n\r\n.am-engine [data-card-key="status"].card-activated ::-moz-selection {\r\n    background: transparent !important;\r\n}\r\n\r\n.am-engine [data-card-key="status"].card-activated ::selection {\r\n    background: transparent !important;\r\n}\r\n\r\n.data-label-container {\r\n    overflow: hidden;\r\n    max-width: 200px;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    cursor: pointer;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n    display: inline-block;\r\n    border-radius: 4px;\r\n    vertical-align: top;\r\n}\r\n\r\n.data-label-container * {\r\n    display: inline-block;\r\n}\r\n\r\n.data-label-container .data-label-background {\r\n    padding: 0 3px;\r\n}\r\n\r\n.data-label-container.data-label-empty {\r\n    opacity: 0.45;\r\n}\r\n\r\n.data-card-status-editor {\r\n    outline: none;\r\n    width: 162px;\r\n    border-radius: 3px 3px;\r\n    position: absolute;\r\n    border: 1px solid #e8e8e8;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r\n    z-index: 125;\r\n    text-indent: 0;\r\n    top:0;\r\n    padding: 8px;\r\n    background: #fff;\r\n}\r\n\r\n.data-card-status-editor-mobile {\r\n    width: calc(100vw - 40px);\r\n}\r\n  \r\n.data-card-status-editor input {\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    font-variant: tabular-nums;\r\n    list-style: none;\r\n    font-feature-settings: "tnum","tnum";\r\n    position: relative;\r\n    display: inline-block;\r\n    width: 100%;\r\n    min-width: 0;\r\n    padding: 4px 11px;\r\n    color: #595959;\r\n    font-size: 14px;\r\n    line-height: 24px;\r\n    background-color: #fff;\r\n    background-image: none;\r\n    border: 1px solid #d9d9d9;\r\n    border-radius: 2px;\r\n    transition: all .3s;\r\n}\r\n\r\n.data-card-status-editor input:focus\r\n{\r\n    border-color: #5c9dff;\r\n    border-right-width: 1px!important;\r\n    outline: 0;\r\n    box-shadow: 0 0 0 2px rgba(52,126,255,.2)\r\n}\r\n\r\n.data-card-status-editor-mobile input{\r\n    min-width:auto;\r\n}\r\n\r\n.data-card-status-editor .data-status-editor-color-panle {\r\n    position: relative;\r\n    text-align: left;\r\n    text-indent: 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    height: auto;\r\n    margin-top: 8px;\r\n}\r\n\r\n.data-status-editor-color-panle > span {\r\n    width: 24px;\r\n    height: 24px;\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    background-color: rgb(255, 255, 255);\r\n    padding: 2px;\r\n    border-radius: 3px;\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: transparent;\r\n    -o-border-image: initial;\r\n       border-image: initial;\r\n    flex: 0 0 auto;\r\n}\r\n\r\n.data-status-editor-color-panle > span > span\r\n{\r\n    position: relative;\r\n    width: 18px;\r\n    height: 18px;\r\n    display: block;\r\n    border-radius: 2px;\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: transparent;\r\n    -o-border-image: initial;\r\n       border-image: initial;\r\n}\r\n\r\n.data-status-editor-color-panle > span > span > svg {\r\n    position: absolute;\r\n    top: -1px;\r\n    left: 1px;\r\n    width: 12px;\r\n    height: 12px;\r\n}');var m=Object(p.a)("position"),b=Object(p.a)("container"),y=Object(p.a)("editorContainer"),w=Object(p.a)("statusEditor"),k=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object.defineProperty(Object(c.a)(e),m,{writable:!0,value:void 0}),e.defaultColors=[{background:"#FFE8E6",color:"#820014"},{background:"#FCFCCA",color:"#614700"},{background:"#E4F7D2",color:"#135200"},{background:"#E9E9E9",color:"#595959"},{background:"#D4EEFC",color:"#003A8C"},{background:"#DEE8FC",color:"#061178"}],Object.defineProperty(Object(c.a)(e),b,{writable:!0,value:void 0}),Object.defineProperty(Object(c.a)(e),y,{writable:!0,value:void 0}),Object.defineProperty(Object(c.a)(e),w,{writable:!0,value:void 0}),e.getMaxWidth=function(){return e.editor.block.closest(e.root).get().clientWidth-4},e.onWindowResize=function(){e.updateMaxWidth()},e.updateMaxWidth=function(){var t=e.getMaxWidth();e.root.find(".data-label-container").css("max-width",Math.max(t,0)+"px")},e}return Object(i.a)(n,[{key:"getColors",value:function(){var e=this.editor.plugin.findPlugin("status");return(null===e||void 0===e?void 0:e.options.colors)||this.defaultColors}},{key:"init",value:function(){var e=this;Object(d.a)(Object(u.a)(n.prototype),"init",this).call(this);var t=this.editor,r=t.card;Object(h.a)(this,m)[m]||(Object(h.a)(this,m)[m]=new s.w(t)),Object(h.a)(this,w)[w]||(Object(h.a)(this,w)[w]=new g({colors:this.getColors(),onChange:function(t,n){n&&e.setColor(n),e.setValue({text:t}),e.updateContent()},onOk:function(t){t.stopPropagation(),t.preventDefault(),r.activate(Object(s.a)(document.body)),r.focus(e)},onDestroy:function(){var t;null===(t=Object(h.a)(e,m)[m])||void 0===t||t.destroy()}}))}},{key:"setColor",value:function(e){var t=this.editor.plugin,n=t.findMarkPlugin("backcolor");if(n){var r=n.createElement(e.background);this.executeMark(r,!0)}var i=t.findMarkPlugin("fontcolor");if(i){var o=i.createElement(e.color);this.executeMark(o,!0)}}},{key:"getColor",value:function(){var e,t,n=this.editor.mark,r=this.queryMarks(),i=(null===(e=r.find((function(e){var t;return"backcolor"===(null===(t=n.findPlugin(e))||void 0===t?void 0:t.name)})))||void 0===e?void 0:e.css("background-color"))||"",o=(null===(t=r.find((function(e){var t;return"fontcolor"===(null===(t=n.findPlugin(e))||void 0===t?void 0:t.name)})))||void 0===t?void 0:t.css("color"))||"";return{background:Object(s.jb)(i),color:Object(s.jb)(o)}}},{key:"updateContent",value:function(){var e=this;if(Object(h.a)(this,b)[b]){var t=this.getValue()||{text:"",marks:[]},n=t.text,r=t.marks;Object(h.a)(this,b)[b].removeClass("data-label-empty"),n||(n=this.editor.language.get("status").defaultValue,Object(h.a)(this,b)[b].addClass("data-label-empty")),Object(h.a)(this,b)[b].html(n);var i=this.getDefaultColor();this.setColor(i),(r||[]).forEach((function(t){e.executeMark(Object(s.a)(t),!0)}))}}},{key:"getDefaultColor",value:function(){var e=this.getColors();return e.length>0?e[0]:{background:"#FFFFFF",color:"#222222"}}},{key:"getSelectionNodes",value:function(){return Object(h.a)(this,b)[b]?[Object(h.a)(this,b)[b]]:[]}},{key:"executeMark",value:function(e,t){var n;if(Object(h.a)(this,b)[b]){var r=this.editor.mark,i=Object(h.a)(this,b)[b].children();if(e)if(t){var o=r.findPlugin(e);"backcolor"===(null===o||void 0===o?void 0:o.name)&&e.addClass("data-label-background"),i.each((function(t,n){var o=i.eq(n);o&&r.wrapByNode(o,e)}));var a=this.queryMarks().map((function(e){var t;return(null===(t=e.clone().get())||void 0===t?void 0:t.outerHTML)||""}));this.setValue({marks:a})}else{var s=r.findPlugin(e);if("backcolor"===(null===s||void 0===s?void 0:s.name))return;r.unwrapByNodes(this.queryMarks(!1),e);var l=this.queryMarks().map((function(e){var t;return(null===(t=e.get())||void 0===t?void 0:t.outerHTML)||""}));this.setValue({marks:l})}else{var c=this.queryMarks(!1),d=!1;r.unwrapByNodes(c.filter((function(e){if(d)return!0;var t=r.findPlugin(e);return"backcolor"!==(null===t||void 0===t?void 0:t.name)||(d=!0,!1)}))),this.setValue({marks:[]})}null===(n=Object(h.a)(this,w)[w])||void 0===n||n.updateActive(this.getColor())}}},{key:"queryMarks",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(h.a)(this,b)[b]?Object(h.a)(this,b)[b].allChildren().filter((function(t){return t.isElement()&&e.editor.node.isMark(t)})).map((function(e){if(t){var n=e.clone();return n.removeClass("data-label-background"),n}return e})):[]}},{key:"focusEditor",value:function(){var e;null===(e=Object(h.a)(this,w)[w])||void 0===e||e.focus()}},{key:"onActivate",value:function(e){var t;Object(d.a)(Object(u.a)(n.prototype),"onActivate",this).call(this,e);var r=this.editor;Object(s.X)(r)&&!r.readonly&&(e?this.renderEditor():null===(t=Object(h.a)(this,w)[w])||void 0===t||t.destroy())}},{key:"renderEditor",value:function(){var e,t;if(Object(h.a)(this,w)[w]){var n=this.getValue();if(n&&n.id){null===(e=Object(h.a)(this,m)[m])||void 0===e||e.destroy();var r=this.getDefaultColor(),i=this.getColor();Object(h.a)(this,y)[y]=Object(h.a)(this,w)[w].render(n.id,n.text||"",Object(l.a)(Object(l.a)({},r),i)),Object(h.a)(this,b)[b]&&(null===(t=Object(h.a)(this,m)[m])||void 0===t||t.bind(Object(h.a)(this,y)[y],Object(h.a)(this,b)[b]))}}}},{key:"render",value:function(){if(!Object(h.a)(this,b)[b])return Object(h.a)(this,b)[b]=Object(s.a)('<span class="data-label-container"></span>'),this.updateContent(),Object(s.X)(this.editor)&&Object(h.a)(this,b)[b].attributes("draggable","true"),Object(h.a)(this,b)[b];this.updateContent()}},{key:"didRender",value:function(){Object(d.a)(Object(u.a)(n.prototype),"didRender",this).call(this),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e,t;null===(e=Object(h.a)(this,w)[w])||void 0===e||e.destroy(),null===(t=Object(h.a)(this,m)[m])||void 0===t||t.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"status"}},{key:"cardType",get:function(){return s.i.INLINE}},{key:"autoSelected",get:function(){return!1}},{key:"selectStyleType",get:function(){return s.B.NONE}}]),n}(s.g),x={"en-US":{status:{defaultValue:"SET A STATUS"}},"zh-CN":{status:{defaultValue:"\u8bbe\u7f6e\u72b6\u6001"}}},O="parse:html",C="paste:each",E="paste:schema",j=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).pasteSchema=function(e){e.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:k.cardName},"data-value":"*"}})},e.pasteHtml=function(t){var n=e.editor;if(Object(s.X)(n)){if(t.isElement()){var r=t.attributes(),i=r["data-type"];if(i&&i===k.cardName){var o=r["data-value"],a=Object(s.L)(o);return n.card.replaceNode(t,k.cardName,a),t.remove(),!1}}return!0}},e.parseHtml=function(t,n){var r=e.editor,i=[];return t.find("[".concat(s.c,'="').concat(k.cardName,'"],[').concat(s.x,'="').concat(k.cardName,'"]')).each((function(e){var t=Object(s.a)(e),o=r.card.find(t),a=(null===o||void 0===o?void 0:o.getValue())||Object(s.L)(t.attributes(s.f));if(null===a||void 0===a?void 0:a.text){var l='<span data-type="'.concat(k.cardName,'" data-value="').concat(Object(s.N)(a),'"></span>'),c=a.marks||[],d=Object(s.a)("<div>".concat(a.text,"</div>")).first();c.forEach((function(e){var t=Object(s.a)(e);d=r.node.wrap(d,t)})),t.empty();var u=Object(s.a)(l);u.append(d),u.css({"font-weight":400,overflow:"hidden","max-width":"200px","white-space":"nowrap","border-radius":"4px",border:"2px solid transparent",padding:"0 3px","text-overflow":"ellipsis"}),n&&(u=n(u,a)),t.replaceWith(u),i.push(u)}else t.remove()})),i},e}return Object(i.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add(x),e.on(O,this.parseHtml),e.on(C,this.pasteHtml),e.on(E,this.pasteSchema)}},{key:"execute",value:function(){var e=this.editor;if(Object(s.X)(e)){var t=e.card,n=t.insert(k.cardName);t.activate(n.root),setTimeout((function(){n.focusEditor()}),50)}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"destroy",value:function(){var e=this.editor;e.off(O,this.parseHtml),e.off(C,this.pasteHtml),e.off(E,this.pasteSchema)}}],[{key:"pluginName",get:function(){return"status"}}]),n}(s.v);t.b=j},2583:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var r=n(11),i=n(15),o=n(16),a=n(19),s=n(21),l=n(2470),c=n(2),d=n(24),u=n(116),h=n(63),p=n(2474),f=n(2475),v=n(2800),g=n.n(v),m=n(4),b=n(2496),y=n(2495),w=n.n(y),k="table-wrapper",x="table-overflow",O="data-table",C="table-cols-header",E="table-cols-header-item",j="cols-trigger",M="table-rows-header",N="table-rows-header-item",S="rows-trigger",T="table-header",_="table-menubar",A="table-menubar-item",I="table-menubar-item-input",D="table-viewport",z="data-table-reader",L="table-placeholder",R="table-highlight",B="table-row-delete-button",P="table-col-delete-button",F="table-row-add-button",H="table-row-add-split-button",q="table-col-add-button",U="table-col-add-split-button",W="table-main-content",V="table-main-bg",Y=function(){function e(t){Object(i.a)(this,e),this.isReadonly=!1,this.table=void 0,this.table=t}return Object(o.a)(e,[{key:"getEmptyCell",value:function(){return e.EmptyCell(this.isReadonly)}},{key:"renderRowsHeader",value:function(e){return"<div ".concat(l.k,'="').concat(l.F,'" class="').concat(M,'">')+'<div class="'.concat(B,'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat(F,'"><span class="data-icon data-icon-plus"></span><div class="').concat(H,'"></div></div>')+'<div class="'.concat(N,'" draggable="true">\n                <div class="row-dragger">\n                    <span class="data-icon data-icon-drag"></span>\n                    <span class="drag-info"></span>\n                </div>\n                <div class="').concat(S,'"></div>\n            </div>').repeat(e)+"\n        </div>"}},{key:"renderColsHeader",value:function(e){return"<div ".concat(l.k,'="').concat(l.F,'" class="').concat(C,'">')+'<div class="'.concat(P,'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat(q,'"><span class="data-icon data-icon-plus"></span><div class="').concat(U,'"></div></div>')+'<div class="'.concat(E,'" draggable="true">\n            <div class="col-dragger">\n                <span class="data-icon data-icon-drag"></span>\n                <span class="drag-info"></span>\n            </div>\n            <div class="').concat(j,'"></div>\n        </div>').repeat(e)+"\n    </div>"}},{key:"htmlEdit",value:function(e,t){var n=e.rows,r=e.cols,i=e.html,o=e.noBorder,a=e.overflow;r=(r=r===-1/0?1:r)===1/0?10:r,n=(n=n===-1/0?1:n)===1/0?10:n;var s="<td ".concat(l.m,'="table-cell-selection">').concat(this.getEmptyCell(),"</td>").repeat(r),c="<tr>".concat(s,"</tr>").repeat(n),d="<col />".repeat(r),u="<colgroup>".concat(d,"</colgroup>"),h="<div ".concat(l.k,'="').concat(l.F,'" class="').concat(R,'"></div>'),p="<div ".concat(l.k,'="').concat(l.F,'" class="').concat(T,'"><div class="').concat(T,'-item"></div></div>'),f="<div ".concat(l.k,'="').concat(l.F,'" class="').concat(L,'"></div>'),v=t.map((function(e){var t;if(e.split)return'<div class="split"></div>';var n=e.text;switch(e.action){case"insertColLeft":case"insertColRight":case"insertRowUp":case"insertRowDown":n=(null===(t=n)||void 0===t?void 0:t.replace("$data","<input type='text' class=\"".concat(I,'" />')))||""}return'<div class="'.concat(A,'" ').concat(l.k,'="').concat(l.F,'" data-action="').concat(e.action,'">\n                <span class="data-icon data-icon-table-').concat(e.icon,'"></span>').concat(n,"</div>")}));if(v=["<div ".concat(l.k,'="').concat(l.F,'" class="').concat(_,'">').concat(v.join(""),"</div>")],i){var g,m=i.indexOf("<colgroup")>-1;if(i=Object(l.kb)(i)||i,!m)i=null===(g=i)||void 0===g?void 0:g.replace(/^(<table[^>]+>)/,(function(e){return e+u}));var b=this.table.helper.normalize(Object(l.a)(i));n=b.find("tr").length,i=b.get().outerHTML}var y=i||'<table class="'.concat(O,'"').concat(!0===o?" data-table-no-border='true'":""," ").concat(l.m,'="class">').concat(u).concat(c,"</table>");return"<div ".concat(l.m,'="*" class="').concat(k," ").concat(!1!==a?x:"",'" ').concat(l.m,'="*">').concat(p,"<div ").concat(l.m,'="*" class="').concat(D,'">').concat(this.renderColsHeader(r)).concat(y).concat(f).concat(h,"</div>").concat(this.renderRowsHeader(n)).concat(v,"</div>")}},{key:"htmlView",value:function(e){var t=e.html,n=e.noBorder,r=e.overflow;return'<div class="'.concat(k," ").concat(!1!==r?x:"",'"><div class="').concat(z,'"').concat(!0===n?" data-table-no-border='true'":"",">").concat(Object(l.kb)(t||""),"</div></div>")}}],[{key:"EmptyCell",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return'<div class="'.concat(W,'" ').concat(l.m,'="').concat(l.j,'" ').concat(l.j,'="').concat(t?"false":"true",'" ').concat(l.k,'="').concat(l.o,'"><p><br /></p></div>').concat(e.CellBG)}}]),e}();Y.TABLE_WRAPPER_CLASS=".".concat(k),Y.TABLE_OVERFLOW_CLASS=".".concat(x),Y.TABLE_CLASS=".".concat(O),Y.COLS_HEADER_CLASS=".".concat(C),Y.COLS_HEADER_ITEM_CLASS=".".concat(E),Y.COLS_HEADER_TRIGGER_CLASS=".".concat(j),Y.COLS_ADDITION_HEADER_CLASS=".".concat("cols-addition-header"),Y.ROWS_HEADER_CLASS=".".concat(M),Y.ROWS_HEADER_ITEM_CLASS=".".concat(N),Y.ROWS_HEADER_TRIGGER_CLASS=".".concat(S),Y.HEADER_CLASS=".".concat(T),Y.MENUBAR_CLASS=".".concat(_),Y.MENUBAR_ITEM_CLASS=".".concat(A),Y.MENUBAR_ITEM_INPUT_CALSS=".".concat(I),Y.VIEWPORT=".".concat(D),Y.VIEWPORT_READER=".".concat(z),Y.PLACEHOLDER_CLASS=".".concat(L),Y.MULTI_ADDITION_CLASS=".".concat("multi-addition"),Y.TABLE_HIGHLIGHT_CLASS=".".concat(R),Y.ROW_DELETE_BUTTON_CLASS=".".concat(B),Y.COL_DELETE_BUTTON_CLASS=".".concat(P),Y.ROW_ADD_BUTTON_CLASS=".".concat(F),Y.COL_ADD_BUTTON_CLASS=".".concat(q),Y.ROW_ADD_BUTTON_SPLIT_CLASS=".".concat(H),Y.COL_ADD_BUTTON_SPLIT_CLASS=".".concat(U),Y.TABLE_TD_CONTENT_CLASS=".".concat(W),Y.TABLE_TD_BG_CLASS=".".concat(V),Y.CellBG='<div class="'.concat(V,'"><div class="table-main-border-top"></div><div class="table-main-border-right"></div><div class="table-main-border-bottom"></div><div class="table-main-border-left"></div></div>');var G=Object(f.a)("editor"),Z=function(){function e(t){Object(i.a)(this,e),this.clipboard=void 0,Object.defineProperty(this,G,{writable:!0,value:void 0}),Object(p.a)(this,G)[G]=t}return Object(o.a)(e,[{key:"isEmptyModelCol",value:function(e){return e&&e.isEmpty}},{key:"getTableModel",value:function(e){for(var t=[],n=e.get(),i=n.rows,o=(null===i||void 0===i?void 0:i.length)||0,a=0;a<o;a++)for(var s=i[a].cells,l=s.length,c=0;c<l;c++){var d=s[c],u=d.rowSpan,h=d.colSpan;h=void 0===h?1:h;var p=(u=void 0===u?1:u)>1||h>1;t[a]=t[a]||[];for(var f=c;t[a][f];)f++;if(t[a][f]={rowSpan:u,colSpan:h,isMulti:p,element:d},p)for(var v=u;v>0;){for(var g=h;g>0;){if(1!==g||1!==v){var m=a+v-1,b=f+g-1;t[m]=t[m]||[],t[m][b]={isEmpty:!0,parent:{row:a,col:f},element:null}}g--}v--}}var y=t.map((function(e){return e.length})),w=Math.max.apply(Math,Object(r.a)(y));return t.forEach((function(e){if(e.length<w)for(var t=w-e.length;t--;)e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var n=0;n<w;n++)e[n]||(e[n]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:t.length,cols:w,width:n.offsetWidth,height:n.offsetHeight,table:t}}},{key:"normalize",value:function(e){var t=this;this.trimStartTr(e),this.fixNumberTr(e),e.addClass("data-table"),e.attributes(l.m,"class");var n=e.css("width");0===parseInt(n)&&e.css("width","auto"),e.css("background-color","");var r=this.getTableModel(e),i=e.find("col");if(0!==i.length){for(var o=i.length-1;o>=0;o--){var a,s,c=i[o],d=null===(a=i.eq(o))||void 0===a?void 0:a.attributes("width");if(d)null===(s=i.eq(o))||void 0===s||s.attributes("width",parseInt(d));if(c.span>1)for(var u=c.span-1;u--;){var h;null===(h=i[o].parentNode)||void 0===h||h.insertBefore(i[o].cloneNode(),i[o])}}if((i=e.find("col")).length<r.cols)for(var f=i.length-1,v=r.cols-i.length;v--;){var g;null===(g=i[0].parentNode)||void 0===g||g.appendChild(i[f].cloneNode())}e.find("col").attributes("span",1)}else{var m=e.find("colgroup")[0];m||(m=document.createElement("colgroup")),e.prepend(m);for(var b=function(e){var t=e.find("tr")[0],n=Object(l.a)(t).find("td"),r=[];n.each((function(e,t){var i=n.eq(t);if(i){var o=i.attributes("data-colwidth"),a=i.attributes("width"),s=i[0].colSpan;o?o=o.split(","):a&&(a=parseInt(a)/s);for(var l=0;s>l;l++)o&&o[l]?r.push(parseInt(o[l])):a?r.push(parseInt(a.toString())):r.push(void 0)}}));var i=e.find("td");return i.removeAttributes("data-colwidth"),i.removeAttributes("width"),r}(e),y=document.createElement("col"),w=0;r.cols>w;w++){var k=y.cloneNode();b[w]&&k.setAttribute("width",(b[w]||"").toString()),m.appendChild(k)}}var x=e.get();r.table.forEach((function(e,n){x.rows[n]||x.insertRow(n);for(var r=e.filter((function(e){return!t.isEmptyModelCol(e)&&e.isShadow})).length;r--;)0===n?x.rows[n].insertCell(0):x.rows[n].insertCell()}));var O=e.find("tr");O.each((function(e,n){var r,i=O.eq(n);if(i){var o=parseInt(i.css("height"));o=o||(null===(r=Object(p.a)(t,G)[G].plugin.findPlugin("table"))||void 0===r?void 0:r.options.rowMinHeight)||0,i.css("height",o+"px")}}));var C=e.find("td");return C.each((function(e,n){var r=C.eq(n);if(r){r.attributes(l.m,"table-cell-selection");var i=r.find(l.p);if(0===i.length){var o=r.html();r.empty(),r.append(Y.EmptyCell(!Object(l.X)(Object(p.a)(t,G)[G])||Object(p.a)(t,G)[G].readonly)),(i=r.find(l.p)).html(o)}i.find("p").each((function(e){0===e.childNodes.length&&e.appendChild(document.createElement("br"))}))}})),e}},{key:"trimStartTr",value:function(e){var t,n=e.find("tr").eq(0);n&&0===(null===(t=n.get())||void 0===t?void 0:t.childNodes.length)&&n.remove()}},{key:"fixNumberTr",value:function(e){for(var t=e.get(),n=t.rows,r=(null===n||void 0===n?void 0:n.length)||0,i=[],o=0,a=[],s=0,l=0,c=0,d=0;d<r;d++){for(var u=n[d].cells,h=0,p=0;p<u.length;p++){var f=u[p],v=f.rowSpan,m=f.colSpan;s+=v*m,h+=m,v>1&&(l+=(v-1)*m)}a[d]=h,0===d&&(o=h),c=Math.max(h,c)}if(g()(s/o)&&o===c){var b=0;if(a.forEach((function(e){b+=c-e})),b!==l){var y=l-b;if(g()(y/c)){for(var w=[],k=0;k<r;k++){for(var x=n[k].cells,O=k+w.length;i[O]===c;)w.push(O),O++;for(var C=0;C<x.length;C++){var E=x[C],j=E.rowSpan,M=E.colSpan;if(j>1)for(var N=1;N<j;N++)i[O+N]=(i[O+N]||0)+M}}w.forEach((function(e){t.insertRow(e)}))}}}}},{key:"fixDragEvent",value:function(e){var t,n;null===(t=e.dataTransfer)||void 0===t||t.clearData(),null===(n=e.dataTransfer)||void 0===n||n.setData("aomao",""),e.dataTransfer&&(e.dataTransfer.effectAllowed="all")}},{key:"copyCss",value:function(e,t){Object(l.bb)(e)&&(e=Object(l.a)(e)),Object(l.bb)(t)&&(t=Object(l.a)(t)),t.css("text-align",e.css("text-align")),t.css("vertical-align",e.css("vertical-align"));var n=e.css("background-color");n="rgba(0, 0, 0, 0)"!==n?n:"#fff",t.css("background-color",n),t.css("color",e.css("color")),t.css("font-weight",e.css("font-weight"))}},{key:"copyTo",value:function(e,t){Object(l.bb)(e)&&(e=Object(l.a)(e)),Object(l.bb)(t)&&(t=Object(l.a)(t));var n=t.find(l.p);0===n.length&&(t.html(Y.EmptyCell(!Object(l.X)(Object(p.a)(this,G)[G])||Object(p.a)(this,G)[G].readonly)),n=t.find(l.p)),n.html(Object(l.kb)(e.html())),"td"===t.name&&0===t.find(Y.TABLE_TD_BG_CLASS).length&&t.append(Object(l.a)(Y.CellBG)),"td"===t.name&&t.attributes("data-transient-attributes","table-cell-selection")}},{key:"copyHTML",value:function(e){var t;this.clipboard={html:e,text:(null===(t=Object(l.a)(e).get())||void 0===t?void 0:t.innerText)||""}}},{key:"getCopyData",value:function(){return this.clipboard}},{key:"clearCopyData",value:function(){this.clipboard=void 0}},{key:"trimBlankSpan",value:function(e){for(var t=[],n=0,r=e.length-1;e[n]&&"span"===e[n].tagName.toLowerCase()&&""===e[n].innerText.trim();)n++;for(;e[r]&&"span"===e[r].tagName.toLowerCase()&&""===e[r].innerText.trim();)r--;if(n<=r)for(var i=n;i<=r;i++)t.push(e[i]);return t.length?Object(l.a)(t):e}},{key:"normalizeTable",value:function(e){var t=this;this.trimStartTr(e),this.fixNumberTr(e),e.addClass("data-table");var n=e.css("width");0===parseInt(n)?e.css("width","auto"):n.endsWith("%")||e.css("width",parseInt(n,10)+"px"),e.css("background-color","");var r=this.getTableModel(e),i=e.find("col");if(0!==i.length){for(var o=i.length-1;o>=0;o--){var a,s=i[o],c=null===(a=i.eq(o))||void 0===a?void 0:a.attributes("width");if(c&&!c.endsWith("%")){var d,u=parseInt(c);NaN!==u&&(null===(d=i.eq(o))||void 0===d||d.attributes("width",u))}if(s.span>1)for(var h=s.span-1;h--;){var f;null===(f=i[o].parentNode)||void 0===f||f.insertBefore(i[o].cloneNode(),i[o])}}if((i=e.find("col")).length<r.cols)for(var v=i.length-1,g=r.cols-i.length;g--;){var m;null===(m=i[0].parentNode)||void 0===m||m.appendChild(i[v].cloneNode())}e.find("col").attributes("span",1)}else{var b=e.find("colgroup")[0];b||(b=document.createElement("colgroup")),e.prepend(b);for(var y=function(e){var t=e.find("tr")[0],n=Object(l.a)(t).find("td"),r=[];n.each((function(e,t){var i=n.eq(t);if(i){var o=i.attributes("data-colwidth"),a=i.attributes("width"),s=i[0].colSpan;o?o=o.split(","):a&&(a=parseInt(a)/s);for(var l=0;s>l;l++)o&&o[l]?r.push(parseInt(o[l])):a?r.push(parseInt(a.toString())):r.push(void 0)}}));var i=e.find("td");return i.removeAttributes("data-colwidth"),i.removeAttributes("width"),r}(e),w=document.createElement("col"),k=0;r.cols>k;k++){var x=w.cloneNode();y[k]&&x.setAttribute("width",(y[k]||"").toString()),b.appendChild(x)}}var O=e.get();r.table.forEach((function(e,t){O.rows[t]||O.insertRow(t);for(var n=e.filter((function(e){return e.isShadow})).length;n--;)O.rows[t].insertCell()}));var C=e.find("tr");return C.each((function(e,n){var r,i=C.eq(n);if(i){var o=parseInt(i.css("height"));o=o||(null===(r=Object(p.a)(t,G)[G].plugin.findPlugin("table"))||void 0===r?void 0:r.options.rowMinHeight)||0,i.css("height",o+"px")}})),e}}]),e}(),X=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e,r,o){var a;return Object(i.a)(this,n),(a=t.call(this)).editor=void 0,a.table=void 0,a.COL_MIN_WIDTH=void 0,a.ROW_MIN_HEIGHT=void 0,a.tableRoot=void 0,a.colsHeader=void 0,a.rowsHeader=void 0,a.tableHeader=void 0,a.menuBar=void 0,a.dragging=void 0,a.draggingHeader=void 0,a.changeSize=void 0,a.viewport=void 0,a.placeholder=void 0,a.contextVisible=!1,a.rowDeleteButton=void 0,a.colDeleteButton=void 0,a.colAddButton=void 0,a.colAddAlign=void 0,a.colAddButtonSplit=void 0,a.moveColIndex=-1,a.hideColAddButtonTimeount=void 0,a.rowAddButton=void 0,a.rowAddAlign=void 0,a.rowAddButtonSplit=void 0,a.moveRowIndex=-1,a.hideRowAddButtonTimeount=void 0,a.onMouseDownColsHeader=function(e){var t=Object(l.a)(e.target||[]).closest(Y.COLS_HEADER_TRIGGER_CLASS);0!==t.length?a.startChangeCol(t,e):e instanceof MouseEvent&&2===e.button&&a.showContextMenu(e)},a.onMouseDownRowsHeader=function(e){var t=Object(l.a)(e.target||[]).closest(Y.ROWS_HEADER_TRIGGER_CLASS);0!==t.length?a.startChangeRow(t,e):e instanceof MouseEvent&&2===e.button&&a.showContextMenu(e)},a.onClickColsHeader=function(e){var t,n=a.table.selection;if(!(Object(l.a)(e.target||[]).closest(Y.COLS_HEADER_TRIGGER_CLASS).length>0)){var r=Object(l.a)(e.target||[]).closest(Y.COLS_HEADER_ITEM_CLASS);if(0!==r.length){var i=null===(t=a.colsHeader)||void 0===t?void 0:t.find(Y.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));void 0!==i&&n.selectCol(i)}}},a.onClickRowsHeader=function(e){var t,n=a.table.selection;if(!(Object(l.a)(e.target||[]).closest(Y.ROWS_HEADER_TRIGGER_CLASS).length>0)){var r=Object(l.a)(e.target||[]).closest(Y.ROWS_HEADER_ITEM_CLASS);if(0!==r.length){var i=null===(t=a.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));void 0!==i&&n.selectRow(i)}}},a.onClickTableHeader=function(e){var t;e.preventDefault();var n=a.table.selection;if(null===(t=a.tableHeader)||void 0===t?void 0:t.hasClass("selected"))n.clearSelect();else{var r=n.tableModel;if(!r)return;n.select({row:0,col:0},{row:r.rows-1,col:r.cols-1})}},a.onChangeSize=function(e){a.dragging&&(a.dragging.y>-1?a.onChangeRowHeight(e):a.dragging.x>-1&&a.onChangeColWidth(e),a.emit("sizeChanging"))},a.onChangeSizeEnd=function(e){if("mouseleave"!==e.type||!a.table.getCenter().contains(e.toElement)){if(a.dragging&&a.changeSize){var t=a.changeSize.trigger,n=t.width,r=t.height,i=t.element;i.removeClass("dragging"),a.dragging.x>-1&&i.css("height","".concat(r,"px")),a.dragging.y>-1&&i.css("width","".concat(n,"px")),a.dragging=void 0,a.renderRowBars(),a.emit("sizeChanged")}a.unbindChangeSizeEvent()}},a.onDragStartColsHeader=function(e){var t,n;e.stopPropagation();var r=a.table.selection.getSelectArea();if(e.target&&r.allRow){var i=Object(l.a)(e.target).closest(Y.COLS_HEADER_ITEM_CLASS);if(0!==i.length){var o=null===(t=a.colsHeader)||void 0===t?void 0:t.find(Y.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(i)}));if(void 0!==o){var s=o;s<r.begin.col||s>r.end.col||(a.draggingHeader={element:i,minIndex:r.begin.col,maxIndex:r.end.col,count:r.end.col-r.begin.col+1},i.addClass("dragging"),i.find(".drag-info").html(a.editor.language.get("table","draggingCol").replace("$data",a.draggingHeader.count.toString())),null===(n=a.colsHeader)||void 0===n||n.addClass("dragging"),a.table.helper.fixDragEvent(e),a.bindDragColEvent())}}}},a.onDragStartRowsHeader=function(e){var t,n;e.stopPropagation();var r=a.table.selection.getSelectArea();if(e.target&&r.allCol){var i=Object(l.a)(e.target).closest(Y.ROWS_HEADER_ITEM_CLASS);if(0!==i.length){var o=null===(t=a.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(i)}));if(void 0!==o){var s=o;s<r.begin.row||s>r.end.row||(a.draggingHeader={element:i,minIndex:r.begin.row,maxIndex:r.end.row,count:r.end.row-r.begin.row+1},i.addClass("dragging"),i.find(".drag-info").html(a.editor.language.get("table","draggingRow").replace("$data",a.draggingHeader.count.toString())),null===(n=a.rowsHeader)||void 0===n||n.addClass("dragging"),a.table.helper.fixDragEvent(e),a.bindDragRowEvent())}}}},a.onDragCol=function(e){var t;if(e.stopPropagation(),a.draggingHeader&&e.target&&(void 0===a.dragging&&(a.dragging={x:e.offsetX,y:e.offsetY}),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!(Math.abs(a.dragging.x-e.offsetX)<3))){a.dragging.x=e.offsetX,a.draggingHeader.element.removeClass("dragging");var n=Object(l.a)(e.target).closest("td"),r=Object(l.a)(e.target).closest(Y.COLS_HEADER_ITEM_CLASS);if(0!==n.length||0!==r.length)if(r.length>0){var i,o=null===(i=a.colsHeader)||void 0===i?void 0:i.find(Y.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0===o)return;var s=o,c=e.offsetX>r.get().offsetWidth/2?s+1:s;a.showPlaceHolder(c,c!==s)}else{var d=null===(t=a.colsHeader)||void 0===t?void 0:t.find(Y.COLS_HEADER_ITEM_CLASS);if(d){for(var u=n.get().colSpan,h=a.table.selection.getCellPoint(n),p=Object(m.a)(h,2),f=(p[0],p[1]),v=f,g=0,b=0;b<u;b++){var y=d.eq(f+b).get();if(g+y.offsetWidth/2>e.offsetX){v=f+b;break}if(g+y.offsetWidth>e.offsetX){v=f+b+1;break}g+=y.offsetWidth}a.showPlaceHolder(v,v!==f)}}}},a.onDragColEnd=function(){var e,t;a.unbindDragColEvent();var n=a.draggingHeader||{},r=n.index,i=n.count,o=n.isNext;if(a.draggingHeader&&void 0!==r&&void 0!==i){var s=a.table,l=s.command,c=s.selection,d=c.getSelectArea(),u=null===(e=a.table.wrapper)||void 0===e?void 0:e.find(Y.COLS_HEADER_ITEM_CLASS);if(u){for(var h=[],p=d.begin.col;p<=d.end.col;p++){var f,v;h.push((null===(f=u.eq(p))||void 0===f||null===(v=f.get())||void 0===v?void 0:v.offsetWidth)||0)}if(l.mockCopy(),d.begin.col>r){var g=o?r-1:r;l.removeCol(),l.insertColAt(g,i,o,h,!0),c.selectCol(g,g+i-1),l.mockPaste(!0)}else{l.removeCol();var m=(o?r-1:r)-i;l.insertColAt(m,i,o,h,!0),c.selectCol(m+1,m+i),l.mockPaste(!0)}null===(t=a.placeholder)||void 0===t||t.css("display","none"),a.draggingHeader=void 0,a.dragging=void 0}}},a.onDragRow=function(e){var t;if(e.stopPropagation(),a.draggingHeader&&e.target&&(void 0===a.dragging&&(a.dragging={x:e.offsetX,y:e.offsetY}),!(Math.abs(a.dragging.y-e.offsetY)<3))){a.dragging.y=e.offsetY,a.draggingHeader.element.removeClass("dragging");var n=Object(l.a)(e.target).closest("td"),r=Object(l.a)(e.target).closest(Y.ROWS_HEADER_ITEM_CLASS);if(0!==n.length||0!==r.length)if(r.length>0){var i,o=null===(i=a.rowsHeader)||void 0===i?void 0:i.find(Y.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(r)}));if(void 0===o)return;var s=o,c=e.offsetY>r.get().offsetHeight/2?s+1:s;a.showPlaceHolder(c,c!==s)}else{var d=null===(t=a.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS);if(d){for(var u=n.get().rowSpan,h=a.table.selection.getCellPoint(n),p=Object(m.a)(h,1)[0],f=p,v=0,g=0;g<u;g++){var b=d[p+g];if(v+b.offsetHeight/2>e.offsetY){f=p+g;break}if(v+b.offsetHeight>e.offsetY){f=p+g+1;break}v+=b.offsetHeight}a.showPlaceHolder(f,f!==p)}}}},a.onDragRowEnd=function(){var e;a.unbindDragRowEvent();var t=a.draggingHeader||{},n=t.index,r=t.count,i=t.isNext;if(a.draggingHeader&&void 0!==n&&void 0!==r){var o=a.table,s=o.command,l=o.selection,c=l.getSelectArea(),d=c.begin;c.end;if(s.mockCopy(),d.row>n){var u=i?n-1:n;s.removeRow(),s.insertRowAt(u,r,!i,!0),l.selectRow(n,n+r-1),s.mockPaste(!0)}else{s.removeRow();var h=(i?n-1:n)-r;s.insertRowAt(h,r,!i,!0),l.selectRow(h+1,h+r),s.mockPaste(!0)}null===(e=a.placeholder)||void 0===e||e.css("display","none"),a.draggingHeader=void 0,a.dragging=void 0}},a.onMenuInputMousedown=function(e){e.stopPropagation()},a.handleHighlightRow=function(){var e=a.table.selection,t=e.tableModel;if(t){var n=Object(c.a)({},e.getSelectArea());n.allCol=!0,n.begin={row:n.begin.row,col:0},n.end={row:n.end.row,col:t.cols-1},e.showHighlight(n)}},a.handleHighlightCol=function(){var e=a.table.selection,t=e.tableModel;if(t){var n=Object(c.a)({},e.getSelectArea());n.allRow=!0,n.begin={row:0,col:n.begin.col},n.end={row:t.rows-1,col:n.end.col},e.showHighlight(n)}},a.handleHighlightTable=function(){var e=a.table.selection,t=e.tableModel;if(t){var n=Object(c.a)({},e.getSelectArea());n.allRow=!0,n.allCol=!0,n.begin={row:0,col:0},n.end={row:t.rows-1,col:t.cols-1},e.showHighlight(n)}},a.table=r,a.editor=e,a.COL_MIN_WIDTH=o.col_min_width,a.ROW_MIN_HEIGHT=o.row_min_height,a}return Object(o.a)(n,[{key:"init",value:function(){var e=this.table.wrapper;e&&(this.tableRoot=e.find(Y.TABLE_CLASS),this.colsHeader=e.find(Y.COLS_HEADER_CLASS),this.rowsHeader=e.find(Y.ROWS_HEADER_CLASS),this.tableHeader=e.find(Y.HEADER_CLASS),this.viewport=e.find(Y.VIEWPORT),this.menuBar=e.find(Y.MENUBAR_CLASS),this.placeholder=e.find(Y.PLACEHOLDER_CLASS),this.renderRowBars(),this.renderColBars(),this.bindEvents())}},{key:"renderRowBars",value:function(){var e,t,n,r,i,o,a,s,c=this,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=null===(e=this.tableRoot)||void 0===e?void 0:e.get();if(u&&(null===(t=this.rowDeleteButton)||void 0===t||t.removeAllEvents(),this.rowDeleteButton=null===(n=this.rowsHeader)||void 0===n?void 0:n.find(Y.ROW_DELETE_BUTTON_CLASS),null===(r=this.rowAddButton)||void 0===r||r.removeAllEvents(),this.rowAddButton=null===(i=this.rowsHeader)||void 0===i?void 0:i.find(Y.ROW_ADD_BUTTON_CLASS),this.rowAddButtonSplit=null===(o=this.rowAddButton)||void 0===o?void 0:o.find(Y.ROW_ADD_BUTTON_SPLIT_CLASS),null===(a=this.rowDeleteButton)||void 0===a||a.on("mouseover",(function(e){return c.handleHighlightRow()})).on("mouseleave",(function(e){return c.hideHighlight(e)})).on("mousedown",(function(e){e.preventDefault(),c.table.command.removeRow()})),null===(s=this.rowAddButton)||void 0===s||s.on("mouseenter",(function(){var e;c.hideRowAddButtonTimeount&&clearTimeout(c.hideRowAddButtonTimeount),null===(e=c.rowsHeader)||void 0===e||e.css("z-index",128)})).on("mouseleave",(function(){c.hideRowAddButtonTimeount=setTimeout((function(){var e,t;null===(e=c.rowAddButton)||void 0===e||e.hide(),null===(t=c.rowsHeader)||void 0===t||t.css("z-index",1),c.moveRowIndex=-1}),200)})).on("mousedown",(function(e){e.preventDefault(),c.table.command.insertRowAt(c.moveRowIndex,1,"down"!==c.rowAddAlign)})),d)){var h,p,f,v,g=u.rows,m=(null===g||void 0===g?void 0:g.length)||0,b=null===(h=this.rowsHeader)||void 0===h?void 0:h.find(Y.ROWS_HEADER_ITEM_CLASS);if(b)for(var y=0;y<m;y++){var w=Object(l.Q)(g[y],"height"),k=b[y],x=null===k||void 0===k?void 0:k.style.height;k&&w!==x&&(k.style.height=w)}var O=null===(p=this.rowsHeader)||void 0===p?void 0:p.find(Y.ROWS_HEADER_TRIGGER_CLASS),C=this.tableRoot.width(),E=(null===(f=this.table.wrapper)||void 0===f?void 0:f.width())||0,j=(C<E?C:E)+((null===(v=this.rowsHeader)||void 0===v?void 0:v.width())||0)-1;null===O||void 0===O||O.each((function(e){e.style.width!==j+"px"&&(e.style.width=j+"px")}))}}},{key:"renderColBars",value:function(){var e,t,n,r,i,o,a,s,c,d,u=this,h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=null===(e=this.tableRoot)||void 0===e?void 0:e.get();if(p){var f=Object(l.hb)(Object(l.Q)(p,"width"));null===(t=this.colDeleteButton)||void 0===t||t.removeAllEvents(),this.colDeleteButton=null===(n=this.table.wrapper)||void 0===n?void 0:n.find(Y.COL_DELETE_BUTTON_CLASS),null===(r=this.colAddButton)||void 0===r||r.removeAllEvents(),this.colAddButton=null===(i=this.colsHeader)||void 0===i?void 0:i.find(Y.COL_ADD_BUTTON_CLASS),this.colAddButtonSplit=null===(o=this.colAddButton)||void 0===o?void 0:o.find(Y.COL_ADD_BUTTON_SPLIT_CLASS),null===(a=this.colDeleteButton)||void 0===a||a.on("mouseover",(function(e){return u.handleHighlightCol()})).on("mouseleave",(function(e){return u.hideHighlight(e)})).on("mousedown",(function(e){e.preventDefault(),u.table.command.removeCol()})),null===(s=this.colAddButton)||void 0===s||s.on("mouseenter",(function(){u.hideColAddButtonTimeount&&clearTimeout(u.hideColAddButtonTimeount)})).on("mouseleave",(function(){u.hideColAddButtonTimeount=setTimeout((function(){var e;null===(e=u.colAddButton)||void 0===e||e.hide(),u.moveColIndex=-1}),200)})).on("mousedown",(function(e){e.preventDefault(),u.moveColIndex>-1&&u.table.command.insertColAt(u.moveColIndex,1,"right"!==u.colAddAlign)})),null===(c=this.tableRoot)||void 0===c||c.css("width","".concat(f,"px")),null===(d=this.colsHeader)||void 0===d||d.css("width","".concat(f,"px")),h&&this.renderColSize()}}},{key:"renderColSize",value:function(){var e,t,n,r,i,o=this,a=null===(e=this.tableRoot)||void 0===e?void 0:e.get();if(a){var s=Object(l.hb)(Object(l.Q)(a,"width")),c=null===(t=this.tableRoot)||void 0===t?void 0:t.find("col");if(c){var d=!0,u={},h=0,p=0;c.each((function(e,t){var n=c[t],r=Object(l.hb)(Object(l.a)(n).attributes("width"));r?(u[t]=r,h+=r,d=!1):p++}));var f=null===(n=this.colsHeader)||void 0===n?void 0:n.find(Y.COLS_HEADER_ITEM_CLASS);if(f){var v=this.table.selection.tableModel;if(d){var g,m=[];null===v||void 0===v||null===(g=v.table)||void 0===g||g.forEach((function(e){e.forEach((function(e,t){m[t]||o.table.helper.isEmptyModelCol(e)||e.isMulti||!e.element||(m[t]=Object(l.hb)(Object(l.Q)(e.element,"width")))}))}));for(var b=0,y=0,w=0;w<c.length;w++)m[w]?y+=m[w]:b++;var k=0;b>0&&(k=Math.round(1e4*Math.round((s-y)/b))/1e4);for(var x=0;x<c.length;x++){var O,C,E=m[x]||k;null===(O=f.eq(x))||void 0===O||O.css("width",E+"px"),null===(C=c.eq(x))||void 0===C||C.attributes("width",E)}}else if(p){var j=Math.round((s-h)/p*1e4)/1e4;c.each((function(e,t){var n,r,i=void 0===u[t]?j:u[t];null===(n=f.eq(t))||void 0===n||n.css("width",i+"px"),null===(r=c.eq(t))||void 0===r||r.attributes("width",i)}))}else c.each((function(e,t){var n=Math.round(s*u[t]/h*1e4)/1e4,r=f[t],i=null===r||void 0===r?void 0:r.style.width;r&&i!==n+"px"&&(r.style.width=n+"px")}));var M=null===(r=this.colsHeader)||void 0===r?void 0:r.find(Y.COLS_HEADER_TRIGGER_CLASS),N=((null===v||void 0===v?void 0:v.height)||0)+((null===(i=this.colsHeader)||void 0===i?void 0:i.height())||0);null===M||void 0===M||M.each((function(e){e.style.height!==N+"px"&&(e.style.height=N+"px")}))}}}}},{key:"bindEvents",value:function(){var e,t,n,r,i,o,a,s,c,d,u,h,p,f,v,g,m,b,y=this;null===(e=this.colsHeader)||void 0===e||e.on(l.ab?"touchstart":"mousedown",this.onMouseDownColsHeader).on("mouseup",this.onClickColsHeader).on("dragstart",this.onDragStartColsHeader),null===(t=this.rowsHeader)||void 0===t||t.on(l.ab?"touchstart":"mousedown",this.onMouseDownRowsHeader).on("mouseup",this.onClickRowsHeader).on("dragstart",this.onDragStartRowsHeader),null===(n=this.tableHeader)||void 0===n||n.on("mousedown",this.onClickTableHeader),null===(r=this.table.wrapper)||void 0===r||r.on("contextmenu",(function(e){return e.preventDefault()})),null===(i=this.tableRoot)||void 0===i||i.on("contextmenu",(function(e){return e.preventDefault()})),null===(o=this.colsHeader)||void 0===o||o.on("contextmenu",(function(e){return e.preventDefault()})),null===(a=this.rowsHeader)||void 0===a||a.on("contextmenu",(function(e){return e.preventDefault()})),null===(s=this.tableRoot)||void 0===s||s.on("mousedown",(function(e){return y.onTableMouseDown(e)})),null===(c=this.menuBar)||void 0===c||c.on("click",(function(e){return y.handleClickMenu(e)})),null===(d=this.menuBar)||void 0===d||d.on("mouseover",(function(e){return y.handleHoverMenu(e)})),null===(u=this.menuBar)||void 0===u||u.on("mouseleave",(function(e){return y.hideHighlight(e)}));var w=this.editor;null===(h=this.viewport)||void 0===h||h.on(l.ab?"touchstart":"mousedown",(function(e){var t;if(e.target){var n=Object(l.a)(e.target);if(Object(l.X)(w)&&e.target&&(null===(t=y.viewport)||void 0===t?void 0:t.equal(n))){e.preventDefault(),e.stopPropagation();var r=w.change,i=r.range.get();w.card.focusPrevBlock(y.table,i,!0),w.card.activate(i.startNode,l.h.MOUSE_DOWN),r.range.select(i)}}}));var k=null;null===(p=this.colsHeader)||void 0===p||p.on("mouseenter",(function(){y.hideColAddButtonTimeount&&clearTimeout(y.hideColAddButtonTimeount)})).on("mousemove",(function(e){k&&clearTimeout(k),k=setTimeout((function(){y.onMouseMoveColsHeader(e)}),200)})).on("mouseleave",(function(e){k&&clearTimeout(k),y.hideColAddButtonTimeount=setTimeout((function(){var e;null===(e=y.colAddButton)||void 0===e||e.hide()}),200)}));var x=null;null===(f=this.colsHeader)||void 0===f||f.find(Y.COLS_HEADER_ITEM_CLASS).on("mouseenter",(function(e){x&&clearTimeout(x),x=setTimeout((function(){e.target&&Object(l.a)(e.target).closest(Y.COLS_HEADER_ITEM_CLASS).addClass("active")}),200)})).on("mouseleave",(function(e){x&&clearTimeout(x),e.target&&Object(l.a)(e.target).closest(Y.COLS_HEADER_ITEM_CLASS).removeClass("active")}));var O=null;null===(v=this.colsHeader)||void 0===v||v.find(Y.COLS_HEADER_TRIGGER_CLASS).on("mouseenter",(function(e){O&&clearTimeout(O);var t=Object(l.a)(e.target||[]);O=setTimeout((function(){t.addClass("active")}),200)})).on("mouseleave",(function(e){O&&clearTimeout(O),e.target&&Object(l.a)(e.target).removeClass("active")}));var C=null;null===(g=this.rowsHeader)||void 0===g||g.on("mouseenter",(function(){y.hideRowAddButtonTimeount&&clearTimeout(y.hideRowAddButtonTimeount)})).on("mousemove",(function(e){C&&clearTimeout(C),C=setTimeout((function(){var t;y.onMouseMoveRowsHeader(e),null===(t=y.rowsHeader)||void 0===t||t.css("z-index",128)}),200)})).on("mouseleave",(function(){C&&clearTimeout(C),y.hideRowAddButtonTimeount=setTimeout((function(){var e,t;null===(e=y.rowsHeader)||void 0===e||e.css("z-index",""),null===(t=y.rowAddButton)||void 0===t||t.hide()}),200)}));var E=null;null===(m=this.rowsHeader)||void 0===m||m.find(Y.ROWS_HEADER_ITEM_CLASS).on("mouseenter",(function(e){E&&clearTimeout(E),E=setTimeout((function(){e.target&&Object(l.a)(e.target).closest(Y.ROWS_HEADER_ITEM_CLASS).addClass("active")}),200)})).on("mouseleave",(function(e){E&&clearTimeout(E),e.target&&Object(l.a)(e.target).closest(Y.ROWS_HEADER_ITEM_CLASS).removeClass("active")}));var j=null;null===(b=this.rowsHeader)||void 0===b||b.find(Y.ROWS_HEADER_TRIGGER_CLASS).on("mouseenter",(function(e){j&&clearTimeout(j);var t=Object(l.a)(e.target||[]);j=setTimeout((function(){t.addClass("active")}),200)})).on("mouseleave",(function(e){j&&clearTimeout(j),e.target&&Object(l.a)(e.target).removeClass("active")}))}},{key:"onTableMouseDown",value:function(e){e.target&&(Object(l.a)(e.target).closest("td").length>0&&2===e.button&&this.table.activated?this.showContextMenu(e):this.hideContextMenu())}},{key:"onMouseMoveColsHeader",value:function(e){var t,n;if(e.target&&this.colAddButton&&this.colAddButtonSplit){var r=Object(l.a)(e.target),i=r.closest(Y.COLS_HEADER_ITEM_CLASS);if(0!==i.length){var o=this.colsHeader.find(Y.COLS_HEADER_ITEM_CLASS).toArray(),a=i.width(),s=this.colAddButton.width(),c=i.get().offsetLeft,d=o.findIndex((function(e){return e.equal(i)})),u=e.offsetX>a/2||r.hasClass("cols-trigger"),h=o[o.length-1].equal(i);u&&(c+=h?a-s/2:a),this.colAddAlign=u?"left":"right",this.moveColIndex=d,null===(t=this.colAddButton)||void 0===t||t.show("flex"),this.colAddButton.css("left","".concat(c,"px")),this.colAddButton.css("z-index",128);var p=((null===(n=this.table.selection.tableModel)||void 0===n?void 0:n.height)||0)+i.height()+4;this.colAddButtonSplit.css("height","".concat(p,"px")),this.colAddButtonSplit.css("left","".concat(h&&u?s-3+"px":""))}}}},{key:"onMouseMoveRowsHeader",value:function(e){var t;if(e.target&&this.rowAddButton&&this.rowAddButtonSplit){var n=Object(l.a)(e.target),r=n.closest(Y.ROWS_HEADER_ITEM_CLASS);if(0!==r.length){var i=this.rowsHeader.find(Y.ROWS_HEADER_ITEM_CLASS).toArray(),o=r.height(),a=r.get().offsetTop,s=i.findIndex((function(e){return e.equal(r)})),c=e.offsetY>o/2||n.hasClass("rows-trigger");c&&(a+=o),this.moveRowIndex=s,this.rowAddButton.show("flex"),this.rowAddButton.css("top","".concat(a,"px")),this.rowAddAlign=c?"down":"up";var d=((null===(t=this.table.selection.tableModel)||void 0===t?void 0:t.width)||0)+r.width()+4;this.rowAddButtonSplit.css("width","".concat(d,"px"))}}}},{key:"activeHeader",value:function(){var e,t,n,r=this.table.selection.getSelectArea();this.clearActiveStatus();var i=null===(e=this.colsHeader)||void 0===e?void 0:e.find(Y.COLS_HEADER_ITEM_CLASS),o=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS),a=r.begin,s=r.end,l=r.allCol,c=r.allRow;if(o)for(var d=a.row;d<=s.row;d++)if(l){var u=o[d];(null===u||void 0===u?void 0:u.classList.contains("selected"))||null===u||void 0===u||u.classList.add("selected"),c&&!(null===u||void 0===u?void 0:u.classList.contains("no-dragger"))&&(null===u||void 0===u||u.classList.add("no-dragger"))}if(i)for(var h=a.col;h<=s.col;h++)if(c){var p=i[h];(null===p||void 0===p?void 0:p.classList.contains("selected"))||null===p||void 0===p||p.classList.add("selected"),l&&!(null===p||void 0===p?void 0:p.classList.contains("no-dragger"))&&(null===p||void 0===p||p.classList.add("no-dragger"))}var f=null===(n=this.tableHeader)||void 0===n?void 0:n.get();if(l&&c?(null===f||void 0===f?void 0:f.classList.contains("selected"))||null===f||void 0===f||f.classList.add("selected"):(null===f||void 0===f?void 0:f.classList.contains("selected"))&&(null===f||void 0===f||f.classList.remove("selected")),l&&!c){var v,g=null===(v=this.tableRoot)||void 0===v?void 0:v.find("tr").eq(a.row);if(g){var m,b,y=g.get().offsetTop;null===(m=this.rowDeleteButton)||void 0===m||m.show("flex"),null===(b=this.rowDeleteButton)||void 0===b||b.css("top","".concat(y-this.rowDeleteButton.height(),"px"))}}else{var w;null===(w=this.rowDeleteButton)||void 0===w||w.hide()}if(!l&&c){for(var k,x,O,C,E=0,j=a.col;j<=s.col;j++){var M;E+=(null===i||void 0===i||null===(M=i.eq(j))||void 0===M?void 0:M.width())||0}var N=(null===i||void 0===i||null===(k=i.eq(a.col))||void 0===k||null===(x=k.get())||void 0===x?void 0:x.offsetLeft)||0;null===(O=this.colDeleteButton)||void 0===O||O.show("flex"),null===(C=this.colDeleteButton)||void 0===C||C.css("left","".concat(N+E/2,"px"))}else{var S;null===(S=this.colDeleteButton)||void 0===S||S.hide()}}},{key:"clearActiveStatus",value:function(){var e,t,n,r=null===(e=this.colsHeader)||void 0===e?void 0:e.find(Y.COLS_HEADER_ITEM_CLASS),i=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS);null===r||void 0===r||r.each((function(e){var t=e;t.classList.contains("selected")&&t.classList.remove("selected"),t.classList.contains("no-dragger")&&t.classList.remove("no-dragger")})),null===i||void 0===i||i.each((function(e){var t=e;t.classList.contains("selected")&&t.classList.remove("selected"),t.classList.contains("no-dragger")&&t.classList.remove("no-dragger")}));var o=null===(n=this.tableHeader)||void 0===n?void 0:n.get();(null===o||void 0===o?void 0:o.classList.contains("selected"))&&o.classList.remove("selected")}},{key:"refresh",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.renderColBars(e),this.renderRowBars(e),this.activeHeader()}},{key:"startChangeCol",value:function(e,t){var n,r,i;t.stopPropagation(),t.preventDefault();var o=e.parent(),a=o.get();this.table.selection.clearSelect(),this.dragging={x:t instanceof MouseEvent?t.clientX:t.touches[0].clientX,y:-1};var s=(null===(n=this.colsHeader)||void 0===n?void 0:n.find(Y.COLS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(o)})))||0;this.changeSize={trigger:{element:e,height:Object(l.hb)(Object(l.Q)(e.get(),"height")),width:Object(l.hb)(Object(l.Q)(e.get(),"width"))},element:o,width:Object(l.hb)(Object(l.Q)(a,"width")),height:-1,index:s,table:{width:(null===(r=this.table.selection.tableModel)||void 0===r?void 0:r.width)||0,height:(null===(i=this.table.selection.tableModel)||void 0===i?void 0:i.height)||0}},this.bindChangeSizeEvent()}},{key:"startChangeRow",value:function(e,t){var n,r,i;t.stopPropagation(),t.preventDefault();var o=e.parent(),a=o.get();this.table.selection.clearSelect(),this.dragging={x:-1,y:t instanceof MouseEvent?t.clientY:t.touches[0].clientY};var s=(null===(n=this.rowsHeader)||void 0===n?void 0:n.find(Y.ROWS_HEADER_ITEM_CLASS).toArray().findIndex((function(e){return e.equal(o)})))||0;this.changeSize={trigger:{element:e,height:Object(l.hb)(Object(l.Q)(e.get(),"height")),width:Object(l.hb)(Object(l.Q)(e.get(),"width"))},element:o,width:-1,height:Object(l.hb)(Object(l.Q)(a,"height")),index:s,table:{width:(null===(r=this.table.selection.tableModel)||void 0===r?void 0:r.width)||0,height:(null===(i=this.table.selection.tableModel)||void 0===i?void 0:i.height)||0}},this.bindChangeSizeEvent()}},{key:"bindChangeSizeEvent",value:function(){var e,t;null===(e=this.colsHeader)||void 0===e||e.addClass("resize"),null===(t=this.rowsHeader)||void 0===t||t.addClass("resize"),document.addEventListener(l.ab?"touchmove":"mousemove",this.onChangeSize),document.addEventListener(l.ab?"touchend":"mouseup",this.onChangeSizeEnd),l.ab||document.addEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"unbindChangeSizeEvent",value:function(){var e,t;null===(e=this.colsHeader)||void 0===e||e.removeClass("resize"),null===(t=this.rowsHeader)||void 0===t||t.removeClass("resize"),document.removeEventListener(l.ab?"touchmove":"mousemove",this.onChangeSize),document.removeEventListener(l.ab?"touchend":"mouseup",this.onChangeSizeEnd),l.ab||document.removeEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"onChangeColWidth",value:function(e){var t,n,r,i,o;if(this.dragging&&this.changeSize){var a=(e instanceof MouseEvent?e.clientX:e.touches[0].clientX)-this.dragging.x,s=Math.max(this.COL_MIN_WIDTH,this.changeSize.width+a);a=s-this.changeSize.width;var l=this.changeSize.table.width+a;this.changeSize.element.css("width",s+"px");var c=this.changeSize.element.get();null===(t=this.colsHeader)||void 0===t||t.css("width",l+"px");var d=null===(n=this.viewport)||void 0===n?void 0:n.get(),u=c.offsetLeft+c.offsetWidth;u-d.scrollLeft+20>d.offsetWidth?d.scrollLeft=u+20-d.offsetWidth:d.scrollLeft+d.offsetWidth===d.scrollWidth&&(d.scrollLeft=Math.max(0,l+34-d.offsetWidth)),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowBars(),this.renderColSplitBars(this.changeSize.element,this.changeSize.trigger.element),null===(r=this.tableRoot)||void 0===r||null===(i=r.find("col").eq(this.changeSize.index))||void 0===i||i.attributes("width",s),null===(o=this.tableRoot)||void 0===o||o.css("width","".concat(l,"px"))}}},{key:"onChangeRowHeight",value:function(e){var t,n;if(this.dragging&&this.changeSize){var r=(e instanceof MouseEvent?e.clientY:e.touches[0].clientY)-this.dragging.y,i=Math.max(this.ROW_MIN_HEIGHT,this.changeSize.height+r);r=i-this.changeSize.height,this.changeSize.element.css("height",i+"px"),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowSplitBars(this.changeSize.element,this.changeSize.trigger.element),null===(t=this.tableRoot)||void 0===t||null===(n=t.find("tr").eq(this.changeSize.index))||void 0===n||n.css("height","".concat(i,"px"))}}},{key:"renderColSplitBars",value:function(e,t){var n,r=(null===(n=this.table.selection.tableModel)||void 0===n?void 0:n.height)||0;t.addClass("dragging").css("height","".concat(r+e.height(),"px"))}},{key:"renderRowSplitBars",value:function(e,t){var n,r,i=null===(n=this.viewport)||void 0===n?void 0:n.get(),o=(null===(r=this.table.selection.tableModel)||void 0===r?void 0:r.width)||0,a=Math.min(i.offsetWidth,o);t.addClass("dragging").css("width","".concat(a+e.width(),"px"))}},{key:"bindDragColEvent",value:function(){var e=this.table.wrapper;null===e||void 0===e||e.on("dragover",this.onDragCol),null===e||void 0===e||e.on("drop",this.onDragColEnd),null===e||void 0===e||e.on("dragend",this.onDragColEnd)}},{key:"unbindDragColEvent",value:function(){var e,t,n=this.table.wrapper,r=null===(e=this.colsHeader)||void 0===e?void 0:e.find(Y.COLS_HEADER_ITEM_CLASS);null===r||void 0===r||r.removeClass("dragging"),null===(t=this.colsHeader)||void 0===t||t.removeClass("dragging"),null===n||void 0===n||n.off("dragover",this.onDragCol),null===n||void 0===n||n.off("drop",this.onDragColEnd),null===n||void 0===n||n.off("dragend",this.onDragColEnd)}},{key:"bindDragRowEvent",value:function(){var e=this.table.wrapper;null===e||void 0===e||e.on("dragover",this.onDragRow),null===e||void 0===e||e.on("drop",this.onDragRowEnd),null===e||void 0===e||e.on("dragend",this.onDragRowEnd)}},{key:"unbindDragRowEvent",value:function(){var e,t,n=this.table.wrapper,r=null===(e=this.rowsHeader)||void 0===e?void 0:e.find(Y.ROWS_HEADER_ITEM_CLASS);null===r||void 0===r||r.removeClass("dragging"),null===(t=this.rowsHeader)||void 0===t||t.removeClass("dragging"),null===n||void 0===n||n.off("dragover",this.onDragRow),null===n||void 0===n||n.off("drop",this.onDragRowEnd),null===n||void 0===n||n.off("dragend",this.onDragRowEnd)}},{key:"showPlaceHolder",value:function(e,t){if(this.draggingHeader){var n=this.draggingHeader,r=n.element,i=n.minIndex,o=n.maxIndex;if(r.closest(Y.COLS_HEADER_CLASS).length>0){var a,s,c,d,u,h,p,f,v,g,m;if(e===this.draggingHeader.index)return;if(i<=e&&e<=o+1)return delete this.draggingHeader.index,delete this.draggingHeader.isNext,void(null===(m=this.placeholder)||void 0===m||m.css("display","none"));this.draggingHeader.isNext=t,this.draggingHeader.index=e;var b=null===(a=this.colsHeader)||void 0===a?void 0:a.find(Y.COLS_HEADER_ITEM_CLASS);if(!b)return;var y=this.draggingHeader.index!==b.length?b.eq(this.draggingHeader.index).get().offsetLeft+2:b.eq(this.draggingHeader.index-1).get().offsetLeft+b.eq(this.draggingHeader.index-1).get().offsetWidth+2,w=null===(s=this.viewport)||void 0===s?void 0:s.get(),k=w.scrollLeft,x=w.offsetWidth;y<k&&(w.scrollLeft=y-5),y>k+x&&(w.scrollLeft=y-x+5);var O=((null===(c=this.table.selection.tableModel)||void 0===c?void 0:c.height)||0)+b.height(),C=null===(d=this.viewport)||void 0===d?void 0:d.css("padding-top"),E=(null===(u=this.viewport)||void 0===u?void 0:u.css("padding-left"))||"0";null===(h=this.placeholder)||void 0===h||h.css("width","2px"),null===(p=this.placeholder)||void 0===p||p.css("height","".concat(O,"px")),null===(f=this.placeholder)||void 0===f||f.css("left",y-4+Object(l.hb)(E)+"px"),null===(v=this.placeholder)||void 0===v||v.css("top",C),null===(g=this.placeholder)||void 0===g||g.css("display","block")}else if(r.closest(Y.ROWS_HEADER_CLASS).length>0){var j,M,N,S,T,_,A,I,D,z,L;if(e===this.draggingHeader.index)return;if(i<=e&&e<=o+1)return delete this.draggingHeader.index,delete this.draggingHeader.isNext,void(null===(L=this.placeholder)||void 0===L||L.css("display","none"));this.draggingHeader.index=e,this.draggingHeader.isNext=t;var R=null===(j=this.rowsHeader)||void 0===j?void 0:j.find(Y.ROWS_HEADER_ITEM_CLASS);if(!R)return;var B=this.draggingHeader.index!==R.length?R.eq(this.draggingHeader.index).get().offsetTop+2:R.eq(this.draggingHeader.index-1).get().offsetTop+R.eq(this.draggingHeader.index-1).get().offsetHeight-2,P=(null===(M=this.table.selection.tableModel)||void 0===M?void 0:M.width)||0,F=null===(N=this.viewport)||void 0===N?void 0:N.css("padding-top"),H=(null===(S=this.viewport)||void 0===S?void 0:S.css("padding-left"))||"0",q=null===(T=this.colsHeader)||void 0===T?void 0:T.find(Y.COLS_HEADER_ITEM_CLASS);null===(_=this.placeholder)||void 0===_||_.css("height","2px"),null===(A=this.placeholder)||void 0===A||A.css("width","".concat(P,"px")),null===(I=this.placeholder)||void 0===I||I.css("left",H),null===(D=this.placeholder)||void 0===D||D.css("top",B+Object(l.hb)(F||"0")+((null===q||void 0===q?void 0:q.height())||0)-2+"px"),null===(z=this.placeholder)||void 0===z||z.css("display","block")}}}},{key:"removeRow",value:function(e){var t,n,r,i,o=null===(t=this.rowsHeader)||void 0===t?void 0:t.find(Y.ROWS_HEADER_ITEM_CLASS),a=null===o||void 0===o||null===(n=o.eq(e))||void 0===n?void 0:n.get();a&&(null===(r=this.rowsHeader)||void 0===r||null===(i=r.get())||void 0===i||i.removeChild(a))}},{key:"removeCol",value:function(e){var t,n,r,i,o,a,s=null===(t=this.colsHeader)||void 0===t?void 0:t.find(Y.COLS_HEADER_ITEM_CLASS),l=null===(n=this.colsHeader)||void 0===n?void 0:n.get(),c=null===s||void 0===s||null===(r=s.eq(e))||void 0===r?void 0:r.get();l&&c&&(null===(i=this.colsHeader)||void 0===i||i.css("width",l.offsetWidth-c.offsetWidth+"px"),l.removeChild(c),null===(o=this.tableRoot)||void 0===o||o.css("width",null===(a=this.colsHeader)||void 0===a?void 0:a.css("width")))}},{key:"showContextMenu",value:function(e){var t=this,n=this.editor;if(this.menuBar&&e.target&&this.table.wrapper&&n.scrollNode){e.preventDefault();var r=this.table.selection,i=this.menuBar.find(Y.MENUBAR_ITEM_CLASS);i.removeClass("disabled"),i.each((function(e){var n=Object(l.a)(e),i=n.attributes("data-action");if(t.getMenuDisabled(i))n.addClass("disabled");else{var o=n.find("input".concat(Y.MENUBAR_ITEM_INPUT_CALSS));if(0===o.length)return;var a=o.get();o.on("blur",(function(){a.value=(parseInt(a.value,10)||1).toString()})).on("keydown",(function(e){Object(l.Y)("enter",e)&&t.handleTriggerMenu(n)}));var s=r.getSelectArea(),c=["insertColLeft","insertColRight"].indexOf(i)>-1,d=["insertRowUp","insertRowDown"].indexOf(i)>-1;c&&(a.value="".concat(s.end.col-s.begin.col+1)),d&&(a.value="".concat(s.end.row-s.begin.row+1)),o.on("mousedown",t.onMenuInputMousedown)}})),this.menuBar.find("div.split").each((function(e){for(var t=Object(l.a)(e),n=t.prev();n;){if(n.hasClass("split")){t.remove();break}if(!n.hasClass("disabled"))break;n=n.prev()}n||t.remove()}));for(var o=Object(l.a)(e.target),a=o.getBoundingClientRect()||{top:0,left:0},s=o.parent(),c=0,d=0;s&&s.closest(Y.TABLE_WRAPPER_CLASS).length>0;){var u=s.getBoundingClientRect()||{top:0,left:0};c+=a.top-u.top,d+=a.left-u.left,a=u,s=s.parent()}var h=this.table.wrapper.get().getBoundingClientRect(),p=n.scrollNode.getViewport();c+=e.offsetY;var f=this.menuBar.height(),v=h.top+c+f+4;if(v>p.bottom){var g=v-p.bottom;c-g<0&&h.top+c-g<p.top&&(g=h.top+c-p.top),c-=g}this.menuBar.css("left",d+e.offsetX+"px"),this.menuBar.css("top",c+"px"),this.contextVisible=!0}}},{key:"hideContextMenu",value:function(){var e,t;if(this.contextVisible){var n=null===(e=this.menuBar)||void 0===e?void 0:e.find(Y.MENUBAR_ITEM_CLASS);null===n||void 0===n||n.removeClass("disabled"),null===n||void 0===n||n.each((function(e){var t=Object(l.a)(e).find("input".concat(Y.MENUBAR_ITEM_INPUT_CALSS));0!==t.length&&t.removeAllEvents()})),this.contextVisible=!1,null===(t=this.menuBar)||void 0===t||t.css({top:"-99999px",left:"-99999px"})}}},{key:"getMenuDisabled",value:function(e){var t=this.table,n=t.selection,r=t.command;switch(e){case"cut":case"copy":return!n.selectArea||n.selectArea.count<=1;case"splitCell":return!n.hasMergeCell();case"mergeCell":return!n.selectArea;case"mockPaste":return!r.hasCopyData();case"removeCol":case"insertColLeft":case"insertColRight":return n.isColSelected();case"removeRow":case"insertRowUp":case"insertRowDown":return n.isRowSelected();default:return!1}}},{key:"handleClickMenu",value:function(e){if(e.target){var t=Object(l.a)(e.target),n=t.closest(".table-menubar-item");0!==n.length&&"input"!==t.name&&(e.stopPropagation(),this.handleTriggerMenu(n))}}},{key:"handleTriggerMenu",value:function(e){if(!e.hasClass("disabled")){var t,n=e.attributes("data-action"),r=e.find("input".concat(Y.MENUBAR_ITEM_INPUT_CALSS)),i=void 0;if(r.length>0)i=parseInt((null===(t=r.get())||void 0===t?void 0:t.value)||"1",10);this.table.command[n](i)}this.hideContextMenu()}},{key:"handleHoverMenu",value:function(e){if(e.target){var t=Object(l.a)(e.target).closest(".table-menubar-item");if(0!==t.length){e.stopPropagation();var n=this.table.selection;if(!t.hasClass("disabled"))switch(t.attributes("data-action")){case"removeCol":this.handleHighlightCol();break;case"removeRow":this.handleHighlightRow();break;case"removeTable":this.handleHighlightTable();break;default:n.hideHighlight()}}}}},{key:"hideHighlight",value:function(e){e.stopPropagation(),this.table.selection.hideHighlight()}},{key:"drawBackgroundColor",value:function(e){var t=this.table,n=t.selection,r=t.helper;n.each((function(t){!r.isEmptyModelCol(t)&&t.element&&(e&&"transparent"!==e?t.element.style.backgroundColor=e:t.element.style.removeProperty("background-color"))}))}},{key:"setAlign",value:function(e){var t=this.table,n=t.selection,r=t.helper;n.each((function(t){!r.isEmptyModelCol(t)&&t.element&&(e&&"top"!==e?t.element.style.verticalAlign=e:t.element.style.removeProperty("vertical-align"))}))}},{key:"destroy",value:function(){var e,t,n,r,i,o,a,s,l,c,d,u,h;null===(e=this.colsHeader)||void 0===e||e.removeAllEvents(),null===(t=this.rowsHeader)||void 0===t||t.removeAllEvents(),null===(n=this.tableHeader)||void 0===n||n.removeAllEvents(),null===(r=this.table.wrapper)||void 0===r||r.removeAllEvents(),null===(i=this.tableRoot)||void 0===i||i.removeAllEvents(),null===(o=this.menuBar)||void 0===o||o.removeAllEvents(),null===(a=this.viewport)||void 0===a||a.removeAllEvents(),null===(s=this.rowDeleteButton)||void 0===s||s.removeAllEvents(),null===(l=this.colDeleteButton)||void 0===l||l.removeAllEvents(),null===(c=this.colAddButton)||void 0===c||c.removeAllEvents(),null===(d=this.colsHeader)||void 0===d||d.removeAllEvents(),null===(u=this.rowAddButton)||void 0===u||u.removeAllEvents(),null===(h=this.rowsHeader)||void 0===h||h.removeAllEvents()}}]),n}(b.EventEmitter2),Q=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e,r){var o;return Object(i.a)(this,n),(o=t.call(this)).editor=void 0,o.table=void 0,o.tableRoot=void 0,o.colsHeader=void 0,o.rowsHeader=void 0,o.tableHeader=void 0,o.tableModel=void 0,o.selectArea=void 0,o.selectRange=void 0,o.dragging=void 0,o.isShift=!1,o.prevMouseDownTd=void 0,o.prevOverTd=void 0,o.highlight=void 0,o.beginAllRow=void 0,o.beginAllCol=void 0,o.onTdMouseDown=function(e){o.selectRange=void 0;var t=o.editor;if(e.target&&Object(l.X)(t)){var n=t.change,r=Object(l.a)(e.target),i=r.closest("td");if(0!==i.length){var a=n.range.get(),s=o.getCellPoint(i),c=Object(m.a)(s,2),d=c[0],u=c[1],h=!!i.attributes("table-cell-selection");if(o.isShift){var p={row:0,col:0};if(o.prevMouseDownTd){var f=o.getCellPoint(o.prevMouseDownTd),v=Object(m.a)(f,2);p={row:v[0],col:v[1]}}else if(o.selectArea&&(p=o.selectArea.begin,o.tableModel)){var g=o.tableModel.table[p.row][p.col];!o.table.helper.isEmptyModelCol(g)&&g.element&&(o.prevMouseDownTd=Object(l.a)(g.element))}o.select(p,{row:d,col:u})}else{if(o.prevMouseDownTd=i,e instanceof MouseEvent&&2!==e.button&&o.select({row:d,col:u},{row:d,col:u}),"td"!==r.name||!h&&a.startNode.closest("td").equal(i)&&a.endNode.closest("td").equal(i))"td"===r.name&&e.preventDefault();else{if(e instanceof MouseEvent&&2===e.button&&r.attributes("table-cell-selection"))return;e.preventDefault(),o.focusCell(i)}var b=function(){o.select({row:d,col:u},{row:d,col:u}),o.dragging={trigger:{element:i}},o.addDragEvent()};if(e instanceof MouseEvent&&2===e.button)r.attributes("table-cell-selection")&&e.preventDefault();else{if("td"===r.name){var y=i.find(l.p);if(y.length>0){var w=y.last();if(w){var k,x;if(!w.isBlockCard())return b();if(((null===(k=w.get())||void 0===k?void 0:k.offsetTop)||0)+((null===(x=w.get())||void 0===x?void 0:x.clientHeight)||0)>(e instanceof MouseEvent?e:e.touches[0]).clientY)return b();var O=Object(l.a)("<p><br /></p>");y.append(O);var C=t.change.range.get();C.select(O,!0).collapse(!1),t.change.apply(C)}}}b()}}}}},o.removeDragEvent=function(){var e,t;null===(e=o.tableRoot)||void 0===e||e.removeClass("drag-select"),null===(t=o.table.wrapper)||void 0===t||t.removeClass("drag-selecting"),document.removeEventListener(l.ab?"touchend":"mouseup",o.removeDragEvent),document.removeEventListener(l.ab?"touchmove":"mousemove",o.onDragMove),o.dragging=void 0},o.onDragMove=function(e){if(o.dragging&&e.target){var t,n,r=Object(l.a)(e.target).closest("td");if(!(0===r.length||o.prevOverTd&&r.equal(o.prevOverTd)))if(o.prevOverTd=r,o.dragging.trigger.element.equal(r))null===(t=o.table.wrapper)||void 0===t||t.removeClass("drag-selecting"),o.clearSelect();else null===(n=o.table.wrapper)||void 0===n||n.addClass("drag-selecting"),o.selectCell(o.dragging.trigger.element,r)}},o.onShiftKeydown=function(e){e.target&&o.tableModel&&Object(l.X)(o.editor)&&Object(l.Y)("shift",e)&&(o.isShift=!0)},o.onKeydown=function(e){if(e.target&&o.tableModel&&Object(l.X)(o.editor)){var t=Object(l.a)(e.target).closest("td");if(0!==t.length){var n=o.getCellPoint(t),r=Object(m.a)(n,2),i=r[0],a=r[1];if(!(i<0||a<0))if(Object(l.Y)("shift+left",e)?o.selectLeft(e,t):Object(l.Y)("shift+right",e)?o.selectRigth(e,t):Object(l.Y)("shift+up",e)?o.selectUp(e,t):Object(l.Y)("shift+down",e)&&o.selectDown(e,t),Object(l.Y)("shift",e))o.isShift=!0;else{if(o.selectRange&&(o.isShift=!1,o.selectRange=void 0),Object(l.Y)("tab",e)||Object(l.Y)("mod",e)||Object(l.Y)("opt",e)||Object(l.Y)("shift",e)||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)return;setTimeout((function(){o.clearSelect()}),50)}}}},o.onShiftKeyup=function(e){!1===o.isShift&&o.selectRange&&(o.selectRange=void 0,o.clearSelect()),o.isShift=!1},o.table=r,o.editor=e,o}return Object(o.a)(n,[{key:"init",value:function(){var e=this.table.wrapper;e&&(this.tableRoot=e.find(Y.TABLE_CLASS),this.colsHeader=e.find(Y.COLS_HEADER_CLASS),this.rowsHeader=e.find(Y.ROWS_HEADER_CLASS),this.tableHeader=e.find(Y.HEADER_CLASS),this.highlight=e.find(Y.TABLE_HIGHLIGHT_CLASS),this.render("init"),this.bindEvents())}},{key:"render",value:function(e){this.refreshModel();var t=this.tableModel;if(t){var n=this.getSelectArea(),r=n.begin,i=n.end;if("mergeCell"===e||"splitCell"===e){var o=r.row<0?0:Math.min(r.row,t.rows-1),a=r.col<0?0:Math.min(r.col,t.cols-1),s=t.table[o][a];this.table.helper.isEmptyModelCol(s)&&(s=t.table[s.parent.row][s.parent.col]),!this.table.helper.isEmptyModelCol(s)&&s.element&&"mergeCell"===e&&(this.clearSelect(),this.selectCellRange(s.element))}else if("removeRow"===e){var l=r.row<0?0:Math.min(r.row,t.rows-1),c=t.table[l][0];!this.table.helper.isEmptyModelCol(c)&&c.element&&this.focusCell(c.element)}else if("removeCol"===e){var d=r.col<0?0:Math.min(r.col,t.cols-1),u=t.table[0][d];!this.table.helper.isEmptyModelCol(u)&&u.element&&this.focusCell(u.element)}else this.select(r,i);this.renderBorder()}}},{key:"renderBorder",value:function(){var e=this,t=this.tableModel;t&&t.table.forEach((function(n,r){n.forEach((function(n,i){if(!e.table.helper.isEmptyModelCol(n)){if(!n.element)return;var o=r===t.rows-1,a=i===t.cols-1;n.isMulti&&(i+n.colSpan===t.cols&&(a=!0),r+n.rowSpan===t.rows&&(o=!0)),o?n.element.classList.contains("table-last-column")||n.element.classList.add("table-last-column"):n.element.classList.contains("table-last-column")&&n.element.classList.remove("table-last-column"),a?n.element.classList.contains("table-last-row")||n.element.classList.add("table-last-row"):n.element.classList.contains("table-last-row")&&n.element.classList.remove("table-last-row")}}))}))}},{key:"bindEvents",value:function(){var e;document.addEventListener("keydown",this.onShiftKeydown),document.addEventListener("keyup",this.onShiftKeyup),null===(e=this.table.wrapper)||void 0===e||e.on("mousedown",this.onTdMouseDown).on("keydown",this.onKeydown)}},{key:"unbindEvents",value:function(){var e;document.removeEventListener("keydown",this.onShiftKeydown),document.removeEventListener("keyup",this.onShiftKeyup),null===(e=this.table.wrapper)||void 0===e||e.off("mousedown",this.onTdMouseDown).off("keydown",this.onKeydown)}},{key:"refreshModel",value:function(){this.tableRoot&&0!==this.tableRoot.length&&(this.tableModel=this.table.helper.getTableModel(this.tableRoot))}},{key:"each",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.tableModel;if(n){var r=this.getSelectArea(),i=r.begin,o=r.end;if(!(i.row<0||i.col<0))if(t)for(var a=o.row;a>-1&&a>=i.row;a--)for(var s=o.col;s>-1&&s>=i.col;s--){e(n.table[a][s],a,s)}else for(var l=i.row;l>-1&&l<=o.row;l++)for(var c=i.col;c>-1&&c<=o.col;c++){e(n.table[l][c],l,c)}}}},{key:"getCellPoint",value:function(e){var t,n,r,i=this;if("td"!==e.name)return[-1,-1];var o=null===(t=e.parent())||void 0===t?void 0:t.index();if(void 0===o||o<0)return[-1,-1];var a=null===(n=this.tableModel)||void 0===n||null===(r=n.table[o])||void 0===r?void 0:r.findIndex((function(t){var n;return e.equal((i.table.helper.isEmptyModelCol(t)?null===(n=i.tableModel)||void 0===n?void 0:n.table[t.parent.row][t.parent.col]:t).element)}));return void 0===a||a<0?[-1,-1]:[o,a]}},{key:"getCellIndex",value:function(e,t){if(!this.tableModel)return 0;for(var n=this.tableModel.table[e],r=0,i=0;i<t;i++){var o=n[i];!this.table.helper.isEmptyModelCol(o)&&o.element&&r++}return r}},{key:"getSingleCell",value:function(){return this.prevMouseDownTd?this.prevMouseDownTd:null}},{key:"getSingleCellPoint",value:function(){var e=this.getSingleCell();return e?this.getCellPoint(e):[-1,-1]}},{key:"getSelectArea",value:function(){if(this.selectArea)return this.selectArea;var e=this.getSingleCellPoint();if(!this.tableModel||-1===e[0])return{begin:{row:-1,col:-1},end:{row:-1,col:-1},count:0,allCol:!1,allRow:!1};var t=this.tableModel,n=t.cols,r=t.rows,i=t.table,o=i[e[0]][e[1]];return this.table.helper.isEmptyModelCol(o)&&(o=i[o.parent.row][o.parent.col]).element&&(e=this.getCellPoint(Object(l.a)(o.element))),{begin:{row:e[0],col:e[1]},end:{row:e[0],col:e[1]},count:-1===e[0]?0:1,allCol:1===n,allRow:1===r}}},{key:"selectCol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.tableModel){if(this.isShift)if(this.beginAllCol)e<this.beginAllCol?t=this.beginAllCol:e=this.beginAllCol;else if(this.prevMouseDownTd){var n=this.getCellPoint(this.prevMouseDownTd),r=Object(m.a)(n,2),i=(r[0],r[1]);e=i,this.beginAllCol=i}else if(this.selectArea&&(e=this.selectArea.begin.col,this.tableModel)){var o=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(o)&&o.element&&this.focusCell(o.element)}this.select({row:0,col:e},{row:this.tableModel.rows-1,col:t})}}},{key:"selectRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.tableModel){if(this.isShift)if(this.beginAllRow)e<this.beginAllRow?t=this.beginAllRow:e=this.beginAllRow;else if(this.prevMouseDownTd){var n=this.getCellPoint(this.prevMouseDownTd),r=Object(m.a)(n,2),i=r[0];r[1];e=i,this.beginAllRow=i}else if(this.selectArea&&(e=this.selectArea.begin.row,this.tableModel)){var o=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(o)&&o.element&&this.focusCell(o.element)}this.select({row:e,col:0},{row:t,col:this.tableModel.cols-1})}}},{key:"selectCell",value:function(e,t){if("td"===e.name&&"td"===t.name){var n=this.getCellPoint(e),r=this.getCellPoint(t);this.select({row:n[0],col:n[1]},{row:r[0],col:r[1]})}}},{key:"clearSelect",value:function(){this.select({row:-1,col:-1},{row:-1,col:-1})}},{key:"select",value:function(e,t){var n,r=this;if(this.tableModel){var i=e.row===t.row&&e.col===t.col,o=Math.min(e.row,t.row),a=Math.max(e.row,t.row),s=Math.min(e.col,t.col),c=Math.max(e.col,t.col);null===(n=this.tableRoot)||void 0===n||n.find("td[table-cell-selection]").removeAttributes("table-cell-selection");var d=function e(){if(!r.tableModel)return{beginCol:s,beginRow:o,endCol:c,endRow:a};for(var t=o;t<=a;t++){var n=r.tableModel.table[t];if(n)for(var i=s;i<=c;i++){var l=n[i];if(l)if(r.table.helper.isEmptyModelCol(l)){var d=r.tableModel.table[l.parent.row][l.parent.col];if(r.table.helper.isEmptyModelCol(d))continue;if(d.colSpan+l.parent.col-1===s&&l.parent.col<s)return s=l.parent.col,e();if(d.rowSpan+l.parent.row-1===o&&l.parent.row<o)return o=l.parent.row,e();if(d.rowSpan>1&&a<d.rowSpan-1+l.parent.row)return a=d.rowSpan-1+l.parent.row,e();if(d.colSpan>1&&c<d.colSpan-1+l.parent.col)return c=d.colSpan-1+l.parent.col,e()}else{if(i!==s&&l.colSpan+i-1===s)return s=i,e();if(t!==o&&l.rowSpan+t-1===o)return o=t,e();if(l.rowSpan>1&&a<l.rowSpan-1+t)return a=l.rowSpan-1+t,e();if(l.colSpan>1&&c<l.colSpan-1+i)return c=l.colSpan-1+i,e()}}}return{beginCol:s,beginRow:o,endCol:c,endRow:a}}();o=d.beginRow,a=d.endRow,s=d.beginCol,c=d.endCol;var u=0;if(o>=0&&s>=0&&a<this.tableModel.rows&&c<this.tableModel.cols)for(var h=o;h<=a;h++)for(var p=s;p<=c;p++){var f=this.tableModel.table[h];if(f){var v=f[p];v&&(this.table.helper.isEmptyModelCol(v)||(!i&&v.element&&Object(l.a)(v.element).attributes("table-cell-selection","true"),u++))}}if(i&&e.row>-1&&e.col>-1){var g,m=this.tableModel.table[e.row][e.col];m&&!this.table.helper.isEmptyModelCol(m)&&m.element&&!(null===(g=this.prevMouseDownTd)||void 0===g?void 0:g.equal(m.element))&&this.focusCell(m.element)}var b=0===s&&c===this.tableModel.cols-1,y=0===o&&a===this.tableModel.rows-1;b&&!this.beginAllRow?this.beginAllRow=o:!b&&this.beginAllRow&&(this.beginAllRow=void 0),y&&!this.beginAllCol?this.beginAllCol=s:!y&&this.beginAllCol&&(this.beginAllCol=void 0),this.selectArea=0===u||i?void 0:{begin:{row:o,col:s},end:{row:a,col:c},count:u,allCol:b,allRow:y},this.emit("select",this.selectArea)}}},{key:"focusCell",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.editor;if(Object(l.X)(n)){var r=n.change;Object(l.bb)(e)&&(e=Object(l.a)(e));var i,o=r.range.get(),a=e.find(l.p);if(a.length>0)o.select(a,!0).shrinkToElementNode().shrinkToTextNode().collapse(t),setTimeout((function(){r.range.select(o)}),20),null===(i=a.get())||void 0===i||i.focus(),this.prevMouseDownTd=e,this.selectCell(e,e)}}},{key:"selectCellRange",value:function(e){var t,n=this.editor;if(Object(l.X)(n)){var r=n.change;Object(l.bb)(e)&&(e=Object(l.a)(e));var i=r.range.get(),o=e.find(l.p);if(0!==o.length){i.select(o,!0).shrinkToElementNode();var a,s=o.children(),c=s.eq(0);if(1===s.length&&"br"===(null===c||void 0===c||null===(t=c.first())||void 0===t?void 0:t.name))i.collapse(!1),r.range.select(i),null===(a=o.get())||void 0===a||a.focus();else r.range.select(i);this.prevMouseDownTd=e,this.selectCell(e,e)}}}},{key:"addDragEvent",value:function(){var e;null===(e=this.tableRoot)||void 0===e||e.addClass("drag-select"),document.addEventListener(l.ab?"touchend":"mouseup",this.removeDragEvent),document.addEventListener(l.ab?"touchmove":"mousemove",this.onDragMove)}},{key:"selectLeft",value:function(e,t){var n,r,i,o=this.editor;if(Object(l.X)(o)){var a=this.getCellPoint(t),s=Object(m.a)(a,2),d=s[0],u=s[1];if(!(d<0||u<0)){var h=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,p=o.change.range.get();if(0===h){if(this.selectRange&&"right"===this.selectRange.type&&p.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"left",startOffset:p.startOffset,endOffset:p.endOffset};var f=p.startNode;if(0!==p.startOffset)return;if(f.prev())return;for(var v=f.parent();v&&!v.isEditable();){if(v.prev())return;v=v.parent()}}var g=(null===(r=this.selectArea)||void 0===r?void 0:r.begin)||{row:d,col:u},b=(null===(i=this.selectArea)||void 0===i?void 0:i.end)||{row:d,col:u},y=g.col!==u,w=y?g.col-1:b.col-1;w<0||(e.preventDefault(),w===u&&2===h&&(w=-1),y?this.select(Object(c.a)(Object(c.a)({},g),{},{col:w}),b):this.select(g,Object(c.a)(Object(c.a)({},b),{},{col:w})))}}}},{key:"selectRigth",value:function(e,t){var n,r,i,o=this.editor;if(Object(l.X)(o)&&this.tableModel){e.stopPropagation();var a=this.getCellPoint(t),s=Object(m.a)(a,2),d=s[0],u=s[1];if(!(d<0||u<0)){var h=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,p=o.change.range.get();if(0===h){var f;if(this.selectRange&&"left"===this.selectRange.type&&p.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"right",startOffset:p.startOffset,endOffset:p.endOffset};var v=p.endNode;if(v.isText()&&p.endOffset!==v.text().length)return;var g=v.children();if(v.isElement()&&p.endOffset!==g.length&&"br"!==(null===(f=v.last())||void 0===f?void 0:f.name))return;if(v.next())return;for(var b=v.parent();b&&!b.isEditable();){if(b.next())return;b=b.parent()}}var y=this.tableModel.cols,w=(null===(r=this.selectArea)||void 0===r?void 0:r.begin)||{row:d,col:u},k=(null===(i=this.selectArea)||void 0===i?void 0:i.end)||{row:d,col:u},x=w.col!==u,O=x?w.col+1:k.col+1;O>y-1||(e.preventDefault(),O===u&&2===h&&(O=-1),x?this.select(Object(c.a)(Object(c.a)({},w),{},{col:O}),k):this.select(w,Object(c.a)(Object(c.a)({},k),{},{col:O})))}}}},{key:"selectUp",value:function(e,t){var n,r,i,o=this.editor;if(Object(l.X)(o)&&this.tableModel){var a=this.getCellPoint(t),s=Object(m.a)(a,2),d=s[0],u=s[1];if(!(d<0||u<0)){var h=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,p=o.change.range.get();if(0===h){if(this.selectRange&&"bottom"===this.selectRange.type&&p.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"top",startOffset:p.startOffset,endOffset:p.endOffset};var f=p.getBoundingClientRect(),v=t.find(l.p).getBoundingClientRect();if(0!==f.width&&0===f.height&&f.top-((null===v||void 0===v?void 0:v.top)||0)>10)return}var g=(null===(r=this.selectArea)||void 0===r?void 0:r.begin)||{row:d,col:u},b=(null===(i=this.selectArea)||void 0===i?void 0:i.end)||{row:d,col:u},y=g.row!==d,w=y?g.row-1:b.row-1;e.preventDefault(),w<0||(w===d&&2===h&&(w=-1),y?this.select(Object(c.a)(Object(c.a)({},g),{},{row:w}),b):this.select(g,Object(c.a)(Object(c.a)({},b),{},{row:w})))}}}},{key:"selectDown",value:function(e,t){var n,r,i,o=this.editor;if(Object(l.X)(o)&&this.tableModel){var a=this.getCellPoint(t),s=Object(m.a)(a,2),d=s[0],u=s[1];if(!(d<0||u<0)){var h=(null===(n=this.selectArea)||void 0===n?void 0:n.count)||0,p=o.change.range.get();if(p.shrinkToElementNode(),0===h){if(this.selectRange&&"top"===this.selectRange.type&&p.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"bottom",startOffset:p.startOffset,endOffset:p.endOffset};var f=p.getBoundingClientRect(),v=t.find(l.p).getBoundingClientRect();if(0!==f.width&&0===f.height&&((null===v||void 0===v?void 0:v.bottom)||0)-f.bottom>10)return}var g=this.tableModel.rows,b=(null===(r=this.selectArea)||void 0===r?void 0:r.begin)||{row:d,col:u},y=(null===(i=this.selectArea)||void 0===i?void 0:i.end)||{row:d,col:u},w=b.row!==d,k=w?b.row+1:y.row+1;k>g-1||(e.preventDefault(),k===d&&2===h&&(k=-1),w?this.select(Object(c.a)(Object(c.a)({},b),{},{row:k}),y):this.select(b,Object(c.a)(Object(c.a)({},y),{},{row:k})))}}}},{key:"getSelectionHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.tableModel,n=this.table.helper;if(!t||!this.tableRoot)return null;var r={row:0,col:0},i={row:t.rows-1,col:t.cols-1};if(!e){var o=this.getSelectArea();r=o.begin,i=o.end}for(var a=this.tableRoot.find("col"),s=[],c=0,d=r.col;d<=i.col;d++){var u,h=null===(u=a.eq(d))||void 0===u?void 0:u.get();h&&(s.push('<col width="'.concat(h.width,'" />')),c+=parseInt(h.width))}for(var p="<colgroup>".concat(s.join(""),"</colgroup>"),f=[],v=r.row;v<=i.row;v++){for(var g=[],m=void 0,b=r.col;b<=i.col;b++){var y=t.table[v][b],w=void 0,k=void 0,x=void 0;if(!n.isEmptyModelCol(y)&&y.element&&(x=y.element.cloneNode(!0),y.element.parentElement&&(m=Object(l.a)(y.element.parentElement).css("height"))),!n.isEmptyModelCol(y)&&y.isMulti&&(w=Math.min(v+y.rowSpan-1,i.row)-v+1,k=Math.min(b+y.colSpan-1,i.col)-b+1),n.isEmptyModelCol(y)){var O=t.table[y.parent.row][y.parent.col];if(y.parent.row===v&&y.parent.col<r.col&&b===r.col){var C,E=r.col-y.parent.col;if(!n.isEmptyModelCol(O))k=Math.min(O.colSpan-E,i.col-r.col+1),w=O.rowSpan,x=null===(C=O.element)||void 0===C?void 0:C.cloneNode(!0)}if(y.parent.col===b&&y.parent.row<r.row&&v===r.row){var j,M=r.row-y.parent.row;if(!n.isEmptyModelCol(O))w=Math.min(O.rowSpan-M,i.row-r.row+1),k=O.colSpan,x=null===(j=O.element)||void 0===j?void 0:j.cloneNode(!0)}}if(x){w&&x.setAttribute("rowspan","".concat(w)),k&&x.setAttribute("colspan","".concat(k));var N=x.firstChild;if(N.classList.contains("table-main-content")){var S=x.cloneNode(!1);S.innerHTML=N.innerHTML,g.push(S.outerHTML)}else g.push(x.outerHTML)}}var T=Object(l.a)("<tr>".concat(g.join(""),"</tr>"));m&&T.css("height",m),f.push(T.get().outerHTML)}return'<body><meta name="aomao" content="table" /><table style="width:'.concat(c,'px">').concat(p).concat(f.join(""),"</table></body>")}},{key:"hasMergeCell",value:function(){var e=this.table,t=this.tableModel;if(!t)return!1;var n=this.getSelectArea(),r=n.begin;n.end;if(1!==n.count)return!1;var i=t.table[r.row][r.col];return!e.helper.isEmptyModelCol(i)&&!0===i.isMulti}},{key:"isRowSelected",value:function(){return!!this.selectArea&&this.selectArea.allRow}},{key:"isColSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol}},{key:"isTableSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol&&this.selectArea.allRow}},{key:"showHighlight",value:function(e){var t,n,r,i,o,a,s,c=this.table.helper,d=this.tableModel;if(d){var u=e.begin,h=e.end,p=e.allCol,f=e.allRow;if(!(u.row<0||u.col<0)){var v=u.row,g=h.row,m=u.col,b=h.col;this.hideHighlight();for(var y=null===(t=this.colsHeader)||void 0===t?void 0:t.find(Y.COLS_HEADER_ITEM_CLASS),w=null===(n=this.rowsHeader)||void 0===n?void 0:n.find(Y.ROWS_HEADER_ITEM_CLASS),k=v;k<=g;k++)for(var x=m;x<=b;x++){var O=d.table[k][x];if(this.table.helper.isEmptyModelCol(O)){u.row>O.parent.row&&(u.row=O.parent.row),u.col>=O.parent.col&&(u.col=O.parent.col);var C=d.table[O.parent.row][O.parent.col];this.table.helper.isEmptyModelCol(C)||(C.rowSpan>1&&h.row<C.rowSpan-1+O.parent.row&&(h.row=C.rowSpan-1+O.parent.row),C.colSpan>1&&h.col<C.colSpan-1+O.parent.col&&(h.col=C.colSpan-1+O.parent.col))}else this.table.helper.isEmptyModelCol(O)||(O.rowSpan>1&&h.row<O.rowSpan-1+k&&(h.row=O.rowSpan-1+k),O.colSpan>1&&h.col<O.colSpan-1+x&&(h.col=O.colSpan-1+x))}for(var E,j=0,M=0,N=u.row;N<=h.row;N++){var S,T=d.table[N][u.col];if(!c.isEmptyModelCol(T)&&T.element)j+=T.element.offsetHeight,null===w||void 0===w||null===(S=w.eq(N))||void 0===S||S.addClass("active")}for(var _=u.col;_<=h.col;_++){var A,I=d.table[u.row][_];if(!c.isEmptyModelCol(I)&&I.element)M+=I.element.offsetWidth,null===y||void 0===y||null===(A=y.eq(_))||void 0===A||A.addClass("active")}if(h.row===d.rows-1&&h.col===d.cols-1)null===(E=this.tableHeader)||void 0===E||E.addClass("active");var D=d.table[u.row][u.col],z=0,L=0;if(!c.isEmptyModelCol(D)&&D.element){var R,B=null===(R=this.tableRoot)||void 0===R?void 0:R.parent(),P=null===B||void 0===B?void 0:B.getBoundingClientRect(),F=D.element.getBoundingClientRect();z+=F.top-((null===P||void 0===P?void 0:P.top)||0)-13,L+=F.left-((null===P||void 0===P?void 0:P.left)||0)}if(L+=Object(l.hb)((null===(r=this.table.wrapper)||void 0===r||null===(i=r.find(".data-scrollbar"))||void 0===i?void 0:i.css("left"))||"0")+Object(l.hb)((null===(o=this.table.wrapper)||void 0===o?void 0:o.css("margin-left"))||"0"),z+=(null===(a=this.colsHeader)||void 0===a||null===(s=a.find(Y.COLS_HEADER_ITEM_CLASS).get())||void 0===s?void 0:s.offsetHeight)||0,j>0&&M>0){var H,q,U,W,V,G,Z,X,Q;if(null===(H=this.highlight)||void 0===H||H.css("width","".concat(M,"px")),null===(q=this.highlight)||void 0===q||q.css("height","".concat(j,"px")),null===(U=this.highlight)||void 0===U||U.css("top","".concat(z,"px")),null===(W=this.highlight)||void 0===W||W.css("left","".concat(L,"px")),null===(V=this.highlight)||void 0===V||V.show("block"),null===(G=this.table.wrapper)||void 0===G||G.addClass("data-table-highlight"),p)null===(Z=this.table.wrapper)||void 0===Z||Z.addClass("data-table-highlight-row");if(f)null===(X=this.table.wrapper)||void 0===X||X.addClass("data-table-highlight-col");if(p&&f)null===(Q=this.table.wrapper)||void 0===Q||Q.addClass("data-table-highlight-all")}}}}},{key:"hideHighlight",value:function(){var e,t,n,r,i,o,a,s;null===(e=this.highlight)||void 0===e||e.hide(),null===(t=this.colsHeader)||void 0===t||t.find(".active").removeClass("active"),null===(n=this.rowsHeader)||void 0===n||n.find(".active").removeClass("active"),null===(r=this.tableHeader)||void 0===r||r.removeClass("active"),null===(i=this.table.wrapper)||void 0===i||i.removeClass("data-table-highlight"),null===(o=this.table.wrapper)||void 0===o||o.removeClass("data-table-highlight-row"),null===(a=this.table.wrapper)||void 0===a||a.removeClass("data-table-highlight-col"),null===(s=this.table.wrapper)||void 0===s||s.removeClass("data-table-highlight-all")}},{key:"destroy",value:function(){this.unbindEvents()}}]),n}(b.EventEmitter2),K=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e,r){var o;return Object(i.a)(this,n),(o=t.call(this)).editor=void 0,o.table=void 0,o.tableCleared=!1,o.rowCleared=!1,o.colCleared=!1,o.tableRoot=void 0,o.colsHeader=void 0,o.rowsHeader=void 0,o.tableHeader=void 0,o.viewport=void 0,o.clearFormat=function(){var e=o.table,t=e.selection,n=e.helper;t.getSelectArea();t.each((function(e){!n.isEmptyModelCol(e)&&e.element&&e.element.removeAttribute("style")})),o.emit("actioned","clearFormat")},o.hasCopyData=function(){return!!o.table.helper.getCopyData()},o.clearCopyData=function(){o.table.helper.clearCopyData()},o.editor=e,o.table=r,o}return Object(o.a)(n,[{key:"init",value:function(){var e=this.table.wrapper;e&&(this.tableRoot=e.find(Y.TABLE_CLASS),this.colsHeader=e.find(Y.COLS_HEADER_CLASS),this.rowsHeader=e.find(Y.ROWS_HEADER_CLASS),this.tableHeader=e.find(Y.HEADER_CLASS),this.viewport=e.find(Y.VIEWPORT))}},{key:"insertColAt",value:function(e,t,n,r){var i,o,a=this,s=this.table,c=s.selection,d=s.wrapper,u=c.tableModel;if(d&&u&&this.tableRoot){var h=e,p=n?"after":"before",f=null===(i=d.find(Y.COLS_HEADER_ITEM_CLASS).eq(h))||void 0===i?void 0:i.get(),v=n?h+1:h,g=d.find(Y.COLS_HEADER_CLASS),m=0;r||(r=f.offsetWidth),Array.isArray(r)?r.forEach((function(e){m+=e})):"number"===typeof r&&(m=t*r),g.css("width",g.get().offsetWidth+m+"px");var b=this.tableRoot.find("colgroup"),y=d.find("tr"),w=this.tableRoot.find("col"),k=null===(o=w.eq(h))||void 0===o?void 0:o.clone();if(k){for(var x=t,O=this.editor.nodeId;x>0;){var C=Object(l.a)(f.outerHTML);Object(l.a)(f)[p](C);var E=Array.isArray(r)?r[t-x]:r;C.css({width:"".concat(E,"px")});var j=null===k||void 0===k?void 0:k.clone();j.removeAttributes(l.l),j.attributes("width",E),O.create(j);var M=w[e];"after"===p?Object(l.a)(M).after(j):b[0].insertBefore(j[0],M),x--}y.each((function(e,n){for(var r=c.getCellIndex(n,v),i=0;i<t;i++){var o=e.insertCell(r);o.innerHTML=a.table.template.getEmptyCell(),Object(l.a)(o).attributes(l.m,"table-cell-selection"),O.generate(o)}}));for(var N=arguments.length,S=new Array(N>4?N-4:0),T=4;T<N;T++)S[T-4]=arguments[T];this.emit.apply(this,["actioned","insertCol"].concat(S)),c.selectArea&&c.selectCol(e,e+t-1)}}}},{key:"insertCol",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.table,i=r.selection,o=r.wrapper,a=i.tableModel;if(o&&a){var s=i.getSelectArea(),l="left"===e,c="end"===e||!e,d=o.find(Y.COLS_HEADER_ITEM_CLASS),u=a.cols-1;c||(u=l?s.begin.col:s.end.col);var h=l?u-1:u+1;h<0?(h=0,l=!1):l||u!==a.cols-1||(h--,l=!0);for(var p=null===(t=d.eq(u))||void 0===t?void 0:t.get().offsetWidth,f=arguments.length,v=new Array(f>2?f-2:0),g=2;g<f;g++)v[g-2]=arguments[g];if(this.insertColAt.apply(this,[h,n,l,p].concat(v)),c){var m,b=null===(m=this.viewport)||void 0===m?void 0:m.get();if(!b)return;b.scrollLeft=b.scrollWidth-b.offsetWidth}}}},{key:"removeCol",value:function(){var e=this,t=this.table,n=t.selection,r=t.conltrollBar,i=t.helper,o=n.tableModel;if(o&&this.tableRoot){var a=o.table,s=Object(c.a)({},n.getSelectArea());s.end.col-s.begin.col===0&&n.each((function(e){i.isEmptyModelCol(e)||(s.end.col+=e.colSpan-1)}));var d=s.end.col-s.begin.col+1,u=this.tableRoot.find("colgroup"),h=this.tableRoot.find("tr"),p=u.find("col");if(s.allCol)this.removeTable();else{for(var f=s.end.col;f>=s.begin.col;f--){var v;r.removeCol(f),null===(v=p.eq(f))||void 0===v||v.remove()}a.forEach((function(t,n){for(var r=s.end.col;r>=s.begin.col;r--){var o=t[r];if(i.isEmptyModelCol(o)){var c=a[o.parent.row][o.parent.col];if(!i.isEmptyModelCol(c)&&o.parent.col<s.begin.col){var u=Math.min(d,o.parent.col+c.colSpan-s.begin.col);c.element&&(c.element.colSpan=c.colSpan-u)}}else{var p;if(o.isMulti){var f=r+o.colSpan-1>s.end.col,v=s.end.col+1-r;if(f){for(var g,m,b=0,y=0;y<=s.end.col;y++)i.isEmptyModelCol(t[y])||b++;var w=null===(g=h.eq(n))||void 0===g||null===(m=g.get())||void 0===m?void 0:m.insertCell(b);if(!w)return;w.setAttribute(l.m,"table-cell-selection"),w.innerHTML=e.table.template.getEmptyCell(),w.colSpan=o.colSpan-v,w.rowSpan=o.rowSpan,e.editor.nodeId.generate(w)}}null===(p=o.element)||void 0===p||p.remove()}}}));for(var g=arguments.length,m=new Array(g),b=0;b<g;b++)m[b]=arguments[b];this.emit.apply(this,["actioned","removeCol"].concat(m))}}}},{key:"insertColLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertCol("left",e)}},{key:"insertColRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertCol("right",e)}},{key:"insertRowAt",value:function(e,t,n){var r=this,i=this.table,o=i.wrapper,a=i.selection,s=i.helper,c=a.tableModel;if(o&&c){var d=n?"after":"before",u=e,h=o.find(Y.ROWS_HEADER_ITEM_CLASS)[u],p=n?u:u+1,f=[];c.table[u].forEach((function(e,r){if(s.isEmptyModelCol(e)||!e.isMulti)if(s.isEmptyModelCol(e)){var i=c.table[e.parent.row][e.parent.col];!s.isEmptyModelCol(i)&&e.parent.row<p&&e.parent.row+i.rowSpan-1>=p?i.element.rowSpan=i.rowSpan+t:!s.isEmptyModelCol(i)&&e.parent.row<u&&e.parent.col===r&&f.push({tdBase:i.element})}else f.push({tdBase:e.element});else!n&&e.rowSpan>1&&p<=u+e.rowSpan-1?e.element.rowSpan=e.rowSpan+t:f.push({tdBase:e.element})}));for(var v=t,g=this.editor.nodeId,m=function(){var e,t,n=null===(e=r.tableRoot)||void 0===e||null===(t=e.get())||void 0===t?void 0:t.insertRow(p);n&&(f.forEach((function(e){var t=n.insertCell();t.setAttribute(l.m,"table-cell-selection"),t.innerHTML=r.table.template.getEmptyCell(),t.colSpan=e.tdBase.colSpan})),Object(l.a)(h)[d](Object(l.a)(h.outerHTML)),g.generate(n),g.generateAll(n),v--)};v>0;)m();for(var b=arguments.length,y=new Array(b>3?b-3:0),w=3;w<b;w++)y[w-3]=arguments[w];this.emit.apply(this,["actioned","insertRow"].concat(y)),a.selectArea&&a.selectRow(e,e+t-1)}}},{key:"insertRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.table,r=n.selection,i=n.helper,o=r.tableModel;if(o){var a=r.getSelectArea(),s="up"===e,l="end"===e||!e,c=o.rows-1;if(!l){var d=a.end.row;r.each((function(e){i.isEmptyModelCol(e)||(d+=e.rowSpan-1)})),c=s?a.begin.row:d}for(var u=c,h=arguments.length,p=new Array(h>2?h-2:0),f=2;f<h;f++)p[f-2]=arguments[f];this.insertRowAt.apply(this,[u,t,s].concat(p))}}},{key:"insertRowUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertRow("up",e)}},{key:"insertRowDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.insertRow("down",e)}},{key:"removeRow",value:function(){var e=this,t=this.table,n=t.selection,r=t.conltrollBar,i=t.helper,o=n.tableModel;if(o&&this.tableRoot){var a=o.table,s=Object(c.a)({},n.getSelectArea()),d=s.begin,u=s.end;u.row-d.row===0&&n.each((function(e){i.isEmptyModelCol(e)||(u.row+=e.rowSpan-1)}));var h=u.row-d.row+1,p=this.tableRoot.find("tr");if(s.allRow)this.removeTable();else{for(var f=function(t){a[t].forEach((function(r,o){if(!i.isEmptyModelCol(r)&&r.isMulti&&r.rowSpan>1&&t+r.rowSpan-1>u.row){var s=n.getCellIndex(u.row+1,o),c=p[u.row+1].insertCell(s),f=u.row-t+1;c.setAttribute(l.m,"table-cell-selection"),c.innerHTML=e.table.template.getEmptyCell(),c.colSpan=r.colSpan,c.rowSpan=r.rowSpan-f,e.editor.nodeId.generate(c)}if(i.isEmptyModelCol(r)){var v=a[r.parent.row][r.parent.col];if(!i.isEmptyModelCol(v)&&r.parent.row<d.row){var g=Math.min(h,r.parent.row+v.rowSpan-d.row);v.element.rowSpan=v.rowSpan-g}}}))},v=d.row;v<=u.row;v++)f(v);for(var g=u.row;g>=d.row;g--){var m;null===(m=this.tableRoot.get())||void 0===m||m.deleteRow(g),r.removeRow(g)}for(var b=arguments.length,y=new Array(b),w=0;w<b;w++)y[w]=arguments[w];this.emit.apply(this,["actioned","removeRow"].concat(y))}}}},{key:"removeTable",value:function(){var e=this.editor;Object(l.X)(e)||this.emit("tableRemoved"),e.card.remove(this.table.id)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.table,n=t.selection,r=t.helper,i=n.getSelectionHtml(e);i&&(this.editor.clipboard.copy(i),r.copyHTML(i))}},{key:"mockCopy",value:function(){var e=this.table,t=e.selection,n=e.helper,r=t.getSelectionHtml();r&&n.copyHTML(r)}},{key:"shortcutCopy",value:function(e){var t,n,r,i=this.table,o=i.selection,a=i.helper,s=o.getSelectionHtml();s&&(null===(t=e.clipboardData)||void 0===t||t.clearData(),null===(n=e.clipboardData)||void 0===n||n.setData("text/plain",Object(l.a)(s).html()),null===(r=e.clipboardData)||void 0===r||r.setData("text/html",s),a.copyHTML(s),e.preventDefault())}},{key:"cut",value:function(){this.copy(),this.clear()}},{key:"shortcutCut",value:function(e){this.shortcutCopy(e),this.clear()}},{key:"clear",value:function(){var e=this,t=this.table,n=t.selection,r=t.helper,i=n.getSelectArea();if(i.allCol&&i.allRow){if(this.tableCleared)return this.removeTable(),void(this.tableCleared=!1);this.tableCleared=!0}if(i.allRow){if(this.rowCleared)return this.removeRow(),void(this.rowCleared=!1);this.rowCleared=!0}if(i.allCol){if(this.colCleared)return this.removeCol(),void(this.colCleared=!1);this.colCleared=!0}n.each((function(t){!r.isEmptyModelCol(t)&&t.element&&(t.element.innerHTML=e.table.template.getEmptyCell())})),this.emit("actioned","clear")}},{key:"mockPaste",value:function(){var e=this.table.helper.getCopyData();if(e){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.paste.apply(this,[e].concat(n))}}},{key:"shortcutPaste",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.editor.clipboard.getData(e);this.paste(t)}},{key:"paste",value:function(e){var t=this.table,n=t.selection,r=t.helper,i=n.tableModel;if(i){var o=n.getSelectArea(),a=o.begin,s=o.end,c=a.row===s.row&&a.col===s.col,d=e.html;e.text;if(d){var u=this.editor,h=u.schema,p=u.conversion,f=new l.u(d,u).toValue(h,p),v=r.trimBlankSpan(Object(l.a)(f));u.nodeId.generateAll(v,!0);for(var g=arguments.length,m=new Array(g>1?g-1:0),b=1;b<g;b++)m[b-1]=arguments[b];if("table"===v.name){r.normalizeTable(v);var y=r.getTableModel(v),w=y.rows,k=y.cols,x=y.table[0][0],O=i.table[a.row];if(!O)return;var C=O[a.col];if(!C||r.isEmptyModelCol(x)||r.isEmptyModelCol(C))return;var E=x.rowSpan,j=x.colSpan;if(E===w&&j===k&&!o&&x.element)return r.copyTo(x.element,C.element),void this.emit.apply(this,["actioned","paste"].concat(m));if(c){if(k+a.col>i.cols){var M=k+a.col-i.cols;this.insertCol("end",M,!0)}if(w+a.row>i.rows){var N=w+a.row-i.rows;this.insertRow("end",N,!0)}n.select(a,{row:a.row+w-1,col:a.col+k-1})}var S=n.getSelectArea();m[0]||this.splitCell(!0),n.each((function(e,t,n){var i=(t-S.begin.row)%w,o=(n-S.begin.col)%k,a=y.table[i][o];if(a){if(!r.isEmptyModelCol(a)&&a.isMulti&&!r.isEmptyModelCol(e)){var s=e.element;return s.rowSpan=Math.min(a.rowSpan,S.end.row-t+1),s.colSpan=Math.min(a.colSpan,S.end.col-n+1),void r.copyTo(a.element,s)}var l;if(r.isEmptyModelCol(a))r.isEmptyModelCol(e)||null===(l=e.element)||void 0===l||l.remove();else a.element&&!r.isEmptyModelCol(e)&&e.element&&r.copyTo(a.element,e.element)}}))}else this.mergeCell(!0);this.emit.apply(this,["actioned","paste"].concat(m))}}}},{key:"mergeCell",value:function(){var e=this.table,t=e.selection,n=e.helper,r=t.selectArea,i=t.tableModel;if(r&&i){var o=r.begin,a=r.end,s=a.row-o.row+1,c=a.col-o.col+1,d=[],u=null;if(this.splitCell(),t.select(o,a),t.each((function(e,t,r){if(!n.isEmptyModelCol(e))return r===o.col&&t===o.row?((u=e.element).rowSpan=s,void(u.colSpan=c)):void(e.element&&(""!==e.element.innerText.trim()&&d.unshift(Object(l.a)(e.element).find(Y.TABLE_TD_CONTENT_CLASS).html()),e.element.remove()))})),u){var h=Object(l.a)(u).find(Y.TABLE_TD_CONTENT_CLASS);h.html(h.html()+d.join(""));for(var p=arguments.length,f=new Array(p),v=0;v<p;v++)f[v]=arguments[v];this.emit.apply(this,["actioned","mergeCell"].concat(f))}}}},{key:"splitCell",value:function(){var e=this,t=this.table,n=t.selection,r=t.helper,i=n.tableModel;if(i&&this.tableRoot){var o=this.tableRoot.find("tr");n.each((function(t,a,s){if(!r.isEmptyModelCol(t))for(var c=a+t.rowSpan,d=s+t.colSpan,u=c-1;u>=a;u--){u>=o.length&&e.insertRowAt(a,1);for(var h=u>=o.length?e.tableRoot.find("tr")[u]:o[u],p=d-1;p>=s;p--){var f=i.table[u][p];if(!r.isEmptyModelCol(f)&&f.isMulti)f.element=f.element,f.element.colSpan=1,f.element.rowSpan=1;else if(r.isEmptyModelCol(f)){var v=n.getCellIndex(u,p),g=h.insertCell(v);e.editor.nodeId.generate(g),g.setAttribute(l.m,"table-cell-selection"),g.innerHTML=e.table.template.getEmptyCell()}}}}));for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];this.emit.apply(this,["actioned","splitCell"].concat(s))}}}]),n}(b.EventEmitter2),$=function e(){Object(i.a)(this,e)};$.colors=void 0,$._map=void 0,$.getStroke=void 0,$.getColors=void 0,$.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],$._map=function(){for(var e={},t=$.colors,n=0,r=t.length;n<r;n++)for(var i=0,o=t[n].length;i<o;i++){e[t[n][i]]={y:n,x:i}}return e}(),$.getStroke=function(e){var t=$._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},$.getColors=function(){return this.colors};var J=Object(f.a)("editor"),ee=Object(f.a)("options"),te=Object(f.a)("color"),ne=Object(f.a)("button"),re=Object(f.a)("cardId"),ie=Object(f.a)("container"),oe=Object(f.a)("position"),ae=function(){function e(t,n,r){var o=this;Object(i.a)(this,e),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),this.windowClick=function(e){var t=e.target;t&&0===Object(l.a)(t).closest(".data-table-color-tool,.table-color-dropdown-arrow").length&&o.remove()},Object(p.a)(this,J)[J]=t,Object(p.a)(this,re)[re]=n,Object(p.a)(this,ee)[ee]=r,Object(p.a)(this,oe)[oe]=new l.w(Object(p.a)(this,J)[J]),Object(p.a)(this,te)[te]=r.defaultColor||"transparent",Object(p.a)(this,ne)[ne]=Object(l.a)('<div class="table-color-dropdown-trigger">\n        <button type="button" class="table-color-dropdown-button-text">\n            <svg width="16px" height="16px" viewBox="0 0 16 16" style="margin-bottom: '.concat("transparent"===Object(p.a)(this,te)[te]?-5:-3,'">\n                <g ="none" strokeWidth="1" fill="none" fillRule="evenodd">\n                    <path d="M11.9745711,7.921875 C11.9745711,7.921875 13.2147672,9.2863447 13.2147672,10.1226326 C13.2147672,10.8142992 12.6566789,11.3802083 11.9745711,11.3802083 C11.2924632,11.3802083 10.734375,10.8142992 10.734375,10.1226326 C10.734375,9.2863447 11.9745711,7.921875 11.9745711,7.921875 Z M9.07958999,6.47535893 L6.28501575,3.68078468 L3.4904415,6.47535893 L9.07958999,6.47535893 Z M5.3326566,3.04215357 L4.28223263,1.9917296 C4.22692962,1.93642659 4.22692962,1.84676271 4.28223263,1.7914597 L5.03228902,1.0414033 C5.08759203,0.986100299 5.17725591,0.986100299 5.23255892,1.0414033 L6.4546098,2.26345418 C6.46530408,2.27146914 6.4755605,2.28033918 6.48528564,2.29006432 L10.4848531,6.28963174 C10.5954591,6.40023775 10.5954591,6.57956552 10.4848531,6.69017153 L6.4838816,10.691143 C6.37327559,10.801749 6.19394782,10.801749 6.08334181,10.691143 L2.08377439,6.69157557 C1.97316838,6.58096956 1.97316838,6.40164179 2.08377439,6.29103578 L5.3326566,3.04215357 Z" fill="#595959"/>\n                    <rect stroke="').concat($.getStroke(Object(p.a)(this,te)[te]),'" fill="').concat(Object(p.a)(this,te)[te],'" strokeWidth="0.5" x="2" y="12.75" width="12" height="1.5" rx="0.125" />\n                </g>\n            </svg>\n        </button>\n        <button type="button" class="table-color-dropdown-arrow">\n            <span class="table-color-dropdown-empty"></span>\n            <span class="data-icon data-icon-arrow"></span>\n        </button>\n        </div>')),Object(p.a)(this,ne)[ne].find(".table-color-dropdown-arrow").on("mousedown",(function(e){e.preventDefault(),void 0!==Object(p.a)(o,ie)[ie]&&Object(p.a)(o,ie)[ie].length>0?o.remove():o.render()})),Object(p.a)(this,ne)[ne].find(".table-color-dropdown-button-text").on("mousedown",(function(e){e.preventDefault();var t=Object(p.a)(o,ee)[ee].onChange;t&&t(Object(p.a)(o,te)[te])}))}return Object(o.a)(e,[{key:"getButton",value:function(){return Object(p.a)(this,ne)[ne]}},{key:"select",value:function(e){var t=$.getStroke(e),n=Object(p.a)(this,ne)[ne].find("rect");n.attributes("stroke",t),n.attributes("fill",e),Object(p.a)(this,ne)[ne].find("svg").css("margin-bottom","transparent"===e?-5:-3)}},{key:"change",value:function(e){Object(p.a)(this,te)[te]=e,this.select(e);var t=Object(p.a)(this,ee)[ee].onChange;t&&t(e)}},{key:"toState",value:function(e,t){var n=e.hex?w()(e.hex):w()(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#".concat(a),rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}}},{key:"render",value:function(){var e,t=this;Object(p.a)(this,ie)[ie]=Object(l.a)('<div class="data-table-color-tool'.concat(l.ab?" data-table-color-tool-mobile":"",'" ').concat(l.k,'="').concat(l.F,'" ').concat(l.D,'="').concat(Object(p.a)(this,re)[re],'"></div>'));var n=Object(l.a)('<div class="data-table-color-tool-panle"></div>'),r=Object(p.a)(this,ee)[ee].colors,i=function(e,r){var i=t.toState(e.color||"#FFFFFF"),o=["#ffffff","#fafafa","transparent"].indexOf(i.hex)>=0,a=Object(l.a)('<span class="data-table-color-tool-item'.concat(o?" data-table-color-tool-border":"",'"><span style="background-color:').concat(e.color).concat(e.border?";".concat(o?"":"border:1px solid ".concat(e.border)):"",'"><svg\n            style="fill: ').concat("#8C8C8C"===e.color.toUpperCase()?"#FFFFFF":"#8C8C8C",";\n            display: ").concat(e.color===Object(p.a)(t,te)[te]&&!1!==r?"block":"none",';"\n            viewBox="0 0 18 18"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg></span></span>'));return a.on("mousedown",(function(i){i.preventDefault(),i.stopPropagation(),n.find("svg").each((function(e){e.style.display="none"})),!1!==r&&a.find("svg").css("display","block"),t.change(e.color)})),a},o=Object(l.a)('<div class="data-table-color-tool-group data-table-color-tool-default"></div>'),a=i({color:"transparent"},!1);o.append(a),o.on("mousedown",(function(e){e.preventDefault(),n.find("svg").each((function(e){e.style.display="none"})),t.change("transparent")}));var s=Object(p.a)(this,J)[J].language.get("table","color","nonFillText");o.append(Object(l.a)('<span class="data-table-color-tool-default-text">'.concat(s,"</span>"))),Object(p.a)(this,ie)[ie].append(o),r.forEach((function(e){var t=Object(l.a)('<div class="data-table-color-tool-group"></div>');e.forEach((function(e){var n=i(e);t.append(n)})),n.append(t)})),Object(p.a)(this,ie)[ie].append(n),null===(e=Object(p.a)(this,oe)[oe])||void 0===e||e.bind(Object(p.a)(this,ie)[ie],Object(p.a)(this,ne)[ne]),document.addEventListener("mousedown",this.windowClick,!0)}},{key:"remove",value:function(){var e,t;null===(e=Object(p.a)(this,ie)[ie])||void 0===e||e.remove(),null===(t=Object(p.a)(this,oe)[oe])||void 0===t||t.destroy(),document.removeEventListener("mousedown",this.windowClick,!0),Object(p.a)(this,ie)[ie]=void 0}},{key:"destroy",value:function(){this.remove();var e=Object(p.a)(this,ee)[ee].onDestroy;e&&e()}}]),e}();function se(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}se('.table-color-dropdown-trigger {\r\n    display: flex;\r\n}\r\n\r\n.table-color-dropdown-trigger:hover {\r\n    background: transparent !important;\r\n}\r\n\r\n.table-color-dropdown-trigger .table-color-dropdown-button-text, .table-color-dropdown-trigger .table-color-dropdown-arrow {\r\n    display: inline-block;\r\n    width: auto;\r\n    margin: 0;\r\n    text-align: center;\r\n    background-color: transparent;\r\n    border: 1px solid transparent;\r\n    border-radius: 3px 3px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: #595959;\r\n    outline: none;\r\n    margin-right: 0;\r\n    min-width: 26px;\r\n    border-radius: 3px 0 0 3px;\r\n    padding: 0 4px;\r\n}\r\n\r\n.table-color-dropdown-trigger:hover .table-color-dropdown-button-text, .table-color-dropdown-trigger:hover .table-color-dropdown-arrow\r\n{\r\n    border: 1px solid #e8e8e8;\r\n}\r\n\r\n.table-color-dropdown-trigger .table-color-dropdown-button-text:hover, .table-color-dropdown-trigger .table-color-dropdown-arrow:hover {\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n.table-color-dropdown-trigger .table-color-dropdown-arrow {\r\n    margin-left: -1px;\r\n    min-width: 17px;\r\n    text-align: center;\r\n    border-radius: 0 3px 3px 0;\r\n}\r\n\r\n.table-color-dropdown-trigger .table-color-dropdown-arrow .table-color-dropdown-empty {\r\n    display: inline-block;\r\n}\r\n\r\n.table-color-dropdown-trigger .table-color-dropdown-arrow .data-icon-arrow {\r\n    position: absolute;\r\n    right: 5px;\r\n    top: 12px;\r\n    width: 8px;\r\n    height: 8px;\r\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+);\r\n    background-repeat: no-repeat;\r\n    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r\n}\r\n\r\n.data-table-color-tool {\r\n    outline: none;\r\n    width: auto;\r\n    border-radius: 3px 3px;\r\n    position: absolute;\r\n    border: 1px solid #e8e8e8;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r\n    z-index: 130;\r\n    text-indent: 0;\r\n    top:0;\r\n    padding: 8px 0;\r\n    background: #fff;\r\n}\r\n\r\n.data-table-color-tool-mobile {\r\n    width: calc(100vw - 20px);\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-panle {\r\n    position: relative;\r\n    text-align: left;\r\n    text-indent: 0;\r\n    width: 100%;\r\n    height: auto;\r\n    margin-top: 8px;\r\n    padding: 0 8px;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-group\r\n{\r\n    display: flex;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-group > span {\r\n    width: 24px;\r\n    height: 24px;\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    background-color: rgb(255, 255, 255);\r\n    padding: 2px;\r\n    border-radius: 3px;\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: transparent;\r\n    -o-border-image: initial;\r\n       border-image: initial;\r\n    flex: 0 0 auto;\r\n    position: relative;\r\n}\r\n\r\n.data-table-color-tool span.data-table-color-tool-border > span {\r\n    border: 1px solid #e8e8e8 !important;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-group > span > span\r\n{\r\n    position: relative;\r\n    width: 18px;\r\n    height: 18px;\r\n    display: block;\r\n    border-radius: 2px;\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: transparent;\r\n    -o-border-image: initial;\r\n       border-image: initial;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-group > span > span > svg {\r\n    position: absolute;\r\n    top: -1px;\r\n    left: 1px;\r\n    width: 12px;\r\n    height: 12px;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-default {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: 2px 0 8px;\r\n    border-radius: 2px;\r\n    cursor: pointer;\r\n    padding: 2px 8px;\r\n}   \r\n\r\n.data-table-color-tool .data-table-color-tool-default:hover {\r\n    background: #f5f5f5;\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-default > span:first-child::after {\r\n    content: "";\r\n    display: block;\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 0px;\r\n    width: 22px;\r\n    height: 0;\r\n    border-bottom: 2px solid #ff5151;\r\n    transform: rotate(45deg);\r\n}\r\n\r\n.data-table-color-tool .data-table-color-tool-default .data-table-color-tool-default-text {\r\n    width: auto;\r\n    margin-left: 8px;\r\n    height: auto;\r\n    background: transparent;\r\n}');var le=Object(f.a)("changeTimeout"),ce=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e,r,o,a;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),f=0;f<s;f++)c[f]=arguments[f];return(a=t.call.apply(t,[this].concat(c))).contenteditable=["div".concat(Y.TABLE_TD_CONTENT_CLASS)],a.colMinWidth=(null===(e=a.editor.plugin.findPlugin("table"))||void 0===e?void 0:e.options.colMinWidth)||40,a.rowMinHeight=(null===(r=a.editor.plugin.findPlugin("table"))||void 0===r?void 0:r.options.rowMinHeight)||35,a.wrapper=void 0,a.helper=new Z(a.editor),a.template=new Y(Object(d.a)(a)),a.selection=new Q(a.editor,Object(d.a)(a)),a.conltrollBar=new X(a.editor,Object(d.a)(a),{col_min_width:a.colMinWidth,row_min_height:a.rowMinHeight}),a.command=new K(a.editor,Object(d.a)(a)),a.scrollbar=void 0,a.viewport=void 0,a.colorTool=void 0,a.noBorderToolButton=void 0,a.alignToolButton=void 0,Object.defineProperty(Object(d.a)(a),le,{writable:!0,value:void 0}),a.doChange=function(){a.remoteRefresh(),a.handleChange("local")},a.handleChange=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",r=a.editor;if(Object(l.X)(r)){a.conltrollBar.refresh(),a.selection.render("change");var i,s=Object(u.a)((o=Object(d.a)(a),Object(h.a)(n.prototype)),"getValue",o).call(o);if(null===s||void 0===s?void 0:s.noBorder)null===(i=a.noBorderToolButton)||void 0===i||i.addClass("active");else null===(e=a.noBorderToolButton)||void 0===e||e.removeClass("active");if("local"===t&&Object(l.X)(r)){var c=a.getValue();c&&a.setValue(c)}}},a.onChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",t=a.editor;Object(l.X)(t)&&"local"===e&&t.ot.isStopped()||(Object(p.a)(Object(d.a)(a),le)[le]&&clearTimeout(Object(p.a)(Object(d.a)(a),le)[le]),Object(p.a)(Object(d.a)(a),le)[le]=setTimeout((function(){a.handleChange(e),"remote"===e&&a.remoteRefresh()}),50))},a.updateScrollbar=function(){var e,t,n,r;if(a.scrollbar){var i=((null===(e=a.wrapper)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.bottom)||0)-((null===(n=a.wrapper)||void 0===n?void 0:n.getViewport().bottom)||0);null===(r=a.wrapper)||void 0===r||r.find(".data-scrollbar-x").css({bottom:"".concat(i>0?i+2:0,"px")})}},a.remoteRefreshTimeout=null,a}return Object(o.a)(n,[{key:"init",value:function(){var e,t=this;Object(u.a)(Object(h.a)(n.prototype),"init",this).call(this);var r=this.editor;Object(l.X)(r)&&(r.event.listeners["keydown:tab"]||(r.event.listeners["keydown:tab"]=[]),r.event.listeners["keydown:tab"].unshift((function(e){if(Object(l.X)(r)&&!r.readonly){var n=r.change,i=r.block,o=r.node,a=r.card,s=n.range.get(),c=s.endNode.closest("td");if(0!==c.length){var d=a.closest(c,!0);if(null===d||void 0===d?void 0:d.equal(t.root)){var u=i.closest(s.endNode);if(c.length>0&&(i.isLastOffset(s,"end")||"li"!==u.name&&o.isEmptyWidthChild(u))){var h=c.next();if(!h){var p,f,v,g=null===(p=c.parent())||void 0===p?void 0:p.next();if(g)h=g.find("td:first-child")||null;else t.command.insertRowDown(),h=(null===(f=c.parent())||void 0===f||null===(v=f.next())||void 0===v?void 0:v.find("td:first-child"))||null}if(h)return e.preventDefault(),t.selection.focusCell(h),!1}c.length>0&&setTimeout((function(){var e;null===(e=t.scrollbar)||void 0===e||e.refresh()}),0)}}}})),r.on("keydown:down",(function(e){if(Object(l.X)(r)&&!r.readonly){var n=r.change,i=r.card,o=n.range.get(),a=o.endNode.closest("td");if(0!==a.length){var s=i.closest(a,!0);if(null===s||void 0===s?void 0:s.equal(t.root)){var c=a.find(".table-main-content");if(c){var d=c.get().getBoundingClientRect(),u=o.getBoundingClientRect();if(a.length>0&&(0===u.bottom||d.bottom-u.bottom<10)){var h,p=a.index(),f=null===(h=a.parent())||void 0===h?void 0:h.next();if(!f){e.preventDefault();var v=o.cloneRange(),g=t.root.next(),m=g?i.find(g):void 0;return(null===m||void 0===m?void 0:m.onSelectDown)?m.onSelectDown(e):(i.focusNextBlock(t,v,!1),n.range.select(v)),!1}var b,y=0,w=f.find("td:last-child");if(null===(b=t.selection.tableModel)||void 0===b||b.table[f.index()].some((function(e){return!t.helper.isEmptyModelCol(e)&&y>=p&&e.element?(w=Object(l.a)(e.element),!0):(y++,!1)})),w)return e.preventDefault(),t.selection.focusCell(w,!0),!1}a.length>0&&setTimeout((function(){var e;null===(e=t.scrollbar)||void 0===e||e.refresh()}),0)}}}}})),r.on("keydown:up",(function(e){if(Object(l.X)(r)&&!r.readonly){var n=r.change,i=r.card,o=n.range.get(),a=o.endNode.closest("td");if(0!==a.length){var s=i.closest(a,!0);if(null===s||void 0===s?void 0:s.equal(t.root)){var c=a.find(".table-main-content");if(c){var d=c.get().getBoundingClientRect(),u=o.getBoundingClientRect();if(a.length>0&&(0===u.top||u.top-d.top<10)){var h,p=a.index(),f=null===(h=a.parent())||void 0===h?void 0:h.prev();if(!f){e.preventDefault();var v=o.cloneRange(),g=t.root.prev(),m=g?i.find(g):void 0;return(null===m||void 0===m?void 0:m.onSelectUp)?m.onSelectUp(e):(i.focusPrevBlock(t,v,!1),n.range.select(v)),!1}var b,y=0,w=f.find("td:first-child");if(null===(b=t.selection.tableModel)||void 0===b||b.table[f.index()].some((function(e){return!t.helper.isEmptyModelCol(e)&&y>=p&&e.element?(w=Object(l.a)(e.element),!0):(y++,!1)})),w)return e.preventDefault(),t.selection.focusCell(w),!1}a.length>0&&setTimeout((function(){var e;null===(e=t.scrollbar)||void 0===e||e.refresh()}),0)}}}}})),r.on("keydown:left",(function(){if(Object(l.X)(r)&&!r.readonly){var e=r.change,n=r.card,i=e.range.get().endNode.closest("td");if(0!==i.length){var o=n.closest(i,!0);if(null===o||void 0===o?void 0:o.equal(t.root))i.find(".table-main-content")&&i.length>0&&setTimeout((function(){var e;null===(e=t.scrollbar)||void 0===e||e.refresh()}),0)}}})),r.on("keydown:right",(function(){if(Object(l.X)(r)&&!r.readonly){var e=r.change,n=r.card,i=e.range.get().endNode.closest("td");if(0!==i.length){var o=n.closest(i,!0);if(null===o||void 0===o?void 0:o.equal(t.root))i.find(".table-main-content")&&i.length>0&&setTimeout((function(){var e;null===(e=t.scrollbar)||void 0===e||e.refresh()}),0)}}}))),this.colorTool||(this.colorTool=new ae(r,this.id,{colors:n.colors,defaultColor:null===(e=Object(u.a)(Object(h.a)(n.prototype),"getValue",this).call(this))||void 0===e?void 0:e.color,onChange:function(e){t.conltrollBar.drawBackgroundColor(e);var n=t.getValue();t.setValue(Object(c.a)(Object(c.a)({},n),{},{color:e}))}}))}},{key:"toolbar",value:function(){var e,t=this,r=this.editor,i=function(){var e,i;if(!Object(l.X)(r)||r.readonly)return[{key:"maximize",type:"maximize"}];var o=r.language.get("table"),a=[{key:"color",type:"node",title:r.language.get("table","color","title"),node:t.colorTool.getButton()},{key:"border",type:"button",title:(null===(e=Object(u.a)(Object(h.a)(n.prototype),"getValue",t).call(t))||void 0===e?void 0:e.noBorder)?o.showBorder:o.noBorder,content:'<span class="data-icon data-icon-no-border"></span>',didMount:function(e){var r=Object(u.a)(Object(h.a)(n.prototype),"getValue",t).call(t);!0===(null===r||void 0===r?void 0:r.noBorder)&&e.addClass("active"),t.noBorderToolButton=e},onClick:function(e,r){var i,o=Object(u.a)(Object(h.a)(n.prototype),"getValue",t).call(t);t.setValue({noBorder:!(null===o||void 0===o?void 0:o.noBorder)});var a=null===(i=t.wrapper)||void 0===i?void 0:i.find(".data-table");!0===(null===o||void 0===o?void 0:o.noBorder)?(null===a||void 0===a||a.removeAttributes("data-table-no-border"),r.removeClass("active")):(null===a||void 0===a||a.attributes("data-table-no-border","true"),r.addClass("active"))}},{key:"align",type:"dropdown",content:'<span class="data-icon data-icon-align-top" />',title:o.verticalAlign.title,didMount:function(e){t.alignToolButton=e.find(".data-toolbar-btn")},items:[{type:"button",content:'<span class="data-icon data-icon-align-top"></span> '.concat(o.verticalAlign.top),onClick:function(e){return t.updateAlign(e,"top")}},{type:"button",content:'<span class="data-icon data-icon-align-middle"></span> '.concat(o.verticalAlign.middle),onClick:function(e){return t.updateAlign(e,"middle")}},{type:"button",content:'<span class="data-icon data-icon-align-bottom"></span> '.concat(o.verticalAlign.bottom),onClick:function(e){return t.updateAlign(e,"bottom")}}]},{key:"merge",type:"button",title:o.mergeCell,content:'<span class="data-icon data-icon-merge-cells"></span>',disabled:t.conltrollBar.getMenuDisabled("mergeCell"),onClick:function(){t.command.mergeCell()}},{key:"split",type:"button",title:o.splitCell,content:'<span class="data-icon data-icon-solit-cells"></span>',disabled:t.conltrollBar.getMenuDisabled("splitCell"),onClick:function(){t.command.splitCell()}}];if(t.isMaximize)return a;var s=[{key:"maximize",type:"maximize"},{key:"copy",type:"copy",onClick:function(){t.command.copy(!0),r.messageSuccess("copy",r.language.get("copy","success"))}},{key:"delete",type:"delete"},{key:"separator",type:"separator"}].concat(a);return 0===Object(l.hb)((null===(i=t.wrapper)||void 0===i?void 0:i.css("margin-left"))||"0")&&s.unshift({key:"dnd",type:"dnd"}),s},o=null===(e=r.plugin.findPlugin("table"))||void 0===e?void 0:e.options;return(null===o||void 0===o?void 0:o.cardToolbars)?o.cardToolbars(i()):i()}},{key:"onSelectLeft",value:function(e){var t=this.selection.tableModel;if(t)for(var n=t.rows-1;n>=0;n--)for(var r=t.cols-1;r>=0;r--){var i=t.table[n][r];if(!this.helper.isEmptyModelCol(i)&&i.element)return e.preventDefault(),this.selection.focusCell(i.element,!1),!1}}},{key:"onSelectRight",value:function(e){var t=this.selection.tableModel;if(t)for(var n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++){var i=t.table[n][r];if(!this.helper.isEmptyModelCol(i)&&i.element)return e.preventDefault(),this.selection.focusCell(i.element),!1}}},{key:"onSelectUp",value:function(e){var t=this.selection.tableModel;if(t)for(var n=t.rows-1;n>=0;n--)for(var r=0;r<t.cols;r++){var i=t.table[n][r];if(!this.helper.isEmptyModelCol(i)&&i.element)return e.preventDefault(),this.selection.focusCell(i.element,!1),!1}}},{key:"onSelectDown",value:function(e){var t=this.selection.tableModel;if(t)for(var n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++){var i=t.table[n][r];if(!this.helper.isEmptyModelCol(i)&&i.element)return e.preventDefault(),this.selection.focusCell(i.element),!1}}},{key:"updateAlign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";e.preventDefault(),this.conltrollBar.setAlign(t),this.updateAlignText(t)}},{key:"updateAlignText",value:function(){var e,t='<span class="data-icon data-icon-align-'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",'"></span>');null===(e=this.alignToolButton)||void 0===e||e.html(t)}},{key:"getValue",value:function(){var e=Object(u.a)(Object(h.a)(n.prototype),"getValue",this).call(this);if(!this.wrapper)return e;var t=this.wrapper.find(Y.TABLE_CLASS);if(!t)return e;var r=this.selection.tableModel;if(!r)return e;var i=this.editor,o=i.schema,a=i.conversion,s=Object(l.a)("<div></div>");s.append(t.clone(!0));var d=new l.u(s,i,(function(e){e.find(Y.TABLE_TD_BG_CLASS).remove(),e.find(l.p).each((function(e){i.node.unwrap(Object(l.a)(e))}))})),p=r.rows,f=r.cols,v=r.height,g=r.width,m=d.toValue(o,a,!1,!1);return Object(l.X)(i)?Object(c.a)(Object(c.a)({},e),{},{rows:p,cols:f,height:v,width:g,html:m}):Object(c.a)(Object(c.a)({},e),{},{html:m})}},{key:"drawBackground",value:function(e,t){var n,r,i=e.get().getBoundingClientRect(),o=new DOMRect(i.x,i.y,0,0),a=t.startContainer,s=t.endContainer,c=Object(l.K)(a,"td"),d=Object(l.K)(s,"td");if(c instanceof Element&&d instanceof Element&&"TD"===c.nodeName&&"TD"===(null===d||void 0===d?void 0:d.nodeName)&&c!==d){var u=c.getBoundingClientRect(),h=d.getBoundingClientRect(),p=null===(n=this.viewport)||void 0===n?void 0:n.getBoundingClientRect(),f=((null===p||void 0===p?void 0:p.left)||0)+(this.activated?13:0);return o.x=Math.max(u.left-i.left,f-((null===(r=this.editor.root.getBoundingClientRect())||void 0===r?void 0:r.left)||0)),o.y=u.top-i.top,o.width=(p?Math.min(h.right,p.right):h.right)-u.left,o.height=u.bottom-u.top,o.width<0&&(o.width=0),o.height=h.bottom-u.top,o}}},{key:"activate",value:function(e){var t,r,i;(Object(u.a)(Object(h.a)(n.prototype),"activate",this).call(this,e),e)?(this.conltrollBar.refresh(),null===(r=this.wrapper)||void 0===r||r.addClass("active")):(this.selection.clearSelect(),this.conltrollBar.hideContextMenu(),null===(i=this.wrapper)||void 0===i||i.removeClass("active"));null===(t=this.scrollbar)||void 0===t||t.refresh()}},{key:"maximize",value:function(){var e;Object(u.a)(Object(h.a)(n.prototype),"maximize",this).call(this),null===(e=this.scrollbar)||void 0===e||e.refresh()}},{key:"minimize",value:function(){var e;Object(u.a)(Object(h.a)(n.prototype),"minimize",this).call(this),null===(e=this.scrollbar)||void 0===e||e.refresh()}},{key:"getSelectionNodes",value:function(){var e=this,t=[];return this.selection.each((function(n){!e.helper.isEmptyModelCol(n)&&n.element&&t.push(Object(l.a)(n.element).find(l.p))})),1===t.length&&0===t[0].closest("[table-cell-selection=true]").length?[]:t}},{key:"overflow",value:function(e){var t,n,r,i=((null===(t=this.wrapper)||void 0===t||null===(n=t.find(".data-table"))||void 0===n?void 0:n.width())||0)-this.getCenter().width();if(i>0&&!this.isMaximize)null===(r=this.wrapper)||void 0===r||r.css("margin-right","-".concat(i>e?e:i,"px"));else if(i<0||this.isMaximize){var o;null===(o=this.wrapper)||void 0===o||o.css("margin-right","")}}},{key:"initScrollbar",value:function(){var e=this;if(this.viewport){var t=this.editor,n=t.plugin.findPlugin("table"),r=(null===n||void 0===n?void 0:n.options.overflow)||{},i=r.maxLeftWidth?{onScrollX:function(n){var i;e.isMaximize&&(n=0);var o=r.maxLeftWidth();return null===(i=e.wrapper)||void 0===i||i.css("margin-left","-".concat(n>o?o:n,"px")),n>0?t.root.find(".data-card-dnd").hide():t.root.find(".data-card-dnd").show(),n-o},getScrollLeft:function(t){var n;return t-Object(l.hb)((null===(n=e.wrapper)||void 0===n?void 0:n.css("margin-left"))||"0")},getOffsetWidth:function(t){var n;return t+Object(l.hb)((null===(n=e.wrapper)||void 0===n?void 0:n.css("margin-left"))||"0")}}:void 0;this.scrollbar=new l.A(this.viewport,!0,!1,!0,i),this.scrollbar.setContentNode(this.viewport.find(".data-table")),this.scrollbar.on("display",(function(t){var n,r;"block"===t?null===(n=e.wrapper)||void 0===n||n.addClass("scrollbar-show"):null===(r=e.wrapper)||void 0===r||r.removeClass("scrollbar-show")}));var o,a={x:0,y:0};if(this.scrollbar.on("change",(function(n){var i=n.x,o=n.y;r.maxRightWidth&&e.overflow(r.maxRightWidth()),a.x===i&&a.y===o||(a={x:i,y:o},Object(l.X)(t)&&(t.trigger("scroll",e.root,{x:i,y:o}),e.conltrollBar.refresh()))})),l.ab||window.addEventListener("scroll",this.updateScrollbar),window.addEventListener("resize",this.updateScrollbar),Object(l.X)(t)&&!l.ab)null===(o=t.scrollNode)||void 0===o||o.on("scroll",this.updateScrollbar)}}},{key:"didRender",value:function(){var e,t,r,i,o,a=this;Object(u.a)(Object(h.a)(n.prototype),"didRender",this).call(this);var s=this.editor;s.on("undo",this.doChange),s.on("redo",this.doChange),this.viewport=Object(l.X)(s)?null===(e=this.wrapper)||void 0===e?void 0:e.find(Y.VIEWPORT):null===(t=this.wrapper)||void 0===t?void 0:t.find(Y.VIEWPORT_READER),this.selection.init(),this.conltrollBar.init(),this.command.init(),!Object(l.X)(s)||s.readonly?null===(r=this.toolbarModel)||void 0===r||r.setOffset([0,0]):null===(i=this.toolbarModel)||void 0===i||i.setOffset([13,-28,0,-6]);var c=s.plugin.findPlugin("table"),d=(null===c||void 0===c?void 0:c.options.overflow)||{};if(this.viewport&&(this.selection.refreshModel(),setTimeout((function(){a.initScrollbar()}),0)),this.selection.on("select",(function(){var e,t;if(a.conltrollBar.refresh(!1),Object(l.X)(s)){var n=null===(e=a.selection.getSingleCell())||void 0===e?void 0:e.css("vertical-align");a.updateAlignText(n),null===(t=a.toolbarModel)||void 0===t||t.update()}})),this.conltrollBar.on("sizeChanged",(function(){var e;a.selection.refreshModel(),a.onChange(),null===(e=a.scrollbar)||void 0===e||e.refresh()})),this.conltrollBar.on("sizeChanging",(function(){var e;null===(e=a.scrollbar)||void 0===e||e.refresh(),s.trigger("editor:resize"),a.updateScrollbar()})),this.command.on("actioned",(function(e,t){var n,r;"paste"===e&&s.card.render(a.wrapper),["splitCell","mergeCell"].includes(e)&&s.trigger("editor:resize"),a.selection.render(e),null===(n=a.toolbarModel)||void 0===n||n.update(),t||a.onChange(),d.maxRightWidth&&a.overflow(d.maxRightWidth()),null===(r=a.scrollbar)||void 0===r||r.refresh()})),null===(o=this.wrapper)||void 0===o?void 0:o.find(Y.TABLE_CLASS)){var p=Object(u.a)(Object(h.a)(n.prototype),"getValue",this).call(this);if(!(null===p||void 0===p?void 0:p.html)){var f=this.getValue();f&&Object(l.X)(s)&&this.setValue(f),this.onChange()}d.maxRightWidth&&this.overflow(d.maxRightWidth())}}},{key:"remoteRefresh",value:function(){var e,t=this;if(this.wrapper&&0!==this.wrapper.length&&this.wrapper[0].parentNode){var r=this.wrapper.find(Y.COLS_HEADER_CLASS),i=Object(u.a)(Object(h.a)(n.prototype),"getValue",this).call(this),o=r.find(Y.COLS_HEADER_ITEM_CLASS),a=o.length;if(i.cols>a)r.append(Object(l.a)(this.template.renderColsHeader(i.cols-a)).find(Y.COLS_HEADER_ITEM_CLASS)),o=r.find(Y.COLS_HEADER_ITEM_CLASS);else if(i.cols<a)for(var s=a;s>i.cols;s--){var c;null===(c=o.eq(s-1))||void 0===c||c.remove()}var d=i.html?Object(l.a)(i.html):this.wrapper.find("table");d.find("col").toArray().forEach((function(e,n){var r,i=e.attributes("width")||e.css("width");null===(r=o.eq(n))||void 0===r||r.css("width","".concat(Math.max(parseInt(i),t.colMinWidth),"px"))}));var p=this.wrapper.find(Y.ROWS_HEADER_CLASS),f=p.find(Y.ROWS_HEADER_ITEM_CLASS),v=f.length;if(i.rows>v)p.append(Object(l.a)(this.template.renderRowsHeader(i.rows-v)).find(Y.ROWS_HEADER_ITEM_CLASS)),f=p.find(Y.ROWS_HEADER_ITEM_CLASS);else if(i.rows<v)for(var g=v;g>i.rows;g--){var m;null===(m=f.eq(g-1))||void 0===m||m.remove()}d.find("tr").toArray().forEach((function(e,n){var r;null===(r=f.eq(n))||void 0===r||r.css("height",Math.max(parseInt(e.css("width")),t.rowMinHeight))})),null===(e=this.scrollbar)||void 0===e||e.refresh(),this.remoteRefreshTimeout&&clearTimeout(this.remoteRefreshTimeout),this.remoteRefreshTimeout=setTimeout((function(){var e;null===(e=t.wrapper)||void 0===e||e.find(l.p).each((function(e){var n=e;n.hasAttribute(l.j)||n.setAttribute(l.j,t.template.isReadonly?"false":"true")}))}),10)}}},{key:"render",value:function(){var e=this.editor;if(this.template.isReadonly=!Object(l.X)(e)||e.readonly,!(this.wrapper&&this.wrapper.length>0&&this.wrapper[0].parentNode)){var t,n=this.getValue();if(!n)return"Error value";if(n.html){var r=Object(l.a)(n.html);r&&"table"!==r.name&&((r=r.toArray().find((function(e){return"table"===e.name})))?n.html=r.get().outerHTML:(n.html="<table><tr><td>".concat(n.html,"</td></tr></table>"),r=Object(l.a)(n.html)));var i=this.helper.getTableModel(r);n.rows=i.rows,n.cols=i.cols}return this.wrapper=Object(l.X)(e)?Object(l.a)(this.template.htmlEdit(n,[{action:"cut",icon:"cut",text:(t=e.language.get("table")).cut},{action:"copy",icon:"copy",text:t.copy},{action:"mockPaste",icon:"paste",text:t.paste},{split:!0},{action:"insertColLeft",icon:"insert-col-left",text:t.insertColLeft},{action:"insertColRight",icon:"insert-col-right",text:t.insertColRight},{action:"insertRowUp",icon:"insert-row-up",text:t.insertRowUp},{action:"insertRowDown",icon:"insert-row-down",text:t.insertRowDown},{split:!0},{action:"mergeCell",icon:"merge-cell",text:t.mergeCell},{action:"splitCell",icon:"split-cell",text:t.splitCell},{split:!0},{action:"removeCol",icon:"remove-col",text:t.removeCol},{action:"removeRow",icon:"remove-row",text:t.removeRow},{split:!0},{action:"removeTable",icon:"remove-table",text:t.removeTable},{split:!0},{action:"clear",icon:"clear",text:t.clear}])):Object(l.a)(this.template.htmlView(n)),Object(l.X)(e)||this.wrapper.find("table").addClass("data-table").addClass("data-table-view"),n.rows=this.wrapper.find("tr").length,n.width&&this.wrapper.find("table").css("width","".concat(n.width,"px")),this.wrapper}this.remoteRefresh()}},{key:"destroy",value:function(){var e,t;Object(u.a)(Object(h.a)(n.prototype),"destroy",this).call(this);var r=this.editor;window.removeEventListener("scroll",this.updateScrollbar),window.removeEventListener("resize",this.updateScrollbar),null===(e=r.scrollNode)||void 0===e||e.off("scroll",this.updateScrollbar),null===(t=this.scrollbar)||void 0===t||t.destroy(),this.command.removeAllListeners();var i=this.selection;i.removeAllListeners(),i.destroy();var o=this.conltrollBar;o.removeAllListeners(),o.destroy(),r.off("undo",this.doChange),r.off("redo",this.doChange)}}],[{key:"cardName",get:function(){return"table"}},{key:"cardType",get:function(){return l.i.BLOCK}},{key:"selectStyleType",get:function(){return l.B.BACKGROUND}},{key:"autoSelected",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),n}(l.g);ce.colors=$.getColors().map((function(e){return e.map((function(e){return{color:e,border:$.getStroke(e)}}))}));var de={"en-US":{table:{insertColLeft:"Insert column(s) $data left",insertColRight:"Insert column(s) $data right",insertRowUp:"Insert row(s) $data up",insertRowDown:"Insert row(s) $data down",mergeCell:"Merge cells",splitCell:"Unmerge cells",removeCol:"Delete selected column(s)",removeRow:"Delete selected row(s)",removeTable:"Delete table",copy:"Copy",cut:"Cut",paste:"Paste",clear:"Clear",draggingCol:"Moving $data column",draggingRow:"Moving $data row",color:{title:"Cell background color",nonFillText:"No fill color"},noBorder:"Hide border",showBorder:"Show border",verticalAlign:{title:"Vertical align",top:"Align top",middle:"Align middle",bottom:"Align bottom"}}},"zh-CN":{table:{insertColLeft:"\u5de6\u8fb9\u63d2\u5165 $data \u5217",insertColRight:"\u53f3\u8fb9\u63d2\u5165 $data \u5217",insertRowUp:"\u4e0a\u65b9\u63d2\u5165 $data \u884c",insertRowDown:"\u4e0b\u65b9\u63d2\u5165 $data \u884c",mergeCell:"\u5408\u5e76\u5355\u5143\u683c",splitCell:"\u62c6\u5206\u5355\u5143\u683c",removeCol:"\u5220\u9664\u9009\u4e2d\u5217",removeRow:"\u5220\u9664\u9009\u4e2d\u884c",removeTable:"\u5220\u9664\u8868\u683c",copy:"\u590d\u5236",cut:"\u526a\u5207",paste:"\u7c98\u8d34",clear:"\u6e05\u7a7a\u5185\u5bb9",draggingCol:"\u6b63\u5728\u79fb\u52a8 $data \u5217",draggingRow:"\u6b63\u5728\u79fb\u52a8 $data \u884c",color:{title:"\u5355\u5143\u683c\u80cc\u666f\u8272",nonFillText:"\u65e0\u586b\u5145\u8272"},noBorder:"\u9690\u85cf\u8fb9\u6846",showBorder:"\u663e\u793a\u8fb9\u6846",verticalAlign:{title:"\u5782\u76f4\u5bf9\u9f50",top:"\u9876\u5bf9\u9f50",middle:"\u5782\u76f4\u5c45\u4e2d",bottom:"\u5e95\u5bf9\u9f50"}}}};se('div[dnd-trigger-key="table"], div[toolbar-trigger-key="table"] {\n    margin-left: -13px;\n    margin-top: -13px;\n}\n\n.data-table {\n    border: none;\n    position: relative;\n    z-index: 1;\n    table-layout: fixed;\n    white-space: pre-wrap;\n    width: 100%;\n    border-collapse: collapse;\n    background-color: #ffffff;\n}\n\ndiv[data-card-key="table"].card-selected .data-table, div[data-card-key="table"].card-selected-other .data-table {\n  background: transparent\n}\n\n.am-engine [data-card-key="table"].card-selected [data-card-element="center"].data-card-background-selected {\n    background: transparent;\n}\n\n.am-engine [data-card-key="table"].card-selected [data-card-element="center"].data-card-background-selected .table-wrapper {\n    background: rgba(27, 162, 227, 0.2);\n}\n\n.am-engine-mobile div[data-card-key="table"].card-activated {\n  margin-left: 20px;\n}\n\n.data-table tr,.data-table td {\n    position: relative;\n}\n\n.data-table tr {\n    height: 35px;\n}\n\n.data-table tr td {\n    border: none;\n    vertical-align: top;\n    cursor: text;\n}\n\n.data-table tr td[table-cell-selection]:after {\n    content: \' \';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(180, 213, 254, 0.5);\n    pointer-events: none;\n    z-index: 2;\n}\n\n.drag-selecting .data-table, .data-table tr td[table-cell-selection] {\n    caret-color:transparent\n}\n\n.data-table tr td[table-cell-selection] ::-moz-selection{\n    background: transparent !important;\n}\n\n.data-table tr td[table-cell-selection] ::selection{\n    background: transparent !important;\n}\n\n.table-wrapper {\n    position: relative;\n    cursor: default;\n}\n\n.table-wrapper.active {\n    margin-top: -42px;\n    width: 100%;\n}\n\n.table-wrapper.scrollbar-show {\n    margin-bottom: -10px;\n}\n\n.table-wrapper.data-table-highlight tr td[table-cell-selection]:after {\n    background: transparent;\n}\n\n.table-wrapper .table-header {\n    position: absolute;\n    visibility: hidden;\n    left: -13px;\n    top: 28px;\n    width: 14px;\n    height: 14px;\n    cursor: pointer;\n    z-index: 4;\n    background-color: #ffffff;\n}\n\n.table-wrapper .table-header .table-header-item {\n    border: 1px solid #dfdfdf;\n    background-color: #f2f3f5;\n    border-top-left-radius: 50%;\n    width: 100%;\n    height: 100%;\n}\n\n.table-wrapper .table-header:hover {\n    background-color: #ffffff;\n}\n\n.table-wrapper.data-table-highlight-all .table-header .table-header-item {\n    background: rgba(255, 77, 79, 0.4) !important;\n}\n\n.table-wrapper .table-header-item:hover{\n    background-color: #e2e4e6;\n}\n\n.table-wrapper.active .table-header {\n    visibility:visible\n}\n\n.table-wrapper .table-header.selected .table-header-item {\n    background: #4daaff;\n    border-color: #4daaff;\n}\n\n.table-wrapper .table-cols-header {\n    position: relative;\n    height: 13px;\n    display: none;\n    width: 100%;\n    cursor: default;\n}\n\n.table-wrapper.active .table-cols-header {\n    display: flex;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item {\n    position: relative;\n    height: 13px;\n    width: auto;\n    border: 1px solid #dfdfdf;\n    border-bottom: 0 none;\n    overflow: visible;\n    background: #f2f3f5;\n    cursor: pointer;\n    border-right: 0 none;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item.active{\n    background-color: #e2e4e6;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item:first-child {\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item:last-child {\n    border-top-right-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border-right: 1px solid #dfdfdf;\n}\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item.active, .table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item {\n    background: rgba(255, 77, 79, 0.4) !important;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected {\n    background: #fff;\n    z-index: 1;\n    border-radius: 0;\n    border-bottom: 0;\n    cursor: move;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger {\n    display: flex;\n    position: absolute;\n    left: -1px;\n    top: -1px;\n    right: -1px;\n    bottom: -1px;\n    background: #4daaff;\n    border-radius: 0;\n    z-index: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger {\n    background: transparent !important;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger .drag-info {\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .col-dragger .data-icon {\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger {\n    height: 50px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger .drag-info {\n    display: block;\n    color: #fff;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\n    position: absolute;\n    right: -1px;\n    top: -1px;\n    width: 2px;\n    height: 14px;\n    z-index: 10;\n}\n\n.am-engine-mobile .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\n  right: -3px;\n  width: 6px;\n}\n\n.am-engine:not(.am-engine-mobile) .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.active {\n    background: #0589f3;\n    cursor: col-resize;\n}\n\n.am-engine:not(.am-engine-mobile) .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.dragging {\n    width: 2px;\n    background: #0589f3;\n    right: -1px;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger {\n    text-align: center;\n    display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag {\n    font-size: 10px;\n    color: #fff;\n}\n\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag::before {\n    transform: rotate(90deg);\n    display: inline-block;\n}\n\n.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag{\n    display: none;\n}\n.table-wrapper .table-cols-header.dragging .table-cols-header-item .cols-trigger,.table-wrapper.drag-selecting .table-cols-header-item .cols-trigger{\n    display: none;\n}\n.table-wrapper .table-cols-header.resize .table-cols-header-item {\n    cursor: col-resize;\n}\n.table-wrapper .table-rows-header {\n    position: absolute;\n    left: -13px;\n    top: 41px;\n    width: 14px;\n    z-index: 128;\n    border-right: 0;\n    display: none;\n}\n\n.table-wrapper.active .table-rows-header {\n    display: block;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item {\n    position: relative;\n    width: 100%;\n    border: 1px solid #dfdfdf;\n    border-bottom: 0;\n    background: #f2f3f5;\n    cursor: pointer;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item.active\n{\n    background-color: #e2e4e6;\n}\n\n/* .table-wrapper .table-rows-header .table-rows-header-item:nth-child(3) {\n    border-top: 0 none;\n} */\n\n.table-wrapper .table-rows-header .table-rows-header-item:last-child{\n    border-bottom: 1px solid #dfdfdf;\n}\n\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item.active,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item {\n    background: rgba(255, 77, 79, 0.4) !important;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item.selected {\n    width: 14px;\n    background: #fff;\n    cursor: move;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger {\n    display: flex;\n    position: absolute;\n    align-items: center;\n    text-align: left;\n    white-space: nowrap;\n    content: \' \';\n    left: -1px;\n    top: -1px;\n    bottom: -1px;\n    right: -1px;\n    background: #4daaff;\n    border-radius: 0;\n    z-index: 1;\n}\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger{\n    background: transparent !important;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger .drag-info {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.no-dragger .row-dragger .data-icon {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger {\n    width: 150px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger .drag-info {\n    margin-left: 5px;\n    display: flex;\n    padding: 10px;\n    color: #fff;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\n    position: absolute;\n    bottom: -1px;\n    height: 2px;\n    width: 14px;\n    left: -1px;\n    z-index: 10;\n    cursor: row-resize;\n}\n\n.am-engine-mobile .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\n  bottom: -3px;\n  height: 6px;\n}\n\n.am-engine:not(.am-engine-mobile) .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.active {\n    background: #0589f3;\n}\n\n.am-engine:not(.am-engine-mobile) .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.dragging {\n    height: 2px;\n    background: #0589f3;\n    bottom: -1px;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger {\n    display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag {\n    font-size: 10px;\n    color: #fff;\n    margin-left: 1px;\n}\n\n.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag{\n    display: none;\n}\n\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .drag-info {\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n.table-wrapper .table-rows-header.dragging .table-rows-header-item .rows-trigger,.table-wrapper.drag-selecting .table-rows-header-item .rows-trigger {\n    display: none;\n}\n.table-wrapper .table-rows-header.resize .table-rows-header-item {\n    cursor: row-resize;\n}\n\n.table-wrapper .table-viewport {\n    position: relative;\n    overflow: hidden;\n    overflow-y: hidden;\n    cursor: text;\n}\n\n.table-wrapper.active .table-viewport{\n    padding-top: 28px;\n    padding-left: 13px;\n    margin-left: -13px;\n}\n\n.table-wrapper .table-viewport .scrollbar-shadow-left {\n    top: 0;\n    bottom: 10px;\n}\n\n.table-wrapper.active .table-viewport .scrollbar-shadow-left {\n    top: 28px;\n    margin-left: 14px;\n}\n\n.table-wrapper .table-viewport .scrollbar-shadow-right {\n    top: 0;\n    bottom: 10px;\n}\n\n.table-wrapper.active .table-viewport .scrollbar-shadow-right {\n    top: 28px;\n}\n\n.table-wrapper .table-placeholder {\n    position: absolute;\n    border: 1px solid #008dff;\n    background: #008dff;\n    display: none;\n    z-index: 126;\n}\n.table-wrapper .table-menubar {\n    position: absolute;\n    top: -99999px;\n    left: -99999px;\n    padding: 4px 0;\n    border-radius: 4px;\n    border: 1px solid #e9e9e9;\n    box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.08);\n    background: #fff;\n    /* \\u4ee3\\u7801\\u5757\\u7684 codemirror \\u9ed8\\u8ba4\\u7ed9\\u6bcf\\u884c\\u4ee3\\u7801\\u7684 pre \\u8bbe\\u7f6e\\u4e86 z-index 2, \\u5982\\u679c\\u8868\\u683c\\u5728\\u4ee3\\u7801\\u5757\\u524d\\u9762\\uff0c\\u9020\\u6210\\u53f3\\u952e\\u83dc\\u5355\\u65e0\\u6cd5\\u70b9\\u51fb */\n    z-index: 130;\n    min-width: 240px;\n}\n.table-wrapper .table-menubar .table-menubar-item {\n    padding: 6px 16px;\n    cursor: default;\n}\n.table-wrapper .table-menubar .table-menubar-item:hover {\n    background: #f0f0f0;\n}\n\n.table-wrapper .table-menubar .table-menubar-item.disabled {\n    color: #aaa;\n    display: none;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input {\n    width: 46px;\n    line-height: 12px;\n    font-size: 12px;\n    outline: none;\n    border: 1px solid #dadada;\n    border-radius: 4px;\n    text-align: center;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::-moz-selection {\n    color: inherit;\n    background:transparent\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::selection {\n    color: inherit;\n    background:transparent\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::-moz-selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::selection\n{\n    color: #fff;\n    background: #1890ff;\n}\n\n.table-wrapper .table-menubar .split {\n    height: 0;\n    border-top: 1px solid #e8e8e8;\n    margin: 2px 0;\n}\n\n.table-wrapper .table-main-content {\n    margin: 2px 2px;\n    padding: 4px 4px;\n    position: relative;\n    z-index: 3;\n}\n\n.table-wrapper .table-main-content [data-card-key] {\n    max-width: 100%;\n}\n\n.table-wrapper .table-main-bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    bottom: 0;\n    pointer-events: none;\n}\n\n.table-wrapper .table-main-bg .table-main-border-top {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    height: 0;\n    border-top: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-top {\n    border-top-color: transparent;\n}\n\n.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-top {\n    border-top-style: dashed;\n}\n\n.table-wrapper .table-main-bg .table-main-border-right {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: -1px;\n    z-index: 1;\n    width: 0;\n    border-right: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-right {\n    border-right-color: transparent;\n}\n\n.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-right {\n    border-right-style: dashed;\n}\n\n.table-wrapper tr td.table-last-row .table-main-bg .table-main-border-right {\n    display: block;\n    right: 0;\n}\n\n.table-wrapper .table-main-bg .table-main-border-bottom {\n    display: none;\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n    z-index: 1;\n    height: 0;\n    border-bottom: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-bottom {\n    border-bottom-color: transparent;\n}\n\n.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-bottom {\n    border-bottom-style: dashed;\n}\n\n.table-wrapper tr td.table-last-column .table-main-bg .table-main-border-bottom{\n    display: block;\n    bottom: 0;\n}\n\n.table-wrapper .table-main-bg .table-main-border-left {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 1;\n    width: 0;\n    border-left: 1px solid rgb(217, 217, 217);\n}\n\n.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-left {\n    border-left-color: transparent;\n}\n\n.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-left {\n    border-left-style: dashed;\n}\n\n.table-wrapper .table-highlight {\n    background: #ff4d4f;\n    opacity: 0.08;\n    position: absolute;\n    z-index: 2;\n    pointer-events: none;\n    display: none;\n}\n\n.table-wrapper.scrollbar-show .data-scrollable.scroll-x {\n    padding-bottom: 10px;\n}\n\n.table-wrapper .data-scrollable.scroll-x {\n    padding-bottom: 0;\n}\n\n.table-wrapper .data-scrollable.scroll-x:hover {\n    overflow: hidden;\n}\n\n.table-wrapper.scrollbar-show .data-scrollable.scroll-x .data-scrollbar-x{\n    margin-bottom: 2px;\n}\n\n.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x {\n    height: 6px;\n    z-index: 5;\n}\n\n.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\n    height: 6px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button,.table-wrapper .table-rows-header .table-row-add-button {\n    position: absolute;\n    right: 100%;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 2;\n    width: 24px;\n    height: 24px;\n    border: 1px solid #e4e4e4;\n    border-radius: 2px;\n    cursor: pointer;\n    background-color: #fff;\n    background-position: center center;\n    background-repeat: no-repeat;\n\n    left: 14px;\n    margin-left: 2px;\n    margin-top: -2px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button .data-icon,.table-wrapper .table-rows-header .table-row-add-button .data-icon {\n    font-size: 12px;\n}\n\n.table-wrapper .table-rows-header .table-row-add-button {\n    left: -30px;\n    margin-top: -12px;\n}\n\n.table-wrapper .table-rows-header .table-row-delete-button:hover,.table-wrapper .table-col-delete-button:hover {\n    color:#ff4d4f;\n}\n\n.table-wrapper .table-col-delete-button, .table-wrapper .table-col-add-button {\n    position: absolute;\n    bottom: 100%;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 128;\n    margin-bottom: 4px;\n    width: 24px;\n    height: 24px;\n    border: 1px solid #e4e4e4;\n    border-radius: 2px;\n    cursor: pointer;\n    background: #fff;\n    background-position: center center;\n    background-repeat: no-repeat;\n    margin-left: -12px;\n}\n\n.table-wrapper .table-col-delete-button .data-icon, .table-wrapper .table-col-add-button .data-icon {\n    font-size: 12px;\n}\n\n.table-wrapper .table-cols-header .table-col-add-button .table-col-add-split-button {\n    position: absolute;\n    width: 2px;\n    left: 10px;\n    top: 22px;\n    background: #008dff;\n    display: none;\n}\n\n.table-wrapper .table-rows-header .table-row-add-button .table-row-add-split-button {\n    position: absolute;\n    height: 2px;\n    left: 22px;\n    background: #008dff;\n    display: none;\n}\n\n.table-wrapper .table-col-add-button:hover, .table-wrapper .table-row-add-button:hover {\n    color: #008dff;\n}\n\n.table-wrapper .table-col-add-button:hover .table-col-add-split-button{\n    display: block;\n}\n\n.table-wrapper .table-row-add-button:hover .table-row-add-split-button{\n    display: block;\n}\n\n.data-table-reader .data-table tr td {\n    border: 1px solid rgb(217, 217, 217);\n    cursor: auto;\n    padding: 4px 8px;\n}\n\n.data-table-reader .data-table[data-table-no-border="true"] tr td {\n    border:0 none\n}\n\n.data-table-reader.data-scrollable.scroll-x {\n    padding-bottom: 10px;\n}\n\n.data-table-reader .scrollbar-shadow-left, .data-table-reader .scrollbar-shadow-right {\n    bottom: 10px;\n}\n\n.data-table-reader.scrollbar-show.data-scrollable.scroll-x .data-scrollbar-x{\n    margin-bottom: 2px;\n}\n\n.data-table-reader.data-scrollable .data-scrollbar.data-scrollbar-x {\n    height: 6px;\n}\n\n.data-table-reader.data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\n    height: 6px;\n}\n\n[data-card-key="table"].data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\n    padding: 48px;\n    margin-top: 4px;\n}\n/**\n\u8868\u683c\u53ef\u6ea2\u51fa\u6837\u5f0f\n**/\n.table-wrapper.table-overflow {\n    width: auto;\n}\n');var ue=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onCopy=function(t){var n=e.editor;if(!Object(l.X)(n))return!0;var r=n.change,i=n.card,o=r.range.get(),a=i.find(o.commonAncestorNode,!0);if(a&&a.name===ce.cardName&&!a.isCursor(o.startNode)&&a.getSelectionNodes().length>1)return t.preventDefault(),a.command.copy(),n.messageSuccess("copy",n.language.get("copy","success")),!1;return!0},e.onCut=function(t){var n=e.editor;if(!Object(l.X)(n)||n.readonly)return!0;var r=n.change,i=n.card,o=r.range.get(),a=i.find(o.commonAncestorNode,!0);if(a&&a.name===ce.cardName&&!a.isCursor(o.startNode)&&a.getSelectionNodes().length>1)return t.preventDefault(),a.command.cut(),!1;return!0},e.onPaste=function(t){var n=e.editor;if(!Object(l.X)(n)||n.readonly)return!0;var r=n.change,i=n.card,o=r.range.get(),a=i.find(o.commonAncestorNode,!0);if(a&&a.name===ce.cardName&&!a.isCursor(o.startNode)){var s=n.clipboard.getData(t);return!s||!/<meta\s+name="aomao"\s+content="table"\s{0,}\/?>/gi.test(s.html||"")||(t.preventDefault(),a.command.paste(s),!1)}return!0},e.pasteSchema=function(e){e.data.blocks.forEach((function(e){e.allowIn||(e.allowIn=[]),e.allowIn.indexOf("td")<0&&e.allowIn.push("td")})),e.find((function(e){return"table"===e.name}))[0].attributes={class:["data-table"],"data-table-no-border":"*","data-wdith":"@length",style:{width:"@length",background:"@color","background-color":"@color"}},e.find((function(e){return"tr"===e.name}))[0].attributes={class:["data-table"],"data-table-no-border":"*",style:{height:"@length",background:"@color","background-color":"@color",display:"*"}},e.find((function(e){return"td"===e.name}))[0].attributes={colspan:"@number",rowspan:"@number",class:["table-last-column","table-last-row","table-last-column","table-cell-selection"],style:{"background-color":"@color",background:"@color","vertical-align":["top","middle","bottom"],valign:["top","middle","bottom"]}}},e.pasteHtml=function(t){var n=e.editor;if(Object(l.X)(n)){var i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"width",r=t.attributes("data-width"),i=r||t.css(n);i.endsWith("%")&&t.css(n,""),i.endsWith("pt")&&t.css(n,e.convertToPX(i))},o=t.find("table");if(0!==o.length){var a=new Z(n),s=n.change.range.get(),c=s.startNode.closest(l.p).length>0;o.each((function(e,t){var s,d,u,h=o.eq(t);if(h){if(c||"td"===(null===(s=h.parent())||void 0===s?void 0:s.name))return(p=h).find("thead").find("th,td").toArray().forEach((function(e){p.before(e.children())})),p.find("tr").toArray().forEach((function(e){e.find("td").toArray().forEach((function(e){n.node.isEmpty(e)||p.before(e.children())}))})),p.find("tfoot").find("th,td").toArray().forEach((function(e){p.after(e.children())})),void p.remove();var p,f=h.find("tr");f.each((function(e){var t=Object(l.a)(e);"none"===t.css("display")?t.remove():t.css("display",""),t.children().each((function(e){var t=Object(l.a)(e),n=t.text(),r=t.find("table");if(r.length>0&&(r.after(document.createTextNode(r.text())),r.remove()),"td"!==t.name&&["\n","\r\n"].includes(n.trim())){var i=Object(l.a)("<td></td>");t.before(i),i.append(t)}}))})),h=a.normalizeTable(h),i(h),i(h,"height");var v=h.find("tbody"),g=h.find("thead");g&&g.length>0&&v.prepend(g.children()),g.remove();var m=h.find("tfoot");m&&m.length>0&&v.append(m.children()),m.remove();var b=h.find("th");b.each((function(e,t){var n=b.eq(t);null===n||void 0===n||n.replaceWith(Object(l.a)("<td>".concat(n.html(),"</td>")))}));var y=h.find("td"),w=Object(l.R)().createDocumentFragment();y.each((function(e,t){w=Object(l.R)().createDocumentFragment();var r=y.eq(t);if(r){i(r),i(r,"height");var o=r.css("background");o&&r.css("background-color",o);var a=r.attributes("valign");a&&r.attributes("vertical-align",a);for(var s=r.children(),c=0,d=s.length;c<d;c++){var u=s.eq(c);if((0===c||c===d-1)&&(null===u||void 0===u?void 0:u.isText())){var h=u.text();if(/^\n(\s)*$/.test(h))continue}u&&w.appendChild(u[0])}var p=Object(l.a)(w);null===r||void 0===r||r.empty().append(n.node.normalize(p))}}));var k=(null===(d=h)||void 0===d?void 0:d.css("background"))||(null===(u=h)||void 0===u?void 0:u.css("background-color"));k&&y.css("background",k),f=h.find("tr");var x=1;f.each((function(e){var t=Object(l.a)(e),n=null===t||void 0===t?void 0:t.find("td");if(0===(null===n||void 0===n?void 0:n.length)&&x<2&&(null===t||void 0===t||t.remove()),n&&(null===n||void 0===n?void 0:n.length)>0){var o=n.toArray().map((function(e){return e[0].rowSpan}));x=Math.max.apply(Math,Object(r.a)(o))}t&&(i(t),i(t,"height"));var a=(null===t||void 0===t?void 0:t.css("background"))||(null===t||void 0===t?void 0:t.css("background-color"));a&&(null===n||void 0===n||n.css("background",a))})),n.nodeId.generateAll(h,!0),h.allChildren().forEach((function(e){n.node.isInline(e)&&n.inline.repairCursor(e)}));var O=h.get().outerHTML.replace(/\n|\r\n/g,"").replace(/>\s+</g,"><");n.card.replaceNode(h,ce.cardName,{html:O}),h.remove()}}))}}},e.parseHtml=function(t,n){var r=e.editor,i=[];return t.find("[".concat(l.c,'="').concat(ce.cardName,'"],[').concat(l.x,'="').concat(ce.cardName,'"]')).each((function(e){var t=Object(l.a)(e),o=t.find("table"),a=Object(l.L)(t.attributes(l.f));if(0===o.length){if(!a||!a.html)return;if(0===(o=Object(l.a)(Object(l.kb)(a.html))).length)return void t.remove();r.trigger("parse:html",o)}var s=o.attributes("width")||o.css("width");o.css({outline:"none","border-collapse":"collapse",width:"100%"}),o.attributes("data-width",s);var c=o.find("td");c.each((function(e,t){var n=c.eq(t);null===n||void 0===n||n.css({"min-width":"auto","white-space":"flat","word-wrap":"break-word",margin:"4px 8px",border:o.attributes("data-table-no-border")?"0 none":"1px solid #d9d9d9",padding:"4px 8px",cursor:"default","vertical-align":n.css("vertical-align")||"top"})})),o.find(Y.TABLE_TD_BG_CLASS).remove(),o.find(Y.TABLE_TD_CONTENT_CLASS).each((function(e){r.node.unwrap(Object(l.a)(e))})),n&&(o=n(o,a)),t.replaceWith(o),i.push(o)})),i},e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("table")},e}return Object(o.a)(n,[{key:"init",value:function(){var e=this.editor;this.options.colMinWidth||(this.options.colMinWidth=40),this.options.rowMinHeight||(this.options.rowMinHeight=30),e.language.add(de),e.schema.add(this.schema()),e.conversion.add("th","td"),e.on("parse:html",this.parseHtml),e.on("paste:each-after",this.pasteHtml),e.on("paste:schema",this.pasteSchema),Object(l.X)(e)&&(this.editor.on("markdown-it",this.markdownIt),e.change.event.onDocument("copy",this.onCopy,0),e.change.event.onDocument("cut",this.onCut,0),e.change.event.onDocument("paste",this.onPaste,0))}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"schema",value:function(){return[{name:"table",type:"block",attributes:{class:["data-table"],"data-table-no-border":"*",style:{width:"@length"}}},{name:"colgroup",type:"block",allowIn:["table"]},{name:"col",type:"block",isVoid:!0,attributes:{width:"@number",span:"@number"},allowIn:["colgroup"]},{name:"thead",type:"block",allowIn:["table"]},{name:"tbody",type:"block",allowIn:["table"]},{name:"tr",type:"block",attributes:{style:{height:"@length"}},allowIn:["tbody","thead","tfoot"]},{name:"td",type:"block",attributes:{colspan:"@number",rowspan:"@number",class:["table-last-column","table-last-row","table-last-column","table-cell-selection"],style:{"background-color":"@color","vertical-align":["top","middle","bottom"]}},allowIn:["tr"]},{name:"th",type:"block",attributes:{colspan:"@number",rowspan:"@number"},allowIn:["tr"]}]}},{key:"execute",value:function(e,t){var n=this.editor;Object(l.X)(n)&&(n.change.range.get().startNode.closest(l.p).length>0||n.card.insert(ce.cardName,{rows:e||3,cols:t||3,overflow:!!this.options.overflow}))}},{key:"convertToPX",value:function(e){var t=/([\d\.]+)(pt|px)$/i.exec(e);return t&&"pt"===t[2]?String(Math.round(96*parseInt(t[1],10)/72))+"px":e}},{key:"destroy",value:function(){var e=this.editor;e.off("parse:html",this.parseHtml),e.off("paste:each-after",this.pasteHtml),e.off("paste:schema",this.pasteSchema),e.off("markdown-it",this.markdownIt)}}],[{key:"pluginName",get:function(){return"table"}}]),n}(l.v);t.b=ue},2586:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d=n(4),u=n(24),h=n(2474),p=n(2475),f=["[ ] ","[x] ","[X] "];function v(e,t){t||(t={checkStrings:f}),t.checkStrings=t.checkStrings||f,e.core.ruler.after("inline","task-list",(function(e){for(var n=e.tokens,r=2;r<n.length;r++)m(n,r,t)?y(n,r,e,t):b(n,r-1,t)&&w(n,r,e,t)}))}function g(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):(e.attrs||(e.attrs=[]),e.attrs[r]=i)}function m(e,t,n){return O(e[t])&&C(e[t-1])&&j(e[t],!1,n)&&E(e[t-2])}function b(e,t,n){return O(e[t])&&C(e[t-1])&&j(e[t],!0,n)&&(t-2<0||!E(e[t-2]))}function y(e,t,n,r){var i=e[t],o=e[t-2];r.itemClass&&g(o,"class",r.itemClass),r.rootClass&&g(e[function(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return-1}(e,t-2)],"class",r.rootClass);var a=k(i,r.checkStrings),s=a.markup,l=a.content,c=a.checked;o.markup=s,i.content=l,i.children&&i.children.length>0&&(i.children[0].content=i.content),o.info=c?"true":"false";var u=x(c,n.Token),h=Object(d.a)(u,2),p=h[0],f=h[1];e.splice(t,0,p),e.splice(t+1,0,f)}function w(e,t,n,r){var i=e[t],o=e[t-1],a=e[t-2];a.tag="ul",a.type="task_list_open",r.rootClass&&g(a,"class",r.rootClass);var s=new n.Token("task_list_item_open","li",1);r.itemClass&&g(s,"class",r.itemClass),e.splice(t-1,0,s);var l=k(o,r.checkStrings),c=l.markup,u=l.content,h=l.checked;s.markup=c,o.content=u,o.children&&o.children.length>0&&(o.children[0].content=o.content),s.info=h?"true":"false";var p=x(h,n.Token),f=Object(d.a)(p,2),v=f[0],m=f[1];e.splice(t,0,v),e.splice(t+1,0,m);var b=new n.Token("task_list_item_close","li",-1);e.splice(t+3,0,b),i.tag="ul",i.type="task_list_close"}function k(e,t){for(var n="",r="",i=!1,o=function(o){var a=t[o],s=function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.trim():a;return!!e.content.startsWith(o)&&(n=o,r=e.content.replace(o,""),i="x"===o.substring(1,2).trim().toLowerCase(),!0)},l=s(a);if(l||(l=s(a,!0)),l)return"break"},a=0;a<t.length;a++){if("break"===o(a))break}return{markup:n,content:r,checked:i}}function x(e,t){var n=new t("task_list_item_checkbox_open","span",1);return g(n,c.e,"inline"),g(n,c.c,"checkbox"),g(n,c.f,Object(c.N)({type:"inline",checked:e})),[n,new t("task_list_item_checkbox_close","span",-1)]}function O(e){return"inline"===e.type}function C(e){return"paragraph_open"===e.type}function E(e){return"list_item_open"===e.type}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(arguments.length>2?arguments[2]:void 0).checkStrings.some((function(n){return 0===e.content.indexOf(t?n.trim():n)}))}function M(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}M(".data-checkbox {\r\n\tfont-size: 14px;\r\n\tfont-variant: tabular-nums;\r\n\tcolor: rgba(0, 0, 0, 0.65);\r\n\tbox-sizing: border-box;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tmax-width: 16px !important;\r\n\tlist-style: none;\r\n\twhite-space: nowrap;\r\n\tcursor: pointer;\r\n\toutline: none;\r\n\tdisplay: inline-block;\r\n\tline-height: 1;\r\n\tposition: relative;\r\n}\r\n\r\n.data-checkbox-checked:after {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tborder-radius: 2px;\r\n\tborder: 1px solid #347eff;\r\n\tcontent: \"\";\r\n\tvisibility: hidden;\r\n}\r\n\r\n.data-checkbox:not(.data-checkbox-mobile):focus .data-checkbox-inner,.data-checkbox:not(.data-checkbox-mobile) .data-checkbox-inner {\r\n    border-color: #347eff\r\n}\r\n\r\n.data-checkbox:hover:after{\r\n\tvisibility: visible;\r\n}\r\n\r\n.data-checkbox-inner {\r\n\tposition: relative;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n    display: inline-block;\r\n\tborder: 1px solid #d9d9d9;\r\n\tborder-radius: 2px;\r\n\tbackground-color: #fff;\r\n\t-webkit-transition: all 0.3s;\r\n\ttransition: all 0.3s;\r\n\tborder-collapse: separate;\r\n}\r\n\r\n.data-checkbox-inner:after {\r\n\t-webkit-transform: rotate(45deg) scale(0);\r\n\t-ms-transform: rotate(45deg) scale(0);\r\n\ttransform: rotate(45deg) scale(0);\r\n\tposition: absolute;\r\n\tleft: 4.57142857px;\r\n\ttop: 1.14285714px;\r\n\tdisplay: table;\r\n\twidth: 5.71428571px;\r\n\theight: 9.14285714px;\r\n\tborder: 2px solid #fff;\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tcontent: ' ';\r\n\t-webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\r\n\ttransition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\r\n\topacity: 0;\r\n}\r\n\r\n.data-checkbox-checked .data-checkbox-inner:after {\r\n\t-webkit-transform: rotate(45deg) scale(1);\r\n\t-ms-transform: rotate(45deg) scale(1);\r\n\ttransform: rotate(45deg) scale(1);\r\n\tposition: absolute;\r\n\tdisplay: table;\r\n\tborder: 2px solid #fff;\r\n\tborder-top: 0;\r\n\tborder-left: 0;\r\n\tcontent: ' ';\r\n\t-webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\r\n\ttransition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\r\n\topacity: 1;\r\n}\r\n\r\n.data-checkbox-checked .data-checkbox-inner {\r\n\tbackground-color: #347eff;\r\n    border-color: #347eff;\r\n}\r\n\r\n.data-checkbox-disabled {\r\n\tcursor: not-allowed;\r\n}\r\n\r\n.data-checkbox-disabled.data-checkbox-checked .data-checkbox-inner:after {\r\n\t-webkit-animation-name: none;\r\n\tanimation-name: none;\r\n\tborder-color: rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.data-checkbox-disabled .data-checkbox-input {\r\n\tcursor: not-allowed;\r\n}\r\n\r\n.data-checkbox-disabled .data-checkbox-inner {\r\n\tborder-color: #d9d9d9 !important;\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.data-checkbox-disabled .data-checkbox-inner:after {\r\n\t-webkit-animation-name: none;\r\n\tanimation-name: none;\r\n\tborder-color: #f5f5f5;\r\n\tborder-collapse: separate;\r\n}\r\n\r\n.data-checkbox-disabled + span {\r\n\tcolor: rgba(0, 0, 0, 0.25);\r\n\tcursor: not-allowed;\r\n}\r\n");var N="data-checkbox",S="data-checkbox-checked",T=Object(p.a)("container"),_=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object.defineProperty(Object(u.a)(e),T,{writable:!0,value:void 0}),e.update=function(t){var n,r,i=void 0===t?e.isChecked():t,o=e.root.parent();i?(null===(n=Object(h.a)(Object(u.a)(e),T)[T])||void 0===n||n.removeClass(S),null===o||void 0===o||o.removeAttributes("checked")):(null===(r=Object(h.a)(Object(u.a)(e),T)[T])||void 0===r||r.addClass(S),null===o||void 0===o||o.attributes("checked","true"));return i},e.isChecked=function(){var t;return!!(null===(t=Object(h.a)(Object(u.a)(e),T)[T])||void 0===t?void 0:t.hasClass(S))},e.onClick=function(t){t.preventDefault(),t.stopPropagation();var n=e.update();e.setValue({checked:!n})},e}return Object(i.a)(n,[{key:"onSelectByOther",value:function(){}},{key:"onSelect",value:function(){}},{key:"onActivateByOther",value:function(){}},{key:"render",value:function(){var e='\n        <span class="'.concat(N).concat(c.ab?" ".concat(N,"-mobile"):"",'">\n                <span class="').concat("data-checkbox-inner",'"></span>\n            </span>'),t=this.getValue();Object(h.a)(this,T)[T]?Object(h.a)(this,T)[T]=this.getCenter().first():(Object(h.a)(this,T)[T]=Object(c.a)(e),this.getCenter().append(Object(h.a)(this,T)[T]));var n=this.editor;this.update(!(null===t||void 0===t?void 0:t.checked)),Object(c.X)(n)&&!n.readonly&&Object(h.a)(this,T)[T].on("mousedown",this.onClick)}},{key:"destroy",value:function(){var e;null===(e=Object(h.a)(this,T)[T])||void 0===e||e.off("mousedown",this.onClick)}}],[{key:"cardName",get:function(){return"checkbox"}},{key:"cardType",get:function(){return c.i.INLINE}},{key:"singleSelectable",get:function(){return!1}},{key:"autoSelected",get:function(){return!1}},{key:"collab",get:function(){return!1}},{key:"focus",get:function(){return!1}}]),n}(c.g);M('.am-engine .data-list-item [data-card-key="checkbox"],.am-engine-view .data-list-item [data-card-key="checkbox"] {\r\n\tmargin-left: 0;\r\n}\r\n\r\n.am-engine .data-list-task,.am-engine-view .data-list-task {\r\n\tlist-style: none;\r\n\ttext-indent: 0;\r\n}\r\n\r\n.am-engine .data-list-task [data-card-key="checkbox"],.am-engine-view .data-list-task [data-card-key="checkbox"] {\r\n    margin-left: -22px;\r\n    height: 16px;\r\n    display: inline-block;\r\n    width: 22px;\r\n    vertical-align: middle;\r\n    height: 100%;\r\n}\r\n\r\n.am-engine .data-list-task [data-card-key="checkbox"] [data-card-element="center"],.am-engine .data-list-task [data-card-key="checkbox"] [data-card-element="body"],.am-engine-view .data-list-task [data-card-key="checkbox"] [data-card-element="center"]{\r\n    height: 16px;\r\n    width: 16px;\r\n    vertical-align: unset;\r\n}');var A="data-list-task",I="parse:html",D="markdown-it",z="paste:each",L="paste:each-after",R=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).cardName="checkbox",e.tagName="ul",e.attributes={class:"@var0","data-indent":"@var1"},e.variable={"@var0":{required:!0,value:[e.editor.list.CUSTOMZIE_UL_CLASS,A]},"@var1":"@number"},e.allowIn=["blockquote","$root"],e.parseHtml=function(t,n){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<span style="'.concat(e?"background:#347eff;position:relative;":"background:#fff;",'width: 16px;height: 16px;display: inline-block;border: 1px solid #347eff;border-radius: 2px;transition: all 0.3s;border-collapse: separate;">').concat(e,"</span>")},i=[];return t.find("[".concat(c.c,'="checkbox"]')).each((function(t){var o=Object(c.a)(t),a=Object(c.a)("<span>".concat(o.find(".data-checkbox-checked").length>0?r('<span style="transform: rotate(45deg) scale(1);position: absolute;display: block;border: 2px solid #fff;border-top: 0;border-left: 0;width:5.71428571px;height:9.14285714px;transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;opacity: 1;left:3.57142857px;top:0.14285714px;"></span>'):r(),"</span>"));if(a.css({margin:"3px 0.5ex","vertical-align":"middle",width:"16px",height:"16px",color:"color: rgba(0, 0, 0, 0.65)"}),o.empty(),n){var s=e.editor.card.find(o),l=(null===s||void 0===s?void 0:s.getValue())||Object(c.L)(o.attributes(c.f));l&&(a=n(a,l))}o.append(a),i.push(o)})),t.find(".".concat(A)).css({"list-style":"none"}),i},e.markdownIt=function(t){var n=e.editor;!1!==e.options.markdown&&(t.use(v,{itemClass:n.list.CUSTOMZIE_LI_CLASS,rootClass:"".concat(n.list.CUSTOMZIE_UL_CLASS," ").concat(A)}),t.enable("task-list"))},e.pasteHtml=function(t){if(Object(c.X)(e.editor)){if(t.isElement()){var n,r=t.attributes(),i=r[c.c]||r[c.x];if(i&&i===_.cardName&&"li"!==(null===(n=t.parent())||void 0===n?void 0:n.name))return t.remove(),!1}return!0}},e.pasteEachAfter=function(t){var n=e.editor,r=t.find("li.".concat(n.list.CUSTOMZIE_LI_CLASS));r.each((function(e,t){var i=r.eq(t);if(i){var o=i.first();if(o&&o.name===_.cardName){var a=n.card.find(o);if(a){var s=i.parent();null===s||void 0===s||s.addClass(A);var l=a.getValue();l&&l.checked?null===s||void 0===s||s.attributes("checked","true"):null===s||void 0===s||s.removeAttributes("checked")}}}}))},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;e.on(I,this.parseHtml),Object(c.X)(e)&&(e.on(D,this.markdownIt),e.on(L,this.pasteEachAfter),e.on(z,this.pasteHtml))}},{key:"schema",value:function(){return[Object(o.a)(Object(a.a)(n.prototype),"schema",this).call(this),{name:"li",type:"block",attributes:{class:{required:!0,value:this.editor.list.CUSTOMZIE_LI_CLASS},checked:["true","false"]},allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){var t;return"li"===e.name?e.hasClass(this.editor.list.CUSTOMZIE_LI_CLASS)&&"checkbox"===(null===(t=e.first())||void 0===t?void 0:t.attributes(c.c)):e.hasClass("data-list")&&e.hasClass(A)}},{key:"execute",value:function(e){var t=this.editor;if(Object(c.X)(t)){var n=t.change,r=t.list,i=t.block;r.split();var o=n.range.get(),a=i.findBlocks(o);if(a){var s=o.createSelection("tasklist-execute");if(r.isSpecifiedType(a,"ul","checkbox"))r.unwrap(a);else r.toCustomize(a,"checkbox",e).forEach((function(e){t.node.isList(e)&&e.addClass(A)}));if(s.move(),o.collapsed&&o.startContainer.nodeType===Node.ELEMENT_NODE&&0===o.startContainer.childNodes.length&&o.startContainer.parentNode){var l=document.createElement("br");o.startNode.before(l),o.startContainer.parentNode.removeChild(o.startContainer),o.select(l),o.collapse(!1)}n.apply(o),r.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+9"}},{key:"destroy",value:function(){var e=this.editor;e.off(I,this.parseHtml),Object(c.X)(e)&&(e.off(D,this.markdownIt),e.off(L,this.pasteEachAfter),e.off(z,this.pasteHtml))}}],[{key:"pluginName",get:function(){return"tasklist"}}]),n}(c.s);t.b=R},2599:function(e,t,n){var r=n(2482),i=n(2507),o=n(2485),a=n(2490),s=n(2476),l=s.clone,c=n(2820),d=o.CODES;function u(e,t,n){r.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=null,this.pendingFetch=[],this.pendingSubscribe=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1,this.submitSource=!1,this.paused=!1,this._dataStateVersion=0}function h(e,t){if(e.del)return delete(n=t).op,delete n.create,void delete n.del;var n;if(t.del)return new o(d.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new o(d.ERR_DOC_ALREADY_CREATED,"Document already created");if("op"in t){if(e.create)return new o(d.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var r=e.type.transformX(e.op,t.op);e.op=r[0],t.op=r[1]}else{var i=e.type.transform(e.op,t.op,"left"),a=e.type.transform(t.op,e.op,"right");e.op=i,t.op=a}}}e.exports=u,r.mixin(u),u.prototype.destroy=function(e){var t=this;t.whenNothingPending((function(){t.wantSubscribe?t.unsubscribe((function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),t.emit("destroy"),e&&e()})):(t.connection._destroyDoc(t),t.emit("destroy"),e&&e())}))},u.prototype._setType=function(e){if("string"===typeof e&&(e=a.map[e]),e)this.type=e;else{if(null!==e){var t=new o(d.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this._setData(void 0)}},u.prototype._setData=function(e){this.data=e,this._dataStateVersion++},u.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!==typeof e.v){var n=new o(d.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);n=new o(d.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=void 0===e.type?a.defaultType:e.type;this._setType(r),this._setData(this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data),this.emit("load"),t&&t()},u.prototype.whenNothingPending=function(e){var t=this;s.nextTick((function(){t.hasPending()?t.once("nothing pending",e):e()}))},u.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe||this.pendingFetch.length||this.pendingSubscribe.length)},u.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},u.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},u.prototype._emitResponseError=function(e,t){return e&&e.code===d.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},u.prototype._handleFetch=function(e,t){var n=this.pendingFetch;this.pendingFetch=[];var r=this.inflightFetch.shift();if(r&&n.push(r),n.length&&(r=function(e){s.callEach(n,e)}),e)return this._emitResponseError(e,r);this.ingestSnapshot(t,r),this._emitNothingPending()},u.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe;this.inflightSubscribe=null;var r,i=this.pendingFetch;if(this.pendingFetch=[],n.callback&&i.push(n.callback),i.length&&(r=function(e){s.callEach(i,e)}),e)return this._emitResponseError(e,r);this.subscribed=n.wantSubscribe,this.subscribed?this.ingestSnapshot(t,r):r&&r(),this._emitNothingPending(),this._flushSubscribe()},u.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===d.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp)if(r=h(this.inflightOp,t))return this._hardRollback(r);for(var n=0;n<this.pendingOps.length;n++){var r;if(r=h(this.pendingOps[n],t))return this._hardRollback(r)}this.version++;try{this._otApply(t,!1)}catch(i){return this._hardRollback(i)}}},u.prototype._onConnectionStateChanged=function(){this.connection.canSend?(this.flush(),this._resubscribe()):(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,this.inflightSubscribe&&(this.inflightSubscribe.wantSubscribe?(this.pendingSubscribe.unshift(this.inflightSubscribe),this.inflightSubscribe=null):this._handleSubscribe()),this.inflightFetch.length&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch),this.inflightFetch.length=0))},u.prototype._resubscribe=function(){if(!this.pendingSubscribe.length&&this.wantSubscribe)return this.subscribe();!this.pendingSubscribe.some((function(e){return e.wantSubscribe}))&&this.pendingFetch.length&&this.fetch(),this._flushSubscribe()},u.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);!function(e,t,n){if(t){var r=e.pop();e.push((function(e){r&&r(e),n&&n(e)}))}else e.push(n)}(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},u.prototype.subscribe=function(e){this._queueSubscribe(!0,e)},u.prototype.unsubscribe=function(e){this._queueSubscribe(!1,e)},u.prototype._queueSubscribe=function(e,t){var n,r=this.pendingSubscribe[this.pendingSubscribe.length-1]||this.inflightSubscribe;r&&r.wantSubscribe===e?r.callback=(n=(n=[r.callback,t]).filter(s.truthy)).length?function(e){s.callEach(n,e)}:null:(this.pendingSubscribe.push({wantSubscribe:!!e,callback:t}),this._flushSubscribe())},u.prototype._flushSubscribe=function(){if(!this.inflightSubscribe&&this.pendingSubscribe.length){if(this.connection.canSend)return this.inflightSubscribe=this.pendingSubscribe.shift(),this.wantSubscribe=this.inflightSubscribe.wantSubscribe,void(this.wantSubscribe?this.connection.sendSubscribe(this):(this.subscribed=!1,this.connection.sendUnsubscribe(this)));if(!this.pendingSubscribe[0].wantSubscribe){this.inflightSubscribe=this.pendingSubscribe.shift();var e=this;s.nextTick((function(){e._handleSubscribe()}))}}},u.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},u.prototype._otApply=function(e,t){if("op"in e){if(!this.type)throw new o(d.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(this.emit("before op batch",e.op,t),!t&&this.type===a.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,r=0;r<e.op.length;r++){var i={op:[e.op[r]]};this.emit("before op",i.op,t,e.src);for(var s=n;s<this.applyStack.length;s++){var l=h(this.applyStack[s],i);if(l)return this._hardRollback(l)}this._setData(this.type.apply(this.data,i.op)),this.emit("op",i.op,t,e.src)}return this.emit("op batch",e.op,t),void this._popApplyStack(n)}return this.emit("before op",e.op,t,e.src),this._setData(this.type.apply(this.data,e.op)),this.emit("op",e.op,t,e.src),void this.emit("op batch",e.op,t)}if(e.create)return this._setType(e.create.type),this.type.deserialize?this.type.createDeserialized?this._setData(this.type.createDeserialized(e.create.data)):this._setData(this.type.deserialize(this.type.create(e.create.data))):this._setData(this.type.create(e.create.data)),void this.emit("create",t);if(e.del){var c=this.data;return this._setType(null),void this.emit("del",c,t)}},u.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new o(d.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=s.MAX_SAFE_INTEGER)return this.emit("error",new o(d.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},u.prototype._submit=function(e,t,n){if(t||(t=!0),"op"in e){if(!this.type){var r=new o(d.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,t,n),this._otApply(e,t)}catch(a){return this._hardRollback(a)}var i=this;s.nextTick((function(){i.flush()}))},u.prototype._pushOp=function(e,t,n){if(e.source=t,this.applyStack)this.applyStack.push(e);else{var r=this._tryCompose(e);if(r)return void r.callbacks.push(n)}e.type=this.type,e.callbacks=[n],this.pendingOps.push(e)},u.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t)if(-1!==(r=this.pendingOps.indexOf(t)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){t=n[r];var i=this._tryCompose(t);i?i.callbacks=i.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},u.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt&&(!this.submitSource||c(e.source,t.source)))return t.create&&"op"in e?(t.create.data=this.type.apply(t.create.data,e.op),t):"op"in t&&"op"in e&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},u.prototype.submitOp=function(e,t,n){"function"===typeof t&&(n=t,t=null);var r={op:e},i=t&&t.source;this._submit(r,i,n)},u.prototype.create=function(e,t,n,r){if("function"===typeof t?(r=t,n=null,t=null):"function"===typeof n&&(r=n,n=null),t||(t=a.defaultType.uri),this.type){var i=new o(d.ERR_DOC_ALREADY_CREATED,"Document already exists");return r?r(i):this.emit("error",i)}var s={create:{type:t,data:e}},l=n&&n.source;this._submit(s,l,r)},u.prototype.del=function(e,t){if("function"===typeof e&&(t=e,e=null),!this.type){var n=new o(d.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var r=e&&e.source;this._submit({del:!0},r,t)},u.prototype.pause=function(){this.paused=!0},u.prototype.resume=function(){this.paused=!1,this.flush()},u.prototype.toSnapshot=function(){return{v:this.version,data:l(this.data),type:this.type.uri}},u.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return i.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},u.prototype._rollback=function(e){var t=this.inflightOp;if("op"in t&&t.type.invert){try{t.op=t.type.invert(t.op)}catch(i){return this._hardRollback(e)}for(var n=0;n<this.pendingOps.length;n++){var r=h(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t,!1)}catch(i){return this._hardRollback(i)}this._clearInflightOp(e)}else this._hardRollback(e)},u.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch((function(){for(var r=!!t.length,i=0;i<t.length;i++)r=s.callEach(t[i].callbacks,e)&&r;if(e&&!r)return n.emit("error",e)}))},u.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=s.callEach(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}},2600:function(e,t,n){var r=n(2482),i=n(2476);function o(e,t,n,i,o,a,s){r.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=i,this.query=o,this.results=null,a&&a.results&&(this.results=a.results,delete a.results),this.extra=void 0,this.options=a,this.callback=s,this.ready=!1,this.sent=!1}e.exports=o,r.mixin(o),o.prototype.hasPending=function(){return!this.ready},o.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},o.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&i.nextTick(e)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},o.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},o.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},o.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var i=this,o=1,a=function(e){if(e)return i._finishResponse(e,r);--o||i._finishResponse(null,r)};if(Array.isArray(t))o+=t.length,this.results=this._ingestSnapshots(t,a),this.extra=n;else for(var s in t){o++;var l=t[s];this.connection.get(l.c||this.collection,s).ingestSnapshot(l,a)}a()},o.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.connection.get(i.c||this.collection,i.d);o.ingestSnapshot(i,t),n.push(o)}return n},o.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},o.prototype._handleError=function(e){this.emit("error",e)},o.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){"insert"===(n=e[t]).type&&(n.values=this._ingestSnapshots(n.values))}for(t=0;t<e.length;t++){var n;switch((n=e[t]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var i=n.howMany||1,o=this.results.splice(n.index,i);this.emit("remove",o,n.index);break;case"move":i=n.howMany||1;var a=this.results.splice(n.from,i);Array.prototype.splice.apply(this.results,[n.to,0].concat(a)),this.emit("move",a,n.from,n.to)}}this.emit("changed",this.results)},o.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}},2601:function(e,t,n){var r=n(2482),i=n(2602),o=n(2603),a=n(2476),s=n(2821),l=n(2822);function c(e,t){if(r.EventEmitter.call(this),!t||"string"!==typeof t)throw new Error("Presence channel must be provided");this.connection=e,this.channel=t,this.wantSubscribe=!1,this.subscribed=!1,this.remotePresences={},this.localPresences={},this._remotePresenceInstances={},this._subscriptionCallbacksBySeq={}}e.exports=c,r.mixin(c),c.prototype.subscribe=function(e){this._sendSubscriptionAction(!0,e)},c.prototype.unsubscribe=function(e){this._sendSubscriptionAction(!1,e)},c.prototype.create=function(e){e=e||l();var t=this._createLocalPresence(e);return this.localPresences[e]=t,t},c.prototype.destroy=function(e){var t=this;this.unsubscribe((function(n){if(n)return t._callbackOrEmit(n,e);var r=Object.keys(t.localPresences),i=Object.keys(t._remotePresenceInstances);s.parallel([function(e){s.each(r,(function(e,n){t.localPresences[e].destroy(n)}),e)},function(e){s.each(i,(function(e,n){t._remotePresenceInstances[e].destroy(n)}),e)}],(function(n){delete t.connection._presences[t.channel],t._callbackOrEmit(n,e)}))}))},c.prototype._sendSubscriptionAction=function(e,t){this.wantSubscribe=!!e;var n=this.wantSubscribe?"ps":"pu",r=this.connection._presenceSeq++;this._subscriptionCallbacksBySeq[r]=t,this.connection.canSend&&this.connection._sendPresenceAction(n,r,this)},c.prototype._handleSubscribe=function(e,t){this.wantSubscribe&&(this.subscribed=!0);var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)},c.prototype._handleUnsubscribe=function(e,t){this.subscribed=!1;var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)},c.prototype._receiveUpdate=function(e,t){var n=a.dig(this.localPresences,t.id);if(n)return n._ack(e,t.pv);if(e)return this.emit("error",e);var r=this;a.digOrCreate(this._remotePresenceInstances,t.id,(function(){return r._createRemotePresence(t.id)})).receiveUpdate(t)},c.prototype._updateRemotePresence=function(e){this.remotePresences[e.presenceId]=e.value,null===e.value&&this._removeRemotePresence(e.presenceId),this.emit("receive",e.presenceId,e.value)},c.prototype._broadcastAllLocalPresence=function(e){if(e)return this.emit("error",e);for(var t in this.localPresences){var n=this.localPresences[t];null!==n.value&&n.send()}},c.prototype._removeRemotePresence=function(e){this._remotePresenceInstances[e].destroy(),delete this._remotePresenceInstances[e],delete this.remotePresences[e]},c.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)for(var e in this._resubscribe(),this.localPresences)this.localPresences[e]._sendPending()},c.prototype._resubscribe=function(){var e=[];for(var t in this._subscriptionCallbacksBySeq){var n=this._subscriptionCallback(t);e.push(n)}if(!this.wantSubscribe)return this._callEachOrEmit(e);var r=this;this.subscribe((function(t){r._callEachOrEmit(e,t)}))},c.prototype._subscriptionCallback=function(e){var t=this._subscriptionCallbacksBySeq[e];return delete this._subscriptionCallbacksBySeq[e],t},c.prototype._callbackOrEmit=function(e,t){if(t)return a.nextTick(t,e);e&&this.emit("error",e)},c.prototype._createLocalPresence=function(e){return new i(this,e)},c.prototype._createRemotePresence=function(e){return new o(this,e)},c.prototype._callEachOrEmit=function(e,t){!a.callEach(e,t)&&t&&this.emit("error",t)}},2602:function(e,t,n){var r=n(2482),i=n(2476);function o(e,t){if(r.EventEmitter.call(this),!t||"string"!==typeof t)throw new Error("LocalPresence presenceId must be a string");this.presence=e,this.presenceId=t,this.connection=e.connection,this.presenceVersion=0,this.value=null,this._pendingMessages=[],this._callbacksByPresenceVersion={}}e.exports=o,r.mixin(o),o.prototype.submit=function(e,t){this.value=e,this.send(t)},o.prototype.send=function(e){var t=this._message();this._pendingMessages.push(t),this._callbacksByPresenceVersion[t.pv]=e,this._sendPending()},o.prototype.destroy=function(e){var t=this;this.submit(null,(function(n){if(n)return t._callbackOrEmit(n,e);delete t.presence.localPresences[t.presenceId],e&&e()}))},o.prototype._sendPending=function(){if(this.connection.canSend){var e=this;this._pendingMessages.forEach((function(t){e.connection.send(t)})),this._pendingMessages=[]}},o.prototype._ack=function(e,t){var n=this._getCallback(t);this._callbackOrEmit(e,n)},o.prototype._message=function(){return{a:"p",ch:this.presence.channel,id:this.presenceId,p:this.value,pv:this.presenceVersion++}},o.prototype._getCallback=function(e){var t=this._callbacksByPresenceVersion[e];return delete this._callbacksByPresenceVersion[e],t},o.prototype._callbackOrEmit=function(e,t){if(t)return i.nextTick(t,e);e&&this.emit("error",e)}},2603:function(e,t,n){var r=n(2476);function i(e,t){this.presence=e,this.presenceId=t,this.connection=this.presence.connection,this.value=null,this.presenceVersion=0}e.exports=i,i.prototype.receiveUpdate=function(e){e.pv<this.presenceVersion||(this.value=e.p,this.presenceVersion=e.pv,this.presence._updateRemotePresence(this))},i.prototype.destroy=function(e){delete this.presence._remotePresenceInstances[this.presenceId],delete this.presence.remotePresences[this.presenceId],e&&r.nextTick(e)}},2604:function(e,t,n){var r=n(2828),i=n(2482);function o(e,t,n,r,o){if(i.EventEmitter.call(this),"function"!==typeof o)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=o,this.sent=!1}e.exports=o,i.mixin(o),o.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},o.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,i=new r(this.id,t.v,t.type,t.data,n);this.callback(null,i)}},2605:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ke}));var r=n(1),i=n(15),o=n(16),a=n(19),s=n(21),l=n(2470),c=n(24),d=n(116),u=n(63),h=n(2474),p=n(2475),f=n(2),v=n(2471),g=n.n(v),m=n(243),b=n.n(m),y=n(41),w=n.n(y),k=n(0),x=n.n(k),O=n(3),C=n(14),E=n.n(C),j=n(276),M=n(47),N=n(2836),S=Object(k.createContext)(void 0),T=n(366),_=n(562),A={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},I={lang:Object(O.a)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},_.a),timePickerLocale:Object(O.a)({},A)},D=I,z="${label} is not a valid ${type}",L={locale:"en",Pagination:T.a,DatePicker:I,TimePicker:A,Calendar:D,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:z,method:z,array:z,object:z,number:z,date:z,boolean:z,integer:z,float:z,regexp:z,email:z,url:z,hex:z},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},R=function(e){var t=e.componentName,n=void 0===t?"global":t,r=e.defaultLocale,i=e.children,o=k.useContext(S);return i(k.useMemo((function(){var e,t=r||L[n],i=null!==(e=null===o||void 0===o?void 0:o[n])&&void 0!==e?e:{};return Object(O.a)(Object(O.a)({},t instanceof Function?t():t),i||{})}),[n,r,o]),k.useMemo((function(){var e=o&&o.locale;return o&&o.exist&&!e?L.locale:e}),[o]),o)},B=function(){var e=(0,k.useContext(N.b).getPrefixCls)("empty-img-default");return k.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},k.createElement("g",{fill:"none",fillRule:"evenodd"},k.createElement("g",{transform:"translate(24 31.67)"},k.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),k.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),k.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),k.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),k.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),k.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),k.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},k.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),k.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},P=function(){var e=(0,k.useContext(N.b).getPrefixCls)("empty-img-simple");return k.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},k.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},k.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),k.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},k.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),k.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},H=k.createElement(B,null),q=k.createElement(P,null),U=function(e){var t=e.className,n=e.prefixCls,i=e.image,o=void 0===i?H:i,a=e.description,s=e.children,l=e.imageStyle,c=F(e,["className","prefixCls","image","description","children","imageStyle"]),d=k.useContext(N.b),u=d.getPrefixCls,h=d.direction;return k.createElement(R,{componentName:"Empty"},(function(e){var i,d=u("empty",n),p="undefined"!==typeof a?a:e.description,f="string"===typeof p?p:"empty",v=null;return v="string"===typeof o?k.createElement("img",{alt:f,src:o}):o,k.createElement("div",Object(O.a)({className:E()(d,(i={},Object(r.a)(i,"".concat(d,"-normal"),o===q),Object(r.a)(i,"".concat(d,"-rtl"),"rtl"===h),i),t)},c),k.createElement("div",{className:"".concat(d,"-image"),style:l},v),p&&k.createElement("div",{className:"".concat(d,"-description")},p),s&&k.createElement("div",{className:"".concat(d,"-footer")},s))}))};U.PRESENTED_IMAGE_DEFAULT=H,U.PRESENTED_IMAGE_SIMPLE=q;var W=U,V=function(e){return k.createElement(N.a,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return k.createElement(W,{image:W.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return k.createElement(W,{image:W.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return k.createElement(W,null)}}))},Y=k.createContext(!1),G=Y,Z=k.createContext(void 0),X=Z,Q=(n(101),k.createContext({})),K=n(2504),$=n(2503);Object($.a)("warning","error","");var J=n(701),ee=n(4),te=n(23),ne=Object(k.createContext)({}),re=n(17),ie=n(159),oe=n(25),ae=n(136);function se(e){return"object"===Object(re.a)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Object(re.a)(e.icon)||"function"===typeof e.icon)}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function ce(e,t,n){return n?x.a.createElement(e.tag,Object(f.a)(Object(f.a)({key:t},le(e.attrs)),n),(e.children||[]).map((function(n,r){return ce(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):x.a.createElement(e.tag,Object(f.a)({key:t},le(e.attrs)),(e.children||[]).map((function(n,r){return ce(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function de(e){return Object(ie.a)(e)[0]}function ue(e){return e?Array.isArray(e)?e:[e]:[]}var he=["icon","className","onClick","style","primaryColor","secondaryColor"],pe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var fe=function(e){var t,n,r=e.icon,i=e.className,o=e.onClick,a=e.style,s=e.primaryColor,l=e.secondaryColor,c=Object(te.a)(e,he),d=pe;if(s&&(d={primaryColor:s,secondaryColor:l||de(s)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=Object(k.useContext)(ne).csp;Object(k.useEffect)((function(){Object(ae.b)(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=se(r),n="icon should be icon definiton, but got ".concat(r),Object(oe.a)(t,"[@ant-design/icons] ".concat(n)),!se(r))return null;var u=r;return u&&"function"===typeof u.icon&&(u=Object(f.a)(Object(f.a)({},u),{},{icon:u.icon(d.primaryColor,d.secondaryColor)})),ce(u.icon,"svg-".concat(u.name),Object(f.a)({className:i,onClick:o,style:a,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};fe.displayName="IconReact",fe.getTwoToneColors=function(){return Object(f.a)({},pe)},fe.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;pe.primaryColor=t,pe.secondaryColor=n||de(t),pe.calculated=!!n};var ve=fe;function ge(e){var t=ue(e),n=Object(ee.a)(t,2),r=n[0],i=n[1];return ve.setTwoToneColors({primaryColor:r,secondaryColor:i})}var me=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ge("#1890ff");var be=k.forwardRef((function(e,t){var n,i=e.className,o=e.icon,a=e.spin,s=e.rotate,l=e.tabIndex,c=e.onClick,d=e.twoToneColor,u=Object(te.a)(e,me),h=k.useContext(ne).prefixCls,p=void 0===h?"anticon":h,v=E()(p,(n={},Object(r.a)(n,"".concat(p,"-").concat(o.name),!!o.name),Object(r.a)(n,"".concat(p,"-spin"),!!a||"loading"===o.name),n),i),g=l;void 0===g&&c&&(g=-1);var m=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,b=ue(d),y=Object(ee.a)(b,2),w=y[0],x=y[1];return k.createElement("span",Object(f.a)(Object(f.a)({role:"img","aria-label":o.name},u),{},{ref:t,tabIndex:g,onClick:c,className:v}),k.createElement(ve,{icon:o,primaryColor:w,secondaryColor:x,style:m}))}));be.displayName="AntdIcon",be.getTwoToneColor=function(){var e=ve.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},be.setTwoToneColor=ge;var ye=be,we=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:J.a}))};we.displayName="CheckOutlined";var ke=k.forwardRef(we),xe=n(699),Oe=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:xe.a}))};Oe.displayName="CloseCircleFilled";var Ce=k.forwardRef(Oe),Ee=n(372),je=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:Ee.a}))};je.displayName="CloseOutlined";var Me=k.forwardRef(je),Ne=n(708),Se=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:Ne.a}))};Se.displayName="DownOutlined";var Te=k.forwardRef(Se),_e=n(540),Ae=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:_e.a}))};Ae.displayName="LoadingOutlined";var Ie=k.forwardRef(Ae),De=n(700),ze=function(e,t){return k.createElement(ye,Object(f.a)(Object(f.a)({},e),{},{ref:t,icon:De.a}))};ze.displayName="SearchOutlined";var Le=k.forwardRef(ze);n(71);var Re=k.createContext(null),Be=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Pe="SECRET_COMBOBOX_MODE_DO_NOT_USE",Fe=function(e,t){var n,i,o=e.prefixCls,a=e.bordered,s=void 0===a||a,l=e.className,c=e.getPopupContainer,d=e.dropdownClassName,u=e.popupClassName,h=e.listHeight,p=void 0===h?256:h,f=e.placement,v=e.listItemHeight,g=void 0===v?24:v,m=e.size,b=e.disabled,y=e.notFoundContent,w=e.status,x=e.showArrow,C=Be(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),S=k.useContext(N.b),T=S.getPopupContainer,_=S.getPrefixCls,A=S.renderEmpty,I=S.direction,D=S.virtual,z=S.dropdownMatchSelectWidth,L=k.useContext(X),R=_("select",o),B=_(),P=function(e,t){var n=k.useContext(Re),i=k.useMemo((function(){var i;if(!n)return"";var o=n.compactDirection,a=n.isFirstItem,s=n.isLastItem,l="vertical"===o?"-vertical-":"-";return E()((i={},Object(r.a)(i,"".concat(e,"-compact").concat(l,"item"),!0),Object(r.a)(i,"".concat(e,"-compact").concat(l,"first-item"),a),Object(r.a)(i,"".concat(e,"-compact").concat(l,"last-item"),s),Object(r.a)(i,"".concat(e,"-compact").concat(l,"item-rtl"),"rtl"===t),i))}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:i}}(R,I),F=P.compactSize,H=P.compactItemClassnames,q=k.useMemo((function(){var e=C.mode;if("combobox"!==e)return e===Pe?"combobox":e}),[C.mode]),U="multiple"===q||"tags"===q,W=void 0!==x?x:C.loading||!(U||"combobox"===q),Y=Object(k.useContext)(Q),Z=Y.status,$=Y.hasFeedback,J=Y.isFormItemInput,ee=Y.feedbackIcon,te=function(e,t){return t||e}(Z,w);i=void 0!==y?y:"combobox"===q?null:(A||V)("Select");var ne=function(e){var t=e.suffixIcon,n=e.clearIcon,r=e.menuItemSelectedIcon,i=e.removeIcon,o=e.loading,a=e.multiple,s=e.hasFeedback,l=e.prefixCls,c=e.showArrow,d=e.feedbackIcon,u=null!==n&&void 0!==n?n:k.createElement(Ce,null),h=function(e){return k.createElement(k.Fragment,null,!1!==c&&e,s&&d)},p=null;if(void 0!==t)p=h(t);else if(o)p=h(k.createElement(Ie,{spin:!0}));else{var f="".concat(l,"-suffix");p=function(e){var t=e.open,n=e.showSearch;return h(t&&n?k.createElement(Le,{className:f}):k.createElement(Te,{className:f}))}}return{clearIcon:u,suffixIcon:p,itemIcon:void 0!==r?r:a?k.createElement(ke,null):null,removeIcon:void 0!==i?i:k.createElement(Me,null)}}(Object(O.a)(Object(O.a)({},C),{multiple:U,hasFeedback:$,feedbackIcon:ee,showArrow:W,prefixCls:R})),re=ne.suffixIcon,ie=ne.itemIcon,oe=ne.removeIcon,ae=ne.clearIcon,se=Object(M.a)(C,["suffixIcon","itemIcon"]),le=E()(u||d,Object(r.a)({},"".concat(R,"-dropdown-").concat(I),"rtl"===I)),ce=F||m||L,de=k.useContext(G),ue=null!==b&&void 0!==b?b:de,he=E()((n={},Object(r.a)(n,"".concat(R,"-lg"),"large"===ce),Object(r.a)(n,"".concat(R,"-sm"),"small"===ce),Object(r.a)(n,"".concat(R,"-rtl"),"rtl"===I),Object(r.a)(n,"".concat(R,"-borderless"),!s),Object(r.a)(n,"".concat(R,"-in-form-item"),J),n),function(e,t,n){var i;return E()((i={},Object(r.a)(i,"".concat(e,"-status-success"),"success"===t),Object(r.a)(i,"".concat(e,"-status-warning"),"warning"===t),Object(r.a)(i,"".concat(e,"-status-error"),"error"===t),Object(r.a)(i,"".concat(e,"-status-validating"),"validating"===t),Object(r.a)(i,"".concat(e,"-has-feedback"),n),i))}(R,te,$),H,l);return k.createElement(j.c,Object(O.a)({ref:t,virtual:D,dropdownMatchSelectWidth:z},se,{transitionName:Object(K.b)(B,Object(K.a)(f),C.transitionName),listHeight:p,listItemHeight:g,mode:q,prefixCls:R,placement:void 0!==f?f:"rtl"===I?"bottomRight":"bottomLeft",direction:I,inputIcon:re,menuItemSelectedIcon:ie,removeIcon:oe,clearIcon:ae,notFoundContent:i,className:he,getPopupContainer:c||T,dropdownClassName:le,showArrow:$||x,disabled:ue}))},He=k.forwardRef(Fe);He.SECRET_COMBOBOX_MODE_DO_NOT_USE=Pe,He.Option=j.b,He.OptGroup=j.a;var qe=He,Ue=(n(2487),n(2709),n(2710),n(2711),n(2501),n(2536),n(2712),n(2713),n(2714),n(2715),n(2716),n(2717),n(2538),n(2718),n(2502),n(2719),n(2720),n(2721),n(2723),n(2724),n(2725),n(2726),n(2727),n(2728),n(2729),n(2730),n(2731),n(2732),n(2733),n(2734),n(2735),n(2736),n(2737),n(2488),n(2738),n(2739),n(2740),["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"]),We={header:"color: blue;font-weight: bold;",quote:"color: #090;",negative:"color: #d44;",positive:"color: #292;",strong:"font-weight: bold;",em:"font-style: italic;",link:"text-decoration: underline;color: #00c;",strikethrough:"text-decoration: line-through;",keyword:"color: #d73a49;",atom:"color: #905;",number:"color: #005cc5;",def:"color: #005cc5;",variable:"","variable-2":"color: #005cc5;","variable-3":"color: #22863a;",type:"color: #22863a;",comment:"color: #6a737d;",string:"color: #690","string-2":"color: #690;",meta:"color: #1f7f9a;",qualifier:"color: #555;",builtin:"color: #6f42c1;",bracket:"color: #997;",tag:"color: #22863a;",attribute:"color: #6f42c1;",hr:"color: #999;",error:"color: #f00;",invalidchar:"color: #f00;",operator:"color: #d73a49;",property:"color: #005cc5;"},Ve=function(){function e(t,n){Object(i.a)(this,e),this.editor=void 0,this.options=void 0,this.styleMap=void 0,this.codeMirror=void 0,this.mode="plain",this.container=void 0,this.editor=t,this.options=n,this.styleMap=Object(f.a)(Object(f.a)({},We),n.styleMap),this.container=n.container||Object(l.a)(this.renderTemplate())}return Object(o.a)(e,[{key:"renderTemplate",value:function(){return'<div class="data-codeblock-container"><div class="data-codeblock-content"></div></div>'}},{key:"getConfig",value:function(e,t){var n=this.codeMirror,r=n?n.getOption("indentUnit"):Ue.indexOf(t||"")>-1?4:2,i=e?e.match(/^ {2,4}(?=[^\s])/gm):null;i&&(r=i.reduce((function(e,t){return Math.min(e,t.length)}),1/0));var o=this.editor;return{tabSize:r,indentUnit:r,scrollbarStyle:"simple",readOnly:!Object(l.X)(o)||o.readonly,viewportMargin:1/0}}},{key:"getSyntax",value:function(e){return this.options.synatxMap[e]||e}},{key:"create",value:function(e,t,n){var r=this;this.mode=e;var i=this.getSyntax(e),o=this.container,a=g()(o.find(".data-codeblock-content").get(),Object(f.a)(Object(f.a)({value:t,mode:i,lineNumbers:!0,lineWrapping:!1,autofocus:!1,dragDrop:!1},this.getConfig(t,i)),n));return a.on("focus",(function(){var e=r.options.onFocus;e&&e()})),a.on("keydown",(function(e,t){(Object(l.Y)("mod+z",t)||Object(l.Y)("mod+y",t)||Object(l.Y)("mod+shift+z",t))&&t.stopPropagation();var n=e.lineCount(),i=e.getCursor(),o=i.line,a=i.ch,s=r.options,c=s.onUpFocus,d=s.onDownFocus,u=s.onLeftFocus,h=s.onRightFocus,p=e.getLine(o);if(o===n-1&&a===p.length){if(Object(l.Y)("down",t)||Object(l.Y)("ctrl+n",t))return void(d&&d(t));if(Object(l.Y)("right",t)||Object(l.Y)("shift+right",t)||Object(l.Y)("ctrl+e",t)||Object(l.Y)("ctrl+f",t))return void(h&&h(t))}0===o&&0===a&&(Object(l.Y)("up",t)||Object(l.Y)("ctrl+p",t)?c&&c(t):(Object(l.Y)("left",t)||Object(l.Y)("shift+left",t)||Object(l.Y)("ctrl+b",t)||Object(l.Y)("ctrl+a",t))&&u&&u(t))})),a.on("blur",(function(){var e=r.options.onBlur;e&&e()})),l.ab?a.on("touchstart",(function(e,t){var n=r.options.onMouseDown;n&&n(t)})):a.on("mousedown",(function(e,t){var n=r.options.onMouseDown;2===t.button&&t.stopPropagation(),n&&n(t)})),a.on("change",b()((function(){Object(l.X)(r.editor)&&r.save()}),50)),a.setOption("extraKeys",{Enter:function(e){var t=r.getConfig(e.getValue());Object.keys(t).forEach((function(n){return e.setOption(n,t[n])})),e.execCommand("newlineAndIndent")}}),o.on("mousedown",(function(e){(null===a||void 0===a?void 0:a.hasFocus())||setTimeout((function(){null===a||void 0===a||a.focus()}),0)})),this.codeMirror=a,this.codeMirror}},{key:"setAutoWrap",value:function(e){var t;null===(t=this.codeMirror)||void 0===t||t.setOption("lineWrapping",e)}},{key:"update",value:function(e,t){var n=this.codeMirror;this.mode=e,void 0!==t&&(null===n||void 0===n||n.setValue(t));var r=this.editor;null===n||void 0===n||n.setOption("mode",this.getSyntax(e)),null===n||void 0===n||n.setOption("readOnly",!(Object(l.X)(r)&&!r.readonly)),this.save()}},{key:"render",value:function(e,t,n){var r=this.container.find(".data-codeblock-content");e=this.getSyntax(e);var i=Object(l.a)('<div style="font-family: monospace;font-size: 13px; line-height: 21px; color: #595959; direction: ltr; height: auto; overflow: hidden;background: transparent;"><pre style="color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);" /></div>');r.append(i);var o=i.find("pre")[0];this.runMode(t||"",e,o,Object(f.a)(Object(f.a)({},this.getConfig(t,e)),n))}},{key:"save",value:function(){var e=this.editor,t=this.codeMirror;if(Object(l.X)(e)&&t&&!e.change.isComposing()){var n=t.getValue(),r=this.options.onSave;r&&r(this.mode,n)}}},{key:"focus",value:function(){var e=this.codeMirror;e&&e.focus()}},{key:"select",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.codeMirror;if(t)if(t.focus(),e)t.setSelection({line:0,ch:0});else{var n=t.lineCount()-1,r=t.getLine(n);t.setSelection({line:n,ch:r.length})}}},{key:"toHtml",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i=i||g.a.defaults.tabSize;for(var o="",a="",s=0;;){var l=t.indexOf("\t",s);if(-1===l){a+=t.slice(s),e+=t.length-s;break}e+=l-s,a+=t.slice(s,l);var c=i-e%i;e+=c;for(var d=0;d<c;++d)a+=" ";s=l+1}if(r){var u="";r.split(" ").forEach((function(e){var t;u+=null!==(t=n.styleMap[e])&&void 0!==t?t:""})),o+="<span ".concat(u?'style="'.concat(u,'"'):"",">").concat(a,"</span>")}else o+=a;return o}},{key:"runMode",value:function(e,t,n,r){var i=g.a.getMode(g.a.defaults,t),o=r&&r.tabSize||g.a.defaults.tabSize,a=n,s=0;a.innerHTML="";for(var l="",c=g.a.splitLines(e),d=r&&r.state||g.a.startState(i),u=0,h=c.length;u<h;++u){u&&(l+="<br />",s=0);var p=new g.a.StringStream(c[u]);for(!p.string&&i.blankLine&&i.blankLine(d);!p.eol();){var f=i.token?i.token(p,d):"";l+=this.toHtml(s,p.current(),f||"",o),p.start=p.pos}}a.innerHTML=l}},{key:"destroy",value:function(){this.container.remove()}}]),e}(),Ye=function(e){var t=e.defaultValue,n=e.container,r=e.onSelect,i=e.modeDatas;return x.a.createElement(qe,{showSearch:!0,size:"small",bordered:!1,style:{minWidth:128},defaultValue:t,getPopupContainer:n?function(){return n}:void 0,onSelect:r,filterOption:function(e,t){e=e.toLowerCase();var n=t.key||"",r=t.name||"";return r=r.toLowerCase(),n.includes(e)||r.includes(e)}},i.map((function(e){return x.a.createElement(qe.Option,{name:e.name,value:e.value,key:e.value},e.name)})))},Ge=[{value:"plain",syntax:"simplemode",name:"Plain Text"},{value:"bash",syntax:"shell",name:"Bash"},{value:"basic",syntax:"vbscript",name:"Basic"},{value:"c",syntax:"text/x-csrc",name:"C"},{value:"cpp",syntax:"text/x-c++src",alias:["c++"],name:"C++"},{value:"csharp",syntax:"text/x-csharp",alias:["c#"],name:"C#"},{value:"css",syntax:"css",name:"CSS"},{value:"dart",syntax:"dart",name:"Dart"},{value:"diff",syntax:"diff",name:"Diff"},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang"},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",alias:["golang"],name:"Go"},{value:"graphql",syntax:"simplemode",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy"},{value:"html",syntax:"htmlmixed",name:"HTML",alias:["html5"]},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java"},{value:"javascript",syntax:"text/javascript",name:"JavaScript",alias:["js"]},{value:"json",syntax:"application/json",name:"JSON"},{value:"jsx",syntax:"jsx",name:"JSX"},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin"},{value:"less",syntax:"css",name:"Less"},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown"},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx"},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C"},{value:"pascal",syntax:"pascal",name:"Pascal"},{value:"perl",syntax:"perl",name:"Perl"},{value:"php",syntax:"php",name:"PHP"},{value:"powershell",syntax:"powershell",name:"PowerShell"},{value:"protobuf",syntax:"protobuf",name:"Protobuf"},{value:"python",syntax:"python",name:"Python",alias:["py"]},{value:"r",syntax:"r",name:"R"},{value:"ruby",syntax:"ruby",name:"Ruby"},{value:"rust",syntax:"rust",name:"Rust"},{value:"scala",syntax:"text/x-scala",name:"Scala"},{value:"shell",syntax:"shell",name:"Shell"},{value:"sql",syntax:"text/x-sql",name:"SQL"},{value:"swift",syntax:"swift",name:"Swift"},{value:"typescript",syntax:"text/typescript",name:"TypeScript",alias:["ts"]},{value:"vbnet",syntax:"vb",name:"VB.net"},{value:"velocity",syntax:"velocity",name:"Velocity"},{value:"xml",syntax:"xml",name:"XML"},{value:"yaml",syntax:"yaml",name:"YAML"}];!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".data-codeblock-container {\r\n    position: relative;\r\n    padding: 0;\r\n    overflow: visible;\r\n    border: 1px solid #e8e8e8;\r\n    border-radius: 2px 2px;\r\n    text-indent: 0;\r\n}\r\n\r\n.data-codeblock-container .am-embed-toolbar-item {\r\n    float: right;\r\n    line-height: 32px;\r\n}\r\n\r\n.data-codeblock-content {\r\n     background: #f9f9f9;\r\n     overflow: auto;\r\n}\r\n\r\n.am-engine .CodeMirror,\r\n.am-engine-view .CodeMirror {\r\n     font-family: monospace;\r\n     font-size: 13px;\r\n     line-height: 21px;\r\n     color: #595959;\r\n     direction: ltr;\r\n     height: auto;\r\n     overflow: hidden;\r\n     background: transparent;\r\n}\r\n\r\n.am-engine .CodeMirror-lines,\r\n.am-engine-view .CodeMirror-lines {\r\n     padding: 8px 0;\r\n}\r\n\r\n.am-engine .CodeMirror-scrollbar-filler,\r\n.am-engine-view .CodeMirror-scrollbar-filler,\r\n.am-engine .CodeMirror-gutter-filler,\r\n.am-engine-view .CodeMirror-gutter-filler {\r\n     background-color: white;\r\n    \r\n    /* The little square between H and V scrollbars */\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutters,\r\n.am-engine-view .CodeMirror-gutters {\r\n     border: 0;\r\n     white-space: nowrap;\r\n     padding: 0 8px;\r\n     background-color: unset;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-linenumber,\r\n.am-engine-view .CodeMirror-linenumber {\r\n     padding: 0;\r\n     min-width: 20px;\r\n     text-align: right;\r\n     color: #BFBFBF;\r\n     white-space: nowrap;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-guttermarker,\r\n.am-engine-view .CodeMirror-guttermarker {\r\n     color: black;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-guttermarker-subtle,\r\n.am-engine-view .CodeMirror-guttermarker-subtle {\r\n     color: #999;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-cursor,\r\n.am-engine-view .CodeMirror-cursor {\r\n     border-left: 1px solid black;\r\n     border-right: none;\r\n     width: 0;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror div.CodeMirror-secondarycursor,\r\n.am-engine-view .CodeMirror div.CodeMirror-secondarycursor {\r\n     border-left: 1px solid silver;\r\n    \r\n}\r\n\r\n.am-engine .cm-fat-cursor .CodeMirror-cursor,\r\n.am-engine-view .cm-fat-cursor .CodeMirror-cursor {\r\n     width: auto;\r\n     border: 0 !important;\r\n     background: #7e7;\r\n    \r\n}\r\n\r\n.am-engine .cm-fat-cursor div.CodeMirror-cursors,\r\n.am-engine-view .cm-fat-cursor div.CodeMirror-cursors {\r\n     z-index: 1;\r\n    \r\n}\r\n\r\n.am-engine .cm-fat-cursor-mark,\r\n.am-engine-view .cm-fat-cursor-mark {\r\n     background-color: rgba(20, 255, 20, 0.5);\r\n     -webkit-animation: blink 1.06s steps(1) infinite;\r\n     animation: blink 1.06s steps(1) infinite;\r\n    \r\n}\r\n\r\n.am-engine .cm-animate-fat-cursor,\r\n.am-engine-view .cm-animate-fat-cursor {\r\n     width: auto;\r\n     border: 0;\r\n     -webkit-animation: blink 1.06s steps(1) infinite;\r\n     animation: blink 1.06s steps(1) infinite;\r\n     background-color: #7e7;\r\n    \r\n}\r\n\r\n@-webkit-keyframes blink {\r\n     50% {\r\n         background-color: transparent;\r\n        \r\n    }\r\n\r\n    \r\n}\r\n\r\n@keyframes blink {\r\n     50% {\r\n         background-color: transparent;\r\n        \r\n    }\r\n\r\n    \r\n}\r\n\r\n.am-engine .cm-tab,\r\n.am-engine-view .cm-tab {\r\n     display: inline-block;\r\n     text-decoration: inherit;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-rulers,\r\n.am-engine-view .CodeMirror-rulers {\r\n     position: absolute;\r\n     left: 0;\r\n     right: 0;\r\n     top: -50px;\r\n     bottom: -20px;\r\n     overflow: hidden;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-ruler,\r\n.am-engine-view .CodeMirror-ruler {\r\n     border-left: 1px solid #ccc;\r\n     top: 0;\r\n     bottom: 0;\r\n     position: absolute;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-header,\r\n.am-engine-view .cm-s-default .cm-header {\r\n     color: blue;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-quote,\r\n.am-engine-view .cm-s-default .cm-quote {\r\n     color: #090;\r\n    \r\n}\r\n\r\n.am-engine .cm-negative,\r\n.am-engine-view .cm-negative {\r\n     color: #d44;\r\n    \r\n}\r\n\r\n.am-engine .cm-positive,\r\n.am-engine-view .cm-positive {\r\n     color: #292;\r\n    \r\n}\r\n\r\n.am-engine .cm-header,\r\n.am-engine-view .cm-header,\r\n.am-engine .cm-strong,\r\n.am-engine-view .cm-strong {\r\n     font-weight: bold;\r\n    \r\n}\r\n\r\n.am-engine .cm-em,\r\n.am-engine-view .cm-em {\r\n     font-style: italic;\r\n    \r\n}\r\n\r\n.am-engine .cm-link,\r\n.am-engine-view .cm-link {\r\n     text-decoration: underline;\r\n    \r\n}\r\n\r\n.am-engine .cm-strikethrough,\r\n.am-engine-view .cm-strikethrough {\r\n     text-decoration: line-through;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-keyword,\r\n.am-engine-view .cm-s-default .cm-keyword {\r\n     color: #d73a49;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-atom,\r\n.am-engine-view .cm-s-default .cm-atom {\r\n     color: #905;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-number,\r\n.am-engine-view .cm-s-default .cm-number {\r\n     color: #005cc5;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-def,\r\n.am-engine-view .cm-s-default .cm-def {\r\n     color: #005cc5;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-variable-2,\r\n.am-engine-view .cm-s-default .cm-variable-2 {\r\n     color: #005cc5;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-variable-3,\r\n.am-engine-view .cm-s-default .cm-variable-3,\r\n.am-engine .cm-s-default .cm-type,\r\n.am-engine-view .cm-s-default .cm-type {\r\n     color: #22863a;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-comment,\r\n.am-engine-view .cm-s-default .cm-comment {\r\n     color: #6a737d;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-string,\r\n.am-engine-view .cm-s-default .cm-string {\r\n     color: #690;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-string-2,\r\n.am-engine-view .cm-s-default .cm-string-2 {\r\n     color: #690;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-meta,\r\n.am-engine-view .cm-s-default .cm-meta {\r\n     color: #1f7f9a;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-qualifier,\r\n.am-engine-view .cm-s-default .cm-qualifier {\r\n     color: #555;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-builtin,\r\n.am-engine-view .cm-s-default .cm-builtin {\r\n     color: #6f42c1;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-bracket,\r\n.am-engine-view .cm-s-default .cm-bracket {\r\n     color: #997;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-tag,\r\n.am-engine-view .cm-s-default .cm-tag {\r\n     color: #22863a;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-attribute,\r\n.am-engine-view .cm-s-default .cm-attribute {\r\n     color: #6f42c1;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-hr,\r\n.am-engine-view .cm-s-default .cm-hr {\r\n     color: #999;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-link,\r\n.am-engine-view .cm-s-default .cm-link {\r\n     color: #00c;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-error,\r\n.am-engine-view .cm-s-default .cm-error {\r\n     color: #f00;\r\n    \r\n}\r\n\r\n.am-engine .cm-invalidchar,\r\n.am-engine-view .cm-invalidchar {\r\n     color: #f00;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-operator,\r\n.am-engine-view .cm-s-default .cm-operator {\r\n     color: #d73a49;\r\n    \r\n}\r\n\r\n.am-engine .cm-s-default .cm-property,\r\n.am-engine-view .cm-s-default .cm-property {\r\n     color: #005cc5;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-composing,\r\n.am-engine-view .CodeMirror-composing {\r\n     border-bottom: 2px solid;\r\n    \r\n}\r\n\r\n.am-engine div.CodeMirror span.CodeMirror-matchingbracket,\r\n.am-engine-view div.CodeMirror span.CodeMirror-matchingbracket {\r\n     color: #0b0;\r\n    \r\n}\r\n\r\n.am-engine div.CodeMirror span.CodeMirror-nonmatchingbracket,\r\n.am-engine-view div.CodeMirror span.CodeMirror-nonmatchingbracket {\r\n     color: #a22;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-matchingtag,\r\n.am-engine-view .CodeMirror-matchingtag {\r\n     background: rgba(255, 150, 0, 0.3);\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-activeline-background,\r\n.am-engine-view .CodeMirror-activeline-background {\r\n     background: transparent;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-scroll,\r\n.am-engine-view .CodeMirror-scroll {\r\n     overflow: scroll !important;\r\n    \r\n    /* Things will break if this is overridden */\r\n    \r\n    /* 30px is the magic margin used to hide the element's real scrollbars */\r\n    \r\n    /* See overflow: hidden in .CodeMirror */\r\n     margin-bottom: -50px;\r\n     margin-right: -50px;\r\n     padding-bottom: 50px;\r\n     outline: none;\r\n    \r\n    /* Prevent dragging from highlighting the element */\r\n     position: relative;\r\n     z-index: 0;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-sizer,\r\n.am-engine-view .CodeMirror-sizer {\r\n     position: relative;\r\n     border-right: 50px solid transparent;\r\n     min-height: auto !important;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-vscrollbar,\r\n.am-engine-view .CodeMirror-vscrollbar,\r\n.am-engine .CodeMirror-hscrollbar,\r\n.am-engine-view .CodeMirror-hscrollbar,\r\n.am-engine .CodeMirror-scrollbar-filler,\r\n.am-engine-view .CodeMirror-scrollbar-filler,\r\n.am-engine .CodeMirror-gutter-filler,\r\n.am-engine-view .CodeMirror-gutter-filler {\r\n     position: absolute;\r\n     z-index: 6;\r\n     display: none;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-vscrollbar,\r\n.am-engine-view .CodeMirror-vscrollbar {\r\n     right: 0;\r\n     top: 0;\r\n     overflow-x: hidden;\r\n     overflow-y: scroll;\r\n     display: none;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-hscrollbar,\r\n.am-engine-view .CodeMirror-hscrollbar {\r\n     bottom: 0;\r\n     left: 0;\r\n     overflow-y: hidden;\r\n     overflow-x: scroll;\r\n     display: none;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-scrollbar-filler,\r\n.am-engine-view .CodeMirror-scrollbar-filler {\r\n     right: 0;\r\n     bottom: 0;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-filler,\r\n.am-engine-view .CodeMirror-gutter-filler {\r\n     left: 0;\r\n     bottom: 0;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutters,\r\n.am-engine-view .CodeMirror-gutters {\r\n     position: absolute;\r\n     left: 0;\r\n     top: 0;\r\n     min-height: 100%;\r\n     background: #f9f9f9;\r\n     z-index: 3;\r\n}\r\n\r\n.am-engine .CodeMirror-gutter,\r\n.am-engine-view .CodeMirror-gutter {\r\n     white-space: normal;\r\n     height: 100%;\r\n     display: inline-block;\r\n     vertical-align: top;\r\n     margin-bottom: -30px;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-wrapper,\r\n.am-engine-view .CodeMirror-gutter-wrapper {\r\n     position: absolute;\r\n     z-index: 4;\r\n     background: none !important;\r\n     border: none !important;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-background,\r\n.am-engine-view .CodeMirror-gutter-background {\r\n     position: absolute;\r\n     top: 0;\r\n     bottom: 0;\r\n     z-index: 4;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-elt,\r\n.am-engine-view .CodeMirror-gutter-elt {\r\n     position: absolute;\r\n     cursor: default;\r\n     z-index: 4;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\r\n.am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\r\n     background-color: transparent;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-wrapper ::selection,\r\n.am-engine-view .CodeMirror-gutter-wrapper ::selection {\r\n     background-color: transparent;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\r\n.am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\r\n     background-color: transparent;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-lines,\r\n.am-engine-view .CodeMirror-lines {\r\n     cursor: text;\r\n     min-height: 40px;\r\n    \r\n    /* prevents collapsing before first draw */\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror pre,\r\n.am-engine-view .CodeMirror pre {\r\n    \r\n    /* Reset some styles that the rest of the page might have set */\r\n     border-radius: 0;\r\n     border-width: 0;\r\n     background: transparent;\r\n     font-family: inherit;\r\n     font-size: inherit;\r\n     margin: 0;\r\n     white-space: pre;\r\n     word-wrap: normal;\r\n     line-height: inherit;\r\n     color: inherit;\r\n     z-index: 2;\r\n     position: relative;\r\n     overflow: visible;\r\n     -webkit-tap-highlight-color: transparent;\r\n     font-variant-ligatures: contextual;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-wrap pre,\r\n.am-engine-view .CodeMirror-wrap pre {\r\n     word-wrap: break-word;\r\n     white-space: pre-wrap;\r\n     word-break: normal;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-linebackground,\r\n.am-engine-view .CodeMirror-linebackground {\r\n     position: absolute;\r\n     left: 0;\r\n     right: 0;\r\n     top: 0;\r\n     bottom: 0;\r\n     z-index: 0;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-linewidget,\r\n.am-engine-view .CodeMirror-linewidget {\r\n     position: relative;\r\n     z-index: 2;\r\n     padding: 0.1px;\r\n    \r\n    /* Force widget margins to stay inside of the container */\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-rtl pre,\r\n.am-engine-view .CodeMirror-rtl pre {\r\n     direction: rtl;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-code,\r\n.am-engine-view .CodeMirror-code {\r\n     outline: none;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-scroll,\r\n.am-engine-view .CodeMirror-scroll,\r\n.am-engine .CodeMirror-sizer,\r\n.am-engine-view .CodeMirror-sizer,\r\n.am-engine .CodeMirror-gutter,\r\n.am-engine-view .CodeMirror-gutter,\r\n.am-engine .CodeMirror-gutters,\r\n.am-engine-view .CodeMirror-gutters,\r\n.am-engine .CodeMirror-linenumber,\r\n.am-engine-view .CodeMirror-linenumber {\r\n     box-sizing: content-box;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-simplescroll-horizontal, .am-engine-view .CodeMirror-simplescroll-horizontal {\r\n     bottom: 4px;\r\n     cursor: pointer;\r\n}\r\n\r\n.am-engine .CodeMirror-measure,\r\n.am-engine-view .CodeMirror-measure {\r\n     position: absolute;\r\n     width: 100%;\r\n     height: 0;\r\n     overflow: hidden;\r\n     visibility: hidden;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-cursor,\r\n.am-engine-view .CodeMirror-cursor {\r\n     position: absolute;\r\n     pointer-events: none;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-measure pre,\r\n.am-engine-view .CodeMirror-measure pre {\r\n     position: static;\r\n    \r\n}\r\n\r\n.am-engine div.CodeMirror-cursors,\r\n.am-engine-view div.CodeMirror-cursors {\r\n     visibility: hidden;\r\n     position: relative;\r\n     z-index: 3;\r\n    \r\n}\r\n\r\n.am-engine div.CodeMirror-dragcursors,\r\n.am-engine-view div.CodeMirror-dragcursors {\r\n     visibility: visible;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-focused div.CodeMirror-cursors,\r\n.am-engine-view .CodeMirror-focused div.CodeMirror-cursors {\r\n     visibility: visible;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-selected,\r\n.am-engine-view .CodeMirror-selected {\r\n     background: #e8e8e8;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-focused .CodeMirror-selected,\r\n.am-engine-view .CodeMirror-focused .CodeMirror-selected {\r\n     background: #b3d7fd;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-crosshair,\r\n.am-engine-view .CodeMirror-crosshair {\r\n     cursor: crosshair;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-line::-moz-selection,\r\n.am-engine-view .CodeMirror-line::-moz-selection,\r\n.am-engine .CodeMirror-line>span::-moz-selection,\r\n.am-engine-view .CodeMirror-line>span::-moz-selection,\r\n.am-engine .CodeMirror-line>span>span::-moz-selection,\r\n.am-engine-view .CodeMirror-line>span>span::-moz-selection {\r\n     background: #b3d7fd;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-line::selection,\r\n.am-engine-view .CodeMirror-line::selection,\r\n.am-engine .CodeMirror-line>span::selection,\r\n.am-engine-view .CodeMirror-line>span::selection,\r\n.am-engine .CodeMirror-line>span>span::selection,\r\n.am-engine-view .CodeMirror-line>span>span::selection {\r\n     background: #b3d7fd;\r\n    \r\n}\r\n\r\n.am-engine .CodeMirror-line::-moz-selection,\r\n.am-engine-view .CodeMirror-line::-moz-selection,\r\n.am-engine .CodeMirror-line>span::-moz-selection,\r\n.am-engine-view .CodeMirror-line>span::-moz-selection,\r\n.am-engine .CodeMirror-line>span>span::-moz-selection,\r\n.am-engine-view .CodeMirror-line>span>span::-moz-selection {\r\n     background: #b3d7fd;\r\n    \r\n}\r\n\r\n.am-engine .cm-searching,\r\n.am-engine-view .cm-searching {\r\n     background-color: #ffa;\r\n     background-color: rgba(255, 255, 0, 0.4);\r\n    \r\n}\r\n\r\n.am-engine .cm-force-border,\r\n.am-engine-view .cm-force-border {\r\n     padding-right: 0.1px;\r\n    \r\n}\r\n\r\n@media print {\r\n\r\n    /* .am-engine,\r\n     .am-engine-view { */\r\n        \r\n        /* Hide the cursor when printing */\r\n        \r\n    /* } */\r\n\r\n     .am-engine .CodeMirror div.CodeMirror-cursors,\r\n     .am-engine-view .CodeMirror div.CodeMirror-cursors {\r\n         visibility: hidden;\r\n        \r\n    }\r\n\r\n    \r\n}\r\n\r\n.am-engine .cm-tab-wrap-hack:after,\r\n.am-engine-view .cm-tab-wrap-hack:after {\r\n     content: '';\r\n    \r\n}\r\n\r\n.am-engine span.CodeMirror-selectedtext,\r\n.am-engine-view span.CodeMirror-selectedtext {\r\n     background: none;\r\n    \r\n}\r\n\r\n.am-engine-view .data-codeblock-container {\r\n     margin: 5px 0;\r\n    \r\n}\r\n\r\n.am-content-editor .am-engine .data-codeblock-container .CodeMirror-lines {\r\n    min-height: 40px;\r\n}");var Ze=Object(p.a)("modeNameMap"),Xe=Object(p.a)("modeSynatxMap"),Qe=Object(p.a)("viewAutoWrap"),Ke=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).mirror=void 0,e.resize=function(){var t;return null===(t=e.codeEditor)||void 0===t?void 0:t.container.find(".data-codeblock-content")},e.codeEditor=void 0,Object.defineProperty(Object(c.a)(e),Ze,{writable:!0,value:{}}),Object.defineProperty(Object(c.a)(e),Xe,{writable:!0,value:{}}),Object.defineProperty(Object(c.a)(e),Qe,{writable:!0,value:void 0}),e}return Object(o.a)(n,[{key:"init",value:function(){var e=this;if(!l.eb&&(Object(d.a)(Object(u.a)(n.prototype),"init",this).call(this),!this.codeEditor)){Ge.forEach((function(t){Object(h.a)(e,Ze)[Ze][t.value]=t.name,Object(h.a)(e,Xe)[Xe][t.value]=t.syntax,t.alias&&t.alias.forEach((function(n){Object(h.a)(e,Ze)[Ze][n]=t.name,Object(h.a)(e,Xe)[Xe][n]=t.syntax}))}));var t=this.editor;this.codeEditor=new Ve(t,{synatxMap:Object(h.a)(this,Xe)[Xe],onSave:function(t,n){var r=e.getValue();t===(null===r||void 0===r?void 0:r.mode)&&n===r.code||e.setValue({mode:t,code:n})},onMouseDown:function(n){e.activated||t.card.activate(e.root,l.h.MOUSE_DOWN)},onUpFocus:function(n){var r;if(Object(l.X)(t)){n.preventDefault();var i=t.change,o=t.card,a=i.range.get().cloneRange(),s=e.root.prev(),c=s?o.find(s):void 0;if(null===c||void 0===c?void 0:c.onSelectUp)c.onSelectUp(n);else{if(!s)return e.focus(a,!0),void i.range.select(a);o.focusPrevBlock(e,a,!1),i.range.select(a)}e.activate(!1),null===(r=e.toolbarModel)||void 0===r||r.hide()}},onDownFocus:function(n){var r;if(Object(l.X)(t)){n.preventDefault();var i=t.change,o=t.card,a=i.range.get().cloneRange(),s=e.root.next(),c=s?o.find(s):void 0;if(null===c||void 0===c?void 0:c.onSelectDown)c.onSelectDown(n);else{if(!s)return e.focus(a,!1),void i.range.select(a);o.focusNextBlock(e,a,!1),i.range.select(a)}e.activate(!1),null===(r=e.toolbarModel)||void 0===r||r.hide()}},onLeftFocus:function(n){var r;if(Object(l.X)(t)){n.preventDefault();var i=t.change,o=i.range.get().cloneRange();e.focus(o,!0),i.range.select(o),e.activate(!1),null===(r=e.toolbarModel)||void 0===r||r.hide()}},onRightFocus:function(n){var r;if(Object(l.X)(t)){n.preventDefault();var i=t.change,o=i.range.get().cloneRange();e.focus(o,!1),i.range.select(o),e.activate(!1),null===(r=e.toolbarModel)||void 0===r||r.hide()}}})}}},{key:"toolbar",value:function(){var e,t=this,r=this.editor,i=function(){return t.loading?[]:!Object(l.X)(r)||r.readonly?[{key:"copy",type:"copy"},{key:"autoWrap",type:"switch",content:r.language.get(n.cardName,"autoWrap"),getState:function(){var e;void 0===Object(h.a)(t,Qe)[Qe]&&(Object(h.a)(t,Qe)[Qe]=!!(null===(e=t.getValue())||void 0===e?void 0:e.autoWrap));return Object(h.a)(t,Qe)[Qe]},onClick:function(){var e,n=!Object(h.a)(t,Qe)[Qe];Object(h.a)(t,Qe)[Qe]=n,null===(e=t.codeEditor)||void 0===e||e.setAutoWrap(n)}}]:[{key:"dnd",type:"dnd"},{key:"copy",type:"copy"},{key:"delete",type:"delete"},{key:"select",type:"node",node:Object(l.a)("<div />"),didMount:function(e){setTimeout((function(){var n,r,i,o;n=e.get(),r=t.constructor.getModes(),i=Object(h.a)(t,Ze)[Ze][t.codeEditor.mode]||t.codeEditor.mode||"plain",o=function(e){var n;null===(n=t.codeEditor)||void 0===n||n.update(e),setTimeout((function(){var e;null===(e=t.codeEditor)||void 0===e||e.focus()}),10)},w.a.render(x.a.createElement(Ye,{container:n,defaultValue:i,onSelect:o,modeDatas:r}),n)}),100)}},{key:"autoWrap",type:"switch",content:r.language.get(n.cardName,"autoWrap"),getState:function(){var e;return!!(null===(e=t.getValue())||void 0===e?void 0:e.autoWrap)},onClick:function(){var e,n=t.getValue(),r=!(null===n||void 0===n?void 0:n.autoWrap);t.setValue({autoWrap:r}),null===(e=t.codeEditor)||void 0===e||e.setAutoWrap(r)}}]},o=null===(e=r.plugin.findPlugin("codeblock"))||void 0===e?void 0:e.options;return(null===o||void 0===o?void 0:o.cardToolbars)?o.cardToolbars(i()):i()}},{key:"focusEditor",value:function(){var e;null===(e=this.codeEditor)||void 0===e||e.focus(),this.editor.card.activate(this.root)}},{key:"onSelectLeft",value:function(e){var t;this.codeEditor&&(e.preventDefault(),this.codeEditor.select(!1),this.activate(!0),null===(t=this.toolbarModel)||void 0===t||t.show())}},{key:"onSelectRight",value:function(e){var t;this.codeEditor&&(e.preventDefault(),this.codeEditor.select(!0),this.activate(!0),null===(t=this.toolbarModel)||void 0===t||t.show())}},{key:"onSelectDown",value:function(e){var t;this.codeEditor&&(e.preventDefault(),this.codeEditor.select(!0),this.activate(!0),null===(t=this.toolbarModel)||void 0===t||t.show())}},{key:"onSelectUp",value:function(e){var t;this.codeEditor&&(e.preventDefault(),this.codeEditor.select(!1),this.activate(!0),null===(t=this.toolbarModel)||void 0===t||t.show())}},{key:"render",value:function(){if(this.codeEditor){this.codeEditor.container.inEditor()||(this.codeEditor.container=Object(l.a)(this.codeEditor.renderTemplate()),this.mirror=void 0,this.getCenter().empty().append(this.codeEditor.container));var e=this.getValue(),t=(null===e||void 0===e?void 0:e.mode)||"plain",n=(null===e||void 0===e?void 0:e.code)||"";if(Object(l.X)(this.editor)){var r;if(this.mirror)return this.codeEditor.update(t,n),void this.codeEditor.setAutoWrap(!!(null===e||void 0===e?void 0:e.autoWrap));this.mirror=null===(r=this.codeEditor)||void 0===r?void 0:r.create(t,n,{lineWrapping:!!(null===e||void 0===e?void 0:e.autoWrap)})}else{var i;null===(i=this.codeEditor)||void 0===i||i.create(t,n,{lineWrapping:!!(null===e||void 0===e?void 0:e.autoWrap)})}}}}],[{key:"cardName",get:function(){return"codeblock"}},{key:"cardType",get:function(){return l.i.BLOCK}},{key:"autoSelected",get:function(){return!1}},{key:"singleSelectable",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}},{key:"getModes",value:function(){return Ge}}]),n}(l.g),$e={"en-US":{codeblock:{autoWrap:"Auto Wrap"}},"zh-CN":{codeblock:{autoWrap:"\u81ea\u52a8\u6362\u884c"}}},Je="data-syntax",et="parse:html",tt="paste:schema",nt="paste:each",rt="markdown-it",it=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).markdownIt=function(t){!1!==e.options.markdown&&(t.enable("code"),t.enable("fence"))},e.pasteSchema=function(e){var t;e.add([{type:"block",name:"pre",attributes:(t={},Object(r.a)(t,Je,"*"),Object(r.a)(t,"class","*"),Object(r.a)(t,"language","*"),t)},{type:"block",name:"code",attributes:Object(r.a)({},Je,{required:!0,value:"*"})},{type:"block",name:"code",attributes:{language:{required:!0,value:"*"}}},{type:"block",name:"code",attributes:{class:{required:!0,value:function(e){return e.includes("language")}}},allowIn:["pre","$root"]},{type:"block",name:"div",attributes:Object(r.a)({},Je,{required:!0,value:"*"})}])},e.pasteHtml=function(t){var n,r=e.editor;if(Object(l.X)(r)&&!t.isText()){if((null===(n=t.get())||void 0===n?void 0:n.hasAttribute(Je))||"pre"===t.name){var i=t.attributes(Je);if(!i){var o=function(e){var t,n=null===e||void 0===e||null===(t=e.get())||void 0===t?void 0:t.classList;if(n)for(var r=0;r<n.length;r++){var i=n.item(r);if(i&&i.startsWith("language-")){var o=i.split("-");return o.shift(),o.join("-")}}};"pre"===t.name&&((i=t.attributes("language"))||(i=o(t)));var a=t.find("code");!i&&a.length>0&&((i=a.attributes(Je)||a.attributes("language"))||(i=o(a)))}var s=new l.u(t,r).toText(void 0,void 0,!1);return(s=Object(l.lb)(s.replace(/\u200b/g,""))).endsWith("\n")&&(s=s.slice(0,-1)),r.card.replaceNode(t,"codeblock",{mode:i||"plain",code:s}),t.remove(),!1}return!0}},e.parseHtml=function(t,n){var r=[],i={};Ke.getModes().forEach((function(e){i[e.value]=e.syntax}));var o=e.editor,a=new Ve(o,{synatxMap:i,styleMap:e.options.styleMap}),s="data-codeblock-content",c=a.container.find(".".concat(s));return c.css({border:"1px solid #e8e8e8",padding:"8px"}),c.addClass(l.H),c.css("background","#f9f9f9"),t.find("[".concat(l.c,'="').concat(Ke.cardName,'"],[').concat(l.x,'="').concat(Ke.cardName,'"]')).each((function(e){var t=Object(l.a)(e),i=o.card.find(t),d=(null===i||void 0===i?void 0:i.getValue())||Object(l.L)(t.attributes(l.f));if(d){t.empty(),c.empty(),a.render(d.mode||"plain",d.code||"");var u=c.clone(!0);t.append(u),t.removeAttributes(l.c),t.removeAttributes(l.e),t.removeAttributes(l.f),t.attributes(Je,d.mode||"plain"),u.removeClass(l.H).removeClass(s);var h=t;n&&(h=n(t,d),t.replaceWith(h)),r.push(h)}else t.remove()})),a.destroy(),r},e}return Object(o.a)(n,[{key:"init",value:function(){var e=this.editor;e.language.add($e),e.on(et,this.parseHtml),e.on(tt,this.pasteSchema),e.on(nt,this.pasteHtml),Object(l.X)(e)&&e.on(rt,this.markdownIt)}},{key:"execute",value:function(e,t){var n=this.editor;if(Object(l.X)(n)){var r=n.card;if(!t){var i=n.getSelectionData();i&&(t=i.text)}var o=r.insert(Ke.cardName,{mode:e,code:t});setTimeout((function(){o.focusEditor()}),200)}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"destroy",value:function(){var e=this.editor;e.off(et,this.parseHtml),e.off(tt,this.pasteSchema),e.off(nt,this.pasteHtml),Object(l.X)(e)&&e.off(rt,this.markdownIt)}}],[{key:"pluginName",get:function(){return"codeblock"}}]),n}(l.v);t.b=it},2606:function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(3),a=n(14),s=n.n(a),l=n(984),c=n(38),d=n(0),u=n(2836),h=n(2503),p=(Object(h.a)("success","processing","error","default","warning"),Object(h.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")),f=n(2504),v=n(369),g={adjustX:1,adjustY:1},m={adjustX:0,adjustY:0},b=[0,0];function y(e){return"boolean"===typeof e?e?g:m:Object(o.a)(Object(o.a)({},m),e)}var w=d.isValidElement;function k(e,t){return function(e,t,n){return w(e)?d.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}var x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},O=new RegExp("^(".concat(p.join("|"),")(-inverse)?$"));function C(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||"button"===e.type)&&e.props.disabled||!0===n.__ANT_SWITCH&&(e.props.disabled||e.props.loading)||!0===n.__ANT_RADIO&&e.props.disabled){var r=function(e,t){var n={},r=Object(o.a)({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),i=r.picked,a=r.omitted,l=Object(o.a)(Object(o.a)({display:"inline-block"},i),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),c=k(e,{style:Object(o.a)(Object(o.a)({},a),{pointerEvents:"none"}),className:null});return d.createElement("span",{style:l,className:s()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},c)}return e}var E=d.forwardRef((function(e,t){var n,a=d.useContext(u.b),h=a.getPopupContainer,p=a.getPrefixCls,g=a.direction;var m=Object(c.a)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),E=Object(i.a)(m,2),j=E[0],M=E[1],N=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},S=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,r=void 0!==n&&n,i=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?4:t,r=e.horizontalArrowShift,i=void 0===r?16:r,a=e.verticalArrowShift,s=void 0===a?8:a,l=e.autoAdjustOverflow,c=e.arrowPointAtCenter,d={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(i+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(s+n)]},topRight:{points:["br","tc"],offset:[i+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(s+n)]},bottomRight:{points:["tr","bc"],offset:[i+n,4]},rightBottom:{points:["bl","cr"],offset:[4,s+n]},bottomLeft:{points:["tl","bc"],offset:[-(i+n),4]},leftBottom:{points:["br","cl"],offset:[-4,s+n]}};return Object.keys(d).forEach((function(e){d[e]=c?Object(o.a)(Object(o.a)({},d[e]),{overflow:y(l),targetOffset:b}):Object(o.a)(Object(o.a)({},v.a[e]),{overflow:y(l)}),d[e].ignoreShake=!0})),d}({arrowPointAtCenter:r,autoAdjustOverflow:void 0===i||i})},T=e.getPopupContainer,_=e.placement,A=void 0===_?"top":_,I=e.mouseEnterDelay,D=void 0===I?.1:I,z=e.mouseLeaveDelay,L=void 0===z?.1:z,R=x(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay"]),B=e.prefixCls,P=e.openClassName,F=e.getTooltipContainer,H=e.overlayClassName,q=e.color,U=e.overlayInnerStyle,W=e.children,V=p("tooltip",B),Y=p(),G=j;"open"in e||"visible"in e||!N()||(G=!1);var Z=C(w(W)&&!function(e){return e&&w(e)&&e.type===d.Fragment}(W)?W:d.createElement("span",null,W),V),X=Z.props,Q=X.className&&"string"!==typeof X.className?X.className:s()(X.className,Object(r.a)({},P||"".concat(V,"-open"),!0)),K=s()(H,(n={},Object(r.a)(n,"".concat(V,"-rtl"),"rtl"===g),Object(r.a)(n,"".concat(V,"-").concat(q),q&&O.test(q)),n)),$=U,J={};return q&&!O.test(q)&&($=Object(o.a)(Object(o.a)({},U),{background:q}),J={"--antd-arrow-background-color":q}),d.createElement(l.a,Object(o.a)({},R,{placement:A,mouseEnterDelay:D,mouseLeaveDelay:L,prefixCls:V,overlayClassName:K,getTooltipContainer:T||F||h,ref:t,builtinPlacements:S(),overlay:function(){var t=e.title,n=e.overlay;return 0===t?t:n||t||""}(),visible:G,onVisibleChange:function(t){var n,r;M(!N()&&t),N()||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t))},onPopupAlign:function(e,t){var n=S(),r=Object.keys(n).find((function(e){var r,i;return n[e].points[0]===(null===(r=t.points)||void 0===r?void 0:r[0])&&n[e].points[1]===(null===(i=t.points)||void 0===i?void 0:i[1])}));if(r){var i=e.getBoundingClientRect(),o={top:"50%",left:"50%"};/top|Bottom/.test(r)?o.top="".concat(i.height-t.offset[1],"px"):/Top|bottom/.test(r)&&(o.top="".concat(-t.offset[1],"px")),/left|Right/.test(r)?o.left="".concat(i.width-t.offset[0],"px"):/right|Left/.test(r)&&(o.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(o.left," ").concat(o.top)}},overlayInnerStyle:$,arrowContent:d.createElement("span",{className:"".concat(V,"-arrow-content"),style:J}),motion:{motionName:Object(f.b)(Y,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),G?k(Z,{className:Q}):Z)}));t.a=E},2615:function(e,t,n){var r=n(537).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new I(r||[]);return s(o,"_invoke",{value:S(e,n,a)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var v="suspendedStart",g="suspendedYield",m="executing",b="completed",y={};function w(){}function k(){}function x(){}var O={};h(O,c,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(D([])));E&&E!==o&&a.call(E,c)&&(O=E);var j=x.prototype=w.prototype=Object.create(O);function M(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(i,o,s,l){var c=f(e[i],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==r(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var i;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var i=v;return function(o,a){if(i===m)throw new Error("Generator is already running");if(i===b){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=T(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=f(e,n,r);if("normal"===c.type){if(i=r.done?b:g,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=b,r.method="throw",r.arg=c.arg)}}}function T(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(a.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return k.prototype=x,s(j,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:k,configurable:!0}),k.displayName=h(x,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},n.awrap=function(e){return{__await:e}},M(N.prototype),h(N.prototype,d,(function(){return this})),n.AsyncIterator=N,n.async=function(e,t,r,i,o){void 0===o&&(o=Promise);var a=new N(p(e,t,r,i),o);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(j),h(j,u,"Generator"),h(j,c,(function(){return this})),h(j,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},2616:function(e,t,n){"use strict";e.exports=n(2617)},2617:function(e,t,n){"use strict";var r=n(2472),i=n(2625),o=n(2629),a=n(2630),s=n(2639),l=n(2653),c=n(2667),d=n(2514),u=n(1223),h={default:n(2669),zero:n(2670),commonmark:n(2671)},p=/^(vbscript|javascript|file|data):/,f=/^data:image\/(gif|png|jpeg|webp);/;function v(e){var t=e.trim().toLowerCase();return!p.test(t)||!!f.test(t)}var g=["http:","https:","mailto:"];function m(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=u.toASCII(t.hostname)}catch(n){}return d.encode(d.format(t))}function b(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=u.toUnicode(t.hostname)}catch(n){}return d.decode(d.format(t),d.decode.defaultChars+"%")}function y(e,t){if(!(this instanceof y))return new y(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new s,this.core=new a,this.renderer=new o,this.linkify=new c,this.validateLink=v,this.normalizeLink=m,this.normalizeLinkText=b,this.utils=r,this.helpers=r.assign({},i),this.options={},this.configure(e),t&&this.set(t)}y.prototype.set=function(e){return r.assign(this.options,e),this},y.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=h[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},y.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},y.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},y.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},y.prototype.parse=function(e,t){if("string"!==typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},y.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},y.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},y.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=y},2618:function(e){e.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\ud835\udd04","afr":"\ud835\udd1e","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\ud835\udd38","aopf":"\ud835\udd52","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\ud835\udc9c","ascr":"\ud835\udcb6","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\ud835\udd05","bfr":"\ud835\udd1f","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\ud835\udd39","bopf":"\ud835\udd53","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\ud835\udcb7","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\ud835\udd20","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\ud835\udd54","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\ud835\udc9e","cscr":"\ud835\udcb8","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\ud835\udd07","dfr":"\ud835\udd21","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\ud835\udd3b","dopf":"\ud835\udd55","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\ud835\udc9f","dscr":"\ud835\udcb9","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\ud835\udd08","efr":"\ud835\udd22","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\ud835\udd3c","eopf":"\ud835\udd56","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\ud835\udd09","ffr":"\ud835\udd23","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\ud835\udd3d","fopf":"\ud835\udd57","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\ud835\udcbb","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\ud835\udd0a","gfr":"\ud835\udd24","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\ud835\udd3e","gopf":"\ud835\udd58","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\ud835\udca2","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\ud835\udd25","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\ud835\udd59","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\ud835\udcbd","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\ud835\udd26","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\ud835\udd40","iopf":"\ud835\udd5a","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\ud835\udcbe","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\ud835\udd0d","jfr":"\ud835\udd27","jmath":"\u0237","Jopf":"\ud835\udd41","jopf":"\ud835\udd5b","Jscr":"\ud835\udca5","jscr":"\ud835\udcbf","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\ud835\udd0e","kfr":"\ud835\udd28","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\ud835\udd42","kopf":"\ud835\udd5c","Kscr":"\ud835\udca6","kscr":"\ud835\udcc0","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\ud835\udd0f","lfr":"\ud835\udd29","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\ud835\udd43","lopf":"\ud835\udd5d","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\ud835\udcc1","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\ud835\udd10","mfr":"\ud835\udd2a","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\ud835\udd44","mopf":"\ud835\udd5e","mp":"\u2213","mscr":"\ud835\udcc2","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\ud835\udd11","nfr":"\ud835\udd2b","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\ud835\udd5f","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\ud835\udca9","nscr":"\ud835\udcc3","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\ud835\udd12","ofr":"\ud835\udd2c","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\ud835\udd46","oopf":"\ud835\udd60","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\ud835\udcaa","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\ud835\udd13","pfr":"\ud835\udd2d","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\ud835\udd61","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\ud835\udcab","pscr":"\ud835\udcc5","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\ud835\udd14","qfr":"\ud835\udd2e","qint":"\u2a0c","qopf":"\ud835\udd62","Qopf":"\u211a","qprime":"\u2057","Qscr":"\ud835\udcac","qscr":"\ud835\udcc6","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\ud835\udd2f","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\ud835\udd63","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\ud835\udcc7","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\ud835\udd16","sfr":"\ud835\udd30","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\ud835\udd4a","sopf":"\ud835\udd64","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\ud835\udcae","sscr":"\ud835\udcc8","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\ud835\udd17","tfr":"\ud835\udd31","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\ud835\udd4b","topf":"\ud835\udd65","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\ud835\udcaf","tscr":"\ud835\udcc9","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\ud835\udd18","ufr":"\ud835\udd32","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\ud835\udd4c","uopf":"\ud835\udd66","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\ud835\udcb0","uscr":"\ud835\udcca","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\ud835\udd19","vfr":"\ud835\udd33","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\ud835\udd4d","vopf":"\ud835\udd67","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\ud835\udcb1","vscr":"\ud835\udccb","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\ud835\udd1a","wfr":"\ud835\udd34","Wopf":"\ud835\udd4e","wopf":"\ud835\udd68","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\ud835\udcb2","wscr":"\ud835\udccc","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\ud835\udd1b","xfr":"\ud835\udd35","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\ud835\udd4f","xopf":"\ud835\udd69","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\ud835\udcb3","xscr":"\ud835\udccd","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\ud835\udd1c","yfr":"\ud835\udd36","YIcy":"\u0407","yicy":"\u0457","Yopf":"\ud835\udd50","yopf":"\ud835\udd6a","Yscr":"\ud835\udcb4","yscr":"\ud835\udcce","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\ud835\udd37","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\ud835\udd6b","Zopf":"\u2124","Zscr":"\ud835\udcb5","zscr":"\ud835\udccf","zwj":"\u200d","zwnj":"\u200c"}')},2619:function(e,t,n){"use strict";var r={};function i(e,t,n){var o,a,s,l,c,d="";for("string"!==typeof t&&(n=t,t=i.defaultChars),"undefined"===typeof n&&(n=!0),c=function(e){var t,n,i=r[e];if(i)return i;for(i=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?i.push(n):i.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)i[e.charCodeAt(t)]=e[t];return i}(t),o=0,a=e.length;o<a;o++)if(s=e.charCodeAt(o),n&&37===s&&o+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))d+=e.slice(o,o+3),o+=2;else if(s<128)d+=c[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<a&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){d+=encodeURIComponent(e[o]+e[o+1]),o++;continue}d+="%EF%BF%BD"}else d+=encodeURIComponent(e[o]);return d}i.defaultChars=";/?:@&=+$,-_.!~*'()#",i.componentChars="-_.!~*'()",e.exports=i},2620:function(e,t,n){"use strict";var r={};function i(e,t){var n;return"string"!==typeof t&&(t=i.defaultChars),n=function(e){var t,n,i=r[e];if(i)return i;for(i=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),i.push(n);for(t=0;t<e.length;t++)i[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return i}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,r,i,o,a,s,l,c="";for(t=0,r=e.length;t<r;t+=3)(i=parseInt(e.slice(t+1,t+3),16))<128?c+=n[i]:192===(224&i)&&t+3<r&&128===(192&(o=parseInt(e.slice(t+4,t+6),16)))?(c+=(l=i<<6&1984|63&o)<128?"\ufffd\ufffd":String.fromCharCode(l),t+=3):224===(240&i)&&t+6<r&&(o=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),128===(192&o)&&128===(192&a))?(c+=(l=i<<12&61440|o<<6&4032|63&a)<2048||l>=55296&&l<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(l),t+=6):240===(248&i)&&t+9<r&&(o=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),s=parseInt(e.slice(t+10,t+12),16),128===(192&o)&&128===(192&a)&&128===(192&s))?((l=i<<18&1835008|o<<12&258048|a<<6&4032|63&s)<65536||l>1114111?c+="\ufffd\ufffd\ufffd\ufffd":(l-=65536,c+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):c+="\ufffd";return c}))}i.defaultChars=";/?:@&=+$,#",i.componentChars="",e.exports=i},2621:function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},2622:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var i=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(s),c=["%","/","?",";","#"].concat(l),d=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,o,s,l,v=e;if(v=v.trim(),!t&&1===e.split("#").length){var g=a.exec(v);if(g)return this.pathname=g[1],g[2]&&(this.search=g[2]),this}var m=i.exec(v);if(m&&(o=(m=m[0]).toLowerCase(),this.protocol=m,v=v.substr(m.length)),(t||m||v.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===v.substr(0,2))||m&&p[m]||(v=v.substr(2),this.slashes=!0)),!p[m]&&(l||m&&!f[m])){var b,y,w=-1;for(n=0;n<d.length;n++)-1!==(s=v.indexOf(d[n]))&&(-1===w||s<w)&&(w=s);for(-1!==(y=-1===w?v.lastIndexOf("@"):v.lastIndexOf("@",w))&&(b=v.slice(0,y),v=v.slice(y+1),this.auth=b),w=-1,n=0;n<c.length;n++)-1!==(s=v.indexOf(c[n]))&&(-1===w||s<w)&&(w=s);-1===w&&(w=v.length),":"===v[w-1]&&w--;var k=v.slice(0,w);v=v.slice(w),this.parseHost(k),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var O=this.hostname.split(/\./);for(n=0,r=O.length;n<r;n++){var C=O[n];if(C&&!C.match(u)){for(var E="",j=0,M=C.length;j<M;j++)C.charCodeAt(j)>127?E+="x":E+=C[j];if(!E.match(u)){var N=O.slice(0,n),S=O.slice(n+1),T=C.match(h);T&&(N.push(T[1]),S.unshift(T[2])),S.length&&(v=S.join(".")+v),this.hostname=N.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var _=v.indexOf("#");-1!==_&&(this.hash=v.substr(_),v=v.slice(0,_));var A=v.indexOf("?");return-1!==A&&(this.search=v.substr(A),v=v.slice(0,A)),v&&(this.pathname=v),f[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},2623:function(e,t,n){"use strict";t.Any=n(2515),t.Cc=n(2516),t.Cf=n(2624),t.P=n(2492),t.Z=n(2517)},2624:function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},2625:function(e,t,n){"use strict";t.parseLinkLabel=n(2626),t.parseLinkDestination=n(2627),t.parseLinkTitle=n(2628)},2626:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o,a,s=-1,l=e.posMax,c=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(93===(o=e.src.charCodeAt(e.pos))&&0===--r){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===o)if(a===e.pos-1)r++;else if(n)return e.pos=c,-1}return i&&(s=e.pos),e.pos=c,s}},2627:function(e,t,n){"use strict";var r=n(2472).unescapeAll;e.exports=function(e,t,n){var i,o,a=t,s={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(i=e.charCodeAt(t)))return s;if(60===i)return s;if(62===i)return s.pos=t+1,s.str=r(e.slice(a+1,t)),s.ok=!0,s;92===i&&t+1<n?t+=2:t++}return s}for(o=0;t<n&&32!==(i=e.charCodeAt(t))&&!(i<32||127===i);)if(92===i&&t+1<n){if(32===e.charCodeAt(t+1))break;t+=2}else{if(40===i&&++o>32)return s;if(41===i){if(0===o)break;o--}t++}return a===t||0!==o||(s.str=r(e.slice(a,t)),s.lines=0,s.pos=t,s.ok=!0),s}},2628:function(e,t,n){"use strict";var r=n(2472).unescapeAll;e.exports=function(e,t,n){var i,o,a=0,s=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=n)return l;if(34!==(o=e.charCodeAt(t))&&39!==o&&40!==o)return l;for(t++,40===o&&(o=41);t<n;){if((i=e.charCodeAt(t))===o)return l.pos=t+1,l.lines=a,l.str=r(e.slice(s+1,t)),l.ok=!0,l;if(40===i&&41===o)return l;10===i?a++:92===i&&t+1<n&&(t++,10===e.charCodeAt(t)&&a++),t++}return l}},2629:function(e,t,n){"use strict";var r=n(2472).assign,i=n(2472).unescapeAll,o=n(2472).escapeHtml,a={};function s(){this.rules=r({},a)}a.code_inline=function(e,t,n,r,i){var a=e[t];return"<code"+i.renderAttrs(a)+">"+o(e[t].content)+"</code>"},a.code_block=function(e,t,n,r,i){var a=e[t];return"<pre"+i.renderAttrs(a)+"><code>"+o(e[t].content)+"</code></pre>\n"},a.fence=function(e,t,n,r,a){var s,l,c,d,u,h=e[t],p=h.info?i(h.info).trim():"",f="",v="";return p&&(f=(c=p.split(/(\s+)/g))[0],v=c.slice(2).join("")),0===(s=n.highlight&&n.highlight(h.content,f,v)||o(h.content)).indexOf("<pre")?s+"\n":p?(l=h.attrIndex("class"),d=h.attrs?h.attrs.slice():[],l<0?d.push(["class",n.langPrefix+f]):(d[l]=d[l].slice(),d[l][1]+=" "+n.langPrefix+f),u={attrs:d},"<pre><code"+a.renderAttrs(u)+">"+s+"</code></pre>\n"):"<pre><code"+a.renderAttrs(h)+">"+s+"</code></pre>\n"},a.image=function(e,t,n,r,i){var o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)},a.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(e,t){return o(e[t].content)},a.html_block=function(e,t){return e[t].content},a.html_inline=function(e,t){return e[t].content},s.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+o(e.attrs[t][0])+'="'+o(e.attrs[t][1])+'"';return r},s.prototype.renderToken=function(e,t,n){var r,i="",o=!1,a=e[t];return a.hidden?"":(a.block&&-1!==a.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===a.nesting?"</":"<")+a.tag,i+=this.renderAttrs(a),0===a.nesting&&n.xhtmlOut&&(i+=" /"),a.block&&(o=!0,1===a.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden||-1===r.nesting&&r.tag===a.tag)&&(o=!1)),i+=o?">\n":">")},s.prototype.renderInline=function(e,t,n){for(var r,i="",o=this.rules,a=0,s=e.length;a<s;a++)"undefined"!==typeof o[r=e[a].type]?i+=o[r](e,a,t,n,this):i+=this.renderToken(e,a,t);return i},s.prototype.renderInlineAsText=function(e,t,n){for(var r="",i=0,o=e.length;i<o;i++)"text"===e[i].type?r+=e[i].content:"image"===e[i].type?r+=this.renderInlineAsText(e[i].children,t,n):"softbreak"===e[i].type&&(r+="\n");return r},s.prototype.render=function(e,t,n){var r,i,o,a="",s=this.rules;for(r=0,i=e.length;r<i;r++)"inline"===(o=e[r].type)?a+=this.renderInline(e[r].children,t,n):"undefined"!==typeof s[o]?a+=s[e[r].type](e,r,t,n,this):a+=this.renderToken(e,r,t,n);return a},e.exports=s},2630:function(e,t,n){"use strict";var r=n(2493),i=[["normalize",n(2631)],["block",n(2632)],["inline",n(2633)],["linkify",n(2634)],["replacements",n(2635)],["smartquotes",n(2636)],["text_join",n(2637)]];function o(){this.ruler=new r;for(var e=0;e<i.length;e++)this.ruler.push(i[e][0],i[e][1])}o.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},o.prototype.State=n(2638),e.exports=o},2631:function(e,t,n){"use strict";var r=/\r\n?|\n/g,i=/\0/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(i,"\ufffd"),e.src=t}},2632:function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},2633:function(e,t,n){"use strict";e.exports=function(e){var t,n,r,i=e.tokens;for(n=0,r=i.length;n<r;n++)"inline"===(t=i[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},2634:function(e,t,n){"use strict";var r=n(2472).arrayReplaceAt;function i(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,o,a,s,l,c,d,u,h,p,f,v,g,m,b,y,w,k=e.tokens;if(e.md.options.linkify)for(n=0,o=k.length;n<o;n++)if("inline"===k[n].type&&e.md.linkify.pretest(k[n].content))for(v=0,t=(a=k[n].children).length-1;t>=0;t--)if("link_close"!==(l=a[t]).type){if("html_inline"===l.type&&(w=l.content,/^<a[>\s]/i.test(w)&&v>0&&v--,i(l.content)&&v++),!(v>0)&&"text"===l.type&&e.md.linkify.test(l.content)){for(u=l.content,y=e.md.linkify.match(u),c=[],f=l.level,p=0,y.length>0&&0===y[0].index&&t>0&&"text_special"===a[t-1].type&&(y=y.slice(1)),d=0;d<y.length;d++)g=y[d].url,m=e.md.normalizeLink(g),e.md.validateLink(m)&&(b=y[d].text,b=y[d].schema?"mailto:"!==y[d].schema||/^mailto:/i.test(b)?e.md.normalizeLinkText(b):e.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,""),(h=y[d].index)>p&&((s=new e.Token("text","",0)).content=u.slice(p,h),s.level=f,c.push(s)),(s=new e.Token("link_open","a",1)).attrs=[["href",m]],s.level=f++,s.markup="linkify",s.info="auto",c.push(s),(s=new e.Token("text","",0)).content=b,s.level=f,c.push(s),(s=new e.Token("link_close","a",-1)).level=--f,s.markup="linkify",s.info="auto",c.push(s),p=y[d].lastIndex);p<u.length&&((s=new e.Token("text","",0)).content=u.slice(p),s.level=f,c.push(s)),k[n].children=a=r(a,t,c)}}else for(t--;a[t].level!==l.level&&"link_open"!==a[t].type;)t--}},2635:function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,i=/\((c|tm|r)\)/i,o=/\((c|tm|r)\)/gi,a={c:"\xa9",r:"\xae",tm:"\u2122"};function s(e,t){return a[t.toLowerCase()]}function l(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(o,s)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function c(e){var t,n,i=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||i||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===n.type&&"auto"===n.info&&i--,"link_close"===n.type&&"auto"===n.info&&i++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(i.test(e.tokens[t].content)&&l(e.tokens[t].children),r.test(e.tokens[t].content)&&c(e.tokens[t].children))}},2636:function(e,t,n){"use strict";var r=n(2472).isWhiteSpace,i=n(2472).isPunctChar,o=n(2472).isMdAsciiPunct,a=/['"]/,s=/['"]/g;function l(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function c(e,t){var n,a,c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C,E,j,M;for(E=[],n=0;n<e.length;n++){for(a=e[n],p=e[n].level,O=E.length-1;O>=0&&!(E[O].level<=p);O--);if(E.length=O+1,"text"===a.type){u=0,h=(c=a.content).length;e:for(;u<h&&(s.lastIndex=u,d=s.exec(c));){if(k=x=!0,u=d.index+1,C="'"===d[0],v=32,d.index-1>=0)v=c.charCodeAt(d.index-1);else for(O=n-1;O>=0&&("softbreak"!==e[O].type&&"hardbreak"!==e[O].type);O--)if(e[O].content){v=e[O].content.charCodeAt(e[O].content.length-1);break}if(g=32,u<h)g=c.charCodeAt(u);else for(O=n+1;O<e.length&&("softbreak"!==e[O].type&&"hardbreak"!==e[O].type);O++)if(e[O].content){g=e[O].content.charCodeAt(0);break}if(m=o(v)||i(String.fromCharCode(v)),b=o(g)||i(String.fromCharCode(g)),y=r(v),(w=r(g))?k=!1:b&&(y||m||(k=!1)),y?x=!1:m&&(w||b||(x=!1)),34===g&&'"'===d[0]&&v>=48&&v<=57&&(x=k=!1),k&&x&&(k=m,x=b),k||x){if(x)for(O=E.length-1;O>=0&&(f=E[O],!(E[O].level<p));O--)if(f.single===C&&E[O].level===p){f=E[O],C?(j=t.md.options.quotes[2],M=t.md.options.quotes[3]):(j=t.md.options.quotes[0],M=t.md.options.quotes[1]),a.content=l(a.content,d.index,M),e[f.token].content=l(e[f.token].content,f.pos,j),u+=M.length-1,f.token===n&&(u+=j.length-1),h=(c=a.content).length,E.length=O;continue e}k?E.push({token:n,pos:d.index,single:C,level:p}):x&&C&&(a.content=l(a.content,d.index,"\u2019"))}else C&&(a.content=l(a.content,d.index,"\u2019"))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&a.test(e.tokens[t].content)&&c(e.tokens[t].children,e)}},2637:function(e,t,n){"use strict";e.exports=function(e){var t,n,r,i,o,a,s=e.tokens;for(t=0,n=s.length;t<n;t++)if("inline"===s[t].type){for(o=(r=s[t].children).length,i=0;i<o;i++)"text_special"===r[i].type&&(r[i].type="text");for(i=a=0;i<o;i++)"text"===r[i].type&&i+1<o&&"text"===r[i+1].type?r[i+1].content=r[i].content+r[i+1].content:(i!==a&&(r[a]=r[i]),a++);i!==a&&(r.length=a)}}},2638:function(e,t,n){"use strict";var r=n(2494);function i(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}i.prototype.Token=r,e.exports=i},2639:function(e,t,n){"use strict";var r=n(2493),i=[["table",n(2640),["paragraph","reference"]],["code",n(2641)],["fence",n(2642),["paragraph","reference","blockquote","list"]],["blockquote",n(2643),["paragraph","reference","blockquote","list"]],["hr",n(2644),["paragraph","reference","blockquote","list"]],["list",n(2645),["paragraph","reference","blockquote"]],["reference",n(2646)],["html_block",n(2647),["paragraph","reference","blockquote"]],["heading",n(2649),["paragraph","reference","blockquote"]],["lheading",n(2650)],["paragraph",n(2651)]];function o(){this.ruler=new r;for(var e=0;e<i.length;e++)this.ruler.push(i[e][0],i[e][1],{alt:(i[e][2]||[]).slice()})}o.prototype.tokenize=function(e,t,n){for(var r,i=this.ruler.getRules(""),o=i.length,a=t,s=!1,l=e.md.options.maxNesting;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=l){e.line=n;break}for(r=0;r<o&&!i[r](e,a,n,!1);r++);e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(a=e.line)<n&&e.isEmpty(a)&&(s=!0,a++,e.line=a)}},o.prototype.parse=function(e,t,n,r){var i;e&&(i=new this.State(e,t,n,r),this.tokenize(i,i.line,i.lineMax))},o.prototype.State=n(2652),e.exports=o},2640:function(e,t,n){"use strict";var r=n(2472).isSpace;function i(e,t){var n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function o(e){var t,n=[],r=0,i=e.length,o=!1,a=0,s="";for(t=e.charCodeAt(r);r<i;)124===t&&(o?(s+=e.substring(a,r-1),a=r):(n.push(s+e.substring(a,r)),s="",a=r+1)),o=92===t,r++,t=e.charCodeAt(r);return n.push(s+e.substring(a)),n}e.exports=function(e,t,n,a){var s,l,c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C;if(t+2>n)return!1;if(h=t+1,e.sCount[h]<e.blkIndent)return!1;if(e.sCount[h]-e.blkIndent>=4)return!1;if((c=e.bMarks[h]+e.tShift[h])>=e.eMarks[h])return!1;if(124!==(O=e.src.charCodeAt(c++))&&45!==O&&58!==O)return!1;if(c>=e.eMarks[h])return!1;if(124!==(C=e.src.charCodeAt(c++))&&45!==C&&58!==C&&!r(C))return!1;if(45===O&&r(C))return!1;for(;c<e.eMarks[h];){if(124!==(s=e.src.charCodeAt(c))&&45!==s&&58!==s&&!r(s))return!1;c++}for(p=(l=i(e,t+1)).split("|"),g=[],d=0;d<p.length;d++){if(!(m=p[d].trim())){if(0===d||d===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;58===m.charCodeAt(m.length-1)?g.push(58===m.charCodeAt(0)?"center":"right"):58===m.charCodeAt(0)?g.push("left"):g.push("")}if(-1===(l=i(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=o(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),0===(f=p.length)||f!==g.length)return!1;if(a)return!0;for(w=e.parentType,e.parentType="table",x=e.md.block.ruler.getRules("blockquote"),(v=e.push("table_open","table",1)).map=b=[t,0],(v=e.push("thead_open","thead",1)).map=[t,t+1],(v=e.push("tr_open","tr",1)).map=[t,t+1],d=0;d<p.length;d++)v=e.push("th_open","th",1),g[d]&&(v.attrs=[["style","text-align:"+g[d]]]),(v=e.push("inline","",0)).content=p[d].trim(),v.children=[],v=e.push("th_close","th",-1);for(v=e.push("tr_close","tr",-1),v=e.push("thead_close","thead",-1),h=t+2;h<n&&!(e.sCount[h]<e.blkIndent);h++){for(k=!1,d=0,u=x.length;d<u;d++)if(x[d](e,h,n,!0)){k=!0;break}if(k)break;if(!(l=i(e,h).trim()))break;if(e.sCount[h]-e.blkIndent>=4)break;for((p=o(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),h===t+2&&((v=e.push("tbody_open","tbody",1)).map=y=[t+2,0]),(v=e.push("tr_open","tr",1)).map=[h,h+1],d=0;d<f;d++)v=e.push("td_open","td",1),g[d]&&(v.attrs=[["style","text-align:"+g[d]]]),(v=e.push("inline","",0)).content=p[d]?p[d].trim():"",v.children=[],v=e.push("td_close","td",-1);v=e.push("tr_close","tr",-1)}return y&&(v=e.push("tbody_close","tbody",-1),y[1]=h),v=e.push("table_close","table",-1),b[1]=h,e.parentType=w,e.line=h,!0}},2641:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o;if(e.sCount[t]-e.blkIndent<4)return!1;for(i=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;i=++r}return e.line=i,(o=e.push("code_block","code",0)).content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",o.map=[t,e.line],!0}},2642:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i,o,a,s,l,c,d,u=!1,h=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(h+3>p)return!1;if(126!==(i=e.src.charCodeAt(h))&&96!==i)return!1;if(l=h,(o=(h=e.skipChars(h,i))-l)<3)return!1;if(d=e.src.slice(l,h),a=e.src.slice(h,p),96===i&&a.indexOf(String.fromCharCode(i))>=0)return!1;if(r)return!0;for(s=t;!(++s>=n)&&!((h=l=e.bMarks[s]+e.tShift[s])<(p=e.eMarks[s])&&e.sCount[s]<e.blkIndent);)if(e.src.charCodeAt(h)===i&&!(e.sCount[s]-e.blkIndent>=4)&&!((h=e.skipChars(h,i))-l<o)&&!((h=e.skipSpaces(h))<p)){u=!0;break}return o=e.sCount[t],e.line=s+(u?1:0),(c=e.push("fence","code",0)).info=a,c.content=e.getLines(t+1,s,o,!0),c.markup=d,c.map=[t,e.line],!0}},2643:function(e,t,n){"use strict";var r=n(2472).isSpace;e.exports=function(e,t,n,i){var o,a,s,l,c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C,E=e.lineMax,j=e.bMarks[t]+e.tShift[t],M=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(j++))return!1;if(i)return!0;for(l=p=e.sCount[t]+1,32===e.src.charCodeAt(j)?(j++,l++,p++,o=!1,w=!0):9===e.src.charCodeAt(j)?(w=!0,(e.bsCount[t]+p)%4===3?(j++,l++,p++,o=!1):o=!0):w=!1,f=[e.bMarks[t]],e.bMarks[t]=j;j<M&&(a=e.src.charCodeAt(j),r(a));)9===a?p+=4-(p+e.bsCount[t]+(o?1:0))%4:p++,j++;for(v=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(w?1:0),d=j>=M,b=[e.sCount[t]],e.sCount[t]=p-l,y=[e.tShift[t]],e.tShift[t]=j-e.bMarks[t],x=e.md.block.ruler.getRules("blockquote"),m=e.parentType,e.parentType="blockquote",h=t+1;h<n&&(C=e.sCount[h]<e.blkIndent,!((j=e.bMarks[h]+e.tShift[h])>=(M=e.eMarks[h])));h++)if(62!==e.src.charCodeAt(j++)||C){if(d)break;for(k=!1,s=0,c=x.length;s<c;s++)if(x[s](e,h,n,!0)){k=!0;break}if(k){e.lineMax=h,0!==e.blkIndent&&(f.push(e.bMarks[h]),v.push(e.bsCount[h]),y.push(e.tShift[h]),b.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}f.push(e.bMarks[h]),v.push(e.bsCount[h]),y.push(e.tShift[h]),b.push(e.sCount[h]),e.sCount[h]=-1}else{for(l=p=e.sCount[h]+1,32===e.src.charCodeAt(j)?(j++,l++,p++,o=!1,w=!0):9===e.src.charCodeAt(j)?(w=!0,(e.bsCount[h]+p)%4===3?(j++,l++,p++,o=!1):o=!0):w=!1,f.push(e.bMarks[h]),e.bMarks[h]=j;j<M&&(a=e.src.charCodeAt(j),r(a));)9===a?p+=4-(p+e.bsCount[h]+(o?1:0))%4:p++,j++;d=j>=M,v.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(w?1:0),b.push(e.sCount[h]),e.sCount[h]=p-l,y.push(e.tShift[h]),e.tShift[h]=j-e.bMarks[h]}for(g=e.blkIndent,e.blkIndent=0,(O=e.push("blockquote_open","blockquote",1)).markup=">",O.map=u=[t,0],e.md.block.tokenize(e,t,h),(O=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=E,e.parentType=m,u[1]=e.line,s=0;s<y.length;s++)e.bMarks[s+t]=f[s],e.tShift[s+t]=y[s],e.sCount[s+t]=b[s],e.bsCount[s+t]=v[s];return e.blkIndent=g,!0}},2644:function(e,t,n){"use strict";var r=n(2472).isSpace;e.exports=function(e,t,n,i){var o,a,s,l,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(o=e.src.charCodeAt(c++))&&45!==o&&95!==o)return!1;for(a=1;c<d;){if((s=e.src.charCodeAt(c++))!==o&&!r(s))return!1;s===o&&a++}return!(a<3)&&(i||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(o))),!0)}},2645:function(e,t,n){"use strict";var r=n(2472).isSpace;function i(e,t){var n,i,o,a;return i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],42!==(n=e.src.charCodeAt(i++))&&45!==n&&43!==n||i<o&&(a=e.src.charCodeAt(i),!r(a))?-1:i}function o(e,t){var n,i=e.bMarks[t]+e.tShift[t],o=i,a=e.eMarks[t];if(o+1>=a)return-1;if((n=e.src.charCodeAt(o++))<48||n>57)return-1;for(;;){if(o>=a)return-1;if(!((n=e.src.charCodeAt(o++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(o-i>=10)return-1}return o<a&&(n=e.src.charCodeAt(o),!r(n))?-1:o}e.exports=function(e,t,n,r){var a,s,l,c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C,E,j,M,N,S,T,_,A,I,D=!1,z=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(r&&"paragraph"===e.parentType&&e.sCount[t]>=e.blkIndent&&(D=!0),(N=o(e,t))>=0){if(h=!0,T=e.bMarks[t]+e.tShift[t],b=Number(e.src.slice(T,N-1)),D&&1!==b)return!1}else{if(!((N=i(e,t))>=0))return!1;h=!1}if(D&&e.skipSpaces(N)>=e.eMarks[t])return!1;if(m=e.src.charCodeAt(N-1),r)return!0;for(g=e.tokens.length,h?(I=e.push("ordered_list_open","ol",1),1!==b&&(I.attrs=[["start",b]])):I=e.push("bullet_list_open","ul",1),I.map=v=[t,0],I.markup=String.fromCharCode(m),w=t,S=!1,A=e.md.block.ruler.getRules("list"),O=e.parentType,e.parentType="list";w<n;){for(M=N,y=e.eMarks[w],u=k=e.sCount[w]+N-(e.bMarks[t]+e.tShift[t]);M<y;){if(9===(a=e.src.charCodeAt(M)))k+=4-(k+e.bsCount[w])%4;else{if(32!==a)break;k++}M++}if((d=(s=M)>=y?1:k-u)>4&&(d=1),c=u+d,(I=e.push("list_item_open","li",1)).markup=String.fromCharCode(m),I.map=p=[t,0],h&&(I.info=e.src.slice(T,N-1)),j=e.tight,E=e.tShift[t],C=e.sCount[t],x=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[t]=s-e.bMarks[t],e.sCount[t]=k,s>=y&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!S||(z=!1),S=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=x,e.tShift[t]=E,e.sCount[t]=C,e.tight=j,(I=e.push("list_item_close","li",-1)).markup=String.fromCharCode(m),w=t=e.line,p[1]=w,s=e.bMarks[t],w>=n)break;if(e.sCount[w]<e.blkIndent)break;if(e.sCount[t]-e.blkIndent>=4)break;for(_=!1,l=0,f=A.length;l<f;l++)if(A[l](e,w,n,!0)){_=!0;break}if(_)break;if(h){if((N=o(e,w))<0)break;T=e.bMarks[w]+e.tShift[w]}else if((N=i(e,w))<0)break;if(m!==e.src.charCodeAt(N-1))break}return(I=h?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(m),v[1]=w,e.line=w,e.parentType=O,z&&function(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,g),!0}},2646:function(e,t,n){"use strict";var r=n(2472).normalizeReference,i=n(2472).isSpace;e.exports=function(e,t,n,o){var a,s,l,c,d,u,h,p,f,v,g,m,b,y,w,k,x=0,O=e.bMarks[t]+e.tShift[t],C=e.eMarks[t],E=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(O))return!1;for(;++O<C;)if(93===e.src.charCodeAt(O)&&92!==e.src.charCodeAt(O-1)){if(O+1===C)return!1;if(58!==e.src.charCodeAt(O+1))return!1;break}for(c=e.lineMax,w=e.md.block.ruler.getRules("reference"),v=e.parentType,e.parentType="reference";E<c&&!e.isEmpty(E);E++)if(!(e.sCount[E]-e.blkIndent>3)&&!(e.sCount[E]<0)){for(y=!1,u=0,h=w.length;u<h;u++)if(w[u](e,E,c,!0)){y=!0;break}if(y)break}for(C=(b=e.getLines(t,E,e.blkIndent,!1).trim()).length,O=1;O<C;O++){if(91===(a=b.charCodeAt(O)))return!1;if(93===a){f=O;break}(10===a||92===a&&++O<C&&10===b.charCodeAt(O))&&x++}if(f<0||58!==b.charCodeAt(f+1))return!1;for(O=f+2;O<C;O++)if(10===(a=b.charCodeAt(O)))x++;else if(!i(a))break;if(!(g=e.md.helpers.parseLinkDestination(b,O,C)).ok)return!1;if(d=e.md.normalizeLink(g.str),!e.md.validateLink(d))return!1;for(s=O=g.pos,l=x+=g.lines,m=O;O<C;O++)if(10===(a=b.charCodeAt(O)))x++;else if(!i(a))break;for(g=e.md.helpers.parseLinkTitle(b,O,C),O<C&&m!==O&&g.ok?(k=g.str,O=g.pos,x+=g.lines):(k="",O=s,x=l);O<C&&(a=b.charCodeAt(O),i(a));)O++;if(O<C&&10!==b.charCodeAt(O)&&k)for(k="",O=s,x=l;O<C&&(a=b.charCodeAt(O),i(a));)O++;return!(O<C&&10!==b.charCodeAt(O))&&(!!(p=r(b.slice(1,f)))&&(o||("undefined"===typeof e.env.references&&(e.env.references={}),"undefined"===typeof e.env.references[p]&&(e.env.references[p]={title:k,href:d}),e.parentType=v,e.line=t+x+1),!0))}},2647:function(e,t,n){"use strict";var r=n(2648),i=n(2518).HTML_OPEN_CLOSE_TAG_RE,o=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(i.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var i,a,s,l,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(l=e.src.slice(c,d),i=0;i<o.length&&!o[i][0].test(l);i++);if(i===o.length)return!1;if(r)return o[i][2];if(a=t+1,!o[i][1].test(l))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(c=e.bMarks[a]+e.tShift[a],d=e.eMarks[a],l=e.src.slice(c,d),o[i][1].test(l)){0!==l.length&&a++;break}return e.line=a,(s=e.push("html_block","",0)).map=[t,a],s.content=e.getLines(t,a,e.blkIndent,!0),!0}},2648:function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},2649:function(e,t,n){"use strict";var r=n(2472).isSpace;e.exports=function(e,t,n,i){var o,a,s,l,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(o=e.src.charCodeAt(c))||c>=d)return!1;for(a=1,o=e.src.charCodeAt(++c);35===o&&c<d&&a<=6;)a++,o=e.src.charCodeAt(++c);return!(a>6||c<d&&!r(o))&&(i||(d=e.skipSpacesBack(d,c),(s=e.skipCharsBack(d,35,c))>c&&r(e.src.charCodeAt(s-1))&&(d=s),e.line=t+1,(l=e.push("heading_open","h"+String(a),1)).markup="########".slice(0,a),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(c,d).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(a),-1)).markup="########".slice(0,a)),!0)}},2650:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o,a,s,l,c,d,u,h,p=t+1,f=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(c=e.eMarks[p])&&(45===(u=e.src.charCodeAt(l))||61===u)&&(l=e.skipChars(l,u),(l=e.skipSpaces(l))>=c)){d=61===u?1:2;break}if(!(e.sCount[p]<0)){for(i=!1,o=0,a=f.length;o<a;o++)if(f[o](e,p,n,!0)){i=!0;break}if(i)break}}return!!d&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(s=e.push("heading_open","h"+String(d),1)).markup=String.fromCharCode(u),s.map=[t,e.line],(s=e.push("inline","",0)).content=r,s.map=[t,e.line-1],s.children=[],(s=e.push("heading_close","h"+String(d),-1)).markup=String.fromCharCode(u),e.parentType=h,!0)}},2651:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,l=t+1,c=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(s=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(r=!1,i=0,o=c.length;i<o;i++)if(c[i](e,l,d,!0)){r=!0;break}if(r)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,(a=e.push("paragraph_open","p",1)).map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=s,!0}},2652:function(e,t,n){"use strict";var r=n(2494),i=n(2472).isSpace;function o(e,t,n,r){var o,a,s,l,c,d,u,h;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",h=!1,s=l=d=u=0,c=(a=this.src).length;l<c;l++){if(o=a.charCodeAt(l),!h){if(i(o)){d++,9===o?u+=4-u%4:u++;continue}h=!0}10!==o&&l!==c-1||(10!==o&&l++,this.bMarks.push(s),this.eMarks.push(l),this.tShift.push(d),this.sCount.push(u),this.bsCount.push(0),h=!1,d=0,u=0,s=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}o.prototype.push=function(e,t,n){var i=new r(e,t,n);return i.block=!0,n<0&&this.level--,i.level=this.level,n>0&&this.level++,this.tokens.push(i),i},o.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},o.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},o.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),i(t));e++);return e},o.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!i(this.src.charCodeAt(--e)))return e+1;return e},o.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},o.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},o.prototype.getLines=function(e,t,n,r){var o,a,s,l,c,d,u,h=e;if(e>=t)return"";for(d=new Array(t-e),o=0;h<t;h++,o++){for(a=0,u=l=this.bMarks[h],c=h+1<t||r?this.eMarks[h]+1:this.eMarks[h];l<c&&a<n;){if(s=this.src.charCodeAt(l),i(s))9===s?a+=4-(a+this.bsCount[h])%4:a++;else{if(!(l-u<this.tShift[h]))break;a++}l++}d[o]=a>n?new Array(a-n+1).join(" ")+this.src.slice(l,c):this.src.slice(l,c)}return d.join("")},o.prototype.Token=r,e.exports=o},2653:function(e,t,n){"use strict";var r=n(2493),i=[["text",n(2654)],["linkify",n(2655)],["newline",n(2656)],["escape",n(2657)],["backticks",n(2658)],["strikethrough",n(2519).tokenize],["emphasis",n(2520).tokenize],["link",n(2659)],["image",n(2660)],["autolink",n(2661)],["html_inline",n(2662)],["entity",n(2663)]],o=[["balance_pairs",n(2664)],["strikethrough",n(2519).postProcess],["emphasis",n(2520).postProcess],["fragments_join",n(2665)]];function a(){var e;for(this.ruler=new r,e=0;e<i.length;e++)this.ruler.push(i[e][0],i[e][1]);for(this.ruler2=new r,e=0;e<o.length;e++)this.ruler2.push(o[e][0],o[e][1])}a.prototype.skipToken=function(e){var t,n,r=e.pos,i=this.ruler.getRules(""),o=i.length,a=e.md.options.maxNesting,s=e.cache;if("undefined"===typeof s[r]){if(e.level<a)for(n=0;n<o&&(e.level++,t=i[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,s[r]=e.pos}else e.pos=s[r]},a.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),i=r.length,o=e.posMax,a=e.md.options.maxNesting;e.pos<o;){if(e.level<a)for(n=0;n<i&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=o)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},a.prototype.parse=function(e,t,n,r){var i,o,a,s=new this.State(e,t,n,r);for(this.tokenize(s),a=(o=this.ruler2.getRules("")).length,i=0;i<a;i++)o[i](s)},a.prototype.State=n(2666),e.exports=a},2654:function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},2655:function(e,t,n){"use strict";var r=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;e.exports=function(e,t){var n,i,o,a,s,l,c;return!!e.md.options.linkify&&(!(e.linkLevel>0)&&(!((n=e.pos)+3>e.posMax)&&(58===e.src.charCodeAt(n)&&(47===e.src.charCodeAt(n+1)&&(47===e.src.charCodeAt(n+2)&&(!!(i=e.pending.match(r))&&(o=i[1],!!(a=e.md.linkify.matchAtStart(e.src.slice(n-o.length)))&&(s=(s=a.url).replace(/\*+$/,""),l=e.md.normalizeLink(s),!!e.md.validateLink(l)&&(t||(e.pending=e.pending.slice(0,-o.length),(c=e.push("link_open","a",1)).attrs=[["href",l]],c.markup="linkify",c.info="auto",(c=e.push("text","",0)).content=e.md.normalizeLinkText(s),(c=e.push("link_close","a",-1)).markup="linkify",c.info="auto"),e.pos+=s.length-o.length,!0)))))))))}},2656:function(e,t,n){"use strict";var r=n(2472).isSpace;e.exports=function(e,t){var n,i,o,a=e.pos;if(10!==e.src.charCodeAt(a))return!1;if(n=e.pending.length-1,i=e.posMax,!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){for(o=n-1;o>=1&&32===e.pending.charCodeAt(o-1);)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(a++;a<i&&r(e.src.charCodeAt(a));)a++;return e.pos=a,!0}},2657:function(e,t,n){"use strict";for(var r=n(2472).isSpace,i=[],o=0;o<256;o++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){i[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,o,a,s,l,c=e.pos,d=e.posMax;if(92!==e.src.charCodeAt(c))return!1;if(++c>=d)return!1;if(10===(n=e.src.charCodeAt(c))){for(t||e.push("hardbreak","br",0),c++;c<d&&(n=e.src.charCodeAt(c),r(n));)c++;return e.pos=c,!0}return s=e.src[c],n>=55296&&n<=56319&&c+1<d&&(o=e.src.charCodeAt(c+1))>=56320&&o<=57343&&(s+=e.src[c+1],c++),a="\\"+s,t||(l=e.push("text_special","",0),n<256&&0!==i[n]?l.content=s:l.content=a,l.markup=a,l.info="escape"),e.pos=c+1,!0}},2658:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,l,c,d=e.pos;if(96!==e.src.charCodeAt(d))return!1;for(n=d,d++,r=e.posMax;d<r&&96===e.src.charCodeAt(d);)d++;if(l=(i=e.src.slice(n,d)).length,e.backticksScanned&&(e.backticks[l]||0)<=n)return t||(e.pending+=i),e.pos+=l,!0;for(a=s=d;-1!==(a=e.src.indexOf("`",s));){for(s=a+1;s<r&&96===e.src.charCodeAt(s);)s++;if((c=s-a)===l)return t||((o=e.push("code_inline","code",0)).markup=i,o.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=s,!0;e.backticks[c]=a}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=l,!0}},2659:function(e,t,n){"use strict";var r=n(2472).normalizeReference,i=n(2472).isSpace;e.exports=function(e,t){var n,o,a,s,l,c,d,u,h="",p="",f=e.pos,v=e.posMax,g=e.pos,m=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(l=e.pos+1,(s=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((c=s+1)<v&&40===e.src.charCodeAt(c)){for(m=!1,c++;c<v&&(o=e.src.charCodeAt(c),i(o)||10===o);c++);if(c>=v)return!1;if(g=c,(d=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok){for(h=e.md.normalizeLink(d.str),e.md.validateLink(h)?c=d.pos:h="",g=c;c<v&&(o=e.src.charCodeAt(c),i(o)||10===o);c++);if(d=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<v&&g!==c&&d.ok)for(p=d.str,c=d.pos;c<v&&(o=e.src.charCodeAt(c),i(o)||10===o);c++);}(c>=v||41!==e.src.charCodeAt(c))&&(m=!0),c++}if(m){if("undefined"===typeof e.env.references)return!1;if(c<v&&91===e.src.charCodeAt(c)?(g=c+1,(c=e.md.helpers.parseLinkLabel(e,c))>=0?a=e.src.slice(g,c++):c=s+1):c=s+1,a||(a=e.src.slice(l,s)),!(u=e.env.references[r(a)]))return e.pos=f,!1;h=u.href,p=u.title}return t||(e.pos=l,e.posMax=s,e.push("link_open","a",1).attrs=n=[["href",h]],p&&n.push(["title",p]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)),e.pos=c,e.posMax=v,!0}},2660:function(e,t,n){"use strict";var r=n(2472).normalizeReference,i=n(2472).isSpace;e.exports=function(e,t){var n,o,a,s,l,c,d,u,h,p,f,v,g,m="",b=e.pos,y=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(c=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((d=l+1)<y&&40===e.src.charCodeAt(d)){for(d++;d<y&&(o=e.src.charCodeAt(d),i(o)||10===o);d++);if(d>=y)return!1;for(g=d,(h=e.md.helpers.parseLinkDestination(e.src,d,e.posMax)).ok&&(m=e.md.normalizeLink(h.str),e.md.validateLink(m)?d=h.pos:m=""),g=d;d<y&&(o=e.src.charCodeAt(d),i(o)||10===o);d++);if(h=e.md.helpers.parseLinkTitle(e.src,d,e.posMax),d<y&&g!==d&&h.ok)for(p=h.str,d=h.pos;d<y&&(o=e.src.charCodeAt(d),i(o)||10===o);d++);else p="";if(d>=y||41!==e.src.charCodeAt(d))return e.pos=b,!1;d++}else{if("undefined"===typeof e.env.references)return!1;if(d<y&&91===e.src.charCodeAt(d)?(g=d+1,(d=e.md.helpers.parseLinkLabel(e,d))>=0?s=e.src.slice(g,d++):d=l+1):d=l+1,s||(s=e.src.slice(c,l)),!(u=e.env.references[r(s)]))return e.pos=b,!1;m=u.href,p=u.title}return t||(a=e.src.slice(c,l),e.md.inline.parse(a,e.md,e.env,v=[]),(f=e.push("image","img",0)).attrs=n=[["src",m],["alt",""]],f.children=v,f.content=a,p&&n.push(["title",p])),e.pos=d,e.posMax=y,!0}},2661:function(e,t,n){"use strict";var r=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,i=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;e.exports=function(e,t){var n,o,a,s,l,c,d=e.pos;if(60!==e.src.charCodeAt(d))return!1;for(l=e.pos,c=e.posMax;;){if(++d>=c)return!1;if(60===(s=e.src.charCodeAt(d)))return!1;if(62===s)break}return n=e.src.slice(l+1,d),i.test(n)?(o=e.md.normalizeLink(n),!!e.md.validateLink(o)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",o]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(n),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=n.length+2,!0)):!!r.test(n)&&(o=e.md.normalizeLink("mailto:"+n),!!e.md.validateLink(o)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",o]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(n),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=n.length+2,!0))}},2662:function(e,t,n){"use strict";var r=n(2518).HTML_TAG_RE;e.exports=function(e,t){var n,i,o,a,s,l=e.pos;return!!e.md.options.html&&(o=e.posMax,!(60!==e.src.charCodeAt(l)||l+2>=o)&&(!(33!==(n=e.src.charCodeAt(l+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(i=e.src.slice(l).match(r))&&(t||((a=e.push("html_inline","",0)).content=e.src.slice(l,l+i[0].length),s=a.content,/^<a[>\s]/i.test(s)&&e.linkLevel++,function(e){return/^<\/a\s*>/i.test(e)}(a.content)&&e.linkLevel--),e.pos+=i[0].length,!0))))}},2663:function(e,t,n){"use strict";var r=n(2513),i=n(2472).has,o=n(2472).isValidEntityCode,a=n(2472).fromCodePoint,s=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,c,d,u=e.pos,h=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1>=h)return!1;if(35===e.src.charCodeAt(u+1)){if(c=e.src.slice(u).match(s))return t||(n="x"===c[1][0].toLowerCase()?parseInt(c[1].slice(1),16):parseInt(c[1],10),(d=e.push("text_special","",0)).content=o(n)?a(n):a(65533),d.markup=c[0],d.info="entity"),e.pos+=c[0].length,!0}else if((c=e.src.slice(u).match(l))&&i(r,c[1]))return t||((d=e.push("text_special","",0)).content=r[c[1]],d.markup=c[0],d.info="entity"),e.pos+=c[0].length,!0;return!1}},2664:function(e,t,n){"use strict";function r(e,t){var n,r,i,o,a,s,l,c,d={},u=t.length;if(u){var h=0,p=-2,f=[];for(n=0;n<u;n++)if(i=t[n],f.push(0),t[h].marker===i.marker&&p===i.token-1||(h=n),p=i.token,i.length=i.length||0,i.close){for(d.hasOwnProperty(i.marker)||(d[i.marker]=[-1,-1,-1,-1,-1,-1]),a=d[i.marker][(i.open?3:0)+i.length%3],s=r=h-f[h]-1;r>a;r-=f[r]+1)if((o=t[r]).marker===i.marker&&o.open&&o.end<0&&(l=!1,(o.close||i.open)&&(o.length+i.length)%3===0&&(o.length%3===0&&i.length%3===0||(l=!0)),!l)){c=r>0&&!t[r-1].open?f[r-1]+1:0,f[n]=n-r+c,f[r]=c,i.open=!1,o.end=n,o.close=!1,s=-1,p=-2;break}-1!==s&&(d[i.marker][(i.open?3:0)+(i.length||0)%3]=s)}}}e.exports=function(e){var t,n=e.tokens_meta,i=e.tokens_meta.length;for(r(0,e.delimiters),t=0;t<i;t++)n[t]&&n[t].delimiters&&r(0,n[t].delimiters)}},2665:function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,i=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}},2666:function(e,t,n){"use strict";var r=n(2494),i=n(2472).isWhiteSpace,o=n(2472).isPunctChar,a=n(2472).isMdAsciiPunct;function s(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}s.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},s.prototype.push=function(e,t,n){this.pending&&this.pushPending();var i=new r(e,t,n),o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(o),i},s.prototype.scanDelims=function(e,t){var n,r,s,l,c,d,u,h,p,f=e,v=!0,g=!0,m=this.posMax,b=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;f<m&&this.src.charCodeAt(f)===b;)f++;return s=f-e,r=f<m?this.src.charCodeAt(f):32,u=a(n)||o(String.fromCharCode(n)),p=a(r)||o(String.fromCharCode(r)),d=i(n),(h=i(r))?v=!1:p&&(d||u||(v=!1)),d?g=!1:u&&(h||p||(g=!1)),t?(l=v,c=g):(l=v&&(!g||u),c=g&&(!v||p)),{can_open:l,can_close:c,length:s}},s.prototype.Token=r,e.exports=s},2667:function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function i(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===i(e)}function a(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},c="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",d="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function u(e){var t=e.re=n(2668)(e.__opts__),r=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push(c),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");var l=[];function d(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===i(n))return!function(e){return"[object RegExp]"===i(e)}(n.validate)?o(n.validate)?r.validate=n.validate:d(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(o(n.normalize)?r.normalize=n.normalize:n.normalize?d(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===i(e)}(n)?d(t,n):l.push(t)}})),l.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(a).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function h(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function p(e,t){var n=new h(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function f(e,t){if(!(this instanceof f))return new f(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||s.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},s,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},l,e),this.__compiled__={},this.__tlds__=d,this.__tlds_replaced__=!1,this.re={},u(this)}f.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},f.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},f.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,i,o,a,s,l;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a)),this.__index__>=0},f.prototype.pretest=function(e){return this.re.pretest.test(e)},f.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},f.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(p(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(p(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},f.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var t=this.re.schema_at_start.exec(e);if(!t)return null;var n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,p(this,0)):null},f.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},f.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},f.prototype.onCompile=function(){},e.exports=f},2668:function(e,t,n){"use strict";e.exports=function(e){var t={};e=e||{},t.src_Any=n(2515).source,t.src_Cc=n(2516).source,t.src_Z=n(2517).source,t.src_P=n(2492).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var r="[><\uff5c]";return t.src_pseudo_letter="(?:(?![><\uff5c]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><\uff5c]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+t.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+t.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},2669:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},2670:function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},2671:function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},2672:function(e,t,n){var r;!function(i){"use strict";function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,i,a){return o((s=o(o(t,e),o(r,a)))<<(l=i)|s>>>32-l,n);var s,l}function s(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function l(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function c(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function d(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}function u(e,t){var n,r,i,a,u;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,p=-271733879,f=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)r=h,i=p,a=f,u=v,h=s(h,p,f,v,e[n],7,-680876936),v=s(v,h,p,f,e[n+1],12,-389564586),f=s(f,v,h,p,e[n+2],17,606105819),p=s(p,f,v,h,e[n+3],22,-1044525330),h=s(h,p,f,v,e[n+4],7,-176418897),v=s(v,h,p,f,e[n+5],12,1200080426),f=s(f,v,h,p,e[n+6],17,-1473231341),p=s(p,f,v,h,e[n+7],22,-45705983),h=s(h,p,f,v,e[n+8],7,1770035416),v=s(v,h,p,f,e[n+9],12,-1958414417),f=s(f,v,h,p,e[n+10],17,-42063),p=s(p,f,v,h,e[n+11],22,-1990404162),h=s(h,p,f,v,e[n+12],7,1804603682),v=s(v,h,p,f,e[n+13],12,-40341101),f=s(f,v,h,p,e[n+14],17,-1502002290),h=l(h,p=s(p,f,v,h,e[n+15],22,1236535329),f,v,e[n+1],5,-165796510),v=l(v,h,p,f,e[n+6],9,-1069501632),f=l(f,v,h,p,e[n+11],14,643717713),p=l(p,f,v,h,e[n],20,-373897302),h=l(h,p,f,v,e[n+5],5,-701558691),v=l(v,h,p,f,e[n+10],9,38016083),f=l(f,v,h,p,e[n+15],14,-660478335),p=l(p,f,v,h,e[n+4],20,-405537848),h=l(h,p,f,v,e[n+9],5,568446438),v=l(v,h,p,f,e[n+14],9,-1019803690),f=l(f,v,h,p,e[n+3],14,-187363961),p=l(p,f,v,h,e[n+8],20,1163531501),h=l(h,p,f,v,e[n+13],5,-1444681467),v=l(v,h,p,f,e[n+2],9,-51403784),f=l(f,v,h,p,e[n+7],14,1735328473),h=c(h,p=l(p,f,v,h,e[n+12],20,-1926607734),f,v,e[n+5],4,-378558),v=c(v,h,p,f,e[n+8],11,-2022574463),f=c(f,v,h,p,e[n+11],16,1839030562),p=c(p,f,v,h,e[n+14],23,-35309556),h=c(h,p,f,v,e[n+1],4,-1530992060),v=c(v,h,p,f,e[n+4],11,1272893353),f=c(f,v,h,p,e[n+7],16,-155497632),p=c(p,f,v,h,e[n+10],23,-1094730640),h=c(h,p,f,v,e[n+13],4,681279174),v=c(v,h,p,f,e[n],11,-358537222),f=c(f,v,h,p,e[n+3],16,-722521979),p=c(p,f,v,h,e[n+6],23,76029189),h=c(h,p,f,v,e[n+9],4,-640364487),v=c(v,h,p,f,e[n+12],11,-421815835),f=c(f,v,h,p,e[n+15],16,530742520),h=d(h,p=c(p,f,v,h,e[n+2],23,-995338651),f,v,e[n],6,-198630844),v=d(v,h,p,f,e[n+7],10,1126891415),f=d(f,v,h,p,e[n+14],15,-1416354905),p=d(p,f,v,h,e[n+5],21,-57434055),h=d(h,p,f,v,e[n+12],6,1700485571),v=d(v,h,p,f,e[n+3],10,-1894986606),f=d(f,v,h,p,e[n+10],15,-1051523),p=d(p,f,v,h,e[n+1],21,-2054922799),h=d(h,p,f,v,e[n+8],6,1873313359),v=d(v,h,p,f,e[n+15],10,-30611744),f=d(f,v,h,p,e[n+6],15,-1560198380),p=d(p,f,v,h,e[n+13],21,1309151649),h=d(h,p,f,v,e[n+4],6,-145523070),v=d(v,h,p,f,e[n+11],10,-1120210379),f=d(f,v,h,p,e[n+2],15,718787259),p=d(p,f,v,h,e[n+9],21,-343485551),h=o(h,r),p=o(p,i),f=o(f,a),v=o(v,u);return[h,p,f,v]}function h(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function v(e){return unescape(encodeURIComponent(e))}function g(e){return function(e){return h(u(p(e),8*e.length))}(v(e))}function m(e,t){return function(e,t){var n,r,i=p(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=u(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=u(o.concat(p(t)),512+8*t.length),h(u(a.concat(r),640))}(v(e),v(t))}function b(e,t,n){return t?n?m(t,e):f(m(t,e)):n?g(e):f(g(e))}void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}()},2673:function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},i=function(e){return JSON.parse(JSON.stringify(e))},o={name:"json0",uri:"http://sharejs.org/types/JSONv0"},a={};function s(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}o.registerSubtype=function(e){a[e.name]=e},o.create=function(e){return void 0===e?null:i(e)},o.invertComponent=function(e){var t={p:e.p};return e.t&&a[e.t]&&(t.t=e.t,t.o=a[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},o.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(o.invertComponent(t[r]));return n},o.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},o.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},o.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},o.apply=function(e,t){o.checkValidOp(t),t=i(t);for(var n={data:e},r=0;r<t.length;r++){var l=t[r];null==l.si&&null==l.sd||s(l);for(var c=null,d=n,u="data",h=0;h<l.p.length;h++){var p=l.p[h];if(c=d,u,d=d[u],u=p,null==c)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&a[l.t])d[u]=a[l.t].apply(d[u],l.o);else if(void 0!==l.na){if("number"!=typeof d[u])throw new Error("Referenced element not a number");d[u]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)o.checkList(d),d[u]=l.li;else if(void 0!==l.li)o.checkList(d),d.splice(u,0,l.li);else if(void 0!==l.ld)o.checkList(d),d.splice(u,1);else if(void 0!==l.lm){if(o.checkList(d),l.lm!=u){var f=d[u];d.splice(u,1),d.splice(l.lm,0,f)}}else if(void 0!==l.oi)o.checkObj(d),d[u]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");o.checkObj(d),delete d[u]}}return n.data},o.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},o.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var i=[t[r]];n(i,e=o.apply(e,i))}return e};var c=o.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};o.append=function(e,t){if(t=i(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(s(t),s(n)),c(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&a[t.t]){if(n.o=a[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,o=0;o<n.o.length-1;o++)t.o=[n.o.pop()],t.p=r.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},o.compose=function(e,t){o.checkValidOp(e),o.checkValidOp(t);for(var n=i(e),r=0;r<t.length;r++)o.append(n,t[r]);return n},o.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=[]),o.append(t,i)}return t},o.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var i=0;i<n;i++){var o=e.p[i];if(i>=r||o!==t.p[i])return null}return n},o.canOpAffectPath=function(e,t){return null!=o.commonLengthForOps({p:t},e)},o.transformComponent=function(e,t,n,c){t=i(t);var d=o.commonLengthForOps(n,t),u=o.commonLengthForOps(t,n),h=t.p.length,p=n.p.length;if((null!=t.na||t.t)&&h++,(null!=n.na||n.t)&&p++,null!=u&&p>h&&t.p[u]==n.p[u])if(void 0!==t.ld)(v=i(n)).p=v.p.slice(h),t.ld=o.apply(i(t.ld),[v]);else if(void 0!==t.od){(v=i(n)).p=v.p.slice(h),t.od=o.apply(i(t.od),[v])}if(null!=d){var f=h==p,v=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(s(t),s(v=i(n))),v.t&&a[v.t]){if(t.t&&t.t===v.t){var g=a[t.t].transform(t.o,v.o,c);if(null!=t.si||null!=t.sd)for(var m=t.p,b=0;b<g.length;b++)t.o=[g[b]],t.p=m.slice(),l(t),o.append(e,t);else(!r(g)||g.length>0)&&(t.o=g,o.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[d]===t.p[d]){if(!f)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==c)return e;t.ld=i(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&f&&t.p[d]===n.p[d]?"right"===c&&t.p[d]++:n.p[d]<=t.p[d]&&t.p[d]++,void 0!==t.lm&&f&&n.p[d]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&f){if(n.p[d]===t.p[d])return e;m=n.p[d];var y=t.p[d];(m<(w=t.lm)||m===w&&y<w)&&t.lm--}if(n.p[d]<t.p[d])t.p[d]--;else if(n.p[d]===t.p[d]){if(p<h)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&h===p){y=t.p[d];var w=t.lm,k=n.p[d],x=n.lm;if(k!==x)if(y===k){if("left"!==c)return e;t.p[d]=x,y===w&&(t.lm=x)}else y>k&&t.p[d]--,y>x?t.p[d]++:y===x&&k>x&&(t.p[d]++,y===w&&t.lm++),(w>k||w===k&&w>y)&&t.lm--,w>x?t.lm++:w===x&&(x>k&&w>y||x<k&&w<y?"right"===c&&t.lm++:w>y?t.lm++:w===k&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&f){y=n.p[d],w=n.lm;(m=t.p[d])>y&&t.p[d]--,m>w&&t.p[d]++}else{y=n.p[d],w=n.lm;(m=t.p[d])===y?t.p[d]=w:(m>y&&t.p[d]--,(m>w||m===w&&y>w)&&t.p[d]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[d]===n.p[d]){if(void 0===t.oi||!f)return e;if("right"===c)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[d]===n.p[d]){if("left"!==c)return e;o.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[d]==n.p[d]){if(!f)return e;if(void 0===t.oi)return e;delete t.od}}return o.append(e,t),e},n(2522)(o,o.transformComponent,o.checkValidOp,o.append);var d=n(2674);o.registerSubtype(d),e.exports=o},2674:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!==typeof e)throw new Error("Initial data must be a string");return e||""}},i=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},o=function(e){if("number"!==typeof e.p)throw new Error("component missing position field");if("string"===typeof e.i===("string"===typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},a=function(e){for(var t=0;t<e.length;t++)o(e[t])};r.apply=function(e,t){var n;a(t);for(var r=0;r<t.length;r++){var o=t[r];if(null!=o.i)e=i(e,o.p,o.i);else{if(n=e.slice(o.p,o.p+o.d.length),o.d!==n)throw new Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");e=e.slice(0,o.p)+e.slice(o.p+o.d.length)}}return e};var s=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:i(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:i(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){a(e),a(t);for(var n=e.slice(),r=0;r<t.length;r++)s(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),s(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,i=0;i<t.length;i++)e=l(e,t[i],r);return e};var c=r._tc=function(e,t,n,r){if(o(t),o(n),null!=t.i)s(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var i=t.d;t.p<n.p&&(s(e,{d:i.slice(0,n.p-t.p),p:t.p}),i=i.slice(n.p-t.p)),""!==i&&s(e,{d:i,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)s(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)s(e,t);else{var a={d:"",p:t.p};t.p<n.p&&(a.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(a.d+=t.d.slice(n.p+n.d.length-t.p));var c=Math.max(t.p,n.p),d=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(c-t.p,d-t.p)!==n.d.slice(c-n.p,d-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==a.d&&(a.p=l(a.p,n),s(e,a))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(2522)(r,c,a,s)},2675:function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1;n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];"undefined"==typeof r&&(r=!0);var a=r,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var d=this.diff_compute_(e,t,a,o);return l&&d.unshift(new n.Diff(0,l)),c&&d.push(new n.Diff(0,c)),this.diff_cleanupMerge(d),d},n.prototype.diff_compute_=function(e,t,i,o){var a;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(r,e)];var s=e.length>t.length?e:t,l=e.length>t.length?t:e,c=s.indexOf(l);if(-1!=c)return a=[new n.Diff(1,s.substring(0,c)),new n.Diff(0,l),new n.Diff(1,s.substring(c+l.length))],e.length>t.length&&(a[0][0]=a[2][0]=r),a;if(1==l.length)return[new n.Diff(r,e),new n.Diff(1,t)];var d=this.diff_halfMatch_(e,t);if(d){var u=d[0],h=d[1],p=d[2],f=d[3],v=d[4],g=this.diff_main(u,p,i,o),m=this.diff_main(h,f,i,o);return g.concat([new n.Diff(0,v)],m)}return i&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,o):this.diff_bisect_(e,t,o)},n.prototype.diff_lineMode_=function(e,t,i){var o=this.diff_linesToChars_(e,t);e=o.chars1,t=o.chars2;var a=o.lineArray,s=this.diff_main(e,t,!1,i);this.diff_charsToLines_(s,a),this.diff_cleanupSemantic(s),s.push(new n.Diff(0,""));for(var l=0,c=0,d=0,u="",h="";l<s.length;){switch(s[l][0]){case 1:d++,h+=s[l][1];break;case r:c++,u+=s[l][1];break;case 0:if(c>=1&&d>=1){s.splice(l-c-d,c+d),l=l-c-d;for(var p=this.diff_main(u,h,!1,i),f=p.length-1;f>=0;f--)s.splice(l,0,p[f]);l+=p.length}d=0,c=0,u="",h=""}l++}return s.pop(),s},n.prototype.diff_bisect_=function(e,t,i){for(var o=e.length,a=t.length,s=Math.ceil((o+a)/2),l=s,c=2*s,d=new Array(c),u=new Array(c),h=0;h<c;h++)d[h]=-1,u[h]=-1;d[l+1]=0,u[l+1]=0;for(var p=o-a,f=p%2!=0,v=0,g=0,m=0,b=0,y=0;y<s&&!((new Date).getTime()>i);y++){for(var w=-y+v;w<=y-g;w+=2){for(var k=l+w,x=(M=w==-y||w!=y&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1)-w;M<o&&x<a&&e.charAt(M)==t.charAt(x);)M++,x++;if(d[k]=M,M>o)g+=2;else if(x>a)v+=2;else if(f){if((E=l+p-w)>=0&&E<c&&-1!=u[E])if(M>=(C=o-u[E]))return this.diff_bisectSplit_(e,t,M,x,i)}}for(var O=-y+m;O<=y-b;O+=2){for(var C,E=l+O,j=(C=O==-y||O!=y&&u[E-1]<u[E+1]?u[E+1]:u[E-1]+1)-O;C<o&&j<a&&e.charAt(o-C-1)==t.charAt(a-j-1);)C++,j++;if(u[E]=C,C>o)b+=2;else if(j>a)m+=2;else if(!f){if((k=l+p-O)>=0&&k<c&&-1!=d[k]){var M;x=l+(M=d[k])-k;if(M>=(C=o-C))return this.diff_bisectSplit_(e,t,M,x,i)}}}}return[new n.Diff(r,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),a=t.substring(0,r),s=e.substring(n),l=t.substring(r),c=this.diff_main(o,a,!1,i),d=this.diff_main(s,l,!1,i);return c.concat(d)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,a=-1,s=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",i))&&(a=e.length-1);var l=e.substring(i,a+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(s==o&&(l=e.substring(i),a=e.length),t+=String.fromCharCode(s),r[l]=s,n[s++]=l),i=a+1}return t}n[0]="";var o=4e4,a=i(e);return o=65535,{chars1:a,chars2:i(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,a=1;;){var s=e.substring(i-a),l=t.indexOf(s);if(-1==l)return o;a+=l,0!=l&&e.substring(i-a)!=t.substring(0,a)||(o=a,a++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(e,t,n){for(var r,o,a,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,d="";-1!=(c=t.indexOf(l,c+1));){var u=i.diff_commonPrefix(e.substring(n),t.substring(c)),h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,c));d.length<h+u&&(d=t.substring(c-h,c)+t.substring(c,c+u),r=e.substring(0,n-h),o=e.substring(n+u),a=t.substring(0,c-h),s=t.substring(c+u))}return 2*d.length>=e.length?[r,o,a,s,d]:null}var a,s,l,c,d,u=o(n,r,Math.ceil(n.length/4)),h=o(n,r,Math.ceil(n.length/2));return u||h?(a=h?u&&u[4].length>h[4].length?u:h:u,e.length>t.length?(s=a[0],l=a[1],c=a[2],d=a[3]):(c=a[0],d=a[1],s=a[2],l=a[3]),[s,l,c,d,a[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,i=[],o=0,a=null,s=0,l=0,c=0,d=0,u=0;s<e.length;)0==e[s][0]?(i[o++]=s,l=d,c=u,d=0,u=0,a=e[s][1]):(1==e[s][0]?d+=e[s][1].length:u+=e[s][1].length,a&&a.length<=Math.max(l,c)&&a.length<=Math.max(d,u)&&(e.splice(i[o-1],0,new n.Diff(r,a)),e[i[o-1]+1][0]=1,o--,s=--o>0?i[o-1]:-1,l=0,c=0,d=0,u=0,a=null,t=!0)),s++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]==r&&1==e[s][0]){var h=e[s-1][1],p=e[s][1],f=this.diff_commonOverlap_(h,p),v=this.diff_commonOverlap_(p,h);f>=v?(f>=h.length/2||f>=p.length/2)&&(e.splice(s,0,new n.Diff(0,p.substring(0,f))),e[s-1][1]=h.substring(0,h.length-f),e[s+1][1]=p.substring(f),s++):(v>=h.length/2||v>=p.length/2)&&(e.splice(s,0,new n.Diff(0,h.substring(0,v))),e[s-1][0]=1,e[s-1][1]=p.substring(0,p.length-v),e[s+1][0]=r,e[s+1][1]=h.substring(v),s++),s++}s++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),i=t.charAt(0),o=r.match(n.nonAlphaNumericRegex_),a=i.match(n.nonAlphaNumericRegex_),s=o&&r.match(n.whitespaceRegex_),l=a&&i.match(n.whitespaceRegex_),c=s&&r.match(n.linebreakRegex_),d=l&&i.match(n.linebreakRegex_),u=c&&e.match(n.blanklineEndRegex_),h=d&&t.match(n.blanklineStartRegex_);return u||h?5:c||d?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],o=e[r][1],a=e[r+1][1],s=this.diff_commonSuffix(i,o);if(s){var l=o.substring(o.length-s);i=i.substring(0,i.length-s),o=l+o.substring(0,o.length-s),a=l+a}for(var c=i,d=o,u=a,h=t(i,o)+t(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var p=t(i,o)+t(o,a);p>=h&&(h=p,c=i,d=o,u=a)}e[r-1][1]!=c&&(c?e[r-1][1]=c:(e.splice(r-1,1),r--),e[r][1]=d,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,i=[],o=0,a=null,s=0,l=!1,c=!1,d=!1,u=!1;s<e.length;)0==e[s][0]?(e[s][1].length<this.Diff_EditCost&&(d||u)?(i[o++]=s,l=d,c=u,a=e[s][1]):(o=0,a=null),d=u=!1):(e[s][0]==r?u=!0:d=!0,a&&(l&&c&&d&&u||a.length<this.Diff_EditCost/2&&l+c+d+u==3)&&(e.splice(i[o-1],0,new n.Diff(r,a)),e[i[o-1]+1][0]=1,o--,a=null,l&&c?(d=u=!0,o=0):(s=--o>0?i[o-1]:-1,d=u=!1),t=!0)),s++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,i=0,o=0,a=0,s="",l="";i<e.length;)switch(e[i][0]){case 1:a++,l+=e[i][1],i++;break;case r:o++,s+=e[i][1],i++;break;case 0:o+a>1?(0!==o&&0!==a&&(0!==(t=this.diff_commonPrefix(l,s))&&(i-o-a>0&&0==e[i-o-a-1][0]?e[i-o-a-1][1]+=l.substring(0,t):(e.splice(0,0,new n.Diff(0,l.substring(0,t))),i++),l=l.substring(t),s=s.substring(t)),0!==(t=this.diff_commonSuffix(l,s))&&(e[i][1]=l.substring(l.length-t)+e[i][1],l=l.substring(0,l.length-t),s=s.substring(0,s.length-t))),i-=o+a,e.splice(i,o+a),s.length&&(e.splice(i,0,new n.Diff(r,s)),i++),l.length&&(e.splice(i,0,new n.Diff(1,l)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,a=0,o=0,s="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),c=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,o=0,a=0,s=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),e[n][0]!==r&&(o+=e[n][1].length),!(i>t));n++)a=i,s=o;return e.length!=n&&e[n][0]===r?s:s+(t-a)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,o=/>/g,a=/\n/g,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1].replace(n,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case 1:t[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case r:t[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[s]="<span>"+c+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,o=0;o<e.length;o++){var a=e[o][0],s=e[o][1];switch(a){case 1:n+=s.length;break;case r:i+=s.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case r:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var i=[],o=0,a=0,s=t.split(/\t/g),l=0;l<s.length;l++){var c=s[l].substring(1);switch(s[l].charAt(0)){case"+":try{i[o++]=new n.Diff(1,decodeURI(c))}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var d=parseInt(c,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+c);var u=e.substring(a,a+=d);"="==s[l].charAt(0)?i[o++]=new n.Diff(0,u):i[o++]=new n.Diff(r,u);break;default:if(s[l])throw new Error("Invalid diff operation in diff_fromDelta: "+s[l])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return i},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this;function o(e,r){var o=e/t.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var l,c,d=1<<t.length-1;s=-1;for(var u,h=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=h;l<c;)o(p,n+c)<=a?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var f=Math.max(1,n-c+1),v=Math.min(n+c,e.length)+t.length,g=Array(v+2);g[v+1]=(1<<p)-1;for(var m=v;m>=f;m--){var b=r[e.charAt(m-1)];if(g[m]=0===p?(g[m+1]<<1|1)&b:(g[m+1]<<1|1)&b|(u[m+1]|u[m])<<1|1|u[m+1],g[m]&d){var y=o(p,m-1);if(y<=a){if(a=y,!((s=m-1)>n))break;f=Math.max(1,2*n-s)}}}if(o(p+1,n)>a)break;u=g}return s},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=t.substring(e.start2-i,e.start2);o&&e.diffs.unshift(new n.Diff(0,o));var a=t.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push(new n.Diff(0,a)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},n.prototype.patch_make=function(e,t,i){var o,a;if("string"==typeof e&&"string"==typeof t&&"undefined"==typeof i)o=e,(a=this.diff_main(o,t,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==typeof e&&"undefined"==typeof t&&"undefined"==typeof i)a=e,o=this.diff_text1(a);else if("string"==typeof e&&t&&"object"==typeof t&&"undefined"==typeof i)o=e,a=t;else{if("string"!=typeof e||"string"!=typeof t||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=e,a=i}if(0===a.length)return[];for(var s=[],l=new n.patch_obj,c=0,d=0,u=0,h=o,p=o,f=0;f<a.length;f++){var v=a[f][0],g=a[f][1];switch(c||0===v||(l.start1=d,l.start2=u),v){case 1:l.diffs[c++]=a[f],l.length2+=g.length,p=p.substring(0,u)+g+p.substring(u);break;case r:l.length1+=g.length,l.diffs[c++]=a[f],p=p.substring(0,u)+p.substring(u+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&a.length!=f+1?(l.diffs[c++]=a[f],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,h),s.push(l),l=new n.patch_obj,c=0,h=p,d=u)}1!==v&&(d+=g.length),v!==r&&(u+=g.length)}return c&&(this.patch_addContext_(l,h),s.push(l)),s},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],o=new n.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=new n.Diff(i.diffs[a][0],i.diffs[a][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,t[r]=o}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,o=[],a=0;a<e.length;a++){var s,l,c=e[a].start2+i,d=this.diff_text1(e[a].diffs),u=-1;if(d.length>this.Match_MaxBits?-1!=(s=this.match_main(t,d.substring(0,this.Match_MaxBits),c))&&(-1==(u=this.match_main(t,d.substring(d.length-this.Match_MaxBits),c+d.length-this.Match_MaxBits))||s>=u)&&(s=-1):s=this.match_main(t,d,c),-1==s)o[a]=!1,i-=e[a].length2-e[a].length1;else if(o[a]=!0,i=s-c,d==(l=-1==u?t.substring(s,s+d.length):t.substring(s,u+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[a].diffs)+t.substring(s+d.length);else{var h=this.diff_main(d,l,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(h)/d.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p,f=0,v=0;v<e[a].diffs.length;v++){var g=e[a].diffs[v];0!==g[0]&&(p=this.diff_xIndex(h,f)),1===g[0]?t=t.substring(0,s+p)+g[1]+t.substring(s+p):g[0]===r&&(t=t.substring(0,s+p)+t.substring(s+this.diff_xIndex(h,f+g[1].length))),g[0]!==r&&(f+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),o]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",i=1;i<=t;i++)r+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var o=e[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new n.Diff(0,r)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>a[0][1].length){var s=t-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0==(a=(o=e[e.length-1]).diffs).length||0!=a[a.length-1][0])a.push(new n.Diff(0,r)),o.length1+=t,o.length2+=t;else if(t>a[a.length-1][1].length){s=t-a[a.length-1][1].length;a[a.length-1][1]+=r.substring(0,s),o.length1+=s,o.length2+=s}return r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var o=e[i];e.splice(i--,1);for(var a=o.start1,s=o.start2,l="";0!==o.diffs.length;){var c=new n.patch_obj,d=!0;for(c.start1=a-l.length,c.start2=s-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new n.Diff(0,l)));0!==o.diffs.length&&c.length1<t-this.Patch_Margin;){var u=o.diffs[0][0],h=o.diffs[0][1];1===u?(c.length2+=h.length,s+=h.length,c.diffs.push(o.diffs.shift()),d=!1):u===r&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*t?(c.length1+=h.length,a+=h.length,d=!1,c.diffs.push(new n.Diff(u,h)),o.diffs.shift()):(h=h.substring(0,t-c.length1-this.Patch_Margin),c.length1+=h.length,a+=h.length,0===u?(c.length2+=h.length,s+=h.length):d=!1,c.diffs.push(new n.Diff(u,h)),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new n.Diff(0,p))),d||e.splice(++i,0,c)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var i=e.split("\n"),o=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var s=i[o].match(a);if(!s)throw new Error("Invalid patch string: "+i[o]);var l=new n.patch_obj;for(t.push(l),l.start1=parseInt(s[1],10),""===s[2]?(l.start1--,l.length1=1):"0"==s[2]?l.length1=0:(l.start1--,l.length1=parseInt(s[2],10)),l.start2=parseInt(s[3],10),""===s[4]?(l.start2--,l.length2=1):"0"==s[4]?l.length2=0:(l.start2--,l.length2=parseInt(s[4],10)),o++;o<i.length;){var c=i[o].charAt(0);try{var d=decodeURI(i[o].substring(1))}catch(u){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==c)l.diffs.push(new n.Diff(r,d));else if("+"==c)l.diffs.push(new n.Diff(1,d));else if(" "==c)l.diffs.push(new n.Diff(0,d));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+d)}o++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case r:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},2676:function(e,t,n){var r=n(2677),i=n(2678),o=n(2497),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=o(n),c=n<0?a(l+c,0):s(c,l-1)),r(e,i(t,3),c,!0)}},2677:function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},2678:function(e,t,n){var r=n(2679),i=n(2682),o=n(532),a=n(145),s=n(2686);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},2679:function(e,t,n){var r=n(2680),i=n(2681),o=n(2524);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},2680:function(e,t,n){var r=n(442),i=n(1219);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var d=(c=n[a])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var p=new r;if(o)var f=o(u,h,d,e,t,p);if(!(void 0===f?i(h,u,3,o,p):f))return!1}}return!0}},2681:function(e,t,n){var r=n(2523),i=n(329);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},2682:function(e,t,n){var r=n(1219),i=n(229),o=n(2683),a=n(1218),s=n(2523),l=n(2524),c=n(530);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},2683:function(e,t,n){var r=n(2684),i=n(2685);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2684:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},2685:function(e,t,n){var r=n(443),i=n(328),o=n(145),a=n(535),s=n(534),l=n(530);e.exports=function(e,t,n){for(var c=-1,d=(t=r(t,e)).length,u=!1;++c<d;){var h=l(t[c]);if(!(u=null!=e&&n(e,h)))break;e=e[h]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&s(d)&&a(h,d)&&(o(e)||i(e))}},2686:function(e,t,n){var r=n(2687),i=n(2688),o=n(1218),a=n(530);e.exports=function(e){return o(e)?r(a(e)):i(e)}},2687:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2688:function(e,t,n){var r=n(538);e.exports=function(e){return function(t){return r(t,e)}}},2689:function(e,t,n){var r=n(1222),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},2690:function(e,t,n){"use strict";var r=n(2691),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,a,s,l,c,d=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),s=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=i[t.format]||i.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(u){n&&console.error("unable to copy using clipboardData: ",u),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return d}},2691:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},2692:function(e,t,n){var r=n(2693),i=n(1221),o=n(2497),a=n(1220);e.exports=function(e,t,n){return e=a(e),n=null==n?0:r(o(n),0,e.length),t=i(t),e.slice(n,n+t.length)==t}},2693:function(e,t){e.exports=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},2694:function(e,t,n){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var o,a,s,l,c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C,E,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=[],N=0;if(isNaN(i))throw new TypeError("Invalid number");if(s=!0===j.bits,y=!0===j.unix,g=!0===j.pad,a=j.base||2,m=void 0!==j.round?j.round:y?1:2,u=void 0!==j.locale?j.locale:"",h=j.localeOptions||{},w=void 0!==j.separator?j.separator:"",k=void 0!==j.spacer?j.spacer:y?"":" ",O=j.symbols||{},x=2===a&&j.standard||"jedec",v=j.output||"string",c=!0===j.fullform,d=j.fullforms instanceof Array?j.fullforms:[],o=void 0!==j.exponent?j.exponent:-1,C=r[j.roundingMethod]||Math.round,p=(f=Number(i))<0,l=a>2?1e3:1024,E=!1===isNaN(j.precision)?parseInt(j.precision,10):0,p&&(f=-f),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(f)/Math.log(l)))<0&&(o=0),o>8&&(E>0&&(E+=8-o),o=8),"exponent"===v)return o;if(0===f)M[0]=0,b=M[1]=y?"":t[x][s?"bits":"bytes"][o];else{N=f/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),s&&(N*=8)>=l&&o<8&&(N/=l,o++);var S=Math.pow(10,o>0?m:0);M[0]=C(N*S)/S,M[0]===l&&o<8&&void 0===j.exponent&&(M[0]=1,o++),b=M[1]=10===a&&1===o?s?"kb":"kB":t[x][s?"bits":"bytes"][o],y&&(M[1]="jedec"===x?M[1].charAt(0):o>0?M[1].replace(/B$/,""):M[1],e.test(M[1])&&(M[0]=Math.floor(M[0]),M[1]=""))}if(p&&(M[0]=-M[0]),E>0&&(M[0]=M[0].toPrecision(E)),M[1]=O[M[1]]||M[1],!0===u?M[0]=M[0].toLocaleString():u.length>0?M[0]=M[0].toLocaleString(u,h):w.length>0&&(M[0]=M[0].toString().replace(".",w)),g&&!1===Number.isInteger(M[0])&&m>0){var T=w||".",_=M[0].toString().split(T),A=_[1]||"",I=A.length,D=m-I;M[0]="".concat(_[0]).concat(T).concat(A.padEnd(I+D,"0"))}return c&&(M[1]=d[o]?d[o]:n[x][o]+(s?"bit":"byte")+(1===M[0]?"":"s")),"array"===v?M:"object"===v?{value:M[0],symbol:M[1],exponent:o,unit:b}:M.join(k)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},2697:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="keydown:backspace",u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).kind="block",e.style={"text-align":"@var0","list-style-position":"@var1"},e.variable={"@var0":["center","right","justify"],"@var1":["outside","inside"]},e.onBackspace=function(t){var n=e.editor;if(Object(c.X)(n)){var r=n.change,i=n.block,o=r.range.get();if(!(i.isLastOffset(o,"end")||!i.isFirstOffset(o,"start")||r.blocks.length>1)){var a=n.command,s=e.queryState();return"center"===s?(t.preventDefault(),a.execute(e.constructor.pluginName,"left"),!1):"right"===s?(t.preventDefault(),a.execute(e.constructor.pluginName,"center"),!1):void 0}}},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this),this.editor.on(d,this.onBackspace)}},{key:"execute",value:function(e){var t=this.editor;if(Object(c.X)(t)&&!t.readonly){var n=t.change;t.block.setBlocks({style:{"text-align":!e||["left"].indexOf(e)>-1?"":e}}),n.blocks.forEach((function(n){"li"===n.name&&t.list.addAlign(n,e)}))}}},{key:"queryState",value:function(){var e=this.editor;if(Object(c.X)(e)){var t=e.change,n=e.schema,r=t.blocks;if(0!==r.length){var i=r[0];n.getAllowInTags().indexOf(i.name)>-1&&(i=r[1]||i.first()||i);var o=i.css("text-align");return"start"===o&&(o="left"),"end"===o&&(o="right"),o}}}},{key:"hotkey",value:function(){var e,t,n,r;return[{key:(null===(e=this.options.hotkey)||void 0===e?void 0:e.left)||"mod+shift+l",args:"left"},{key:(null===(t=this.options.hotkey)||void 0===t?void 0:t.center)||"mod+shift+c",args:"center"},{key:(null===(n=this.options.hotkey)||void 0===n?void 0:n.right)||"mod+shift+r",args:"right"},{key:(null===(r=this.options.hotkey)||void 0===r?void 0:r.justify)||"mod+shift+j",args:"justify"}]}},{key:"destroy",value:function(){this.editor.off(d,this.onBackspace)}}],[{key:"pluginName",get:function(){return"alignment"}}]),n}(c.q);t.a=u},2698:function(e,t,n){var r,i;r=function(){"use strict";var e=function(e,t,n,r){var i={features:null,bind:function(e,t,n,r){var i=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[i](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var e=i.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&o.length>0&&(o=parseInt(o[1],10))>=1&&o<8&&(n.isOldIOSPhone=!0)}var a=r.match(/Android\s([0-9\.]*)/),s=a?a[1]:0;(s=parseFloat(s))>=1&&(s<4.4&&(n.isOldAndroid=!0),n.androidVersion=s),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var l,c,d=["transform","perspective","animationName"],u=["","webkit","Moz","ms","O"],h=0;h<4;h++){t=u[h];for(var p=0;p<3;p++)l=d[p],c=t+(t?l.charAt(0).toUpperCase()+l.slice(1):l),!n[l]&&c in e&&(n[l]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var f=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),r=window.setTimeout((function(){e(t+n)}),n);return f=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=n,n}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,r){t=t.split(" ");for(var i,o=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(i=t[s])if("object"===typeof n&&n.handleEvent){if(r){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=a;e[o]("on"+i,n["oldIE"+i])}else e[o]("on"+i,n)});var o=this,a=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};i.extend(l,r);var c,d,u,h,p,f,v,g,m,b,y,w,k,x,O,C,E,j,M,N,S,T,_,A,I,D,z,L,R,B,P,F,H,q,U,W,V,Y,G,Z,X,Q,K,$,J,ee,te,ne,re,ie,oe,ae,se,le,ce,de,ue=function(){return{x:0,y:0}},he=ue(),pe=ue(),fe=ue(),ve={},ge=0,me={},be=ue(),ye=0,we=!0,ke=[],xe={},Oe=!1,Ce=function(e,t){i.extend(o,t.publicMethods),ke.push(e)},Ee=function(e){var t=Jt();return e>t-1?e-t:e<0?t+e:e},je={},Me=function(e,t){return je[e]||(je[e]=[]),je[e].push(t)},Ne=function(e){var t=je[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(o,n)}},Se=function(){return(new Date).getTime()},Te=function(e){le=e,o.bg.style.opacity=e*l.bgOpacity},_e=function(e,t,n,r,i){(!Oe||i&&i!==o.currItem)&&(r/=i?i.fitRatio:o.currItem.fitRatio),e[T]=w+t+"px, "+n+"px"+k+" scale("+r+")"},Ae=function(e){re&&(e&&(b>o.currItem.fitRatio?Oe||(un(o.currItem,!1,!0),Oe=!0):Oe&&(un(o.currItem),Oe=!1)),_e(re,fe.x,fe.y,b))},Ie=function(e){e.container&&_e(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},De=function(e,t){t[T]=w+e+"px, 0px"+k},ze=function(e,t){if(!l.loop&&t){var n=h+(be.x*ge-e)/be.x,r=Math.round(e-bt.x);(n<0&&r>0||n>=Jt()-1&&r<0)&&(e=bt.x+r*l.mainScrollEndFriction)}bt.x=e,De(e,p)},Le=function(e,t){var n=yt[e]-me[e];return pe[e]+he[e]+n-n*(t/y)},Re=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Be=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Pe=null,Fe=function t(){Pe&&(i.unbind(document,"mousemove",t),i.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,Ne("mouseUsed")),Pe=setTimeout((function(){Pe=null}),100)},He=function(){i.bind(document,"keydown",o),P.transform&&i.bind(o.scrollWrap,"click",o),l.mouseUsed||i.bind(document,"mousemove",Fe),i.bind(window,"resize scroll orientationchange",o),Ne("bindEvents")},qe=function(){i.unbind(window,"resize scroll orientationchange",o),i.unbind(window,"scroll",m.scroll),i.unbind(document,"keydown",o),i.unbind(document,"mousemove",Fe),P.transform&&i.unbind(o.scrollWrap,"click",o),G&&i.unbind(window,v,o),clearTimeout(F),Ne("unbindEvents")},Ue=function(e,t){var n=sn(o.currItem,ve,e);return t&&(ne=n),n},We=function(e){return e||(e=o.currItem),e.initialZoomLevel},Ve=function(e){return e||(e=o.currItem),e.w>0?l.maxSpreadZoom:1},Ye=function(e,t,n,r){return r===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Le(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(T){var t=P.perspective&&!A;return w="translate"+(t?"3d(":"("),void(k=P.perspective?", 0px)":")")}T="left",i.addClass(e,"pswp--ie"),De=function(e,t){t.left=e+"px"},Ie=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,i=t*e.h;n.width=r+"px",n.height=i+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Ae=function(){if(re){var e=re,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,i=n*t.h;e.width=r+"px",e.height=i+"px",e.left=fe.x+"px",e.top=fe.y+"px"}}},Ze=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},Xe=function(e){e&&(Q||X||ie||V)&&(e.preventDefault(),e.stopPropagation())},Qe=function(){o.setScrollOffset(0,i.getScrollY())},Ke={},$e=0,Je=function(e){Ke[e]&&(Ke[e].raf&&D(Ke[e].raf),$e--,delete Ke[e])},et=function(e){Ke[e]&&Je(e),Ke[e]||($e++,Ke[e]={})},tt=function(){for(var e in Ke)Ke.hasOwnProperty(e)&&Je(e)},nt=function(e,t,n,r,i,o,a){var s,l=Se();et(e),function c(){if(Ke[e]){if((s=Se()-l)>=r)return Je(e),o(n),void(a&&a());o((n-t)*i(s/r)+t),Ke[e].raf=I(c)}}()},rt={shout:Ne,listen:Me,viewportSize:ve,options:l,isMainScrollAnimating:function(){return ie},getZoomLevel:function(){return b},getCurrentIndex:function(){return h},isDragging:function(){return G},isZooming:function(){return ee},setScrollOffset:function(e,t){me.x=e,B=me.y=t,Ne("updateScrollOffset",me)},applyZoomPan:function(e,t,n,r){fe.x=t,fe.y=n,b=e,Ae(r)},init:function(){if(!c&&!d){var n;o.framework=i,o.template=e,o.bg=i.getChildByClass(e,"pswp__bg"),z=e.className,c=!0,P=i.detectFeatures(),I=P.raf,D=P.caf,T=P.transform,R=P.oldIE,o.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),o.container=i.getChildByClass(o.scrollWrap,"pswp__container"),p=o.container.style,o.itemHolders=C=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],C[0].el.style.display=C[2].el.style.display="none",Ge(),m={resize:o.updateSize,orientationchange:function(){clearTimeout(F),F=setTimeout((function(){ve.x!==o.scrollWrap.clientWidth&&o.updateSize()}),500)},scroll:Qe,keydown:Ze,click:Xe};var r=P.isOldIOSPhone||P.isOldAndroid||P.isMobileOpera;for(P.animationName&&P.transform&&!r||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<ke.length;n++)o["init"+ke[n]]();t&&(o.ui=new t(o,i)).init(),Ne("firstUpdate"),h=h||l.index||0,(isNaN(h)||h<0||h>=Jt())&&(h=0),o.currItem=$t(h),(P.isOldIOSPhone||P.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),l.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),void 0===B&&(Ne("initialLayout"),B=L=i.getScrollY());var a="pswp--open ";for(l.mainClass&&(a+=l.mainClass+" "),l.showHideOpacity&&(a+="pswp--animate_opacity "),a+=A?"pswp--touch":"pswp--notouch",a+=P.animationName?" pswp--css_animation":"",a+=P.svg?" pswp--svg":"",i.addClass(e,a),o.updateSize(),f=-1,ye=null,n=0;n<s;n++)De((n+f)*be.x,C[n].el.style);R||i.bind(o.scrollWrap,g,o),Me("initialZoomInEnd",(function(){o.setContent(C[0],h-1),o.setContent(C[2],h+1),C[0].el.style.display=C[2].el.style.display="block",l.focus&&e.focus(),He()})),o.setContent(C[1],h),o.updateCurrItem(),Ne("afterInit"),we||(x=setInterval((function(){$e||G||ee||b!==o.currItem.initialZoomLevel||o.updateSize()}),1e3)),i.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,d=!0,Ne("close"),qe(),en(o.currItem,null,!0,o.destroy))},destroy:function(){Ne("destroy"),Zt&&clearTimeout(Zt),e.setAttribute("aria-hidden","true"),e.className=z,x&&clearInterval(x),i.unbind(o.scrollWrap,g,o),i.unbind(window,"scroll",o),Ct(),tt(),je=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),fe.x=e,fe.y=t,Ae()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=Ee(e))-h;ye=t,h=e,o.currItem=$t(h),ge-=t,ze(be.x*ge),tt(),ie=!1,o.updateCurrItem()},next:function(){o.goTo(h+1)},prev:function(){o.goTo(h-1)},updateCurrZoomItem:function(e){if(e&&Ne("beforeChange",0),C[1].el.children.length){var t=C[1].el.children[0];re=i.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=o.currItem.bounds,y=b=o.currItem.initialZoomLevel,fe.x=ne.center.x,fe.y=ne.center.y,e&&Ne("afterChange")},invalidateCurrItems:function(){O=!0;for(var e=0;e<s;e++)C[e].item&&(C[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ye){var t,n=Math.abs(ye);if(!(e&&n<2)){o.currItem=$t(h),Oe=!1,Ne("beforeChange",ye),n>=s&&(f+=ye+(ye>0?-s:s),n=s);for(var r=0;r<n;r++)ye>0?(t=C.shift(),C[s-1]=t,f++,De((f+2)*be.x,t.el.style),o.setContent(t,h-n+r+1+1)):(t=C.pop(),C.unshift(t),f--,De(f*be.x,t.el.style),o.setContent(t,h+n-r-1-1));if(re&&1===Math.abs(ye)){var i=$t(E);i.initialZoomLevel!==b&&(sn(i,ve),un(i),Ie(i))}ye=0,o.updateCurrZoomItem(),E=h,Ne("afterChange")}}},updateSize:function(t){if(!we&&l.modal){var n=i.getScrollY();if(B!==n&&(e.style.top=n+"px",B=n),!t&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,e.style.height=xe.y+"px"}if(ve.x=o.scrollWrap.clientWidth,ve.y=o.scrollWrap.clientHeight,Qe(),be.x=ve.x+Math.round(ve.x*l.spacing),be.y=ve.y,ze(be.x*ge),Ne("beforeResize"),void 0!==f){for(var r,a,c,d=0;d<s;d++)r=C[d],De((d+f)*be.x,r.el.style),c=h+d-1,l.loop&&Jt()>2&&(c=Ee(c)),(a=$t(c))&&(O||a.needsUpdate||!a.bounds)?(o.cleanSlide(a),o.setContent(r,c),1===d&&(o.currItem=a,o.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&o.setContent(r,c),a&&a.container&&(sn(a,ve),un(a),Ie(a));O=!1}y=b=o.currItem.initialZoomLevel,(ne=o.currItem.bounds)&&(fe.x=ne.center.x,fe.y=ne.center.y,Ae(!0)),Ne("resize")},zoomTo:function(e,t,n,r,o){t&&(y=b,yt.x=Math.abs(t.x)-fe.x,yt.y=Math.abs(t.y)-fe.y,Re(pe,fe));var a=Ue(e,!1),s={};Ye("x",a,s,e),Ye("y",a,s,e);var l=b,c={x:fe.x,y:fe.y};Be(s);var d=function(t){1===t?(b=e,fe.x=s.x,fe.y=s.y):(b=(e-l)*t+l,fe.x=(s.x-c.x)*t+c.x,fe.y=(s.y-c.y)*t+c.y),o&&o(t),Ae(1===t)};n?nt("customZoomTo",0,1,n,r||i.easing.sine.inOut,d):d(1)}},it=30,ot=10,at={},st={},lt={},ct={},dt={},ut=[],ht={},pt=[],ft={},vt=0,gt=ue(),mt=0,bt=ue(),yt=ue(),wt=ue(),kt=function(e,t){return e.x===t.x&&e.y===t.y},xt=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ot=function(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)},Ct=function(){K&&(D(K),K=null)},Et=function e(){G&&(K=I(e),Ht())},jt=function(){return!("fit"===l.scaleMode&&b===o.currItem.initialZoomLevel)},Mt=function e(t,n){return!(!t||t===document)&&!(t.getAttribute("class")&&t.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(n(t)?t:e(t.parentNode,n))},Nt={},St=function(e,t){return Nt.prevent=!Mt(e.target,l.isClickableElement),Ne("preventDragEvent",e,t,Nt),Nt.prevent},Tt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},_t=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},At=function(e,t,n){if(e-q>50){var r=pt.length>2?pt.shift():{};r.x=t,r.y=n,pt.push(r),q=e}},It=function(){var e=fe.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(ve.y/2))},Dt={},zt={},Lt=[],Rt=function(e){for(;Lt.length>0;)Lt.pop();return _?(de=0,ut.forEach((function(e){0===de?Lt[0]=e:1===de&&(Lt[1]=e),de++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Lt[0]=Tt(e.touches[0],Dt),e.touches.length>1&&(Lt[1]=Tt(e.touches[1],zt))):(Dt.x=e.pageX,Dt.y=e.pageY,Dt.id="",Lt[0]=Dt),Lt},Bt=function(e,t){var n,r,i,a,s=fe[e]+t[e],c=t[e]>0,d=bt.x+t.x,u=bt.x-ht.x;if(n=s>ne.min[e]||s<ne.max[e]?l.panEndFriction:1,s=fe[e]+t[e]*n,(l.allowPanToNext||b===o.currItem.initialZoomLevel)&&(re?"h"!==oe||"x"!==e||X||(c?(s>ne.min[e]&&(n=l.panEndFriction,ne.min[e],r=ne.min[e]-pe[e]),(r<=0||u<0)&&Jt()>1?(a=d,u<0&&d>ht.x&&(a=ht.x)):ne.min.x!==ne.max.x&&(i=s)):(s<ne.max[e]&&(n=l.panEndFriction,ne.max[e],r=pe[e]-ne.max[e]),(r<=0||u>0)&&Jt()>1?(a=d,u>0&&d<ht.x&&(a=ht.x)):ne.min.x!==ne.max.x&&(i=s))):a=d,"x"===e))return void 0!==a&&(ze(a,!0),$=a!==ht.x),ne.min.x!==ne.max.x&&(void 0!==i?fe.x=i:$||(fe.x+=t.x*n)),void 0!==a;ie||$||b>o.currItem.fitRatio&&(fe[e]+=t[e]*n)},Pt=function(e){if(!("mousedown"===e.type&&e.button>0))if(Kt)e.preventDefault();else if(!Y||"mousedown"!==e.type){if(St(e,!0)&&e.preventDefault(),Ne("pointerDown"),_){var t=i.arraySearch(ut,e.pointerId,"id");t<0&&(t=ut.length),ut[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Rt(e),r=n.length;J=null,tt(),G&&1!==r||(G=ae=!0,i.bind(window,v,o),W=ce=se=V=$=Q=Z=X=!1,oe=null,Ne("firstTouchStart",n),Re(pe,fe),he.x=he.y=0,Re(ct,n[0]),Re(dt,ct),ht.x=be.x*ge,pt=[{x:ct.x,y:ct.y}],q=H=Se(),Ue(b,!0),Ct(),Et()),!ee&&r>1&&!ie&&!$&&(y=b,X=!1,ee=Z=!0,he.y=he.x=0,Re(pe,fe),Re(at,n[0]),Re(st,n[1]),_t(at,st,wt),yt.x=Math.abs(wt.x)-fe.x,yt.y=Math.abs(wt.y)-fe.y,te=Ot(at,st))}},Ft=function(e){if(e.preventDefault(),_){var t=i.arraySearch(ut,e.pointerId,"id");if(t>-1){var n=ut[t];n.x=e.pageX,n.y=e.pageY}}if(G){var r=Rt(e);if(oe||Q||ee)J=r;else if(bt.x!==be.x*ge)oe="h";else{var o=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(o)>=ot&&(oe=o>0?"h":"v",J=r)}}},Ht=function(){if(J){var e=J.length;if(0!==e)if(Re(at,J[0]),lt.x=at.x-ct.x,lt.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!lt.x&&!lt.y&&kt(J[1],st))return;Re(st,J[1]),X||(X=!0,Ne("zoomGestureStarted"));var t=Ot(at,st),n=Yt(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ce=!0);var r=1,i=We(),a=Ve();if(n<i)if(l.pinchToClose&&!ce&&y<=o.currItem.initialZoomLevel){var s=1-(i-n)/(i/1.2);Te(s),Ne("onPinchClose",s),se=!0}else(r=(i-n)/i)>1&&(r=1),n=i-r*(i/3);else n>a&&((r=(n-a)/(6*i))>1&&(r=1),n=a+r*i);r<0&&(r=0),_t(at,st,gt),he.x+=gt.x-wt.x,he.y+=gt.y-wt.y,Re(wt,gt),fe.x=Le("x",n),fe.y=Le("y",n),W=n>b,b=n,Ae()}else{if(!oe)return;if(ae&&(ae=!1,Math.abs(lt.x)>=ot&&(lt.x-=J[0].x-dt.x),Math.abs(lt.y)>=ot&&(lt.y-=J[0].y-dt.y)),ct.x=at.x,ct.y=at.y,0===lt.x&&0===lt.y)return;if("v"===oe&&l.closeOnVerticalDrag&&!jt()){he.y+=lt.y,fe.y+=lt.y;var c=It();return V=!0,Ne("onVerticalDrag",c),Te(c),void Ae()}At(Se(),at.x,at.y),Q=!0,ne=o.currItem.bounds,Bt("x",lt)||(Bt("y",lt),Be(fe),Ae())}}},qt=function(e){if(P.isOldAndroid){if(Y&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(Y),Y=setTimeout((function(){Y=0}),600))}var t;if(Ne("pointerUp"),St(e,!1)&&e.preventDefault(),_){var n=i.arraySearch(ut,e.pointerId,"id");if(n>-1)if(t=ut.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,s=Rt(e),c=s.length;if("mouseup"===e.type&&(c=0),2===c)return J=null,!0;1===c&&Re(dt,s[0]),0!==c||oe||ie||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ne("touchRelease",e,t));var d=-1;if(0===c&&(G=!1,i.unbind(window,v,o),Ct(),ee?d=0:-1!==mt&&(d=Se()-mt)),mt=1===c?Se():-1,a=-1!==d&&d<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(a="zoomPointerUp"),Ne("zoomGestureEnded")),J=null,Q||X||ie||V)if(tt(),U||(U=Ut()),U.calculateSwipeSpeed("x"),V)if(It()<l.verticalDragRange)o.close();else{var u=fe.y,h=le;nt("verticalDrag",0,1,300,i.easing.cubic.out,(function(e){fe.y=(o.currItem.initialPosition.y-u)*e+u,Te((1-h)*e+h),Ae()})),Ne("onVerticalDrag",1)}else{if(($||ie)&&0===c){if(Vt(a,U))return;a="zoomPointerUp"}ie||("swipe"===a?!$&&b>o.currItem.fitRatio&&Wt(U):Gt())}},Ut=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){pt.length>1?(e=Se()-q+50,t=pt[pt.length-2][r]):(e=Se()-H,t=dt[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(fe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:fe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,fe[e],n.backAnimDestination[e],t||300,i.easing.sine.out,(function(t){fe[e]=t,Ae()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,fe[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Ke.zoomPan&&(Ke.zoomPan.raf=I(n.panAnimLoop),n.now=Se(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Ae(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return fe.x=Math.round(fe.x),fe.y=Math.round(fe.y),Ae(),void Je("zoomPan")}};return n},Wt=function(e){if(e.calculateSwipeSpeed("y"),ne=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=Se(),e.panAnimLoop()},Vt=function(e,t){var n,r,a;if(ie||(vt=h),"swipe"===e){var s=ct.x-dt.x,c=t.lastFlickDist.x<10;s>it&&(c||t.lastFlickOffset.x>20)?r=-1:s<-it&&(c||t.lastFlickOffset.x<-20)&&(r=1)}r&&((h+=r)<0?(h=l.loop?Jt()-1:0,a=!0):h>=Jt()&&(h=l.loop?0:Jt()-1,a=!0),a&&!l.loop||(ye+=r,ge-=r,n=!0));var d,u=be.x*ge,p=Math.abs(u-bt.x);return n||u>bt.x===t.lastFlickSpeed.x>0?(d=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,d=Math.min(d,400),d=Math.max(d,250)):d=333,vt===h&&(n=!1),ie=!0,Ne("mainScrollAnimStart"),nt("mainScroll",bt.x,u,d,i.easing.cubic.out,ze,(function(){tt(),ie=!1,vt=-1,(n||vt!==h)&&o.updateCurrItem(),Ne("mainScrollAnimComplete")})),n&&o.updateCurrItem(!0),n},Yt=function(e){return 1/te*e*y},Gt=function(){var e=b,t=We(),n=Ve();b<t?e=t:b>n&&(e=n);var r,a=1,s=le;return se&&!W&&!ce&&b<t?(o.close(),!0):(se&&(r=function(e){Te((a-s)*e+s)}),o.zoomTo(e,0,200,i.easing.cubic.out,r),!0)};Ce("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,i){j=e+t,M=e+n,N=e+r,S=i?e+i:""};(_=P.pointerEvent)&&P.touch&&(P.touch=!1),_?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):P.touch?(e("touch","start","move","end","cancel"),A=!0):e("mouse","down","move","up"),v=M+" "+N+" "+S,g=j,_&&!A&&(A=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=A,m[j]=Pt,m[M]=Ft,m[N]=qt,S&&(m[S]=m[N]),P.touch&&(g+=" mousedown",v+=" mousemove mouseup",m.mousedown=m[j],m.mousemove=m[M],m.mouseup=m[N]),A||(l.allowPanToNext=!1)}}});var Zt,Xt,Qt,Kt,$t,Jt,en=function(t,n,r,a){var s;Zt&&clearTimeout(Zt),Kt=!0,Qt=!0,t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(h);var c=r?l.hideAnimationDuration:l.showAnimationDuration,d=function(){Je("initialZoom"),r?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Te(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),Ne("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Kt=!1};if(!c||!s||void 0===s.x)return Ne("initialZoom"+(r?"Out":"In")),b=t.initialZoomLevel,Re(fe,t.initialPosition),Ae(),e.style.opacity=r?0:1,Te(1),void(c?setTimeout((function(){d()}),c):d());!function(){var n=u,a=!o.currItem.src||o.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(b=s.w/t.w,fe.x=s.x,fe.y=s.y-L,o[a?"template":"bg"].style.opacity=.001,Ae()),et("initialZoom"),r&&!n&&i.removeClass(e,"pswp--animated-in"),a&&(r?i[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){i.addClass(e,"pswp--animate_opacity")}),30)),Zt=setTimeout((function(){if(Ne("initialZoom"+(r?"Out":"In")),r){var o=s.w/t.w,l={x:fe.x,y:fe.y},u=b,h=le,p=function(t){1===t?(b=o,fe.x=s.x,fe.y=s.y-B):(b=(o-u)*t+u,fe.x=(s.x-l.x)*t+l.x,fe.y=(s.y-B-l.y)*t+l.y),Ae(),a?e.style.opacity=1-t:Te(h-t*h)};n?nt("initialZoom",0,1,c,i.easing.cubic.out,p,d):(p(1),Zt=setTimeout(d,c+20))}else b=t.initialZoomLevel,Re(fe,t.initialPosition),Ae(),Te(1),a?e.style.opacity=1:Te(1),Zt=setTimeout(d,c+20)}),r?25:90)}()},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},sn=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Ne("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var i=tn.x/e.w,o=tn.y/e.h;e.fitRatio=i<o?i:o;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return an(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},ln=function(e,t,n,r,i,a){t.loadError||r&&(t.imageAppended=!0,un(t,r,t===o.currItem&&Oe),n.appendChild(r),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},dn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},un=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),i=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=i+"px"),t.style.width=r+"px",t.style.height=i+"px"}},hn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&ln(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Ce("Controller",{publicMethods:{lazyLoadItem:function(e){e=Ee(e);var t=$t(e);t&&(!t.loaded&&!t.loading||O)&&(Ne("gettingData",e,t),t.src&&cn(t))},initController:function(){i.extend(l,rn,!0),o.items=Xt=n,$t=o.getItemAt,Jt=l.getNumItemsFn,l.loop,Jt()<3&&(l.loop=!1),Me("beforeChange",(function(e){var t,n=l.preload,r=null===e||e>=0,i=Math.min(n[0],Jt()),a=Math.min(n[1],Jt());for(t=1;t<=(r?a:i);t++)o.lazyLoadItem(h+t);for(t=1;t<=(r?i:a);t++)o.lazyLoadItem(h-t)})),Me("initialLayout",(function(){o.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(h)})),Me("mainScrollAnimComplete",hn),Me("initialZoomInEnd",hn),Me("destroy",(function(){for(var e,t=0;t<Xt.length;t++)(e=Xt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==Xt[e]&&Xt[e]},allowProgressiveImg:function(){return l.forceProgressiveLoading||!A||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Ee(t));var n=o.getItemAt(e.index);n&&(n.container=null);var r,a=o.getItemAt(t);if(a){Ne("gettingData",t,a),e.index=t,e.item=a;var s=a.container=i.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),dn(a),sn(a,ve),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((r=i.createEl("pswp__img","img")).style.opacity=1,r.src=a.src,un(a,r),ln(t,a,s,r,!0));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(dn(n,!0))return n.loadComplete=n.img=null,sn(n,ve),Ie(n),void(e.index===h&&o.updateCurrZoomItem());n.imageAppended?!Kt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):P.transform&&(ie||Kt)?nn.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):ln(t,n,s,n.img,ie||Kt,!0)}n.loadComplete=null,n.img=null,Ne("imageLoadComplete",t,n)}},i.features.transform){var d="pswp__img pswp__img--placeholder";d+=a.msrc?"":" pswp__img--placeholder--blank";var u=i.createEl(d,a.msrc?"img":"");a.msrc&&(u.src=a.msrc),un(a,u),s.appendChild(u),a.placeholder=u}a.loading||cn(a),o.allowProgressiveImg()&&(!Qt&&P.transform?nn.push({item:a,baseDiv:s,img:a.img,index:t,holder:e}):ln(t,a,s,a.img,!0,!0))}Qt||t!==h?Ie(a):(re=s.style,en(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(s)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var pn,fn,vn={},gn=function(e,t,n){var r=document.createEvent("CustomEvent"),i={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,i),e.target.dispatchEvent(r)};Ce("Tap",{publicMethods:{initTap:function(){Me("firstTouchStart",o.onTapStart),Me("touchRelease",o.onTapRelease),Me("destroy",(function(){vn={},pn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(pn),pn=null)},onTapRelease:function(e,t){if(t&&!Q&&!Z&&!$e){var n=t;if(pn&&(clearTimeout(pn),pn=null,xt(n,vn)))return void Ne("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||i.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);Re(vn,n),pn=setTimeout((function(){gn(e,t),pn=null}),300)}}}}),Ce("DesktopZoom",{publicMethods:{initDesktopZoom:function(){R||(A?Me("mouseUsed",(function(){o.setupDesktopZoom()})):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){fn={};var n="wheel mousewheel DOMMouseScroll";Me("bindEvents",(function(){i.bind(e,n,o.handleMouseWheel)})),Me("unbindEvents",(function(){fn&&i.unbind(e,n,o.handleMouseWheel)})),o.mouseZoomedIn=!1;var r,a=function(){o.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),b<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){r&&(i.removeClass(e,"pswp--dragging"),r=!1)};Me("resize",a),Me("afterChange",a),Me("pointerDown",(function(){o.mouseZoomedIn&&(r=!0,i.addClass(e,"pswp--dragging"))})),Me("pointerUp",s),t||a()},handleMouseWheel:function(e){if(b<=o.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||$e||G?e.preventDefault():T&&Math.abs(e.deltaY)>2&&(u=!0,o.close())),!0;if(e.stopPropagation(),fn.x=0,"deltaX"in e)1===e.deltaMode?(fn.x=18*e.deltaX,fn.y=18*e.deltaY):(fn.x=e.deltaX,fn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(fn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?fn.y=-.16*e.wheelDeltaY:fn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;fn.y=e.detail}Ue(b,!0);var t=fe.x-fn.x,n=fe.y-fn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ve.x/2+me.x,y:ve.y/2+me.y};var n=l.getDoubleTapZoom(!0,o.currItem),r=b===n;o.mouseZoomedIn=!r,o.zoomTo(r?o.currItem.initialZoomLevel:n,t,333),i[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,bn,yn,wn,kn,xn,On,Cn,En,jn,Mn,Nn,Sn={history:!0,galleryUID:1},Tn=function(){return Mn.hash.substring(1)},_n=function(){mn&&clearTimeout(mn),yn&&clearTimeout(yn)},An=function(){var e=Tn(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var i=r[n].split("=");i.length<2||(t[i[0]]=i[1])}if(l.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<Xt.length;n++)if(Xt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},In=function e(){if(yn&&clearTimeout(yn),$e||G)yn=setTimeout(e,500);else{wn?clearTimeout(bn):wn=!0;var t=h+1,n=$t(h);n.hasOwnProperty("pid")&&(t=n.pid);var r=On+"&gid="+l.galleryUID+"&pid="+t;Cn||-1===Mn.hash.indexOf(r)&&(jn=!0);var i=Mn.href.split("#")[0]+"#"+r;Nn?"#"+r!==window.location.hash&&history[Cn?"replaceState":"pushState"]("",document.title,i):Cn?Mn.replace(i):Mn.hash=r,Cn=!0,bn=setTimeout((function(){wn=!1}),60)}};Ce("History",{publicMethods:{initHistory:function(){if(i.extend(l,Sn,!0),l.history){Mn=window.location,jn=!1,En=!1,Cn=!1,On=Tn(),Nn="pushState"in history,On.indexOf("gid=")>-1&&(On=(On=On.split("&gid=")[0]).split("?gid=")[0]),Me("afterChange",o.updateURL),Me("unbindEvents",(function(){i.unbind(window,"hashchange",o.onHashChange)}));var e=function(){xn=!0,En||(jn?history.back():On?Mn.hash=On:Nn?history.pushState("",document.title,Mn.pathname+Mn.search):Mn.hash=""),_n()};Me("unbindEvents",(function(){u&&e()})),Me("destroy",(function(){xn||e()})),Me("firstUpdate",(function(){h=An().pid}));var t=On.indexOf("pid=");t>-1&&"&"===(On=On.substring(0,t)).slice(-1)&&(On=On.slice(0,-1)),setTimeout((function(){c&&i.bind(window,"hashchange",o.onHashChange)}),40)}},onHashChange:function(){if(Tn()===On)return En=!0,void o.close();wn||(kn=!0,o.goTo(An().pid),kn=!1)},updateURL:function(){_n(),kn||(Cn?mn=setTimeout(In,800):In())}}}),i.extend(o,rt)};return e},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)},2699:function(e,t,n){var r,i;void 0===(i="function"===typeof(r=function(){"use strict";return function(e,t){var n,r,i,o,a,s,l,c,d,u,h,p,f,v,g,m,b,y,w=this,k=!1,x=!0,O=!0,C={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},E=function(e){if(m)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!d&&z();for(var n,r,i=(e.target||e.srcElement).getAttribute("class")||"",o=0;o<U.length;o++)(n=U[o]).onTap&&i.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),m=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){m=!1}),a)}},j=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},M=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},N=function(){var e=1===g.getNumItemsFn();e!==v&&(M(r,"ui--one-slide",e),v=e)},S=function(){M(l,"share-modal--hidden",O)},T=function(){return(O=!O)?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout((function(){O&&S()}),300)):(S(),setTimeout((function(){O||t.addClass(l,"pswp__share-modal--fade-in")}),30)),O||A(),!1},_=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),O||T(),!1))},A=function(){for(var e,t,n,r,i="",o=0;o<g.shareButtons.length;o++)e=g.shareButtons[o],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),r=g.getTextForShare(e),i+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(i=g.parseShareButtonOut(e,i));l.children[0].innerHTML=i,l.children[0].onclick=_},I=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},D=0,z=function(){clearTimeout(y),D=0,d&&w.setIdle(!1)},L=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(y),y=setTimeout((function(){w.setIdle(!0)}),g.timeToIdleOutside))},R=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},B=function(){g.preloaderEl&&(P(!0),u("beforeChange",(function(){clearTimeout(f),f=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&P(!1):P(!0)}),g.loadingIndicatorDelay)})),u("imageLoadComplete",(function(t,n){e.currItem===n&&P(!0)})))},P=function(e){p!==e&&(M(h,"preloader--active",!e),p=e)},F=function(e){var n=e.vGap;if(j()){var a=g.barsSize;if(g.captionEl&&"auto"===a.bottom)if(o||((o=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(o,i),t.addClass(r,"pswp__ui--fit")),g.addCaptionHTMLFn(e,o,!0)){var s=o.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},H=function(){g.timeToIdle&&u("mouseUsed",(function(){t.bind(document,"mousemove",z),t.bind(document,"mouseout",L),b=setInterval((function(){2===++D&&w.setIdle(!0)}),g.timeToIdle/2)}))},q=function(){var e;u("onVerticalDrag",(function(e){x&&e<.95?w.hideControls():!x&&e>=.95&&w.showControls()})),u("onPinchClose",(function(t){x&&t<.9?(w.hideControls(),e=!0):e&&!x&&t>.9&&w.showControls()})),u("zoomGestureEnded",(function(){(e=!1)&&!x&&w.showControls()}))},U=[{name:"caption",option:"captionEl",onInit:function(e){i=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){T()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){T()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){h=e}}],W=function(){var e,n,i,o=function(r){if(r)for(var o=r.length,a=0;a<o;a++){e=r[a],n=e.className;for(var s=0;s<U.length;s++)i=U[s],n.indexOf("pswp__"+i.name)>-1&&(g[i.option]?(t.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&o(a.children)};w.init=function(){t.extend(e.options,C,!0),g=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),u=e.listen,q(),u("beforeChange",w.update),u("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)})),u("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),u("bindEvents",(function(){t.bind(r,"pswpTap click",E),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),u("unbindEvents",(function(){O||T(),b&&clearInterval(b),t.unbind(document,"mouseout",L),t.unbind(document,"mousemove",z),t.unbind(r,"pswpTap click",E),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)})),u("destroy",(function(){g.captionEl&&(o&&r.removeChild(o),t.removeClass(i,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),g.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),u("initialZoomIn",(function(){g.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),u("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),u("parseVerticalMargin",F),W(),g.shareEl&&s&&l&&(O=!0),N(),H(),R(),B()},w.setIdle=function(e){d=e,M(r,"ui--idle",e)},w.update=function(){x&&e.currItem?(w.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,i),M(i,"caption--empty",!e.currItem.title)),k=!0):k=!1,O||T(),N()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){g.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!m)if(n.detail&&"mouse"===n.detail.pointerType){if(I(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(x?w.hideControls():w.showControls()),g.tapToClose&&(t.hasClass(r,"pswp__img")||I(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;M(r,"ui--over-close",I(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),x=!1},w.showControls=function(){x=!0,k||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})?r.call(t,n,t,e):r)||(e.exports=i)},2700:function(e,t,n){},2705:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).mergeLeval=2,e.tagName="span",e.style={"background-color":"@var0"},e.variable={"@var0":{required:!0,value:"@color"}},e}return Object(i.a)(n,[{key:"schema",value:function(){var e=Object(o.a)(Object(a.a)(n.prototype),"schema",this).call(this);return e.attributes.style.background="@color",e}},{key:"conversion",value:function(){var e=this;return[{from:function(t,n){return t===e.tagName&&!!n.background},to:function(e,t,n){var r=Object(c.a)("<".concat(e," />")),i=t.background;return delete t.background,t["background-color"]=i,r.css(t),Object.keys(n).forEach((function(e){r.attributes(e,n[e])})),r}}]}},{key:"isTrigger",value:function(e,t){return void 0===t||e!==t}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"backcolor"}}]),n}(c.t);t.a=d},2707:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="strong",e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("emphasis")},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+b"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-weight":["bold","700"]}}},to:this.tagName},{from:"b",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"bold"}}]),n}(c.t);t.a=u},2708:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".am-engine code, .am-engine-view code {\n    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n    font-size: inherit;\n    background-color: rgba(0, 0, 0, 0.06);\n    padding: 0 2px;\n    border-radius: 6px;\n    line-height: inherit;\n    word-wrap: break-word;\n    text-indent: 0;\n}");var d="parse:html",u="markdown-it",h=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="code",e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("backticks")},e.parseHtml=function(t){t.find(e.tagName).css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px","border-radius":"6px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;e.on(d,this.parseHtml),Object(c.X)(e)&&e.on(u,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+e"}},{key:"destroy",value:function(){var e=this.editor;e.off(d,this.parseHtml),e.off(u,this.markdownIt)}}],[{key:"pluginName",get:function(){return"code"}}]),n}(c.r);t.a=h},2709:function(e,t,n){},2710:function(e,t,n){},2747:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).mergeLeval=3,e.tagName="span",e.style={color:"@var0"},e.variable={"@var0":{required:!0,value:"@color"}},e}return Object(i.a)(n,[{key:"isTrigger",value:function(e,t){return void 0===t||e!==t}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"fontcolor"}}]),n}(n(2470).t);t.a=s},2749:function(e,t,n){"use strict";var r=n(1),i=n(15),o=n(16),a=n(24),s=n(116),l=n(63),c=n(19),d=n(21),u=n(2474),h=n(2475),p=n(2470),f="paste:each",v=Object(h.a)("styleName"),g=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).tagName="span",Object.defineProperty(Object(a.a)(e),v,{writable:!0,value:"font-family"}),e.style=Object(r.a)({},Object(u.a)(Object(a.a)(e),v)[v],"@var0"),e.variable={"@var0":{required:!0,value:"*"}},e.pasteEach=function(t){if(t.name===e.tagName){var n=t.css()[Object(u.a)(Object(a.a)(e),v)[v]];if(!n)return;var r=e.options.filter;if(r){var i=r(n);!1===i?t.css(Object(u.a)(Object(a.a)(e),v)[v],""):"string"===typeof i&&t.css(Object(u.a)(Object(a.a)(e),v)[v],i)}else t.css(Object(u.a)(Object(a.a)(e),v)[v],"");var o=e.editor.node;o.isMark(t)||o.unwrap(t)}},e}return Object(o.a)(n,[{key:"init",value:function(){Object(s.a)(Object(l.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(p.X)(e)&&e.on(f,this.pasteEach)}},{key:"isTrigger",value:function(e){return!this.queryState()||!!e}},{key:"execute",value:function(e){var t=this.editor;if(Object(p.X)(t)){var n=t.change,r=t.mark,i=Object(p.a)("<".concat(this.tagName," />")),o=this.queryState();if(!e||o&&e===o[0])o&&(this.setStyle(i,o[0]),r.unwrap(i));else{if(this.setStyle(i,e),!this.followStyle&&n.range.get().collapsed)return;r.wrap(i)}}}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"destroy",value:function(){var e=this.editor;Object(p.X)(e)&&e.off(f,this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontfamily"}}]),n}(p.t);t.a=g},2750:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(i.apply(null,n));else if("object"===o)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}},2751:function(e,t,n){"use strict";n(2487),n(2752)},2752:function(e,t,n){},2753:function(e,t,n){"use strict";n(2487),n(2754)},2754:function(e,t,n){},2756:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(24),a=n(116),s=n(63),l=n(19),c=n(21),d=n(2474),u=n(2475),h=n(2470),p="paste:each",f=Object(u.a)("styleName"),v=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).mergeLeval=4,e.tagName="span",e.style={"font-size":"@var0"},e.variable={"@var0":{required:!0,value:/[\d\.]+(pt|px)$/}},Object.defineProperty(Object(o.a)(e),f,{writable:!0,value:"font-size"}),e.defaultSize=e.options.defaultSize||e.editor.container.css("font-size")||"14px",e.pasteEach=function(t){if(t.name===e.tagName){var n=t.css(Object(d.a)(Object(o.a)(e),f)[f]);if(!n)return;var r=e.convertToPX(n);if(n.endsWith("pt")&&t.css(Object(d.a)(Object(o.a)(e),f)[f],r),r!==e.defaultSize){var i=e.options.filter;if(i){var a=i(r);!1===a?t.css(Object(d.a)(Object(o.a)(e),f)[f],""):"string"===typeof a&&t.css(Object(d.a)(Object(o.a)(e),f)[f],a)}else t.css(Object(d.a)(Object(o.a)(e),f)[f],"");var s=e.editor.node;s.isMark(t)||s.unwrap(t)}}},e}return Object(i.a)(n,[{key:"init",value:function(){Object(a.a)(Object(s.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(h.X)(e)&&e.on(p,this.pasteEach),this.options.defaultSize&&e.container.css("font-size",this.defaultSize)}},{key:"isTrigger",value:function(e){return e!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultSize)}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"convertToPX",value:function(e){var t=/([\d\.]+)(pt|px)$/i.exec(e);return t&&"pt"===t[2]?String(Math.round(96*parseInt(t[1],10)/72))+"px":e}},{key:"destroy",value:function(){var e=this.editor;Object(h.X)(e)&&e.off(p,this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontsize"}}]),n}(h.t);t.a=v},2763:function(e,t,n){"use strict";var r=n(1),i=n(15),o=n(16),a=n(19),s=n(21),l=n(2470),c="text-indent",d="keydown:backspace",u="keydown:tab",h="keydown:shift-tab",p="paste:each",f=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).onBackspace=function(t){var n=e.editor;if(Object(l.X)(n)){var r=n.change,i=n.list,o=n.node,a=n.block,s=r.range.get(),c=a.closest(s.startNode);if(o.isBlock(c)){var d=c.parent(),u=r.blocks;if(d&&o.isBlock(d)&&(u=u.filter((function(e){return!e.equal(d)}))),"li"===c.name){if(s.collapsed&&!i.isFirst(s))return;if(!s.collapsed)return}else{if((s.collapsed&&a.isLastOffset(s,"end")||!a.isFirstOffset(s,"start"))&&!o.isEmptyWidthChild(c)||u.length>1)return;if(!s.collapsed)return}return e.queryState()?(t.preventDefault(),n.command.execute(e.constructor.pluginName,"out"),!1):void 0}}},e.onTab=function(t){var n=e.editor;if(Object(l.X)(n)){var r=n.change,i=n.list,o=n.block,a=r.range.get();return a.collapsed&&i.isFirst(a)?(t.preventDefault(),n.command.execute(e.constructor.pluginName,"in"),!1):!a.collapsed||o.isFirstOffset(a,"start")?(t.preventDefault(),n.command.execute(e.constructor.pluginName,"in",!0),!1):void 0}},e.onShiftTab=function(t){var n=e.editor;if(Object(l.X)(n))return t.preventDefault(),n.command.execute(e.constructor.pluginName,"out"),!1},e.pasteEach=function(t){var n=e.editor;if(t.isElement()&&!t.isCard()&&n.node.isBlock(t)){var r=t.css()[c];if(r&&r.endsWith("pt")){var i=e.convertToPX(r);if(i){var o=e.options.maxPadding||50,a=Object(l.hb)(i),s=t.width();s=0===s?n.root.width():s;var d=t.css("font-size");(d=!d||d.endsWith("em")?n.root.css("font-size"):d).endsWith("em")&&(d=Object(l.a)(document.body).css("font-size")),d.endsWith("px")||(d="16px");var u=s>0?s/Object(l.hb)(d):o;(a=Math.min(i.endsWith("px")?a/Object(l.hb)(d):a,o,u))<=0?t.css(c,""):t.css(c,Object(l.J)(a>0?a:0,"em"))}}}},e}return Object(o.a)(n,[{key:"init",value:function(){var e=this.editor;e.schema.add(this.schema()),this.conversion().forEach((function(t){var n=t.from,r=t.to;e.conversion.add(n,r)})),e.on(d,this.onBackspace),e.on(u,this.onTab),e.on(h,this.onShiftTab),Object(l.X)(e)&&e.on(p,this.pasteEach)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in",n=this.editor;if(Object(l.X)(n)){var r=n.change,i=n.list,o=n.block;i.split();var a=r.range.get(),s=o.findBlocks(a);if(s){var c=this.options.maxPadding||50;s.forEach((function(n){e.addPadding(n,"in"===t?2:-2,c)})),i.merge()}}}},{key:"queryState",value:function(){var e=this.editor;if(Object(l.X)(e)){var t=e.change,n=e.list,r=e.node,i=t.range.get();if(!i.startNode.inEditor())return 0;var o=e.block.closest(i.startNode);return"li"===o.name?n.getIndent(o.closest("ul,ol")):r.isRootBlock(o)||r.isNestedBlock(o)?Object(l.hb)(o.css(c)):0}}},{key:"addPadding",value:function(e,t,n){var r=this.editor,i=r.list,o=r.node;if("li"!==e.name)if(o.isList(e))i.addIndent(e,t,n);else if(o.isRootBlock(e)||o.isNestedBlock(e))if(t>0)if(Object(l.hb)(e.css(c))){var a=e.css(c),s=Object(l.hb)(a)+t,d=e.width();d=0===d?r.root.width():d;var u=e.css("font-size");(u=!u||u.endsWith("em")?r.root.css("font-size"):u).endsWith("em")&&(u=Object(l.a)(document.body).css("font-size")),u.endsWith("px")||(u="16px");var h=d>0?d/Object(l.hb)(u):n;(s=Math.min(a.endsWith("px")?s/Object(l.hb)(u):s,n,h))<=0?e.css(c,""):e.css(c,Object(l.J)(s>0?s:0,"em"))}else e.css(c,"".concat(t,"em"));else{var p=e.css(c),f=Object(l.hb)(p)+t;f<=0?e.css(c,""):e.css(c,Object(l.J)(f>0?f:0,"em"))}}},{key:"hotkey",value:function(){var e,t;return[{key:(null===(e=this.options.hotkey)||void 0===e?void 0:e.in)||"mod+]",args:"in"},{key:(null===(t=this.options.hotkey)||void 0===t?void 0:t.out)||"mod+[",args:"out"}]}},{key:"schema",value:function(){return{type:"block",attributes:{style:Object(r.a)({},c,"@length")}}}},{key:"conversion",value:function(){var e=this;return[{from:function(e,t,n){return!!t["padding-left"]||!!n[c]},to:function(t,n,r){var i=Object(l.a)("<".concat(t," />")),o=n["padding-left"]||r[c];if(o.endsWith("pt")&&(o=e.convertToPX(o)),o.endsWith("px")){var a=n["font-size"];(a=!a||a.endsWith("em")?e.editor.root.css("font-size"):a).endsWith("em")&&(a=Object(l.a)(document.body).css("font-size")),a.endsWith("px")||(a="16px");var s=Object(l.hb)(o)/Object(l.hb)(a);n[c]="".concat(s,"em")}else o.endsWith("em")&&(n[c]=o);return delete n["padding-left"],delete r[c],i.css(n),Object.keys(r).forEach((function(e){i.attributes(e,r[e])})),i}}]}},{key:"convertToPX",value:function(e){var t=/([\d\.]+)(pt|px)$/i.exec(e);return t&&"pt"===t[2]?String(Math.round(96*parseInt(t[1],10)/72))+"px":e}},{key:"destroy",value:function(){var e=this.editor;e.off(d,this.onBackspace),e.off(u,this.onTab),e.off(h,this.onShiftTab),Object(l.X)(e)&&e.off(p,this.pasteEach)}}],[{key:"pluginName",get:function(){return"indent"}}]),n}(l.v);t.a=f},2765:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="em",e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("emphasis")},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+i"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-style":"italic"}}},to:this.tagName},{from:"i",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"italic"}}]),n}(c.t);t.a=u},2767:function(e,t,n){"use strict";var r=n(1),i=n(15),o=n(16),a=n(24),s=n(19),l=n(21),c=n(2474),d=n(2475),u=n(2470),h="paste:each",p=Object(d.a)("styleName"),f=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object.defineProperty(Object(a.a)(e),p,{writable:!0,value:"line-height"}),e.pasteEach=function(t){var n=e.editor;if(!t.isCard()&&n.node.isBlock(t)){var r=t.css(Object(c.a)(Object(a.a)(e),p)[p]);if(!r)return;var i=e.convertToPX(r);r.endsWith("pt")&&t.css(Object(c.a)(Object(a.a)(e),p)[p],i);var o=e.options.filter;if(o){var s=o(i);!1===s?t.css(Object(c.a)(Object(a.a)(e),p)[p],""):"string"===typeof s&&t.css(Object(c.a)(Object(a.a)(e),p)[p],s)}else t.css(Object(c.a)(Object(a.a)(e),p)[p],"");var l=n.node;l.isBlock(t)||l.unwrap(t)}},e}return Object(o.a)(n,[{key:"init",value:function(){var e=this.editor;e.schema.add(this.schema()),Object(u.X)(e)&&e.on(h,this.pasteEach)}},{key:"execute",value:function(e){var t=this,n=this.editor;if(Object(u.X)(n)){"default"===e&&(e="");var r=n.change,i=n.block,o=r.range.get(),a=i.findBlocks(o);a&&a.forEach((function(n){t.addLineHeight(n,e)}))}}},{key:"queryState",value:function(){var e=this,t=this.editor;if(Object(u.X)(t)){var n=t.change,r=t.node;if(!n.range.get().startNode.inEditor())return["default"];var i=n.blocks,o=[];return i.forEach((function(t){if(r.isNestedBlock(t)){var n,i=(null===(n=t.get())||void 0===n?void 0:n.style.lineHeight)||"";if(!i)return;var a=e.convertToPX(i),s=e.options.filter;if(s){var l=s(a);if(!1===l)return;"string"===typeof l?o.push(l):o.push(a)}}})),0===o.length?["default"]:o}}},{key:"addLineHeight",value:function(e,t){this.editor.node.isNestedBlock(e)&&e.css(Object(c.a)(this,p)[p],t||"")}},{key:"schema",value:function(){return{type:"block",attributes:{style:Object(r.a)({},Object(c.a)(this,p)[p],"@length")}}}},{key:"convertToPX",value:function(e){var t=/([\d\.]+)(pt|px)$/i.exec(e);return t&&"pt"===t[2]?String(Math.round(96*parseInt(t[1],10)/72))+"px":e}},{key:"destroy",value:function(){this.editor.off(h,this.pasteEach)}}],[{key:"pluginName",get:function(){return"line-height"}}]),n}(u.v);t.a=f},2771:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".am-engine mark,\r\n.am-engine-view mark {\r\n    padding: 0;\r\n    background: #ff0;\r\n}");var d="markdown-it",u=function(e){Object(s.a)(u,e);var t=Object(l.a)(u);function u(){var e;Object(r.a)(this,u);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="mark",e.markdownIt=function(t){!1!==e.options.markdown&&(t.use(n(2772)),t.enable("mark"))},e}return Object(i.a)(u,[{key:"init",value:function(){Object(o.a)(Object(a.a)(u.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"mark"}}]),u}(c.t);t.a=u},2772:function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n,r,i,o,a,s=[],l=t.length;for(n=0;n<l;n++)61===(i=t[n]).marker&&-1!==i.end&&(o=t[i.end],(a=e.tokens[i.token]).type="mark_open",a.tag="mark",a.nesting=1,a.markup="==",a.content="",(a=e.tokens[o.token]).type="mark_close",a.tag="mark",a.nesting=-1,a.markup="==",a.content="","text"===e.tokens[o.token-1].type&&"="===e.tokens[o.token-1].content&&s.push(o.token-1));for(;s.length;){for(r=(n=s.pop())+1;r<e.tokens.length&&"mark_close"===e.tokens[r].type;)r++;n!==--r&&(a=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=a)}}e.inline.ruler.before("emphasis","mark",(function(e,t){var n,r,i,o,a=e.pos,s=e.src.charCodeAt(a);if(t)return!1;if(61!==s)return!1;if(i=(r=e.scanDelims(e.pos,!0)).length,o=String.fromCharCode(s),i<2)return!1;for(i%2&&(e.push("text","",0).content=o,i--),n=0;n<i;n+=2)e.push("text","",0).content=o+o,(r.can_open||r.can_close)&&e.delimiters.push({marker:s,length:0,jump:n/2,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","mark",(function(e){var n,r=e.tokens_meta,i=(e.tokens_meta||[]).length;for(t(e,e.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}))}},2774:function(e,t,n){"use strict";var r=n(1),i=n(15),o=n(16),a=n(24),s=n(116),l=n(63),c=n(19),d=n(21),u=n(2474),h=n(2475),p=n(2470),f="mark-range",v=Object(h.a)("isRevoke"),g=Object(h.a)("isPreview"),m=Object(h.a)("isApply"),b=Object(h.a)("isCreateting"),y=Object(h.a)("previewAwating"),w=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).range=void 0,e.executeBySelf=!1,e.MARK_KEY="data-mark-key",e.MARK_UUID="data-mark-uuid",e.ids={},e.m_uuid=Object(p.mb)(18,24),e.followStyle=!1,e.copyOnEnter=!1,Object.defineProperty(Object(a.a)(e),v,{writable:!0,value:!1}),Object.defineProperty(Object(a.a)(e),g,{writable:!0,value:!1}),Object.defineProperty(Object(a.a)(e),m,{writable:!0,value:!1}),Object.defineProperty(Object(a.a)(e),b,{writable:!0,value:!1}),Object.defineProperty(Object(a.a)(e),y,{writable:!0,value:void 0}),e.tagName="span",e.combineValueByWrap=!0,e.onBeforeCommandExecute=function(t){e.executeBySelf=t===f},e.onAfterCommandExecute=function(t){e.executeBySelf=!1},e.onChange=function(t){e.triggerChange("local"!==t)},e.parseValue=function(t,n){var r=t.attributes(e.MARK_KEY);r&&(n[p.m]=e.getPreviewName(r))},e.onAfterSetValue=function(){var t=e.editor;Object(p.X)(t)&&(e.range=t.change.range.get(),e.ids=e.getIds())},e.onSelectionChange=function(){if(!e.executeBySelf){var t=e.editor,n=t.container.window,r=null===n||void 0===n?void 0:n.getSelection();if(r){var i=p.y.from(t,r);if(i){if(!Object(p.a)(i.getStartOffsetNode()).inEditor(t.container)||!Object(p.a)(i.getEndOffsetNode()).inEditor(t.container))return t.trigger("".concat(f,":select"),i),void(e.range=void 0);e.triggerChange();for(var o=e.options.keys,s=0;s<o.length;s++){var l=o[s],c=e.getPreviewName(l),d=i.startNode,h=i.endNode,v=i.commonAncestorNode,g=v.parent();if(Object(u.a)(Object(a.a)(e),b)[b]&&(d.attributes(c)||h.attributes(c)||v.attributes(c)||!i.commonAncestorNode.inEditor()||(null===g||void 0===g?void 0:g.attributes(c))))return void(e.range=i)}var m=e.getSelectInfo(i,!0);t.trigger("".concat(f,":select"),i,m),e.range=i}}}},e}return Object(o.a)(n,[{key:"getIdName",value:function(e){return"data-".concat(e,"-id")}},{key:"getPreviewName",value:function(e){return"data-".concat(e,"-preview")}},{key:"init",value:function(){var e,t=this;Object(s.a)(Object(l.a)(n.prototype),"init",this).call(this);var i=[],o=(null===(e=this.options)||void 0===e?void 0:e.keys)||[];o.forEach((function(e){var n;i.push({type:"mark",attributes:(n={},Object(r.a)(n,t.getIdName(e),"*"),Object(r.a)(n,t.MARK_KEY,e),n)})}));var a=this.editor;if(a.schema.add(i),a.on("beforeCommandExecute",this.onBeforeCommandExecute),a.on("afterCommandExecute",this.onAfterCommandExecute),Object(p.X)(a)){a.on("change",this.onChange),a.on("select",this.onSelectionChange),a.on("parse:value",this.parseValue),a.on("afterSetValue",this.onAfterSetValue);var c=o.map((function(e){return t.getPreviewName(e)}));a.history.onFilter((function(e){return!(!("od"in e)&&!("oi"in e)||!c.includes(e.p[e.p.length-1].toString()))})),a.history.onSelf((function(){if(Object(u.a)(t,g)[g]&&!Object(u.a)(t,y)[y])return new Promise((function(e){Object(u.a)(t,y)[y]=e,Object(u.a)(t,g)[g]=!1}));Object(u.a)(t,v)[v]&&Object(u.a)(t,y)[y]?Object(u.a)(t,y)[y](!1):Object(u.a)(t,m)[m]&&Object(u.a)(t,y)[y]&&Object(u.a)(t,y)[y](!0)}))}else if(Object(p.fb)(a)){var d;null===(d=a.container.document)||void 0===d||d.addEventListener("selectionchange",this.onSelectionChange)}}},{key:"schema",value:function(){var e,t=this;return((null===(e=this.options)||void 0===e?void 0:e.keys)||[]).map((function(e){var n;return{name:"span",type:"mark",attributes:(n={},Object(r.a)(n,t.MARK_KEY,{required:!0,value:e}),Object(r.a)(n,t.MARK_UUID,"*"),Object(r.a)(n,t.getIdName(e),"*"),n)}}))}},{key:"getSelectInfo",value:function(e,t){var n,r,i,o=this,a=this.editor,s=a.card,l=e.cloneRange().shrinkToElementNode().shrinkToTextNode(),c=l.startNode,d=l.startOffset,u=l.endNode,h=l.endOffset,f=l.collapsed,v=c.closest("[".concat(this.MARK_KEY,"]")),g=c.isElement()?c.children().eq(d):c;if(c.type===Node.ELEMENT_NODE&&(null===g||void 0===g?void 0:g.isBlockCard()))v=g;else if(null===(i=r=s.find(0==v.length&&g?g:v))||void 0===i?void 0:i.queryMarks){var m=r.queryMarks(!1).find((function(e){return!!e.attributes(o.MARK_KEY)}));m&&(v=m)}else r&&!r.isEditable&&r.root.isBlockCard()&&(v=r.root);var b=v.attributes(this.MARK_KEY),y=v.attributes(this.getIdName(b)),w=y||void 0;if(!f&&y&&!v.isBlockCard()&&!(null===(n=r)||void 0===n?void 0:n.queryMarks)){var k=u.closest("[".concat(this.MARK_KEY,"]")),x=k.attributes(this.MARK_KEY),O=u.children().eq(h);u.type===Node.ELEMENT_NODE&&(null===O||void 0===O?void 0:O.isBlockCard())&&(k=O);var C=k.attributes(this.getIdName(b));if(b===x&&y===C){if(w=y,t){var E,j,M,N,S=null===(E=p.y.from(a))||void 0===E?void 0:E.cloneRange();null===S||void 0===S||S.setStart(v,0),null===S||void 0===S||S.setEnd(k,k.isText()?k.text().length:null!==(j=null===(M=k.get())||void 0===M?void 0:M.childNodes.length)&&void 0!==j?j:0),(null===S||void 0===S||null===(N=S.shrinkToElementNode().shrinkToTextNode())||void 0===N?void 0:N.equal(l))||(w=void 0)}}else w=void 0}return w?{key:b,id:w.split(",")[0]}:void 0}},{key:"findElements",value:function(e,t){var n=this,r=this.editor.container,i=[];return r.find("[".concat(this.getIdName(e),"]")).each((function(r){var o=Object(p.a)(r);o.attributes(n.getIdName(e)).trim().split(",").indexOf(t)>-1&&i.push(o)})),i}},{key:"preview",value:function(e,t){var n=this,r=this.editor;if(t)this.findElements(e,t).forEach((function(t){t.attributes(p.m,n.getPreviewName(e)),t.attributes(n.getPreviewName(e),"true")}));else if(this.range){this.startMutation();var i=r.block,o=r.node,a=r.card,s=this.range;if(s.collapsed){var l=i.closest(s.startNode);if(!o.isBlock(l))return;s.select(l,!0);var c=window.getSelection();null===c||void 0===c||c.removeAllRanges(),null===c||void 0===c||c.addRange(s.toRange())}var d=this.getSelectInfo(s,!0);if(d&&d.key===e)return void r.trigger("".concat(f,":select"),s,d);r.mark.wrap("<".concat(this.tagName," ").concat(this.MARK_KEY,'="').concat(e,'" ').concat(p.m,'="').concat(this.getPreviewName(e),'" ').concat(this.MARK_UUID,'="').concat(this.m_uuid,'" ').concat(this.getPreviewName(e),'="true" />'),s);var h="";return s.getSubRanges(!0,!1).forEach((function(t){var r=a.find(t.startNode);if(r&&!r.executeMark){if(h+="[card:".concat(r.constructor.cardName,",").concat(r.id,"]"),r.root.attributes(n.getIdName(e)))return;r.root.attributes(n.MARK_KEY,e),r.root.attributes(n.getPreviewName(e),"true")}else h+=t.getText()})),Object(u.a)(this,b)[b]=!0,Object(u.a)(this,g)[g]=!0,h}}},{key:"apply",value:function(e,t){var n=this,r=this.editor;r.container.find("[".concat(this.getPreviewName(e),"]")).each((function(i){var o=Object(p.a)(i),a=o.attributes(n.getIdName(e)).trim().split(","),s=[];if(""===a[0]&&a.splice(0,1),a.length>0){for(var l=0;l<a.length;l++){var c=a[l],d=i.parentElement;if(d&&a.indexOf(t)<0&&s.indexOf(t)<0){var u,h=n.findElements(e,c),f=null===(u=p.y.from(r))||void 0===u?void 0:u.cloneRange();if(!f||0===h.length)continue;var v=f.select(h[0],!0).collapse(!0).cloneRange(),g=f.select(h[h.length-1],!0).collapse(!1).cloneRange();if(f.setStart(v.startContainer,v.startOffset),f.setEnd(g.endContainer,g.endOffset),f.comparePoint(d,o.index())>=0){s.push(t),s=s.concat(a.slice(l));break}}s.push(c)}s.length===a.length&&a.indexOf(t)<0&&s.push(t)}else s.push(t);o.attributes(p.m,n.getPreviewName(e)),o.attributes(n.getIdName(e),s.join(",")),o.removeAttributes(n.getPreviewName(e));var m=o.closest(p.p);if(m.length>0){var b=r.card.find(m,!0);b&&b.onChange&&b.onChange("local",b.root)}var y=r.card.find(o);y&&y.executeMark&&y.executeMark(o.clone(),!0)})),Object(u.a)(this,m)[m]=!0,Object(u.a)(this,b)[b]=!1}},{key:"revoke",value:function(e,t){var n=this,r=this.editor,i=r.node,o=[];o=t?this.findElements(e,t):r.container.find("[".concat(this.getPreviewName(e),"]")).toArray();var a=[];o.forEach((function(t){var r=Object(p.a)(t),o=r.attributes(n.getIdName(e)).trim().split(",");""===o[0]&&o.splice(0,1),0===o.length?r.isCard()?(r.removeAttributes(n.MARK_KEY),r.removeAttributes(n.getPreviewName(e))):i.unwrap(r):(r.removeAttributes(n.getPreviewName(e)),a.push(r))})),!t&&o.length>0&&Object(p.X)(r)&&(Object(u.a)(this,v)[v]=!0,Object(u.a)(this,b)[b]=!1,a.length>0&&r.mark.mergeMarks(a))}},{key:"remove",value:function(e,t){var n=this,r=this.editor,i=r.node;this.findElements(e,t).forEach((function(o){var a=Object(p.a)(o),s=a.attributes(n.getIdName(e)).trim().split(",");""===s[0]&&s.splice(0,1);var l=a.closest(p.p);if(1===s.length&&s.find((function(e){return e===t})))a.isCard()?(a.removeAttributes(n.MARK_KEY),a.removeAttributes(n.getIdName(e)),a.removeAttributes(n.getPreviewName(e))):i.unwrap(a);else{a.removeAttributes(n.getPreviewName(e));var c=s.findIndex((function(e){return e===t}));s.splice(c,1),a.attributes(n.getIdName(e),s.join(","))}if(l.length>0){var d=r.card.find(l,!0);d&&d.onChange&&d.onChange("local",d.root)}}))}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"execute",value:function(){}},{key:"startMutation",value:function(){var e=this.editor;Object(p.X)(e)&&e.ot.isStopped()&&e.ot.startMutation()}},{key:"stopMutation",value:function(){var e=this.editor;setTimeout((function(){Object(p.X)(e)&&e.readonly&&!e.ot.isStopped()&&e.ot.stopMutation()}),10)}},{key:"action",value:function(e,t){var n=arguments.length<=2?void 0:arguments[2];switch(t){case"preview":return this.preview(e,n);case"apply":if(!n)return;this.apply(e,n),this.stopMutation();break;case"revoke":this.revoke(e,n),this.stopMutation();break;case"find":return n?this.findElements(e,n):[];case"remove":if(!n)return;this.remove(e,n),this.stopMutation();break;case"filter":return this.filterValue(e,n);case"wrap":var r=arguments.length<=3?void 0:arguments[3];return this.wrapFromPath(e,n,r)}}},{key:"getIds",value:function(){var e=this,t={};return this.editor.container.find("[".concat(this.MARK_KEY,"]")).each((function(n){var r=Object(p.a)(n),i=r.attributes(e.MARK_KEY);r.attributes(e.getIdName(i)).split(",").forEach((function(e){e&&(t[i]||(t[i]=[]),t[i].indexOf(e)<0&&t[i].push(e))}))})),t}},{key:"triggerChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.editor,r={},i={},o=this.getIds();if(this.options.keys.forEach((function(t){var n=e.ids[t]||[],a=o[t]||[];a.forEach((function(e){n.indexOf(e)<0&&(r[t]||(r[t]=[]),r[t].push(e))})),n.forEach((function(e){a.indexOf(e)<0&&(i[t]||(i[t]=[]),i[t].push(e))}))})),t){var a=n.container.find("[".concat(this.MARK_UUID,'="').concat(this.m_uuid,'"]'));a.each((function(t,n){var r=a.eq(n),i=(null===r||void 0===r?void 0:r.attributes())||{},o=i[e.MARK_KEY],s=e.getPreviewName(o);!o||i[e.getIdName(o)]||i[s]||r.attributes(s,"true")}))}this.ids=o,n.trigger("".concat(f,":change"),r,i,o)}},{key:"filterValue",value:function(e,t){var n,r=this,i=this.editor,o=i.container.clone(!t);o.css({position:"fixed",top:"-999px",width:i.container.css("width")||"100%",clip:"rect(0, 0, 0, 0)"}),Object(p.a)(document.body).append(o);var a=new p.I(o,i.options),s=a.node,l=a.card;t&&o.html(Object(p.kb)(t)),l.render(o,void 0,!1);var c=null===(n=o.window)||void 0===n?void 0:n.getSelection(),d=(c&&p.y.from(a,c)||p.y.create(a)).cloneRange(),u=new p.u(o,a,void 0,!1),h=a.schema,f=a.conversion;if(!d)return o.remove(),{value:t||u.toValue(h,f),paths:[]};d.select(o,!0).collapse(!0);var v=[];o.traverse((function(t){var n=t.attributes(r.getIdName(e));if(n){var i=d.cloneRange();if(t.isCard()){var a=l.find(t);if(a&&a.executeMark){var c=r.getIdName(e),u=a.root.find("[".concat(c,'="').concat(n,'"]'));a.executeMark(u.clone(),!1)}else t.removeAttributes(r.getIdName(e));i.select(t)}else{i.select(t,!0);var h=i.createSelection();s.unwrap(t),h.move()}var p=i.shrinkToElementNode().shrinkToTextNode().toPath(void 0,o);v.unshift({id:n.split(","),path:p?[p.start.path,p.end.path]:[]})}}),!1,"editable");var g=o.find(p.d);return g.each((function(e,t){var n=g.eq(t);if(null===n||void 0===n?void 0:n.isEditableCard()){var r=a.card.find(n);if(r){var i=r.getValue();r.setValue(i||{})}}})),t=u.toValue(h,f),a.destroy(),o.remove(),{value:t,paths:v}}},{key:"wrapFromPath",value:function(e,t,n){var r,i=this,o=this.editor,a=o.container.clone(!n);n&&(n=p.C.removeTags(n)),a.css({position:"fixed",top:"-999px",width:o.container.css("width")||"100%",clip:"rect(0, 0, 0, 0)"}),Object(p.a)(document.body).append(a);var s=new p.I(a,o.options),l=s.card;n&&a.html(Object(p.kb)(n)),l.render(a,void 0,!1);var c=null===(r=a.window)||void 0===r?void 0:r.getSelection(),d=(c&&p.y.from(s,c)||p.y.create(s)).cloneRange(),u=new p.u(a,s,void 0,!1),h=s.schema,f=s.conversion;if(!d)return a.remove(),n||u.toValue(h,f);d.select(a,!0).collapse(!0),(t||[]).forEach((function(t){var n=t.id,r=t.path,o=p.y.fromPath(s,{start:{path:r[0],id:"",bi:-1},end:{path:r[1],id:"",bi:-1}},void 0,a);o.findElements().forEach((function(t){var r=Object(p.a)(t);if(r.isCard()){var o=l.find(r);o&&o.executeMark?o.executeMark(Object(p.a)("<".concat(i.tagName," ").concat(i.MARK_KEY,'="').concat(e,'" ').concat(i.getIdName(e),'="').concat(n.join(","),'" />')),!0):r.attributes(i.getIdName(e),n.join(","))}})),s.mark.wrap("<".concat(i.tagName," ").concat(i.MARK_KEY,'="').concat(e,'" ').concat(i.getIdName(e),'="').concat(n.join(","),'" />'),o)}));var v=a.find(p.d);return v.each((function(e,t){var n=v.eq(t);if(null===n||void 0===n?void 0:n.isEditableCard()){var r=s.card.find(n);if(r){var i=r.getValue();r.setValue(i||{})}}})),n=u.toValue(h,f),s.destroy(),a.remove(),n}},{key:"destroy",value:function(){var e=this.editor;if(e.off("beforeCommandExecute",this.onBeforeCommandExecute),e.off("afterCommandExecute",this.onAfterCommandExecute),Object(p.X)(e))e.off("change",this.onChange),e.off("select",this.onSelectionChange),e.off("parse:value",this.parseValue),e.off("afterSetValue",this.onAfterSetValue);else if(Object(p.fb)(e)){var t;null===(t=e.container.document)||void 0===t||t.removeEventListener("selectionchange",this.onSelectionChange)}}}],[{key:"pluginName",get:function(){return f}}]),n}(p.t);t.a=w},2775:function(e,t,n){"use strict";(function(e){var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=a(n(2776)),i=a(n(0)),o=a(n(79));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),t(n,[{key:"render",value:function(){var e=this.props,t=function(e,t){var n=/\$\$[\s\S]+?\$\$|\\\[[\s\S]+?\\\]|\\\([\s\S]+?\\\)|\$[^\$\\]*(?:\\.[^\$\\]*)*\$/g,o=/\$\$[\s\S]+?\$\$|\\\[[\s\S]+?\\\]/g,a=function(e,n){var i=void 0;try{i=r.default.renderToString(e,"block"===n?Object.assign({displayMode:!0},t):t)}catch(o){return console.error("couldn`t convert string",e),e}return i},s=[],l=e.match(n),c=e.split(n);return l?c.forEach((function(e,t){var n,r;s.push({string:e,type:"text"}),l[t]&&s.push({string:(r=l[t],"$"===r[0]&&"$"!==r[1]?r.slice(1,-1):r.slice(2,-2)),type:(n=l[t],n.match(o)?"block":"inline")})})):s.push({string:e,type:"text"}),s.map((function(e){return"text"===e.type?e.string:i.default.createElement("span",{dangerouslySetInnerHTML:{__html:a(e.string,e.type)}})}))}(e.children,{displayMode:e.displayMode,leqno:e.leqno,fleqn:e.fleqn,throwOnError:e.throwOnError,errorColor:e.errorColor,macros:e.macros,minRuleThickness:e.minRuleThickness,colorIsTextColor:e.colorIsTextColor,maxSize:e.maxSize,maxExpand:e.maxExpand,strict:e.strict,trust:e.trust});return t.unshift(null),t.unshift("span"),i.default.createElement.apply(null,t)}}]),n}(i.default.Component);s.propTypes={children:o.default.string,displayMode:o.default.bool,leqno:o.default.bool,fleqn:o.default.bool,throwOnError:o.default.bool,errorColor:o.default.string,macros:o.default.object,minRuleThickness:o.default.number,colorIsTextColor:o.default.bool,maxSize:o.default.number,maxExpand:o.default.number,strict:o.default.oneOfType([o.default.bool,o.default.string,o.default.func]),trust:o.default.oneOfType([o.default.bool,o.default.func])},s.defaultProps={children:"",displayMode:!1,output:"htmlAndMathml",leqno:!1,fleqn:!1,throwOnError:!0,errorColor:"#cc0000",macros:{},minRuleThickness:0,colorIsTextColor:!1,strict:"warn",trust:!1},e&&e.exports?e.exports=s:window.Latex=s}).call(this,n(117)(e))},2776:function(e,t,n){var r;"undefined"!==typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t),n(0);var r=function(){function e(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}return e.range=function(t,n){return n?t&&t.loc&&n.loc&&t.loc.lexer===n.loc.lexer?new e(t.loc.lexer,t.loc.start,n.loc.end):null:t&&t.loc},e}(),i=function(){function e(e,t){this.text=void 0,this.loc=void 0,this.text=e,this.loc=t}return e.prototype.range=function(t,n){return new e(n,r.range(this,t))},e}(),o=function e(t,n){this.position=void 0;var r,i="KaTeX parse error: "+t,o=n&&n.loc;if(o&&o.start<=o.end){var a=o.lexer.input;r=o.start;var s=o.end;r===a.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var l=a.slice(r,s).replace(/[^]/g,"$&\u0332");i+=(r>15?"\u2026"+a.slice(r-15,r):a.slice(0,r))+l+(s+15<a.length?a.slice(s,s+15)+"\u2026":a.slice(s))}var c=new Error(i);return c.name="ParseError",c.__proto__=e.prototype,c.position=r,c};o.prototype.__proto__=Error.prototype;var a=o,s=/([A-Z])/g,l={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},c=/[&><"']/g,d=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},u={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(c,(function(e){return l[e]}))},hyphenate:function(e){return e.replace(s,"-$1").toLowerCase()},getBaseElem:d,isCharacterBox:function(e){var t=d(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type}},h=function(){function e(e){this.displayMode=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.allowedProtocols=void 0,e=e||{},this.displayMode=u.deflt(e.displayMode,!1),this.leqno=u.deflt(e.leqno,!1),this.fleqn=u.deflt(e.fleqn,!1),this.throwOnError=u.deflt(e.throwOnError,!0),this.errorColor=u.deflt(e.errorColor,"#cc0000"),this.macros=e.macros||{},this.colorIsTextColor=u.deflt(e.colorIsTextColor,!1),this.strict=u.deflt(e.strict,"warn"),this.maxSize=Math.max(0,u.deflt(e.maxSize,1/0)),this.maxExpand=Math.max(0,u.deflt(e.maxExpand,1e3)),this.allowedProtocols=u.deflt(e.allowedProtocols,["http","https","mailto","_relative"])}var t=e.prototype;return t.reportNonstrict=function(e,t,n){var r=this.strict;if("function"===typeof r&&(r=r(e,t,n)),r&&"ignore"!==r){if(!0===r||"error"===r)throw new a("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",n);"warn"===r?"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+t+" ["+e+"]")}},t.useStrictBehavior=function(e,t,n){var r=this.strict;if("function"===typeof r)try{r=r(e,t,n)}catch(i){r="error"}return!(!r||"ignore"===r)&&(!0===r||"error"===r||("warn"===r?("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),!1):("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+t+" ["+e+"]"),!1)))},e}(),p=function(){function e(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}var t=e.prototype;return t.sup=function(){return f[v[this.id]]},t.sub=function(){return f[g[this.id]]},t.fracNum=function(){return f[m[this.id]]},t.fracDen=function(){return f[b[this.id]]},t.cramp=function(){return f[y[this.id]]},t.text=function(){return f[w[this.id]]},t.isTight=function(){return this.size>=2},e}(),f=[new p(0,0,!1),new p(1,0,!0),new p(2,1,!1),new p(3,1,!0),new p(4,2,!1),new p(5,2,!0),new p(6,3,!1),new p(7,3,!0)],v=[4,5,4,5,6,7,6,7],g=[5,5,5,5,7,7,7,7],m=[2,3,4,5,6,7,6,7],b=[3,3,5,5,7,7,7,7],y=[1,1,3,3,5,5,7,7],w=[0,1,2,3,2,3,2,3],k={DISPLAY:f[0],TEXT:f[2],SCRIPT:f[4],SCRIPTSCRIPT:f[6]},x=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],O=[];function C(e){for(var t=0;t<O.length;t+=2)if(e>=O[t]&&e<=O[t+1])return!0;return!1}x.forEach((function(e){return e.blocks.forEach((function(e){return O.push.apply(O,e)}))}));var E={path:{sqrtMain:"M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,\n-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,\n-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,\n35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,\n-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467\ns-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422\ns-65,47,-65,47z M834 80H400000v40H845z",sqrtSize1:"M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,\n158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067\nc4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,\n175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71\nc-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,\n-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26\ns76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z",sqrtSize2:"M1001,80H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,\n572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,\n-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39\nc-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60\ns208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,\n-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5c4,-6.7,10,-10,18,-10z\nM1001 80H400000v40H1013z",sqrtSize3:"M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,\n-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,\n25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,\n-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079\nc169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z",sqrtSize4:"M473,2793c339.3,-1799.3,509.3,-2700,510,-2702\nc3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,\n-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,\n-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,\n21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,\n77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606z\nM1001 80H400000v40H1017z",doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"}},j=function(){function e(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var t=e.prototype;return t.hasClass=function(e){return u.contains(this.classes,e)},t.toNode=function(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e},t.toMarkup=function(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e},t.toText=function(){var e=function(e){return e.toText()};return this.children.map(e).join("")},e}(),M=function(e){return e.filter((function(e){return e})).join(" ")},N=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},S=function(e){var t=document.createElement(e);for(var n in t.className=M(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},T=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+u.escape(M(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=u.hyphenate(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+u.escape(n)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(t+=" "+i+'="'+u.escape(this.attributes[i])+'"');t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">"},_=function(){function e(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,N.call(this,e,n,r),this.children=t||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return u.contains(this.classes,e)},t.toNode=function(){return S.call(this,"span")},t.toMarkup=function(){return T.call(this,"span")},e}(),A=function(){function e(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,N.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return u.contains(this.classes,e)},t.toNode=function(){return S.call(this,"a")},t.toMarkup=function(){return T.call(this,"a")},e}(),I={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"},D=function(){function e(e,t,n,r,i,o,a,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=o||0,this.classes=a||[],this.style=s||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<x.length;t++)for(var n=x[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=I[this.text])}var t=e.prototype;return t.hasClass=function(e){return u.contains(this.classes,e)},t.toNode=function(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((t=t||document.createElement("span")).className=M(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e},t.toMarkup=function(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=u.escape(M(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=u.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+u.escape(n)+'"');var i=u.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i},e}(),z=function(){function e(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e},t.toMarkup=function(){var e="<svg";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>"},e}(),L=function(){function e(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",E.path[this.pathName]),e},t.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+E.path[this.pathName]+"'/>"},e}(),R=function(){function e(e){this.attributes=void 0,this.attributes=e||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e},t.toMarkup=function(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>"},e}(),B={"AMS-Regular":{65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473]},"Fraktur-Regular":{33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],163:[0,.69444,0,0,.86853],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],163:[0,.69444,0,0,.76909],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],305:[0,.43056,0,.02778,.32246],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],567:[.19444,.43056,0,.08334,.38403],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333]},"Math-Italic":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"Math-Regular":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"SansSerif-Bold":{33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212]},"Size1-Regular":{40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},P={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2]},F={"\xc5":"A","\xc7":"C","\xd0":"D","\xde":"o","\xe5":"a","\xe7":"c","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function H(e,t,n){if(!B[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=B[t][r];if(!i&&e[0]in F&&(r=F[e[0]].charCodeAt(0),i=B[t][r]),i||"text"!==n||C(r)&&(i=B[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var q={},U={bin:1,close:1,inner:1,open:1,punct:1,rel:1},W={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},V={math:{},text:{}},Y=V;function G(e,t,n,r,i,o){V[e][i]={font:t,group:n,replace:r},o&&r&&(V[e][r]=V[e][i])}var Z="math",X="text",Q="main",K="ams",$="accent-token",J="bin",ee="close",te="inner",ne="mathord",re="op-token",ie="open",oe="punct",ae="rel",se="spacing",le="textord";G(Z,Q,ae,"\u2261","\\equiv",!0),G(Z,Q,ae,"\u227a","\\prec",!0),G(Z,Q,ae,"\u227b","\\succ",!0),G(Z,Q,ae,"\u223c","\\sim",!0),G(Z,Q,ae,"\u22a5","\\perp"),G(Z,Q,ae,"\u2aaf","\\preceq",!0),G(Z,Q,ae,"\u2ab0","\\succeq",!0),G(Z,Q,ae,"\u2243","\\simeq",!0),G(Z,Q,ae,"\u2223","\\mid",!0),G(Z,Q,ae,"\u226a","\\ll",!0),G(Z,Q,ae,"\u226b","\\gg",!0),G(Z,Q,ae,"\u224d","\\asymp",!0),G(Z,Q,ae,"\u2225","\\parallel"),G(Z,Q,ae,"\u22c8","\\bowtie",!0),G(Z,Q,ae,"\u2323","\\smile",!0),G(Z,Q,ae,"\u2291","\\sqsubseteq",!0),G(Z,Q,ae,"\u2292","\\sqsupseteq",!0),G(Z,Q,ae,"\u2250","\\doteq",!0),G(Z,Q,ae,"\u2322","\\frown",!0),G(Z,Q,ae,"\u220b","\\ni",!0),G(Z,Q,ae,"\u221d","\\propto",!0),G(Z,Q,ae,"\u22a2","\\vdash",!0),G(Z,Q,ae,"\u22a3","\\dashv",!0),G(Z,Q,ae,"\u220b","\\owns"),G(Z,Q,oe,".","\\ldotp"),G(Z,Q,oe,"\u22c5","\\cdotp"),G(Z,Q,le,"#","\\#"),G(X,Q,le,"#","\\#"),G(Z,Q,le,"&","\\&"),G(X,Q,le,"&","\\&"),G(Z,Q,le,"\u2135","\\aleph",!0),G(Z,Q,le,"\u2200","\\forall",!0),G(Z,Q,le,"\u210f","\\hbar",!0),G(Z,Q,le,"\u2203","\\exists",!0),G(Z,Q,le,"\u2207","\\nabla",!0),G(Z,Q,le,"\u266d","\\flat",!0),G(Z,Q,le,"\u2113","\\ell",!0),G(Z,Q,le,"\u266e","\\natural",!0),G(Z,Q,le,"\u2663","\\clubsuit",!0),G(Z,Q,le,"\u2118","\\wp",!0),G(Z,Q,le,"\u266f","\\sharp",!0),G(Z,Q,le,"\u2662","\\diamondsuit",!0),G(Z,Q,le,"\u211c","\\Re",!0),G(Z,Q,le,"\u2661","\\heartsuit",!0),G(Z,Q,le,"\u2111","\\Im",!0),G(Z,Q,le,"\u2660","\\spadesuit",!0),G(X,Q,le,"\xa7","\\S",!0),G(X,Q,le,"\xb6","\\P",!0),G(Z,Q,le,"\u2020","\\dag"),G(X,Q,le,"\u2020","\\dag"),G(X,Q,le,"\u2020","\\textdagger"),G(Z,Q,le,"\u2021","\\ddag"),G(X,Q,le,"\u2021","\\ddag"),G(X,Q,le,"\u2021","\\textdaggerdbl"),G(Z,Q,ee,"\u23b1","\\rmoustache",!0),G(Z,Q,ie,"\u23b0","\\lmoustache",!0),G(Z,Q,ee,"\u27ef","\\rgroup",!0),G(Z,Q,ie,"\u27ee","\\lgroup",!0),G(Z,Q,J,"\u2213","\\mp",!0),G(Z,Q,J,"\u2296","\\ominus",!0),G(Z,Q,J,"\u228e","\\uplus",!0),G(Z,Q,J,"\u2293","\\sqcap",!0),G(Z,Q,J,"\u2217","\\ast"),G(Z,Q,J,"\u2294","\\sqcup",!0),G(Z,Q,J,"\u25ef","\\bigcirc"),G(Z,Q,J,"\u2219","\\bullet"),G(Z,Q,J,"\u2021","\\ddagger"),G(Z,Q,J,"\u2240","\\wr",!0),G(Z,Q,J,"\u2a3f","\\amalg"),G(Z,Q,J,"&","\\And"),G(Z,Q,ae,"\u27f5","\\longleftarrow",!0),G(Z,Q,ae,"\u21d0","\\Leftarrow",!0),G(Z,Q,ae,"\u27f8","\\Longleftarrow",!0),G(Z,Q,ae,"\u27f6","\\longrightarrow",!0),G(Z,Q,ae,"\u21d2","\\Rightarrow",!0),G(Z,Q,ae,"\u27f9","\\Longrightarrow",!0),G(Z,Q,ae,"\u2194","\\leftrightarrow",!0),G(Z,Q,ae,"\u27f7","\\longleftrightarrow",!0),G(Z,Q,ae,"\u21d4","\\Leftrightarrow",!0),G(Z,Q,ae,"\u27fa","\\Longleftrightarrow",!0),G(Z,Q,ae,"\u21a6","\\mapsto",!0),G(Z,Q,ae,"\u27fc","\\longmapsto",!0),G(Z,Q,ae,"\u2197","\\nearrow",!0),G(Z,Q,ae,"\u21a9","\\hookleftarrow",!0),G(Z,Q,ae,"\u21aa","\\hookrightarrow",!0),G(Z,Q,ae,"\u2198","\\searrow",!0),G(Z,Q,ae,"\u21bc","\\leftharpoonup",!0),G(Z,Q,ae,"\u21c0","\\rightharpoonup",!0),G(Z,Q,ae,"\u2199","\\swarrow",!0),G(Z,Q,ae,"\u21bd","\\leftharpoondown",!0),G(Z,Q,ae,"\u21c1","\\rightharpoondown",!0),G(Z,Q,ae,"\u2196","\\nwarrow",!0),G(Z,Q,ae,"\u21cc","\\rightleftharpoons",!0),G(Z,K,ae,"\u226e","\\nless",!0),G(Z,K,ae,"\ue010","\\@nleqslant"),G(Z,K,ae,"\ue011","\\@nleqq"),G(Z,K,ae,"\u2a87","\\lneq",!0),G(Z,K,ae,"\u2268","\\lneqq",!0),G(Z,K,ae,"\ue00c","\\@lvertneqq"),G(Z,K,ae,"\u22e6","\\lnsim",!0),G(Z,K,ae,"\u2a89","\\lnapprox",!0),G(Z,K,ae,"\u2280","\\nprec",!0),G(Z,K,ae,"\u22e0","\\npreceq",!0),G(Z,K,ae,"\u22e8","\\precnsim",!0),G(Z,K,ae,"\u2ab9","\\precnapprox",!0),G(Z,K,ae,"\u2241","\\nsim",!0),G(Z,K,ae,"\ue006","\\@nshortmid"),G(Z,K,ae,"\u2224","\\nmid",!0),G(Z,K,ae,"\u22ac","\\nvdash",!0),G(Z,K,ae,"\u22ad","\\nvDash",!0),G(Z,K,ae,"\u22ea","\\ntriangleleft"),G(Z,K,ae,"\u22ec","\\ntrianglelefteq",!0),G(Z,K,ae,"\u228a","\\subsetneq",!0),G(Z,K,ae,"\ue01a","\\@varsubsetneq"),G(Z,K,ae,"\u2acb","\\subsetneqq",!0),G(Z,K,ae,"\ue017","\\@varsubsetneqq"),G(Z,K,ae,"\u226f","\\ngtr",!0),G(Z,K,ae,"\ue00f","\\@ngeqslant"),G(Z,K,ae,"\ue00e","\\@ngeqq"),G(Z,K,ae,"\u2a88","\\gneq",!0),G(Z,K,ae,"\u2269","\\gneqq",!0),G(Z,K,ae,"\ue00d","\\@gvertneqq"),G(Z,K,ae,"\u22e7","\\gnsim",!0),G(Z,K,ae,"\u2a8a","\\gnapprox",!0),G(Z,K,ae,"\u2281","\\nsucc",!0),G(Z,K,ae,"\u22e1","\\nsucceq",!0),G(Z,K,ae,"\u22e9","\\succnsim",!0),G(Z,K,ae,"\u2aba","\\succnapprox",!0),G(Z,K,ae,"\u2246","\\ncong",!0),G(Z,K,ae,"\ue007","\\@nshortparallel"),G(Z,K,ae,"\u2226","\\nparallel",!0),G(Z,K,ae,"\u22af","\\nVDash",!0),G(Z,K,ae,"\u22eb","\\ntriangleright"),G(Z,K,ae,"\u22ed","\\ntrianglerighteq",!0),G(Z,K,ae,"\ue018","\\@nsupseteqq"),G(Z,K,ae,"\u228b","\\supsetneq",!0),G(Z,K,ae,"\ue01b","\\@varsupsetneq"),G(Z,K,ae,"\u2acc","\\supsetneqq",!0),G(Z,K,ae,"\ue019","\\@varsupsetneqq"),G(Z,K,ae,"\u22ae","\\nVdash",!0),G(Z,K,ae,"\u2ab5","\\precneqq",!0),G(Z,K,ae,"\u2ab6","\\succneqq",!0),G(Z,K,ae,"\ue016","\\@nsubseteqq"),G(Z,K,J,"\u22b4","\\unlhd"),G(Z,K,J,"\u22b5","\\unrhd"),G(Z,K,ae,"\u219a","\\nleftarrow",!0),G(Z,K,ae,"\u219b","\\nrightarrow",!0),G(Z,K,ae,"\u21cd","\\nLeftarrow",!0),G(Z,K,ae,"\u21cf","\\nRightarrow",!0),G(Z,K,ae,"\u21ae","\\nleftrightarrow",!0),G(Z,K,ae,"\u21ce","\\nLeftrightarrow",!0),G(Z,K,ae,"\u25b3","\\vartriangle"),G(Z,K,le,"\u210f","\\hslash"),G(Z,K,le,"\u25bd","\\triangledown"),G(Z,K,le,"\u25ca","\\lozenge"),G(Z,K,le,"\u24c8","\\circledS"),G(Z,K,le,"\xae","\\circledR"),G(X,K,le,"\xae","\\circledR"),G(Z,K,le,"\u2221","\\measuredangle",!0),G(Z,K,le,"\u2204","\\nexists"),G(Z,K,le,"\u2127","\\mho"),G(Z,K,le,"\u2132","\\Finv",!0),G(Z,K,le,"\u2141","\\Game",!0),G(Z,K,le,"\u2035","\\backprime"),G(Z,K,le,"\u25b2","\\blacktriangle"),G(Z,K,le,"\u25bc","\\blacktriangledown"),G(Z,K,le,"\u25a0","\\blacksquare"),G(Z,K,le,"\u29eb","\\blacklozenge"),G(Z,K,le,"\u2605","\\bigstar"),G(Z,K,le,"\u2222","\\sphericalangle",!0),G(Z,K,le,"\u2201","\\complement",!0),G(Z,K,le,"\xf0","\\eth",!0),G(Z,K,le,"\u2571","\\diagup"),G(Z,K,le,"\u2572","\\diagdown"),G(Z,K,le,"\u25a1","\\square"),G(Z,K,le,"\u25a1","\\Box"),G(Z,K,le,"\u25ca","\\Diamond"),G(Z,K,le,"\xa5","\\yen",!0),G(X,K,le,"\xa5","\\yen",!0),G(Z,K,le,"\u2713","\\checkmark",!0),G(X,K,le,"\u2713","\\checkmark"),G(Z,K,le,"\u2136","\\beth",!0),G(Z,K,le,"\u2138","\\daleth",!0),G(Z,K,le,"\u2137","\\gimel",!0),G(Z,K,le,"\u03dd","\\digamma"),G(Z,K,le,"\u03f0","\\varkappa"),G(Z,K,ie,"\u250c","\\ulcorner",!0),G(Z,K,ee,"\u2510","\\urcorner",!0),G(Z,K,ie,"\u2514","\\llcorner",!0),G(Z,K,ee,"\u2518","\\lrcorner",!0),G(Z,K,ae,"\u2266","\\leqq",!0),G(Z,K,ae,"\u2a7d","\\leqslant",!0),G(Z,K,ae,"\u2a95","\\eqslantless",!0),G(Z,K,ae,"\u2272","\\lesssim",!0),G(Z,K,ae,"\u2a85","\\lessapprox",!0),G(Z,K,ae,"\u224a","\\approxeq",!0),G(Z,K,J,"\u22d6","\\lessdot"),G(Z,K,ae,"\u22d8","\\lll",!0),G(Z,K,ae,"\u2276","\\lessgtr",!0),G(Z,K,ae,"\u22da","\\lesseqgtr",!0),G(Z,K,ae,"\u2a8b","\\lesseqqgtr",!0),G(Z,K,ae,"\u2251","\\doteqdot"),G(Z,K,ae,"\u2253","\\risingdotseq",!0),G(Z,K,ae,"\u2252","\\fallingdotseq",!0),G(Z,K,ae,"\u223d","\\backsim",!0),G(Z,K,ae,"\u22cd","\\backsimeq",!0),G(Z,K,ae,"\u2ac5","\\subseteqq",!0),G(Z,K,ae,"\u22d0","\\Subset",!0),G(Z,K,ae,"\u228f","\\sqsubset",!0),G(Z,K,ae,"\u227c","\\preccurlyeq",!0),G(Z,K,ae,"\u22de","\\curlyeqprec",!0),G(Z,K,ae,"\u227e","\\precsim",!0),G(Z,K,ae,"\u2ab7","\\precapprox",!0),G(Z,K,ae,"\u22b2","\\vartriangleleft"),G(Z,K,ae,"\u22b4","\\trianglelefteq"),G(Z,K,ae,"\u22a8","\\vDash",!0),G(Z,K,ae,"\u22aa","\\Vvdash",!0),G(Z,K,ae,"\u2323","\\smallsmile"),G(Z,K,ae,"\u2322","\\smallfrown"),G(Z,K,ae,"\u224f","\\bumpeq",!0),G(Z,K,ae,"\u224e","\\Bumpeq",!0),G(Z,K,ae,"\u2267","\\geqq",!0),G(Z,K,ae,"\u2a7e","\\geqslant",!0),G(Z,K,ae,"\u2a96","\\eqslantgtr",!0),G(Z,K,ae,"\u2273","\\gtrsim",!0),G(Z,K,ae,"\u2a86","\\gtrapprox",!0),G(Z,K,J,"\u22d7","\\gtrdot"),G(Z,K,ae,"\u22d9","\\ggg",!0),G(Z,K,ae,"\u2277","\\gtrless",!0),G(Z,K,ae,"\u22db","\\gtreqless",!0),G(Z,K,ae,"\u2a8c","\\gtreqqless",!0),G(Z,K,ae,"\u2256","\\eqcirc",!0),G(Z,K,ae,"\u2257","\\circeq",!0),G(Z,K,ae,"\u225c","\\triangleq",!0),G(Z,K,ae,"\u223c","\\thicksim"),G(Z,K,ae,"\u2248","\\thickapprox"),G(Z,K,ae,"\u2ac6","\\supseteqq",!0),G(Z,K,ae,"\u22d1","\\Supset",!0),G(Z,K,ae,"\u2290","\\sqsupset",!0),G(Z,K,ae,"\u227d","\\succcurlyeq",!0),G(Z,K,ae,"\u22df","\\curlyeqsucc",!0),G(Z,K,ae,"\u227f","\\succsim",!0),G(Z,K,ae,"\u2ab8","\\succapprox",!0),G(Z,K,ae,"\u22b3","\\vartriangleright"),G(Z,K,ae,"\u22b5","\\trianglerighteq"),G(Z,K,ae,"\u22a9","\\Vdash",!0),G(Z,K,ae,"\u2223","\\shortmid"),G(Z,K,ae,"\u2225","\\shortparallel"),G(Z,K,ae,"\u226c","\\between",!0),G(Z,K,ae,"\u22d4","\\pitchfork",!0),G(Z,K,ae,"\u221d","\\varpropto"),G(Z,K,ae,"\u25c0","\\blacktriangleleft"),G(Z,K,ae,"\u2234","\\therefore",!0),G(Z,K,ae,"\u220d","\\backepsilon"),G(Z,K,ae,"\u25b6","\\blacktriangleright"),G(Z,K,ae,"\u2235","\\because",!0),G(Z,K,ae,"\u22d8","\\llless"),G(Z,K,ae,"\u22d9","\\gggtr"),G(Z,K,J,"\u22b2","\\lhd"),G(Z,K,J,"\u22b3","\\rhd"),G(Z,K,ae,"\u2242","\\eqsim",!0),G(Z,Q,ae,"\u22c8","\\Join"),G(Z,K,ae,"\u2251","\\Doteq",!0),G(Z,K,J,"\u2214","\\dotplus",!0),G(Z,K,J,"\u2216","\\smallsetminus"),G(Z,K,J,"\u22d2","\\Cap",!0),G(Z,K,J,"\u22d3","\\Cup",!0),G(Z,K,J,"\u2a5e","\\doublebarwedge",!0),G(Z,K,J,"\u229f","\\boxminus",!0),G(Z,K,J,"\u229e","\\boxplus",!0),G(Z,K,J,"\u22c7","\\divideontimes",!0),G(Z,K,J,"\u22c9","\\ltimes",!0),G(Z,K,J,"\u22ca","\\rtimes",!0),G(Z,K,J,"\u22cb","\\leftthreetimes",!0),G(Z,K,J,"\u22cc","\\rightthreetimes",!0),G(Z,K,J,"\u22cf","\\curlywedge",!0),G(Z,K,J,"\u22ce","\\curlyvee",!0),G(Z,K,J,"\u229d","\\circleddash",!0),G(Z,K,J,"\u229b","\\circledast",!0),G(Z,K,J,"\u22c5","\\centerdot"),G(Z,K,J,"\u22ba","\\intercal",!0),G(Z,K,J,"\u22d2","\\doublecap"),G(Z,K,J,"\u22d3","\\doublecup"),G(Z,K,J,"\u22a0","\\boxtimes",!0),G(Z,K,ae,"\u21e2","\\dashrightarrow",!0),G(Z,K,ae,"\u21e0","\\dashleftarrow",!0),G(Z,K,ae,"\u21c7","\\leftleftarrows",!0),G(Z,K,ae,"\u21c6","\\leftrightarrows",!0),G(Z,K,ae,"\u21da","\\Lleftarrow",!0),G(Z,K,ae,"\u219e","\\twoheadleftarrow",!0),G(Z,K,ae,"\u21a2","\\leftarrowtail",!0),G(Z,K,ae,"\u21ab","\\looparrowleft",!0),G(Z,K,ae,"\u21cb","\\leftrightharpoons",!0),G(Z,K,ae,"\u21b6","\\curvearrowleft",!0),G(Z,K,ae,"\u21ba","\\circlearrowleft",!0),G(Z,K,ae,"\u21b0","\\Lsh",!0),G(Z,K,ae,"\u21c8","\\upuparrows",!0),G(Z,K,ae,"\u21bf","\\upharpoonleft",!0),G(Z,K,ae,"\u21c3","\\downharpoonleft",!0),G(Z,K,ae,"\u22b8","\\multimap",!0),G(Z,K,ae,"\u21ad","\\leftrightsquigarrow",!0),G(Z,K,ae,"\u21c9","\\rightrightarrows",!0),G(Z,K,ae,"\u21c4","\\rightleftarrows",!0),G(Z,K,ae,"\u21a0","\\twoheadrightarrow",!0),G(Z,K,ae,"\u21a3","\\rightarrowtail",!0),G(Z,K,ae,"\u21ac","\\looparrowright",!0),G(Z,K,ae,"\u21b7","\\curvearrowright",!0),G(Z,K,ae,"\u21bb","\\circlearrowright",!0),G(Z,K,ae,"\u21b1","\\Rsh",!0),G(Z,K,ae,"\u21ca","\\downdownarrows",!0),G(Z,K,ae,"\u21be","\\upharpoonright",!0),G(Z,K,ae,"\u21c2","\\downharpoonright",!0),G(Z,K,ae,"\u21dd","\\rightsquigarrow",!0),G(Z,K,ae,"\u21dd","\\leadsto"),G(Z,K,ae,"\u21db","\\Rrightarrow",!0),G(Z,K,ae,"\u21be","\\restriction"),G(Z,Q,le,"\u2018","`"),G(Z,Q,le,"$","\\$"),G(X,Q,le,"$","\\$"),G(X,Q,le,"$","\\textdollar"),G(Z,Q,le,"%","\\%"),G(X,Q,le,"%","\\%"),G(Z,Q,le,"_","\\_"),G(X,Q,le,"_","\\_"),G(X,Q,le,"_","\\textunderscore"),G(Z,Q,le,"\u2220","\\angle",!0),G(Z,Q,le,"\u221e","\\infty",!0),G(Z,Q,le,"\u2032","\\prime"),G(Z,Q,le,"\u25b3","\\triangle"),G(Z,Q,le,"\u0393","\\Gamma",!0),G(Z,Q,le,"\u0394","\\Delta",!0),G(Z,Q,le,"\u0398","\\Theta",!0),G(Z,Q,le,"\u039b","\\Lambda",!0),G(Z,Q,le,"\u039e","\\Xi",!0),G(Z,Q,le,"\u03a0","\\Pi",!0),G(Z,Q,le,"\u03a3","\\Sigma",!0),G(Z,Q,le,"\u03a5","\\Upsilon",!0),G(Z,Q,le,"\u03a6","\\Phi",!0),G(Z,Q,le,"\u03a8","\\Psi",!0),G(Z,Q,le,"\u03a9","\\Omega",!0),G(Z,Q,le,"A","\u0391"),G(Z,Q,le,"B","\u0392"),G(Z,Q,le,"E","\u0395"),G(Z,Q,le,"Z","\u0396"),G(Z,Q,le,"H","\u0397"),G(Z,Q,le,"I","\u0399"),G(Z,Q,le,"K","\u039a"),G(Z,Q,le,"M","\u039c"),G(Z,Q,le,"N","\u039d"),G(Z,Q,le,"O","\u039f"),G(Z,Q,le,"P","\u03a1"),G(Z,Q,le,"T","\u03a4"),G(Z,Q,le,"X","\u03a7"),G(Z,Q,le,"\xac","\\neg",!0),G(Z,Q,le,"\xac","\\lnot"),G(Z,Q,le,"\u22a4","\\top"),G(Z,Q,le,"\u22a5","\\bot"),G(Z,Q,le,"\u2205","\\emptyset"),G(Z,K,le,"\u2205","\\varnothing"),G(Z,Q,ne,"\u03b1","\\alpha",!0),G(Z,Q,ne,"\u03b2","\\beta",!0),G(Z,Q,ne,"\u03b3","\\gamma",!0),G(Z,Q,ne,"\u03b4","\\delta",!0),G(Z,Q,ne,"\u03f5","\\epsilon",!0),G(Z,Q,ne,"\u03b6","\\zeta",!0),G(Z,Q,ne,"\u03b7","\\eta",!0),G(Z,Q,ne,"\u03b8","\\theta",!0),G(Z,Q,ne,"\u03b9","\\iota",!0),G(Z,Q,ne,"\u03ba","\\kappa",!0),G(Z,Q,ne,"\u03bb","\\lambda",!0),G(Z,Q,ne,"\u03bc","\\mu",!0),G(Z,Q,ne,"\u03bd","\\nu",!0),G(Z,Q,ne,"\u03be","\\xi",!0),G(Z,Q,ne,"\u03bf","\\omicron",!0),G(Z,Q,ne,"\u03c0","\\pi",!0),G(Z,Q,ne,"\u03c1","\\rho",!0),G(Z,Q,ne,"\u03c3","\\sigma",!0),G(Z,Q,ne,"\u03c4","\\tau",!0),G(Z,Q,ne,"\u03c5","\\upsilon",!0),G(Z,Q,ne,"\u03d5","\\phi",!0),G(Z,Q,ne,"\u03c7","\\chi",!0),G(Z,Q,ne,"\u03c8","\\psi",!0),G(Z,Q,ne,"\u03c9","\\omega",!0),G(Z,Q,ne,"\u03b5","\\varepsilon",!0),G(Z,Q,ne,"\u03d1","\\vartheta",!0),G(Z,Q,ne,"\u03d6","\\varpi",!0),G(Z,Q,ne,"\u03f1","\\varrho",!0),G(Z,Q,ne,"\u03c2","\\varsigma",!0),G(Z,Q,ne,"\u03c6","\\varphi",!0),G(Z,Q,J,"\u2217","*"),G(Z,Q,J,"+","+"),G(Z,Q,J,"\u2212","-"),G(Z,Q,J,"\u22c5","\\cdot",!0),G(Z,Q,J,"\u2218","\\circ"),G(Z,Q,J,"\xf7","\\div",!0),G(Z,Q,J,"\xb1","\\pm",!0),G(Z,Q,J,"\xd7","\\times",!0),G(Z,Q,J,"\u2229","\\cap",!0),G(Z,Q,J,"\u222a","\\cup",!0),G(Z,Q,J,"\u2216","\\setminus"),G(Z,Q,J,"\u2227","\\land"),G(Z,Q,J,"\u2228","\\lor"),G(Z,Q,J,"\u2227","\\wedge",!0),G(Z,Q,J,"\u2228","\\vee",!0),G(Z,Q,le,"\u221a","\\surd"),G(Z,Q,ie,"(","("),G(Z,Q,ie,"[","["),G(Z,Q,ie,"\u27e8","\\langle",!0),G(Z,Q,ie,"\u2223","\\lvert"),G(Z,Q,ie,"\u2225","\\lVert"),G(Z,Q,ee,")",")"),G(Z,Q,ee,"]","]"),G(Z,Q,ee,"?","?"),G(Z,Q,ee,"!","!"),G(Z,Q,ee,"\u27e9","\\rangle",!0),G(Z,Q,ee,"\u2223","\\rvert"),G(Z,Q,ee,"\u2225","\\rVert"),G(Z,Q,ae,"=","="),G(Z,Q,ae,"<","<"),G(Z,Q,ae,">",">"),G(Z,Q,ae,":",":"),G(Z,Q,ae,"\u2248","\\approx",!0),G(Z,Q,ae,"\u2245","\\cong",!0),G(Z,Q,ae,"\u2265","\\ge"),G(Z,Q,ae,"\u2265","\\geq",!0),G(Z,Q,ae,"\u2190","\\gets"),G(Z,Q,ae,">","\\gt"),G(Z,Q,ae,"\u2208","\\in",!0),G(Z,Q,ae,"\ue020","\\@not"),G(Z,Q,ae,"\u2282","\\subset",!0),G(Z,Q,ae,"\u2283","\\supset",!0),G(Z,Q,ae,"\u2286","\\subseteq",!0),G(Z,Q,ae,"\u2287","\\supseteq",!0),G(Z,K,ae,"\u2288","\\nsubseteq",!0),G(Z,K,ae,"\u2289","\\nsupseteq",!0),G(Z,Q,ae,"\u22a8","\\models"),G(Z,Q,ae,"\u2190","\\leftarrow",!0),G(Z,Q,ae,"\u2264","\\le"),G(Z,Q,ae,"\u2264","\\leq",!0),G(Z,Q,ae,"<","\\lt"),G(Z,Q,ae,"\u2192","\\rightarrow",!0),G(Z,Q,ae,"\u2192","\\to"),G(Z,K,ae,"\u2271","\\ngeq",!0),G(Z,K,ae,"\u2270","\\nleq",!0),G(Z,Q,se,"\xa0","\\ "),G(Z,Q,se,"\xa0","~"),G(Z,Q,se,"\xa0","\\space"),G(Z,Q,se,"\xa0","\\nobreakspace"),G(X,Q,se,"\xa0","\\ "),G(X,Q,se,"\xa0","~"),G(X,Q,se,"\xa0","\\space"),G(X,Q,se,"\xa0","\\nobreakspace"),G(Z,Q,se,null,"\\nobreak"),G(Z,Q,se,null,"\\allowbreak"),G(Z,Q,oe,",",","),G(Z,Q,oe,";",";"),G(Z,K,J,"\u22bc","\\barwedge",!0),G(Z,K,J,"\u22bb","\\veebar",!0),G(Z,Q,J,"\u2299","\\odot",!0),G(Z,Q,J,"\u2295","\\oplus",!0),G(Z,Q,J,"\u2297","\\otimes",!0),G(Z,Q,le,"\u2202","\\partial",!0),G(Z,Q,J,"\u2298","\\oslash",!0),G(Z,K,J,"\u229a","\\circledcirc",!0),G(Z,K,J,"\u22a1","\\boxdot",!0),G(Z,Q,J,"\u25b3","\\bigtriangleup"),G(Z,Q,J,"\u25bd","\\bigtriangledown"),G(Z,Q,J,"\u2020","\\dagger"),G(Z,Q,J,"\u22c4","\\diamond"),G(Z,Q,J,"\u22c6","\\star"),G(Z,Q,J,"\u25c3","\\triangleleft"),G(Z,Q,J,"\u25b9","\\triangleright"),G(Z,Q,ie,"{","\\{"),G(X,Q,le,"{","\\{"),G(X,Q,le,"{","\\textbraceleft"),G(Z,Q,ee,"}","\\}"),G(X,Q,le,"}","\\}"),G(X,Q,le,"}","\\textbraceright"),G(Z,Q,ie,"{","\\lbrace"),G(Z,Q,ee,"}","\\rbrace"),G(Z,Q,ie,"[","\\lbrack"),G(X,Q,le,"[","\\lbrack"),G(Z,Q,ee,"]","\\rbrack"),G(X,Q,le,"]","\\rbrack"),G(Z,Q,ie,"(","\\lparen"),G(Z,Q,ee,")","\\rparen"),G(X,Q,le,"<","\\textless"),G(X,Q,le,">","\\textgreater"),G(Z,Q,ie,"\u230a","\\lfloor",!0),G(Z,Q,ee,"\u230b","\\rfloor",!0),G(Z,Q,ie,"\u2308","\\lceil",!0),G(Z,Q,ee,"\u2309","\\rceil",!0),G(Z,Q,le,"\\","\\backslash"),G(Z,Q,le,"\u2223","|"),G(Z,Q,le,"\u2223","\\vert"),G(X,Q,le,"|","\\textbar"),G(Z,Q,le,"\u2225","\\|"),G(Z,Q,le,"\u2225","\\Vert"),G(X,Q,le,"\u2225","\\textbardbl"),G(X,Q,le,"~","\\textasciitilde"),G(X,Q,le,"\\","\\textbackslash"),G(X,Q,le,"^","\\textasciicircum"),G(Z,Q,ae,"\u2191","\\uparrow",!0),G(Z,Q,ae,"\u21d1","\\Uparrow",!0),G(Z,Q,ae,"\u2193","\\downarrow",!0),G(Z,Q,ae,"\u21d3","\\Downarrow",!0),G(Z,Q,ae,"\u2195","\\updownarrow",!0),G(Z,Q,ae,"\u21d5","\\Updownarrow",!0),G(Z,Q,re,"\u2210","\\coprod"),G(Z,Q,re,"\u22c1","\\bigvee"),G(Z,Q,re,"\u22c0","\\bigwedge"),G(Z,Q,re,"\u2a04","\\biguplus"),G(Z,Q,re,"\u22c2","\\bigcap"),G(Z,Q,re,"\u22c3","\\bigcup"),G(Z,Q,re,"\u222b","\\int"),G(Z,Q,re,"\u222b","\\intop"),G(Z,Q,re,"\u222c","\\iint"),G(Z,Q,re,"\u222d","\\iiint"),G(Z,Q,re,"\u220f","\\prod"),G(Z,Q,re,"\u2211","\\sum"),G(Z,Q,re,"\u2a02","\\bigotimes"),G(Z,Q,re,"\u2a01","\\bigoplus"),G(Z,Q,re,"\u2a00","\\bigodot"),G(Z,Q,re,"\u222e","\\oint"),G(Z,Q,re,"\u222f","\\oiint"),G(Z,Q,re,"\u2230","\\oiiint"),G(Z,Q,re,"\u2a06","\\bigsqcup"),G(Z,Q,re,"\u222b","\\smallint"),G(X,Q,te,"\u2026","\\textellipsis"),G(Z,Q,te,"\u2026","\\mathellipsis"),G(X,Q,te,"\u2026","\\ldots",!0),G(Z,Q,te,"\u2026","\\ldots",!0),G(Z,Q,te,"\u22ef","\\@cdots",!0),G(Z,Q,te,"\u22f1","\\ddots",!0),G(Z,Q,le,"\u22ee","\\varvdots"),G(Z,Q,$,"\u02ca","\\acute"),G(Z,Q,$,"\u02cb","\\grave"),G(Z,Q,$,"\xa8","\\ddot"),G(Z,Q,$,"~","\\tilde"),G(Z,Q,$,"\u02c9","\\bar"),G(Z,Q,$,"\u02d8","\\breve"),G(Z,Q,$,"\u02c7","\\check"),G(Z,Q,$,"^","\\hat"),G(Z,Q,$,"\u20d7","\\vec"),G(Z,Q,$,"\u02d9","\\dot"),G(Z,Q,$,"\u02da","\\mathring"),G(Z,Q,ne,"\u0131","\\imath",!0),G(Z,Q,ne,"\u0237","\\jmath",!0),G(X,Q,le,"\u0131","\\i",!0),G(X,Q,le,"\u0237","\\j",!0),G(X,Q,le,"\xdf","\\ss",!0),G(X,Q,le,"\xe6","\\ae",!0),G(X,Q,le,"\xe6","\\ae",!0),G(X,Q,le,"\u0153","\\oe",!0),G(X,Q,le,"\xf8","\\o",!0),G(X,Q,le,"\xc6","\\AE",!0),G(X,Q,le,"\u0152","\\OE",!0),G(X,Q,le,"\xd8","\\O",!0),G(X,Q,$,"\u02ca","\\'"),G(X,Q,$,"\u02cb","\\`"),G(X,Q,$,"\u02c6","\\^"),G(X,Q,$,"\u02dc","\\~"),G(X,Q,$,"\u02c9","\\="),G(X,Q,$,"\u02d8","\\u"),G(X,Q,$,"\u02d9","\\."),G(X,Q,$,"\u02da","\\r"),G(X,Q,$,"\u02c7","\\v"),G(X,Q,$,"\xa8",'\\"'),G(X,Q,$,"\u02dd","\\H"),G(X,Q,$,"\u25ef","\\textcircled");var ce={"--":!0,"---":!0,"``":!0,"''":!0};G(X,Q,le,"\u2013","--"),G(X,Q,le,"\u2013","\\textendash"),G(X,Q,le,"\u2014","---"),G(X,Q,le,"\u2014","\\textemdash"),G(X,Q,le,"\u2018","`"),G(X,Q,le,"\u2018","\\textquoteleft"),G(X,Q,le,"\u2019","'"),G(X,Q,le,"\u2019","\\textquoteright"),G(X,Q,le,"\u201c","``"),G(X,Q,le,"\u201c","\\textquotedblleft"),G(X,Q,le,"\u201d","''"),G(X,Q,le,"\u201d","\\textquotedblright"),G(Z,Q,le,"\xb0","\\degree",!0),G(X,Q,le,"\xb0","\\degree"),G(X,Q,le,"\xb0","\\textdegree",!0),G(Z,Q,ne,"\xa3","\\pounds"),G(Z,Q,ne,"\xa3","\\mathsterling",!0),G(X,Q,ne,"\xa3","\\pounds"),G(X,Q,ne,"\xa3","\\textsterling",!0),G(Z,K,le,"\u2720","\\maltese"),G(X,K,le,"\u2720","\\maltese"),G(X,Q,se,"\xa0","\\ "),G(X,Q,se,"\xa0"," "),G(X,Q,se,"\xa0","~");for(var de='0123456789/@."',ue=0;ue<14;ue++){var he=de.charAt(ue);G(Z,Q,le,he,he)}for(var pe='0123456789!@*()-=+[]<>|";:?/.,',fe=0;fe<30;fe++){var ve=pe.charAt(fe);G(X,Q,le,ve,ve)}for(var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",me=0;me<52;me++){var be=ge.charAt(me);G(Z,Q,ne,be,be),G(X,Q,le,be,be)}G(Z,K,le,"C","\u2102"),G(X,K,le,"C","\u2102"),G(Z,K,le,"H","\u210d"),G(X,K,le,"H","\u210d"),G(Z,K,le,"N","\u2115"),G(X,K,le,"N","\u2115"),G(Z,K,le,"P","\u2119"),G(X,K,le,"P","\u2119"),G(Z,K,le,"Q","\u211a"),G(X,K,le,"Q","\u211a"),G(Z,K,le,"R","\u211d"),G(X,K,le,"R","\u211d"),G(Z,K,le,"Z","\u2124"),G(X,K,le,"Z","\u2124"),G(Z,Q,ne,"h","\u210e"),G(X,Q,ne,"h","\u210e");for(var ye="",we=0;we<52;we++){var ke=ge.charAt(we);G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56320+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56372+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56424+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56580+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56736+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56788+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56840+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56944+we)),G(X,Q,le,ke,ye),we<26&&(G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56632+we)),G(X,Q,le,ke,ye),G(Z,Q,ne,ke,ye=String.fromCharCode(55349,56476+we)),G(X,Q,le,ke,ye))}G(Z,Q,ne,"k",ye=String.fromCharCode(55349,56668)),G(X,Q,le,"k",ye);for(var xe=0;xe<10;xe++){var Oe=xe.toString();G(Z,Q,ne,Oe,ye=String.fromCharCode(55349,57294+xe)),G(X,Q,le,Oe,ye),G(Z,Q,ne,Oe,ye=String.fromCharCode(55349,57314+xe)),G(X,Q,le,Oe,ye),G(Z,Q,ne,Oe,ye=String.fromCharCode(55349,57324+xe)),G(X,Q,le,Oe,ye),G(Z,Q,ne,Oe,ye=String.fromCharCode(55349,57334+xe)),G(X,Q,le,Oe,ye)}for(var Ce="\xc7\xd0\xde\xe7\xfe",Ee=0;Ee<5;Ee++){var je=Ce.charAt(Ee);G(Z,Q,ne,je,je),G(X,Q,le,je,je)}G(X,Q,le,"\xf0","\xf0"),G(X,Q,le,"\u2013","\u2013"),G(X,Q,le,"\u2014","\u2014"),G(X,Q,le,"\u2018","\u2018"),G(X,Q,le,"\u2019","\u2019"),G(X,Q,le,"\u201c","\u201c"),G(X,Q,le,"\u201d","\u201d");var Me=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathdefault","textit","Math-Italic"],["mathdefault","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Ne=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Se=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Te=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],_e=function(e,t){return t.size<2?e:Se[e-1][t.size-1]},Ae=function(){function e(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||e.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Te[this.size-1],this.maxSize=t.maxSize,this._fontMetrics=void 0}var t=e.prototype;return t.extend=function(t){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new e(n)},t.havingStyle=function(e){return this.style===e?this:this.extend({style:e,size:_e(this.textSize,e)})},t.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},t.havingSize=function(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Te[e-1]})},t.havingBaseStyle=function(t){t=t||this.style.text();var n=_e(e.BASESIZE,t);return this.size===n&&this.textSize===e.BASESIZE&&this.style===t?this:this.extend({style:t,size:n})},t.havingBaseSizing=function(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})},t.withColor=function(e){return this.extend({color:e})},t.withPhantom=function(){return this.extend({phantom:!0})},t.withFont=function(e){return this.extend({font:e})},t.withTextFontFamily=function(e){return this.extend({fontFamily:e,font:""})},t.withTextFontWeight=function(e){return this.extend({fontWeight:e,font:""})},t.withTextFontShape=function(e){return this.extend({fontShape:e,font:""})},t.sizingClasses=function(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]},t.baseSizingClasses=function(){return this.size!==e.BASESIZE?["sizing","reset-size"+this.size,"size"+e.BASESIZE]:[]},t.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!q[t=e>=5?0:e>=3?1:2]){var n=q[t]={cssEmPerMu:P.quad[t]/18};for(var r in P)P.hasOwnProperty(r)&&(n[r]=P[r][t])}return q[t]}(this.size)),this._fontMetrics},t.getColor=function(){return this.phantom?"transparent":this.color},e}();Ae.BASESIZE=6;var Ie=Ae,De={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},ze={ex:!0,em:!0,mu:!0},Le=function(e,t){var n;if(e.unit in De)n=De[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{var r;if(r=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=r.fontMetrics().xHeight;else{if("em"!==e.unit)throw new a("Invalid unit: '"+e.unit+"'");n=r.fontMetrics().quad}r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Re=["\\imath","\u0131","\\jmath","\u0237","\\pounds","\\mathsterling","\\textsterling","\xa3"],Be=function(e,t,n){return Y[n][e]&&Y[n][e].replace&&(e=Y[n][e].replace),{value:e,metrics:H(e,t,n)}},Pe=function(e,t,n,r,i){var o,a=Be(e,t,n),s=a.metrics;if(e=a.value,s){var l=s.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),o=new D(e,s.height,s.depth,l,s.skew,s.width,i)}else"undefined"!==typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"'"),o=new D(e,0,0,0,0,0,i);if(r){o.maxFontSize=r.sizeMultiplier,r.style.isTight()&&o.classes.push("mtight");var c=r.getColor();c&&(o.style.color=c)}return o},Fe=function(e,t){if(M(e.classes)!==M(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;return!0},He=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>t&&(t=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},qe=function(e,t,n,r){var i=new _(e,t,n,r);return He(i),i},Ue=function(e,t,n,r){return new _(e,t,n,r)},We=function(e){var t=new j(e);return He(t),t},Ve=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Ye={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ge={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ze={fontMap:Ye,makeSymbol:Pe,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),n&&n.font&&"boldsymbol"===n.font&&Be(e,"Main-Bold",t).metrics?Pe(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===Y[t][e].font?Pe(e,"Main-Regular",t,n,r):Pe(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:qe,makeSvgSpan:Ue,makeLineSpan:function(e,t,n){var r=qe([e],[],t);return r.height=n||t.fontMetrics().defaultRuleThickness,r.style.borderBottomWidth=r.height+"em",r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new A(e,t,n,r);return He(i),i},makeFragment:We,wrapFragment:function(e,t){return e instanceof j?qe([],[e],t):e},makeVList:function(e,t){for(var n=function(e){if("individualShift"===e.positionType){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,i=r,o=1;o<t.length;o++){var a=-t[o].shift-i-t[o].elem.depth,s=a-(t[o-1].elem.height+t[o-1].elem.depth);i+=a,n.push({type:"kern",size:s}),n.push(t[o])}return{children:n,depth:r}}var l;if("top"===e.positionType){for(var c=e.positionData,d=0;d<e.children.length;d++){var u=e.children[d];c-="kern"===u.type?u.size:u.elem.height+u.elem.depth}l=c}else if("bottom"===e.positionType)l=-e.positionData;else{var h=e.children[0];if("elem"!==h.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-h.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-h.elem.depth}}return{children:e.children,depth:l}}(e),r=n.children,i=n.depth,o=0,a=0;a<r.length;a++){var s=r[a];if("elem"===s.type){var l=s.elem;o=Math.max(o,l.maxFontSize,l.height)}}o+=2;var c=qe(["pstrut"],[]);c.style.height=o+"em";for(var d=[],u=i,h=i,p=i,f=0;f<r.length;f++){var v=r[f];if("kern"===v.type)p+=v.size;else{var g=v.elem,m=v.wrapperClasses||[],b=v.wrapperStyle||{},y=qe(m,[c,g],void 0,b);y.style.top=-o-p-g.depth+"em",v.marginLeft&&(y.style.marginLeft=v.marginLeft),v.marginRight&&(y.style.marginRight=v.marginRight),d.push(y),p+=g.height+g.depth}u=Math.min(u,p),h=Math.max(h,p)}var w,k=qe(["vlist"],d);if(k.style.height=h+"em",u<0){var x=qe([],[]),O=qe(["vlist"],[x]);O.style.height=-u+"em";var C=qe(["vlist-s"],[new D("\u200b")]);w=[qe(["vlist-r"],[k,C]),qe(["vlist-r"],[O])]}else w=[qe(["vlist-r"],[k])];var E=qe(["vlist-t"],w);return 2===w.length&&E.classes.push("vlist-t2"),E.height=h,E.depth=-u,E},makeOrd:function(e,t,n){var r,i=e.mode,o=e.text,s=["mord"],l="math"===i||"text"===i&&t.font,c=l?t.font:t.fontFamily;if(55349===o.charCodeAt(0)){var d=function(e,t){var n=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,r="math"===t?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[Me[i][2],Me[i][r]]}if(120782<=n&&n<=120831){var o=Math.floor((n-120782)/10);return[Ne[o][2],Ne[o][r]]}if(120485===n||120486===n)return[Me[0][2],Me[0][r]];if(120486<n&&n<120782)return["",""];throw new a("Unsupported character: "+e)}(o,i),h=d[0],p=d[1];return Pe(o,h,i,t,s.concat(p))}if(c){var f,v;if("boldsymbol"===c||"mathnormal"===c){var g="boldsymbol"===c?function(e,t,n,r){return Be(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(o,i):(r=o,u.contains(Re,r)?{fontName:"Main-Italic",fontClass:"mathit"}:/[0-9]/.test(r.charAt(0))?{fontName:"Caligraphic-Regular",fontClass:"mathcal"}:{fontName:"Math-Italic",fontClass:"mathdefault"});f=g.fontName,v=[g.fontClass]}else u.contains(Re,o)?(f="Main-Italic",v=["mathit"]):l?(f=Ye[c].fontName,v=[c]):(f=Ve(c,t.fontWeight,t.fontShape),v=[c,t.fontWeight,t.fontShape]);if(Be(o,f,i).metrics)return Pe(o,f,i,t,s.concat(v));if(ce.hasOwnProperty(o)&&"Typewriter"===f.substr(0,10)){for(var m=[],b=0;b<o.length;b++)m.push(Pe(o[b],f,i,t,s.concat(v)));return We(m)}}if("mathord"===n){var y=function(e,t,n,r){return/[0-9]/.test(e.charAt(0))||u.contains(Re,e)?{fontName:"Main-Italic",fontClass:"mathit"}:{fontName:"Math-Italic",fontClass:"mathdefault"}}(o);return Pe(o,y.fontName,i,t,s.concat([y.fontClass]))}if("textord"===n){var w=Y[i][o]&&Y[i][o].font;if("ams"===w){var k=Ve("amsrm",t.fontWeight,t.fontShape);return Pe(o,k,i,t,s.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==w&&w){var x=Ve(w,t.fontWeight,t.fontShape);return Pe(o,x,i,t,s.concat(x,t.fontWeight,t.fontShape))}var O=Ve("textrm",t.fontWeight,t.fontShape);return Pe(o,O,i,t,s.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:function(e,t){var n=qe(["mspace"],[],t),r=Le(e,t);return n.style.marginRight=r+"em",n},staticSvg:function(e,t){var n=Ge[e],r=n[0],i=n[1],o=n[2],a=new L(r),s=new z([a],{width:i+"em",height:o+"em",style:"width:"+i+"em",viewBox:"0 0 "+1e3*i+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),l=Ue(["overlay"],[s],t);return l.height=o,l.style.height=o+"em",l.style.width=i+"em",l},svgData:Ge,tryCombineChars:function(e){for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof D&&r instanceof D&&Fe(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}};function Xe(e,t){var n=Qe(e,t);if(!n)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return n}function Qe(e,t){return e&&e.type===t?e:null}function Ke(e,t){var n=function(e,t){return e&&"atom"===e.type&&e.family===t?e:null}(e,t);if(!n)throw new Error('Expected node of type "atom" and family "'+t+'", but got '+(e?"atom"===e.type?"atom of family "+e.family:"node of type "+e.type:String(e)));return n}function $e(e){return e&&("atom"===e.type||W.hasOwnProperty(e.type))?e:null}var Je={number:3,unit:"mu"},et={number:4,unit:"mu"},tt={number:5,unit:"mu"},nt={mord:{mop:Je,mbin:et,mrel:tt,minner:Je},mop:{mord:Je,mop:Je,mrel:tt,minner:Je},mbin:{mord:et,mop:et,mopen:et,minner:et},mrel:{mord:tt,mop:tt,mopen:tt,minner:tt},mopen:{},mclose:{mop:Je,mbin:et,mrel:tt,minner:Je},mpunct:{mord:Je,mop:Je,mrel:tt,mopen:Je,mclose:Je,mpunct:Je,minner:Je},minner:{mord:Je,mop:Je,mbin:et,mrel:tt,mopen:Je,mpunct:Je,minner:Je}},rt={mord:{mop:Je},mop:{mord:Je,mop:Je},mbin:{},mrel:{},mopen:{},mclose:{mop:Je},mpunct:{},minner:{mop:Je}},it={},ot={},at={};function st(e){for(var t=e.type,n=(e.nodeType,e.names),r=e.props,i=e.handler,o=e.htmlBuilder,a=e.mathmlBuilder,s={type:t,numArgs:r.numArgs,argTypes:r.argTypes,greediness:void 0===r.greediness?1:r.greediness,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,consumeMode:r.consumeMode,handler:i},l=0;l<n.length;++l)it[n[l]]=s;t&&(o&&(ot[t]=o),a&&(at[t]=a))}function lt(e){st({type:e.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:e.htmlBuilder,mathmlBuilder:e.mathmlBuilder})}var ct=function(e){var t=Qe(e,"ordgroup");return t?t.body:[e]},dt=Ze.makeSpan,ut=["leftmost","mbin","mopen","mrel","mop","mpunct"],ht=["rightmost","mrel","mclose","mpunct"],pt={display:k.DISPLAY,text:k.TEXT,script:k.SCRIPT,scriptscript:k.SCRIPTSCRIPT},ft={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},vt=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],o=0;o<e.length;o++){var a=kt(e[o],t);if(a instanceof j){var s=a.children;i.push.apply(i,s)}else i.push(a)}if(!n)return i;var l=t;if(1===e.length){var c=Qe(e[0],"sizing")||Qe(e[0],"styling");c&&("sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(pt[c.style])))}var d=dt([r[0]||"leftmost"],[],t),h=dt([r[1]||"rightmost"],[],t);return gt(i,(function(e,t){var n=t.classes[0],r=e.classes[0];"mbin"===n&&u.contains(ht,r)?t.classes[0]="mord":"mbin"===r&&u.contains(ut,n)&&(e.classes[0]="mord")}),{node:d},h),gt(i,(function(e,t){var n=yt(t),r=yt(e),i=n&&r?e.hasClass("mtight")?rt[n][r]:nt[n][r]:null;if(i)return Ze.makeGlue(i,l)}),{node:d},h),i},gt=function e(t,n,r,i){i&&t.push(i);for(var o=0;o<t.length;o++){var a=t[o],s=mt(a);if(s)e(s.children,n,r);else if("mspace"!==a.classes[0]){var l=n(a,r.node);l&&(r.insertAfter?r.insertAfter(l):(t.unshift(l),o++)),r.node=a,r.insertAfter=function(e){return function(n){t.splice(e+1,0,n),o++}}(o)}}i&&t.pop()},mt=function(e){return e instanceof j||e instanceof A?e:null},bt=function e(t,n){var r=mt(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},yt=function(e,t){return e?(t&&(e=bt(e,t)),ft[e.classes[0]]||null):null},wt=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return dt(t.concat(n))},kt=function(e,t,n){if(!e)return dt();if(ot[e.type]){var r=ot[e.type](e,t);if(n&&t.size!==n.size){r=dt(t.sizingClasses(n),[r],t);var i=t.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new a("Got group of unknown type: '"+e.type+"'")};function xt(e,t){var n=dt(["base"],e,t),r=dt(["strut"]);return r.style.height=n.height+n.depth+"em",r.style.verticalAlign=-n.depth+"em",n.children.unshift(r),n}function Ot(e,t){var n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);for(var r,i=vt(e,t,!0),o=[],a=[],s=0;s<i.length;s++)if(a.push(i[s]),i[s].hasClass("mbin")||i[s].hasClass("mrel")||i[s].hasClass("allowbreak")){for(var l=!1;s<i.length-1&&i[s+1].hasClass("mspace")&&!i[s+1].hasClass("newline");)s++,a.push(i[s]),i[s].hasClass("nobreak")&&(l=!0);l||(o.push(xt(a,t)),a=[])}else i[s].hasClass("newline")&&(a.pop(),a.length>0&&(o.push(xt(a,t)),a=[]),o.push(i[s]));a.length>0&&o.push(xt(a,t)),n&&((r=xt(vt(n,t,!0))).classes=["tag"],o.push(r));var c=dt(["katex-html"],o);if(c.setAttribute("aria-hidden","true"),r){var d=r.children[0];d.style.height=c.height+c.depth+"em",d.style.verticalAlign=-c.depth+"em"}return c}function Ct(e){return new j(e)}var Et=function(){function e(e,t){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=e,this.attributes={},this.children=t||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.getAttribute=function(e){return this.attributes[e]},t.toNode=function(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e},t.toMarkup=function(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=u.escape(this.attributes[t]),e+='"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">"},t.toText=function(){return this.children.map((function(e){return e.toText()})).join("")},e}(),jt=function(){function e(e){this.text=void 0,this.text=e}var t=e.prototype;return t.toNode=function(){return document.createTextNode(this.text)},t.toMarkup=function(){return u.escape(this.toText())},t.toText=function(){return this.text},e}(),Mt={MathNode:Et,TextNode:jt,SpaceNode:function(){function e(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"\u200a":e>=.1666&&e<=.1667?"\u2009":e>=.2222&&e<=.2223?"\u2005":e>=.2777&&e<=.2778?"\u2005\u200a":e>=-.05556&&e<=-.05555?"\u200a\u2063":e>=-.1667&&e<=-.1666?"\u2009\u2063":e>=-.2223&&e<=-.2222?"\u205f\u2063":e>=-.2778&&e<=-.2777?"\u2005\u2063":null}var t=e.prototype;return t.toNode=function(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",this.width+"em"),e},t.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},t.toText=function(){return this.character?this.character:" "},e}(),newDocumentFragment:Ct},Nt=function(e,t,n){return!Y[t][e]||!Y[t][e].replace||55349===e.charCodeAt(0)||ce.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.substr(4,2)||n.font&&"tt"===n.font.substr(4,2))||(e=Y[t][e].replace),new Mt.TextNode(e)},St=function(e){return 1===e.length?e[0]:new Mt.MathNode("mrow",e)},Tt=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"bold-italic";var i=e.text;return u.contains(["\\imath","\\jmath"],i)?null:(Y[r][i]&&Y[r][i].replace&&(i=Y[r][i].replace),H(i,Ze.fontMap[n].fontName,r)?Ze.fontMap[n].variant:null)},_t=function(e,t){for(var n,r=[],i=0;i<e.length;i++){var o=It(e[i],t);if(o instanceof Et&&n instanceof Et){if("mtext"===o.type&&"mtext"===n.type&&o.getAttribute("mathvariant")===n.getAttribute("mathvariant")){var a;(a=n.children).push.apply(a,o.children);continue}if("mn"===o.type&&"mn"===n.type){var s;(s=n.children).push.apply(s,o.children);continue}if("mi"===o.type&&1===o.children.length&&"mn"===n.type){var l=o.children[0];if(l instanceof jt&&"."===l.text){var c;(c=n.children).push.apply(c,o.children);continue}}else if("mi"===n.type&&1===n.children.length){var d=n.children[0];if(d instanceof jt&&"\u0338"===d.text&&("mo"===o.type||"mi"===o.type||"mn"===o.type)){var u=o.children[0];u instanceof jt&&u.text.length>0&&(u.text=u.text.slice(0,1)+"\u0338"+u.text.slice(1),r.pop())}}}r.push(o),n=o}return r},At=function(e,t){return St(_t(e,t))},It=function(e,t){if(!e)return new Mt.MathNode("mrow");if(at[e.type])return at[e.type](e,t);throw new a("Got group of unknown type: '"+e.type+"'")},Dt=function(e){return new Ie({style:e.displayMode?k.DISPLAY:k.TEXT,maxSize:e.maxSize})},zt=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Ze.makeSpan(n,[e])}return e},Lt=function(e,t,n){var r=Dt(n),i=function(e,t,n){var r,i=_t(e,n);r=1===i.length&&i[0]instanceof Et&&u.contains(["mrow","mtable"],i[0].type)?i[0]:new Mt.MathNode("mrow",i);var o=new Mt.MathNode("annotation",[new Mt.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var a=new Mt.MathNode("semantics",[r,o]),s=new Mt.MathNode("math",[a]);return Ze.makeSpan(["katex-mathml"],[s])}(e,t,r),o=Ot(e,r),a=Ze.makeSpan(["katex"],[i,o]);return zt(a,n)},Rt={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},Bt={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Pt=function(e,t,n,r){var i,o=e.height+e.depth+2*n;if(/fbox|color/.test(t)){if(i=Ze.makeSpan(["stretchy",t],[],r),"fbox"===t){var a=r.color&&r.getColor();a&&(i.style.borderColor=a)}}else{var s=[];/^[bx]cancel$/.test(t)&&s.push(new R({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&s.push(new R({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new z(s,{width:"100%",height:o+"em"});i=Ze.makeSvgSpan([],[l],r)}return i.height=o,i.style.height=o+"em",i},Ft=function(e){var t=new Mt.MathNode("mo",[new Mt.TextNode(Rt[e.substr(1)])]);return t.setAttribute("stretchy","true"),t},Ht=function(e,t){var n=function(){var n=4e5,r=e.label.substr(1);if(u.contains(["widehat","widecheck","widetilde","utilde"],r)){var i,o,a,s="ordgroup"===(f=e.base).type?f.body.length:1;if(s>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,a=.42,o=r+"4"):(i=312,n=2340,a=.34,o="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],a=[0,.24,.3,.3,.36,.42][l],o=r+l):(n=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],a=[0,.26,.286,.3,.306,.34][l],o="tilde"+l)}var c=new L(o),d=new z([c],{width:"100%",height:a+"em",viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:Ze.makeSvgSpan([],[d],t),minWidth:0,height:a}}var h,p,f,v=[],g=Bt[r],m=g[0],b=g[1],y=g[2],w=y/1e3,k=m.length;if(1===k)h=["hide-tail"],p=[g[3]];else if(2===k)h=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==k)throw new Error("Correct katexImagesData or update code here to support\n                    "+k+" children.");h=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var x=0;x<k;x++){var O=new L(m[x]),C=new z([O],{width:"400em",height:w+"em",viewBox:"0 0 "+n+" "+y,preserveAspectRatio:p[x]+" slice"}),E=Ze.makeSvgSpan([h[x]],[C],t);if(1===k)return{span:E,minWidth:b,height:w};E.style.height=w+"em",v.push(E)}return{span:Ze.makeSpan(["stretchy"],v,t),minWidth:b,height:w}}(),r=n.span,i=n.minWidth,o=n.height;return r.height=o,r.style.height=o+"em",i>0&&(r.style.minWidth=i+"em"),r},qt=function(e,t){var n,r,i,o=Qe(e,"supsub");o?(n=(r=Xe(o.base,"accent")).base,o.base=n,i=function(e){if(e instanceof _)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(kt(o,t)),o.base=r):n=(r=Xe(e,"accent")).base;var a=kt(n,t.havingCrampedStyle()),s=0;if(r.isShifty&&u.isCharacterBox(n)){var l=u.getBaseElem(n);s=function(e){if(e instanceof D)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}(kt(l,t.havingCrampedStyle())).skew}var c,d=Math.min(a.height,t.fontMetrics().xHeight);if(r.isStretchy)c=Ht(r,t),c=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:c,wrapperClasses:["svg-align"],wrapperStyle:s>0?{width:"calc(100% - "+2*s+"em)",marginLeft:2*s+"em"}:void 0}]},t);else{var h,p;"\\vec"===r.label?(h=Ze.staticSvg("vec",t),p=Ze.svgData.vec[1]):((h=Ze.makeSymbol(r.label,"Main-Regular",r.mode,t)).italic=0,p=h.width),c=Ze.makeSpan(["accent-body"],[h]);var f="\\textcircled"===r.label;f&&(c.classes.push("accent-full"),d=a.height);var v=s;f||(v-=p/2),c.style.left=v+"em","\\textcircled"===r.label&&(c.style.top=".2em"),c=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-d},{type:"elem",elem:c}]},t)}var g=Ze.makeSpan(["mord","accent"],[c],t);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},Ut=function(e,t){var n=e.isStretchy?Ft(e.label):new Mt.MathNode("mo",[Nt(e.label,e.mode)]),r=new Mt.MathNode("mover",[It(e.base,t),n]);return r.setAttribute("accent","true"),r},Wt=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(e){return"\\"+e})).join("|"));st({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(e,t){var n=t[0],r=!Wt.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:qt,mathmlBuilder:Ut}),st({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(e,t){var n=t[0];return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:qt,mathmlBuilder:Ut}),st({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:function(e,t){var n=kt(e.base,t),r=Ht(e,t),i="\\utilde"===e.label?.12:0,o=Ze.makeVList({positionType:"bottom",positionData:r.height+i,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return Ze.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:function(e,t){var n=Ft(e.label),r=new Mt.MathNode("munder",[It(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var Vt=function(e){var t=new Mt.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};st({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,n){var r=e.parser,i=e.funcName;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},htmlBuilder:function(e,t){var n,r=t.style,i=t.havingStyle(r.sup()),o=Ze.wrapFragment(kt(e.body,i,t),t);o.classes.push("x-arrow-pad"),e.below&&(i=t.havingStyle(r.sub()),(n=Ze.wrapFragment(kt(e.below,i,t),t)).classes.push("x-arrow-pad"));var a,s=Ht(e,t),l=-t.fontMetrics().axisHeight+.5*s.height,c=-t.fontMetrics().axisHeight-.5*s.height-.111;if((o.depth>.25||"\\xleftequilibrium"===e.label)&&(c-=o.depth),n){var d=-t.fontMetrics().axisHeight+n.height+.5*s.height+.111;a=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:s,shift:l},{type:"elem",elem:n,shift:d}]},t)}else a=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:s,shift:l}]},t);return a.children[0].children[0].children[1].classes.push("svg-align"),Ze.makeSpan(["mrel","x-arrow"],[a],t)},mathmlBuilder:function(e,t){var n,r=Ft(e.label);if(e.body){var i=Vt(It(e.body,t));if(e.below){var o=Vt(It(e.below,t));n=new Mt.MathNode("munderover",[r,o,i])}else n=new Mt.MathNode("mover",[r,i])}else if(e.below){var a=Vt(It(e.below,t));n=new Mt.MathNode("munder",[r,a])}else n=Vt(),n=new Mt.MathNode("mover",[r,n]);return n}}),st({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){for(var n=e.parser,r=Xe(t[0],"ordgroup").body,i="",o=0;o<r.length;o++)i+=Xe(r[o],"textord").text;var s=parseInt(i);if(isNaN(s))throw new a("\\@char has non-numeric argument "+i);return{type:"textord",mode:n.mode,text:String.fromCharCode(s)}}});var Yt=function(e,t){var n=vt(e.body,t.withColor(e.color),!1);return Ze.makeFragment(n)},Gt=function(e,t){var n=_t(e.body,t.withColor(e.color)),r=new Mt.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};st({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(e,t){var n=e.parser,r=Xe(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:ct(i)}},htmlBuilder:Yt,mathmlBuilder:Gt}),st({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(e,t){var n=e.parser,r=e.breakOnTokenText,i=Xe(t[0],"color-token").color,o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:o}},htmlBuilder:Yt,mathmlBuilder:Gt}),st({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(e,t,n){var r=e.parser,i=e.funcName,o=n[0],a="\\cr"===i,s=!1;return a||(s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:r.mode,newLine:s,newRow:a,size:o&&Xe(o,"size").value}},htmlBuilder:function(e,t){if(e.newRow)throw new a("\\cr valid only within a tabular/array environment");var n=Ze.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=Le(e.size,t)+"em")),n},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",Le(e.size,t)+"em")),n}});var Zt=function(e,t,n){var r=H(Y.math[e]&&Y.math[e].replace||e,t,n);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},Xt=function(e,t,n,r){var i=n.havingBaseStyle(t),o=Ze.makeSpan(r.concat(i.sizingClasses(n)),[e],n),a=i.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=i.sizeMultiplier,o},Qt=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=i+"em",e.height-=i,e.depth+=i},Kt=function(e,t,n,r,i,o){var a=function(e,t,n,r){return Ze.makeSymbol(e,"Size"+t+"-Regular",n,r)}(e,t,i,r),s=Xt(Ze.makeSpan(["delimsizing","size"+t],[a],r),k.TEXT,r,o);return n&&Qt(s,r,k.TEXT),s},$t=function(e,t,n){var r;return r="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:Ze.makeSpan(["delimsizinginner",r],[Ze.makeSpan([],[Ze.makeSymbol(e,t,n)])])}},Jt=function(e,t,n,r,i,o){var a,s,l,c;a=l=c=e,s=null;var d="Size1-Regular";"\\uparrow"===e?l=c="\u23d0":"\\Uparrow"===e?l=c="\u2016":"\\downarrow"===e?a=l="\u23d0":"\\Downarrow"===e?a=l="\u2016":"\\updownarrow"===e?(a="\\uparrow",l="\u23d0",c="\\downarrow"):"\\Updownarrow"===e?(a="\\Uparrow",l="\u2016",c="\\Downarrow"):"["===e||"\\lbrack"===e?(a="\u23a1",l="\u23a2",c="\u23a3",d="Size4-Regular"):"]"===e||"\\rbrack"===e?(a="\u23a4",l="\u23a5",c="\u23a6",d="Size4-Regular"):"\\lfloor"===e||"\u230a"===e?(l=a="\u23a2",c="\u23a3",d="Size4-Regular"):"\\lceil"===e||"\u2308"===e?(a="\u23a1",l=c="\u23a2",d="Size4-Regular"):"\\rfloor"===e||"\u230b"===e?(l=a="\u23a5",c="\u23a6",d="Size4-Regular"):"\\rceil"===e||"\u2309"===e?(a="\u23a4",l=c="\u23a5",d="Size4-Regular"):"("===e||"\\lparen"===e?(a="\u239b",l="\u239c",c="\u239d",d="Size4-Regular"):")"===e||"\\rparen"===e?(a="\u239e",l="\u239f",c="\u23a0",d="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(a="\u23a7",s="\u23a8",c="\u23a9",l="\u23aa",d="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(a="\u23ab",s="\u23ac",c="\u23ad",l="\u23aa",d="Size4-Regular"):"\\lgroup"===e||"\u27ee"===e?(a="\u23a7",c="\u23a9",l="\u23aa",d="Size4-Regular"):"\\rgroup"===e||"\u27ef"===e?(a="\u23ab",c="\u23ad",l="\u23aa",d="Size4-Regular"):"\\lmoustache"===e||"\u23b0"===e?(a="\u23a7",c="\u23ad",l="\u23aa",d="Size4-Regular"):"\\rmoustache"!==e&&"\u23b1"!==e||(a="\u23ab",c="\u23a9",l="\u23aa",d="Size4-Regular");var u=Zt(a,d,i),h=u.height+u.depth,p=Zt(l,d,i),f=p.height+p.depth,v=Zt(c,d,i),g=v.height+v.depth,m=0,b=1;if(null!==s){var y=Zt(s,d,i);m=y.height+y.depth,b=2}var w=h+g+m,x=Math.ceil((t-w)/(b*f)),O=w+x*b*f,C=r.fontMetrics().axisHeight;n&&(C*=r.sizeMultiplier);var E=O/2-C,j=[];if(j.push($t(c,d,i)),null===s)for(var M=0;M<x;M++)j.push($t(l,d,i));else{for(var N=0;N<x;N++)j.push($t(l,d,i));j.push($t(s,d,i));for(var S=0;S<x;S++)j.push($t(l,d,i))}j.push($t(a,d,i));var T=r.havingBaseStyle(k.TEXT),_=Ze.makeVList({positionType:"bottom",positionData:E,children:j},T);return Xt(Ze.makeSpan(["delimsizing","mult"],[_],T),k.TEXT,r,o)},en=80,tn=.08,nn=function(e,t,n,r){var i;"sqrtTall"===e&&(i="M702 80H400000v40H742v"+(n-54-en)+"l-4 4-4 4c-.667.7\n-2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1h-12l-28-84c-16.667-52-96.667\n-294.333-240-727l-212 -643 -85 170c-4-3.333-8.333-7.667-13 -13l-13-13l77-155\n 77-156c66 199.333 139 419.667 219 661 l218 661zM702 80H400000v40H742z");var o=new L(e,i),a=new z([o],{width:"400em",height:t+"em",viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ze.makeSvgSpan(["hide-tail"],[a],r)},rn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","\\surd"],on=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1"],an=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sn=[0,1.2,1.8,2.4,3],ln=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],cn=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"stack"}],dn=[{type:"small",style:k.SCRIPTSCRIPT},{type:"small",style:k.SCRIPT},{type:"small",style:k.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],un=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},hn=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var o=Zt(e,un(n[i]),"math"),a=o.height+o.depth;if("small"===n[i].type&&(a*=r.havingBaseStyle(n[i].style).sizeMultiplier),a>t)return n[i]}return n[n.length-1]},pn=function(e,t,n,r,i,o){var a;"<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),a=u.contains(an,e)?ln:u.contains(rn,e)?dn:cn;var s=hn(e,t,a,r);return"small"===s.type?function(e,t,n,r,i,o){var a=Ze.makeSymbol(e,"Main-Regular",i,r),s=Xt(a,t,r,o);return n&&Qt(s,r,t),s}(e,s.style,n,r,i,o):"large"===s.type?Kt(e,s.size,n,r,i,o):Jt(e,t,n,r,i,o)},fn=function(e,t){var n,r,i=t.havingBaseSizing(),o=hn("\\surd",e*i.sizeMultiplier,dn,i),a=i.sizeMultiplier,s=0,l=0,c=0;return"small"===o.type?(e<1?a=1:e<1.4&&(a=.7),l=1/a,(n=nn("sqrtMain",s=1.08/a,c=1080,t)).style.minWidth="0.853em",r=.833/a):"large"===o.type?(c=1080*sn[o.size],l=sn[o.size]/a,s=(sn[o.size]+tn)/a,(n=nn("sqrtSize"+o.size,s,c,t)).style.minWidth="1.02em",r=1/a):(s=e+tn,l=e,c=Math.floor(1e3*e)+en,(n=nn("sqrtTall",s,c,t)).style.minWidth="0.742em",r=1.056),n.height=l,n.style.height=s+"em",{span:n,advanceWidth:r,ruleWidth:t.fontMetrics().sqrtRuleThickness*a}},vn=function(e,t,n,r,i){if("<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),u.contains(rn,e)||u.contains(an,e))return Kt(e,t,!1,n,r,i);if(u.contains(on,e))return Jt(e,sn[t],!1,n,r,i);throw new a("Illegal delimiter: '"+e+"'")},gn=pn,mn=function(e,t,n,r,i,o){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,s=5/r.fontMetrics().ptPerEm,l=Math.max(t-a,n+a),c=Math.max(l/500*901,2*l-s);return pn(e,c,!0,r,i,o)},bn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},yn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27e8","\\rangle","\u27e9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function wn(e,t){var n=$e(e);if(n&&u.contains(yn,n.text))return n;throw new a("Invalid delimiter: '"+(n?n.text:JSON.stringify(e))+"' after '"+t.funcName+"'",e)}function kn(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}st({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(e,t){var n=wn(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:bn[e.funcName].size,mclass:bn[e.funcName].mclass,delim:n.text}},htmlBuilder:function(e,t){return"."===e.delim?Ze.makeSpan([e.mclass]):vn(e.delim,e.size,t,e.mode,[e.mclass])},mathmlBuilder:function(e){var t=[];"."!==e.delim&&t.push(Nt(e.delim,e.mode));var n=new Mt.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n}}),st({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(e,t){return{type:"leftright-right",mode:e.parser.mode,delim:wn(t[0],e).text}}}),st({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(e,t){var n=wn(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=Xe(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:o.delim}},htmlBuilder:function(e,t){kn(e);for(var n,r,i=vt(e.body,t,!0,["mopen","mclose"]),o=0,a=0,s=!1,l=0;l<i.length;l++)i[l].isMiddle?s=!0:(o=Math.max(i[l].height,o),a=Math.max(i[l].depth,a));if(o*=t.sizeMultiplier,a*=t.sizeMultiplier,n="."===e.left?wt(t,["mopen"]):mn(e.left,o,a,t,e.mode,["mopen"]),i.unshift(n),s)for(var c=1;c<i.length;c++){var d=i[c].isMiddle;d&&(i[c]=mn(d.delim,o,a,d.options,e.mode,[]))}return r="."===e.right?wt(t,["mclose"]):mn(e.right,o,a,t,e.mode,["mclose"]),i.push(r),Ze.makeSpan(["minner"],i,t)},mathmlBuilder:function(e,t){kn(e);var n=_t(e.body,t);if("."!==e.left){var r=new Mt.MathNode("mo",[Nt(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new Mt.MathNode("mo",[Nt(e.right,e.mode)]);i.setAttribute("fence","true"),n.push(i)}return St(n)}}),st({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(e,t){var n=wn(t[0],e);if(!e.parser.leftrightDepth)throw new a("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:function(e,t){var n;if("."===e.delim)n=wt(t,[]);else{n=vn(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:function(e,t){var n="\\vert"===e.delim||"|"===e.delim?Nt("|","text"):Nt(e.delim,e.mode),r=new Mt.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var xn=function(e,t){var n,r,i=Ze.wrapFragment(kt(e.body,t),t),o=e.label.substr(1),a=t.sizeMultiplier,s=0,l=u.isCharacterBox(e.body);if("sout"===o)(n=Ze.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/a,s=-.5*t.fontMetrics().xHeight;else{/cancel/.test(o)?l||i.classes.push("cancel-pad"):i.classes.push("boxpad");var c=0;c=/box/.test(o)?"colorbox"===o?.3:.34:l?.2:0,n=Pt(i,o,c,t),s=i.depth+c,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}return r=e.backgroundColor?Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:s},{type:"elem",elem:i,shift:0}]},t):Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:n,shift:s,wrapperClasses:/cancel/.test(o)?["svg-align"]:[]}]},t),/cancel/.test(o)&&(r.height=i.height,r.depth=i.depth),/cancel/.test(o)&&!l?Ze.makeSpan(["mord","cancel-lap"],[r],t):Ze.makeSpan(["mord"],[r],t)},On=function(e,t){var n=new Mt.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[It(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\fcolorbox":case"\\colorbox":if(n.setAttribute("width","+6pt"),n.setAttribute("height","+6pt"),n.setAttribute("lspace","3pt"),n.setAttribute("voffset","3pt"),"\\fcolorbox"===e.label){var r=t.fontMetrics().defaultRuleThickness;n.setAttribute("style","border: "+r+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};st({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(e,t,n){var r=e.parser,i=e.funcName,o=Xe(t[0],"color-token").color,a=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,body:a}},htmlBuilder:xn,mathmlBuilder:On}),st({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(e,t,n){var r=e.parser,i=e.funcName,o=Xe(t[0],"color-token").color,a=Xe(t[1],"color-token").color,s=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:o,body:s}},htmlBuilder:xn,mathmlBuilder:On}),st({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0},handler:function(e,t){return{type:"enclose",mode:e.parser.mode,label:"\\fbox",body:t[0]}}}),st({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(e,t,n){var r=e.parser,i=e.funcName,o=t[0];return{type:"enclose",mode:r.mode,label:i,body:o}},htmlBuilder:xn,mathmlBuilder:On});var Cn={};function En(e){for(var t=e.type,n=e.names,r=e.props,i=e.handler,o=e.htmlBuilder,a=e.mathmlBuilder,s={type:t,numArgs:r.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Cn[n[l]]=s;o&&(ot[t]=o),a&&(at[t]=a)}function jn(e){var t=[];e.consumeSpaces();for(var n=e.nextToken.text;"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.nextToken.text;return t}function Mn(e,t,n){var r=t.hskipBeforeAndAfter,i=t.addJot,o=t.cols,s=t.arraystretch,l=t.colSeparationType;if(e.gullet.beginGroup(),e.gullet.macros.set("\\\\","\\cr"),!s){var c=e.gullet.expandMacroAsText("\\arraystretch");if(null==c)s=1;else if(!(s=parseFloat(c))||s<0)throw new a("Invalid \\arraystretch: "+c)}var d=[],u=[d],h=[],p=[];for(p.push(jn(e));;){var f=e.parseExpression(!1,"\\cr");f={type:"ordgroup",mode:e.mode,body:f},n&&(f={type:"styling",mode:e.mode,style:n,body:[f]}),d.push(f);var v=e.nextToken.text;if("&"===v)e.consume();else{if("\\end"===v){1===d.length&&"styling"===f.type&&0===f.body[0].body.length&&u.pop(),p.length<u.length+1&&p.push([]);break}if("\\cr"!==v)throw new a("Expected & or \\\\ or \\cr or \\end",e.nextToken);var g=Xe(e.parseFunction(),"cr");h.push(g.size),p.push(jn(e)),d=[],u.push(d)}}return e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:s,body:u,cols:o,rowGaps:h,hskipBeforeAndAfter:r,hLinesBeforeRow:p,colSeparationType:l}}function Nn(e){return"d"===e.substr(0,1)?"display":"text"}var Sn=function(e,t){var n,r,i=e.body.length,o=e.hLinesBeforeRow,s=0,l=new Array(i),c=[],d=1/t.fontMetrics().ptPerEm,h=5*d,p=12*d,f=3*d,v=e.arraystretch*p,g=.7*v,m=.3*v,b=0;function y(e){for(var t=0;t<e.length;++t)t>0&&(b+=.25),c.push({pos:b,isDashed:e[t]})}for(y(o[0]),n=0;n<e.body.length;++n){var w=e.body[n],k=g,x=m;s<w.length&&(s=w.length);var O=new Array(w.length);for(r=0;r<w.length;++r){var C=kt(w[r],t);x<C.depth&&(x=C.depth),k<C.height&&(k=C.height),O[r]=C}var E=e.rowGaps[n],j=0;E&&(j=Le(E,t))>0&&(x<(j+=m)&&(x=j),j=0),e.addJot&&(x+=f),O.height=k,O.depth=x,b+=k,O.pos=b,b+=x+j,l[n]=O,y(o[n+1])}var M,N,S=b/2+t.fontMetrics().axisHeight,T=e.cols||[],_=[];for(r=0,N=0;r<s||N<T.length;++r,++N){for(var A=T[N]||{},I=!0;"separator"===A.type;){if(I||((M=Ze.makeSpan(["arraycolsep"],[])).style.width=t.fontMetrics().doubleRuleSep+"em",_.push(M)),"|"===A.separator){var D=Ze.makeSpan(["vertical-separator"],[],t);D.style.height=b+"em",D.style.verticalAlign=-(b-S)+"em",_.push(D)}else{if(":"!==A.separator)throw new a("Invalid separator type: "+A.separator);var z=Ze.makeSpan(["vertical-separator","vs-dashed"],[],t);z.style.height=b+"em",z.style.verticalAlign=-(b-S)+"em",_.push(z)}A=T[++N]||{},I=!1}if(!(r>=s)){var L=void 0;(r>0||e.hskipBeforeAndAfter)&&0!==(L=u.deflt(A.pregap,h))&&((M=Ze.makeSpan(["arraycolsep"],[])).style.width=L+"em",_.push(M));var R=[];for(n=0;n<i;++n){var B=l[n],P=B[r];if(P){var F=B.pos-S;P.depth=B.depth,P.height=B.height,R.push({type:"elem",elem:P,shift:F})}}R=Ze.makeVList({positionType:"individualShift",children:R},t),R=Ze.makeSpan(["col-align-"+(A.align||"c")],[R]),_.push(R),(r<s-1||e.hskipBeforeAndAfter)&&0!==(L=u.deflt(A.postgap,h))&&((M=Ze.makeSpan(["arraycolsep"],[])).style.width=L+"em",_.push(M))}}if(l=Ze.makeSpan(["mtable"],_),c.length>0){for(var H=Ze.makeLineSpan("hline",t,.05),q=Ze.makeLineSpan("hdashline",t,.05),U=[{type:"elem",elem:l,shift:0}];c.length>0;){var W=c.pop(),V=W.pos-S;W.isDashed?U.push({type:"elem",elem:q,shift:V}):U.push({type:"elem",elem:H,shift:V})}l=Ze.makeVList({positionType:"individualShift",children:U},t)}return Ze.makeSpan(["mord"],[l],t)},Tn={c:"center ",l:"left ",r:"right "},_n=function(e,t){var n=new Mt.MathNode("mtable",e.body.map((function(e){return new Mt.MathNode("mtr",e.map((function(e){return new Mt.MathNode("mtd",[It(e,t)])})))}))),r=.16+e.arraystretch-1+(e.addJot?.09:0);n.setAttribute("rowspacing",r+"em");var i="",o="";if(e.cols){var a=e.cols,s="",l=!1,c=0,d=a.length;"separator"===a[0].type&&(i+="top ",c=1),"separator"===a[a.length-1].type&&(i+="bottom ",d-=1);for(var u=c;u<d;u++)"align"===a[u].type?(o+=Tn[a[u].align],l&&(s+="none "),l=!0):"separator"===a[u].type&&l&&(s+="|"===a[u].separator?"solid ":"dashed ",l=!1);n.setAttribute("columnalign",o.trim()),/[sd]/.test(s)&&n.setAttribute("columnlines",s.trim())}if("align"===e.colSeparationType){for(var h=e.cols||[],p="",f=1;f<h.length;f++)p+=f%2?"0em ":"1em ";n.setAttribute("columnspacing",p.trim())}else"alignat"===e.colSeparationType?n.setAttribute("columnspacing","0em"):n.setAttribute("columnspacing","1em");var v="",g=e.hLinesBeforeRow;i+=g[0].length>0?"left ":"",i+=g[g.length-1].length>0?"right ":"";for(var m=1;m<g.length-1;m++)v+=0===g[m].length?"none ":g[m][0]?"dashed ":"solid ";if(/[sd]/.test(v)&&n.setAttribute("rowlines",v.trim()),""===i)return n;var b=new Mt.MathNode("menclose",[n]);return b.setAttribute("notation",i.trim()),b},An=function(e,t){var n,r=[],i=Mn(e.parser,{cols:r,addJot:!0},"display"),o=0,s={type:"ordgroup",mode:e.mode,body:[]},l=Qe(t[0],"ordgroup");if(l){for(var c="",d=0;d<l.body.length;d++)c+=Xe(l.body[d],"textord").text;n=Number(c),o=2*n}var u=!o;i.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var r=Xe(e[t],"styling");Xe(r.body[0],"ordgroup").body.unshift(s)}if(u)o<e.length&&(o=e.length);else{var i=e.length/2;if(n<i)throw new a("Too many math in a row: expected "+n+", but got "+i,e[0])}}));for(var h=0;h<o;++h){var p="r",f=0;h%2===1?p="l":h>0&&u&&(f=1),r[h]={type:"align",align:p,pregap:f,postgap:0}}return i.colSeparationType=u?"align":"alignat",i};En({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(e,t){var n={cols:($e(t[0])?[t[0]]:Xe(t[0],"ordgroup").body).map((function(e){var t=function(e){var t=$e(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new a("Unknown column alignment: "+t,e)})),hskipBeforeAndAfter:!0};return Mn(e.parser,n,Nn(e.envName))},htmlBuilder:Sn,mathmlBuilder:_n}),En({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName],n=Mn(e.parser,{hskipBeforeAndAfter:!1},Nn(e.envName));return t?{type:"leftright",mode:e.mode,body:[n],left:t[0],right:t[1]}:n},htmlBuilder:Sn,mathmlBuilder:_n}),En({type:"array",names:["cases","dcases"],props:{numArgs:0},handler:function(e){var t=Mn(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Nn(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:"\\{",right:"."}},htmlBuilder:Sn,mathmlBuilder:_n}),En({type:"array",names:["aligned"],props:{numArgs:0},handler:An,htmlBuilder:Sn,mathmlBuilder:_n}),En({type:"array",names:["gathered"],props:{numArgs:0},handler:function(e){return Mn(e.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:Sn,mathmlBuilder:_n}),En({type:"array",names:["alignedat"],props:{numArgs:1},handler:An,htmlBuilder:Sn,mathmlBuilder:_n}),st({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(e,t){throw new a(e.funcName+" valid only within array environment")}});var In=Cn;st({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];if("ordgroup"!==i.type)throw new a("Invalid environment name",i);for(var o="",s=0;s<i.body.length;++s)o+=Xe(i.body[s],"textord").text;if("\\begin"===r){if(!In.hasOwnProperty(o))throw new a("No such environment: "+o,i);var l=In[o],c=n.parseArguments("\\begin{"+o+"}",l),d=c.args,u=c.optArgs,h={mode:n.mode,envName:o,parser:n},p=l.handler(h,d,u);n.expect("\\end",!1);var f=n.nextToken,v=Xe(n.parseFunction(),"environment");if(v.name!==o)throw new a("Mismatch: \\begin{"+o+"} matched by \\end{"+v.name+"}",f);return p}return{type:"environment",mode:n.mode,name:o,nameGroup:i}}});var Dn=Ze.makeSpan;function zn(e,t){var n=vt(e.body,t,!0);return Dn([e.mclass],n,t)}function Ln(e,t){var n=_t(e.body,t);return Mt.newDocumentFragment(n)}st({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.substr(5),body:ct(i)}},htmlBuilder:zn,mathmlBuilder:Ln});var Rn=function(e){var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};st({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(e,t){return{type:"mclass",mode:e.parser.mode,mclass:Rn(t[0]),body:[t[1]]}}}),st({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(e,t){var n,r=e.parser,i=e.funcName,o=t[1],a=t[0];n="\\stackrel"!==i?Rn(o):"mrel";var s={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:ct(o)},l={type:"supsub",mode:a.mode,base:s,sup:"\\underset"===i?null:a,sub:"\\underset"===i?a:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l]}},htmlBuilder:zn,mathmlBuilder:Ln});var Bn=function(e,t){var n=e.font,r=t.withFont(n);return kt(e.body,r)},Pn=function(e,t){var n=e.font,r=t.withFont(n);return It(e.body,r)},Fn={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};st({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0],o=r;return o in Fn&&(o=Fn[o]),{type:"font",mode:n.mode,font:o.slice(1),body:i}},htmlBuilder:Bn,mathmlBuilder:Pn}),st({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(e,t){var n=e.parser,r=t[0];return{type:"mclass",mode:n.mode,mclass:Rn(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}]}}}),st({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it"],props:{numArgs:0,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=e.breakOnTokenText,o=n.mode,a=n.parseExpression(!0,i);return{type:"font",mode:o,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:a}}},htmlBuilder:Bn,mathmlBuilder:Pn});var Hn=function(e,t){var n=t;return"display"===e?n=n.id>=k.SCRIPT.id?n.text():k.DISPLAY:"text"===e&&n.size===k.DISPLAY.size?n=k.TEXT:"script"===e?n=k.SCRIPT:"scriptscript"===e&&(n=k.SCRIPTSCRIPT),n},qn=function(e,t){var n,r=Hn(e.size,t.style),i=r.fracNum(),o=r.fracDen();n=t.havingStyle(i);var a=kt(e.numer,n,t);if(e.continued){var s=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;a.height=a.height<s?s:a.height,a.depth=a.depth<l?l:a.depth}n=t.havingStyle(o);var c,d,u,h,p,f,v,g,m,b,y=kt(e.denom,n,t);if(e.hasBarLine?(e.barSize?(d=Le(e.barSize,t),c=Ze.makeLineSpan("frac-line",t,d)):c=Ze.makeLineSpan("frac-line",t),d=c.height,u=c.height):(c=null,d=0,u=t.fontMetrics().defaultRuleThickness),r.size===k.DISPLAY.size||"display"===e.size?(h=t.fontMetrics().num1,p=d>0?3*u:7*u,f=t.fontMetrics().denom1):(d>0?(h=t.fontMetrics().num2,p=u):(h=t.fontMetrics().num3,p=3*u),f=t.fontMetrics().denom2),c){var w=t.fontMetrics().axisHeight;h-a.depth-(w+.5*d)<p&&(h+=p-(h-a.depth-(w+.5*d))),w-.5*d-(y.height-f)<p&&(f+=p-(w-.5*d-(y.height-f)));var x=-(w-.5*d);v=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:f},{type:"elem",elem:c,shift:x},{type:"elem",elem:a,shift:-h}]},t)}else{var O=h-a.depth-(y.height-f);O<p&&(h+=.5*(p-O),f+=.5*(p-O)),v=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:f},{type:"elem",elem:a,shift:-h}]},t)}return n=t.havingStyle(r),v.height*=n.sizeMultiplier/t.sizeMultiplier,v.depth*=n.sizeMultiplier/t.sizeMultiplier,g=r.size===k.DISPLAY.size?t.fontMetrics().delim1:t.fontMetrics().delim2,m=null==e.leftDelim?wt(t,["mopen"]):gn(e.leftDelim,g,!0,t.havingStyle(r),e.mode,["mopen"]),b=e.continued?Ze.makeSpan([]):null==e.rightDelim?wt(t,["mclose"]):gn(e.rightDelim,g,!0,t.havingStyle(r),e.mode,["mclose"]),Ze.makeSpan(["mord"].concat(n.sizingClasses(t)),[m,Ze.makeSpan(["mfrac"],[v]),b],t)},Un=function(e,t){var n=new Mt.MathNode("mfrac",[It(e.numer,t),It(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=Le(e.barSize,t);n.setAttribute("linethickness",r+"em")}}else n.setAttribute("linethickness","0px");var i=Hn(e.size,t.style);if(i.size!==t.style.size){n=new Mt.MathNode("mstyle",[n]);var o=i.size===k.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var a=[];if(null!=e.leftDelim){var s=new Mt.MathNode("mo",[new Mt.TextNode(e.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),a.push(s)}if(a.push(n),null!=e.rightDelim){var l=new Mt.MathNode("mo",[new Mt.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return St(a)}return n};st({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(e,t){var n,r=e.parser,i=e.funcName,o=t[0],a=t[1],s=null,l=null,c="auto";switch(i){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,s="(",l=")";break;case"\\\\bracefrac":n=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\cfrac":case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:r.mode,continued:"\\cfrac"===i,numer:o,denom:a,hasBarLine:n,leftDelim:s,rightDelim:l,size:c,barSize:null}},htmlBuilder:qn,mathmlBuilder:Un}),st({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(e){var t,n=e.parser,r=e.funcName,i=e.token;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var Wn=["display","text","script","scriptscript"],Vn=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};st({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(e,t){var n=e.parser,r=t[4],i=t[5],o=Qe(t[0],"atom");o&&(o=Ke(t[0],"open"));var a=o?Vn(o.text):null,s=Qe(t[1],"atom");s&&(s=Ke(t[1],"close"));var l,c=s?Vn(s.text):null,d=Xe(t[2],"size"),u=null;l=!!d.isBlank||(u=d.value).number>0;var h="auto",p=Qe(t[3],"ordgroup");if(p){if(p.body.length>0){var f=Xe(p.body[0],"textord");h=Wn[Number(f.text)]}}else p=Xe(t[3],"textord"),h=Wn[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:l,barSize:u,leftDelim:a,rightDelim:c,size:h}},htmlBuilder:qn,mathmlBuilder:Un}),st({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(e,t){var n=e.parser,r=(e.funcName,e.token);return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Xe(t[0],"size").value,token:r}}}),st({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(e,t){var n=e.parser,r=(e.funcName,t[0]),i=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Xe(t[1],"infix").size),o=t[2],a=i.number>0;return{type:"genfrac",mode:n.mode,numer:r,denom:o,continued:!1,hasBarLine:a,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:qn,mathmlBuilder:Un});var Yn=function(e,t){var n,r,i=t.style,o=Qe(e,"supsub");o?(n=o.sup?kt(o.sup,t.havingStyle(i.sup()),t):kt(o.sub,t.havingStyle(i.sub()),t),r=Xe(o.base,"horizBrace")):r=Xe(e,"horizBrace");var a,s=kt(r.base,t.havingBaseStyle(k.DISPLAY)),l=Ht(r,t);if(r.isOver?(a=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:l}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(a=Ze.makeVList({positionType:"bottom",positionData:s.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var c=Ze.makeSpan(["mord",r.isOver?"mover":"munder"],[a],t);a=r.isOver?Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:n}]},t):Ze.makeVList({positionType:"bottom",positionData:c.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:c}]},t)}return Ze.makeSpan(["mord",r.isOver?"mover":"munder"],[a],t)};st({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:Yn,mathmlBuilder:function(e,t){var n=Ft(e.label);return new Mt.MathNode(e.isOver?"mover":"munder",[It(e.base,t),n])}}),st({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[1],i=Xe(t[0],"url").url;return{type:"href",mode:n.mode,href:i,body:ct(r)}},htmlBuilder:function(e,t){var n=vt(e.body,t,!1);return Ze.makeAnchor(e.href,[],n,t)},mathmlBuilder:function(e,t){var n=At(e.body,t);return n instanceof Et||(n=new Et("mrow",[n])),n.setAttribute("href",e.href),n}}),st({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(e,t){for(var n=e.parser,r=Xe(t[0],"url").url,i=[],o=0;o<r.length;o++){var a=r[o];"~"===a&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var s={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:ct(s)}}}),st({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(e,t){return{type:"htmlmathml",mode:e.parser.mode,html:ct(t[0]),mathml:ct(t[1])}},htmlBuilder:function(e,t){var n=vt(e.html,t,!1);return Ze.makeFragment(n)},mathmlBuilder:function(e,t){return At(e.mathml,t)}}),st({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=Xe(t[0],"size");if(n.settings.strict){var o="m"===r[1],a="mu"===i.value.unit;o?(a||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:function(e,t){return Ze.makeGlue(e.dimension,t)},mathmlBuilder:function(e,t){var n=Le(e.dimension,t);return new Mt.SpaceNode(n)}}),st({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:function(e,t){var n;"clap"===e.alignment?(n=Ze.makeSpan([],[kt(e.body,t)]),n=Ze.makeSpan(["inner"],[n],t)):n=Ze.makeSpan(["inner"],[kt(e.body,t)]);var r=Ze.makeSpan(["fix"],[]),i=Ze.makeSpan([e.alignment],[n,r],t),o=Ze.makeSpan(["strut"]);return o.style.height=i.height+i.depth+"em",o.style.verticalAlign=-i.depth+"em",i.children.unshift(o),i=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},t),Ze.makeSpan(["mord"],[i],t)},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mpadded",[It(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),st({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1,consumeMode:"math"},handler:function(e,t){var n=e.funcName,r=e.parser,i=r.mode;r.switchMode("math");var o="\\("===n?"\\)":"$",a=r.parseExpression(!1,o);return r.expect(o,!1),r.switchMode(i),r.consume(),{type:"styling",mode:r.mode,style:"text",body:a}}}),st({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(e,t){throw new a("Mismatched "+e.funcName)}});var Gn=function(e,t){switch(t.style.size){case k.DISPLAY.size:return e.display;case k.TEXT.size:return e.text;case k.SCRIPT.size:return e.script;case k.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};st({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(e,t){return{type:"mathchoice",mode:e.parser.mode,display:ct(t[0]),text:ct(t[1]),script:ct(t[2]),scriptscript:ct(t[3])}},htmlBuilder:function(e,t){var n=Gn(e,t),r=vt(n,t,!1);return Ze.makeFragment(r)},mathmlBuilder:function(e,t){var n=Gn(e,t);return At(n,t)}});var Zn=["\\smallint"],Xn=function(e,t){var n,r,i,o=!1,a=Qe(e,"supsub");a?(n=a.sup,r=a.sub,i=Xe(a.base,"op"),o=!0):i=Xe(e,"op");var s,l=t.style,c=!1;if(l.size===k.DISPLAY.size&&i.symbol&&!u.contains(Zn,i.name)&&(c=!0),i.symbol){var d=c?"Size2-Regular":"Size1-Regular",h="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(h=i.name.substr(1),i.name="oiint"===h?"\\iint":"\\iiint"),s=Ze.makeSymbol(i.name,d,"math",t,["mop","op-symbol",c?"large-op":"small-op"]),h.length>0){var p=s.italic,f=Ze.staticSvg(h+"Size"+(c?"2":"1"),t);s=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:f,shift:c?.08:0}]},t),i.name="\\"+h,s.classes.unshift("mop"),s.italic=p}}else if(i.body){var v=vt(i.body,t,!0);1===v.length&&v[0]instanceof D?(s=v[0]).classes[0]="mop":s=Ze.makeSpan(["mop"],Ze.tryCombineChars(v),t)}else{for(var g=[],m=1;m<i.name.length;m++)g.push(Ze.mathsym(i.name[m],i.mode));s=Ze.makeSpan(["mop"],g,t)}var b=0,y=0;if((s instanceof D||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(b=(s.height-s.depth)/2-t.fontMetrics().axisHeight,y=s.italic),o){var w,x,O;if(s=Ze.makeSpan([],[s]),n){var C=kt(n,t.havingStyle(l.sup()),t);x={elem:C,kern:Math.max(t.fontMetrics().bigOpSpacing1,t.fontMetrics().bigOpSpacing3-C.depth)}}if(r){var E=kt(r,t.havingStyle(l.sub()),t);w={elem:E,kern:Math.max(t.fontMetrics().bigOpSpacing2,t.fontMetrics().bigOpSpacing4-E.height)}}if(x&&w){var j=t.fontMetrics().bigOpSpacing5+w.elem.height+w.elem.depth+w.kern+s.depth+b;O=Ze.makeVList({positionType:"bottom",positionData:j,children:[{type:"kern",size:t.fontMetrics().bigOpSpacing5},{type:"elem",elem:w.elem,marginLeft:-y+"em"},{type:"kern",size:w.kern},{type:"elem",elem:s},{type:"kern",size:x.kern},{type:"elem",elem:x.elem,marginLeft:y+"em"},{type:"kern",size:t.fontMetrics().bigOpSpacing5}]},t)}else if(w){var M=s.height-b;O=Ze.makeVList({positionType:"top",positionData:M,children:[{type:"kern",size:t.fontMetrics().bigOpSpacing5},{type:"elem",elem:w.elem,marginLeft:-y+"em"},{type:"kern",size:w.kern},{type:"elem",elem:s}]},t)}else{if(!x)return s;var N=s.depth+b;O=Ze.makeVList({positionType:"bottom",positionData:N,children:[{type:"elem",elem:s},{type:"kern",size:x.kern},{type:"elem",elem:x.elem,marginLeft:y+"em"},{type:"kern",size:t.fontMetrics().bigOpSpacing5}]},t)}return Ze.makeSpan(["mop","op-limits"],[O],t)}return b&&(s.style.position="relative",s.style.top=b+"em"),s},Qn=function(e,t){var n;if(e.symbol)n=new Et("mo",[Nt(e.name,e.mode)]),u.contains(Zn,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new Et("mo",_t(e.body,t));else{n=new Et("mi",[new jt(e.name.slice(1))]);var r=new Et("mo",[Nt("\u2061","text")]);n=e.parentIsSupSub?new Et("mo",[n,r]):Ct([n,r])}return n},Kn={"\u220f":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22c0":"\\bigwedge","\u22c1":"\\bigvee","\u22c2":"\\bigcap","\u22c3":"\\bigcup","\u2a00":"\\bigodot","\u2a01":"\\bigoplus","\u2a02":"\\bigotimes","\u2a04":"\\biguplus","\u2a06":"\\bigsqcup"};st({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a04","\u2a06"],props:{numArgs:0},handler:function(e,t){var n=e.parser,r=e.funcName;return 1===r.length&&(r=Kn[r]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Xn,mathmlBuilder:Qn}),st({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ct(r)}},htmlBuilder:Xn,mathmlBuilder:Qn});var $n={"\u222b":"\\int","\u222c":"\\iint","\u222d":"\\iiint","\u222e":"\\oint","\u222f":"\\oiint","\u2230":"\\oiiint"};function Jn(e,t,n){for(var r=vt(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var a=r[o].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[a+1]==="reset-size"+t.size&&(r[o].classes[a+1]="reset-size"+n.size),r[o].height*=i,r[o].depth*=i}return Ze.makeFragment(r)}st({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Xn,mathmlBuilder:Qn}),st({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Xn,mathmlBuilder:Qn}),st({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222b","\u222c","\u222d","\u222e","\u222f","\u2230"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return 1===n.length&&(n=$n[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Xn,mathmlBuilder:Qn}),st({type:"operatorname",names:["\\operatorname"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=t[0];return{type:"operatorname",mode:n.mode,body:ct(r)}},htmlBuilder:function(e,t){if(e.body.length>0){for(var n=e.body.map((function(e){var t=e.text;return"string"===typeof t?{type:"textord",mode:e.mode,text:t}:e})),r=vt(n,t.withFont("mathrm"),!0),i=0;i<r.length;i++){var o=r[i];o instanceof D&&(o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}return Ze.makeSpan(["mop"],r,t)}return Ze.makeSpan(["mop"],[],t)},mathmlBuilder:function(e,t){for(var n=_t(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var o=n[i];if(o instanceof Mt.SpaceNode);else if(o instanceof Mt.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var a=o.children[0];1===o.children.length&&a instanceof Mt.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var s=n.map((function(e){return e.toText()})).join("");n=[new Mt.TextNode(s)]}var l=new Mt.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Mt.MathNode("mo",[Nt("\u2061","text")]);return Mt.newDocumentFragment([l,c])}}),lt({type:"ordgroup",htmlBuilder:function(e,t){return e.semisimple?Ze.makeFragment(vt(e.body,t,!1)):Ze.makeSpan(["mord"],vt(e.body,t,!0),t)},mathmlBuilder:function(e,t){return At(e.body,t)}}),st({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=kt(e.body,t.havingCrampedStyle()),r=Ze.makeLineSpan("overline-line",t),i=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*r.height},{type:"elem",elem:r},{type:"kern",size:r.height}]},t);return Ze.makeSpan(["mord","overline"],[i],t)},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mo",[new Mt.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new Mt.MathNode("mover",[It(e.body,t),n]);return r.setAttribute("accent","true"),r}}),st({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"phantom",mode:n.mode,body:ct(r)}},htmlBuilder:function(e,t){var n=vt(e.body,t.withPhantom(),!1);return Ze.makeFragment(n)},mathmlBuilder:function(e,t){var n=_t(e.body,t);return new Mt.MathNode("mphantom",n)}}),st({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=Ze.makeSpan([],[kt(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),Ze.makeSpan(["mord"],[n],t)},mathmlBuilder:function(e,t){var n=_t(ct(e.body),t),r=new Mt.MathNode("mphantom",n),i=new Mt.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),st({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=Ze.makeSpan(["inner"],[kt(e.body,t.withPhantom())]),r=Ze.makeSpan(["fix"],[]);return Ze.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:function(e,t){var n=_t(ct(e.body),t),r=new Mt.MathNode("mphantom",n),i=new Mt.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});var er=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],tr=function(e,t){var n=t.havingSize(e.size);return Jn(e.body,n,t)};st({type:"sizing",names:er,props:{numArgs:0,allowedInText:!0},handler:function(e,t){var n=e.breakOnTokenText,r=e.funcName,i=e.parser,o=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:er.indexOf(r)+1,body:o}},htmlBuilder:tr,mathmlBuilder:function(e,t){var n=t.havingSize(e.size),r=_t(e.body,n),i=new Mt.MathNode("mstyle",r);return i.setAttribute("mathsize",n.sizeMultiplier+"em"),i}}),st({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","text"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=Xe(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder:function(e,t){var n={type:"text",mode:e.mode,body:ct(e.body),font:"mathrm"},r={type:"sizing",mode:e.mode,body:[n],size:6},i=tr(r,t),o=Le(e.dy,t);return Ze.makeVList({positionType:"shift",positionData:-o,children:[{type:"elem",elem:i}]},t)},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mpadded",[It(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),st({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(e,t,n){var r=e.parser,i=n[0],o=Xe(t[0],"size"),a=Xe(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&Xe(i,"size").value,width:o.value,height:a.value}},htmlBuilder:function(e,t){var n=Ze.makeSpan(["mord","rule"],[],t),r=Le(e.width,t),i=Le(e.height,t),o=e.shift?Le(e.shift,t):0;return n.style.borderRightWidth=r+"em",n.style.borderTopWidth=i+"em",n.style.bottom=o+"em",n.width=r,n.height=i+o,n.depth=-o,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder:function(e,t){var n=Le(e.width,t),r=Le(e.height,t),i=e.shift?Le(e.shift,t):0,o=t.color&&t.getColor()||"black",a=new Mt.MathNode("mspace");a.setAttribute("mathbackground",o),a.setAttribute("width",n+"em"),a.setAttribute("height",r+"em");var s=new Mt.MathNode("mpadded",[a]);return i>=0?s.setAttribute("height","+"+i+"em"):(s.setAttribute("height",i+"em"),s.setAttribute("depth","+"+-i+"em")),s.setAttribute("voffset",i+"em"),s}}),st({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(e,t,n){var r=e.parser,i=!1,o=!1,a=n[0]&&Xe(n[0],"ordgroup");if(a)for(var s="",l=0;l<a.body.length;++l)if("t"===(s=a.body[l].text))i=!0;else{if("b"!==s){i=!1,o=!1;break}o=!0}else i=!0,o=!0;var c=t[0];return{type:"smash",mode:r.mode,body:c,smashHeight:i,smashDepth:o}},htmlBuilder:function(e,t){var n=Ze.makeSpan([],[kt(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var o=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return Ze.makeSpan(["mord"],[o],t)},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mpadded",[It(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),st({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,n){var r=e.parser,i=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:i}},htmlBuilder:function(e,t){var n=kt(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=Ze.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<k.TEXT.id&&(i=t.fontMetrics().xHeight);var o=r+i/4,a=n.height+n.depth+o+r,s=fn(a,t),l=s.span,c=s.ruleWidth,d=s.advanceWidth,u=l.height-c;u>n.height+n.depth+o&&(o=(o+u-n.height-n.depth)/2);var h=l.height-n.height-o-c;n.style.paddingLeft=d+"em";var p=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:l},{type:"kern",size:c}]},t);if(e.index){var f=t.havingStyle(k.SCRIPTSCRIPT),v=kt(e.index,f,t),g=.6*(p.height-p.depth),m=Ze.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:v}]},t),b=Ze.makeSpan(["root"],[m]);return Ze.makeSpan(["mord","sqrt"],[b,p],t)}return Ze.makeSpan(["mord","sqrt"],[p],t)},mathmlBuilder:function(e,t){var n=e.body,r=e.index;return r?new Mt.MathNode("mroot",[It(n,t),It(r,t)]):new Mt.MathNode("msqrt",[It(n,t)])}});var nr={display:k.DISPLAY,text:k.TEXT,script:k.SCRIPT,scriptscript:k.SCRIPTSCRIPT};st({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(e,t){var n=e.breakOnTokenText,r=e.funcName,i=e.parser,o=i.parseExpression(!0,n),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:a,body:o}},htmlBuilder:function(e,t){var n=nr[e.style],r=t.havingStyle(n).withFont("");return Jn(e.body,r,t)},mathmlBuilder:function(e,t){var n={display:k.DISPLAY,text:k.TEXT,script:k.SCRIPT,scriptscript:k.SCRIPTSCRIPT}[e.style],r=t.havingStyle(n),i=_t(e.body,r),o=new Mt.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}}),lt({type:"supsub",htmlBuilder:function(e,t){var n=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===k.DISPLAY.size||n.alwaysHandleSupSub)?Xn:null:"accent"===n.type?u.isCharacterBox(n.base)?qt:null:"horizBrace"===n.type&&!e.sub===n.isOver?Yn:null:null}(e,t);if(n)return n(e,t);var r,i,o,a=e.base,s=e.sup,l=e.sub,c=kt(a,t),d=t.fontMetrics(),h=0,p=0,f=a&&u.isCharacterBox(a);if(s){var v=t.havingStyle(t.style.sup());r=kt(s,v,t),f||(h=c.height-v.fontMetrics().supDrop*v.sizeMultiplier/t.sizeMultiplier)}if(l){var g=t.havingStyle(t.style.sub());i=kt(l,g,t),f||(p=c.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}o=t.style===k.DISPLAY?d.sup1:t.style.cramped?d.sup3:d.sup2;var m,b=t.sizeMultiplier,y=.5/d.ptPerEm/b+"em",w=null;if(i){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(c instanceof D||x)&&(w=-c.italic+"em")}if(r&&i){h=Math.max(h,o,r.depth+.25*d.xHeight),p=Math.max(p,d.sub2);var O=4*d.defaultRuleThickness;if(h-r.depth-(i.height-p)<O){p=O-(h-r.depth)+i.height;var C=.8*d.xHeight-(h-r.depth);C>0&&(h+=C,p-=C)}var E=[{type:"elem",elem:i,shift:p,marginRight:y,marginLeft:w},{type:"elem",elem:r,shift:-h,marginRight:y}];m=Ze.makeVList({positionType:"individualShift",children:E},t)}else if(i){p=Math.max(p,d.sub1,i.height-.8*d.xHeight);var j=[{type:"elem",elem:i,marginLeft:w,marginRight:y}];m=Ze.makeVList({positionType:"shift",positionData:p,children:j},t)}else{if(!r)throw new Error("supsub must have either sup or sub.");h=Math.max(h,o,r.depth+.25*d.xHeight),m=Ze.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:r,marginRight:y}]},t)}var M=yt(c,"right")||"mord";return Ze.makeSpan([M],[c,Ze.makeSpan(["msupsub"],[m])],t)},mathmlBuilder:function(e,t){var n,r=!1,i=Qe(e.base,"horizBrace");i&&!!e.sup===i.isOver&&(r=!0,n=i.isOver),e.base&&"op"===e.base.type&&(e.base.parentIsSupSub=!0);var o,a=[It(e.base,t)];if(e.sub&&a.push(It(e.sub,t)),e.sup&&a.push(It(e.sup,t)),r)o=n?"mover":"munder";else if(e.sub)if(e.sup){var s=e.base;o=s&&"op"===s.type&&s.limits&&t.style===k.DISPLAY?"munderover":"msubsup"}else{var l=e.base;o=l&&"op"===l.type&&l.limits&&(t.style===k.DISPLAY||l.alwaysHandleSupSub)?"munder":"msub"}else{var c=e.base;o=c&&"op"===c.type&&c.limits&&(t.style===k.DISPLAY||c.alwaysHandleSupSub)?"mover":"msup"}return new Mt.MathNode(o,a)}}),lt({type:"atom",htmlBuilder:function(e,t){return Ze.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mo",[Nt(e.text,e.mode)]);if("bin"===e.family){var r=Tt(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||n.setAttribute("stretchy","false");return n}});var rr={mi:"italic",mn:"normal",mtext:"normal"};lt({type:"mathord",htmlBuilder:function(e,t){return Ze.makeOrd(e,t,"mathord")},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mi",[Nt(e.text,e.mode,t)]),r=Tt(e,t)||"italic";return r!==rr[n.type]&&n.setAttribute("mathvariant",r),n}}),lt({type:"textord",htmlBuilder:function(e,t){return Ze.makeOrd(e,t,"textord")},mathmlBuilder:function(e,t){var n,r=Nt(e.text,e.mode,t),i=Tt(e,t)||"normal";return n="text"===e.mode?new Mt.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new Mt.MathNode("mn",[r]):"\\prime"===e.text?new Mt.MathNode("mo",[r]):new Mt.MathNode("mi",[r]),i!==rr[n.type]&&n.setAttribute("mathvariant",i),n}});var ir={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},or={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};lt({type:"spacing",htmlBuilder:function(e,t){if(or.hasOwnProperty(e.text)){var n=or[e.text].className||"";if("text"===e.mode){var r=Ze.makeOrd(e,t,"textord");return r.classes.push(n),r}return Ze.makeSpan(["mspace",n],[Ze.mathsym(e.text,e.mode,t)],t)}if(ir.hasOwnProperty(e.text))return Ze.makeSpan(["mspace",ir[e.text]],[],t);throw new a('Unknown type of space "'+e.text+'"')},mathmlBuilder:function(e,t){if(!or.hasOwnProperty(e.text)){if(ir.hasOwnProperty(e.text))return new Mt.MathNode("mspace");throw new a('Unknown type of space "'+e.text+'"')}return new Mt.MathNode("mtext",[new Mt.TextNode("\xa0")])}});var ar=function(){var e=new Mt.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};lt({type:"tag",mathmlBuilder:function(e,t){var n=new Mt.MathNode("mtable",[new Mt.MathNode("mtr",[ar(),new Mt.MathNode("mtd",[At(e.body,t)]),ar(),new Mt.MathNode("mtd",[At(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var sr={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},lr={"\\textbf":"textbf","\\textmd":"textmd"},cr={"\\textit":"textit","\\textup":"textup"},dr=function(e,t){var n=e.font;return n?sr[n]?t.withTextFontFamily(sr[n]):lr[n]?t.withTextFontWeight(lr[n]):t.withTextFontShape(cr[n]):t};st({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0,consumeMode:"text"},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"text",mode:n.mode,body:ct(i),font:r}},htmlBuilder:function(e,t){var n=dr(e,t),r=vt(e.body,n,!0);return Ze.makeSpan(["mord","text"],Ze.tryCombineChars(r),n)},mathmlBuilder:function(e,t){var n=dr(e,t);return At(e.body,n)}}),st({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){return{type:"underline",mode:e.parser.mode,body:t[0]}},htmlBuilder:function(e,t){var n=kt(e.body,t),r=Ze.makeLineSpan("underline-line",t),i=Ze.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:r.height},{type:"elem",elem:r},{type:"kern",size:3*r.height},{type:"elem",elem:n}]},t);return Ze.makeSpan(["mord","underline"],[i],t)},mathmlBuilder:function(e,t){var n=new Mt.MathNode("mo",[new Mt.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new Mt.MathNode("munder",[It(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),st({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(e,t,n){throw new a("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(e,t){for(var n=ur(e),r=[],i=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var a=n[o];"~"===a&&(a="\\textasciitilde"),r.push(Ze.makeSymbol(a,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Ze.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Ze.tryCombineChars(r),i)},mathmlBuilder:function(e,t){var n=new Mt.TextNode(ur(e)),r=new Mt.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var ur=function(e){return e.body.replace(/ /g,e.star?"\u2423":"\xa0")},hr=it,pr="[ \r\n\t]",fr="\\\\[a-zA-Z@]+",vr=""+fr+pr+"*",gr=new RegExp("^("+fr+")"+pr+"*$"),mr="[\u0300-\u036f]",br=new RegExp(mr+"+$"),yr="("+pr+"+)|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff]"+mr+"*|[\ud800-\udbff][\udc00-\udfff]"+mr+"*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|"+vr+"|\\\\[^\ud800-\udfff])",wr=function(){function e(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(yr,"g"),this.catcodes={"%":14}}var t=e.prototype;return t.setCatcode=function(e,t){this.catcodes[e]=t},t.lex=function(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new i("EOF",new r(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new a("Unexpected character: '"+e[t]+"'",new i(e[t],new r(this,t,t+1)));var o=n[2]||" ";if(14===this.catcodes[o]){var s=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}var l=o.match(gr);return l&&(o=l[1]),new i(o,new r(this,t,this.tokenRegex.lastIndex))},e}(),kr=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}var t=e.prototype;return t.beginGroup=function(){this.undefStack.push({})},t.endGroup=function(){if(0===this.undefStack.length)throw new a("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?delete this.current[t]:this.current[t]=e[t])},t.has=function(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)},t.get=function(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]},t.set=function(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}this.current[e]=t},e}(),xr={},Or=xr;function Cr(e,t){xr[e]=t}Cr("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),Cr("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),Cr("\\@ifnextchar",(function(e){var t=e.consumeArgs(3),n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),Cr("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Cr("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var Er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Cr("\\char",(function(e){var t,n=e.popToken(),r="";if("'"===n.text)t=8,n=e.popToken();else if('"'===n.text)t=16,n=e.popToken();else if("`"===n.text)if("\\"===(n=e.popToken()).text[0])r=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new a("\\char` missing argument");r=n.text.charCodeAt(0)}else t=10;if(t){if(null==(r=Er[n.text])||r>=t)throw new a("Invalid base-"+t+" digit "+n.text);for(var i;null!=(i=Er[e.future().text])&&i<t;)r*=t,r+=i,e.popToken()}return"\\@char{"+r+"}"}));var jr=function(e,t){var n=e.consumeArgs(1)[0];if(1!==n.length)throw new a("\\gdef's first argument must be a macro name");var r=n[0].text,i=0;for(n=e.consumeArgs(1)[0];1===n.length&&"#"===n[0].text;){if(1!==(n=e.consumeArgs(1)[0]).length)throw new a('Invalid argument number length "'+n.length+'"');if(!/^[1-9]$/.test(n[0].text))throw new a('Invalid argument number "'+n[0].text+'"');if(i++,parseInt(n[0].text)!==i)throw new a('Argument number "'+n[0].text+'" out of order');n=e.consumeArgs(1)[0]}return e.macros.set(r,{tokens:n,numArgs:i},t),""};Cr("\\gdef",(function(e){return jr(e,!0)})),Cr("\\def",(function(e){return jr(e,!1)})),Cr("\\global",(function(e){var t=e.consumeArgs(1)[0];if(1!==t.length)throw new a("Invalid command after \\global");var n=t[0].text;if("\\def"===n)return jr(e,!0);throw new a("Invalid command '"+n+"' after \\global")}));var Mr=function(e,t,n){var r=e.consumeArgs(1)[0];if(1!==r.length)throw new a("\\newcommand's first argument must be a macro name");var i=r[0].text,o=e.isDefined(i);if(o&&!t)throw new a("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!o&&!n)throw new a("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var s=0;if(1===(r=e.consumeArgs(1)[0]).length&&"["===r[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new a("Invalid number of arguments: "+l);s=parseInt(l),r=e.consumeArgs(1)[0]}return e.macros.set(i,{tokens:r,numArgs:s}),""};Cr("\\newcommand",(function(e){return Mr(e,!1,!0)})),Cr("\\renewcommand",(function(e){return Mr(e,!0,!1)})),Cr("\\providecommand",(function(e){return Mr(e,!0,!0)})),Cr("\\bgroup","{"),Cr("\\egroup","}"),Cr("\\lq","`"),Cr("\\rq","'"),Cr("\\aa","\\r a"),Cr("\\AA","\\r A"),Cr("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}"),Cr("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Cr("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}"),Cr("\u212c","\\mathscr{B}"),Cr("\u2130","\\mathscr{E}"),Cr("\u2131","\\mathscr{F}"),Cr("\u210b","\\mathscr{H}"),Cr("\u2110","\\mathscr{I}"),Cr("\u2112","\\mathscr{L}"),Cr("\u2133","\\mathscr{M}"),Cr("\u211b","\\mathscr{R}"),Cr("\u212d","\\mathfrak{C}"),Cr("\u210c","\\mathfrak{H}"),Cr("\u2128","\\mathfrak{Z}"),Cr("\\Bbbk","\\Bbb{k}"),Cr("\xb7","\\cdotp"),Cr("\\llap","\\mathllap{\\textrm{#1}}"),Cr("\\rlap","\\mathrlap{\\textrm{#1}}"),Cr("\\clap","\\mathclap{\\textrm{#1}}"),Cr("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Cr("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),Cr("\\ne","\\neq"),Cr("\u2260","\\neq"),Cr("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),Cr("\u2209","\\notin"),Cr("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),Cr("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),Cr("\u225a","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225a}}"),Cr("\u225b","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225b}}"),Cr("\u225d","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225d}}"),Cr("\u225e","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225e}}"),Cr("\u225f","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225f}}"),Cr("\u27c2","\\perp"),Cr("\u203c","\\mathclose{!\\mkern-0.8mu!}"),Cr("\u220c","\\notni"),Cr("\u231c","\\ulcorner"),Cr("\u231d","\\urcorner"),Cr("\u231e","\\llcorner"),Cr("\u231f","\\lrcorner"),Cr("\xa9","\\copyright"),Cr("\xae","\\textregistered"),Cr("\ufe0f","\\textregistered"),Cr("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Cr("\u22ee","\\vdots"),Cr("\\varGamma","\\mathit{\\Gamma}"),Cr("\\varDelta","\\mathit{\\Delta}"),Cr("\\varTheta","\\mathit{\\Theta}"),Cr("\\varLambda","\\mathit{\\Lambda}"),Cr("\\varXi","\\mathit{\\Xi}"),Cr("\\varPi","\\mathit{\\Pi}"),Cr("\\varSigma","\\mathit{\\Sigma}"),Cr("\\varUpsilon","\\mathit{\\Upsilon}"),Cr("\\varPhi","\\mathit{\\Phi}"),Cr("\\varPsi","\\mathit{\\Psi}"),Cr("\\varOmega","\\mathit{\\Omega}"),Cr("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Cr("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Cr("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Cr("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Cr("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var Nr={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Cr("\\dots",(function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in Nr?t=Nr[n]:("\\not"===n.substr(0,4)||n in Y.math&&u.contains(["bin","rel"],Y.math[n].group))&&(t="\\dotsb"),t}));var Sr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Cr("\\dotso",(function(e){return e.future().text in Sr?"\\ldots\\,":"\\ldots"})),Cr("\\dotsc",(function(e){var t=e.future().text;return t in Sr&&","!==t?"\\ldots\\,":"\\ldots"})),Cr("\\cdots",(function(e){return e.future().text in Sr?"\\@cdots\\,":"\\@cdots"})),Cr("\\dotsb","\\cdots"),Cr("\\dotsm","\\cdots"),Cr("\\dotsi","\\!\\cdots"),Cr("\\dotsx","\\ldots\\,"),Cr("\\DOTSI","\\relax"),Cr("\\DOTSB","\\relax"),Cr("\\DOTSX","\\relax"),Cr("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Cr("\\,","\\tmspace+{3mu}{.1667em}"),Cr("\\thinspace","\\,"),Cr("\\>","\\mskip{4mu}"),Cr("\\:","\\tmspace+{4mu}{.2222em}"),Cr("\\medspace","\\:"),Cr("\\;","\\tmspace+{5mu}{.2777em}"),Cr("\\thickspace","\\;"),Cr("\\!","\\tmspace-{3mu}{.1667em}"),Cr("\\negthinspace","\\!"),Cr("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Cr("\\negthickspace","\\tmspace-{5mu}{.277em}"),Cr("\\enspace","\\kern.5em "),Cr("\\enskip","\\hskip.5em\\relax"),Cr("\\quad","\\hskip1em\\relax"),Cr("\\qquad","\\hskip2em\\relax"),Cr("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Cr("\\tag@paren","\\tag@literal{({#1})}"),Cr("\\tag@literal",(function(e){if(e.macros.get("\\df@tag"))throw new a("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),Cr("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Cr("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Cr("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Cr("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Cr("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\mathrlap{\\mkern0.4mu\\raisebox{0.4mu}{$#1$}}{\\mkern0.8mu#1}}}{\\mathbf{#1}}"),Cr("\\\\","\\newline"),Cr("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Tr=B["Main-Regular"]["T".charCodeAt(0)][1]-.7*B["Main-Regular"]["A".charCodeAt(0)][1]+"em";Cr("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Tr+"}{\\scriptsize A}\\kern-.15em\\TeX}{LaTeX}}"),Cr("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Tr+"}{\\scriptsize A}\\kern-.15em\\TeX}{KaTeX}}"),Cr("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Cr("\\@hspace","\\hskip #1\\relax"),Cr("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Cr("\\ordinarycolon",":"),Cr("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Cr("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Cr("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Cr("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Cr("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Cr("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Cr("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Cr("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Cr("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Cr("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Cr("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Cr("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Cr("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Cr("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Cr("\u2237","\\dblcolon"),Cr("\u2239","\\eqcolon"),Cr("\u2254","\\coloneqq"),Cr("\u2255","\\eqqcolon"),Cr("\u2a74","\\Coloneqq"),Cr("\\ratio","\\vcentcolon"),Cr("\\coloncolon","\\dblcolon"),Cr("\\colonequals","\\coloneqq"),Cr("\\coloncolonequals","\\Coloneqq"),Cr("\\equalscolon","\\eqqcolon"),Cr("\\equalscoloncolon","\\Eqqcolon"),Cr("\\colonminus","\\coloneq"),Cr("\\coloncolonminus","\\Coloneq"),Cr("\\minuscolon","\\eqcolon"),Cr("\\minuscoloncolon","\\Eqcolon"),Cr("\\coloncolonapprox","\\Colonapprox"),Cr("\\coloncolonsim","\\Colonsim"),Cr("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Cr("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Cr("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Cr("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Cr("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220c}}"),Cr("\\limsup","\\DOTSB\\mathop{\\operatorname{lim\\,sup}}\\limits"),Cr("\\liminf","\\DOTSB\\mathop{\\operatorname{lim\\,inf}}\\limits"),Cr("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),Cr("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),Cr("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),Cr("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),Cr("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),Cr("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),Cr("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),Cr("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),Cr("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),Cr("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),Cr("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228a}"),Cr("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2acb}"),Cr("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228b}"),Cr("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2acc}"),Cr("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27e6}}"),Cr("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27e7}}"),Cr("\u27e6","\\llbracket"),Cr("\u27e7","\\rrbracket"),Cr("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),Cr("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),Cr("\u2983","\\lBrace"),Cr("\u2984","\\rBrace"),Cr("\\darr","\\downarrow"),Cr("\\dArr","\\Downarrow"),Cr("\\Darr","\\Downarrow"),Cr("\\lang","\\langle"),Cr("\\rang","\\rangle"),Cr("\\uarr","\\uparrow"),Cr("\\uArr","\\Uparrow"),Cr("\\Uarr","\\Uparrow"),Cr("\\N","\\mathbb{N}"),Cr("\\R","\\mathbb{R}"),Cr("\\Z","\\mathbb{Z}"),Cr("\\alef","\\aleph"),Cr("\\alefsym","\\aleph"),Cr("\\Alpha","\\mathrm{A}"),Cr("\\Beta","\\mathrm{B}"),Cr("\\bull","\\bullet"),Cr("\\Chi","\\mathrm{X}"),Cr("\\clubs","\\clubsuit"),Cr("\\cnums","\\mathbb{C}"),Cr("\\Complex","\\mathbb{C}"),Cr("\\Dagger","\\ddagger"),Cr("\\diamonds","\\diamondsuit"),Cr("\\empty","\\emptyset"),Cr("\\Epsilon","\\mathrm{E}"),Cr("\\Eta","\\mathrm{H}"),Cr("\\exist","\\exists"),Cr("\\harr","\\leftrightarrow"),Cr("\\hArr","\\Leftrightarrow"),Cr("\\Harr","\\Leftrightarrow"),Cr("\\hearts","\\heartsuit"),Cr("\\image","\\Im"),Cr("\\infin","\\infty"),Cr("\\Iota","\\mathrm{I}"),Cr("\\isin","\\in"),Cr("\\Kappa","\\mathrm{K}"),Cr("\\larr","\\leftarrow"),Cr("\\lArr","\\Leftarrow"),Cr("\\Larr","\\Leftarrow"),Cr("\\lrarr","\\leftrightarrow"),Cr("\\lrArr","\\Leftrightarrow"),Cr("\\Lrarr","\\Leftrightarrow"),Cr("\\Mu","\\mathrm{M}"),Cr("\\natnums","\\mathbb{N}"),Cr("\\Nu","\\mathrm{N}"),Cr("\\Omicron","\\mathrm{O}"),Cr("\\plusmn","\\pm"),Cr("\\rarr","\\rightarrow"),Cr("\\rArr","\\Rightarrow"),Cr("\\Rarr","\\Rightarrow"),Cr("\\real","\\Re"),Cr("\\reals","\\mathbb{R}"),Cr("\\Reals","\\mathbb{R}"),Cr("\\Rho","\\mathrm{P}"),Cr("\\sdot","\\cdot"),Cr("\\sect","\\S"),Cr("\\spades","\\spadesuit"),Cr("\\sub","\\subset"),Cr("\\sube","\\subseteq"),Cr("\\supe","\\supseteq"),Cr("\\Tau","\\mathrm{T}"),Cr("\\thetasym","\\vartheta"),Cr("\\weierp","\\wp"),Cr("\\Zeta","\\mathrm{Z}"),Cr("\\argmin","\\DOTSB\\mathop{\\operatorname{arg\\,min}}\\limits"),Cr("\\argmax","\\DOTSB\\mathop{\\operatorname{arg\\,max}}\\limits"),Cr("\\blue","\\textcolor{##6495ed}{#1}"),Cr("\\orange","\\textcolor{##ffa500}{#1}"),Cr("\\pink","\\textcolor{##ff00af}{#1}"),Cr("\\red","\\textcolor{##df0030}{#1}"),Cr("\\green","\\textcolor{##28ae7b}{#1}"),Cr("\\gray","\\textcolor{gray}{##1}"),Cr("\\purple","\\textcolor{##9d38bd}{#1}"),Cr("\\blueA","\\textcolor{##ccfaff}{#1}"),Cr("\\blueB","\\textcolor{##80f6ff}{#1}"),Cr("\\blueC","\\textcolor{##63d9ea}{#1}"),Cr("\\blueD","\\textcolor{##11accd}{#1}"),Cr("\\blueE","\\textcolor{##0c7f99}{#1}"),Cr("\\tealA","\\textcolor{##94fff5}{#1}"),Cr("\\tealB","\\textcolor{##26edd5}{#1}"),Cr("\\tealC","\\textcolor{##01d1c1}{#1}"),Cr("\\tealD","\\textcolor{##01a995}{#1}"),Cr("\\tealE","\\textcolor{##208170}{#1}"),Cr("\\greenA","\\textcolor{##b6ffb0}{#1}"),Cr("\\greenB","\\textcolor{##8af281}{#1}"),Cr("\\greenC","\\textcolor{##74cf70}{#1}"),Cr("\\greenD","\\textcolor{##1fab54}{#1}"),Cr("\\greenE","\\textcolor{##0d923f}{#1}"),Cr("\\goldA","\\textcolor{##ffd0a9}{#1}"),Cr("\\goldB","\\textcolor{##ffbb71}{#1}"),Cr("\\goldC","\\textcolor{##ff9c39}{#1}"),Cr("\\goldD","\\textcolor{##e07d10}{#1}"),Cr("\\goldE","\\textcolor{##a75a05}{#1}"),Cr("\\redA","\\textcolor{##fca9a9}{#1}"),Cr("\\redB","\\textcolor{##ff8482}{#1}"),Cr("\\redC","\\textcolor{##f9685d}{#1}"),Cr("\\redD","\\textcolor{##e84d39}{#1}"),Cr("\\redE","\\textcolor{##bc2612}{#1}"),Cr("\\maroonA","\\textcolor{##ffbde0}{#1}"),Cr("\\maroonB","\\textcolor{##ff92c6}{#1}"),Cr("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Cr("\\maroonD","\\textcolor{##ca337c}{#1}"),Cr("\\maroonE","\\textcolor{##9e034e}{#1}"),Cr("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Cr("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Cr("\\purpleC","\\textcolor{##aa87ff}{#1}"),Cr("\\purpleD","\\textcolor{##7854ab}{#1}"),Cr("\\purpleE","\\textcolor{##543b78}{#1}"),Cr("\\mintA","\\textcolor{##f5f9e8}{#1}"),Cr("\\mintB","\\textcolor{##edf2df}{#1}"),Cr("\\mintC","\\textcolor{##e0e5cc}{#1}"),Cr("\\grayA","\\textcolor{##f6f7f7}{#1}"),Cr("\\grayB","\\textcolor{##f0f1f2}{#1}"),Cr("\\grayC","\\textcolor{##e3e5e6}{#1}"),Cr("\\grayD","\\textcolor{##d6d8da}{#1}"),Cr("\\grayE","\\textcolor{##babec2}{#1}"),Cr("\\grayF","\\textcolor{##888d93}{#1}"),Cr("\\grayG","\\textcolor{##626569}{#1}"),Cr("\\grayH","\\textcolor{##3b3e40}{#1}"),Cr("\\grayI","\\textcolor{##21242c}{#1}"),Cr("\\kaBlue","\\textcolor{##314453}{#1}"),Cr("\\kaGreen","\\textcolor{##71B307}{#1}");var _r={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Ar=function(){function e(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new kr(Or,t.macros),this.mode=n,this.stack=[]}var t=e.prototype;return t.feed=function(e){this.lexer=new wr(e,this.settings)},t.switchMode=function(e){this.mode=e},t.beginGroup=function(){this.macros.beginGroup()},t.endGroup=function(){this.macros.endGroup()},t.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},t.popToken=function(){return this.future(),this.stack.pop()},t.pushToken=function(e){this.stack.push(e)},t.pushTokens=function(e){var t;(t=this.stack).push.apply(t,e)},t.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},t.consumeArgs=function(e){for(var t=[],n=0;n<e;++n){this.consumeSpaces();var r=this.popToken();if("{"===r.text){for(var i=[],o=1;0!==o;){var s=this.popToken();if(i.push(s),"{"===s.text)++o;else if("}"===s.text)--o;else if("EOF"===s.text)throw new a("End of input in macro argument",r)}i.pop(),i.reverse(),t[n]=i}else{if("EOF"===r.text)throw new a("End of input expecting macro argument");t[n]=[r]}}return t},t.expandOnce=function(){var e=this.popToken(),t=e.text,n=this._getExpansion(t);if(null==n)return this.pushToken(e),e;if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new a("Too many expansions: infinite loop or need to increase maxExpand setting");var r=n.tokens;if(n.numArgs)for(var i=this.consumeArgs(n.numArgs),o=(r=r.slice()).length-1;o>=0;--o){var s=r[o];if("#"===s.text){if(0===o)throw new a("Incomplete placeholder at end of macro body",s);if("#"===(s=r[--o]).text)r.splice(o+1,1);else{if(!/^[1-9]$/.test(s.text))throw new a("Not a valid argument number",s);var l;(l=r).splice.apply(l,[o,2].concat(i[+s.text-1]))}}}return this.pushTokens(r),r},t.expandAfterFuture=function(){return this.expandOnce(),this.future()},t.expandNextToken=function(){for(;;){var e=this.expandOnce();if(e instanceof i){if("\\relax"!==e.text)return this.stack.pop();this.stack.pop()}}throw new Error},t.expandMacro=function(e){if(this.macros.get(e)){var t=[],n=this.stack.length;for(this.pushToken(new i(e));this.stack.length>n;)this.expandOnce()instanceof i&&t.push(this.stack.pop());return t}},t.expandMacroAsText=function(e){var t=this.expandMacro(e);return t?t.map((function(e){return e.text})).join(""):t},t._getExpansion=function(e){var t=this.macros.get(e);if(null==t)return t;var n="function"===typeof t?t(this):t;if("string"===typeof n){var r=0;if(-1!==n.indexOf("#"))for(var i=n.replace(/##/g,"");-1!==i.indexOf("#"+(r+1));)++r;for(var o=new wr(n,this.settings),a=[],s=o.lex();"EOF"!==s.text;)a.push(s),s=o.lex();return a.reverse(),{tokens:a,numArgs:r}}return n},t.isDefined=function(e){return this.macros.has(e)||hr.hasOwnProperty(e)||Y.math.hasOwnProperty(e)||Y.text.hasOwnProperty(e)||_r.hasOwnProperty(e)},e}(),Ir={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030c":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030a":{text:"\\r",math:"\\mathring"},"\u030b":{text:"\\H"}},Dr={"\xe1":"a\u0301","\xe0":"a\u0300","\xe4":"a\u0308","\u01df":"a\u0308\u0304","\xe3":"a\u0303","\u0101":"a\u0304","\u0103":"a\u0306","\u1eaf":"a\u0306\u0301","\u1eb1":"a\u0306\u0300","\u1eb5":"a\u0306\u0303","\u01ce":"a\u030c","\xe2":"a\u0302","\u1ea5":"a\u0302\u0301","\u1ea7":"a\u0302\u0300","\u1eab":"a\u0302\u0303","\u0227":"a\u0307","\u01e1":"a\u0307\u0304","\xe5":"a\u030a","\u01fb":"a\u030a\u0301","\u1e03":"b\u0307","\u0107":"c\u0301","\u010d":"c\u030c","\u0109":"c\u0302","\u010b":"c\u0307","\u010f":"d\u030c","\u1e0b":"d\u0307","\xe9":"e\u0301","\xe8":"e\u0300","\xeb":"e\u0308","\u1ebd":"e\u0303","\u0113":"e\u0304","\u1e17":"e\u0304\u0301","\u1e15":"e\u0304\u0300","\u0115":"e\u0306","\u011b":"e\u030c","\xea":"e\u0302","\u1ebf":"e\u0302\u0301","\u1ec1":"e\u0302\u0300","\u1ec5":"e\u0302\u0303","\u0117":"e\u0307","\u1e1f":"f\u0307","\u01f5":"g\u0301","\u1e21":"g\u0304","\u011f":"g\u0306","\u01e7":"g\u030c","\u011d":"g\u0302","\u0121":"g\u0307","\u1e27":"h\u0308","\u021f":"h\u030c","\u0125":"h\u0302","\u1e23":"h\u0307","\xed":"i\u0301","\xec":"i\u0300","\xef":"i\u0308","\u1e2f":"i\u0308\u0301","\u0129":"i\u0303","\u012b":"i\u0304","\u012d":"i\u0306","\u01d0":"i\u030c","\xee":"i\u0302","\u01f0":"j\u030c","\u0135":"j\u0302","\u1e31":"k\u0301","\u01e9":"k\u030c","\u013a":"l\u0301","\u013e":"l\u030c","\u1e3f":"m\u0301","\u1e41":"m\u0307","\u0144":"n\u0301","\u01f9":"n\u0300","\xf1":"n\u0303","\u0148":"n\u030c","\u1e45":"n\u0307","\xf3":"o\u0301","\xf2":"o\u0300","\xf6":"o\u0308","\u022b":"o\u0308\u0304","\xf5":"o\u0303","\u1e4d":"o\u0303\u0301","\u1e4f":"o\u0303\u0308","\u022d":"o\u0303\u0304","\u014d":"o\u0304","\u1e53":"o\u0304\u0301","\u1e51":"o\u0304\u0300","\u014f":"o\u0306","\u01d2":"o\u030c","\xf4":"o\u0302","\u1ed1":"o\u0302\u0301","\u1ed3":"o\u0302\u0300","\u1ed7":"o\u0302\u0303","\u022f":"o\u0307","\u0231":"o\u0307\u0304","\u0151":"o\u030b","\u1e55":"p\u0301","\u1e57":"p\u0307","\u0155":"r\u0301","\u0159":"r\u030c","\u1e59":"r\u0307","\u015b":"s\u0301","\u1e65":"s\u0301\u0307","\u0161":"s\u030c","\u1e67":"s\u030c\u0307","\u015d":"s\u0302","\u1e61":"s\u0307","\u1e97":"t\u0308","\u0165":"t\u030c","\u1e6b":"t\u0307","\xfa":"u\u0301","\xf9":"u\u0300","\xfc":"u\u0308","\u01d8":"u\u0308\u0301","\u01dc":"u\u0308\u0300","\u01d6":"u\u0308\u0304","\u01da":"u\u0308\u030c","\u0169":"u\u0303","\u1e79":"u\u0303\u0301","\u016b":"u\u0304","\u1e7b":"u\u0304\u0308","\u016d":"u\u0306","\u01d4":"u\u030c","\xfb":"u\u0302","\u016f":"u\u030a","\u0171":"u\u030b","\u1e7d":"v\u0303","\u1e83":"w\u0301","\u1e81":"w\u0300","\u1e85":"w\u0308","\u0175":"w\u0302","\u1e87":"w\u0307","\u1e98":"w\u030a","\u1e8d":"x\u0308","\u1e8b":"x\u0307","\xfd":"y\u0301","\u1ef3":"y\u0300","\xff":"y\u0308","\u1ef9":"y\u0303","\u0233":"y\u0304","\u0177":"y\u0302","\u1e8f":"y\u0307","\u1e99":"y\u030a","\u017a":"z\u0301","\u017e":"z\u030c","\u1e91":"z\u0302","\u017c":"z\u0307","\xc1":"A\u0301","\xc0":"A\u0300","\xc4":"A\u0308","\u01de":"A\u0308\u0304","\xc3":"A\u0303","\u0100":"A\u0304","\u0102":"A\u0306","\u1eae":"A\u0306\u0301","\u1eb0":"A\u0306\u0300","\u1eb4":"A\u0306\u0303","\u01cd":"A\u030c","\xc2":"A\u0302","\u1ea4":"A\u0302\u0301","\u1ea6":"A\u0302\u0300","\u1eaa":"A\u0302\u0303","\u0226":"A\u0307","\u01e0":"A\u0307\u0304","\xc5":"A\u030a","\u01fa":"A\u030a\u0301","\u1e02":"B\u0307","\u0106":"C\u0301","\u010c":"C\u030c","\u0108":"C\u0302","\u010a":"C\u0307","\u010e":"D\u030c","\u1e0a":"D\u0307","\xc9":"E\u0301","\xc8":"E\u0300","\xcb":"E\u0308","\u1ebc":"E\u0303","\u0112":"E\u0304","\u1e16":"E\u0304\u0301","\u1e14":"E\u0304\u0300","\u0114":"E\u0306","\u011a":"E\u030c","\xca":"E\u0302","\u1ebe":"E\u0302\u0301","\u1ec0":"E\u0302\u0300","\u1ec4":"E\u0302\u0303","\u0116":"E\u0307","\u1e1e":"F\u0307","\u01f4":"G\u0301","\u1e20":"G\u0304","\u011e":"G\u0306","\u01e6":"G\u030c","\u011c":"G\u0302","\u0120":"G\u0307","\u1e26":"H\u0308","\u021e":"H\u030c","\u0124":"H\u0302","\u1e22":"H\u0307","\xcd":"I\u0301","\xcc":"I\u0300","\xcf":"I\u0308","\u1e2e":"I\u0308\u0301","\u0128":"I\u0303","\u012a":"I\u0304","\u012c":"I\u0306","\u01cf":"I\u030c","\xce":"I\u0302","\u0130":"I\u0307","\u0134":"J\u0302","\u1e30":"K\u0301","\u01e8":"K\u030c","\u0139":"L\u0301","\u013d":"L\u030c","\u1e3e":"M\u0301","\u1e40":"M\u0307","\u0143":"N\u0301","\u01f8":"N\u0300","\xd1":"N\u0303","\u0147":"N\u030c","\u1e44":"N\u0307","\xd3":"O\u0301","\xd2":"O\u0300","\xd6":"O\u0308","\u022a":"O\u0308\u0304","\xd5":"O\u0303","\u1e4c":"O\u0303\u0301","\u1e4e":"O\u0303\u0308","\u022c":"O\u0303\u0304","\u014c":"O\u0304","\u1e52":"O\u0304\u0301","\u1e50":"O\u0304\u0300","\u014e":"O\u0306","\u01d1":"O\u030c","\xd4":"O\u0302","\u1ed0":"O\u0302\u0301","\u1ed2":"O\u0302\u0300","\u1ed6":"O\u0302\u0303","\u022e":"O\u0307","\u0230":"O\u0307\u0304","\u0150":"O\u030b","\u1e54":"P\u0301","\u1e56":"P\u0307","\u0154":"R\u0301","\u0158":"R\u030c","\u1e58":"R\u0307","\u015a":"S\u0301","\u1e64":"S\u0301\u0307","\u0160":"S\u030c","\u1e66":"S\u030c\u0307","\u015c":"S\u0302","\u1e60":"S\u0307","\u0164":"T\u030c","\u1e6a":"T\u0307","\xda":"U\u0301","\xd9":"U\u0300","\xdc":"U\u0308","\u01d7":"U\u0308\u0301","\u01db":"U\u0308\u0300","\u01d5":"U\u0308\u0304","\u01d9":"U\u0308\u030c","\u0168":"U\u0303","\u1e78":"U\u0303\u0301","\u016a":"U\u0304","\u1e7a":"U\u0304\u0308","\u016c":"U\u0306","\u01d3":"U\u030c","\xdb":"U\u0302","\u016e":"U\u030a","\u0170":"U\u030b","\u1e7c":"V\u0303","\u1e82":"W\u0301","\u1e80":"W\u0300","\u1e84":"W\u0308","\u0174":"W\u0302","\u1e86":"W\u0307","\u1e8c":"X\u0308","\u1e8a":"X\u0307","\xdd":"Y\u0301","\u1ef2":"Y\u0300","\u0178":"Y\u0308","\u1ef8":"Y\u0303","\u0232":"Y\u0304","\u0176":"Y\u0302","\u1e8e":"Y\u0307","\u0179":"Z\u0301","\u017d":"Z\u030c","\u1e90":"Z\u0302","\u017b":"Z\u0307","\u03ac":"\u03b1\u0301","\u1f70":"\u03b1\u0300","\u1fb1":"\u03b1\u0304","\u1fb0":"\u03b1\u0306","\u03ad":"\u03b5\u0301","\u1f72":"\u03b5\u0300","\u03ae":"\u03b7\u0301","\u1f74":"\u03b7\u0300","\u03af":"\u03b9\u0301","\u1f76":"\u03b9\u0300","\u03ca":"\u03b9\u0308","\u0390":"\u03b9\u0308\u0301","\u1fd2":"\u03b9\u0308\u0300","\u1fd1":"\u03b9\u0304","\u1fd0":"\u03b9\u0306","\u03cc":"\u03bf\u0301","\u1f78":"\u03bf\u0300","\u03cd":"\u03c5\u0301","\u1f7a":"\u03c5\u0300","\u03cb":"\u03c5\u0308","\u03b0":"\u03c5\u0308\u0301","\u1fe2":"\u03c5\u0308\u0300","\u1fe1":"\u03c5\u0304","\u1fe0":"\u03c5\u0306","\u03ce":"\u03c9\u0301","\u1f7c":"\u03c9\u0300","\u038e":"\u03a5\u0301","\u1fea":"\u03a5\u0300","\u03ab":"\u03a5\u0308","\u1fe9":"\u03a5\u0304","\u1fe8":"\u03a5\u0306","\u038f":"\u03a9\u0301","\u1ffa":"\u03a9\u0300"},zr=function(){function e(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ar(e,t,this.mode),this.settings=t,this.leftrightDepth=0}var t=e.prototype;return t.expect=function(e,t){if(void 0===t&&(t=!0),this.nextToken.text!==e)throw new a("Expected '"+e+"', got '"+this.nextToken.text+"'",this.nextToken);t&&this.consume()},t.consume=function(){this.nextToken=this.gullet.expandNextToken()},t.switchMode=function(e){this.mode=e,this.gullet.switchMode(e)},t.parse=function(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor"),this.consume();var e=this.parseExpression(!1);return this.expect("EOF",!1),this.gullet.endGroup(),e},t.parseExpression=function(t,n){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.nextToken;if(-1!==e.endOfExpression.indexOf(i.text))break;if(n&&i.text===n)break;if(t&&hr[i.text]&&hr[i.text].infix)break;var o=this.parseAtom(n);if(!o)break;r.push(o)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)},t.handleInfixNodes=function(e){for(var t,n=-1,r=0;r<e.length;r++){var i=Qe(e[r],"infix");if(i){if(-1!==n)throw new a("only one infix operator per group",i.token);n=r,t=i.replaceWith}}if(-1!==n&&t){var o,s,l=e.slice(0,n),c=e.slice(n+1);return o=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},s=1===c.length&&"ordgroup"===c[0].type?c[0]:{type:"ordgroup",mode:this.mode,body:c},["\\\\abovefrac"===t?this.callFunction(t,[o,e[n],s],[]):this.callFunction(t,[o,s],[])]}return e},t.handleSupSubscript=function(t){var n=this.nextToken,r=n.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(t,!1,e.SUPSUB_GREEDINESS);if(!i)throw new a("Expected group after '"+r+"'",n);return i},t.handleUnsupportedCmd=function(){for(var e=this.nextToken.text,t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return this.consume(),i},t.parseAtom=function(e){var t,n,r=this.parseGroup("atom",!1,null,e);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.nextToken;if("\\limits"===i.text||"\\nolimits"===i.text){var o=Qe(r,"op");if(!o)throw new a("Limit controls must follow a math operator",i);var s="\\limits"===i.text;o.limits=s,o.alwaysHandleSupSub=!0,this.consume()}else if("^"===i.text){if(t)throw new a("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new a("Double subscript",i);n=this.handleSupSubscript("subscript")}else{if("'"!==i.text)break;if(t)throw new a("Double superscript",i);var l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();"'"===this.nextToken.text;)c.push(l),this.consume();"^"===this.nextToken.text&&c.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:c}}}return t||n?{type:"supsub",mode:this.mode,base:r,sup:t,sub:n}:r},t.parseFunction=function(e,t,n){var r=this.nextToken,i=r.text,o=hr[i];if(!o)return null;if(null!=n&&o.greediness<=n)throw new a("Got function '"+i+"' with no arguments"+(t?" as "+t:""),r);if("text"===this.mode&&!o.allowedInText)throw new a("Can't use function '"+i+"' in text mode",r);if("math"===this.mode&&!1===o.allowedInMath)throw new a("Can't use function '"+i+"' in math mode",r);if(o.argTypes&&"url"===o.argTypes[0]&&this.gullet.lexer.setCatcode("%",13),o.consumeMode){var s=this.mode;this.switchMode(o.consumeMode),this.consume(),this.switchMode(s)}else this.consume();var l=this.parseArguments(i,o),c=l.args,d=l.optArgs;return this.callFunction(i,c,d,r,e)},t.callFunction=function(e,t,n,r,i){var o={funcName:e,parser:this,token:r,breakOnTokenText:i},s=hr[e];if(s&&s.handler)return s.handler(o,t,n);throw new a("No function handler for "+e)},t.parseArguments=function(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=t.greediness,i=[],o=[],s=0;s<n;s++){var l=t.argTypes&&t.argTypes[s],c=s<t.numOptionalArgs;s>0&&!c&&this.consumeSpaces(),0!==s||c||"math"!==this.mode||this.consumeSpaces();var d=this.nextToken,u=this.parseGroupOfType("argument to '"+e+"'",l,c,r);if(!u){if(c){o.push(null);continue}throw new a("Expected group after '"+e+"'",d)}(c?o:i).push(u)}return{args:i,optArgs:o}},t.parseGroupOfType=function(e,t,n,r){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseGroup(e,n,r,void 0,t);case"raw":if(n&&"{"===this.nextToken.text)return null;var i=this.parseStringGroup("raw",n,!0);if(i)return{type:"raw",mode:"text",string:i.text};throw new a("Expected raw group",this.nextToken);case"original":case null:case void 0:return this.parseGroup(e,n,r);default:throw new a("Unknown group type as "+e,this.nextToken)}},t.consumeSpaces=function(){for(;" "===this.nextToken.text;)this.consume()},t.parseStringGroup=function(e,t,n){var r=t?"[":"{",i=t?"]":"}",o=this.nextToken;if(o.text!==r){if(t)return null;if(n&&"EOF"!==o.text&&/[^{}[\]]/.test(o.text))return this.gullet.lexer.setCatcode("%",14),this.consume(),o}var s=this.mode;this.mode="text",this.expect(r);for(var l="",c=this.nextToken,d=0,u=c;n&&d>0||this.nextToken.text!==i;){switch(this.nextToken.text){case"EOF":throw new a("Unexpected end of input in "+e,c.range(u,l));case r:d++;break;case i:d--}l+=(u=this.nextToken).text,this.consume()}return this.mode=s,this.gullet.lexer.setCatcode("%",14),this.expect(i),c.range(u,l)},t.parseRegexGroup=function(e,t){var n=this.mode;this.mode="text";for(var r=this.nextToken,i=r,o="";"EOF"!==this.nextToken.text&&e.test(o+this.nextToken.text);)o+=(i=this.nextToken).text,this.consume();if(""===o)throw new a("Invalid "+t+": '"+r.text+"'",r);return this.mode=n,r.range(i,o)},t.parseColorGroup=function(e){var t=this.parseStringGroup("color",e);if(!t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new a("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}},t.parseSizeGroup=function(e){var t,n=!1;if(!(t=e||"{"===this.nextToken.text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new a("Invalid size: '"+t.text+"'",t);var i,o={number:+(r[1]+r[2]),unit:r[3]};if("string"!==typeof(i=o)&&(i=i.unit),!(i in De)&&!(i in ze)&&"ex"!==i)throw new a("Invalid unit: '"+o.unit+"'",t);return{type:"size",mode:this.mode,value:o,isBlank:n}},t.parseUrlGroup=function(e){var t=this.parseStringGroup("url",e,!0);if(!t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1"),r=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(n);r=null!=r?r[1]:"_relative";var i=this.settings.allowedProtocols;if(!u.contains(i,"*")&&!u.contains(i,r))throw new a("Forbidden protocol '"+r+"'",t);return{type:"url",mode:this.mode,url:n}},t.parseGroup=function(t,n,i,o,s){var l,c,d=this.mode,u=this.nextToken,h=u.text;if(s&&this.switchMode(s),n?"["===h:"{"===h||"\\begingroup"===h){l=e.endOfGroup[h],this.gullet.beginGroup(),this.consume();var p=this.parseExpression(!1,l),f=this.nextToken;this.gullet.endGroup(),c={type:"ordgroup",mode:this.mode,loc:r.range(u,f),body:p,semisimple:"\\begingroup"===h||void 0}}else if(n)c=null;else if(null==(c=this.parseFunction(o,t,i)||this.parseSymbol())&&"\\"===h[0]&&!_r.hasOwnProperty(h)){if(this.settings.throwOnError)throw new a("Undefined control sequence: "+h,u);c=this.handleUnsupportedCmd()}return s&&this.switchMode(d),l&&this.expect(l),c},t.formLigatures=function(e){for(var t=e.length-1,n=0;n<t;++n){var i=e[n],o=i.text;"-"===o&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:r.range(i,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:r.range(i,e[n+1]),text:"--"}),t-=1)),"'"!==o&&"`"!==o||e[n+1].text!==o||(e.splice(n,2,{type:"textord",mode:"text",loc:r.range(i,e[n+1]),text:o+o}),t-=1)}},t.parseSymbol=function(){var e=this.nextToken,t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),i="*"===n.charAt(0);if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new a("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:i}}Dr.hasOwnProperty(t[0])&&!Y[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Dr[t[0]]+t.substr(1));var o,s=br.exec(t);if(s&&("i"===(t=t.substring(0,s.index))?t="\u0131":"j"===t&&(t="\u0237")),Y[this.mode][t]){this.settings.strict&&"math"===this.mode&&Ce.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var l,c=Y[this.mode][t].group,d=r.range(e);if(U.hasOwnProperty(c)){var u=c;l={type:"atom",mode:this.mode,family:u,loc:d,text:t}}else l={type:c,mode:this.mode,loc:d,text:t};o=l}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(C(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),o={type:"textord",mode:this.mode,loc:r.range(e),text:t}}if(this.consume(),s)for(var h=0;h<s[0].length;h++){var p=s[0][h];if(!Ir[p])throw new a("Unknown accent ' "+p+"'",e);var f=Ir[p][this.mode];if(!f)throw new a("Accent "+p+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:r.range(e),label:f,isStretchy:!1,isShifty:!0,base:o}}return o},e}();zr.endOfExpression=["}","\\endgroup","\\end","\\right","&"],zr.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},zr.SUPSUB_GREEDINESS=1;var Lr=function(e,t){if(!("string"===typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new zr(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new a("\\tag works only in display equations");n.gullet.feed("\\df@tag"),r=[{type:"tag",mode:"text",body:r,tag:n.parse()}]}return r},Rr=function(e,t,n){t.textContent="";var r=Pr(e,n).toNode();t.appendChild(r)};"undefined"!==typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!==typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Rr=function(){throw new a("KaTeX doesn't work in quirks mode.")});var Br=function(e,t,n){if(n.throwOnError||!(e instanceof a))throw e;var r=Ze.makeSpan(["katex-error"],[new D(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},Pr=function(e,t){var n=new h(t);try{var r=Lr(e,n);return Lt(r,e,n)}catch(i){return Br(i,e,n)}},Fr={version:"0.10.2",render:Rr,renderToString:function(e,t){return Pr(e,t).toMarkup()},ParseError:a,__parse:function(e,t){var n=new h(t);return Lr(e,n)},__renderToDomTree:Pr,__renderToHTMLTree:function(e,t){var n=new h(t);try{return function(e,t,n){var r=Ot(e,Dt(n)),i=Ze.makeSpan(["katex"],[r]);return zt(i,n)}(Lr(e,n),0,n)}catch(r){return Br(r,e,n)}},__setFontMetrics:function(e,t){B[e]=t},__defineSymbol:G,__defineMacro:Cr,__domTree:{Span:_,Anchor:A,SymbolNode:D,SvgNode:z,PathNode:L,LineNode:R}};t.default=Fr}]).default},e.exports=r()},2780:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="ol",e.attributes={start:"@var0","data-indent":"@var1"},e.variable={"@var0":"@number","@var1":"@number"},e.allowIn=["blockquote","$root"],e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("list")},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on("markdown-it",this.markdownIt)}},{key:"schema",value:function(){return[Object(o.a)(Object(a.a)(n.prototype),"schema",this).call(this),{name:"ol",type:"block"},{name:"li",type:"block",allowIn:["ol"]}]}},{key:"isCurrent",value:function(e){var t=this.editor.list;return!e.hasClass(t.CUSTOMZIE_UL_CLASS)&&"ol"===e.name}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.editor;if(Object(c.X)(t)){var n=t.change,r=t.list,i=t.block;r.split();var o=n.range.get(),a=i.findBlocks(o);if(a){var s=o.createSelection();"orderedlist"===r.getPluginNameByNodes(a)?r.unwrap(a):r.toNormal(a,"ol",e),s.move(),n.range.select(o),r.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+7"}},{key:"destroy",value:function(){this.editor.off("markdown-it",this.markdownIt)}}],[{key:"pluginName",get:function(){return"orderedlist"}}]),n}(c.s);t.a=d},2782:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".am-engine.data-paintformat-mode,\r\n.am-engine-view.data-paintformat-mode {\r\n    cursor: text;\r\n    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\r\n}");var l=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).activeMarks=void 0,e.activeBlocks=void 0,e.type=void 0,e.event=void 0,e.isFormat=!1,e.onBeforeCommandExecute=function(t){"paintformat"!==t&&!e.isFormat&&e.event&&e.removeActiveNodes(e.editor.container[0].ownerDocument)},e.onContainerMouseUp=function(t){if(e.activeMarks&&t.target){var n=e.editor;n.card.closest(Object(s.a)(t.target))?e.removeActiveNodes(n.container[0].ownerDocument):(e.isFormat=!0,e.paintFormat(e.activeMarks,e.activeBlocks),e.isFormat=!1,"single"===e.type&&e.removeActiveNodes(n.container[0].ownerDocument))}},e}return Object(i.a)(n,[{key:"init",value:function(){var e=this.editor;Object(s.X)(e)&&(e.on("beforeCommandExecute",this.onBeforeCommandExecute),e.container.on("mouseup",this.onContainerMouseUp))}},{key:"removeActiveNodes",value:function(e){Object(s.bb)(e)&&(e=Object(s.a)(e));var t=this.editor;t.container.removeClass("data-paintformat-mode"),this.activeMarks=void 0,this.activeBlocks=void 0,this.event&&(e.off("keydown",this.event),this.event=void 0),Object(s.X)(t)&&t.trigger("select")}},{key:"bindEvent",value:function(e){var t=this,n=e[0].ownerDocument,r=function r(i){i.metaKey||i.ctrlKey||i.shiftKey||(t.event=void 0,"Escape"!==i.key&&27!==i.keyCode||(e.off("keydown",r),n&&t.removeActiveNodes(n)))};n&&(Object(s.a)(n).on("keydown",r),this.event=r)}},{key:"paintFormat",value:function(e,t){var n=this,r=this.editor;if(Object(s.X)(r)){var i=r.change,o=r.command,a=r.block,l=i.range.get(),c=this.options.removeCommand||"removeformat";if(l.collapsed){var d=Object(s.a)("<img ".concat(s.k,'="').concat(s.F,'" role="format-dummy" style="display: none;" />'));l.insertNode(d[0]);var u=a.closest(l.startNode);l.select(u,!0),i.range.select(l),"function"===typeof c?c(l):o.execute(c),this.paintMarks(e);var h=a.getBlocks(l);t&&h.forEach((function(e){n.paintBlocks(e,t)})),d=u.find('img[role="format-dummy"]'),l.select(d),l.collapse(!0),d.remove(),i.apply(l)}else{"function"===typeof c?c(l):o.execute(c),this.paintMarks(e);var p=a.getBlocks(l);t&&p.forEach((function(e){n.paintBlocks(e,t)}))}r.mark.merge(l)}}},{key:"paintMarks",value:function(e){for(var t=this.editor,n=t.mark,r=e.length-1;r>=0;r--){var i=e[r];n.wrap(t.node.clone(i,!1,!1))}}},{key:"paintBlocks",value:function(e,t){var n=this,r=this.editor;if(Object(s.X)(r)&&e.inEditor()){var i=r.node,o=r.change,a=r.block,l=o.range.get(),c=l.createSelection("removeformat");t.forEach((function(t){if(e.inEditor()){if(n.options.paintBlock)if(!1===n.options.paintBlock(e,t))return;if(t.name!==e.name)if(l.select(e).shrinkToElementNode(),o.blocks=[e],"p"===t.name){var r=a.findPlugin(e);r&&r.execute(t.name)}else if(i.isRootBlock(t)){var s=a.findPlugin(t);s&&s.execute(t.name)}else if(i.isList(t)&&"li"!==t.name){var c=a.findPlugin(t),d=a.findPlugin("li"===e.name?e.parent():e);c&&d!==c&&c.execute()}var u=t.css();Object.keys(u).length>0&&a.setBlocks({style:u})}})),c.move()}}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single",t=this.editor;if(Object(s.X)(t))if(this.activeMarks)this.removeActiveNodes(t.container);else{this.type=e,this.bindEvent(t.container);var n=t.change,r=t.mark,i=t.block,o=n.range.get();this.activeMarks=r.findMarks(o),this.activeBlocks=i.findBlocks(o),t.trigger("select"),t.container.addClass("data-paintformat-mode")}}},{key:"queryState",value:function(){return!!this.activeMarks}},{key:"destroy",value:function(){var e=this.editor;e.off("beforeCommandExecute",this.onBeforeCommandExecute),e.container.off("mouseup",this.onContainerMouseUp)}}],[{key:"pluginName",get:function(){return"paintformat"}}]),n}(s.v);t.a=l},2784:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".am-engine blockquote, .am-engine-view blockquote {\r\n    margin: 5px 0 5px 0;\r\n    border-left: 3px solid #eee;\r\n    color: #8C8C8C;\r\n}\r\n\r\n.am-engine blockquote + blockquote, .am-engine-view blockquote + blockquote {\r\n    margin-top: -5px;\r\n}\r\n\r\n.am-engine blockquote > *, .am-engine-view blockquote > * {\r\n    margin-left: 14px;\r\n    color: #8C8C8C;\r\n}\r\n\r\n.am-engine blockquote *, .am-engine-view blockquote * {\r\n    color: #8C8C8C;\r\n}\r\n\r\n.am-engine blockquote a, .am-engine blockquote a:hover, .am-engine-view blockquote a, .am-engine-view blockquote a:hover {\r\n  color: #1890ff !important;\r\n}");var d="parse:html",u="keydown:backspace",h="keydown:enter",p="paste:each",f="markdown-it",v=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="blockquote",e.canMerge=!0,e.pasteEach=function(t){var n;t.isText()&&(null===(n=t.parent())||void 0===n?void 0:n.name)===e.tagName&&e.editor.node.wrap(t,Object(c.a)("<p></p>"))},e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("blockquote")},e.onBackspace=function(t){var n=e.editor;if(Object(c.X)(n)){var r=n.change,i=n.node,o=r.range.get(),a=n.block;if(a.isLastOffset(o,"end")&&!o.collapsed){var s=a.closest(o.startNode),l=a.closest(o.endNode),d=s.parent(),u=l.parent();if(d&&u&&"blockquote"===u.name&&!d.equal(u))return void u.remove()}if(o.collapsed)if(a.isFirstOffset(o,"start")){var h=a.closest(o.startNode),p=h.parent();if(p&&"blockquote"===p.name&&i.isBlock(h)){if(t.preventDefault(),h.prevElement())r.mergeAfterDelete(h);else if(i.isEmpty(p)){var f=Object(c.a)("<p><br/></p>");p.replaceWith(f),o.select(f,!0).collapse(!1),r.apply(o)}else a.unwrap("<blockquote />");return!1}}}},e.onEnter=function(t){var n=e.editor;if(Object(c.X)(n)){var r=n.change,i=n.block,o=r.range.get(),a=i.closest(o.endNode),s=a.parent();return(null===s||void 0===s?void 0:s.name)===e.tagName&&"p"===a.name&&a.nextElement()?(t.preventDefault(),i.insertOrSplit(o,a),!1):void 0}},e.parseHtml=function(e){e.find("blockquote").css({"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid #eee",opacity:"0.6"})},e.pasteHtml=function(t){var n=e.editor;if(Object(c.X)(n)){if(t.name===e.tagName){var r=n.node;return t.css("padding-left",""),t.css("text-indent",""),r.isEmpty(t)&&t.empty().append("<p><br/></p>"),n.normalize(t),!1}return!0}},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;e.schema.addAllowIn(this.tagName),e.on(d,this.parseHtml),Object(c.X)(e)&&(e.on(p,this.pasteHtml),e.on(u,this.onBackspace),e.on(h,this.onEnter),e.on(p,this.pasteEach),e.on(f,this.markdownIt))}},{key:"execute",value:function(){var e=this.editor;if(Object(c.X)(e)){var t=e.change,n=e.block,r=e.node;if(this.queryState()){var i=t.range.get(),o=t.blocks[0].closest(this.tagName),a=i.createSelection();return r.unwrap(o),a.move(),void t.range.select(i)}n.wrap("<".concat(this.tagName," />"))}}},{key:"queryState",value:function(){var e=this.editor;if(Object(c.X)(e)){var t=e.change.blocks;if(0===t.length)return!1;var n=t[0].closest(this.tagName);return this.isSelf(n)}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+u"}},{key:"destroy",value:function(){var e=this.editor;e.off(d,this.parseHtml),Object(c.X)(e)&&(e.off(p,this.pasteHtml),e.off(u,this.onBackspace),e.off(h,this.onEnter),e.off(p,this.pasteEach),e.off(f,this.markdownIt))}}],[{key:"pluginName",get:function(){return"quote"}}]),n}(c.b);t.a=v},2786:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"execute",value:function(){var e=this.editor;Object(s.X)(e)&&(e.readonly||e.history.redo())}},{key:"queryState",value:function(){var e=this.editor;if(Object(s.X)(e)&&!e.readonly)return e.history.hasRedo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+y","shift+mod+y"]}}],[{key:"pluginName",get:function(){return"redo"}}]),n}(s.v);t.a=l},2788:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"execute",value:function(){var e=this.editor;if(Object(s.X)(e)){var t=e.change,n=e.block,r=e.mark,i=e.inline,o=n,a=t.range.get(),l=o.getBlocks(a),c=r.findMarks(a),d=i.findInlines(a);if(c.length>0)r.unwrap();else if(d.length>0)i.unwrap();else{var u=a.createSelection("removeformat");l.forEach((function(e){var t=o.findPlugin("li"===e.name?e.parent():e);t&&(a.select(e).shrinkToElementNode(),t.execute()),e.removeAttributes("style")})),u.move()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+\\"}}],[{key:"pluginName",get:function(){return"removeformat"}}]),n}(s.v);t.a=l},2790:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l="keydown:all",c=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).onSelectAll=function(t){var n=e.editor.command;t.preventDefault(),n.execute("selectall")},e}return Object(i.a)(n,[{key:"init",value:function(){this.editor.on(l,this.onSelectAll)}},{key:"execute",value:function(){var e=this.editor;if(Object(s.X)(e)){var t=e.change,n=t.range.get(),r=n.startNode.closest(s.p);r.length>0?n.select(r,!0):n.select(e.container,!0),t.range.select(n),e.trigger("select")}}},{key:"destroy",value:function(){this.editor.off(l,this.onSelectAll)}}],[{key:"pluginName",get:function(){return"selectall"}}]),n}(s.v);t.a=c},2793:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="del",e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("strikethrough")},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+x"}},{key:"conversion",value:function(){var e=this;return[{from:function(e,t){return"span"===e&&(t["text-decoration"]||"").includes("line-through")},to:function(t,n,r){var i=Object(c.a)("<".concat(e.tagName," />"));return n["text-decoration"]=n["text-decoration"].split(/\s+/).filter((function(e){return"line-through"!==e})).join(" ").trim(),i.css(n),i.attributes(r),i}},{from:"s",to:this.tagName},{from:"strike",to:this.tagName}]}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"strikethrough"}}]),n}(c.t);t.a=u},2795:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(u,e);var t=Object(l.a)(u);function u(){var e;Object(r.a)(this,u);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="sub",e.markdownIt=function(t){!1!==e.options.markdown&&(t.use(n(2796)),t.enable("sub"))},e}return Object(i.a)(u,[{key:"init",value:function(){Object(o.a)(Object(a.a)(u.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"conversion",value:function(){var e=this;return[{from:function(e,t){return"span"===e&&"sub"===(t["vertical-align"]||"")},to:function(t,n,r){var i=Object(c.a)("<".concat(e.tagName," />"));return delete n["vertical-align"],i.css(n),i.attributes(r),i}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+,"}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"sub"}}]),u}(c.t);t.a=u},2796:function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function i(e,t){var n,i,o=e.posMax,a=e.pos;if(126!==e.src.charCodeAt(a))return!1;if(t)return!1;if(a+2>=o)return!1;for(e.pos=a+1;e.pos<o;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&a+1!==e.pos?(i=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,e.push("sub_open","sub",1).markup="~",e.push("text","",0).content=i.replace(r,"$1"),e.push("sub_close","sub",-1).markup="~",e.pos=e.posMax+1,e.posMax=o,!0):(e.pos=a,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sub",i)}},2798:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(u,e);var t=Object(l.a)(u);function u(){var e;Object(r.a)(this,u);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="sup",e.markdownIt=function(t){!1!==e.options.markdown&&(t.use(n(2799)),t.enable("sup"))},e}return Object(i.a)(u,[{key:"init",value:function(){Object(o.a)(Object(a.a)(u.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"conversion",value:function(){var e=this;return[{from:function(e,t){return"span"===e&&"super"===(t["vertical-align"]||"")},to:function(t,n,r){var i=Object(c.a)("<".concat(e.tagName," />"));return delete n["vertical-align"],i.css(n),i.attributes(r),i}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+."}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"sup"}}]),u}(c.t);t.a=u},2799:function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function i(e,t){var n,i,o=e.posMax,a=e.pos;if(94!==e.src.charCodeAt(a))return!1;if(t)return!1;if(a+2>=o)return!1;for(e.pos=a+1;e.pos<o;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&a+1!==e.pos?(i=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,e.push("sup_open","sup",1).markup="^",e.push("text","",0).content=i.replace(r,"$1"),e.push("sup_close","sup",-1).markup="^",e.pos=e.posMax+1,e.posMax=o,!0):(e.pos=a,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sup",i)}},2800:function(e,t,n){var r=n(2497);e.exports=function(e){return"number"==typeof e&&e==r(e)}},2806:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(116),a=n(63),s=n(19),l=n(21),c=n(2470),d="markdown-it",u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="ul",e.attributes={"data-indent":"@var0"},e.variable={"@var0":"@number"},e.allowIn=["blockquote","$root"],e.markdownIt=function(t){!1!==e.options.markdown&&t.enable("list")},e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(a.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(c.X)(e)&&e.on(d,this.markdownIt)}},{key:"schema",value:function(){return[Object(o.a)(Object(a.a)(n.prototype),"schema",this).call(this),{name:"ul",type:"block"},{name:"li",type:"block",allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){return!e.hasClass(this.editor.list.CUSTOMZIE_UL_CLASS)&&"ul"===e.name}},{key:"execute",value:function(){var e=this.editor;if(Object(c.X)(e)){var t=e.change,n=e.list,r=e.block;n.split();var i=t.range.get(),o=r.findBlocks(i);if(o){var a=i.createSelection();"unorderedlist"===n.getPluginNameByNodes(o)?n.unwrap(o):n.toNormal(o,"ul"),a.move(),t.range.select(i),n.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+8"}},{key:"destroy",value:function(){this.editor.off(d,this.markdownIt)}}],[{key:"pluginName",get:function(){return"unorderedlist"}}]),n}(c.s);t.a=u},2808:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).tagName="u",e}return Object(i.a)(n,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+u"}},{key:"conversion",value:function(){var e=this;return[{from:function(e,t){return"span"===e&&(t["text-decoration"]||"").includes("underline")},to:function(t,n,r){var i=Object(s.a)("<".concat(e.tagName," />"));return n["text-decoration"]=n["text-decoration"].split(/\s+/).filter((function(e){return"underline"!==e})).join(" ").trim(),i.css(n),i.attributes(r),i}}]}}],[{key:"pluginName",get:function(){return"underline"}}]),n}(s.t);t.a=l},2810:function(e,t,n){"use strict";var r=n(15),i=n(16),o=n(19),a=n(21),s=n(2470),l=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"execute",value:function(){var e=this.editor;Object(s.X)(e)&&(e.readonly||e.history.undo())}},{key:"queryState",value:function(){var e=this.editor;if(Object(s.X)(e)&&!e.readonly)return e.history.hasUndo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+z","shift+mod+z"]}}],[{key:"pluginName",get:function(){return"undo"}}]),n}(s.v);t.a=l},2816:function(e,t,n){"use strict";var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var a=function(e,t){this.target=t,this.type=e},s=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return i(t,e),t}(a),l=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var i=e.call(this,"close",r)||this;return i.wasClean=!0,i.code=t,i.reason=n,i}return i(t,e),t}(a),c=function(){if("undefined"!==typeof WebSocket)return WebSocket},d={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},u=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?d.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"===typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?d.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var i=function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),o=i.next();!o.done;o=i.next()){var a=o.value;this._callEventListener(e,a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?d.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,i=void 0===r?d.minReconnectionDelay:r,o=e.maxReconnectionDelay,a=void 0===o?d.maxReconnectionDelay:o,s=0;return this._retryCount>0&&(s=i*Math.pow(n,this._retryCount-1))>a&&(s=a),this._debug("next delay",s),s},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"===typeof e)return Promise.resolve(e);if("function"===typeof e){var t=e();if("string"===typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?d.maxRetries:n,i=t.connectionTimeout,o=void 0===i?d.connectionTimeout:i,a=t.WebSocket,s=void 0===a?c():a;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),"undefined"===typeof(l=s)||!l||2!==l.CLOSING)throw Error("No valid WebSocket class provided");var l;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new s(t,e._protocols):new s(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),o))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new s(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new l(e,t,this))}catch(n){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.a=u},2817:function(e,t,n){t.Connection=n(2818),t.Doc=n(2599),t.Error=n(2485),t.Query=n(2600),t.types=n(2490),t.logger=n(2507)},2818:function(e,t,n){var r=n(2599),i=n(2600),o=n(2601),a=n(2823),s=n(2827),l=n(2829),c=n(2482),d=n(2485),u=n(2490),h=n(2476),p=n(2507),f=d.CODES;function v(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function g(e){c.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._presences={},this._snapshotRequests={},this.seq=1,this._presenceSeq=1,this.id=null,this.agent=null,this.debug=!1,this.state=v(e),this.bindToSocket(e)}function m(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}function b(e){return e.hasPending()}function y(e){return e.hasWritePending()}e.exports=g,c.mixin(g),g.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var t=v(e);this._setState(t),this.canSend=!1;var n=this;e.onmessage=function(e){try{var t="string"===typeof e.data?JSON.parse(e.data):e.data}catch(i){return void p.warn("Failed to parse message",e)}n.debug&&p.info("RECV",JSON.stringify(t));var r={data:t};if(n.emit("receive",r),r.data)try{n.handleMessage(r.data)}catch(i){h.nextTick((function(){n.emit("error",i)}))}},1===e.readyState&&n._initializeHandshake(),e.onopen=function(){n._setState("connecting"),n._initializeHandshake()},e.onerror=function(e){n.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?n._setState("closed",e):"stopped"===e||"Stopped by server"===e?n._setState("stopped",e):n._setState("disconnected",e)}},g.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=m(e.error,e),delete e.error),e.a){case"init":return this._handleLegacyInit(e);case"hs":return this._handleHandshake(t,e);case"qf":return void((n=this.queries[e.id])&&n._handleFetch(t,e.data,e.extra));case"qs":return void((n=this.queries[e.id])&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n;if(!(n=this.queries[e.id]))return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":case"bu":return this._handleBulkMessage(t,e,"_handleSubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((r=this.getExisting(e.c,e.d))&&r._handleFetch(t,e.data));case"s":case"u":return void((r=this.getExisting(e.c,e.d))&&r._handleSubscribe(t,e.data));case"op":var r;return void((r=this.getExisting(e.c,e.d))&&r._handleOp(t,e));case"p":return this._handlePresence(t,e);case"ps":return this._handlePresenceSubscribe(t,e);case"pu":return this._handlePresenceUnsubscribe(t,e);case"pr":return this._handlePresenceRequest(t,e);default:p.warn("Ignoring unrecognized message",e)}},g.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var r in t.data){var i=t.data[r];(a=this.getExisting(t.c,r))&&(e?a[n](e):i.error?a[n](m(i.error)):a[n](null,i))}else if(Array.isArray(t.b))for(var o=0;o<t.b.length;o++){r=t.b[o];(a=this.getExisting(t.c,r))&&a[n](e)}else if(t.b)for(var r in t.b){var a;(a=this.getExisting(t.c,r))&&a[n](e)}else p.error("Invalid bulk message",t)},g.prototype._reset=function(){this.agent=null},g.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new d(f.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var r in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries){this.queries[r]._onConnectionStateChanged()}for(var i in this.collections){var o=this.collections[i];for(var r in o)o[r]._onConnectionStateChanged()}for(var a in this._presences)this._presences[a]._onConnectionStateChanged();for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},g.prototype.startBulk=function(){this.bulk||(this.bulk={})},g.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},g.prototype._sendBulk=function(e,t,n){if(n){var r,i=[],o={},a=0;for(var s in n){var l=n[s];null==l?i.push(s):(o[s]=l,r=s,a++)}if(1===i.length){s=i[0];this.send({a:e,c:t,d:s})}else i.length&&this.send({a:"b"+e,c:t,b:i});if(1===a){var c=o[r];this.send({a:e,c:t,d:r,v:c})}else a&&this.send({a:"b"+e,c:t,b:o})}},g.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),i=r[e]||(r[e]={}),o=i.hasOwnProperty(t.id);return i[t.id]=n,o}var a={a:e,c:t.collection,d:t.id,v:n};this.send(a)},g.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},g.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},g.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},g.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq,x:{}};"op"in t&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),e.submitSource&&(n.x.source=t.source),this.send(n)},g.prototype.send=function(e){this.debug&&p.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},g.prototype.close=function(){this.socket.close()},g.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},g.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),i=n[t];return i||(i=n[t]=new r(this,e,t),this.emit("doc",i)),i},g.prototype._destroyDoc=function(e){h.digAndRemove(this.collections,e.collection,e.id)},g.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},g.prototype._createQuery=function(e,t,n,r,o){var a=this.nextQueryId++,s=new i(e,this,a,t,n,r,o);return this.queries[a]=s,s.send(),s},g.prototype._destroyQuery=function(e){delete this.queries[e.id]},g.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},g.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},g.prototype.hasPending=function(){return!!(this._firstDoc(b)||this._firstQuery(b)||this._firstSnapshotRequest())},g.prototype.hasWritePending=function(){return!!this._firstDoc(y)},g.prototype.whenNothingPending=function(e){var t=this._firstDoc(b);if(t)t.once("nothing pending",this._nothingPendingRetry(e));else{var n=this._firstQuery(b);if(n)n.once("ready",this._nothingPendingRetry(e));else{var r=this._firstSnapshotRequest();r?r.once("ready",this._nothingPendingRetry(e)):h.nextTick(e)}}},g.prototype._nothingPendingRetry=function(e){var t=this;return function(){h.nextTick((function(){t.whenNothingPending(e)}))}},g.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var i=n[r];if(e(i))return i}}},g.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},g.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},g.prototype.fetchSnapshot=function(e,t,n,r){"function"===typeof n&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new s(this,i,e,t,n,r);this._snapshotRequests[o.requestId]=o,o.send()},g.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){"function"===typeof n&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new l(this,i,e,t,n,r);this._snapshotRequests[o.requestId]=o,o.send()},g.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))},g.prototype._handleLegacyInit=function(e){if(e.protocolMinor)return this._initializeHandshake();this._initialize(e)},g.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})},g.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},g.prototype._initialize=function(e){if("connecting"===this.state){if(1!==e.protocol)return this.emit("error",new d(f.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol));if(u.map[e.type]!==u.defaultType)return this.emit("error",new d(f.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type"));if("string"!==typeof e.id)return this.emit("error",new d(f.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"));this.id=e.id,this._setState("connected")}},g.prototype.getPresence=function(e){var t=this;return h.digOrCreate(this._presences,e,(function(){return new o(t,e)}))},g.prototype.getDocPresence=function(e,t){var n=a.channel(e,t),r=this;return h.digOrCreate(this._presences,n,(function(){return new a(r,e,t)}))},g.prototype._sendPresenceAction=function(e,t,n){this._addPresence(n);var r={a:e,ch:n.channel,seq:t};return this.send(r),r.seq},g.prototype._addPresence=function(e){h.digOrCreate(this._presences,e.channel,(function(){return e}))},g.prototype._handlePresenceSubscribe=function(e,t){var n=h.dig(this._presences,t.ch);n&&n._handleSubscribe(e,t.seq)},g.prototype._handlePresenceUnsubscribe=function(e,t){var n=h.dig(this._presences,t.ch);n&&n._handleUnsubscribe(e,t.seq)},g.prototype._handlePresence=function(e,t){var n=h.dig(this._presences,t.ch);n&&n._receiveUpdate(e,t)},g.prototype._handlePresenceRequest=function(e,t){var n=h.dig(this._presences,t.ch);n&&n._broadcastAllLocalPresence(e,t)}},2819:function(e,t){var n=["info","warn","error"];function r(){var e={};n.forEach((function(t){e[t]=console[t].bind(console)})),this.setMethods(e)}e.exports=r,r.prototype.setMethods=function(e){e=e||{};var t=this;n.forEach((function(n){"function"===typeof e[n]&&(t[n]=e[n])}))}},2820:function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,l,c=r(t),d=r(n);if(c&&d){if((s=t.length)!=n.length)return!1;for(a=s;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(c!=d)return!1;var u=t instanceof Date,h=n instanceof Date;if(u!=h)return!1;if(u&&h)return t.getTime()==n.getTime();var p=t instanceof RegExp,f=n instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==n.toString();var v=i(t);if((s=v.length)!==i(n).length)return!1;for(a=s;0!==a--;)if(!o.call(n,v[a]))return!1;for(a=s;0!==a--;)if(!e(t[l=v[a]],n[l]))return!1;return!0}return t!==t&&n!==n}},2821:function(e,t,n){(function(e,n,r,i){var o;o=function(t){"use strict";function o(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=e[t+i];return r}var a=function(e){var t=o(arguments,1);return function(){var n=o(arguments);return e.apply(null,t.concat(n))}},s=function(e){return function(){var t=o(arguments),n=t.pop();e.call(this,t,n)}};function l(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var c="function"===typeof e&&e,d="object"===typeof n&&"function"===typeof n.nextTick;function u(e){setTimeout(e,0)}function h(e){return function(t){var n=o(arguments,1);e((function(){t.apply(null,n)}))}}var p=h(c?e:d?n.nextTick:u);function f(e){return s((function(t,n){var r;try{r=e.apply(this,t)}catch(i){return n(i)}l(r)&&"function"===typeof r.then?r.then((function(e){v(n,null,e)}),(function(e){v(n,e.message?e:new Error(e))})):n(null,r)}))}function v(e,t,n){try{e(t,n)}catch(r){p(g,r)}}function g(e){throw e}var m="function"===typeof Symbol;function b(e){return m&&"AsyncFunction"===e[Symbol.toStringTag]}function y(e){return b(e)?f(e):e}function w(e){return function(t){var n=o(arguments,1),r=s((function(n,r){var i=this;return e(t,(function(e,t){y(e).apply(i,n.concat(t))}),r)}));return n.length?r.apply(this,n):r}}var k="object"==typeof r&&r&&r.Object===Object&&r,x="object"==typeof self&&self&&self.Object===Object&&self,O=k||x||Function("return this")(),C=O.Symbol,E=Object.prototype,j=E.hasOwnProperty,M=E.toString,N=C?C.toStringTag:void 0,S=Object.prototype.toString,T="[object Null]",_="[object Undefined]",A=C?C.toStringTag:void 0;function I(e){return null==e?void 0===e?_:T:A&&A in Object(e)?function(e){var t=j.call(e,N),n=e[N];try{e[N]=void 0;var r=!0}catch(o){}var i=M.call(e);return r&&(t?e[N]=n:delete e[N]),i}(e):function(e){return S.call(e)}(e)}var D="[object AsyncFunction]",z="[object Function]",L="[object GeneratorFunction]",R="[object Proxy]",B=9007199254740991;function P(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=B}function F(e){return null!=e&&P(e.length)&&!function(e){if(!l(e))return!1;var t=I(e);return t==z||t==L||t==D||t==R}(e)}var H={};function q(){}function U(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var W="function"===typeof Symbol&&Symbol.iterator,V=function(e){return W&&e[W]&&e[W]()};function Y(e){return null!=e&&"object"==typeof e}function G(e){return Y(e)&&"[object Arguments]"==I(e)}var Z=Object.prototype,X=Z.hasOwnProperty,Q=Z.propertyIsEnumerable,K=G(function(){return arguments}())?G:function(e){return Y(e)&&X.call(e,"callee")&&!Q.call(e,"callee")},$=Array.isArray,J="object"==typeof t&&t&&!t.nodeType&&t,ee=J&&"object"==typeof i&&i&&!i.nodeType&&i,te=ee&&ee.exports===J?O.Buffer:void 0,ne=(te?te.isBuffer:void 0)||function(){return!1},re=9007199254740991,ie=/^(?:0|[1-9]\d*)$/;function oe(e,t){var n=typeof e;return!!(t=null==t?re:t)&&("number"==n||"symbol"!=n&&ie.test(e))&&e>-1&&e%1==0&&e<t}var ae={};ae["[object Float32Array]"]=ae["[object Float64Array]"]=ae["[object Int8Array]"]=ae["[object Int16Array]"]=ae["[object Int32Array]"]=ae["[object Uint8Array]"]=ae["[object Uint8ClampedArray]"]=ae["[object Uint16Array]"]=ae["[object Uint32Array]"]=!0,ae["[object Arguments]"]=ae["[object Array]"]=ae["[object ArrayBuffer]"]=ae["[object Boolean]"]=ae["[object DataView]"]=ae["[object Date]"]=ae["[object Error]"]=ae["[object Function]"]=ae["[object Map]"]=ae["[object Number]"]=ae["[object Object]"]=ae["[object RegExp]"]=ae["[object Set]"]=ae["[object String]"]=ae["[object WeakMap]"]=!1;var se,le="object"==typeof t&&t&&!t.nodeType&&t,ce=le&&"object"==typeof i&&i&&!i.nodeType&&i,de=ce&&ce.exports===le&&k.process,ue=function(){try{var e=ce&&ce.require&&ce.require("util").types;return e||de&&de.binding&&de.binding("util")}catch(t){}}(),he=ue&&ue.isTypedArray,pe=he?(se=he,function(e){return se(e)}):function(e){return Y(e)&&P(e.length)&&!!ae[I(e)]},fe=Object.prototype.hasOwnProperty;function ve(e,t){var n=$(e),r=!n&&K(e),i=!n&&!r&&ne(e),o=!n&&!r&&!i&&pe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!fe.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||oe(c,l))||s.push(c);return s}var ge=Object.prototype,me=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),be=Object.prototype.hasOwnProperty;function ye(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ge)}(e))return me(e);var t=[];for(var n in Object(e))be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function we(e){return F(e)?ve(e):ye(e)}function ke(e){if(F(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=V(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):function(e){var t=we(e),n=-1,r=t.length;return function i(){var o=t[++n];return"__proto__"===o?i():n<r?{value:e[o],key:o}:null}}(e)}function xe(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function Oe(e){return function(t,n,r){if(r=U(r||q),e<=0||!t)return r(null);var i=ke(t),o=!1,a=0,s=!1;function l(e,t){if(a-=1,e)o=!0,r(e);else{if(t===H||o&&a<=0)return o=!0,r(null);s||c()}}function c(){for(s=!0;a<e&&!o;){var t=i();if(null===t)return o=!0,void(a<=0&&r(null));a+=1,n(t.value,t.key,xe(l))}s=!1}c()}}function Ce(e,t,n,r){Oe(t)(e,y(n),r)}function Ee(e,t){return function(n,r,i){return e(n,t,r,i)}}function je(e,t,n){n=U(n||q);var r=0,i=0,o=e.length;function a(e,t){e?n(e):++i!==o&&t!==H||n(null)}for(0===o&&n(null);r<o;r++)t(e[r],r,xe(a))}var Me=Ee(Ce,1/0),Ne=function(e,t,n){(F(e)?je:Me)(e,y(t),n)};function Se(e){return function(t,n,r){return e(Ne,t,y(n),r)}}function Te(e,t,n,r){r=r||q,t=t||[];var i=[],o=0,a=y(n);e(t,(function(e,t,n){var r=o++;a(e,(function(e,t){i[r]=t,n(e)}))}),(function(e){r(e,i)}))}var _e=Se(Te),Ae=w(_e);function Ie(e){return function(t,n,r,i){return e(Oe(n),t,y(r),i)}}var De=Ie(Te),ze=Ee(De,1),Le=w(ze);function Re(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Be,Pe=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[Be?a:++r];if(!1===t(i[s],s,i))break}return e};function Fe(e,t){return e&&Pe(e,t,we)}function He(e){return e!==e}function qe(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,He,n)}var Ue=function(e,t,n){"function"===typeof t&&(n=t,t=null),n=U(n||q);var r=we(e).length;if(!r)return n(null);t||(t=r);var i={},a=0,s=!1,l=Object.create(null),c=[],d=[],u={};function h(e,t){c.push((function(){!function(e,t){if(!s){var r=xe((function(t,r){if(a--,arguments.length>2&&(r=o(arguments,1)),t){var c={};Fe(i,(function(e,t){c[t]=e})),c[e]=r,s=!0,l=Object.create(null),n(t,c)}else i[e]=r,Re(l[e]||[],(function(e){e()})),p()}));a++;var c=y(t[t.length-1]);t.length>1?c(i,r):c(r)}}(e,t)}))}function p(){if(0===c.length&&0===a)return n(null,i);for(;c.length&&a<t;)c.shift()()}function f(t){var n=[];return Fe(e,(function(e,r){$(e)&&qe(e,t,0)>=0&&n.push(r)})),n}Fe(e,(function(t,n){if(!$(t))return h(n,[t]),void d.push(n);var r=t.slice(0,t.length-1),i=r.length;if(0===i)return h(n,t),void d.push(n);u[n]=i,Re(r,(function(o){if(!e[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+r.join(", "));!function(e,t){var n=l[e];n||(n=l[e]=[]),n.push(t)}(o,(function(){0===--i&&h(n,t)}))}))})),function(){for(var e=0;d.length;)e++,Re(f(d.pop()),(function(e){0===--u[e]&&d.push(e)}));if(e!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};function We(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Ve="[object Symbol]",Ye=1/0,Ge=C?C.prototype:void 0,Ze=Ge?Ge.toString:void 0;function Xe(e){if("string"==typeof e)return e;if($(e))return We(e,Xe)+"";if(function(e){return"symbol"==typeof e||Y(e)&&I(e)==Ve}(e))return Ze?Ze.call(e):"";var t=e+"";return"0"==t&&1/e==-Ye?"-0":t}function Qe(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}var Ke=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),$e="\\ud800-\\udfff",Je="["+$e+"]",et="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tt="\\ud83c[\\udffb-\\udfff]",nt="[^"+$e+"]",rt="(?:\\ud83c[\\udde6-\\uddff]){2}",it="[\\ud800-\\udbff][\\udc00-\\udfff]",ot="(?:"+et+"|"+tt+")?",at="[\\ufe0e\\ufe0f]?",st=at+ot+"(?:\\u200d(?:"+[nt,rt,it].join("|")+")"+at+ot+")*",lt="(?:"+[nt+et+"?",et,rt,it,Je].join("|")+")",ct=RegExp(tt+"(?="+tt+")|"+lt+st,"g");function dt(e){return function(e){return Ke.test(e)}(e)?function(e){return e.match(ct)||[]}(e):function(e){return e.split("")}(e)}var ut=/^\s+|\s+$/g;function ht(e,t,n){var r;if((e=null==(r=e)?"":Xe(r))&&(n||void 0===t))return e.replace(ut,"");if(!e||!(t=Xe(t)))return e;var i=dt(e),o=dt(t),a=function(e,t){for(var n=-1,r=e.length;++n<r&&qe(t,e[n],0)>-1;);return n}(i,o),s=function(e,t){for(var n=e.length;n--&&qe(t,e[n],0)>-1;);return n}(i,o)+1;return Qe(i,a,s).join("")}var pt=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ft=/,/,vt=/(=.+)?(\s*)$/,gt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function mt(e,t){var n={};Fe(e,(function(e,t){var r,i=b(e),o=!i&&1===e.length||i&&0===e.length;if($(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?a:e);else if(o)n[t]=e;else{if(r=function(e){return(e=(e=(e=e.toString().replace(gt,"")).match(pt)[2].replace(" ",""))?e.split(ft):[]).map((function(e){return ht(e.replace(vt,""))}))}(e),0===e.length&&!i&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");i||r.pop(),n[t]=r.concat(a)}function a(t,n){var i=We(r,(function(e){return t[e]}));i.push(n),y(e).apply(null,i)}})),Ue(n,t)}function bt(){this.head=this.tail=null,this.length=0}function yt(e,t){e.length=1,e.head=e.tail=t}function wt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=y(e),i=0,o=[],a=!1;function s(e,t,n){if(null!=n&&"function"!==typeof n)throw new Error("task callback must be a function");if(d.started=!0,$(e)||(e=[e]),0===e.length&&d.idle())return p((function(){d.drain()}));for(var r=0,i=e.length;r<i;r++){var o={data:e[r],callback:n||q};t?d._tasks.unshift(o):d._tasks.push(o)}a||(a=!0,p((function(){a=!1,d.process()})))}function l(e){return function(t){i-=1;for(var n=0,r=e.length;n<r;n++){var a=e[n],s=qe(o,a,0);0===s?o.shift():s>0&&o.splice(s,1),a.callback.apply(a,arguments),null!=t&&d.error(t,a.data)}i<=d.concurrency-d.buffer&&d.unsaturated(),d.idle()&&d.drain(),d.process()}}var c=!1,d={_tasks:new bt,concurrency:t,payload:n,saturated:q,unsaturated:q,buffer:t/4,empty:q,drain:q,error:q,started:!1,paused:!1,push:function(e,t){s(e,!1,t)},kill:function(){d.drain=q,d._tasks.empty()},unshift:function(e,t){s(e,!0,t)},remove:function(e){d._tasks.remove(e)},process:function(){if(!c){for(c=!0;!d.paused&&i<d.concurrency&&d._tasks.length;){var e=[],t=[],n=d._tasks.length;d.payload&&(n=Math.min(n,d.payload));for(var a=0;a<n;a++){var s=d._tasks.shift();e.push(s),o.push(s),t.push(s.data)}i+=1,0===d._tasks.length&&d.empty(),i===d.concurrency&&d.saturated();var u=xe(l(e));r(t,u)}c=!1}},length:function(){return d._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return d._tasks.length+i===0},pause:function(){d.paused=!0},resume:function(){!1!==d.paused&&(d.paused=!1,p(d.process))}};return d}function kt(e,t){return wt(e,1,t)}bt.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},bt.prototype.empty=function(){for(;this.head;)this.shift();return this},bt.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},bt.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},bt.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):yt(this,e)},bt.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):yt(this,e)},bt.prototype.shift=function(){return this.head&&this.removeLink(this.head)},bt.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},bt.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},bt.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var xt=Ee(Ce,1);function Ot(e,t,n,r){r=U(r||q);var i=y(n);xt(e,(function(e,n,r){i(t,e,(function(e,n){t=n,r(e)}))}),(function(e){r(e,t)}))}function Ct(){var e=We(arguments,y);return function(){var t=o(arguments),n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=q,Ot(e,t,(function(e,t,r){t.apply(n,e.concat((function(e){var t=o(arguments,1);r(e,t)})))}),(function(e,t){r.apply(n,[e].concat(t))}))}}var Et=function(){return Ct.apply(null,o(arguments).reverse())},jt=Array.prototype.concat,Mt=function(e,t,n,r){r=r||q;var i=y(n);De(e,t,(function(e,t){i(e,(function(e){return e?t(e):t(null,o(arguments,1))}))}),(function(e,t){for(var n=[],i=0;i<t.length;i++)t[i]&&(n=jt.apply(n,t[i]));return r(e,n)}))},Nt=Ee(Mt,1/0),St=Ee(Mt,1),Tt=function(){var e=o(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function _t(e){return e}function At(e,t){return function(n,r,i,o){o=o||q;var a,s=!1;n(r,(function(n,r,o){i(n,(function(r,i){r?o(r):e(i)&&!a?(s=!0,a=t(!0,n),o(null,H)):o()}))}),(function(e){e?o(e):o(null,s?a:t(!1))}))}}function It(e,t){return t}var Dt=Se(At(_t,It)),zt=Ie(At(_t,It)),Lt=Ee(zt,1);function Rt(e){return function(t){var n=o(arguments,1);n.push((function(t){var n=o(arguments,1);"object"===typeof console&&(t?console.error&&console.error(t):console[e]&&Re(n,(function(t){console[e](t)})))})),y(t).apply(null,n)}}var Bt=Rt("dir");function Pt(e,t,n){n=xe(n||q);var r=y(e),i=y(t);function a(e){if(e)return n(e);var t=o(arguments,1);t.push(s),i.apply(this,t)}function s(e,t){return e?n(e):t?void r(a):n(null)}s(null,!0)}function Ft(e,t,n){n=xe(n||q);var r=y(e);r((function e(i){if(i)return n(i);var a=o(arguments,1);if(t.apply(this,a))return r(e);n.apply(null,[null].concat(a))}))}function Ht(e,t,n){Ft(e,(function(){return!t.apply(this,arguments)}),n)}function qt(e,t,n){n=xe(n||q);var r=y(t),i=y(e);function o(e){if(e)return n(e);i(a)}function a(e,t){return e?n(e):t?void r(o):n(null)}i(a)}function Ut(e){return function(t,n,r){return e(t,r)}}function Wt(e,t,n){Ne(e,Ut(y(t)),n)}function Vt(e,t,n,r){Oe(t)(e,Ut(y(n)),r)}var Yt=Ee(Vt,1);function Gt(e){return b(e)?e:s((function(t,n){var r=!0;t.push((function(){var e=arguments;r?p((function(){n.apply(null,e)})):n.apply(null,e)})),e.apply(this,t),r=!1}))}function Zt(e){return!e}var Xt=Se(At(Zt,Zt)),Qt=Ie(At(Zt,Zt)),Kt=Ee(Qt,1);function $t(e){return function(t){return null==t?void 0:t[e]}}function Jt(e,t,n,r){var i=new Array(t.length);e(t,(function(e,t,r){n(e,(function(e,n){i[t]=!!n,r(e)}))}),(function(e){if(e)return r(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);r(null,n)}))}function en(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(n,o){n?r(n):(o&&i.push({index:t,value:e}),r())}))}),(function(e){e?r(e):r(null,We(i.sort((function(e,t){return e.index-t.index})),$t("value")))}))}function tn(e,t,n,r){(F(t)?Jt:en)(e,t,y(n),r||q)}var nn=Se(tn),rn=Ie(tn),on=Ee(rn,1);function an(e,t){var n=xe(t||q),r=y(Gt(e));!function e(t){if(t)return n(t);r(e)}()}var sn=function(e,t,n,r){r=r||q;var i=y(n);De(e,t,(function(e,t){i(e,(function(n,r){return n?t(n):t(null,{key:r,val:e})}))}),(function(e,t){for(var n={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var a=t[o].key,s=t[o].val;i.call(n,a)?n[a].push(s):n[a]=[s]}return r(e,n)}))},ln=Ee(sn,1/0),cn=Ee(sn,1),dn=Rt("log");function un(e,t,n,r){r=U(r||q);var i={},o=y(n);Ce(e,t,(function(e,t,n){o(e,t,(function(e,r){if(e)return n(e);i[t]=r,n()}))}),(function(e){r(e,i)}))}var hn=Ee(un,1/0),pn=Ee(un,1);function fn(e,t){return t in e}function vn(e,t){var n=Object.create(null),r=Object.create(null);t=t||_t;var i=y(e),a=s((function(e,a){var s=t.apply(null,e);fn(n,s)?p((function(){a.apply(null,n[s])})):fn(r,s)?r[s].push(a):(r[s]=[a],i.apply(null,e.concat((function(){var e=o(arguments);n[s]=e;var t=r[s];delete r[s];for(var i=0,a=t.length;i<a;i++)t[i].apply(null,e)}))))}));return a.memo=n,a.unmemoized=e,a}var gn=h(d?n.nextTick:c?e:u);function mn(e,t,n){n=n||q;var r=F(t)?[]:{};e(t,(function(e,t,n){y(e)((function(e,i){arguments.length>2&&(i=o(arguments,1)),r[t]=i,n(e)}))}),(function(e){n(e,r)}))}function bn(e,t){mn(Ne,e,t)}function yn(e,t,n){mn(Oe(t),e,n)}var wn=function(e,t){var n=y(e);return wt((function(e,t){n(e[0],t)}),t,1)},kn=function(e,t){var n=wn(e,t);return n.push=function(e,t,r){if(null==r&&(r=q),"function"!==typeof r)throw new Error("task callback must be a function");if(n.started=!0,$(e)||(e=[e]),0===e.length)return p((function(){n.drain()}));t=t||0;for(var i=n._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var s={data:e[o],priority:t,callback:r};i?n._tasks.insertBefore(i,s):n._tasks.push(s)}p(n.process)},delete n.unshift,n};function xn(e,t){if(t=U(t||q),!$(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)y(e[n])(t)}function On(e,t,n,r){Ot(o(e).reverse(),t,n,r)}function Cn(e){var t=y(e);return s((function(e,n){return e.push((function(e,t){var r;e?n(null,{error:e}):(r=arguments.length<=2?t:o(arguments,1),n(null,{value:r}))})),t.apply(this,e)}))}function En(e){var t;return $(e)?t=We(e,Cn):(t={},Fe(e,(function(e,n){t[n]=Cn.call(this,e)}))),t}function jn(e,t,n,r){tn(e,t,(function(e,t){n(e,(function(e,n){t(e,!n)}))}),r)}var Mn=Se(jn),Nn=Ie(jn),Sn=Ee(Nn,1);function Tn(e){return function(){return e}}function _n(e,t,n){var r={times:5,intervalFunc:Tn(0)};if(arguments.length<3&&"function"===typeof e?(n=t||q,t=e):(function(e,t){if("object"===typeof t)e.times=+t.times||5,e.intervalFunc="function"===typeof t.interval?t.interval:Tn(+t.interval||0),e.errorFilter=t.errorFilter;else{if("number"!==typeof t&&"string"!==typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||5}}(r,e),n=n||q),"function"!==typeof t)throw new Error("Invalid arguments for async.retry");var i=y(t),o=1;!function e(){i((function(t){t&&o++<r.times&&("function"!=typeof r.errorFilter||r.errorFilter(t))?setTimeout(e,r.intervalFunc(o)):n.apply(null,arguments)}))}()}var An=function(e,t){t||(t=e,e=null);var n=y(t);return s((function(t,r){function i(e){n.apply(null,t.concat(e))}e?_n(e,i,r):_n(i,r)}))};function In(e,t){mn(xt,e,t)}var Dn=Se(At(Boolean,_t)),zn=Ie(At(Boolean,_t)),Ln=Ee(zn,1);function Rn(e,t,n){var r=y(t);function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}_e(e,(function(e,t){r(e,(function(n,r){if(n)return t(n);t(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,We(t.sort(i),$t("value")))}))}function Bn(e,t,n){var r=y(e);return s((function(i,o){var a,s=!1;i.push((function(){s||(o.apply(null,arguments),clearTimeout(a))})),a=setTimeout((function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),s=!0,o(r)}),t),r.apply(null,i)}))}var Pn=Math.ceil,Fn=Math.max;function Hn(e,t,n,r){var i=y(n);De(function(e,t,n,r){for(var i=-1,o=Fn(Pn((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a}(0,e,1),t,i,r)}var qn=Ee(Hn,1/0),Un=Ee(Hn,1);function Wn(e,t,n,r){arguments.length<=3&&(r=n,n=t,t=$(e)?[]:{}),r=U(r||q);var i=y(n);Ne(e,(function(e,n,r){i(t,e,n,r)}),(function(e){r(e,t)}))}function Vn(e,t){var n,r=null;t=t||q,Yt(e,(function(e,t){y(e)((function(e,i){n=arguments.length>2?o(arguments,1):i,r=e,t(!e)}))}),(function(){t(r,n)}))}function Yn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Gn(e,t,n){n=xe(n||q);var r=y(t);if(!e())return n(null);r((function t(i){if(i)return n(i);if(e())return r(t);var a=o(arguments,1);n.apply(null,[null].concat(a))}))}function Zn(e,t,n){Gn((function(){return!e.apply(this,arguments)}),t,n)}var Xn=function(e,t){if(t=U(t||q),!$(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function r(t){var r=y(e[n++]);t.push(xe(i)),r.apply(null,t)}function i(i){if(i||n===e.length)return t.apply(null,arguments);r(o(arguments,1))}r([])},Qn={apply:a,applyEach:Ae,applyEachSeries:Le,asyncify:f,auto:Ue,autoInject:mt,cargo:kt,compose:Et,concat:Nt,concatLimit:Mt,concatSeries:St,constant:Tt,detect:Dt,detectLimit:zt,detectSeries:Lt,dir:Bt,doDuring:Pt,doUntil:Ht,doWhilst:Ft,during:qt,each:Wt,eachLimit:Vt,eachOf:Ne,eachOfLimit:Ce,eachOfSeries:xt,eachSeries:Yt,ensureAsync:Gt,every:Xt,everyLimit:Qt,everySeries:Kt,filter:nn,filterLimit:rn,filterSeries:on,forever:an,groupBy:ln,groupByLimit:sn,groupBySeries:cn,log:dn,map:_e,mapLimit:De,mapSeries:ze,mapValues:hn,mapValuesLimit:un,mapValuesSeries:pn,memoize:vn,nextTick:gn,parallel:bn,parallelLimit:yn,priorityQueue:kn,queue:wn,race:xn,reduce:Ot,reduceRight:On,reflect:Cn,reflectAll:En,reject:Mn,rejectLimit:Nn,rejectSeries:Sn,retry:_n,retryable:An,seq:Ct,series:In,setImmediate:p,some:Dn,someLimit:zn,someSeries:Ln,sortBy:Rn,timeout:Bn,times:qn,timesLimit:Hn,timesSeries:Un,transform:Wn,tryEach:Vn,unmemoize:Yn,until:Zn,waterfall:Xn,whilst:Gn,all:Xt,allLimit:Qt,allSeries:Kt,any:Dn,anyLimit:zn,anySeries:Ln,find:Dt,findLimit:zt,findSeries:Lt,forEach:Wt,forEachSeries:Yt,forEachLimit:Vt,forEachOf:Ne,forEachOfSeries:xt,forEachOfLimit:Ce,inject:Ot,foldl:Ot,foldr:On,select:nn,selectLimit:rn,selectSeries:on,wrapSync:f};t.default=Qn,t.apply=a,t.applyEach=Ae,t.applyEachSeries=Le,t.asyncify=f,t.auto=Ue,t.autoInject=mt,t.cargo=kt,t.compose=Et,t.concat=Nt,t.concatLimit=Mt,t.concatSeries=St,t.constant=Tt,t.detect=Dt,t.detectLimit=zt,t.detectSeries=Lt,t.dir=Bt,t.doDuring=Pt,t.doUntil=Ht,t.doWhilst=Ft,t.during=qt,t.each=Wt,t.eachLimit=Vt,t.eachOf=Ne,t.eachOfLimit=Ce,t.eachOfSeries=xt,t.eachSeries=Yt,t.ensureAsync=Gt,t.every=Xt,t.everyLimit=Qt,t.everySeries=Kt,t.filter=nn,t.filterLimit=rn,t.filterSeries=on,t.forever=an,t.groupBy=ln,t.groupByLimit=sn,t.groupBySeries=cn,t.log=dn,t.map=_e,t.mapLimit=De,t.mapSeries=ze,t.mapValues=hn,t.mapValuesLimit=un,t.mapValuesSeries=pn,t.memoize=vn,t.nextTick=gn,t.parallel=bn,t.parallelLimit=yn,t.priorityQueue=kn,t.queue=wn,t.race=xn,t.reduce=Ot,t.reduceRight=On,t.reflect=Cn,t.reflectAll=En,t.reject=Mn,t.rejectLimit=Nn,t.rejectSeries=Sn,t.retry=_n,t.retryable=An,t.seq=Ct,t.series=In,t.setImmediate=p,t.some=Dn,t.someLimit=zn,t.someSeries=Ln,t.sortBy=Rn,t.timeout=Bn,t.times=qn,t.timesLimit=Hn,t.timesSeries=Un,t.transform=Wn,t.tryEach=Vn,t.unmemoize=Yn,t.until=Zn,t.waterfall=Xn,t.whilst=Gn,t.all=Xt,t.allLimit=Qt,t.allSeries=Kt,t.any=Dn,t.anyLimit=zn,t.anySeries=Ln,t.find=Dt,t.findLimit=zt,t.findSeries=Lt,t.forEach=Wt,t.forEachSeries=Yt,t.forEachLimit=Vt,t.forEachOf=Ne,t.forEachOfSeries=xt,t.forEachOfLimit=Ce,t.inject=Ot,t.foldl=Ot,t.foldr=On,t.select=nn,t.selectLimit=rn,t.selectSeries=on,t.wrapSync=f,Object.defineProperty(t,"__esModule",{value:!0})},o(t)}).call(this,n(440).setImmediate,n(74),n(73),n(117)(e))},2822:function(e,t){var n=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(t),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var o=r-Math.floor(r),a="";for(i=0;i<Math.floor(r);i++){a=Math.floor(Math.random()*t).toString(t)+a}if(o){var s=Math.pow(t,o);a=Math.floor(Math.random()*s).toString(t)+a}var l=parseInt(a,t);return l!==1/0&&l>=Math.pow(2,e)?n(e,t):a};n.rack=function(e,t,r){var i=function(i){var a=0;do{if(a++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var s=n(e,t)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},2823:function(e,t,n){var r=n(2601),i=n(2824),o=n(2825);function a(e,t,n){var i=a.channel(t,n);r.call(this,e,i),this.collection=t,this.id=n}e.exports=a,a.prototype=Object.create(r.prototype),a.channel=function(e,t){return e+"."+t},a.prototype._createLocalPresence=function(e){return new i(this,e)},a.prototype._createRemotePresence=function(e){return new o(this,e)}},2824:function(e,t,n){var r=n(2602),i=n(2485),o=n(2476),a=i.CODES;function s(e,t){r.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this._doc=this.connection.get(this.collection,this.id),this._isSending=!1,this._docDataVersionByPresenceVersion={},this._opHandler=this._transformAgainstOp.bind(this),this._createOrDelHandler=this._handleCreateOrDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._destroyHandler=this.destroy.bind(this),this._registerWithDoc()}e.exports=s,s.prototype=Object.create(r.prototype),s.prototype.submit=function(e,t){if(!this._doc.type){if(null===e)return this._callbackOrEmit(null,t);var n={code:a.ERR_DOC_DOES_NOT_EXIST,message:"Cannot submit presence. Document has not been created"};return this._callbackOrEmit(n,t)}this._docDataVersionByPresenceVersion[this.presenceVersion]=this._doc._dataStateVersion,r.prototype.submit.call(this,e,t)},s.prototype.destroy=function(e){this._doc.removeListener("op",this._opHandler),this._doc.removeListener("create",this._createOrDelHandler),this._doc.removeListener("del",this._createOrDelHandler),this._doc.removeListener("load",this._loadHandler),this._doc.removeListener("destroy",this._destroyHandler),r.prototype.destroy.call(this,e)},s.prototype._sendPending=function(){if(!this._isSending){this._isSending=!0;var e=this;this._doc.whenNothingPending((function(){e._isSending=!1,e.connection.canSend&&(e._pendingMessages.forEach((function(t){t.t=e._doc.type.uri,t.v=e._doc.version,e.connection.send(t)})),e._pendingMessages=[],e._docDataVersionByPresenceVersion={})}))}},s.prototype._registerWithDoc=function(){this._doc.on("op",this._opHandler),this._doc.on("create",this._createOrDelHandler),this._doc.on("del",this._createOrDelHandler),this._doc.on("load",this._loadHandler),this._doc.on("destroy",this._destroyHandler)},s.prototype._transformAgainstOp=function(e,t){var n=this,r=this._doc._dataStateVersion;this._pendingMessages.forEach((function(i){if(!(n._docDataVersionByPresenceVersion[i.pv]>=r))try{i.p=n._transformPresence(i.p,e,t),n._docDataVersionByPresenceVersion[i.pv]=r}catch(a){var o=n._getCallback(i.pv);n._callbackOrEmit(a,o)}}));try{this.value=this._transformPresence(this.value,e,t)}catch(i){this.emit("error",i)}},s.prototype._handleCreateOrDel=function(){this._pendingMessages.forEach((function(e){e.p=null})),this.value=null},s.prototype._handleLoad=function(){this.value=null,this._pendingMessages=[],this._docDataVersionByPresenceVersion={}},s.prototype._message=function(){var e=r.prototype._message.call(this);return e.c=this.collection,e.d=this.id,e.v=null,e.t=null,e},s.prototype._transformPresence=function(e,t,n){var r=this._doc.type;if(!o.supportsPresence(r))throw new i(a.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,"Type does not support presence: "+r.name);return r.transformPresence(e,t,n)}},2825:function(e,t,n){var r=n(2603),i=n(2826);function o(e,t){r.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this.src=null,this.presenceVersion=null,this._doc=this.connection.get(this.collection,this.id),this._pending=null,this._opCache=null,this._pendingSetPending=!1,this._opHandler=this._handleOp.bind(this),this._createDelHandler=this._handleCreateDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._registerWithDoc()}e.exports=o,o.prototype=Object.create(r.prototype),o.prototype.receiveUpdate=function(e){this._pending&&e.pv<this._pending.pv||(this.src=e.src,this._pending=e,this._setPendingPresence())},o.prototype.destroy=function(e){this._doc.removeListener("op",this._opHandler),this._doc.removeListener("create",this._createDelHandler),this._doc.removeListener("del",this._createDelHandler),this._doc.removeListener("load",this._loadHandler),r.prototype.destroy.call(this,e)},o.prototype._registerWithDoc=function(){this._doc.on("op",this._opHandler),this._doc.on("create",this._createDelHandler),this._doc.on("del",this._createDelHandler),this._doc.on("load",this._loadHandler)},o.prototype._setPendingPresence=function(){if(!this._pendingSetPending){this._pendingSetPending=!0;var e=this;this._doc.whenNothingPending((function(){if(e._pendingSetPending=!1,e._pending)return e._pending.pv<e.presenceVersion?e._pending=null:e._pending.v>e._doc.version?e._doc.fetch():void(e._catchUpStalePresence()&&(e.value=e._pending.p,e.presenceVersion=e._pending.pv,e._pending=null,e.presence._updateRemotePresence(e)))}))}},o.prototype._handleOp=function(e,t,n){var r=n===this.src;this._transformAgainstOp(e,r),this._cacheOp(e,r),this._setPendingPresence()},r.prototype._handleCreateDel=function(){this._cacheOp(null),this._setPendingPresence()},r.prototype._handleLoad=function(){this.value=null,this._pending=null,this._opCache=null,this.presence._updateRemotePresence(this)},o.prototype._transformAgainstOp=function(e,t){if(this.value){try{this.value=this._doc.type.transformPresence(this.value,e,t)}catch(n){return this.presence.emit("error",n)}this.presence._updateRemotePresence(this)}},o.prototype._catchUpStalePresence=function(){if(this._pending.v>=this._doc.version)return!0;if(!this._opCache)return this._startCachingOps(),this._doc.fetch(),this.presence.subscribe(),!1;for(;this._opCache[this._pending.v];){var e=this._opCache[this._pending.v],t=e.op,n=e.isOwnOp;null===t?(this._pending.p=null,this._pending.v++):i.transformPresence(this._pending,t,n)}var r=this._pending.v>=this._doc.version;return r&&this._stopCachingOps(),r},o.prototype._startCachingOps=function(){this._opCache=[]},o.prototype._stopCachingOps=function(){this._opCache=null},o.prototype._cacheOp=function(e,t){this._opCache&&(e=e?{op:e}:null,this._opCache[this._doc.version-1]={op:e,isOwnOp:t})}},2826:function(e,t,n){var r=n(2490),i=n(2485),o=n(2476),a=i.CODES;function s(e,t){if(e.type===r.defaultType.uri){var n=t.op;if(n){var i=e.data;n.length>1&&(i=o.clone(i));for(var a=0;a<n.length;a++){var s=n[a];"string"===typeof s.lm&&(s.lm=+s.lm);for(var l=s.p,c=i,d=0;d<l.length;d++){var u=l[d];"[object Array]"==Object.prototype.toString.call(c)?l[d]=+u:c.constructor===Object&&(l[d]=u.toString()),c=c[u]}a<n.length-1&&(i=r.defaultType.apply(i,[s]))}}}}t.checkOp=function(e){if(null==e||"object"!==typeof e)return new i(a.ERR_OT_OP_BADLY_FORMED,"Op must be an object");if(null!=e.create){if("object"!==typeof e.create)return new i(a.ERR_OT_OP_BADLY_FORMED,"Create data must be an object");var t=e.create.type;if("string"!==typeof t)return new i(a.ERR_OT_OP_BADLY_FORMED,"Missing create type");var n=r.map[t];if(null==n||"object"!==typeof n)return new i(a.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type")}else if(null!=e.del){if(!0!==e.del)return new i(a.ERR_OT_OP_BADLY_FORMED,"del value must be true")}else if(!("op"in e))return new i(a.ERR_OT_OP_BADLY_FORMED,"Missing op, create, or del");return null!=e.src&&"string"!==typeof e.src?new i(a.ERR_OT_OP_BADLY_FORMED,"src must be a string"):null!=e.seq&&"number"!==typeof e.seq?new i(a.ERR_OT_OP_BADLY_FORMED,"seq must be a number"):null==e.src&&null!=e.seq||null!=e.src&&null==e.seq?new i(a.ERR_OT_OP_BADLY_FORMED,"Both src and seq must be set together"):null!=e.m&&"object"!==typeof e.m?new i(a.ERR_OT_OP_BADLY_FORMED,"op.m must be an object or null"):void 0},t.normalizeType=function(e){return r.map[e]&&r.map[e].uri},t.apply=function(e,t){if("object"!==typeof e)return new i(a.ERR_APPLY_SNAPSHOT_NOT_PROVIDED,"Missing snapshot");if(null!=e.v&&null!=t.v&&e.v!==t.v)return new i(a.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT,"Version mismatch");if(t.create){if(e.type)return new i(a.ERR_DOC_ALREADY_CREATED,"Document already exists");var n=t.create,o=r.map[n.type];if(!o)return new i(a.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{e.data=o.create(n.data),e.type=o.uri,e.v++}catch(s){return s}}else if(t.del)e.data=void 0,e.type=null,e.v++;else if("op"in t){var s=function(e,t){if(!e.type)return new i(a.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(void 0===t)return new i(a.ERR_OT_OP_NOT_PROVIDED,"Missing op");var n=r.map[e.type];if(!n)return new i(a.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{e.data=n.apply(e.data,t)}catch(s){return new i(a.ERR_OT_OP_NOT_APPLIED,s.message)}}(e,t.op);if(s)return s;e.v++}else e.v++},t.transform=function(e,t,n){if(null!=t.v&&t.v!==n.v)return new i(a.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Version mismatch");if(n.del){if(t.create||"op"in t)return new i(a.ERR_DOC_WAS_DELETED,"Document was deleted")}else{if(n.create&&("op"in t||t.create||t.del)||"op"in n&&t.create)return new i(a.ERR_DOC_ALREADY_CREATED,"Document was created remotely");if("op"in n&&"op"in t){if(!e)return new i(a.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if("string"===typeof e&&!(e=r.map[e]))return new i(a.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{t.op=e.transform(t.op,n.op,"left")}catch(o){return o}}}null!=t.v&&t.v++},t.applyOps=function(e,n,r){r=r||{};for(var o=0;o<n.length;o++){var l=n[o];if(r._normalizeLegacyJson0Ops)try{s(e,l)}catch(c){return new i(a.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,"Cannot normalize legacy json0 op")}e.v=l.v;var c=t.apply(e,l);if(c)return c}},t.transformPresence=function(e,t,n){var i=this.checkOp(t);if(i)return i;var s=e.t;if("string"===typeof s&&(s=r.map[s]),!s)return{code:a.ERR_DOC_TYPE_NOT_RECOGNIZED,message:"Unknown type"};if(!o.supportsPresence(s))return{code:a.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence"};if(t.create||t.del)return e.p=null,void e.v++;try{e.p=null===e.p?null:s.transformPresence(e.p,t.op,n)}catch(l){return{code:a.ERR_PRESENCE_TRANSFORM_FAILED,message:l.message||l}}e.v++}},2827:function(e,t,n){var r=n(2604),i=n(2476);function o(e,t,n,o,a,s){if(r.call(this,e,t,n,o,s),!i.isValidVersion(a))throw new Error("Snapshot version must be a positive integer or null");this.version=a}e.exports=o,o.prototype=Object.create(r.prototype),o.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},2828:function(e,t){e.exports=function(e,t,n,r,i){this.id=e,this.v=t,this.type=n,this.data=r,this.m=i}},2829:function(e,t,n){var r=n(2604),i=n(2476);function o(e,t,n,o,a,s){if(r.call(this,e,t,n,o,s),!i.isValidTimestamp(a))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=a}e.exports=o,o.prototype=Object.create(r.prototype),o.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},2832:function(e,t,n){"use strict";var r=n(3),i=n(0),o=n(2836),a=n(2606),s=function(e){return e?"function"===typeof e?e():e:null},l=n(2504),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},d=function(e){var t=e.title,n=e.content,r=e.prefixCls;return t||n?i.createElement(i.Fragment,null,t&&i.createElement("div",{className:"".concat(r,"-title")},s(t)),i.createElement("div",{className:"".concat(r,"-inner-content")},s(n))):null},u=i.forwardRef((function(e,t){var n=e.prefixCls,s=e.title,u=e.content,h=e._overlay,p=e.placement,f=void 0===p?"top":p,v=e.trigger,g=void 0===v?"hover":v,m=e.mouseEnterDelay,b=void 0===m?.1:m,y=e.mouseLeaveDelay,w=void 0===y?.1:y,k=e.overlayStyle,x=void 0===k?{}:k,O=c(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),C=i.useContext(o.b).getPrefixCls,E=C("popover",n),j=C();return i.createElement(a.a,Object(r.a)({placement:f,trigger:g,mouseEnterDelay:b,mouseLeaveDelay:w,overlayStyle:x},O,{prefixCls:E,ref:t,overlay:h||i.createElement(d,{prefixCls:E,title:s,content:u}),transitionName:Object(l.b)(j,"zoom-big",O.transitionName)}))}));t.a=u},2836:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n(3);var r=n(0),i=r.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}}),o=i.Consumer},2837:function(e,t,n){"use strict";var r=n(3),i=n(0),o=n(540),a=n(541),s=function(e,t){return i.createElement(a.a,Object(r.a)({},e,{ref:t,icon:o.a}))},l=i.forwardRef(s);t.a=l},2840:function(e,t,n){"use strict";var r,i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&a.test(e)},l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return d(r)}},2841:function(e,t,n){"use strict";var r=n(3),i=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},a=n(541),s=function(e,t){return i.createElement(a.a,Object(r.a)({},e,{ref:t,icon:o}))},l=i.forwardRef(s);t.a=l}}]);