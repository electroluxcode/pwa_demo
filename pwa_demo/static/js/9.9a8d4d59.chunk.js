(window["webpackJsonp_teamshare-docs"]=window["webpackJsonp_teamshare-docs"]||[]).push([[9],{2473:function(e,t,n){"use strict";n.d(t,"n",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return j}));var a=n(287),i=n(5),r="zh-CN",o=Object(a.a)("HIGHLIGHT_PLUGIN_LIKE_ICON"),c="".concat(window.location.origin,"/uml_plugin/index.html"),s={latex:"latex",getWebCard:"getWebCard",docsAppreciate:"docsAppreciate",docsCreateAppreciate:"docsCreateAppreciate",docsDeleteAppreciate:"docsDeleteAppreciate",docsCreateComment:"docsCreateComment",docsDeleteComment:"docsDeleteComment",docsSetFileMetadata:"docsSetFileMetadata",setFilePermission:"setFilePermission"},u="https://cdn-teamshare-priviate",d=66e5,l="teamshare_docs",f={DISCONNECTED:i.c.t("DISCONNECTED_ERROR_NAME"),CONNECTION_ERROR:i.c.t("CONNECTION_ERROR_NAME"),UNKNOWN_ERROR:i.c.t("UNKNOWN_ERROR_NAME")},p="wss://rtasr.xfyun.cn/v1/ws",h="wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1",b="9yaQsRBmUGYRVHJs",v=[{id:100,icon:"ts-time",name:i.c.t("ZUICHANG_USE"),data:localStorage.getItem(o)||[]},{id:0,icon:"ts-emotion-happy",name:i.c.t("BIAOQING_PEOPLE"),data:["\ud83d\ude00","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0e","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83d\ude42","\ud83e\udd17","\ud83e\udd14","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude44","\ud83d\ude0f","\ud83d\ude23","\ud83d\ude25","\ud83d\ude2e","\ud83e\udd10","\ud83d\ude2f","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude34","\ud83d\ude0c","\ud83d\ude1b","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude15","\ud83d\ude43","\ud83e\udd11","\ud83d\ude32","\ud83d\ude41","\ud83d\ude16","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude26","\ud83d\ude27","\ud83d\ude28","\ud83d\ude29","\ud83d\ude2c","\ud83d\ude30","\ud83d\ude31","\ud83d\ude33","\ud83d\ude35","\ud83d\ude21","\ud83d\ude20","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83d\ude07","\ud83e\udd13","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udc80","\ud83d\udc7b","\ud83d\udc7d","\ud83d\udc7e","\ud83e\udd16","\ud83d\udca9","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude3f","\ud83d\ude3e","\ud83d\ude48","\ud83d\ude49","\ud83d\ude4a","\ud83d\udc76","\ud83d\udc66","\ud83d\udc67","\ud83d\udc68","\ud83d\udc69","\ud83d\udc74","\ud83d\udc75","\ud83d\udc6e","\ud83d\udc82","\ud83d\udc77","\ud83d\udc78","\ud83d\udc73","\ud83d\udc72","\ud83d\udc71","\ud83d\udc70","\ud83d\udc7c","\ud83c\udf85","\ud83d\ude4d","\ud83d\ude4e","\ud83d\ude45","\ud83d\ude46","\ud83d\udc81","\ud83d\ude4b","\ud83d\ude47","\ud83d\udc86","\ud83d\udc87","\ud83d\udeb6","\ud83c\udfc3","\ud83d\udc83","\ud83d\udc6f","\ud83d\udec0","\ud83d\udecc","\ud83d\udc64","\ud83d\udc65","\ud83c\udfc7","\ud83c\udfc2","\ud83c\udfc4","\ud83d\udea3","\ud83c\udfca","\ud83d\udeb4","\ud83d\udeb5","\ud83d\udc6b","\ud83d\udc6c","\ud83d\udc6d","\ud83d\udc8f","\ud83d\udc91","\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66","\ud83d\udcaa","\ud83d\udc48","\ud83d\udc49","\ud83d\udc46","\ud83d\udd95","\ud83d\udc47","\ud83d\udd96","\ud83e\udd18","\u270b","\ud83d\udc4c","\ud83d\udc4d","\ud83d\udc4e","\u270a","\ud83d\udc4a","\ud83d\udc4b","\ud83d\udc4f","\ud83d\udc50","\ud83d\ude4c","\ud83d\ude4f","\ud83d\udc85","\ud83d\udc42","\ud83d\udc43","\ud83d\udc63","\ud83d\udc40","\ud83d\udc45","\ud83d\udc44","\ud83d\udc8b","\ud83d\udc98","\ud83d\udc93","\ud83d\udc94","\ud83d\udc95","\ud83d\udc96","\ud83d\udc97","\ud83d\udc99","\ud83d\udc9a","\ud83d\udc9b","\ud83d\udc9c","\ud83d\udc9d","\ud83d\udc9e","\ud83d\udc9f","\ud83d\udc8c","\ud83d\udca4","\ud83d\udca2","\ud83d\udca3","\ud83d\udca5","\ud83d\udca6","\ud83d\udca8","\ud83d\udcab","\ud83d\udcac","\ud83d\udcad","\ud83d\udc53","\ud83d\udc54","\ud83d\udc55","\ud83d\udc56","\ud83d\udc57","\ud83d\udc58","\ud83d\udc59","\ud83d\udc5a","\ud83d\udc5b","\ud83d\udc5c","\ud83d\udc5d","\ud83c\udf92","\ud83d\udc5e","\ud83d\udc5f","\ud83d\udc60","\ud83d\udc61","\ud83d\udc62","\ud83d\udc51","\ud83d\udc52","\ud83c\udfa9","\ud83c\udf93","\ud83d\udcff","\ud83d\udc84","\ud83d\udc8d","\ud83d\udc8e"]},{id:1,icon:"ts-bear",name:i.c.t("DONGWU_ZIRANG"),data:["\ud83d\udc2b","\ud83d\udc18","\ud83d\udc2d","\ud83d\udc01","\ud83d\udc00","\ud83d\udc39","\ud83d\udc30","\ud83d\udc07","\ud83d\udc3b","\ud83d\udc28","\ud83d\udc3c","\ud83d\udc3e","\ud83e\udd83","\ud83d\udc14","\ud83d\udc13","\ud83d\udc23","\ud83d\udc24","\ud83d\udc25","\ud83d\udc26","\ud83d\udc27","\ud83d\udc38","\ud83d\udc0a","\ud83d\udc22","\ud83d\udc0d","\ud83d\udc32","\ud83d\udc09","\ud83d\udc33","\ud83d\udc0b","\ud83d\udc2c","\ud83d\udc1f","\ud83d\udc20","\ud83d\udc21","\ud83d\udc19","\ud83d\udc1a","\ud83e\udd80","\ud83d\udc0c","\ud83d\udc1b","\ud83d\udc1c","\ud83d\udc1d","\ud83d\udc1e","\ud83e\udd82","\ud83d\udc90","\ud83c\udf38","\ud83d\udcae","\ud83c\udf39","\ud83c\udf3a","\ud83c\udf3b","\ud83c\udf3c","\ud83c\udf37","\ud83c\udf31","\ud83c\udf32","\ud83c\udf33","\ud83c\udf34","\ud83c\udf35","\ud83c\udf3e","\ud83c\udf3f","\ud83c\udf40","\ud83c\udf41","\ud83c\udf42","\ud83c\udf43"]},{id:2,icon:"ts-cake",name:i.c.t("FOOD_YINGLIAO"),data:["\ud83c\udf47","\ud83c\udf48","\ud83c\udf49","\ud83c\udf4a","\ud83c\udf4b","\ud83c\udf4c","\ud83c\udf4d","\ud83c\udf4e","\ud83c\udf4f","\ud83c\udf50","\ud83c\udf51","\ud83c\udf52","\ud83c\udf53","\ud83c\udf45","\ud83c\udf46","\ud83c\udf3d","\ud83c\udf44","\ud83c\udf30","\ud83c\udf5e","\ud83e\uddc0","\ud83c\udf56","\ud83c\udf57","\ud83c\udf54","\ud83c\udf5f","\ud83c\udf55","\ud83c\udf2d","\ud83c\udf2e","\ud83c\udf2f","\ud83c\udf73","\ud83c\udf72","\ud83c\udf7f","\ud83c\udf71","\ud83c\udf58","\ud83c\udf59","\ud83c\udf5a","\ud83c\udf5b","\ud83c\udf5c","\ud83c\udf5d","\ud83c\udf60","\ud83c\udf62","\ud83c\udf63","\ud83c\udf64","\ud83c\udf65","\ud83c\udf61","\ud83c\udf66","\ud83c\udf67","\ud83c\udf68","\ud83c\udf69","\ud83c\udf6a","\ud83c\udf82","\ud83c\udf70","\ud83c\udf6b","\ud83c\udf6c","\ud83c\udf6d","\ud83c\udf6e","\ud83c\udf6f","\ud83c\udf7c","\u2615","\ud83c\udf75","\ud83c\udf76","\ud83c\udf7e","\ud83c\udf77","\ud83c\udf78","\ud83c\udf79","\ud83c\udf7a","\ud83c\udf7b","\ud83c\udf74","\ud83d\udd2a","\ud83c\udffa"]},{id:3,icon:"ts-basketball",name:i.c.t("ACTIVITY"),data:["\ud83c\udf83","\ud83c\udf84","\ud83c\udf86","\ud83c\udf87","\u2728","\ud83c\udf88","\ud83c\udf89","\ud83c\udf8a","\ud83c\udf8b","\ud83c\udf8d","\ud83c\udf8e","\ud83c\udf8f","\ud83c\udf90","\ud83c\udf91","\ud83c\udf80","\ud83c\udf81","\ud83c\udfab","\ud83c\udfc6","\ud83c\udfc5","\u26bd","\u26be","\ud83c\udfc0","\ud83c\udfd0","\ud83c\udfc8","\ud83c\udfc9","\ud83c\udfbe","\ud83c\udfb1","\ud83c\udfb3","\ud83c\udfcf","\ud83c\udfd1","\ud83c\udfd2","\ud83c\udfd3","\ud83c\udff8","\ud83c\udfaf","\u26f3","\ud83c\udfa3","\ud83c\udfbd","\ud83c\udfbf","\ud83c\udfae","\ud83c\udfb2","\ud83c\udccf","\ud83c\udc04","\ud83c\udfb4"]},{id:4,icon:"ts-car",name:i.c.t("TAIL_TARGET"),data:["\ud83c\udf0d","\ud83c\udf0e","\ud83c\udf0f","\ud83c\udf10","\ud83d\uddfe","\ud83c\udf0b","\ud83d\uddfb","\ud83c\udfe0","\ud83c\udfe1","\ud83c\udfe2","\ud83c\udfe3","\ud83c\udfe4","\ud83c\udfe5","\ud83c\udfe6","\ud83c\udfe8","\ud83c\udfe9","\ud83c\udfea","\ud83c\udfeb","\ud83c\udfec","\ud83c\udfed","\ud83c\udfef","\ud83c\udff0","\ud83d\udc92","\ud83d\uddfc","\ud83d\uddfd","\u26ea","\ud83d\udd4c","\ud83d\udd4d","\ud83d\udd4b","\u26f2","\u26fa","\ud83c\udf01","\ud83c\udf03","\ud83c\udf04","\ud83c\udf05","\ud83c\udf06","\ud83c\udf07","\ud83c\udf09","\ud83c\udf0c","\ud83c\udfa0","\ud83c\udfa1","\ud83c\udfa2","\ud83d\udc88","\ud83c\udfaa","\ud83c\udfad","\ud83c\udfa8","\ud83c\udfb0","\ud83d\ude82","\ud83d\ude83","\ud83d\ude84","\ud83d\ude85","\ud83d\ude86","\ud83d\ude87","\ud83d\ude88","\ud83d\ude89","\ud83d\ude8a","\ud83d\ude9d","\ud83d\ude9e","\ud83d\ude8b","\ud83d\ude8c","\ud83d\ude8d","\ud83d\ude8e","\ud83d\ude90","\ud83d\ude91","\ud83d\ude92","\ud83d\ude93","\ud83d\ude94","\ud83d\ude95","\ud83d\ude96","\ud83d\ude97","\ud83d\ude98","\ud83d\ude99","\ud83d\ude9a","\ud83d\ude9b","\ud83d\ude9c","\ud83d\udeb2","\ud83d\ude8f","\u26fd","\ud83d\udea8","\ud83d\udea5","\ud83d\udea6","\ud83d\udea7","\u2693","\u26f5","\ud83d\udea4","\ud83d\udea2","\ud83d\udeeb","\ud83d\udeec","\ud83d\udcba","\ud83d\ude81","\ud83d\ude9f","\ud83d\udea0","\ud83d\udea1","\ud83d\ude80","\ud83d\udeaa","\ud83d\udebd","\ud83d\udebf","\ud83d\udec1","\u231b","\u23f3","\u231a","\u23f0","\ud83d\udd5b","\ud83d\udd67","\ud83d\udd50","\ud83d\udd5c","\ud83d\udd51","\ud83d\udd5d","\ud83d\udd52","\ud83d\udd5e","\ud83d\udd53","\ud83d\udd5f","\ud83d\udd54","\ud83d\udd60","\ud83d\udd55","\ud83d\udd61","\ud83d\udd56","\ud83d\udd62","\ud83d\udd57","\ud83d\udd63","\ud83d\udd58","\ud83d\udd64","\ud83d\udd59","\ud83d\udd65","\ud83d\udd5a","\ud83d\udd66","\ud83c\udf11","\ud83c\udf12","\ud83c\udf13","\ud83c\udf14","\ud83c\udf15","\ud83c\udf16","\ud83c\udf17","\ud83c\udf18","\ud83c\udf19","\ud83c\udf1a","\ud83c\udf1b","\ud83c\udf1c","\ud83c\udf1d","\ud83c\udf1e","\u2b50","\ud83c\udf1f","\ud83c\udf20","\u26c5","\ud83c\udf00","\ud83c\udf08","\ud83c\udf02","\u2614","\u26a1","\u26c4","\ud83d\udd25","\ud83d\udca7","\ud83c\udf0a"]},{id:5,icon:"ts-football",name:i.c.t("WUTI"),data:["\ud83d\udd07","\ud83d\udd08","\ud83d\udd09","\ud83d\udd0a","\ud83d\udce2","\ud83d\udce3","\ud83d\udcef","\ud83d\udd14","\ud83d\udd15","\ud83c\udfbc","\ud83c\udfb5","\ud83c\udfb6","\ud83c\udfa4","\ud83c\udfa7","\ud83d\udcfb","\ud83c\udfb7","\ud83c\udfb8","\ud83c\udfb9","\ud83c\udfba","\ud83c\udfbb","\ud83d\udcf1","\ud83d\udcf2","\ud83d\udcde","\ud83d\udcdf","\ud83d\udce0","\ud83d\udd0b","\ud83d\udd0c","\ud83d\udcbb","\ud83d\udcbd","\ud83d\udcbe","\ud83d\udcbf","\ud83d\udcc0","\ud83c\udfa5","\ud83c\udfac","\ud83d\udcfa","\ud83d\udcf7","\ud83d\udcf8","\ud83d\udcf9","\ud83d\udcfc","\ud83d\udd0d","\ud83d\udd0e","\ud83d\udd2c","\ud83d\udd2d","\ud83d\udce1","\ud83d\udca1","\ud83d\udd26","\ud83c\udfee","\ud83d\udcd4","\ud83d\udcd5","\ud83d\udcd6","\ud83d\udcd7","\ud83d\udcd8","\ud83d\udcd9","\ud83d\udcda","\ud83d\udcd3","\ud83d\udcd2","\ud83d\udcc3","\ud83d\udcdc","\ud83d\udcc4","\ud83d\udcf0","\ud83d\udcd1","\ud83d\udd16","\ud83d\udcb0","\ud83d\udcb4","\ud83d\udcb5","\ud83d\udcb6","\ud83d\udcb7","\ud83d\udcb8","\ud83d\udcb3","\ud83d\udcb9","\ud83d\udcb1","\ud83d\udcb2","\ud83d\udce7","\ud83d\udce8","\ud83d\udce9","\ud83d\udce4","\ud83d\udce5","\ud83d\udce6","\ud83d\udceb","\ud83d\udcea","\ud83d\udcec","\ud83d\udced","\ud83d\udcee","\ud83d\udcdd","\ud83d\udcbc","\ud83d\udcc1","\ud83d\udcc2","\ud83d\udcc5","\ud83d\udcc6","\ud83d\udcc7","\ud83d\udcc8","\ud83d\udcc9","\ud83d\udcca","\ud83d\udccb","\ud83d\udccc","\ud83d\udccd","\ud83d\udcce","\ud83d\udccf","\ud83d\udcd0","\ud83d\udd12","\ud83d\udd13","\ud83d\udd0f","\ud83d\udd10","\ud83d\udd11","\ud83d\udd28","\ud83d\udd2b","\ud83c\udff9","\ud83d\udd27","\ud83d\udd29","\ud83d\udd17","\ud83d\udc89","\ud83d\udc8a","\ud83d\udeac","\ud83d\uddff","\ud83d\udd2e"]},{id:6,icon:"ts-percent",name:i.c.t("FUHAO"),data:["\ud83c\udfe7","\ud83d\udeae","\ud83d\udeb0","\u267f","\ud83d\udeb9","\ud83d\udeba","\ud83d\udebb","\ud83d\udebc","\ud83d\udebe","\ud83d\udec2","\ud83d\udec3","\ud83d\udec4","\ud83d\udec5","\ud83d\udeb8","\u26d4","\ud83d\udeab","\ud83d\udeb3","\ud83d\udead","\ud83d\udeaf","\ud83d\udeb1","\ud83d\udeb7","\ud83d\udcf5","\ud83d\udd1e","\ud83d\udd03","\ud83d\udd04","\ud83d\udd19","\ud83d\udd1a","\ud83d\udd1b","\ud83d\udd1c","\ud83d\udd1d","\ud83d\uded0","\ud83d\udd4e","\ud83d\udd2f","\u2648","\u2649","\u264a","\u264b","\u264c","\u264d","\u264e","\u264f","\u2650","\u2651","\u2652","\u2653","\u26ce","\ud83d\udd00","\ud83d\udd01","\ud83d\udd02","\u23e9","\u23ea","\ud83d\udd3c","\u23eb","\ud83d\udd3d","\u23ec","\ud83c\udfa6","\ud83d\udd05","\ud83d\udd06","\ud83d\udcf6","\ud83d\udcf3","\ud83d\udcf4","\ud83d\udd31","\ud83d\udcdb","\ud83d\udd30","\u2b55","\u2705","\u274c","\u274e","\u2795","\u2796","\u2797","\u27b0","\u27bf","\u2753","\u2754","\u2755","\u2757","\ud83d\udd1f","\ud83d\udcaf","\ud83d\udd20","\ud83d\udd21","\ud83d\udd22","\ud83d\udd23","\ud83d\udd24","\ud83c\udd8e","\ud83c\udd91","\ud83c\udd92","\ud83c\udd93","\ud83c\udd94","\ud83c\udd95","\ud83c\udd96","\ud83c\udd97","\ud83c\udd98","\ud83c\udd99","\ud83c\udd9a","\ud83c\ude01","\ud83c\ude36","\ud83c\ude2f","\ud83c\ude50","\ud83c\ude39","\ud83c\ude1a","\ud83c\ude32","\ud83c\ude51","\ud83c\ude38","\ud83c\ude34","\ud83c\ude33","\ud83c\ude3a","\ud83c\ude35","\u25fd","\u25fe","\u2b1b","\u2b1c","\ud83d\udd36","\ud83d\udd37","\ud83d\udd38","\ud83d\udd39","\ud83d\udd3a","\ud83d\udd3b","\ud83d\udca0","\ud83d\udd18","\ud83d\udd32","\ud83d\udd33","\u26aa","\u26ab","\ud83d\udd34","\ud83d\udd35"]}],m={docContainerLayer:".docs-container",editoContainerLayer:".docs-container .editor-container",commentLayer:".docs-container .doc-comment-layer"},j={minWidth:150,maxWidth:320,offsetLeftHide:0}},2483:function(e,t,n){"use strict";var a=n(260),i=n(76),r=n(88),o=n(2486),c=n(93),s=n(190),u=n(56),d=n(132),l=n(44),f=n(441),p=n(29),h=n(186),b=n(6),v=function(e){var t=e.children;return Object(b.jsx)(u.c,{children:Object(b.jsx)(h.a,{store:p.a,children:Object(b.jsx)(s.a,{children:Object(b.jsx)(r.b,{children:Object(b.jsx)(c.b,{children:Object(b.jsx)(i.a,{children:Object(b.jsx)(d.a,{children:Object(b.jsx)(l.a,{theme:f.a,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(a.b,{children:t})})})})})})})})})})};t.a=v},2486:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(2),i=n(23),r=n(0),o={},c=Object(r.createContext)(o),s=n(48),u=n(190),d=n(151),l=n(5),f=n(6),p=["children"],h={},b=function(e){var t=e.children,n=Object(i.a)(e,p),r=Object(u.b)((function(e){return e.language}));return Object(f.jsx)(c.Provider,{value:h,children:Object(f.jsx)(s.d,Object(a.a)(Object(a.a)({},n),{},{smallerDevicesRenderRules:function(){return!1},locale:d.a[r]||d.a[l.a.zhCN],autoInsertSpaceInButton:!1,children:t}))})}},2489:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=/^(?:\w+:)?\/\/(\S+)$/,i=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,r=/^[^\s.]+\.\S{2,}$/;function o(e){if("string"!==typeof e)return!1;var t=e.match(a);if(!t)return!1;var n=t[1];if(!n)return!1;try{new URL(e)}catch(o){return!1}return i.test(n)||r.test(n)}},2498:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(2),i=n(15),r=n(16),o=n(24),c=n(116),s=n(63),u=n(19),d=n(21),l=n(1),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(l.a)(Object(o.a)(e),"asyncRenderComponent",void 0),e}return Object(r.a)(n,[{key:"init",value:function(){Object(c.a)(Object(s.a)(n.prototype),"init",this).call(this),this.editor.on("card:async-render-component",(function(e){return e.asyncRenderComponent}))}},{key:"beforeRender",value:function(){var e=this,t=this.editor.request,n=this.getValue();if(n){var i=(new Date).getTime(),r=null===n||void 0===n?void 0:n.key;if(!r&&null!==n&&void 0!==n&&n.src){var o=n.src.indexOf("teamshare/"),c=n.src.indexOf("?");r=n.src.slice(o,c)}r&&(null===n||void 0===n||!n.validTime||i>(null===n||void 0===n?void 0:n.validTime))&&(this.asyncRenderComponent=!1,t.getFileCDNUrl([{key:r,uid:(null===n||void 0===n?void 0:n.uid)||r,name:(null===n||void 0===n?void 0:n.name)||r}]).then((function(t){t.url&&(e.setValue(Object(a.a)(Object(a.a)(Object(a.a)({},n),t),{},{src:t.url})),e.asyncRenderComponent=!0,e.editor.trigger("card:async-render"))})))}}},{key:"setAttributes",value:function(){var e,t=this.getValue();(null===this||void 0===this||null===(e=this.image)||void 0===e?void 0:e.image)&&this.image.image.attributes({key:null===t||void 0===t?void 0:t.key,"valid-time":null===t||void 0===t?void 0:t.validTime,alt:null===t||void 0===t?void 0:t.name,name:null===t||void 0===t?void 0:t.name,uid:null===t||void 0===t?void 0:t.uid,src:null===t||void 0===t?void 0:t.src})}},{key:"didRender",value:function(){Object(c.a)(Object(s.a)(n.prototype),"didRender",this).call(this),this.setAttributes()}},{key:"didUpdate",value:function(){Object(c.a)(Object(s.a)(n.prototype),"didUpdate",this).call(this),this.setAttributes()}}],[{key:"lazyRender",get:function(){return!0}}]),n}(n(2499).a)},2500:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(2),i=n(15),r=n(16),o=n(24),c=n(116),s=n(63),u=n(19),d=n(21),l=n(1),f=n(2470),p=(n(2702),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(l.a)(Object(o.a)(e),"asyncRenderComponent",void 0),Object(l.a)(Object(o.a)(e),"container",void 0),Object(l.a)(Object(o.a)(e),"audioStatus",0),Object(l.a)(Object(o.a)(e),"audio",void 0),Object(l.a)(Object(o.a)(e),"icons",{play:'<div class="action-btn"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1639120719266" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7746" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 938.656C276.352 938.656 85.344 747.648 85.344 512S276.384 85.344 512 85.344c235.648 0 426.656 191.008 426.656 426.656S747.648 938.656 512 938.656z m0-85.312a341.344 341.344 0 1 0 0-682.688 341.344 341.344 0 0 0 0 682.688zM453.216 359.04l208.16 138.752a17.088 17.088 0 0 1 0 28.416l-208.224 138.752a17.024 17.024 0 0 1-26.496-14.176v-277.568a17.088 17.088 0 0 1 26.56-14.176z" p-id="7747"></path></svg></div>',stop:'<div class="action-btn"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1639120835356" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7873" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 938.656C276.352 938.656 85.344 747.648 85.344 512S276.384 85.344 512 85.344c235.648 0 426.656 191.008 426.656 426.656S747.648 938.656 512 938.656z m0-85.312a341.344 341.344 0 1 0 0-682.688 341.344 341.344 0 0 0 0 682.688zM384 384h256v256h-256v-256z" p-id="7874"></path></svg></div>',pause:'<div class="action-btn"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1639123719526" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8395" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 938.656C276.352 938.656 85.344 747.648 85.344 512S276.384 85.344 512 85.344c235.648 0 426.656 191.008 426.656 426.656S747.648 938.656 512 938.656z m0-85.312a341.344 341.344 0 1 0 0-682.688 341.344 341.344 0 0 0 0 682.688zM384 384h85.344v256H384v-256z m170.656 0H640v256h-85.344v-256z" p-id="8396"></path></svg></div>'}),Object(l.a)(Object(o.a)(e),"onBeforeRender",(function(t,n){var a=e.editor.plugin.findPlugin("audio");if(a){var i=(a.options||{}).onBeforeRender;if(i)return i(t,n)}return n})),Object(l.a)(Object(o.a)(e),"downloadFile",(function(){var t=e.getValue();if(null!==t&&void 0!==t&&t.download){var n=Object(f.ib)(e.onBeforeRender("download",t.url));e.loadFile(n,(function(e){var n=e,a=document.createElement("a");if(a.href=n,a.setAttribute("download",(null===t||void 0===t?void 0:t.name)||"a.mp3"),document.getElementsByTagName("body")[0].appendChild(a),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),a.dispatchEvent(i)}else a.click&&a.click();a.parentNode.removeChild(a)}))}})),Object(l.a)(Object(o.a)(e),"timeFormat",(function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60),i=function(e){return e<10?"0".concat(e):e};return"".concat(i(t),":").concat(i(n),":").concat(i(a))})),e}return Object(r.a)(n,[{key:"init",value:function(){Object(c.a)(Object(s.a)(n.prototype),"init",this).call(this),this.editor.on("card:async-render-component",(function(e){return e.asyncRenderComponent}))}},{key:"getLocales",value:function(){return this.editor.language.get("video")}},{key:"renderTemplate",value:function(e){var t=e.name,n=e.status,a=e.size,i=e.message,r=e.percent,o=this.getLocales(),c='<div class="audio-icon"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1639120704029" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7618" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M128 0h512l320 256v704a64 64 0 0 1-64 64H128a64 64 0 0 1-64-64V64a64 64 0 0 1 64-64z m359.712 288v323.04a148.928 148.928 0 1 0 66.24 123.84v-314.464L736 470.08v-115.872L487.68 288z" fill="#FFBC00" p-id="7619"></path><path d="M960 256L640 0l21.504 171.904A96 96 0 0 0 756.736 256H960z" fill="#DCA200" p-id="7620"></path></svg></div>',s='<i class="data-video-anticon"><svg viewBox="0 0 1024 1024" class="data-video-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></i>',u='<span class="data-error-icon">X</span>',d='<div class="tm"><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1639120884435" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8000" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M416 256a64 64 0 0 0-64 64v352a64 64 0 1 0 128 0V320a64 64 0 0 0-64-64zM800 320a64 64 0 0 0-64 64v224a64 64 0 1 0 128 0v-224a64 64 0 0 0-64-64zM224 384a64 64 0 0 0-64 64v96a64 64 0 1 0 128 0v-96a64 64 0 0 0-64-64zM544 416a64 64 0 1 1 128 0v160a64 64 0 1 1-128 0v-160z" p-id="8001"></path></svg></div>';if("error"===n)return'\n            <div class="data-video">\n                <div class="data-audio-content data-video-error">\n                    <div class="data-video-center">\n                        <div class="data-video-name">'.concat(Object(f.O)(t),'</div>\n                        <div class="data-video-message">\n                            ').concat(u,"\n                            ").concat(i||o.loadError,"\n                        </div>\n                    </div>\n                </div>\n            </div>");var l=a?Object(f.T)(a):"";if("uploading"===n)return'\n            <div class="data-video">\n                <div class="data-audio-content data-video-uploading">\n                    <div class="data-video-center">\n                        '.concat(c,'\n                        <div class="data-video-name">\n                        ').concat(Object(f.O)(t)," (").concat(Object(f.O)(l),')\n                        </div>\n                        <div class="data-video-progress">\n                            ').concat(s,'\n                            <span class="percent">').concat(r||0,"%<span>\n                        </div>\n                    </div>\n                </div>\n            </div>");var p="undefined"===typeof n;return"transcoding"===n||p?'\n            <div class="data-video">\n                <div class="data-audio-content data-video-uploaded">\n                    <div class="data-video-center">\n                        '.concat(c,'\n                        <div class="data-video-name">\n                        ').concat(Object(f.O)(t)," (").concat(Object(f.O)(l),')\n                        </div>\n                        <div class="data-video-transcoding">\n                            ').concat(s,'\n                            <span class="transcoding">').concat(p?o.loading:o.transcoding,"%<span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            "):'\n        <div class="data-audio">\n\t\t\t<div class="audio-ui">\n\t\t\t\t<div class="action">'.concat(this.icons.play,'</div>\n\t\t\t\t<div class="info">\n\t\t\t\t\t<div class="name">').concat(Object(f.O)(t),'</div>\n\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t').concat(d,'\n\t\t\t\t\t\t<div class="current-time time">nowtime</div>\n\t\t\t\t\t\t<div class="line">/</div>\n\t\t\t\t\t\t<div class="duration time">endtime</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n        </div>\n        ')}},{key:"initPlayer",value:function(){var e,t=this,n=this.getValue();if(n){var a=Object(f.ib)(this.onBeforeRender("query",n.url)),i=document.createElement("audio");i.preload="none",i.setAttribute("src",a),i.setAttribute("webkit-playsinline","webkit-playsinline"),i.setAttribute("playsinline","playsinline");var r=n.cover;r&&(i.poster=Object(f.ib)(this.onBeforeRender("cover",r))),null===(e=this.container)||void 0===e||e.find(".data-audio-content").append(i),i.load(),i.oncontextmenu=function(){return!1},setTimeout((function(){i.controls=!0,Object(f.X)(t.editor)||(i.controlsList="nodownload")}),0),i.addEventListener("loadedmetadata",(function(){var e,n,a,r,o=i.currentTime,c=i.duration;null===(e=t.container)||void 0===e||e.find(".audio-ui").addClass("show"),null===(n=t.container)||void 0===n||n.find(".current-time").html(t.timeFormat(o)),null===(a=t.container)||void 0===a||a.find(".duration").html(t.timeFormat(c)),null===(r=t.container)||void 0===r||r.find(".action").on("click",(function(){var e;if(0===t.audioStatus)null===(e=t.container)||void 0===e||e.find(".action").html(t.icons.stop),t.audioStatus=1,i.play();else if(1===t.audioStatus){var n;null===(n=t.container)||void 0===n||n.find(".action").html(t.icons.pause),t.audioStatus=0,i.pause()}else{var a;i.currentTime=0,null===(a=t.container)||void 0===a||a.find(".action").html(t.icons.stop),t.audioStatus=1,i.play()}}))}),!1),i.addEventListener("timeupdate",(function(){var e,n,a=i.currentTime,r=i.duration;(null===(e=t.container)||void 0===e||e.find(".current-time").html(t.timeFormat(a)),a===r)&&(t.audioStatus=3,null===(n=t.container)||void 0===n||n.find(".action").html(t.icons.play),i.pause())})),this.audio=i}}},{key:"loadFile",value:function(e,t){"function"!=typeof t&&(t=function(){});var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){t(window.URL.createObjectURL(n.response))},n.open("GET",e,!0),n.send()}},{key:"toolbar",value:function(){var e=[],t=this.getValue();if(!t)return e;var n=t.status,a=t.download,i=this.getLocales();return"done"===n&&(a&&e.push({type:"button",content:'<span class="data-icon data-icon-download" />',title:i.download,onClick:this.downloadFile}),Object(f.X)(this.editor)&&!this.editor.readonly&&(e.push({type:"copy"}),e.push({type:"separator"}))),Object(f.X)(this.editor)&&!this.editor.readonly&&e.push({type:"delete"}),e}},{key:"setProgressPercent",value:function(e){var t;null===(t=this.container)||void 0===t||t.find(".percent").html("".concat(Number(e),"%"))}},{key:"onActivate",value:function(e){var t,n;e?null===(t=this.container)||void 0===t||t.addClass("data-audio-active"):null===(n=this.container)||void 0===n||n.removeClass("data-audio-active")}},{key:"checker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.editor.command;!function i(){a.executeMethod("audio-uploader","query",e,(function(e){e&&"done"!==e.status?setTimeout(i,3e3):t(e)}),(function(e){n(e)}))}()}},{key:"render",value:function(){var e=this,t=this.getValue();if(t){var n=this.getCenter(),i=this.editor,r=i.command,o=i.plugin;n.empty();var c=t.video_id,s=t.status,u=this.getLocales();if(Object(f.X)(this.editor)){if("transcoding"===s){if(this.container=Object(f.a)(this.renderTemplate(t)),!c)throw new Error("video id is undefined");return this.checker(c,(function(i){var r=Object(a.a)(Object(a.a)({},t),{},{url:null!==i&&void 0!==i&&i.url?i.url:t.url,name:null!==i&&void 0!==i&&i.name?i.name:t.name,cover:null!==i&&void 0!==i&&i.cover?i.cover:t.cover,download:null!==i&&void 0!==i&&i.download?i.download:t.download,status:"done"});e.setValue(r),e.container=Object(f.a)(e.renderTemplate(r)),n.empty(),n.append(e.container),e.initPlayer()}),(function(i){var r=Object(a.a)(Object(a.a)({},t),{},{status:"error",message:i||u.loadError});e.setValue(r),e.container=Object(f.a)(e.renderTemplate(r)),n.empty(),n.append(e.container)})),this.container}return"done"===s?(this.container=Object(f.a)(this.renderTemplate(Object(a.a)(Object(a.a)({},t),{},{status:s}))),r.executeMethod("audio-uploader","query",c,(function(i){var r=Object(a.a)(Object(a.a)({},t),{},{url:null!==i&&void 0!==i&&i.url?i.url:t.url,name:null!==i&&void 0!==i&&i.name?i.name:t.name,cover:null!==i&&void 0!==i&&i.cover?i.cover:t.cover,download:null!==i&&void 0!==i&&i.download?i.download:t.download});e.container=Object(f.a)(e.renderTemplate(r)),n.empty(),n.append(e.container),e.initPlayer()}),(function(i){e.container=Object(f.a)(e.renderTemplate(Object(a.a)(Object(a.a)({},t),{},{status:"error",message:i||u.loadError}))),n.empty(),n.append(e.container)})),this.container):(this.container=Object(f.a)(this.renderTemplate(t)),this.container)}if("done"===s){this.container=Object(f.a)(this.renderTemplate(Object(a.a)(Object(a.a)({},t),{},{status:s})));var d=function(i){var r=Object(a.a)(Object(a.a)({},t),{},{url:null!==i&&void 0!==i&&i.url?i.url:t.url,name:null!==i&&void 0!==i&&i.name?i.name:t.name,cover:null!==i&&void 0!==i&&i.cover?i.cover:t.cover,download:null!==i&&void 0!==i&&i.download?i.download:t.download});e.container=Object(f.a)(e.renderTemplate(r)),n.empty(),n.append(e.container),e.initPlayer()};return o.components["video-uploader"]?r.executeMethod("audio-uploader","query",c,(function(e){d(e)}),(function(i){e.container=Object(f.a)(e.renderTemplate(Object(a.a)(Object(a.a)({},t),{},{status:"error",message:i||u.loadError}))),n.empty(),n.append(e.container)})):d(),this.container}return"error"===s?Object(f.a)(this.renderTemplate(Object(a.a)(Object(a.a)({},t),{},{message:t.message||u.loadError}))):void 0}}},{key:"beforeRender",value:function(){var e=this,t=this.editor.request,n=this.getValue();if(n){var i=(new Date).getTime();null!==n&&void 0!==n&&n.key&&null!==n&&void 0!==n&&n.validTime&&i>(null===n||void 0===n?void 0:n.validTime)&&(this.asyncRenderComponent=!1,t.getFileCDNUrl([{key:null===n||void 0===n?void 0:n.key,uid:null===n||void 0===n?void 0:n.uid,name:null===n||void 0===n?void 0:n.name}]).then((function(t){t.url&&(e.setValue(Object(a.a)(Object(a.a)({},n),t)),e.asyncRenderComponent=!0,e.editor.trigger("card:async-render"))})))}}},{key:"didRender",value:function(){var e,t=this;Object(c.a)(Object(s.a)(n.prototype),"didRender",this).call(this),null===(e=this.container)||void 0===e||e.on(f.ab?"touchstart":"click",(function(){Object(f.X)(t.editor)&&!t.activated&&t.editor.card.activate(t.root)}))}},{key:"destroy",value:function(){Object(c.a)(Object(s.a)(n.prototype),"destroy",this).call(this),1===this.audioStatus&&(this.audioStatus=0,this.audio&&this.audio.pause())}}],[{key:"cardName",get:function(){return"audio"}},{key:"cardType",get:function(){return f.i.BLOCK}},{key:"autoSelected",get:function(){return!1}},{key:"singleSelectable",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),n}(f.g))},2508:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return z}));var a=n(2),i=n(15),r=n(16),o=n(24),c=n(116),s=n(63),u=n(19),d=n(21),l=n(2477),f=n(1),p=n(2481),h=n(2478),b=n(12),v=n.n(b),m=n(2470),j=(n(2759),n(4)),g=n(41),O=n.n(g),y=n(0),x=n(48),w=n(44),k=w.c.div.withConfig({displayName:"style__ColorSettingMenuStyle",componentId:"sc-1a4rhuq-0"})(["",";width:210px;padding:12px;.title{",";padding-bottom:10px;}.list{display:flex;flex-wrap:wrap;padding-bottom:15px;",";}.border{display:block;box-sizing:content-box;width:20px;height:20px;padding:1px;border:2px solid #ffffff;cursor:pointer;&:hover{border-color:rgba(0,0,0,0.2);border-radius:2px;}div{display:block;width:20px;height:20px;}&.action{border-color:",";border-radius:2px;}}.font-color .border div{border:1px solid ",";",";}.background-color .border div,.border-color .border div{margin-bottom:6px;}.reset{width:100%;}"],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.f_default}),(function(e){return e.theme.center}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_text_lv2}),(function(e){return e.theme.center})),C=w.c.div.withConfig({displayName:"style__EmojiSettingMenuStyle",componentId:"sc-1a4rhuq-1"})(["",";width:340px;padding:12px;position:absolute;z-index:999;.emoji-mart-anchors{",";justify-content:left;border-bottom:1px solid ",";.emoji-mart-anchor{position:relative;width:40px;padding:4px;text-align:center;cursor:pointer;&.action{color:",";svg{fill:"," !important;}.emoji-mart-anchor-bar{display:block;}}}.emoji-mart-anchor-icon .icon{width:20px;height:20px;svg{width:100%;height:100%;fill:",";}&:hover{svg{fill:",";}}}.emoji-mart-anchor-bar{position:absolute;bottom:0px;left:0;display:none;width:100%;height:3px;background-color:",";}}.emoji-mart-scroll{height:270px;padding:0 6px 6px;overflow-y:scroll;will-change:transform;}.emoji-mart-category-label{position:-webkit-sticky;position:sticky;top:0px;z-index:999;padding:5px 0;background-color:#ffffff;",';}.emoji-mart-emoji-native{position:relative;display:inline-block;width:36px;height:36px;margin:auto;padding:0;line-height:36px;text-align:center;vertical-align:middle;cursor:pointer !important;& > span{position:absolute;left:6px;z-index:1;display:inline-block;width:24px;height:24px;font-size:24px;}&:hover{&::before{position:absolute;left:0;z-index:0;width:36px;height:36px;background-color:rgba(0,0,0,0.1);border-radius:18px;content:"";}}}'],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.center}),(function(e){return e.theme.c_other_lv3}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_text_lv1}),(function(e){return e.theme.c_text_lv0}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.f_default})),N=n(441),E=n(55),_=n(2483),S=n(5),T=n(6),D={fontColor:"rgb(216, 57, 49)",borderColor:"rgb(254, 212, 164)",backgroundColor:"rgb(255, 245, 235)"},I=["#CE2B2E","#D6680C","#D28A0A","#2D971E","#2045D4","#5300C6","#575B64"],R=["#F57778","#FDAC58","#FFF768","#7FDC72","#6F93FB","#9B67F5","#D8D8DD"],A=["#FCDADB","#FDE5C8","#FEFFC0","#D2F4CD","#DAE4FE","#E7D9FE","#EFF0F2","#F9B1AE","#FDCA93","#FEFE92","#AAECA1","#ACC1FC","#C19FF9","#EBEDEE"],M=function(e){var t=e.setting,n=e.onUpdate,a=Object(y.useState)((null===t||void 0===t?void 0:t.fontColor)||""),i=Object(j.a)(a,2),r=i[0],o=i[1],c=Object(y.useState)((null===t||void 0===t?void 0:t.borderColor)||""),s=Object(j.a)(c,2),u=s[0],d=s[1],l=Object(y.useState)((null===t||void 0===t?void 0:t.backgroundColor)||""),p=Object(j.a)(l,2),h=p[0],b=p[1],v=Object(y.useCallback)((function(e,t,a){switch(e.stopPropagation(),t){case"fontColor":o(a);break;case"borderColor":d(a);break;case"backgroundColor":b(a)}n(Object(f.a)({fontColor:r,borderColor:u,backgroundColor:h},t,a))}),[n,r,u,h]),m=Object(y.useCallback)((function(e){e.stopPropagation(),o(D.fontColor),d(D.borderColor),b(D.backgroundColor),n(D)}),[n]),g=Object(y.useMemo)((function(){return Object(T.jsxs)(k,{theme:N.a,children:[Object(T.jsx)("div",{className:"title",children:S.c.t("FONT_COLOR")}),Object(T.jsx)("div",{className:"list font-color",children:I.map((function(e){return Object(T.jsx)("div",{className:"border".concat(r===e?" action":""),onClick:function(t){return v(t,"fontColor",e)},children:Object(T.jsx)("div",{style:{color:e},children:"A"})},e)}))}),Object(T.jsx)("div",{className:"title",children:S.c.t("BORDER_COLOR")}),Object(T.jsx)("div",{className:"list border-color",children:R.map((function(e){return Object(T.jsx)("div",{className:"border".concat(u===e?" action":""),onClick:function(t){return v(t,"borderColor",e)},children:Object(T.jsx)("div",{style:{backgroundColor:e}})},e)}))}),Object(T.jsx)("div",{className:"title",children:S.c.t("FILL_COLOR")}),Object(T.jsx)("div",{className:"list background-color",children:A.map((function(e){return Object(T.jsx)("div",{className:"border".concat(h===e?" action":""),onClick:function(t){return v(t,"backgroundColor",e)},children:Object(T.jsx)("div",{style:{backgroundColor:e}})},e)}))}),Object(T.jsx)(x.b,{theme:N.a,onClick:m,className:"reset",children:S.c.t("RESTORE_DEFAULTS")})]})}),[r,u,h,v,m]);return Object(T.jsx)(x.f,{dropdownRender:function(){return g},children:Object(T.jsx)("a",{className:"data-toolbar-btn",children:Object(T.jsx)("span",{className:"data-icon set-color card-icon",children:Object(T.jsx)(E.a,{type:"ts-edit"})})})})},L=n(11),U=n(2473),H=function(e){var t=e.onUpdate,n=e.onClose,a=Object(y.useState)(!0),i=Object(j.a)(a,2),r=i[0],o=i[1],c=Object(y.useState)([]),s=Object(j.a)(c,2),u=s[0],d=s[1],l=Object(y.useState)(100),f=Object(j.a)(l,2),p=f[0],h=f[1];Object(y.useEffect)((function(){var e=Object(b.cloneDeep)(U.f);return Object(b.set)(e,"[0].data",JSON.parse(localStorage.getItem(U.h)||"[]")),d(e),function(){}}),[]);var v=Object(y.useCallback)((function(e,t){for(var n=e.parentNode;(null===(a=n)||void 0===a?void 0:a.className)!==t;){var a,i=n;if(null===i||void 0===i||!i.parentNode)return!1;n=i.parentNode}return!0}),[]);return Object(y.useEffect)((function(){var e=function(e){v(e.target,"emoji-select")||r||n(),o(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[v,r,n]),Object(T.jsxs)(C,{theme:N.a,children:[Object(T.jsx)("div",{className:"emoji-mart-bar",children:Object(T.jsx)("div",{className:"emoji-mart-anchors",children:u.map((function(e){return Object(T.jsxs)("div",{className:"emoji-mart-anchor".concat(e.id===p?" action":""),onClick:function(){return function(e){var t="#category".concat(e.id);h(e.id);var n=document.querySelector(t).offsetTop;document.querySelector(".emoji-mart-scroll").scrollTop=n}(e)},children:[Object(T.jsx)("div",{className:"emoji-mart-anchor-icon",children:Object(T.jsx)(E.a,{type:e.icon,className:"icon"})}),Object(T.jsx)("div",{className:"emoji-mart-anchor-bar"})]},e.id)}))})}),Object(T.jsx)("div",{className:"emoji-mart-scroll",children:u.map((function(e){return Object(T.jsxs)("div",{className:"emoji-mart-category",id:"category".concat(e.id),children:[Object(T.jsx)("div",{className:"emoji-mart-category-label",children:e.name}),e.data.map((function(e){return Object(T.jsx)("span",{className:"emoji-mart-emoji-native",onClick:function(a){return function(e,a){e.stopPropagation(),t(a);var i=JSON.parse(localStorage.getItem(U.h)||"[]");i.includes(a)&&i.splice(i.findIndex((function(e){return e===a})),1),i=[a].concat(Object(L.a)(i)),localStorage.setItem(U.h,JSON.stringify(i)),n()}(a,e)},children:Object(T.jsx)("span",{children:e})},e)}))]},e.id)}))})]})},F=".highlight-editor-container",P=new WeakMap,z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(f.a)(Object(o.a)(e),"contenteditable",e.editor.readonly?[]:[".highlight>.highlight-editor-container"]),Object(l.a)(Object(o.a)(e),P,{writable:!0,value:null}),Object(f.a)(Object(o.a)(e),"defaultSetting",D),Object(f.a)(Object(o.a)(e),"onClick",(function(t){Object(m.X)(e.editor)&&!e.editor.readonly&&("SPAN"===t.target.nodeName&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=document.createElement("div");e.appendChild(a),O.a.render(Object(T.jsx)(_.a,{children:Object(T.jsx)(H,{setting:t,onClose:function(){O.a.unmountComponentAtNode(a),e.removeChild(a)},onUpdate:n})}),a)}(Object(h.a)(Object(o.a)(e),P).find(".emoji-select").get(),{target:t.target},(function(t){Object(h.a)(Object(o.a)(e),P).find(".emoji").html("<span>".concat(v.a.escape(t),"</span>")),e.setValue({emoji:t})})))})),e}return Object(r.a)(n,[{key:"toolbar",value:function(){var e=this;return!Object(m.X)(this.editor)||this.editor.readonly?[]:[{type:"dnd"},{type:"node",node:Object(m.a)("<div />"),icon:"data-icon-preferences",title:S.c.t("SET_COLOR"),didMount:function(t){setTimeout((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};O.a.render(Object(T.jsx)(_.a,{children:Object(T.jsx)(M,{setting:t,onUpdate:n})}),e)}(t.get(),e.defaultSetting,(function(t){e.updateContent(t)}))}),100)}},{type:"copy"},{type:"separator"},{type:"delete"}]}},{key:"updateContent",value:function(e){Object(h.a)(this,P)&&(this.defaultSetting=e,Object(h.a)(this,P).css("backgroundColor",e.backgroundColor),Object(h.a)(this,P).css("color",e.fontColor),Object(h.a)(this,P).css("borderColor",e.borderColor),this.setValue(Object(a.a)({},e)))}},{key:"onChange",value:function(e){if(Object(m.X)(this.editor)&&"local"===e){var t=Object(h.a)(this,P).find(F).html();this.setValue({txt:t})}}},{key:"onBlurHandle",value:function(){this.activate(!1)}},{key:"onFocusHandle",value:function(){this.activate(!0)}},{key:"renderTemplate",value:function(e){var t=e.emoji;return'<div class="highlight">\n\t\t<div class="emoji"><span>'.concat(v.a.escape(t),'</span></div>\n\t\t<div class="emoji-select"></div>\n\t\t<div class="highlight-editor-container"></div>\n\t\t</div>')}},{key:"render",value:function(){var e=this.getValue();this.getCenter().addClass("card-highlight");var t=this.renderTemplate(e);Object(h.a)(this,P)?Object(p.a)(this,P,this.getCenter().first()):(Object(p.a)(this,P,Object(m.a)(t)),this.getCenter().empty().append(Object(h.a)(this,P)))}},{key:"didRender",value:function(){var e;Object(c.a)(Object(s.a)(n.prototype),"didRender",this).call(this),Object(h.a)(this,P)||this.render();var t=this.getValue(),a=null===t||void 0===t?void 0:t.emoji;a||(a=JSON.parse(localStorage.getItem(U.h)||'["\u2705"]').shift(),this.setValue({emoji:a}),t.emoji=a);t.emoji&&Object(h.a)(this,P).find(".emoji").html("<span>".concat(v.a.escape(t.emoji),"</span>")),t.txt&&Object(h.a)(this,P).find(F).html(v.a.escape(t.txt)),t.backgroundColor&&Object(h.a)(this,P).css("backgroundColor",t.backgroundColor),t.fontColor&&Object(h.a)(this,P).css("color",t.fontColor),t.borderColor&&Object(h.a)(this,P).css("borderColor",t.borderColor),null===(e=Object(h.a)(this,P))||void 0===e||e.on("click",this.onClick),Object(h.a)(this,P).find(F).on("focus",this.onFocusHandle.bind(this)),Object(h.a)(this,P).find(F).on("blur",this.onBlurHandle.bind(this))}},{key:"destroy",value:function(){var e,t,a;Object(c.a)(Object(s.a)(n.prototype),"destroy",this).call(this),null===(e=Object(h.a)(this,P))||void 0===e||e.off("click",this.onClick),null===(t=Object(h.a)(this,P))||void 0===t||t.find(F).off("focus",this.onFocusHandle.bind(this)),null===(a=Object(h.a)(this,P))||void 0===a||a.find(F).off("blur",this.onBlurHandle.bind(this))}}],[{key:"cardName",get:function(){return"highlight"}},{key:"cardType",get:function(){return m.i.BLOCK}}]),n}(m.g)},2509:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var a=n(9),i=n(18),r=n(2),o=n(15),c=n(16),s=n(24),u=n(116),d=n(63),l=n(19),f=n(21),p=n(1),h=n(2477),b=n(2481),v=n(2478),m=n(2470);function j(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var g=n(4),O=n(0),y=n(41),x=n.n(y),w=n(55),k=n(2613),C=n(44),N=(C.c.div.withConfig({displayName:"style__WebCardInfoStyle",componentId:"sc-mu9c8i-0"})(["padding:16px;border:1px solid red;width:100%;.title{",";padding-bottom:10px;}"],(function(e){return e.theme.f_heading5})),C.c.div.withConfig({displayName:"style__WebCardMenuStyle",componentId:"sc-mu9c8i-1"})([".edit-container{position:absolute;}"])),E=n(6);function _(e){var t=e.link,n=e.isEdit,a=e.updateLinkCallback,i=Object(O.useState)(!1),r=Object(g.a)(i,2),o=r[0],c=r[1],s=Object(O.useCallback)((function(){window.open(t)}),[t]),u=Object(O.useCallback)((function(){c(!o)}),[o]);return Object(E.jsxs)(N,{children:[!n&&Object(E.jsx)("a",{className:"data-toolbar-btn",onClick:s,children:Object(E.jsx)("span",{className:"data-icon card-icon",children:Object(E.jsx)(w.a,{type:"ts-link"})})}),n&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{className:"data-toolbar-btn",onClick:u,children:Object(E.jsx)("span",{className:"data-icon card-icon",children:Object(E.jsx)(w.a,{type:"ts-edit"})})}),o&&Object(E.jsx)("div",{className:"edit-container",children:Object(E.jsx)(k.a,{defaultLink:t,onOk:function(e){c(!1),a(e)}})})]})]})}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};x.a.render(Object(E.jsx)(_,{link:t,isEdit:n,updateLinkCallback:a}),e)}var T=n(5),D=new WeakMap,I=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(h.a)(Object(s.a)(e),D,{writable:!0,value:null}),Object(p.a)(Object(s.a)(e),"action","getWebCard"),Object(p.a)(Object(s.a)(e),"emitName","getWebCard"),Object(p.a)(Object(s.a)(e),"icons",{spin:'<i class="spin ts-loading cdocfont"></i>'}),e}return Object(c.a)(n,[{key:"toolbar",value:function(){var e=this;if(!this.getValue())return[];var t={type:"node",node:Object(m.a)("<div />"),title:T.c.t("NEW_WINDOW_OPEN_LINK"),didMount:function(t){setTimeout((function(){var n=e.getValue().link;S(t.get(),n)}),100)}};if(!Object(m.X)(this.editor)||this.editor.readonly)return[t];var n=[{type:"dnd"},t,{type:"separator"},{type:"node",node:Object(m.a)("<div />"),title:T.c.t("EDIT_LINK"),didMount:function(t){setTimeout((function(){var n=e.getValue().link;S(t.get(),n,!0,e.updateLinkCallback.bind(e))}),100)}}];return n.concat([{type:"copy"},{type:"separator"},{type:"delete"}])}},{key:"updateLinkCallback",value:function(e){var t=this.getValue();this.setValue(Object(r.a)(Object(r.a)({},t),{},{link:e})),this.getHttpInfo({link:e}),this.toolbarModel.hide(),this.toolbarModel.show()}},{key:"render",value:function(){this.getCenter().addClass("web-card");Object(v.a)(this,D)?Object(b.a)(this,D,this.getCenter().first()):(Object(b.a)(this,D,Object(m.a)('<div class="web-card" contenteditable="false"><div class="web-card-content"><span class="loading"></span><div class="title"></div><div class="description"></div><div class="link"><div class="favicon"></div><div class="url"></div></div></div></div>')),this.getCenter().append(Object(v.a)(this,D)))}},{key:"didRender",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.a)(Object(d.a)(n.prototype),"didRender",this).call(this),Object(v.a)(this,D)){e.next=3;break}return e.abrupt("return");case 3:this.getHttpInfo();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClick",value:function(){}},{key:"getHttpInfo",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t,n,i,o,c,s,u=this,d=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=d.length>0&&void 0!==d[0]?d[0]:{}).link?t:this.getValue(),i=this.editor.socket,o=null===n||void 0===n?void 0:n.link,c={title:null===n||void 0===n?void 0:n.title,description:null===n||void 0===n?void 0:n.description,favicon:o.split("/").slice(0,3).join("/")+"/favicon.svg",link:o},Object(v.a)(this,D).find(".loading").html(this.icons.spin),null!==n&&void 0!==n&&n.title||!i?this.setHtmlInfo(c):(i.sendMessage(this.action,{url:o}),s=function e(t){null!==t&&void 0!==t&&t.title&&(c.title=null===t||void 0===t?void 0:t.title),null!==t&&void 0!==t&&t.description&&(c.description=null===t||void 0===t?void 0:t.description),i.off(u.emitName,e),u.setHtmlInfo(c),u.setValue(Object(r.a)(Object(r.a)({},n),c))},i.on(this.emitName,s));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setHtmlInfo",value:function(e){Object(v.a)(this,D).find(".loading").remove(),Object(v.a)(this,D).find(".title").html(j(null===e||void 0===e?void 0:e.title)),Object(v.a)(this,D).find(".description").html(j(null===e||void 0===e?void 0:e.description)),Object(v.a)(this,D).find(".link .favicon").html('<img src="'.concat(j(null===e||void 0===e?void 0:e.favicon),'" />')),Object(v.a)(this,D).find(".link .url").html(j(null===e||void 0===e?void 0:e.link))}},{key:"destroy",value:function(){Object(u.a)(Object(d.a)(n.prototype),"destroy",this).call(this)}}],[{key:"cardName",get:function(){return"web-card"}},{key:"cardType",get:function(){return m.i.BLOCK}},{key:"collab",get:function(){return FontFaceSetLoadEvent}},{key:"singleSelectable",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),n}(m.g)},2510:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2477),f=n(2481),p=n(2478),h=n(12),b=n.n(h),v=n(2470),m=(n(2546),n(4)),j=n(0),g=n(41),O=n.n(g),y=n(55),x=n(2612),w=n(2473),k=n(2483),C=n(2455),N=n(6),E=Object(x.a)(w.k+"?flowchart=1"),_=function(e){var t=e.setting,n=e.setSvgHandle,a=Object(j.useState)(""),i=Object(m.a)(a,2),r=i[0],o=i[1],c=Object(C.a)().t,s=Object(j.useCallback)((function(e){var t=e.imageType,a=e.imageContent;"svg"===t&&n(a)}),[n]);Object(j.useEffect)((function(){t.svg&&o(t.svg)}),[t]),Object(j.useEffect)((function(){return function(){E.close()}}),[]);var u=Object(j.useCallback)((function(){E(r,s)}),[r,s]),d=Object(j.useCallback)((function(){var e=new Image;e.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(r))),e.onload=function(){var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0);var n=document.createElement("a");n.href=t.toDataURL("image/png"),n.download=c("FLOWCHART"),n.click()}}),[r]);return Object(N.jsxs)(N.Fragment,{children:[t.edit&&Object(N.jsx)("a",{className:"data-toolbar-btn",onClick:u,children:Object(N.jsxs)("span",{className:"data-icon edit-uml card-icon",children:[Object(N.jsx)(y.a,{type:"ts-edit"}),c("EDIT")]})}),t.download&&Object(N.jsx)("a",{className:"data-toolbar-btn",onClick:d,children:Object(N.jsx)("span",{className:"data-icon download-uml card-icon",children:Object(N.jsx)(y.a,{type:"ts-download"})})})]})},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{edit:!0,download:!1},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return O.a.render(Object(N.jsx)(k.a,{children:Object(N.jsx)(_,{setting:t,setSvgHandle:n,setImgHandle:a})}),e),function(){O.a.unmountComponentAtNode(e)}},T=n(5),D=new WeakMap,I=new WeakMap,R=new WeakMap,A=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(l.a)(Object(r.a)(e),D,{writable:!0,value:null}),Object(l.a)(Object(r.a)(e),I,{writable:!0,value:null}),Object(l.a)(Object(r.a)(e),R,{writable:!0,value:null}),Object(d.a)(Object(r.a)(e),"updateSvgHandle",(function(t){e.setValue({svg:t})})),Object(d.a)(Object(r.a)(e),"dblclick",(function(){})),e}return Object(i.a)(n,[{key:"toolbar",value:function(){var e=this,t=this.getValue(),n=Object(p.a)(this,I)||t.svg,a=[];return Object(v.X)(this.editor)&&!this.editor.readonly&&(a.push({type:"dnd"}),a.push({type:"node",node:Object(v.a)("<div />"),title:T.c.t("EDIT"),didMount:function(t){setTimeout((function(){e.closeEditCard=S(t.get(),{edit:!0,svg:n},(function(t){e.updateContent(t)}),(function(t){e.updateImg(t)}))}),100)}})),n&&a.push({type:"node",node:Object(v.a)("<div />"),title:T.c.t("DOWNLOADED"),didMount:function(t){setTimeout((function(){e.closeDownloadCard=S(t.get(),{download:!0,svg:n},(function(t){e.updateContent(t)}),(function(t){e.updateImg(t)}))}),100)}}),Object(v.X)(this.editor)&&!this.editor.readonly&&(a.push({type:"separator"}),a.push({type:"delete"})),a}},{key:"updateContent",value:function(e){var t,a;if(Object(p.a)(this,D)){var i=this.getValue();Object(f.a)(this,I,e);var r=this.editor.card.components.find((function(e){return e._id===i.id}));if(!r)throw localStorage.setItem("".concat(n.cardName,"_").concat(this.editor.options.docId,"_").concat(i.id),e),new Error("".concat(T.c.t("NOT_FOUND_FLOWCHART_CARD_ELEMENT")," ").concat(n.cardName,"_").concat(this.editor.options.docId,"_").concat(i.id));var o="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(e))));Object(v.a)(r.root).find(".uml-editor-container").html('<img src="'.concat(b.a.escape(o),'" alt=').concat(T.c.t("FLOWCHART")," />")),null===r||void 0===r||r.updateSvgHandle(e),null===(t=this.toolbarModel)||void 0===t||t.hide(),null===(a=this.toolbarModel)||void 0===a||a.show()}}},{key:"updateImg",value:function(){}},{key:"mouseoutHandle",value:function(){Object(p.a)(this,D)&&Object(p.a)(this,D).find(".title").removeClass("show")}},{key:"mouseoverHandle",value:function(){Object(p.a)(this,D)&&Object(p.a)(this,D).find(".title").addClass("show")}},{key:"render",value:function(){this.getCenter().addClass("card-uml");var e="<div class=\"uml\"><div class='title'>".concat(T.c.t("FLOWCHART"),'</div><div class="uml-editor-container"></div></div>');Object(p.a)(this,D)?Object(f.a)(this,D,this.getCenter().first()):(Object(f.a)(this,D,Object(v.a)(e)),this.getCenter().append(Object(p.a)(this,D)))}},{key:"didRender",value:function(){var e,t,a;if(Object(o.a)(Object(c.a)(n.prototype),"didRender",this).call(this),Object(p.a)(this,D)){var i=this.getValue();if(i.svg){var r,s,u="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(i.svg))));null===(r=Object(p.a)(this,D))||void 0===r||null===(s=r.find(".uml-editor-container"))||void 0===s||s.html('<img src="'.concat(b.a.escape(u),'" alt=').concat(T.c.t("FLOWCHART")," />"))}null===(e=Object(p.a)(this,D))||void 0===e||e.on("dblclick",this.dblclick),null===(t=Object(p.a)(this,D))||void 0===t||t.on("mouseout",this.mouseoutHandle.bind(this)),null===(a=Object(p.a)(this,D))||void 0===a||a.on("mouseover",this.mouseoverHandle.bind(this))}}},{key:"destroy",value:function(){var e,t,a;Object(o.a)(Object(c.a)(n.prototype),"destroy",this).call(this),null===(e=Object(p.a)(this,D))||void 0===e||e.off("dblclick",this.dblclick),null===(t=Object(p.a)(this,D))||void 0===t||t.off("mouseout",this.mouseoutHandle),null===(a=Object(p.a)(this,D))||void 0===a||a.off("mouseover",this.mouseoverHandle),b.a.isFunction(this.closeEditCard)&&this.closeEditCard(),b.a.isFunction(this.closeDownloadCard)&&this.closeDownloadCard()}}],[{key:"cardName",get:function(){return"flowchart-card"}},{key:"cardType",get:function(){return v.i.BLOCK}},{key:"singleSelectable",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),n}(v.g)},2511:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var a=n(15),i=n(16),r=n(19),o=n(21),c=n(2564),s=n(41),u=n.n(s),d=n(2775),l=n.n(d),f=n(6),p=function(e){var t=e.code;return t&&"string"===typeof t?Object(f.jsx)(l.a,{displayMode:!0,throwOnError:!0,errorColor:"#cc0000",strict:"warn",output:"html",macros:{"\\f":"#1f(#2)"},children:t}):Object(f.jsx)(f.Fragment,{})},h=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"renderMath",value:function(e){this.isSaving=!0,function(e,t){u.a.render(Object(f.jsx)(p,{code:t}),e)}(this.container.get(),e),this.setValue({code:e}),this.isSaving=!1}}]),n}(c.a)},2512:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2477),f=n(2481),p=n(2478),h=n(12),b=n.n(h),v=n(2470),m=(n(2590),n(4)),j=n(41),g=n.n(j),O=n(0),y=n(55),x=n(2612),w=n(2473),k=n(2455),C=n(6),N=Object(x.a)(w.k+"?uml=1"),E=function(e){var t=e.setting,n=e.setSvgHandle,a=Object(O.useState)(""),i=Object(m.a)(a,2),r=i[0],o=i[1],c=Object(k.a)().t,s=Object(O.useCallback)((function(e){var t=e.imageType,a=e.imageContent;"svg"===t&&n(a)}),[n]);Object(O.useEffect)((function(){t.svg&&o(t.svg)}),[t]),Object(O.useEffect)((function(){return function(){N.close()}}),[]);var u=Object(O.useCallback)((function(){N(r,s)}),[r,s]),d=Object(O.useCallback)((function(){var e=new Image;e.src="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(r))),e.onload=function(){var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0);var n=document.createElement("a");n.href=t.toDataURL("image/png"),n.download="".concat(c("DOCX_UML")),n.click()}}),[r]);return Object(C.jsxs)(C.Fragment,{children:[t.edit&&Object(C.jsx)("a",{className:"data-toolbar-btn",onClick:u,children:Object(C.jsxs)("span",{className:"data-icon edit-uml card-icon",children:[Object(C.jsx)(y.a,{type:"ts-edit"}),c("EDIT")]})}),t.download&&Object(C.jsx)("a",{className:"data-toolbar-btn",onClick:d,children:Object(C.jsx)("span",{className:"data-icon download-uml card-icon",children:Object(C.jsx)(y.a,{type:"ts-download"})})})]})},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{edit:!0,download:!1},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return g.a.render(Object(C.jsx)(E,{setting:t,setSvgHandle:n,setImgHandle:a}),e),function(){g.a.unmountComponentAtNode(e)}},S=n(5),T=new WeakMap,D=new WeakMap,I=new WeakMap,R=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(l.a)(Object(r.a)(e),T,{writable:!0,value:null}),Object(l.a)(Object(r.a)(e),D,{writable:!0,value:null}),Object(l.a)(Object(r.a)(e),I,{writable:!0,value:null}),Object(d.a)(Object(r.a)(e),"updateSvgHandle",(function(t){e.setValue({svg:t})})),Object(d.a)(Object(r.a)(e),"dblclick",(function(){})),e}return Object(i.a)(n,[{key:"toolbar",value:function(){var e=this,t=this.getValue(),n=Object(p.a)(this,I)||t.svg,a=[];return Object(v.X)(this.editor)&&!this.editor.readonly&&(a.push({type:"dnd"}),a.push({type:"node",node:Object(v.a)("<div />"),title:S.c.t("EDIT"),didMount:function(t){setTimeout((function(){e.closeEditCard=_(t.get(),{edit:!0,svg:n},(function(t){e.updateContent(t)}),(function(t){e.updateImg(t)}))}),100)}})),n&&a.push({type:"node",node:Object(v.a)("<div />"),title:S.c.t("DOWNLOADED"),didMount:function(t){setTimeout((function(){e.closeDownloadCard=_(t.get(),{download:!0,svg:n},(function(t){e.updateContent(t)}),(function(t){e.updateImg(t)}))}),100)}}),Object(v.X)(this.editor)&&!this.editor.readonly&&(a.push({type:"separator"}),a.push({type:"delete"})),a}},{key:"updateContent",value:function(e){var t,a,i=this.getValue();if(Object(p.a)(this,T)){Object(f.a)(this,I,e);var r=this.editor.card.components.find((function(e){return e._id===i.id}));if(!r)throw localStorage.setItem("".concat(n.cardName,"_").concat(this.editor.options.docId,"_").concat(i.id),e),new Error("".concat(S.c.t("NOT_FOUND_CARD_ELEMENT")," ").concat(n.cardName,"_").concat(this.editor.options.docId,"_").concat(i.id));var o="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(e))));Object(v.a)(r.root).find(".uml-editor-container").html('<img src="'.concat(b.a.escape(o),'" alt=').concat(S.c.t("DOCX_UML")," />")),null===r||void 0===r||r.updateSvgHandle(e),null===(t=this.toolbarModel)||void 0===t||t.hide(),null===(a=this.toolbarModel)||void 0===a||a.show()}}},{key:"updateImg",value:function(){}},{key:"mouseoutHandle",value:function(){Object(p.a)(this,T)&&Object(p.a)(this,T).find(".title").removeClass("show")}},{key:"mouseoverHandle",value:function(){Object(p.a)(this,T)&&Object(p.a)(this,T).find(".title").addClass("show")}},{key:"render",value:function(){this.getCenter().addClass("card-uml");var e="<div class=\"uml\"><div class='title'>".concat(S.c.t("DOCX_UML"),'</div><div class="uml-editor-container"></div></div>');Object(p.a)(this,T)?Object(f.a)(this,T,this.getCenter().first()):(Object(f.a)(this,T,Object(v.a)(e)),this.getCenter().append(Object(p.a)(this,T)))}},{key:"didRender",value:function(){var e,t,a;if(Object(o.a)(Object(c.a)(n.prototype),"didRender",this).call(this),Object(p.a)(this,T)){var i=this.getValue();if(i.svg){var r,s,u="data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(i.svg))));null===(r=Object(p.a)(this,T))||void 0===r||null===(s=r.find(".uml-editor-container"))||void 0===s||s.html('<img src="'.concat(b.a.escape(u),'" alt=').concat(S.c.t("DOCX_UML")," />"))}null===(e=Object(p.a)(this,T))||void 0===e||e.on("dblclick",this.dblclick),null===(t=Object(p.a)(this,T))||void 0===t||t.on("mouseout",this.mouseoutHandle.bind(this)),null===(a=Object(p.a)(this,T))||void 0===a||a.on("mouseover",this.mouseoverHandle.bind(this))}}},{key:"destroy",value:function(){var e,t,a;Object(o.a)(Object(c.a)(n.prototype),"destroy",this).call(this),null===(e=Object(p.a)(this,T))||void 0===e||e.off("dblclick",this.dblclick),null===(t=Object(p.a)(this,T))||void 0===t||t.off("mouseout",this.mouseoutHandle),null===(a=Object(p.a)(this,T))||void 0===a||a.off("mouseover",this.mouseoverHandle),b.a.isFunction(this.closeEditCard)&&this.closeEditCard(),b.a.isFunction(this.closeDownloadCard)&&this.closeDownloadCard()}}],[{key:"cardName",get:function(){return"uml-plugin-card"}},{key:"cardType",get:function(){return v.i.BLOCK}},{key:"singleSelectable",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),n}(v.g)},2527:function(e,t,n){"use strict";n.r(t),n.d(t,"Plugins",(function(){return c})),n.d(t,"Cards",(function(){return s})),n.d(t,"PluginsConfig",(function(){return u}));var a=n(11),i=n(12),r=n.n(i),o=n(2695),c=[],s=[],u={},d=/^\.\/[a-z]+\/index\.js/gi;o.keys().forEach((function(e){if(d.test(e)){var t=o(e),n=r.a.get(t,"plugin",[]),i=r.a.get(t,"pluginComponent",[]),l=r.a.get(t,"pluginConfig",{});c.push.apply(c,Object(a.a)(n)),s.push.apply(s,Object(a.a)(i)),Object.assign(u,l)}}))},2528:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2697).a)},2529:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(16),i=n(15),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2470),d=n(2499),l=n(2498),f=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"parseHtml",(function(t,n){var a=[];return t.find("[".concat(u.c,'="').concat(l.default.cardName,'"],[').concat(u.x,'="').concat(l.default.cardName,'"]')).each((function(t){var i=Object(u.a)(t),r=e.editor.card.find(i),o=(null===r||void 0===r?void 0:r.getValue())||Object(u.L)(i.attributes(u.f));if(null!==o&&void 0!==o&&o.src&&"done"===o.status){var c=i.find(".data-image-meta img"),s=c.length>0?c.clone(!0):Object(u.a)('<img uid="'.concat(null===o||void 0===o?void 0:o.uid,'" key="').concat(null===o||void 0===o?void 0:o.key,'" name="').concat(null===o||void 0===o?void 0:o.name,'" />'));i.empty();var d=o.src,l=e.options.onBeforeRender;l&&(d=l(o.status,o.src));var f=i.attributes(u.e);s.attributes("src",d),s.css("visibility","visible");var p=o.size;null!==p&&void 0!==p&&p.width&&s.css("width","".concat(p.width,"px")),null!==p&&void 0!==p&&p.height&&s.css("height","".concat(p.height,"px")),s.removeAttributes("class"),s.attributes("data-type",f),n&&(s=n(s,o)),f===u.i.BLOCK&&(s=e.editor.node.wrap(s,Object(u.a)('<p style="text-align:center;"></p>'))),i.replaceWith(s),a.push(s)}else i.remove()})),a})),e}return Object(a.a)(n)}(d.c)},2530:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(9),i=n(11),r=n(18),o=n(2),c=n(15),s=n(16),u=n(24),d=n(19),l=n(21),f=n(1),p=n(2499),h=n(2470),b=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(f.a)(Object(u.a)(e),"extensionNames",["svg","png","bmp","jpg","jpeg","gif","tif","tiff","emf","webp"]),Object(f.a)(Object(u.a)(e),"pasteSchema",(function(e){e.add({type:"inline",name:"img",isVoid:!0,attributes:{src:{required:!0,value:"@url"},key:"*","valid-time":"*",name:"*",uid:"*",width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}})})),Object(f.a)(Object(u.a)(e),"pasteEach",(function(t){var n=e.options.isRemote;if(t.isCard()&&t.attributes(h.x)){if("image"!==t.attributes(h.x))return;var a=Object(h.L)(t.attributes(h.f));return a&&a.src?void(n&&n(a.src)?(a.status="uploading",a.percent=0,e.editor.card.replaceNode(t,"image",a)):"uploading"===a.status&&(a.percent=0,t.attributes(h.f,Object(h.N)(Object(o.a)(Object(o.a)({},a),{},{status:"done"}))))):void t.remove()}if("img"===t.name){var i=t.attributes(),r=i.src||i["data-src"],c=i.alt,s=i.key,u=i["valid-time"],d=i.name,l=i.uid;if(!r)return void t.remove();var f=e.editor.plugin.findPlugin("image"),p=t.css("width"),b=t.css("height"),v=i["data-type"]||(null===f||void 0===f?void 0:f.options.defaultType),m=h.i.INLINE;if("block"===v){var j=t.parent();j&&"p"===j.name&&e.editor.node.unwrap(t),m=h.i.BLOCK}e.editor.card.replaceNode(t,"image",{type:m,src:r,status:n&&n(r)||/^data:image\//i.test(r)?"uploading":"done",alt:c,name:d,uid:l,percent:0,size:{width:Object(h.hb)(p),height:Object(h.hb)(b)},key:s,validTime:u}),t.remove()}})),e}return Object(s.a)(n,[{key:"execute",value:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,r,c,s,u,d,l,f,p,b,v,m,j,g,O,y=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(h.X)(this.editor)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.editor,r=n.request,c=n.card,s=n.language,u=this.options.file,d=u.action,l=u.data,f=u.type,p=u.contentType,b=u.multiple,v=u.crossOrigin,m=u.headers,j=u.name,g=this.options.parse,O=this.options.file.limitSize||5242880,Array.isArray(t)||"string"===typeof t){e.next=12;break}return e.next=9,r.getFiles({event:t,accept:h.W?"image/*":this.extensionNames.length>0?"."+this.extensionNames.join(",."):"",multiple:b});case 9:t=e.sent,e.next=15;break;case 12:if("string"!==typeof t){e.next=15;break}return this.insertRemote(t),e.abrupt("return");case 15:if(0!==t.length){e.next=17;break}return e.abrupt("return");case 17:return r.upload({url:d,crossOrigin:v,headers:"function"===typeof m?m():m,data:l,type:f,contentType:p,onBefore:function(e){return!(e.size>O)||(y.editor.messageError(s.get("image","uploadLimitError").toString().replace("$size",(O/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(h.X)(y.editor)&&!y.cardComponents[e.uid]){var t=e.src||"",n="string"!==typeof t?window.btoa(String.fromCharCode.apply(String,Object(i.a)(new Uint8Array(t)))):t,a=function(t){var a,i=y.editor.plugin.findPlugin("image"),r=c.insert("image",Object(o.a)(Object(o.a)({},t),{},{status:"uploading",type:t.type||(null===i||void 0===i||null===(a=i.options)||void 0===a?void 0:a.defaultType)}),n);y.cardComponents[e.uid]=r};return new Promise((function(e){var t=new Image;t.src=n,t.onload=function(){a({src:"",size:{width:t.width,height:t.height,naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth}}),e()},t.onerror=function(){a({src:""}),e()}}))}},onUploading:function(e,t){var n=t.percent,a=y.cardComponents[e.uid||""];a&&a.setProgressPercent(n)},onSuccess:function(e,t){var n=y.cardComponents[t.uid||""];if(n){var a=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,i=g?g(e):a?{result:!0,data:a}:{result:!1};i.result?a=i.data:c.update(n.id,{status:"error",message:i.data||y.editor.language.get("image","uploadError")});var r=Object(o.a)(Object(o.a)({},e),{},{status:"done"});a&&(r.src=a,y.loadImage(n.id,r)),delete y.cardComponents[t.uid||""]}},onError:function(e,t){var n=y.cardComponents[t.uid||""];n&&(c.update(n.id,{status:"error",message:e.message||y.editor.language.get("image","uploadError")}),delete y.cardComponents[t.uid||""])}},t,j),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadAddress",value:function(e,t){var n=this;if(Object(h.X)(this.editor)){var a=this.options.remote,i=a.action,r=a.type,c=a.data,s=a.contentType,u=a.crossOrigin,d=a.withCredentials,l=a.headers,p=a.name,b=this.options.parse,v=p||"url";this.editor.request.ajax({url:i,method:"POST",contentType:s||"application/json",type:void 0===r?"json":r,crossOrigin:u,withCredentials:d,headers:"function"===typeof l?l():l,data:Object(o.a)(Object(o.a)({},c),{},Object(f.a)({},v,e)),success:function(e){var a=e.url||e.data&&e.data.url||e.src||e.data&&e.data.src,i=b?b(e):a?{result:!0,data:a}:{result:!1};i.result?a=i.data:n.editor.card.update(t.id,{status:"error",message:i.data||n.editor.language.get("image","uploadError")});var r=Object(o.a)({status:"done"},e);a&&(r.src=a,n.loadImage(t.id,r))},error:function(e){n.editor.card.update(t.id,{status:"error",message:e.message||n.editor.language.get("image","uploadError")})}})}}}]),n}(p.b)},2531:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(9),i=n(18),r=n(15),o=n(16),c=n(19),s=n(21),u=n(2470),d=n(2607),l=n(2500),f=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"init",value:function(){var e=this;this.editor.language.add(d.default),Object(u.X)(this.editor)&&(this.editor.on("parse:html",(function(t){return e.parseHtml(t)})),this.editor.on("paste:each",(function(t){return e.pasteHtml(t)})),this.editor.on("paste:schema",(function(t){return e.pasteSchema(t)})))}},{key:"execute",value:function(e,t,n,a,i,r,o){var c={status:e,video_id:a,cover:i,url:t,name:n||t,size:r,download:o};"error"===e&&(c.url="",c.message=t),this.editor.card.insert("audio",c)}},{key:"waiting",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var n,i,r,o,c=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.editor.card,i=function(e){var t;return e.root.inEditor()&&e.constructor.cardName===l.default.cardName&&"uploading"===(null===(t=e.getValue())||void 0===t?void 0:t.status)},r=function(){return n.components.find(i)},o=function(e){var n=6e4;return new Promise((function(a,r){if(t){var o=t(c.constructor.pluginName,e);if(!1===o)return r({name:c.constructor.pluginName,card:e});"number"===typeof o&&(n=o)}var s=(new Date).getTime(),u=(new Date).getTime();!function t(){if(u-s>=n)return a();setTimeout((function(){i(e)?t():a()}),10)}()}))},e.abrupt("return",new Promise((function(e,t){var n=r();n?function n(a){o(a).then((function(){var t=r();t?n(t):e()})).catch(t)}(n):e()})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pasteSchema",value:function(e){e.add({type:"block",name:"div",attributes:{"data-value":"*","data-type":{required:!0,value:l.default.cardName}}})}},{key:"pasteHtml",value:function(e){if(Object(u.X)(this.editor)){if(e.isElement())if(e.attributes("data-type")===l.default.cardName){var t=e.attributes("data-value"),n=Object(u.L)(t);if(!n.url)return;return this.editor.card.replaceNode(e,l.default.cardName,n),e.remove(),!1}return!0}}},{key:"parseHtml",value:function(e){var t=this;e.find("[".concat(u.c,"=").concat(l.default.cardName)).each((function(e){var n=Object(u.a)(e),a=t.editor.card.find(n),i=null===a||void 0===a?void 0:a.getValue();if(null!==i&&void 0!==i&&i.url&&"done"===i.status){var r=t.options.onBeforeRender,o=i.cover,c=i.url,s='<div data-type="'.concat(l.default.cardName,'"  data-value="').concat(Object(u.N)(i),'"><video controls src="').concat(Object(u.ib)(r?r("query",c):c),'" poster="').concat(o?Object(u.ib)(r?r("cover",o):o):"none",'" webkit-playsinline="webkit-playsinline" playsinline="playsinline" style="outline:none;" /></div>');n.empty(),n.replaceWith(Object(u.a)(s))}else n.remove()}))}}],[{key:"pluginName",get:function(){return"audio"}},{key:"lazyRender",get:function(){return!0}}]),n}(u.v)},2532:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(9),i=n(2),r=n(18),o=n(15),c=n(16),s=n(24),u=n(19),d=n(21),l=n(1),f=n(2470),p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(l.a)(Object(s.a)(e),"cardComponents",{}),Object(l.a)(Object(s.a)(e),"extensionNames",["mp3","aac","opus","mav","flac","ape"]),e}return Object(c.a)(n,[{key:"init",value:function(){var e=this;Object(f.X)(this.editor)&&(this.editor.on("drop:files",(function(t){return e.dropFiles(t)})),this.editor.on("paste:event",(function(t){var n=t.files;return e.pasteFiles(n)})),this.editor.on("paste:each",(function(t){return e.pasteEach(t)})));var t=this.options.accept,n=[];"string"===typeof t&&(t=t.split(",")),(t||[]).forEach((function(e){var t=(e=e.trim()).split(".").pop();t&&n.push(t)})),n.length>0&&(this.extensionNames=n)}},{key:"isAudio",value:function(e){var t=Object(f.S)(e);return this.extensionNames.indexOf(t)>=0}},{key:"execute",value:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,r,o,c,s,u,d,l,p,h,b,v,m,j,g,O=this,y=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}e.t0=t,e.next="query"===e.t0?4:5;break;case 4:return e.abrupt("return",this.query(y.length<=1?void 0:y[1],y.length<=2?void 0:y[2],y.length<=3?void 0:y[3]));case 5:return e.abrupt("return");case 6:if(n=this.editor,r=n.request,o=n.card,c=n.language,s=this.options,u=s.action,d=s.data,l=s.type,p=s.contentType,h=s.multiple,b=s.crossOrigin,v=s.headers,m=s.name,j=this.options.parse,g=this.options.limitSize||5242880,Array.isArray(t)){e.next=14;break}return e.next=13,r.getFiles({event:t,accept:f.W?"video/*":this.extensionNames.length>0?"."+this.extensionNames.join(",."):"",multiple:h});case 13:t=e.sent;case 14:if(0!==t.length){e.next=16;break}return e.abrupt("return");case 16:return r.upload({url:u,data:d,type:l,contentType:p,crossOrigin:b,headers:"function"===typeof v?v():v,onBefore:function(e){return!(e.size>g)||(O.editor.messageError(c.get("video","uploadLimitError").toString().replace("$size",(g/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(f.X)(O.editor)&&!O.cardComponents[e.uid]){var t=o.insert("audio",{status:"uploading",name:e.name,size:e.size});O.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,a=O.cardComponents[e.uid||""];a&&a.setProgressPercent(n)},onSuccess:function(e,t){var n=O.cardComponents[t.uid||""];if(n){var a=e.id||e.data&&e.data.id,r=e.url||e.data&&e.data.url,c=e.cover||e.data&&e.data.cover,s=e.download||e.data&&e.data.download,u=e.status||e.data&&e.data.status;u="transcoding"===u?"transcoding":"done";var d={result:!0,data:Object(i.a)(Object(i.a)({},e),{},{video_id:a,url:r,cover:c,download:s,status:u})};if(j){var l=j(e);if(l.result){var f=d.data;"string"===typeof l.data?d.data=Object(i.a)(Object(i.a)({},f),{},{url:l.data}):(f.url=l.data.url,void 0!==l.data.status&&(f=Object(i.a)(Object(i.a)({},f),{},{status:l.data.status})),void 0!==l.data.id&&(f=Object(i.a)(Object(i.a)({},f),{},{video_id:l.data.id})),void 0!==l.data.cover&&(f=Object(i.a)(Object(i.a)({},f),{},{cover:l.data.cover})),d.data=Object(i.a)({},f))}else d={result:!1,data:l.data.toString()}}else r||(d={result:!1,data:e.data});d.result?O.editor.card.update(n.id,"string"===typeof d.data?{url:d.data}:Object(i.a)({},d.data)):o.update(n.id,{status:"error",message:d.data||O.editor.language.get("video","uploadError")}),delete O.cardComponents[t.uid||""]}},onError:function(e,t){var n=O.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||O.editor.language.get("video","uploadError")}),delete O.cardComponents[t.uid||""])}},t,m),e.abrupt("return");case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.editor.request,o=this.options,c=o.query,s=o.parse;if(!c||!e)return n();var u=c.action,d=c.type,l=c.contentType,f=c.data;r.ajax({url:u,contentType:l||"",type:void 0===d?"json":d,data:Object(i.a)(Object(i.a)({},f),{},{id:e}),success:function(e){var r=e.result,o=e.data;if(r){var c=s?s(e):e;!1===c.result?a(c.data||t.editor.language.get("video","loadError")):n(Object(i.a)(Object(i.a)({},c.data),{},{status:"transcoding"!==c.data.status?"done":"transcoding"}))}else a(o)},error:function(e){a(e.message||t.editor.language.get("video","loadError"))},method:"GET"})}},{key:"dropFiles",value:function(e){var t=this;if(Object(f.X)(this.editor)&&0!==(e=e.filter((function(e){return t.isAudio(e)}))).length)return this.editor.command.execute("audio-uploader",e),!1}},{key:"pasteFiles",value:function(e){var t=this;if(Object(f.X)(this.editor)&&0!==(e=e.filter((function(e){return t.isAudio(e)}))).length)return this.editor.command.execute("audio-uploader",e.filter((function(e){return t.isAudio(e)})),e),!1}},{key:"pasteEach",value:function(e){if(e.isCard()&&e.attributes(f.x)){if("audio"!==e.attributes(f.x))return;var t=Object(f.L)(e.attributes(f.f));return t&&t.url?void("uploading"===t.status&&(t.percent=0,e.attributes(f.f,Object(f.N)(Object(i.a)(Object(i.a)({},t),{},{status:"done"}))))):void e.remove()}}}],[{key:"pluginName",get:function(){return"audio-uploader"}}]),n}(f.v)},2533:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2705).a)},2534:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2707).a)},2539:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2605).b)},2540:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(15),i=n(16),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(e){this.renderBefore=e;var t=this.getValue(),n=(null===t||void 0===t?void 0:t.url)||"",a=this.getCenter();if(a.empty(),n&&t)t.collapsed?a.append(this.renderCollapse()):a.append(this.renderExpand());else{if(this.editor.readonly)return;a.append(this.renderEdit())}}}]),n}(n(2541).a)},2542:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2541).b)},2543:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var a=n(2),i=n(15),r=n(16),o=n(24),c=n(116),s=n(63),u=n(19),d=n(21),l=n(1),f=n(2470),p=(n(2743),n(2505)),h=n(2526),b=n.n(h),v=n(5),m=n(20),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(l.a)(Object(o.a)(e),"asyncRenderComponent",void 0),Object(l.a)(Object(o.a)(e),"icons",m.f),Object(l.a)(Object(o.a)(e),"onBeforeRender",(function(t,n){var a=e.editor.plugin.components.file;if(a){var i=(a.options||{}).onBeforeRender;if(i)return i(t,n)}return n})),Object(l.a)(Object(o.a)(e),"previewFile",(function(){var t=e.getValue();if(null!==t&&void 0!==t&&t.preview){var n=t.preview;window.open(Object(f.ib)(e.onBeforeRender("preview",n)))}})),Object(l.a)(Object(o.a)(e),"downloadFile",(function(){var t,n,a=e.getValue();if(null!==a&&void 0!==a&&a.download){var i=(null!==(t=null===a||void 0===a?void 0:a.downloadCount)&&void 0!==t?t:0)+1;null===(n=e.container)||void 0===n||n.find(".file-download-count span").text(i);var r=a.download;e.setValue({downloadCount:i}),window.open(Object(f.ib)(e.onBeforeRender("download",r)))}})),Object(l.a)(Object(o.a)(e),"getFileIcon",(function(t){var n=t.split(".").pop();return Object.keys(e.icons).includes(n)?'<i class="'.concat(b()(e.icons,[n],"ts-attachment"),' cdocfont" ></i>'):'<i class="ts-other-file cdocfont" ></i>'})),e}return Object(r.a)(n,[{key:"init",value:function(){Object(c.a)(Object(s.a)(n.prototype),"init",this).call(this),this.editor.on("card:async-render-component",(function(e){return e.asyncRenderComponent}))}},{key:"toolbar",value:function(){var e=[],t=this.getValue();if(!t)return e;var n=t.status,a=t.preview,i=t.download,r=this.getLocales();return"done"===n&&(a&&e.push({type:"button",content:'<span class="data-icon data-icon-preview" />',title:r.preview,onClick:this.previewFile}),i&&e.push({type:"button",content:'<span class="data-icon data-icon-download" />',title:r.download,onClick:this.downloadFile}),Object(f.X)(this.editor)&&!this.editor.readonly&&e.length>0&&e.push({type:"separator"})),Object(f.X)(this.editor)&&!this.editor.readonly&&e.push({type:"delete"}),e}},{key:"renderTemplate",value:function(e){var t=e.name,n=e.status,a=e.message,i=e.percent,r=e.size,o=e.downloadCount,c=void 0===o?0:o,s=this.getLocales();if("error"===n)return'<span class="data-file-error"><span class="data-icon data-icon-error"></span>'.concat(a||s.loadError,'<span class="data-icon data-icon-copy"></span></span>');var u="",d=r<1024?"".concat(r,"B"):r?Object(f.T)(r):"";d&&(u='<span class="data-file-size">'.concat(Object(f.O)(d),"</span>"));var l="";t&&(l=this.getFileIcon(t));var p="";"uploading"===n&&(p='<span class="percent">'.concat(i||0,"%</span>"));var h="";return"done"===n&&(h='<div class="file-download-count">'.concat(v.c.t("FILE_HAS_BEEN_DOWNLOADED"),"<span>")+c+"</span>".concat(v.c.t("TIMES"),"</div>")),'\n        <span class="data-file data-file-'.concat(n,'">\n\t\t\t<div class="file-icon">').concat(l,'</div>\n\t\t\t<div class="info">\n\t\t\t\t<div class="file-name">').concat(Object(f.O)(t),'</div>\n\t\t\t\t<div class="fi">\n\t\t\t\t\t<div class="file-size">').concat(u,"</div>\n\t\t\t\t\t").concat(h,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t").concat(p,"\n        </span>\n        ")}},{key:"bindErrorEvent",value:function(e){var t=this,n=e.find(".data-icon-copy");n.on("mouseenter",(function(){f.E.show(n,t.editor.language.get("image","errorMessageCopy").toString())})),n.on("mouseleave",(function(){f.E.hide()})),n.on("click",(function(e){var n;e.stopPropagation(),e.preventDefault(),f.E.hide(),t.editor.clipboard.copy((null===(n=t.getValue())||void 0===n?void 0:n.message)||"Error message"),t.editor.messageSuccess(t.editor.language.get("copy","success").toString())}))}},{key:"setProgressPercent",value:function(e){var t;null===(t=this.container)||void 0===t||t.find(".percent").html("".concat(e,"%")),this.setValue({percent:e})}},{key:"render",value:function(){var e=this.getValue();e&&(this.container?this.container=this.getCenter().first():(this.container=Object(f.a)(this.renderTemplate(e)),this.getCenter().empty().append(this.container)),Object(f.X)(this.editor)?this.container.attributes("draggable","true"):this.renderView(),"error"===e.status&&this.bindErrorEvent(this.root),this.editor.readonly&&this.renderView())}},{key:"beforeRender",value:function(){var e=this,t=this.editor.request,n=this.getValue();if(n){var i=(new Date).getTime();null!==n&&void 0!==n&&n.key&&null!==n&&void 0!==n&&n.validTime&&i>(null===n||void 0===n?void 0:n.validTime)&&(this.asyncRenderComponent=!1,t.getFileCDNUrl([{key:null===n||void 0===n?void 0:n.key,uid:null===n||void 0===n?void 0:n.uid,name:null===n||void 0===n?void 0:n.name}]).then((function(t){t.url&&e.setValue(Object(a.a)(Object(a.a)({},n),t)),e.asyncRenderComponent=!0,e.editor.trigger("card:async-render")})))}}}],[{key:"lazyRender",get:function(){return!0}}]),n}(p.a)},2544:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2505).c)},2545:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var a=n(9),i=n(2),r=n(18),o=n(15),c=n(16),s=n(24),u=n(19),d=n(21),l=n(1),f=n(2505),p=n(2470),h=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(l.a)(Object(s.a)(e),"extensionNames",["*"]),e}return Object(c.a)(n,[{key:"execute",value:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,r,o,c,s,u,d,l,f,h,b,v,m,j,g,O,y=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.X)(this.editor)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.editor,r=n.request,o=n.card,c=n.language,s=this.options,u=s.action,d=s.data,l=s.type,f=s.contentType,h=s.multiple,b=s.crossOrigin,v=s.withCredentials,m=s.headers,j=s.name,g=this.options.parse,O=this.options.limitSize||5242880,Array.isArray(t)){e.next=10;break}return e.next=9,r.getFiles({event:t,accept:p.W||this.extensionNames.indexOf("*")>-1?"*":this.extensionNames.length>0?"."+this.extensionNames.join(",."):"",multiple:h});case 9:t=e.sent;case 10:if(0!==t.length){e.next=12;break}return e.abrupt("return");case 12:return r.upload({url:u,data:d,type:l,contentType:f,crossOrigin:b,withCredentials:v,headers:"function"===typeof m?m():m,onBefore:function(e){return!(e.size>O)||(y.editor.messageError(c.get("file","uploadLimitError").toString().replace("$size",(O/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(p.X)(y.editor)&&!y.cardComponents[e.uid]){var t=o.insert("file",{status:"uploading",name:e.name,size:e.size});y.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,a=y.cardComponents[e.uid||""];a&&a.setProgressPercent(n)},onSuccess:function(e,t){var n=y.cardComponents[t.uid||""];if(n){var a=e.url||e.data&&e.data.url,r=e.preview||e.data&&e.data.preview,c=e.download||e.data&&e.data.download,s={result:!0,data:Object(i.a)(Object(i.a)({},e),{},{status:"done",url:a,preview:r,download:c})};if(g){var u=g(e);if(u.result){var d=s.data;"string"===typeof u.data?s.data=Object(i.a)(Object(i.a)({},d),{},{url:u.data}):(d.url=u.data.url,void 0!==u.data.status&&(d=Object(i.a)(Object(i.a)({},d),{},{status:u.data.status})),void 0!==u.data.preview&&(d=Object(i.a)(Object(i.a)({},d),{},{preview:u.data.preview})),void 0!==u.data.download&&(d=Object(i.a)(Object(i.a)({},d),{},{download:u.data.download})),s.data=Object(i.a)({},d))}else s={result:!1,data:u.data.toString()}}else a||(s={result:!1,data:e.data});if(s.result){var l="string"===typeof s.data?{url:s.data}:Object(i.a)({},s.data);y.editor.card.update(n.id,l)}else o.update(n.id,{status:"error",message:"string"===typeof s.data?s.data:y.editor.language.get("file","uploadError")});delete y.cardComponents[t.uid||""]}},onError:function(e,t){var n=y.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||y.editor.language.get("file","uploadError")}),delete y.cardComponents[t.uid||""])}},t,j),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f.b)},2546:function(e,t,n){},2547:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2470),f=n(2510),p=(n(2546),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(r.a)(e),"tagName","flowchart"),e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(c.a)(n.prototype),"init",this).call(this)}},{key:"execute",value:function(){Object(l.X)(this.editor)&&this.editor.card.insert(f.default.cardName)}},{key:"hotkey",value:function(){return this.options.hotkey}}],[{key:"pluginName",get:function(){return"flowchart"}}]),n}(l.r))},2548:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2747).a)},2549:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2749).a)},2551:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2756).a)},2552:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(15),i=n(16),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2553),d=n(2470),l=(n(2758),function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"tagName",["h1","h2","h3","h4","h5","h6","h7","h8","h9"].filter((function(t){return!e.options.enableTypes||e.options.enableTypes.indexOf(t)>-1}))),e}return Object(i.a)(n,[{key:"markdown",value:function(e,t,n){if(!Object(d.X)(this.editor)||!1===this.options.markdown)return!1;var a="";switch(t){case"#":a="h1";break;case"##":a="h2";break;case"###":a="h3";break;case"####":a="h4";break;case"#####":a="h5";break;case"######":a="h6";break;case"#######":a="h7";break;case"########":a="h8";break;case"#########":a="h9"}if(!a)return!0;var i=this.options.enableTypes;return!!(i&&i.indexOf(a)<0)||(e.preventDefault(),this.editor.block.removeLeftText(n),this.editor.node.isEmpty(n)&&(n.empty(),n.append("<br />")),this.editor.command.execute(this.constructor.pluginName,a),!1)}},{key:"parseHtml",value:function(e){e.find("h1,h2,h3,h4,h5,h6,h7,h8,h9").css({padding:"7px 0",margin:"0","font-weight":"700"}).each((function(e){var t=e;"H1"===t.tagName?(t.style["font-size"]="26px",t.style["line-height"]="34px",t.style["font-weight"]="600"):"H2"===t.tagName?(t.style["font-size"]="22px",t.style["line-height"]="30px",t.style["font-weight"]="600"):"H3"===t.tagName?(t.style["font-size"]="20px",t.style["line-height"]="28px",t.style["font-weight"]="600"):"H4"===t.tagName?(t.style["font-size"]="18px",t.style["line-height"]="24px",t.style["font-weight"]="600"):"H5"!==t.tagName&&"H6"!==t.tagName&&"H7"!==t.tagName&&"H8"!==t.tagName&&"H9"!==t.tagName||(t.style["font-size"]="16px",t.style["line-height"]="24px",t.style["font-weight"]="600")}))}},{key:"hotkey",value:function(){var e,t,n,a,i,r,o,c,s,u=(null===(e=this.options.hotkey)||void 0===e?void 0:e.h1)||"mod+opt+1",d=(null===(t=this.options.hotkey)||void 0===t?void 0:t.h2)||"mod+opt+2",l=(null===(n=this.options.hotkey)||void 0===n?void 0:n.h3)||"mod+opt+3",f=(null===(a=this.options.hotkey)||void 0===a?void 0:a.h4)||"mod+opt+4",p=(null===(i=this.options.hotkey)||void 0===i?void 0:i.h5)||"mod+opt+5",h=(null===(r=this.options.hotkey)||void 0===r?void 0:r.h6)||"mod+opt+6",b=(null===(o=this.options.hotkey)||void 0===o?void 0:o.h6)||"mod+opt+7",v=(null===(c=this.options.hotkey)||void 0===c?void 0:c.h6)||"mod+opt+8",m=(null===(s=this.options.hotkey)||void 0===s?void 0:s.h6)||"mod+opt+9",j=this.options.enableTypes;return[{key:u,args:"h1"},{key:d,args:"h2"},{key:l,args:"h3"},{key:f,args:"h4"},{key:p,args:"h5"},{key:h,args:"h6"},{key:b,args:"h7"},{key:v,args:"h8"},{key:m,args:"h9"}].filter((function(e){return!j||j.indexOf(e.key)>-1}))}}]),n}(u.b))},2554:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(15),i=n(16),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2470),d=n(2508),l=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"tagName","highlight"),Object(s.a)(Object(r.a)(e),"allowIn",["$root"]),e}return Object(i.a)(n,[{key:"execute",value:function(){Object(u.X)(this.editor)&&this.editor.card.insert(d.default.cardName)}},{key:"query",value:function(){var e,t=this;if(Object(u.X)(this.editor)){var n,a=this.editor,i=a.change,r=a.inline,o=i.range.get(),c=r.findInlines(o).find((function(e){return t.isSelf(e)}));return null===(e=this.toolbar)||void 0===e||e.hide(c),c&&!c.isCard()?(o.collapsed&&(null===(n=this.toolbar)||void 0===n||n.show(c)),!0):!1}}},{key:"queryState",value:function(){return this.query()}},{key:"hotkey",value:function(){return this.options.hotkey}}],[{key:"pluginName",get:function(){return"highlight"}}]),n}(u.v)},2555:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2556).a)},2557:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(15),i=n(16),r=n(116),o=n(63),c=n(19),s=n(21),u=n(2556),d=n(2470),l=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"init",value:function(){var e=this;Object(r.a)(Object(o.a)(n.prototype),"init",this).call(this),Object(d.X)(this.editor)&&this.editor.on("keydown:space",(function(t){return e.markdown(t)}))}},{key:"markdown",value:function(e){if(Object(d.X)(this.editor)&&!1!==this.options.markdown){var t=this.editor,n=t.change,a=t.command,i=t.node,r=n.range.get();if(r.collapsed&&!n.isComposing()&&this.markdown){var o=this.editor.block,c=o.closest(r.startNode);if(i.isRootBlock(c)){var s=o.getLeftText(c);return/^[-]{3,}$/.exec(s)?(e.preventDefault(),o.removeLeftText(c),a.execute(this.constructor.pluginName),!1):void 0}}}}}]),n}(u.b)},2558:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2763).a)},2559:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2765).a)},2560:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2767).a)},2561:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2470),f=n(2609),p=n(2610),h=(n(2769),n(2489)),b="paste:each",v="markdown-it",m="parse:html",j="select",g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(r.a)(e),"toolbar",void 0),Object(d.a)(Object(r.a)(e),"attributes",{target:"@var0",href:"@var1"}),Object(d.a)(Object(r.a)(e),"variable",{"@var0":["_blank","_parent","_top","_self"],"@var1":{required:!0,value:"*"}}),Object(d.a)(Object(r.a)(e),"tagName","a"),Object(d.a)(Object(r.a)(e),"parseValue",(function(t,n){if(e.isSelf(t)){var a=t.attributes("href"),i=a;i&&!Object(h.a)(i)&&(i="about:blank"),i!==a&&(n.href=i,t.attributes("href",i))}return t})),Object(d.a)(Object(r.a)(e),"handleClick",(function(t){if(t.target){var n=e.options.onLinkClick;if(n){var a=Object(l.a)(t.target).closest("".concat(e.tagName));a.name===e.tagName&&n(t,a.attributes("href"))}}})),Object(d.a)(Object(r.a)(e),"bindQuery",(function(){e.query()})),Object(d.a)(Object(r.a)(e),"query",(function(){var t,n=e.editor;if(Object(l.X)(n)){var a=n.change,i=a.inlines.find((function(t){return e.isSelf(t)}));if(null===(t=e.toolbar)||void 0===t||t.hide(i),i&&i.length>0&&!i.isCard()){var r,o,c=a.range.get();if(c.collapsed||i.contains(c.startNode)&&i.contains(c.endNode))return null===(r=e.toolbar)||void 0===r||r.show(i),!0;null===(o=e.toolbar)||void 0===o||o.hide()}return!1}})),Object(d.a)(Object(r.a)(e),"markdownIt",(function(t){!1!==e.options.markdown&&(t.enable("link"),t.enable("linkify"))})),Object(d.a)(Object(r.a)(e),"pasteHtml",(function(t){if(t.isText()){var n=t.text(),a=e.editor,i=a.node,r=a.inline;if(/^https?:\/\/\S+$/.test(n.toLowerCase().trim())&&r.closest(t).equal(t)){var o=decodeURI(n).trim().replace(/\u200b/g,"");o&&!Object(h.a)(o)&&(o="about:blank");var c=i.wrap(t,Object(l.a)("<".concat(e.tagName,' target="_blank" href="').concat(o,'"></a>')));return r.repairCursor(c),!1}}else if("a"===t.name){var s=t.attributes("href"),u=decodeURI(s).trim().replace(/\u200b/g,"");u&&!Object(h.a)(u)&&(u="about:blank"),t.attributes("target","_blank"),t.attributes("href",u)}return!0})),Object(d.a)(Object(r.a)(e),"parseHtml",(function(t){t.find(e.tagName).css({"font-size":"inherit",padding:"0 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})})),e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(c.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(l.X)(e)&&(!1!==this.options.enableToolbar&&(this.toolbar=new f.default(e,{onConfirm:this.options.onConfirm})),e.container.on("click",this.handleClick),e.on(v,this.markdownIt),e.on(b,this.pasteHtml)),e.on(m,this.parseHtml),e.on(j,this.bindQuery),e.on("parse:value",this.parseValue),e.language.add(p.default)}},{key:"hotkey",value:function(){return this.options.hotkey||{key:"mod+k",args:["_blank"]}}},{key:"execute",value:function(){var e=this,t=this.editor;if(Object(l.X)(t)){var n=t.inline,a=t.change;if(this.queryState()){var i=a.inlines.find((function(t){return e.isSelf(t)}));i&&i.length>0&&n.unwrap(i)}else{for(var r=Object(l.a)("<".concat(this.tagName," />")),o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];this.setStyle.apply(this,[r].concat(c)),this.setAttributes.apply(this,[r].concat(c));var u,d=c.length>2?c[2]:"";if(d?(r.text(d),n.insert(r)):n.wrap(r),!a.range.get().collapsed&&a.inlines.length>0)null===(u=this.toolbar)||void 0===u||u.show(a.inlines[0])}}}},{key:"queryState",value:function(){return this.query()}},{key:"destroy",value:function(){var e=this.editor;e.container.off("click",this.handleClick),e.off(b,this.pasteHtml),e.off(m,this.parseHtml),e.off(j,this.bindQuery),e.off(v,this.markdownIt),e.off("parse:value",this.parseValue)}}],[{key:"pluginName",get:function(){return"link"}}]),n}(l.r)},2562:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2771).a)},2563:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2774).a)},2565:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(16),i=n(15),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2470),d=n(2564),l=n(2511),f=n(5),p=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"pasteSchema",(function(e){e.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:l.default.cardName},"data-value":"*"}})})),Object(s.a)(Object(r.a)(e),"pasteHtml",(function(t){if(Object(u.X)(e.editor)){if(t.isElement()){var n=t.attributes();if(n["data-type"]===l.default.cardName){var a=n["data-value"],i=Object(u.L)(a);if(!i.code)return;return e.editor.card.replaceNode(t,l.default.cardName,i),t.remove(),!1}}return!0}})),Object(s.a)(Object(r.a)(e),"parseHtml",(function(t){var n=[];return t.find("[".concat(u.c,'="').concat(l.default.cardName,'"],[').concat(u.x,'="').concat(l.default.cardName,'"]')).each((function(t){var a=Object(u.a)(t),i=e.editor.card.find(a),r=(null===i||void 0===i?void 0:i.getValue())||Object(u.L)(a.attributes(u.f));if(r){a.empty();var o=Object(u.a)('<span data-type="'.concat(l.default.cardName,'" data-value="').concat(Object(u.N)(r),'">').concat(f.c.t("DOCX_LATEX"),"</span>"));a.replaceWith(o),n.push(o)}else a.remove()})),n})),e}return Object(a.a)(n)}(d.b)},2566:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2567).a)},2568:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2567).b)},2569:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(15),i=n(16),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2477),d=n(2478),l=n(2481),f=n(2470),p=new WeakMap,h=new WeakMap,b=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(u.a)(Object(r.a)(e),p,{writable:!0,value:void 0}),Object(s.a)(Object(r.a)(e),"tagName","mouse-move-show-menu"),Object(u.a)(Object(r.a)(e),h,{writable:!0,value:{}}),e}return Object(i.a)(n,[{key:"init",value:function(){var e,t=this;if(!Object(f.X)(this.editor)||this.editor.readonly)return!1;this.editor.on("mouseover",this.mouseoverHandle.bind(this)),this.editor.on("change",this.changeHandle.bind(this)),this.editor.on("select",this.selectHandle.bind(this)),this.editor.on("selectionchange",this.selectHandle.bind(this));var n=this.editor.container;null===n||void 0===n||null===(e=n.document)||void 0===e||e.addEventListener("mouseover",(function(e){var n,a;if(null!==e&&void 0!==e&&null!==(n=e.target)&&void 0!==n&&n.dataset){var i=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.dataset).id,r=void 0===i?0:i;t.editor.trigger("mouseover",{id:r,node:Object(f.a)(e.target)})}})),document.querySelector(".editor-container > .editor-content").addEventListener("mouseleave",(function(){setTimeout((function(){(0,t.options.getIsAction)()||t.mouseoutHandle(t.options)}),120)})),Object(l.a)(this,p,new f.w(this.editor)),Object(l.a)(this,h,this.editor)}},{key:"mouseoverHandle",value:function(e){if(!Object(f.X)(this.editor)||this.editor.readonly)return!1;var t,n=this.options.onMouseOver;"function"===typeof n&&(null===(t=Object(d.a)(this,p))||void 0===t||t.destroy(),n(e.node))}},{key:"mouseoutHandle",value:function(e){var t,n=e.onMouseOut;"function"===typeof n&&(null===(t=Object(d.a)(this,p))||void 0===t||t.destroy(),n())}},{key:"selectHandle",value:function(){var e;if(!Object(f.X)(this.editor)||this.editor.readonly)return!1;var t=this.options,n=t.onSelectHandle,a=t.onSelectHide,i=window.getSelection();if(i.isCollapsed||"\n"===i.toString())a();else{var r=null===(e=f.y.from(Object(d.a)(this,h)))||void 0===e?void 0:e.cloneRange().shrinkToTextNode(),o=r.startNode.next();if(null!==o&&void 0!==o&&o.isElement()&&1===Math.abs(r.endOffset-r.startOffset))if(Object(d.a)(this,h).card.closest(o))return void a();var c=r.startNode.prev();if(null!==c&&void 0!==c&&c.isElement()&&1===Math.abs(r.startOffset-r.endOffset))if(Object(d.a)(this,h).card.closest(c))return void a();0===r.getSubRanges().length||Object(d.a)(this,h).card.active&&!Object(d.a)(this,h).card.active.isEditable?a():r.startNode.closest(".editor-content").length?"function"===typeof n&&n():a()}}},{key:"changeHandle",value:function(){var e,t,n=this.options,a=n.onChangeHandle,i=n.onMouseOver,r=null===(e=f.y.from(Object(d.a)(this,h)))||void 0===e?void 0:e.cloneRange().shrinkToTextNode(),o=null===r||void 0===r?void 0:r.getSubRanges(!0);if(o){var c=Object(d.a)(this,h).card.active;if(0===o.length||c&&!c.isEditable)return a(!0),void i(r.startNode);var s=o[0];null!==s&&void 0!==s&&null!==(t=s.base)&&void 0!==t&&t.startOffset?a(!1):a(!0),i(r.startNode)}}},{key:"destroy",value:function(){this.editor.off("mouseover",this.mouseoverHandle),this.editor.off("select",this.selectHandle),this.editor.off("change",this.changeHandle),this.editor.off("selectionchange",this.selectHandle)}}],[{key:"pluginName",get:function(){return"mouse-move-show-menu"}}]),n}(f.v)},2570:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2780).a)},2571:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2782).a)},2572:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2784).a)},2573:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2786).a)},2574:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2788).a)},2575:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2790).a)},2576:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2577).a)},2578:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2577).b)},2579:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2793).a)},2580:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2795).a)},2581:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2798).a)},2582:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2583).a)},2584:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2583).b)},2585:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2586).a)},2587:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2586).b)},2588:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2480).a)},2589:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2480).b)},2590:function(e,t,n){},2591:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2470),f=n(2512),p=(n(2590),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(r.a)(e),"tagName","uml"),e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(c.a)(n.prototype),"init",this).call(this)}},{key:"execute",value:function(){Object(l.X)(this.editor)&&this.editor.card.insert(f.default.cardName)}}],[{key:"pluginName",get:function(){return"uml-plugin"}}]),n}(l.r))},2592:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2806).a)},2593:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(15),i=n(16),r=n(24),o=n(19),c=n(21),s=n(1),u=n(2808),d=n(2470),l=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"markdown","~"),e}return Object(i.a)(n,[{key:"triggerMarkdown",value:function(e,t,n){var a=this.editor;if(Object(d.X)(a)&&this.markdown){var i=a.block,r=a.change,o=a.command,c=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),s=new RegExp("^(.*)".concat(c,"(.+?)").concat(c,"$")).exec(t);if(s){var u=i.findPlugin(n),l=this.constructor.pluginName;if(u&&u.disableMark&&u.disableMark.indexOf(l)>-1)return;var f=r.range.get(),p=s[1]&&/\S$/.test(s[1]),h=s[2];e.preventDefault();var b=t.substr(0,t.length-h.length-2*this.markdown.length);return n.get().splitText((b+h).length+2*this.markdown.length),p&&(b+=" "),n[0].nodeValue=b+h,f.setStart(n[0],b.length),f.setEnd(n[0],(b+h).length),o.execute(this.constructor.pluginName),(f=r.range.get()).collapse(!1),r.range.select(f),!1}}}}]),n}(u.a)},2594:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2810).a)},2595:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(2),i=n(15),r=n(16),o=n(24),c=n(116),s=n(63),u=n(19),d=n(21),l=n(1),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(l.a)(Object(o.a)(e),"asyncRenderComponent",void 0),e}return Object(r.a)(n,[{key:"init",value:function(){Object(c.a)(Object(s.a)(n.prototype),"init",this).call(this),this.editor.on("card:async-render-component",(function(e){return e.asyncRenderComponent}))}},{key:"beforeRender",value:function(){var e=this,t=this.editor.request,n=this.getValue();if(n){var i=(new Date).getTime();null!==n&&void 0!==n&&n.key&&null!==n&&void 0!==n&&n.validTime&&i>(null===n||void 0===n?void 0:n.validTime)&&(this.asyncRenderComponent=!1,t.getFileCDNUrl([{key:null===n||void 0===n?void 0:n.key,uid:null===n||void 0===n?void 0:n.uid,name:null===n||void 0===n?void 0:n.name}]).then((function(t){t.url&&(e.setValue(Object(a.a)(Object(a.a)({},n),t)),e.asyncRenderComponent=!0,e.editor.trigger("card:async-render"))})))}}}],[{key:"lazyRender",get:function(){return!0}}]),n}(n(2506).a)},2596:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2506).c)},2597:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(9),i=n(2),r=n(18),o=n(15),c=n(16),s=n(24),u=n(19),d=n(21),l=n(1),f=n(12),p=n.n(f),h=n(2506),b=n(2470),v=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),Object(l.a)(Object(s.a)(e),"extensionNames",["mp4","mov","avi","wmv"]),e}return Object(c.a)(n,[{key:"execute",value:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,r,o,c,s,u,d,l,f,h,v,m,j,g,O,y,x=this,w=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}e.t0=t,e.next="query"===e.t0?4:5;break;case 4:return e.abrupt("return",this.query(w.length<=1?void 0:w[1],w.length<=2?void 0:w[2],w.length<=3?void 0:w[3]));case 5:return e.abrupt("return");case 6:if(n=this.editor,r=n.request,o=n.card,c=n.language,s=this.options,u=s.action,d=s.data,l=s.type,f=s.contentType,h=s.multiple,v=s.crossOrigin,m=s.withCredentials,j=s.headers,g=s.name,O=this.options.parse,y=this.options.limitSize||5242880,Array.isArray(t)){e.next=14;break}return e.next=13,r.getFiles({event:t,accept:b.W?"video/*":this.extensionNames.length>0?"."+this.extensionNames.join(",."):"",multiple:h});case 13:t=e.sent;case 14:if(0!==t.length){e.next=16;break}return e.abrupt("return");case 16:return r.upload({url:u,data:d,type:l,contentType:f,crossOrigin:v,withCredentials:m,headers:"function"===typeof j?j():j,onBefore:function(e){return!(e.size>y)||(x.editor.messageError(c.get("video","uploadLimitError").toString().replace("$size",(y/1024/1024).toFixed(0)+"M")),!1)},onReady:function(e){if(Object(b.X)(x.editor)&&!x.cardComponents[e.uid]){var t=o.insert("video",{status:"uploading",name:e.name,size:e.size});x.cardComponents[e.uid]=t}},onUploading:function(e,t){var n=t.percent,a=x.cardComponents[e.uid||""];a&&a.setProgressPercent(n)},onSuccess:function(e,t){var n=x.cardComponents[t.uid||""];if(n){var a=e.id||e.data&&e.data.id,r=e.url||e.data&&e.data.url,c=e.cover||e.data&&e.data.cover,s=e.download||e.data&&e.data.download,u=e.width||e.data&&e.data.width,d=e.height||e.data&&e.data.height,l=e.status||e.data&&e.data.status;l="transcoding"===l?"transcoding":"done";var f={result:!0,data:Object(i.a)(Object(i.a)({},e),{},{video_id:a,url:r,cover:c,download:s,status:l,width:u,height:d})};if(O){var h=O(e);if(h.result){var b=f.data;"string"===typeof h.data?f.data=Object(i.a)(Object(i.a)({},b),{},{url:h.data}):(b.url=h.data.url,p.a.isNil(h.data.status)||(b=Object(i.a)(Object(i.a)({},b),{},{status:h.data.status})),p.a.isNil(h.data.id)||(b=Object(i.a)(Object(i.a)({},b),{},{video_id:h.data.id})),p.a.isNil(h.data.cover)||(b=Object(i.a)(Object(i.a)({},b),{},{cover:h.data.cover})),p.a.isNil(h.data.width)||(b=Object(i.a)(Object(i.a)({},b),{},{width:h.data.width})),p.a.isNil(h.data.height)||(b=Object(i.a)(Object(i.a)({},b),{},{height:h.data.height})),f.data=Object(i.a)({},b))}else f={result:!1,data:h.data.toString()}}else r||(f={result:!1,data:e.data});f.result?x.editor.card.update(n.id,"string"===typeof f.data?{url:f.data}:Object(i.a)(Object(i.a)({},f.data),{},{naturalWidth:f.data.width,naturalHeight:f.data.height})):o.update(n.id,{status:"error",message:"string"===typeof f.data?f.data:x.editor.language.get("video","uploadError")}),delete x.cardComponents[t.uid||""]}},onError:function(e,t){var n=x.cardComponents[t.uid||""];n&&(o.update(n.id,{status:"error",message:e.message||x.editor.language.get("video","uploadError")}),delete x.cardComponents[t.uid||""])}},t,g),e.abrupt("return");case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.b)},2598:function(e,t,n){},2607:function(e,t,n){"use strict";n.r(t);var a=n(5),i={video:{errorMessageCopy:a.c.t("COPY_ERROR_INFORMATION"),loadError:a.c.t("VIDEO_LOADING_FAILURE"),uploadError:a.c.t("UPLOAD_VIDEO_FAILURE"),uploadLimitError:"".concat(a.c.t("UPLOAD_VIDEO_SIZE_LIMIT")," $size"),download:a.c.t("DOWNLOADED"),preview:a.c.t("YU_LAN"),loading:"\u52a0\u8f7d\u4e2d...",transcoding:a.c.t("TRANSCODING")}};t.default={"en-US":{video:{errorMessageCopy:"Copy error message",loadError:"The video failed to load!",uploadError:"The video failed to upload!",uploadLimitError:"Upload video size is limited to $size",download:"Download",preview:"Preview",loading:"Loading...",transcoding:"Transcoding..."}},"zh-CN":i}},2608:function(e,t,n){"use strict";n.r(t);var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(2477),l=n(2478),f=n(2470),p=n(2),h=n(1),b=n(2471),v=n.n(b),m=n(12),j=(n(48),n(5),{"text/plain":"Text","text/html":"Url",default:"Text"});function g(e,t){var n=null,a=null,i=null,r=null,o=!1;t||(t={});try{if(n=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}(),a=document.createRange(),i=document.getSelection(),(r=document.createElement("span")).className="copy-textarea",r.textContent=e,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),"undefined"===typeof n.clipboardData){window.clipboardData.clearData();var a=j[t.format]||j.default;window.clipboardData.setData(a,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(r),a.selectNodeContents(r),i.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");o=!0}catch(c){try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),o=!0}catch(s){}}finally{i&&("function"==typeof i.removeRange?i.removeRange(a):i.removeAllRanges()),r&&document.body.removeChild(r),n()}return o}var O=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"],y={header:"color: blue;font-weight: bold;",quote:"color: #090;",negative:"color: #d44;",positive:"color: #292;",strong:"font-weight: bold;",em:"font-style: italic;",link:"text-decoration: underline;color: #00c;",strikethrough:"text-decoration: line-through;",keyword:"color: #d73a49;",atom:"color: #905;",number:"color: #005cc5;",def:"color: #005cc5;",variable:"","variable-2":"color: #005cc5;","variable-3":"color: #22863a;",type:"color: #22863a;",comment:"color: #6a737d;",string:"color: #690","string-2":"color: #690;",meta:"color: #1f7f9a;",qualifier:"color: #555;",builtin:"color: #6f42c1;",bracket:"color: #997;",tag:"color: #22863a;",attribute:"color: #6f42c1;",hr:"color: #999;",error:"color: #f00;",invalidchar:"color: #f00;",operator:"color: #d73a49;",property:"color: #005cc5;"},x=function(){function e(t,n){Object(a.a)(this,e),Object(h.a)(this,"editor",void 0),Object(h.a)(this,"options",void 0),Object(h.a)(this,"styleMap",void 0),Object(h.a)(this,"codeMirror",void 0),Object(h.a)(this,"mode","plain"),Object(h.a)(this,"container",void 0),this.editor=t,this.options=n,this.styleMap=Object(p.a)(Object(p.a)({},y),n.styleMap),this.container=n.container||Object(f.a)(this.renderTemplate())}return Object(i.a)(e,[{key:"renderTemplate",value:function(){return'<div class="data-codeblock-container"><div class="data-codeblock-content test"></div></div>'}},{key:"getConfig",value:function(e,t){var n=this.codeMirror?this.codeMirror.getOption("indentUnit"):O.indexOf(t||"")>-1?4:2,a=e?e.match(/^ {2,4}(?=[^\s])/gm):null;return a&&(n=a.reduce((function(e,t){return Math.min(e,t.length)}),1/0)),{tabSize:n,indentUnit:n,scrollbarStyle:"simple",readOnly:!Object(f.X)(this.editor)||this.editor.readonly,viewportMargin:1/0}}},{key:"getSyntax",value:function(e){return this.options.synatxMap[e]||e}},{key:"create",value:function(e,t,n){var a=this;this.mode=e;var i=this.getSyntax(e);return this.codeMirror=v()(this.container.find(".data-codeblock-content").get(),Object(p.a)(Object(p.a)({value:t,mode:i,lineNumbers:!0,lineWrapping:!1,autofocus:!1,dragDrop:!1},this.getConfig(t,i)),n)),this.codeMirror.on("focus",(function(){var e=a.options.onFocus;e&&e()})),this.codeMirror.on("keydown",(function(e,t){if(Object(f.Y)("mod+c",t)){var n=e.getSelection();t.preventDefault();var i=e.getCursor("from"),r=e.getCursor("to");return g(n||""),void e.setSelection(i,r)}(Object(f.Y)("mod+z",t)||Object(f.Y)("mod+y",t)||Object(f.Y)("mod+shift+z",t))&&t.stopPropagation();var o=e.lineCount(),c=e.getCursor(),s=c.line,u=c.ch,d=a.options,l=d.onUpFocus,p=d.onDownFocus,h=d.onLeftFocus,b=d.onRightFocus,v=e.getLine(s);if(s===o-1&&u===v.length){if(Object(f.Y)("down",t)||Object(f.Y)("ctrl+n",t))return void(p&&p(t));if(Object(f.Y)("right",t)||Object(f.Y)("shift+right",t)||Object(f.Y)("ctrl+e",t)||Object(f.Y)("ctrl+f",t))return void(b&&b(t))}0===s&&0===u&&(Object(f.Y)("up",t)||Object(f.Y)("ctrl+p",t)?l&&l(t):(Object(f.Y)("left",t)||Object(f.Y)("shift+left",t)||Object(f.Y)("ctrl+b",t)||Object(f.Y)("ctrl+a",t))&&h&&h(t))})),this.codeMirror.on("blur",(function(){var e=a.options.onBlur;e&&e()})),f.ab?this.codeMirror.on("touchstart",(function(e,t){var n=a.options.onMouseDown;n&&n(t)})):this.codeMirror.on("mousedown",(function(e,t){var n=a.options.onMouseDown;n&&n(t)})),this.codeMirror.on("change",Object(m.debounce)((function(){Object(f.X)(a.editor)&&a.save()}),50)),this.codeMirror.setOption("extraKeys",{Enter:function(e){var t=a.getConfig(e.getValue());Object.keys(t).forEach((function(n){return e.setOption(n,t[n])})),e.execCommand("newlineAndIndent")}}),this.container.on("mousedown",(function(){var e;null!==(e=a.codeMirror)&&void 0!==e&&e.hasFocus()||setTimeout((function(){var e;null===(e=a.codeMirror)||void 0===e||e.focus()}),0)})),this.codeMirror}},{key:"setAutoWrap",value:function(e){var t;null===(t=this.codeMirror)||void 0===t||t.setOption("lineWrapping",e)}},{key:"update",value:function(e,t){var n,a,i;(this.mode=e,void 0!==t)&&(null===(i=this.codeMirror)||void 0===i||i.setValue(t));null===(n=this.codeMirror)||void 0===n||n.setOption("mode",this.getSyntax(e)),null===(a=this.codeMirror)||void 0===a||a.setOption("readOnly",!(Object(f.X)(this.editor)&&!this.editor.readonly)),this.save()}},{key:"render",value:function(e,t,n){var a=this.container.find(".data-codeblock-content");e=this.getSyntax(e);var i=Object(f.a)('<div style="font-family: monospace;font-size: 13px; line-height: 21px; color: #595959; direction: ltr; height: auto; overflow: hidden;background: transparent;"><pre style="color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);" /></div>');a.append(i);var r=i.find("pre")[0];this.runMode(t||"",e,r,Object(p.a)(Object(p.a)({},this.getConfig(t,e)),n))}},{key:"save",value:function(){if(Object(f.X)(this.editor)&&this.codeMirror&&!this.editor.change.isComposing()){var e=this.codeMirror.getValue(),t=this.options.onSave;t&&t(this.mode,e)}}},{key:"focus",value:function(){this.codeMirror&&this.codeMirror.focus()}},{key:"select",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.codeMirror)if(this.codeMirror.focus(),e)this.codeMirror.setSelection({line:0,ch:0});else{var t=this.codeMirror.lineCount()-1,n=this.codeMirror.getLine(t);this.codeMirror.setSelection({line:t,ch:n.length})}}},{key:"toHtml",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i=i||v.a.defaults.tabSize;for(var r="",o="",c=0;;){var s=t.indexOf("\t",c);if(-1===s){o+=t.slice(c),e+=t.length-c;break}e+=s-c,o+=t.slice(c,s);var u=i-e%i;e+=u;for(var d=0;d<u;++d)o+=" ";c=s+1}if(a){var l="";a.split(" ").forEach((function(e){var t;l+=null!==(t=n.styleMap[e])&&void 0!==t?t:""})),r+="<span ".concat(l?'style="'.concat(l,'"'):"",">").concat(o,"</span>")}else r+=o;return r}},{key:"runMode",value:function(e,t,n,a){var i=v.a.getMode(v.a.defaults,t),r=a&&a.tabSize||v.a.defaults.tabSize,o=n,c=0;o.innerHTML="";for(var s="",u=v.a.splitLines(e),d=a&&a.state||v.a.startState(i),l=0,f=u.length;l<f;++l){l&&(s+="<br />",c=0);var p=new v.a.StringStream(u[l]);for(!p.string&&i.blankLine&&i.blankLine(d);!p.eol();){var h=i.token?i.token(p,d):"";s+=this.toHtml(c,p.current(),h||"",r),p.start=p.pos}}o.innerHTML=s}},{key:"destroy",value:function(){this.container.remove()}}]),e}(),w=x,k=n(2605),C=new WeakMap,N=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(r.a)(e),C,{writable:!0,value:{}}),e}return Object(i.a)(n,[{key:"init",value:function(){var e=this;f.eb||(Object(o.a)(Object(c.a)(n.prototype),"init",this).call(this),this.codeEditor=new w(this.editor,{synatxMap:Object(l.a)(this,C),onSave:function(t,n){var a=e.getValue();t===(null===a||void 0===a?void 0:a.mode)&&n===a.code||e.setValue({mode:t,code:n})},onMouseDown:function(){e.activated||e.editor.card.activate(e.root,f.h.MOUSE_DOWN)},onUpFocus:function(t){var n;if(Object(f.X)(e.editor)){t.preventDefault();var a=e.editor,i=a.change,r=a.card,o=i.range.get().cloneRange(),c=e.root.prev(),s=c?r.find(c):void 0;if(null!==s&&void 0!==s&&s.onSelectUp)s.onSelectUp(t);else{if(!c)return e.focus(o,!0),void i.range.select(o);r.focusPrevBlock(e,o,!1),i.range.select(o)}e.activate(!1),null===(n=e.toolbarModel)||void 0===n||n.hide()}},onDownFocus:function(t){var n;if(Object(f.X)(e.editor)){t.preventDefault();var a=e.editor,i=a.change,r=a.card,o=i.range.get().cloneRange(),c=e.root.next(),s=c?r.find(c):void 0;if(null!==s&&void 0!==s&&s.onSelectDown)s.onSelectDown(t);else{if(!c)return e.focus(o,!1),void i.range.select(o);r.focusNextBlock(e,o,!1),i.range.select(o)}e.activate(!1),null===(n=e.toolbarModel)||void 0===n||n.hide()}},onLeftFocus:function(t){var n;if(Object(f.X)(e.editor)){t.preventDefault();var a=e.editor.change,i=a.range.get().cloneRange();e.focus(i,!0),a.range.select(i),e.activate(!1),null===(n=e.toolbarModel)||void 0===n||n.hide()}},onRightFocus:function(t){var n;if(Object(f.X)(e.editor)){t.preventDefault();var a=e.editor.change,i=a.range.get().cloneRange();e.focus(i,!1),a.range.select(i),e.activate(!1),null===(n=e.toolbarModel)||void 0===n||n.hide()}}}))}}]),n}(k.a);t.default=N},2609:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var a=n(9),i=n(18),r=n(15),o=n(16),c=n(2477),s=n(1),u=n(2478),d=n(2481),l=n(0),f=n(41),p=n.n(f),h=n(2486),b=n(2470),v=n(77),m=n(2483),j=n(4),g=n(331),O=n(48),y=n(2489),x=n(6),w=function(e){var t=e.language,n=e.defaultLink,a=e.defaultText,i=e.className,r=e.onLoad,o=e.onOk,c=Object(l.useState)(a||""),s=Object(j.a)(c,2),u=s[0],d=s[1],f=Object(l.useState)(n&&!Object(y.a)(n)?"about:blank":n||""),p=Object(j.a)(f,2),h=p[0],b=p[1],v=Object(l.useRef)(null);return Object(l.useEffect)((function(){var e;null===(e=v.current)||void 0===e||e.focus(),r&&v.current&&r(v.current)}),[v]),Object(x.jsxs)("div",{"data-element":"ui",className:Object(g.a)("data-link-editor",i),children:[Object(x.jsx)("p",{children:t.get("link","text")}),Object(x.jsx)("p",{children:Object(x.jsx)(O.h,{className:"data-link-input",value:u,placeholder:t.get("link","text_placeholder").toString(),onChange:function(e){d(e.target.value)}})}),Object(x.jsx)("p",{children:t.get("link","link")}),Object(x.jsx)("p",{children:Object(x.jsx)(O.h,{ref:v,className:"data-link-input",value:h,placeholder:t.get("link","link_placeholder").toString(),onChange:function(e){b(e.target.value)}})}),Object(x.jsx)("p",{children:Object(x.jsx)(O.b,{className:"data-link-button",onClick:function(){return o(u,h)},disabled:""===h.trim()||!Object(y.a)(h.trim()),children:t.get("link","ok_button")})})]})},k=function(e){var t=e.language,n=e.href,a=e.onEdit,i=e.onRemove,r=Object(l.useCallback)((function(){var e=n&&!Object(y.a)(n)?"about:blank":n;if(e.includes(window.location.pathname))return window.location.replace(e),void window.history.replaceState(null,document.title,e);window.open(e)}),[n]);return Object(x.jsxs)("div",{className:Object(g.a)("data-link-preview"),"data-element":"ui",children:[Object(x.jsx)(O.q,{title:t.get("link","link_open"),children:Object(x.jsx)("a",{className:"data-icon data-icon-link data-link-preview-open",onClick:r,target:"_blank",rel:"noreferrer",children:n&&!Object(y.a)(n)?"about:blank":n})}),Object(x.jsxs)("div",{className:"data-link-op",children:[Object(x.jsx)(O.q,{title:t.get("link","link_edit"),children:Object(x.jsx)("a",{className:"data-icon data-icon-edit",onClick:a})}),Object(x.jsx)(O.q,{title:t.get("link","link_remove"),children:Object(x.jsx)("a",{className:"data-icon data-icon-unlink",onClick:i})})]})]})},C=new WeakMap,N=function(){function e(t,n){var a=this;Object(r.a)(this,e),Object(s.a)(this,"engine",void 0),Object(s.a)(this,"root",void 0),Object(s.a)(this,"target",void 0),Object(s.a)(this,"options",void 0),Object(s.a)(this,"mouseInContainer",!1),Object(s.a)(this,"mouseleaveTask",void 0),Object(s.a)(this,"mouseEvent",!1),Object(s.a)(this,"isShow",!1),Object(c.a)(this,C,{writable:!0,value:void 0}),this.engine=t;var i=this.engine.change;if(this.options=n,Object(d.a)(this,C,new b.w(this.engine)),this.engine._readonly)return this;i.event.onWindow("mousedown",(function(e){if(e.target){var t=Object(b.a)(e.target);if(t.inEditor()&&"a"===t.name){var n=t.attributes("href");n&&window.open(n)}}})),i.event.onWindow("mouseover",(function(e){if(e.target){var t=Object(b.a)(e.target);if(!t.closest(".card-maximize-header").length&&!t.closest(".data-embed").length){if(a.mouseEvent)a.mouseEvent=!1;else{var n=t.closest(".data-link-container");a.mouseInContainer=n&&n.length>0}"a"!==t.name||t.attributes("class")?a.mouseInContainer?clearTimeout(a.mouseleaveTask):(clearTimeout(a.mouseleaveTask),a.isShow&&(a.mouseleaveTask=setTimeout((function(){a.hide(void 0,!0)}),600))):(clearTimeout(a.mouseleaveTask),a.show(t,!1))}}}))}return Object(o.a)(e,[{key:"create",value:function(){var e;if(this.target){var t=Object(b.a)(".data-link-container");0===t.length&&(t=Object(b.a)("<div ".concat(b.k,'="').concat(b.F,'" class="data-link-container').concat(v.a.isMobile?" data-link-container-mobile":"",'"></div>'))),this.root=t;var n=null===(e=this.target.get())||void 0===e?void 0:e.getBoundingClientRect();n&&this.root.css({top:"".concat(window.pageYOffset+n.bottom+4,"px"),left:"".concat(window.pageXOffset,"px"),position:"absolute","z-index":125})}}},{key:"onOk",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,n){var i,r,o,c,s,u,d,l,f,p;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.target){e.next=2;break}return e.abrupt("return");case 2:if(i=this.engine.change,r=i.range.get(),i.rangePathBeforeCommand||(r.startNode.inEditor()||(r.select(this.target,!0),i.range.select(r)),i.cacheRangeBeforeCommand()),o=this.options||{},!(c=o.onConfirm)){e.next=12;break}return e.next=9,c(t,n);case 9:s=e.sent,t=s.text,n=s.link;case 12:if(this.target.attributes("href",n),t=""===t.trim()?n:t,this.target.text()===t){e.next=45;break}if(!((d=this.target.children()).length<3)){e.next=21;break}this.target.text(t),e.next=45;break;case 21:if(3!==d.length||null===(u=d.eq(1))||void 0===u||!u.isText()){e.next=25;break}this.target.text(t),e.next=45;break;case 25:if(3!==d.length){e.next=44;break}l=d.eq(1);case 27:if(!l){e.next=42;break}if(!((p=l.children()).length>1||0===p.length)){e.next=34;break}return l.text(t),e.abrupt("break",42);case 34:if(null===(f=p.eq(0))||void 0===f||!f.isText()){e.next=39;break}return l.text(t),e.abrupt("break",42);case 39:l=p;case 40:e.next=27;break;case 42:e.next=45;break;case 44:this.target.text(t);case 45:this.engine.inline.repairCursor(this.target),r.setStart(this.target.next(),1),r.setEnd(this.target.next(),1),i.apply(r),this.mouseInContainer=!1,this.hide();case 51:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"editor",value:function(e,t){var n=this;return Object(x.jsx)(w,{language:this.engine.language,defaultText:e,defaultLink:t,onLoad:function(){n.mouseInContainer=!0,n.engine.trigger("select")},onOk:function(e,t){return n.onOk(e,t)}})}},{key:"preview",value:function(e){var t=this;return Object(x.jsx)(k,{language:this.engine.language,onEdit:function(){t.target&&(t.mouseInContainer=!1,t.hide(void 0,!1),t.show(t.target,!0),t.mouseEvent=!0)},onRemove:function(){if(t.target){var e=t.engine,n=e.change,a=e.inline,i=n.range.get();i.select(t.target,!0),a.repairRange(i),n.range.select(i),n.cacheRangeBeforeCommand(),a.unwrap(),t.mouseInContainer=!1,t.target=void 0,t.mouseEvent=!0,t.hide()}},href:e})}},{key:"show",value:function(e,t){var n,a,i,r=this;if((null===(n=this.target)||void 0===n||!n.equal(e)||null===(a=this.root)||void 0===a||null===(i=a.parent())||void 0===i||!i.length)&&!this.engine._readonly){this.target=e,this.create();var o=e.text().replace(/\u200B/g,""),c=e.attributes("href");c||(t=!0);var s=this.root.get();this.isShow=!0,p.a.render(Object(x.jsx)(m.a,{children:Object(x.jsx)(h.a,{autoInsertSpaceInButton:!1,children:t?this.editor(o,c):this.preview(c)})}),s,(function(){var e,t;r.root&&r.target&&(null===(e=Object(u.a)(r,C))||void 0===e||e.destroy(),null===(t=Object(u.a)(r,C))||void 0===t||t.bind(r.root,r.target))}))}}},{key:"hide",value:function(e,t){var n;if(!(e&&this.target&&e.equal(this.target))){var a=null===(n=this.root)||void 0===n?void 0:n.get();if(this.isShow=!1,a&&!this.mouseInContainer){var i;if(p.a.unmountComponentAtNode(a),null===(i=Object(u.a)(this,C))||void 0===i||i.destroy(),this.root=void 0,this.target&&!this.target.attributes("href")){var r=this.engine,o=r.change,c=r.inline,s=o.range.get();s.select(this.target,!0),o.range.select(s),c.unwrap()}!1!==t&&(this.target=void 0)}}}}]),e}()},2610:function(e,t,n){"use strict";n.r(t);var a=n(5),i={link:{text:a.c.t("TEXT"),link:a.c.t("LINKS"),text_placeholder:"\u63cf\u8ff0\u6587\u672c",link_placeholder:"\u94fe\u63a5\u5730\u5740",link_open:"\u6253\u5f00\u94fe\u63a5",link_edit:a.c.t("EDIT_LINK"),link_remove:"\u79fb\u9664\u94fe\u63a5",ok_button:a.c.t("DETERMINE")}};t.default={"en-US":{link:{text:"Text",link:"Link",text_placeholder:"Description text",link_placeholder:"Number address",link_open:"Open link",link_edit:"Edit link",link_remove:"Remove link",ok_button:"OK"}},"zh-CN":i}},2611:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n(15),i=n(16),r=n(24),o=n(116),c=n(63),s=n(19),u=n(21),d=n(1),l=n(2470),f=n(9),p=n(18),h=n(2477),b=n(2478),v=n(2481),m=(n(0),n(41)),j=n.n(m),g=n(2486),O=n(2483),y=n(2613),x=n(77),w=n(2509),k=n(6),C=new WeakMap,N=function(){function e(t){var n=this;Object(a.a)(this,e),Object(d.a)(this,"engine",void 0),Object(d.a)(this,"root",void 0),Object(d.a)(this,"target",void 0),Object(d.a)(this,"mouseInContainer",!1),Object(h.a)(this,C,{writable:!0,value:void 0}),Object(d.a)(this,"currentLink",void 0),Object(d.a)(this,"inlineNode",void 0),this.engine=t;var i=this.engine.change;Object(v.a)(this,C,new l.w(this.engine)),i.event.onWindow("mousedown",(function(e){if(e.target){var t=Object(l.a)(e.target).closest(".data-web-card-container");n.mouseInContainer=t&&t.length>0,n.mouseInContainer||n.hide()}}))}return Object(i.a)(e,[{key:"create",value:function(){var e;if(this.target){var t=Object(l.a)(".data-web-card-container");0===t.length&&(t=Object(l.a)('<div class="data-web-card-container'.concat(x.a.isMobile?" data-web-card-container-mobile":"",'"></div>'))),this.root=t;var n=null===(e=this.target.get())||void 0===e?void 0:e.getBoundingClientRect();n&&this.root.css({top:"".concat(window.pageYOffset+n.bottom+4,"px"),left:"".concat(window.pageXOffset,"px"),position:"absolute","z-index":1})}}},{key:"onOk",value:function(){var e=Object(p.a)(Object(f.a)().mark((function e(t){var n,a,i,r;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.target){e.next=2;break}return e.abrupt("return");case 2:n=this.engine,a=n.change,i=n.card,r=a.range.get(),a.rangePathBeforeCommand||(r.startNode.inEditor()||(r.select(this.target,!0),a.range.select(r)),a.cacheRangeBeforeCommand()),i.insert(w.default.cardName,{link:t}),this.currentLink=t,this.mouseInContainer=!1,this.hide();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editor",value:function(){var e=this;return Object(k.jsx)(y.a,{onLoad:function(){return e.mouseInContainer=!0},onOk:function(t){return e.onOk(t)}})}},{key:"show",value:function(e,t){var n,a=this;this.target=e,this.inlineNode=t,this.create();var i=null===(n=this.root)||void 0===n?void 0:n.get();j.a.render(Object(k.jsx)(O.a,{children:Object(k.jsx)(g.a,{autoInsertSpaceInButton:!1,children:this.editor("")})}),i,(function(){var e,t;a.root&&a.target&&(null===(e=Object(b.a)(a,C))||void 0===e||e.destroy(),null===(t=Object(b.a)(a,C))||void 0===t||t.bind(a.root,a.target))}))}},{key:"hide",value:function(e,t){var n;if(!(e&&this.target&&e.equal(this.target))){var a=null===(n=this.root)||void 0===n?void 0:n.get();if(a&&!this.mouseInContainer){var i;if(j.a.unmountComponentAtNode(a),null===(i=Object(b.a)(this,C))||void 0===i||i.destroy(),this.root=null,this.target&&!this.target.attributes("href")){var r=this.engine,o=r.change,c=r.inline,s=o.range.get();s.select(this.target,!0),o.range.select(s),c.unwrap()}!1!==t&&(this.target=null)}}}}]),e}(),E=(n(2813),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(r.a)(e),"toolbar",void 0),Object(d.a)(Object(r.a)(e),"tagName","webcard"),Object(d.a)(Object(r.a)(e),"style",{border:"1px solid #000000"}),e}return Object(i.a)(n,[{key:"init",value:function(){Object(o.a)(Object(c.a)(n.prototype),"init",this).call(this);var e=this.editor;Object(l.X)(e)&&(this.toolbar=new N(e))}},{key:"execute",value:function(){var e=this;if(Object(l.X)(this.editor)){var t=this.editor,n=t.inline,a=t.change;if(this.queryState()){var i=a.inlines.find((function(t){return e.isSelf(t)}));i&&i.length>0&&n.unwrap(i)}else{var r,o=Object(l.a)("<".concat(this.tagName," />"));this.setAttributes(o,{"data-web-card":1}),n.wrap(o),null===(r=this.toolbar)||void 0===r||r.show(o)}}}},{key:"query",value:function(){var e,t=this;if(Object(l.X)(this.editor)){var n=this.editor.change,a=n.inlines.find((function(e){return t.isSelf(e)}));if(null===(e=this.toolbar)||void 0===e||e.hide(a),a&&a.length>0&&!a.isCard()){var i,r,o=n.range.get();if(o.collapsed||a.contains(o.startNode)&&a.contains(o.endNode))return null===(i=this.toolbar)||void 0===i||i.show(a),!0;null===(r=this.toolbar)||void 0===r||r.hide()}return!1}}},{key:"queryState",value:function(){return this.query()}}],[{key:"pluginName",get:function(){return"web-card"}}]),n}(l.r))},2612:function(e,t,n){"use strict";var a=n(15),i=n(16),r=n(24),o=n(19),c=n(21),s=n(1),u=n(12),d=n.n(u),l=n(48);function f(e,t,n){var a=function(e){var t=document.createElement("div");null!=t.textContent?t.textContent=e:t.innerText=e;var n=t.innerHTML;return t=null,n}(e);t=t.split(",")[1],t=atob(t);for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);var o=new Blob([i],{type:"image/svg+xml"}),c=new FileReader;c.readAsText(o),c.onload=function(){var e=c.result;"function"===typeof n&&n(e.replace("<svg ","<svg content='".concat(a,"' ")))}}function p(e,t){return function(e){var t={};return(e||"").replace(/([^?&=/]+)=([^?&=/]*)/g,(function(e,n,a){return t[decodeURIComponent(n)]=decodeURIComponent(a)})),t}(e.split("?")[1])[t]}var h="embed=1&spin=1&proto=json&lang=zh&noExitBtn=1",b=function(){function e(){Object(a.a)(this,e),Object(s.a)(this,"savingSto",null),Object(s.a)(this,"isSaving",!1)}return Object(i.a)(e,[{key:"setSavingFlag",value:function(){var e=this;this.clearSavingFlag(),this.isSaving=!0,this.savingSto=setTimeout((function(){e.isSaving=!1}),5e3)}},{key:"clearSavingFlag",value:function(){this.isSaving=!1,clearTimeout(this.savingSto)}},{key:"checkReady",value:function(e){var t=this,n=0,a=setInterval((function(){(++n>100||!t.isSaving)&&(clearInterval(a),e())}),50)}}]),e}(),v=n(5),m=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(r.a)(e),"drawioIframe",null),Object(s.a)(Object(r.a)(e),"isIframeVisible",!1),Object(s.a)(Object(r.a)(e),"closeHolding",!1),Object(s.a)(Object(r.a)(e),"initialized",!1),Object(s.a)(Object(r.a)(e),"drawioFrameLoaded",!1),Object(s.a)(Object(r.a)(e),"eventListenerBound",!1),Object(s.a)(Object(r.a)(e),"iframeInserted",!1),Object(s.a)(Object(r.a)(e),"drawioUrl",""),Object(s.a)(Object(r.a)(e),"closeIframe",(function(){var t=new Event("drawioClosed");window.dispatchEvent(t),e.hideIframe()})),Object(s.a)(Object(r.a)(e),"isOpen",(function(){return e.isIframeVisible})),Object(s.a)(Object(r.a)(e),"isLoaded",(function(){return e.initialized})),Object(s.a)(Object(r.a)(e),"editImage",(function(t,n,a){return e.onSave=n,e.onClose=function(){a&&a(),e.onSave=null,e.onClose=null},e.drawioFrameLoaded?t?0===t.indexOf("<svg")?(e.sendMsgToDrawio({action:"load",xml:t,autosave:1}),void e.showIframe()):(e.showIframe(),e.sendMsgToDrawio({action:"spinner",message:"\u52a0\u8f7d\u4e2d...",show:!0,enabled:!1}),void fetch(t).then((function(e){return e.text()})).then((function(t){e.sendMsgToDrawio({action:"spinner",message:"",show:!1,enabled:!0}),setTimeout((function(){e.sendMsgToDrawio({action:"load",xml:t,autosave:1})}),50)})).catch((function(){e.sendMsgToDrawio({action:"spinner",message:v.c.t("FLOWCHART_LOADING_FAILURE"),show:!0,enabled:!1})}))):(e.sendMsgToDrawio({action:"load",autosave:1}),void e.showIframe()):(l.r.error(v.c.t("PROCESS_EDITOR_INITIALIZATION_FAILED")),Promise.reject())})),Object(s.a)(Object(r.a)(e),"init",(function(t){return e.editImage.close=e.closeIframe,e.editImage.isOpen=e.isOpen,e.editImage.isLoaded=e.isLoaded,e.iframeInserted||(e.iframeInserted=!0,t||(t="https://www.draw.io/"),e.initCommunication(t)),e.editImage})),e}return Object(i.a)(n,[{key:"sendMsgToDrawio",value:function(e){this.getFrame().contentWindow.postMessage(JSON.stringify(e),"*")}},{key:"showIframe",value:function(){this.getFrame().setAttribute("style","position:fixed;height:100%;width:100%;top:0;left:0;z-index:99990;background:white;border:none"),this.isIframeVisible=!0}},{key:"hideIframe",value:function(){var e=this;this.getFrame().setAttribute("style","position:fixed;height:100%;width:100%;top:-10240px;left:0;z-index:99990;background:white;border:none"),this.isIframeVisible=!1,d.a.isFunction(this.onClose)&&this.onClose(),setTimeout((function(){e.sendMsgToDrawio({action:"load",autosave:1})}),500),setTimeout((function(){e.sendMsgToDrawio({action:"spinner",message:"",show:!1,enabled:!0})}),300)}},{key:"getFrame",value:function(){return this.drawioIframe||(this.drawioIframe=document.createElement("iframe"),this.drawioIframe.id="drawio-iframe"),this.drawioIframe}},{key:"initCommunication",value:function(e){if(this.drawioUrl=e,this.closeHolding=!!p(e,"hold"),!this.initialized){this.initialized=!0,-1!==e.indexOf("?")?e+="&".concat(h):e+="?".concat(h);var t=this.getFrame();t.src=e,this.hideIframe(),document.documentElement.appendChild(t),this.bindEventListener()}}},{key:"bindEventListener",value:function(){var e=this;this.eventListenerBound||(this.eventListenerBound=!0,window.addEventListener("message",(function(t){if(t.data){var n=null;try{n=JSON.parse(t.data)}catch(i){}if(n&&"object"===typeof n)switch(n.event){case"init":e.drawioFrameLoaded=!0,window.dispatchEvent(new Event("drawioLoaded"));break;case"save":setTimeout((function(){e.sendMsgToDrawio({action:"export",format:"png",spinKey:"saving"}),e.setSavingFlag(),e.checkReady((function(){e.sendMsgToDrawio({action:"export",format:"svg",spinKey:"saving"})})),e.closeHolding?e.sendMsgToDrawio({action:"spinner",message:"\u4fdd\u5b58\u4e2d...",show:!0,enabled:!1}):e.hideIframe()}),100);break;case"autosave":e.sendMsgToDrawio({action:"export",format:"png"}),e.setSavingFlag(),e.checkReady((function(){e.sendMsgToDrawio({action:"export",format:"svg"})}));break;case"export":if(!n.data)return;if(e.clearSavingFlag(),-1!==n.data.indexOf("data:image/png")){var a=new Event("drawioImageCreated");a.imageType="png",a.imageContent=n.data,window.dispatchEvent(a),d.a.isFunction(e.onSave)&&e.onSave(a)}else f(n.xml,n.data,(function(t){var a=new Event("drawioImageCreated");a.imageType="svg",a.imageContent=t,a.xml=n.xml,window.dispatchEvent(a),d.a.isFunction(e.onSave)&&e.onSave(a)}));break;case"exit":e.closeIframe()}}})))}}]),n}(b);t.a=(new m).init},2613:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(4),i=n(0),r=n(48),o=n(44).c.div.withConfig({displayName:"style__LinkSettingStyle",componentId:"sc-1k2mflm-0"})(["",";width:500px;padding:16px;.title{",";padding-bottom:10px;}.bottom{display:flex;justify-content:right;padding-top:20px;}"],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.f_heading5})),c=n(441),s=n(5),u=n(6);function d(e){var t=e.defaultLink,n=e.onLoad,d=e.onOk,l=Object(i.useState)(t||""),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(i.useRef)(null);Object(i.useEffect)((function(){return n&&b.current&&n(b.current),setTimeout((function(){var e;null===(e=b.current)||void 0===e||e.focus()}),200),function(){}}),[]);var v=Object(i.useCallback)((function(){/http[s]?:\/\//.test(p)?d(p):r.r.warning("".concat(s.c.t("WEB_PAGE_LINK_ADDRESS_IS_INCORRECT"),"\uff01").concat(s.c.t("PLEASE_CHECK")))}),[p,d]);return Object(u.jsxs)(o,{theme:c.a,children:[Object(u.jsx)("div",{className:"title",children:s.c.t("PASTE_WEB_PAGE_LINK")}),Object(u.jsx)("div",{children:Object(u.jsx)(r.h,{ref:b,className:"data-link-input",value:p,placeholder:"https://...",onChange:function(e){h(e.target.value)}})}),Object(u.jsx)("div",{className:"bottom",children:Object(u.jsx)(r.b,{theme:c.a,type:"primary",className:"data-link-button",onClick:v,disabled:""===p.trim(),children:s.c.t("CONFIRM")})})]})}},2696:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2528).default],i=[],r={}},2701:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return d})),n.d(t,"pluginComponent",(function(){return l})),n.d(t,"pluginConfig",(function(){return f}));var a,i=n(1),r=n(2498),o=n(2529),c=n(2530),s=n(36),u=n(2473),d=[o.default,c.default],l=[r.default],f=(a={},Object(i.a)(a,o.default.pluginName,{onBeforeRender:function(e,t){return t&&t.indexOf("http"),t},onloadHandle:function(){}}),Object(i.a)(a,c.default.pluginName,{file:{limitSize:1024*Object(s.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")*1024},remote:{},isRemote:function(e){return-1===e.indexOf(u.j)}}),a)},2702:function(e,t,n){},2703:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return s})),n.d(t,"pluginComponent",(function(){return u})),n.d(t,"pluginConfig",(function(){return d}));var a=n(1),i=n(2531),r=n(2532),o=n(2500),c=n(36),s=[i.default,r.default],u=[o.default],d=Object(a.a)({},r.default.pluginName,{limitSize:1024*Object(c.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")*1024,accept:["mp3","aac","opus","mav","flac","ape"]})},2704:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2533).default],i=[],r={}},2706:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2534).default],i=[],r={}},2741:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2539),i=n(2608),r=[a.default],o=[i.default],c={}},2742:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2542),i=n(2540),r=[a.default],o=[i.default],c={}},2743:function(e,t,n){},2744:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return s})),n.d(t,"pluginComponent",(function(){return u})),n.d(t,"pluginConfig",(function(){return d}));var a=n(1),i=n(2544),r=n(2545),o=n(2543),c=n(36),s=[i.default,r.default],u=[o.default],d=Object(a.a)({},i.default.pluginName,{limitSize:1024*Object(c.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")*1024,accept:["*"]})},2745:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2547),i=n(2510),r=[a.default],o=[i.default],c={}},2746:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2548).default],i=[],r={}},2748:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return o})),n.d(t,"pluginComponent",(function(){return c})),n.d(t,"pluginConfig",(function(){return s}));var a=n(1),i=n(2549),r=n(2480),o=[i.default],c=[],s=Object(a.a)({},i.default.pluginName,{filter:function(e){var t=r.d.find((function(t){return e.split(",").some((function(e){return t.value.toLowerCase().indexOf(e.replace(/"/,"").toLowerCase())>-1}))}));return!!t&&t.value}})},2755:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(1),i=n(2551),r=[i.default],o=[],c=Object(a.a)({},i.default.pluginName,{filter:function(e){return["12px","13px","14px","15px","16px","19px","22px","24px","29px","32px","40px","48px"].indexOf(e)>-1}})},2757:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2552).default],i=[],r={}},2758:function(e,t,n){},2759:function(e,t,n){},2760:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return i})),n.d(t,"pluginComponent",(function(){return r})),n.d(t,"pluginConfig",(function(){return o}));var a=n(2508),i=[n(2554).default],r=[a.default],o={}},2761:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2557),i=n(2555),r=[a.default],o=[i.default],c={}},2762:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2558).default],i=[],r={}},2764:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(1),i=n(2559),r=[i.default],o=[],c=Object(a.a)({},i.default.pluginName,{markdown:"*"})},2766:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(1),i=n(2560),r=[i.default],o=[],c=Object(a.a)({},i.default.pluginName,{filter:function(e){return"14px"===e?"1":"16px"===e?"1.15":"21px"===e?"1.5":"28px"===e?"2":"35px"===e?"2.5":"42px"===e?"3":["1","1.15","1.5","2","2.5","3"].indexOf(e)>-1}})},2768:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2561),i=n(2489),r=[a.default],o=[],c={link:{onConfirm:function(e,t){return{text:e,link:t&&!Object(i.a)(t)?"about:blank":t}}}}},2769:function(e,t,n){},2770:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2562).default],i=[],r={}},2773:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(1),i=n(2563),r=[i.default],o=[],c=Object(a.a)({},i.default.pluginName,{keys:["comment"]})},2777:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return o})),n.d(t,"pluginComponent",(function(){return c})),n.d(t,"pluginConfig",(function(){return s}));var a=n(1),i=n(2511),r=n(2565),o=[r.default],c=[i.default],s=Object(a.a)({},r.default.pluginName,{action:"latex",parse:function(e){return e.success?{result:!0,data:e.svg}:{result:!1,data:""}}})},2778:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2569).default],i=[],r={}},2779:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2570).default],i=[],r={}},2781:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2571).default],i=[],r={}},2783:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2572).default],i=[],r={}},2785:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2573).default],i=[],r={}},2787:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2574).default],i=[],r={}},2789:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2575).default],i=[],r={}},2791:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return i})),n.d(t,"pluginComponent",(function(){return r})),n.d(t,"pluginConfig",(function(){return o}));var a=n(2576),i=[n(2578).default],r=[a.default],o={}},2792:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2579).default],i=[],r={}},2794:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(1),i=n(2580),r=[i.default],o=[],c=Object(a.a)({},i.default.pluginName,{markdown:"_"})},2797:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2581).default],i=[],r={}},2801:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return c})),n.d(t,"pluginComponent",(function(){return s})),n.d(t,"pluginConfig",(function(){return u}));var a=n(1),i=n(2470),r=n(2582),o=n(2584),c=[o.default],s=[r.default],u=Object(a.a)({},o.default.pluginName,{overflow:{maxLeftWidth:function(){var e,t=null===(e=Object(i.a)(".am-engine").get())||void 0===e?void 0:e.getBoundingClientRect(),n=((null===t||void 0===t?void 0:t.left)||0)-Object(i.a)(".data-toc-wrapper").width();return n<=0?0:n-16},maxRightWidth:function(){var e,t=null===(e=Object(i.a)(".am-engine").get())||void 0===e?void 0:e.getBoundingClientRect(),n=((null===t||void 0===t?void 0:t.right)||0)-((null===t||void 0===t?void 0:t.width)||0)-Object(i.a)(".doc-comment-layer").width();return n<=0?0:n-16}}})},2802:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2587),i=n(2585),r=[a.default],o=[i.default],c={}},2803:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return u})),n.d(t,"pluginComponent",(function(){return d})),n.d(t,"pluginConfig",(function(){return l}));var a=n(1),i=n(2589),r=n(2588),o=n(55),c=n(5),s=n(6),u=[i.default],d=[r.default],l=Object(a.a)({},i.default.pluginName,{config:[{title:c.c.t("RECENTLY"),items:[{name:"image-uploader",icon:Object(s.jsx)(o.a,{type:"ts-image",className:"icon img"}),title:c.c.t("DOCX_IMAGE"),search:"".concat(c.c.t("DOCX_IMAGE"),",tupian,image,img")},{name:"video-uploader",icon:Object(s.jsx)(o.a,{type:"ts-play-circle",className:"icon img"}),title:c.c.t("DOCX_VIDER"),search:"".concat(c.c.t("DOCX_VIDER"),",shipin,video")},{name:"audio-uploader",icon:Object(s.jsx)(o.a,{type:"ts-audio",className:"icon img"}),title:c.c.t("DOCX_AUDIO"),search:"".concat(c.c.t("DOCX_AUDIO"),",yinpin")},{name:"file-uploader",icon:Object(s.jsx)(o.a,{type:"ts-attachment",className:"icon file"}),title:c.c.t("ATTACHMENT"),search:"".concat(c.c.t("ATTACHMENT"),",fujian,file")},{name:"table",icon:Object(s.jsx)(o.a,{type:"ts-table",className:"icon table"}),title:c.c.t("TABLE"),search:"".concat(c.c.t("TABLE"),",biaoge,table")},{name:"codeblock",icon:Object(s.jsx)(o.a,{type:"ts-code-block",className:"icon"}),title:c.c.t("CODE_BLOCK"),search:"".concat(c.c.t("CODE_BLOCK"),",code,codeblock")},{name:"flowchart",icon:Object(s.jsx)(o.a,{type:"ts-flowchart",className:"icon flow"}),title:c.c.t("FLOWCHART"),search:"".concat(c.c.t("FLOWCHART"),",liuchengtu,flowchart")},{name:"uml-plugin",icon:Object(s.jsx)(o.a,{type:"ts-uml",className:"icon uml-icon"}),title:"UML".concat(c.c.t("DIAGRAM")),search:"uml,umltu"},{name:"math",icon:Object(s.jsx)(o.a,{type:"ts-tex",className:"icon gs"}),title:c.c.t("DOCX_LATEX"),search:"".concat(c.c.t("DOCX_LATEX"),",math")},{name:"web-card",icon:Object(s.jsx)(o.a,{type:"ts-window",className:"icon web-card"}),title:c.c.t("WEB_PAGE_CARD"),search:"".concat(c.c.t("WEB_PAGE_CARD"),",webcard,wangyekapian")},{name:"embed",icon:Object(s.jsx)(o.a,{type:"ts-window",className:"icon web-card"}),title:c.c.t("WEB_PAGE_PREVIEW"),search:"".concat(c.c.t("WEB_PAGE"),",").concat(c.c.t("YU_LAN"),",embed,wangye")},{name:"link",icon:Object(s.jsx)(o.a,{type:"ts-link",className:"icon link"}),title:c.c.t("HYPERLINK"),search:"".concat(c.c.t("HYPERLINK"),",chaolianjie,link")},{name:"status",icon:Object(s.jsx)(o.a,{type:"ts-tag",className:"icon link"}),title:c.c.t("STATUS"),search:"".concat(c.c.t("STATUS"),",status,zhuangtai")}]}]})},2804:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2591),i=n(2512),r=[a.default],o=[i.default],c={}},2805:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2592).default],i=[],r={}},2807:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2593).default],i=[],r={}},2809:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return a})),n.d(t,"pluginComponent",(function(){return i})),n.d(t,"pluginConfig",(function(){return r}));var a=[n(2594).default],i=[],r={}},2811:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return u})),n.d(t,"pluginComponent",(function(){return d})),n.d(t,"pluginConfig",(function(){return l}));var a,i=n(1),r=n(2595),o=n(2596),c=n(2597),s=n(36),u=[o.default,c.default],d=[r.default],l=(a={},Object(i.a)(a,o.default.pluginName,{onBeforeRender:function(e,t){return t}}),Object(i.a)(a,c.default.pluginName,{limitSize:1024*Object(s.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")*1024,accept:["mp4","mov","avi","wmv"]}),a)},2812:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return r})),n.d(t,"pluginComponent",(function(){return o})),n.d(t,"pluginConfig",(function(){return c}));var a=n(2611),i=n(2509),r=[a.default],o=[i.default],c={}},2813:function(e,t,n){},2814:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var a=n(9),i=n(18),r=n(15),o=n(16),c=n(2815),s=n(220),u=function(){function t(e){Object(r.a)(this,t),this._event=new s.EventEmitter,this._config=e}return Object(o.a)(t,[{key:"defaultStartParams",value:function(){return{format:"pcm",sample_rate:16e3,enable_intermediate_result:!0,enable_punctuation_predition:!0,enable_inverse_text_normalization:!0,enable_punctuation_prediction:!0}}},{key:"on",value:function(e,t){this._event.on(e,t)}},{key:"start",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,n,i){var r,o=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._client=new c.a(this._config),this._taskid=this._client.uuid(),r={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StartTranscription",appkey:this._config.appkey},payload:t},e.abrupt("return",new Promise((function(e,t){try{o._client.start((function(t,n){if(!n){var a=t.data.toString(),i=JSON.parse(a);"TranscriptionStarted"===i.header.name?(o._event.emit("started",a),e(a)):"TranscriptionResultChanged"===i.header.name?o._event.emit("changed",a):"TranscriptionCompleted"===i.header.name?o._event.emit("TranscriptionCompleted",a):"SentenceBegin"===i.header.name?o._event.emit("begin",a):"SentenceEnd"===i.header.name?o._event.emit("end",a):"TaskFailed"===i.header.name&&(o._client.clearPing(),o._client.shutdown(),o._client=null,o._event.emit("TaskFailed",a),o._event.emit("failed",a))}}),(function(){o._event.emit("closed")})).then((function(){n&&(i||(i=6e3),o._client.setPing(i)),o._client.send(JSON.stringify(r),!1)}))}catch(a){t(a)}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"close",value:function(){var t=Object(i.a)(Object(a.a)().mark((function t(n){var i,r=this;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this._client){t.next=2;break}return t.abrupt("return",new Promise((function(t,n){e.nextTick((function(){n("client is null")}))})));case 2:return i={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StopTranscription",appkey:this._config.appkey},payload:n,context:this._client.defaultContext()},t.abrupt("return",new Promise((function(e,t){r._event.on("TranscriptionCompleted",(function(t){r._client&&(r._client.clearPing(),r._client.shutdown(),r._client=null),r._event.emit("completed",t),e(t)})),r._event.on("TaskFailed",(function(e){t(e)})),r._client.send(JSON.stringify(i),!1)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"ctrl",value:function(e){if(null==this._client)throw new Error("client is null");var t={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"ControlTranscription",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()};this._client.send(JSON.stringify(t),!1)}},{key:"shutdown",value:function(){null!=this._client&&this._client.shutdown()}},{key:"sendAudio",value:function(e){return null!=this._client&&(this._client.send(e,!0),!0)}}]),t}()}).call(this,n(74))},2815:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(15),i=n(16),r=n(2840),o=function(){function e(t){Object(a.a)(this,e),this._config=t}return Object(i.a)(e,[{key:"start",value:function(e,t){var n=this;if("function"!==typeof e)throw new Error("expect function onmessage");if("function"!=typeof t)throw new Error("expect function onclose");return this._ws=new window.WebSocket("".concat(this._config.url,"?token=").concat(this._config.token.Id)),this._ws.onmessage=function(t,n){e(t,n)},this._ws.onclose=function(){t()},new Promise((function(e,t){n._ws.onopen=function(){e()},n._ws.onerror=function(e){t(e)}}))}},{key:"send",value:function(e,t){null!=this._ws&&this._ws.send(e,{binary:t})}},{key:"setPing",value:function(e,t){var n=this;this._ping=setInterval((function(){n._ws.ping(t)}),e)}},{key:"clearPing",value:function(){this._ping&&clearInterval(this._ping)}},{key:"shutdown",value:function(){null!=this._ws&&(null!=this._ping&&clearInterval(this._ping),this._ws.close())}},{key:"uuid",value:function(){return Object(r.a)().split("-").join("")}},{key:"defaultContext",value:function(){return{sdk:{name:"nls-nodejs-sdk",version:"0.0.1",language:"nodejs"}}}}]),e}()},2830:function(e,t,n){},2831:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return W})),n.d(t,"pluginComponent",(function(){return q})),n.d(t,"pluginConfig",(function(){return X}));var a=n(1),i=n(9),r=n(2),o=n(18),c=n(41),s=n.n(c),u=n(2566),d=n(2568),l=n(148),f=n(4),p=n(48),h=n(44),b=h.c.div.withConfig({displayName:"style",componentId:"sc-v12vir-0"})([".member-list{padding:10px;.member-item{display:flex;align-items:center;margin-bottom:5px;cursor:pointer;border-radius:4px;padding:0 5px;&:hover{background:#F9F9F9;}&.selected{background-color:#f5f9ff;}&.data-mention-item-active{background-color:#f5f9ff;}.info{padding-left:5px;width:170px;}.name,.department{width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.name{font-size:14px;color:#333;}.department{min-height:18px;font-size:12px;color:#999;}}}"]),v=n(2470),m=n.p+"static/media/default-avatar.c3d66646.svg",j=n(0),g=n(2455),O=n(6),y=function(e){var t=e.members,n=void 0===t?[]:t,a=e.bindItem,i=void 0===a?function(){}:a,r=Object(j.useState)(n),o=Object(f.a)(r,2),c=o[0],s=o[1],u=Object(j.useState)(""),d=Object(f.a)(u,2),l=d[0],h=d[1],y=Object(g.a)().t;Object(j.useEffect)((function(){Array.isArray(n)&&s(n)}),[n]);var x=Object(j.useCallback)((function(e){var t=c.find((function(t){return t.id===e.id}));h(t.id)}),[c]),w=Object(j.useCallback)((function(e){i(Object(v.a)("#user-".concat(e.id)),e)}),[i]);return Object(O.jsx)(b,{children:c.length>0?Object(O.jsx)("div",{className:"member-list",children:c.map((function(e){return Object(O.jsxs)("div",{id:"user-"+e.id,className:"member-item"+(l===e.id?" data-mention-item-active":""),onMouseEnter:function(){return x(e)},onLoad:function(){return w(e)},children:[Object(O.jsx)(p.a,{src:e.avatar||m,alt:e.name,size:32,className:"avatar",children:e.name}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"name",children:e.name}),Object(O.jsx)("div",{className:"department",children:e.department})]})]},e.id)}))}):Object(O.jsx)("div",{className:"empty-tip",children:y("NO_DATA_AVAILABLE")})})},x=n(211),w=n(15),k=n(16),C=n(29),N=n(2483),E=n(124),_=n(2467),S=n(76),T=n(539),D=n(698),I=n(12),R=n.n(I),A=h.c.div.withConfig({displayName:"style__ContainerWrap",componentId:"sc-m75m2r-0"})(["position:absolute;top:","px;left:","px;min-height:272px;width:240px;z-index:9999;background:#ffffff;border-radius:4px;box-shadow:0 15px 20px rgba(0,0,0,0.08);overflow:hidden;.avatar{position:relative;width:240px;height:240px;div{position:absolute;right:0;bottom:0;left:0;display:flex;align-items:end;justify-content:space-between;height:120px;padding:15px;background:linear-gradient(rgba(0,0,0,0) 0%,rgba(58,58,58,0.8) 100%);span{color:#ffffff;font-size:18px;}}img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}.name-avatar{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#fff;font-size:100px;}}.base-info{padding:5px 15px;p{height:27px;width:100%;margin-bottom:0;overflow:hidden;line-height:27px;white-space:nowrap;text-overflow:ellipsis;span:first-child{margin-right:15px;color:#999999;font-size:12px;}span:last-child{color:#333333;font-size:12px;}}}.btn{padding:5px 15px 12px;button{width:100%;}}"],(function(e){var t=e.top;return void 0===t?0:t}),(function(e){var t=e.left;return void 0===t?0:t})),M=new(Object(k.a)((function e(){var t=this;Object(w.a)(this,e),Object(a.a)(this,"data",{}),Object(a.a)(this,"getCache",(function(e,n){return e in t.data?t.data[e]:n})),Object(a.a)(this,"setCache",(function(e,n){t.data[e]=n}))})));function L(e){var t,n=e.stopRemove,a=e.remove,c=e.userId,s=e.left,u=void 0===s?0:s,d=e.top,p=void 0===d?0:d,h=Object(g.a)().t,b=Object(S.b)().Service,v=Object(j.useState)({}),m=Object(f.a)(v,2),y=m[0],x=m[1],w=Object(j.useState)(!0),k=Object(f.a)(w,2),C=k[0],N=k[1],I=Object(E.a)((function(){x((function(e){return Object(r.a)(Object(r.a)({},e),{},{avatar:""})}))})),R=Object(_.a)(b.Common.GetUserInfoByUserId,{manual:!0}).runAsync,L=Object(E.a)(Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=M.getCache("".concat(c)))){e.next=4;break}return N(!1),e.abrupt("return",x(t));case 4:return N(!0),e.next=7,R({user_ids:[c]});case 7:if(n=e.sent,a=n.code,r=n.data,1e3!==a){e.next=15;break}if(r[0]&&"0"!==r[0].id){e.next=13;break}return e.abrupt("return");case 13:x(r[0]),M.setCache("".concat(c),r[0]);case 15:N(!1);case 16:case"end":return e.stop()}}),e)}))));Object(j.useEffect)((function(){L()}),[]);var U=Object(j.useMemo)((function(){var e=Object(D.a)(null===y||void 0===y?void 0:y.real_name,T.a.length);return T.a[e]}),[null===y||void 0===y?void 0:y.real_name]);return Object(O.jsx)(A,{left:u,top:p,avatar:null===y||void 0===y?void 0:y.avatar,onMouseEnter:n,onMouseLeave:a,children:C?Object(O.jsx)(l.a,{show:!0}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"avatar",children:[y.avatar?Object(O.jsx)("img",{src:y.avatar,alt:(null===y||void 0===y?void 0:y.real_name)||"",onError:I}):Object(O.jsx)("div",{className:"name-avatar",style:{background:U},children:(null===y||void 0===y?void 0:y.real_name)&&(null===y||void 0===y||null===(t=y.real_name)||void 0===t?void 0:t.slice(-2))}),Object(O.jsx)("div",{children:Object(O.jsx)("span",{children:null===y||void 0===y?void 0:y.real_name})})]}),Object(O.jsxs)("div",{className:"base-info",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{children:h("DEPARTMENT_TEXT")}),Object(O.jsx)("span",{children:null===y||void 0===y?void 0:y.department})]}),null!==y&&void 0!==y&&y.position||null!==y&&void 0!==y&&y.job_position?Object(O.jsxs)("p",{children:[Object(O.jsx)("span",{children:h("POSITION")}),Object(O.jsx)("span",{children:(null===y||void 0===y?void 0:y.position)||(null===y||void 0===y?void 0:y.job_position)})]}):""]})]})})}var U=Object(j.memo)(L,(function(e,t){return R.a.isEqual(e,t)})),H=n(20),F=function(){function e(){Object(w.a)(this,e),Object(a.a)(this,"mountElement",null),Object(a.a)(this,"isStopRemove",!1),Object(a.a)(this,"openUserInfoModalTask",!1),Object(a.a)(this,"isLayout",!1)}return Object(k.a)(e,[{key:"openUserInfoModal",value:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,a,r,o,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.left,a=t.top,r=t.userId,o=t.layout,c=void 0===o?"":o,this.mountElement&&(this.isStopRemove=!1,this.removeUserInfoModal()),c?(this.mountElement=c,this.isLayout=!0):(this.mountElement=document.createElement("div"),document.body.appendChild(this.mountElement)),s.a.render(Object(O.jsx)(N.a,{children:Object(O.jsx)(U,{stopRemove:this.stopRemoveUserInfoModal.bind(this),remove:this.continueRemoveUserInfoModal.bind(this),left:n,top:a,userId:r})}),this.mountElement);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeUserInfoModal",value:function(){document.removeEventListener("click",this.handleMouseLeave),this.mountElement&&!this.isStopRemove&&(this.isLayout||document.body.removeChild(this.mountElement),this.mountElement=null)}},{key:"stopRemoveUserInfoModal",value:function(){this.isStopRemove=!0}},{key:"continueRemoveUserInfoModal",value:function(){this.isStopRemove=!1,this.removeUserInfoModal()}},{key:"handleMouseEnter",value:function(e,t){var n=C.a.getState().User,a=t.userId;if(n.info.id&&n.info.id!==H.a&&a!==H.a){this.handleMouseLeave=this.handleMouseLeave.bind(this),document.addEventListener("click",this.handleMouseLeave);var i=this;this.openUserInfoModalTask=setTimeout((function(){i.openUserInfoModal(e(t))}),400)}}},{key:"handleMouseLeave",value:function(){if(this.openUserInfoModalTask){var e=this;clearTimeout(this.openUserInfoModalTask),setTimeout((function(){e.removeUserInfoModal()}),400)}}}]),e}(),P=new F,z=n(287),B=n(93),W=[d.default],q=[u.default],X=Object(a.a)({},d.default.pluginName,{onSearch:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(z.a)("RECENTLY_SELECTED_MEMBERS"),t){e.next=3;break}return e.abrupt("return",new Promise((function(e){var t=[];try{t=JSON.parse(B.a.getOrganizationAppData(n)||"[]")}catch(o){console.error("\u6700\u8fd1\u9009\u8fc7\u7684\u7528\u6237\u89e3\u6790\u9519\u8bef\uff1a",o),t=[]}var a=(new Date).getTime(),i=a-864e5;t.length>0&&t[t.length-1].updatedAt<i?x.a["Common/GetMembersById"]({user_ids:t.map((function(e){var t;return null===e||void 0===e||null===(t=e.member)||void 0===t?void 0:t.id})).filter((function(e){return!!e}))}).then((function(i){var r=i.code,o=i.data;t=(1e3===r&&Array.isArray(o)?o:[]).map((function(e){return{member:{id:e.id,name:e.real_name,department:e.department,avatar:e.avatar,key:e.id},updatedAt:a}})),B.a.setOrganizationAppData(n,JSON.stringify(t)),e(t.map((function(e){return e.member})))})):e(t.map((function(e){return Object(r.a)(Object(r.a)({},e.member),{},{key:e.member.id})})))})));case 3:return e.abrupt("return",new Promise((function(e){x.a["Common/GetOrganization"]({name:t,disableLoad:!0}).then((function(t){var n=t.code,a=t.data,i=(1e3===n&&Array.isArray(a)?a:[]).map((function(e){return{member:{id:e.id,name:e.name,department:e.department,avatar:e.avatar,key:e.id}}}));i=i.slice(0,15),e(i.map((function(e){return e.member})))}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onRender:function(e,t,n){return new Promise((function(a){a(s.a.render(Object(O.jsx)(y,{members:t,bindItem:n}),e.get()))}))},onSelect:function(e){var t=Object(z.a)("RECENTLY_SELECTED_MEMBERS"),n=(new Date).getTime(),a=[];try{a=JSON.parse(B.a.getOrganizationAppData(t)||"[]")}catch(i){console.error("\u6700\u8fd1\u9009\u8fc7\u7684\u7528\u6237\u89e3\u6790\u9519\u8bef\uff1a",i),a=[]}-1===a.findIndex((function(t){var n;return(null===t||void 0===t||null===(n=t.member)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}))&&(a.push({member:e,updatedAt:n}),B.a.setOrganizationAppData(t,JSON.stringify(a)))},onLoading:function(e){return s.a.render(Object(O.jsx)(l.a,{}),e.get())},onEmpty:function(e){return s.a.render(Object(O.jsx)(p.g,{}),e.get())},onClick:function(){},onMouseEnter:function(e,t){var n=t.key;P.handleMouseEnter((function(e){return e}),{x:0,y:0,userId:n,layout:e.get()})}})},2833:function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return s})),n.d(t,"pluginComponent",(function(){return u})),n.d(t,"pluginConfig",(function(){return d}));var a=n(16),i=n(15),r=n(19),o=n(21),c=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n)}(n(2708).a),s=[c],u=[],d={}},2838:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n(0),r=n(2),o=n(23),c=n(2470),s=n(48),u=n(9),d=n(18),l=n(15),f=n(16),p=n(1),h=n(531),b=n(36),v=n(2526),m=n.n(v),j={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},g=function(e){if("string"===typeof e)return e.split(".").pop();var t=j[e.type]&&j[e.type][0];return!t&&e.name&&(t=e.name.split(".").pop()),t},O=n(2473),y=n(5),x=function(){function e(){Object(l.a)(this,e),Object(p.a)(this,"options",{}),Object(p.a)(this,"uploadingFiles",{}),this.getFileCDNUrl=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.generateUrl({files:t});case 2:if(1e3===(n=e.sent).code){e.next=6;break}return n.message&&s.r.warning(n.message),e.abrupt("return",{url:""});case 6:return(a=m()(n,"data[0]",{})).download=(null===a||void 0===a?void 0:a.url)||"",a.validTime=(new Date).getTime()+O.l,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(f.a)(e,[{key:"ajax",value:function(e){var t=this,n=e.success,a=e.error,i=e.data,r=[];fetch(null===i||void 0===i?void 0:i.url).then((function(e){return e.blob()})).then((function(e){if(e.size<=1)n({url:i.url});else{var a=(null===e||void 0===e?void 0:e.type.replace("/","."))||"image.png";r.push(new window.File([e],a)),h.a.upload({files:r,maxFileSize:Object(b.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")||5,success:function(){var e=Object(d.a)(Object(u.a)().mark((function e(a){var i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFileCDNUrl([a]);case 2:(i=e.sent).url&&n(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUpError:function(e){console.error("onUpError",e)}})}})).catch((function(e){a(e)}))}},{key:"upload",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t,n){var a,i,o,c,l=this;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options=t,this.uploadingFiles={},this.createUid=function(e){return Date.now()+"-"+e},!(n.length>9)){e.next=6;break}return s.r.error("".concat(y.c.t("MAXIMUM_NUMBER_OF_FILES_YOU_CAN_CHOOSE_AT_A_TIME"),"9\u4e2a\u6587\u4ef6\u4e0a\u4f20")),e.abrupt("return");case 6:this.handleBefore=function(e,t){var n=e.type,a=e.uid,i=e.name,r=e.size,o=g(e),c=l.options.onBefore;return(!c||!1!==c(e))&&new Promise((function(c,s){var u=new FileReader;u.addEventListener("load",(function(){l.uploadingFiles[a]={uid:a,src:u.result,name:i,size:r,type:n,ext:o},t.every((function(e){return!!l.uploadingFiles[e.uid]}))&&t.forEach((function(e){l.options.onReady&&l.options.onReady(l.uploadingFiles[e.uid],e)})),c(!0)}),!1),u.addEventListener("error",(function(){s(!1)})),u.readAsDataURL(e)}))},a=0;case 8:if(!(a<n.length)){e.next=19;break}return(i=n[a]).uid||(i.uid=this.createUid(a)),e.next=13,this.handleBefore(i,n);case 13:if(e.t0=e.sent,!1!==e.t0){e.next=16;break}n.splice(a,1);case 16:a++,e.next=8;break;case 19:o=Object(r.a)(Object(r.a)({},t),{},{files:n,maxFileSize:Object(b.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")||5}),t.onUploading&&(o.progress=t.onUploading),t.onSuccess&&(o.success=function(){var e=Object(d.a)(Object(u.a)().mark((function e(n){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getFileCDNUrl([n]);case 2:(a=e.sent).url&&t.onSuccess(a,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=n.map((function(e){return h.a.upload(Object(r.a)(Object(r.a)({},o),{},{files:[e]}))})),Promise.all(c);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFileCDNUrlHandle",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){h.a.generateUrl({files:t}).then((function(t){1e3!==t.code&&(t.message&&s.r.warning(t.message),n({url:""}));var a=m()(t,"data[0]",{});a.download=(null===a||void 0===a?void 0:a.url)||"",a.validTime=(new Date).getTime()+O.l,e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w=n(6),k=["onChange"],C=Object(i.forwardRef)((function(e,t){var n=e.onChange,a=Object(o.a)(e,k),r=Object(i.useRef)(null),u=Object(i.useRef)(null);return Object(i.useEffect)((function(){return function(){var e;null===(e=u.current)||void 0===e||e.destroy()}}),[]),Object(i.useEffect)((function(){var e,t=function(e,t){n&&n(e,t)};return null===(e=u.current)||void 0===e||e.on("change",t),function(){var e;null===(e=u.current)||void 0===e||e.off("change",t)}}),[n]),Object(i.useImperativeHandle)(t,(function(){return function(){if(!r.current)return null;var e=new c.M(r.current,a),t=new x;return e.request.upload=t.upload,e.request.ajax=t.ajax,e.request.getFileCDNUrl=t.getFileCDNUrlHandle,e.messageSuccess=function(e){s.r.success(e)},e.messageError=function(e){s.r.error(e)},e.messageConfirm=function(e,t){return console.error("--message--",e,t),new Promise((function(e,t){t()}))},u.current=e,e}()}),[]),Object(w.jsx)("div",{className:"engine-container",ref:r,"data-template-cover-screenshot":"CLOUD_DOCX",style:{fontSize:16}})})),N=n(11),E=n(2527),_=n(19),S=n(21),T=function(e){Object(_.a)(n,e);var t=Object(S.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"init",value:function(){}},{key:"execute",value:function(e){var t=this.options.onClick,n=void 0===t?function(){}:t;n(e)}}],[{key:"pluginName",get:function(){return"comment-section"}}]),n}(c.v),D=[T].concat(Object(N.a)(E.Plugins)),I=Object(N.a)(E.Cards),R=Object(r.a)({},E.PluginsConfig),A=n(14),M=n.n(A),L=n(2553),U=n(44),H=U.c.div.withConfig({displayName:"style",componentId:"sc-un30jg-0"})(["position:fixed;z-index:4;top:0;left:0;padding-left:0px;padding-top:60px;margin-bottom:-64px;padding-bottom:64px;.data-toc-title{position:relative;display:flex;justify-content:space-between;margin-bottom:10px;padding:0 2px 8px;font-weight:700;font-size:14px;.toc-name{padding-left:20px;color:#333333;font-weight:600;font-size:16px;}.icon{display:none;width:20px;height:20px;cursor:pointer;svg{width:100%;height:100%;}}}.data-toc{max-height:calc(100vh - 209px);overflow-y:scroll;color:#646a73;scrollbar-width:0;::-webkit-scrollbar{display:none;}",";&.is-hide{.data-toc-item{display:table;border-bottom:2px solid #eeeeee;border-left:none;}.data-toc-item-active{border-color:#fff;border-bottom:4px solid ",";}}&.is-enter{.icon{display:block;}.data-toc-item{display:block;border-bottom:none;}.data-toc-item-active{border-color:#3b81f7;}::-webkit-scrollbar{display:block;}}}.is-enter{.icon{display:block;}::-webkit-scrollbar{display:block;}}.data-toc .data-toc-item{display:block;height:22px;margin-bottom:6px;padding-left:10px;overflow:hidden;color:inherit;font-size:12px;line-height:22px;white-space:nowrap;text-overflow:ellipsis;border-left:4px solid #fff;"," color:#333333;}.data-toc .data-toc-item-active,.data-toc .data-toc-item:hover,.data-toc .data-toc-item:focus{position:relative;color:",";text-decoration:none;}.data-toc .data-toc-item-active{border-color:#3b81f7;}.data-toc .data-toc-item-2{padding-left:20px;}.data-toc .data-toc-item-3{padding-left:30px;}.data-toc .data-toc-item-4{padding-left:40px;}.data-toc .data-toc-item-5{padding-left:50px;}.data-toc .data-toc-item-6{padding-left:50px;}.data-toc .data-toc-item-7{padding-left:50px;}.data-toc .data-toc-item-8{padding-left:50px;}.data-toc .data-toc-item-9{padding-left:50px;}&.knowledge-base-preview{width:25% !important;max-width:25% !important;&.is-hide{right:10px;left:auto !important;width:auto !important;}&.is-hide-enter{width:25% !important;}.data-toc{&.is-hide{text-align:-webkit-right;}&.is-enter{text-align:left;}}}"],(function(e){return e.theme.scrollbar(4,4,"#FFF")}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_blue})),F=(n(2598),n(55)),P=n(2455),z=new L.a,B=function(e){var t=e.style,n=e.editor,o=e.isKnowledgeBasePreview,u=Object(i.useRef)(null),d=Object(P.a)().t,l=Object(i.useState)([]),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(i.useState)(-1),v=Object(a.a)(b,2),m=v[0],j=v[1],g=Object(i.useState)(!1),y=Object(a.a)(g,2),x=y[0],k=y[1],C=Object(i.useState)(!1),N=Object(a.a)(C,2),E=N[0],_=N[1],S=Object(i.useState)(!1),T=Object(a.a)(S,2),D=T[0],I=T[1],R=Object(i.useState)({}),A=Object(a.a)(R,2),L=A[0],U=A[1],B=Object(i.useState)(!1),W=Object(a.a)(B,2),q=W[0],X=W[1],V=Object(i.useState)(""),G=Object(a.a)(V,2),Y=G[0],K=G[1],$=Object(i.useState)("auto"),J=Object(a.a)($,2),Z=J[0],Q=J[1],ee=Object(i.useCallback)((function(){var e=[],t=n.card;return n.container.find("h1,h2,h3,h4,h5,h6,h7,h8,h9").each((function(n){var a,i=Object(c.a)(n);t.closest(i)||null!==(a=i.parent())&&void 0!==a&&a.isRoot()&&e.push(i.get())})),z.normalize(e)}),[n]);Object(i.useEffect)((function(){var e=function(){var e=ee();h(e)};e();var t=window.location.hash.indexOf("?");return K(window.location.hash.slice(1,t)),n.on("change",e),function(){n.off("change",e)}}),[n,ee]),Object(i.useEffect)((function(){var e;Y&&!q&&document.querySelector(".data-toc-hid-".concat(Y))&&(X(!0),null===(e=document.querySelector(".data-toc-hid-".concat(Y)))||void 0===e||e.click())}),[p,q,Y]);var te=Object(i.useCallback)((function(){var e,t=function(e,t){if(t=t||0,!e||0===e.length)return-1;for(var n=0,a=-1,i=e.length;n<i;n++){var r=e[n];if(r&&r.getBoundingClientRect){var o=r.getBoundingClientRect();if(0!==o.height&&o.top<=t+1)if(n===i-1)a=n;else{var c=e[n+1];if(!c||!c.getBoundingClientRect)continue;if(c.getBoundingClientRect().top>t+1){a=n;break}}}}return a}(p.map((function(e){var t=e.id;return document.getElementById(t)})).filter((function(e){return null!==e})),135);if(j(t),null!==u&&void 0!==u&&u.current){var n=null===u||void 0===u?void 0:u.current,a=n.scrollTop,i=n.offsetHeight,r=(null===u||void 0===u||null===(e=u.current.querySelector(".data-toc-item-active"))||void 0===e?void 0:e.offsetTop)||0;r-a>=i?document.querySelector(".doc-nav .data-toc").scrollTop=a+i/2:r<=a&&(document.querySelector(".doc-nav .data-toc").scrollTop=a-i/2)}}),[p]);Object(i.useEffect)((function(){var e,t;Object(c.X)(n)?(null===(e=n.scrollNode)||void 0===e||e.on("scroll",te),null===(t=n.scrollNode)||void 0===t||t.on("resize",te)):(window.addEventListener("scroll",te),window.addEventListener("resize",te));return function(){var e,t;Object(c.X)(n)?(null===(e=n.scrollNode)||void 0===e||e.off("scroll",te),null===(t=n.scrollNode)||void 0===t||t.off("resize",te)):(window.removeEventListener("scroll",te),window.removeEventListener("resize",te))}}),[n,te]);var ne=Object(i.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var a=window.location.href.split("#")[0]+"#"+t;window.location.replace(a),window.history.replaceState(null,document.title,a);var i=p.map((function(e,n){return e.id===t?n:-1})).filter((function(e){return-1!==e})).pop();setTimeout((function(){j(null!==i&&void 0!==i?i:0)})),n.container.find("#".concat(t)).addClass("is-hover"),setTimeout((function(){n.container.find("#".concat(t)).removeClass("is-hover")}),1e3)}),[p,n.container]),ae=Object(i.useCallback)((function(){D?U(Object(r.a)(Object(r.a)({},t),{},{width:Z})):(k(!1),_(!1),U(Object(r.a)(Object(r.a)({},t),{},{width:"auto"}))),I(!D)}),[D,t,Z]);return Object(i.useEffect)((function(){U(t),Q(t.width),(null===t||void 0===t?void 0:t.offsetLeft)<=O.e.minWidth?D||ae():(null===t||void 0===t?void 0:t.offsetLeft)>O.e.minWidth&&D&&ae()}),[t]),0===p.length?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(H,{className:M()("doc-nav",{"knowledge-base-preview":o,"is-hide":D,"is-hide-enter":E}),style:Object(r.a)(Object(r.a)({},L),o&&{left:L.editorWidth}),onMouseLeave:function(){k(!1),_(!1),D&&U(Object(r.a)(Object(r.a)({},t),{},{width:"auto"}))},onMouseEnter:function(){(null===t||void 0===t?void 0:t.offsetLeft)<=O.e.minWidth||(k(!0),_(!0),D&&U(Object(r.a)(Object(r.a)({},t),{},{width:Z})))},children:[Object(w.jsxs)("div",{className:M()("data-toc-title",{"is-hide":D,"is-enter":x,"is-hide-enter":E}),children:[(!D||E)&&Object(w.jsx)("div",{className:"toc-name",children:d("TABLE_OF_CONTENTS_NAVIGATION")}),D&&E?Object(w.jsx)(s.q,{title:d("SHOW_CONTENTS_NAVIGATION"),children:Object(w.jsx)(F.a,{type:"ts-pushpin-fixed",className:"icon",onClick:ae})}):Object(w.jsx)(s.q,{title:d("HIDE_CONTENTS_NAVIGATION"),children:Object(w.jsx)(F.a,{type:"ts-pushpin-stow",className:"icon",onClick:ae})})]}),Object(w.jsx)("div",{className:M()("data-toc",{"is-enter":x,"is-hide":D,"is-hide-enter":E}),ref:u,children:p.map((function(e,t){return Object(w.jsx)("a",{onClick:function(t){return ne(t,e.id)},className:M()("data-toc-item data-toc-item-".concat(e.depth," data-toc-hid-").concat(e.id),{"data-toc-item-active":t===m}),children:(!D||E)&&e.text},e.id)}))})]})},W=n(157),q=U.c.div.withConfig({displayName:"style",componentId:"sc-gncb21-0"})(["position:absolute;left:30px;top:0;.kee-icon{width:20px;height:20px;cursor:grab;svg{width:100%;height:100%;}&.action{svg{fill:",";}}}"],(function(e){return e.theme.c_blue})),X=n(2480),V=U.c.div.withConfig({displayName:"style__EditRowMenuStyle",componentId:"sc-11fnqt1-0"})(["",";width:238px;.title{",";margin:10px 0 5px;padding-left:16px;color:",";}.editor-toolbar-content,.editor-toolbar-group{display:inherit !important;}.toolbar-row-menu{margin-bottom:10px;padding-left:16px;border:none;box-shadow:none;.editor-toolbar-group{padding:0;text-align:left;}.toolbar-button{width:24px;min-width:24px;height:24px;margin-right:10px !important;padding:0 !important;line-height:24px;&:nth-child(6n){margin-right:0px;}}}.icon{width:24px;height:24px;svg{width:100%;height:100%;fill:",";}}.action-list{margin-bottom:12px;.item{display:flex;align-items:center;height:38px;padding-left:16px;cursor:pointer;"," &:hover{background-color:",";}.icon{width:20px;height:20px;margin-right:7px;svg{width:100%;height:100%;}}.copylink{svg{fill:",";}}.cut{svg{fill:",";}}.copy{svg{fill:",";}}.delete{svg{fill:",";}}}}"],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_text_lv1}),(function(e){return e.theme.c_text_lv0}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_other_lv2}),(function(e){return e.theme.c_yellow}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_orange}),(function(e){return e.theme.c_red})),G=U.c.div.withConfig({displayName:"style__AddRowMenuStyle",componentId:"sc-11fnqt1-1"})(["",";width:238px;height:480px;overflow-y:scroll;padding-bottom:10px;",";.title{",";margin:10px 0 5px;padding-left:16px;color:",";}.editor-toolbar-content,.editor-toolbar-group{display:inherit !important;}.toolbar-row-menu{margin-bottom:10px;padding-left:16px;border:none;box-shadow:none;.editor-toolbar-group{padding:0;text-align:left;}.toolbar-button{width:24px;min-width:24px;height:24px;margin-right:10px !important;padding:0 !important;line-height:24px;&:nth-child(6n){margin-right:0px;}}}.icon{width:24px;height:24px;svg{width:100%;height:100%;fill:",";}}.arrow{}.action-list{.item{display:flex;align-items:center;height:38px;padding-left:16px;font-weight:500;cursor:pointer;",";&:hover{background-color:",";}.name{flex:1;",";}.icon{width:20px;height:20px;margin-right:7px;svg{width:100%;height:100%;fill:#595959;}}}}"],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.scrollbar(4,4,"#FFF")}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_text_lv1}),(function(e){return e.theme.c_text_lv0}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_other_lv2}),(function(e){return e.theme.f_default})),Y=U.c.div.withConfig({displayName:"style__SelectionMenuStyle",componentId:"sc-11fnqt1-2"})(["",";padding:5px 10px;.editor-toolbar{position:inherit;}.selection-menu{border:none;box-shadow:none;.editor-toolbar-group{margin:0;padding:0;text-align:left;",";}.toolbar-button{width:24px;min-width:24px !important;height:24px;margin-right:6px !important;padding:0 !important;line-height:24px;}.toolbar-action-more{width:40px;margin-right:5px;.toolbar-button{width:100%;text-align:left;}}.toolbar-dropdown .toolbar-dropdown-trigger{display:flex;}.data-icon-arrow{position:absolute;left:32px;}.toolbar-action-more.center{.toolbar-button{text-align:center;}}}.toolbar-dropdown-list{",";padding-left:10px !important;.toolbar-dropdown-list-item{margin-right:10px;padding:0 !important;line-height:normal !important;text-align:center;border-radius:4px;",";",";}}.icon{width:24px;height:24px;svg{width:100%;height:100%;fill:",";}}.toolbar-comment{margin-right:0 !important;margin-left:10px !important;}"],(function(e){return e.theme.popupMenu}),(function(e){return e.theme.center}),(function(e){return e.theme.center}),(function(e){return e.theme.center}),(function(e){return e.theme.center}),(function(e){return e.theme.c_text_lv0}));function K(e,t){return Object(r.a)({type:"button",name:"h1",icon:"h1",onDisabled:function(){return!1},onActive:function(){return!1},command:{name:"heading",args:["h1"]}},t)}var $=function(e){var t=e.language.get("toolbar"),n=t.heading;return[[{type:"button",name:"h1",icon:Object(w.jsx)(F.a,{type:"ts-h1",className:"icon"}),title:n.h1,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h1$/.test(t)},command:{name:"heading",args:["h1"]}},K(0,{name:"h2",hotkey:"mod+opt+2",icon:Object(w.jsx)(F.a,{type:"ts-h2",className:"icon"}),title:n.h2,onActive:function(){var t=e.command.queryState("heading")||"p";return/^h2$/.test(t)},command:{name:"heading",args:["h2"]}}),K(0,{name:"h3",hotkey:"mod+opt+3",icon:Object(w.jsx)(F.a,{type:"ts-h3",className:"icon"}),title:n.h3,onActive:function(){var t=e.command.queryState("heading")||"p";return/^h3$/.test(t)},command:{name:"heading",args:["h3"]}}),K(0,{name:"h4",hotkey:"mod+opt+4",icon:Object(w.jsx)(F.a,{type:"ts-h4",className:"icon"}),title:n.h4,command:{name:"heading",args:["h4"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h4$/.test(t)}}),K(0,{name:"h5",hotkey:"mod+opt+5",icon:Object(w.jsx)(F.a,{type:"ts-h5",className:"icon"}),title:n.h5,command:{name:"heading",args:["h5"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h5$/.test(t)}}),K(0,{name:"h6",hotkey:"mod+opt+6",icon:Object(w.jsx)(F.a,{type:"ts-h6",className:"icon"}),title:n.h6,command:{name:"heading",args:["h6"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h6$/.test(t)}}),{type:"button",name:"hr",icon:Object(w.jsx)(F.a,{type:"ts-separator",className:"icon"}),title:t.hr.title},{type:"button",name:"tasklist",icon:Object(w.jsx)(F.a,{type:"ts-checkbox",className:"icon"}),title:t.tasklist.title},{type:"button",name:"quote",icon:Object(w.jsx)(F.a,{type:"ts-quote",className:"icon"}),title:t.quote.title},{type:"button",name:"left",icon:Object(w.jsx)(F.a,{type:"ts-align-left",className:"icon"}),title:t.alignment.left,command:{name:"alignment",args:["left"]},onDisabled:function(){return"left"===e.command.queryState("alignment")},onActive:function(){return!1}},{type:"button",name:"center",icon:Object(w.jsx)(F.a,{type:"ts-align-center",className:"icon"}),title:t.alignment.center,command:{name:"alignment",args:["center"]},onDisabled:function(){return"center"===e.command.queryState("alignment")},onActive:function(){return!1}},{type:"button",name:"right",icon:Object(w.jsx)(F.a,{type:"ts-align-right",className:"icon"}),title:t.alignment.right,command:{name:"alignment",args:["right"]},onDisabled:function(){return"right"===e.command.queryState("alignment")},onActive:function(){return!1}},{type:"button",name:"justify",icon:Object(w.jsx)(F.a,{type:"ts-align-justify",className:"icon"}),title:t.alignment.justify,command:{name:"alignment",args:["justify"]},onDisabled:function(){return"justify"===e.command.queryState("alignment")},onActive:function(){return!1}}]]};var J=function(e){var t=e.engine,n=e.isHeading,a=e.setIsAction;return Object(w.jsxs)(V,{children:[Object(w.jsx)("div",{className:"title",children:y.c.t("STYLE")}),Object(w.jsx)(X.c,{className:"toolbar-row-menu",engine:t,items:$(t)}),Object(w.jsx)("div",{className:"title",children:y.c.t("OPERATION")}),Object(w.jsxs)("div",{className:"action-list",children:[n&&Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(!document.queryCommandSupported("copy"))return!1;var n=document.createElement("input");return n.setAttribute("value",t),n.setAttribute("class","copy-page-link"),n.style.cssText="position: absolute; top: -10000px; left: -10000px;",document.body.appendChild(n),n.setAttribute("readonly",""),n.select(),document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return!1}}(t)?s.r.success(y.c.t("CURRENT_BROWSER_DOES_NOT_SUPPORT_THIS_FEATURE")):s.r.success(y.c.t("COPY_SUCCESSFUL"))}("".concat(window.location.href.split("#")[0],"#").concat(Object(c.a)(t.container.find(".is-hover").get()).attributes("id"))),a(!1)},children:[Object(w.jsx)(F.a,{type:"ts-link",className:"icon copylink"}),y.c.t("COMMENTARY_STATUS")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),function(){var e=t.container.find(".is-hover").get();t.change.range.get().select(e),t.clipboard.copy(e),t.clipboard.cut(),s.r.success(y.c.t("CUT_SUCCESSFUL"))}(),a(!1)},children:[Object(w.jsx)(F.a,{type:"ts-cut",className:"icon cut"}),y.c.t("DOCX_CUT")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),t.clipboard.copy(t.container.find(".is-hover").get()),s.r.success(y.c.t("COPY_SUCCESSFUL")),a(!1)},children:[Object(w.jsx)(F.a,{type:"ts-copy",className:"icon copy"}),y.c.t("DOCX_COPY")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),function(){var e=t.change.range.get(),n=t.container.find(".is-hover").get();e.select(n),t.clipboard.cut(),s.r.success(y.c.t("DELETION_SUCCESSFUL"))}(),a(!1)},children:[Object(w.jsx)(F.a,{type:"ts-trash",className:"icon delete"}),y.c.t("DOCX_DELETE")]})]}),Object(w.jsx)("div",{className:"line"})]})},Z=U.c.div.withConfig({displayName:"style",componentId:"sc-4zi8hl-0"})([".title{font-size:12px;}.data-toolbar-table-selector .data-toolbar-table-selector-tr{display:flex;flex-wrap:nowrap;}.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td{width:20px;height:16px;margin-right:-1px;margin-bottom:-1px;border:1px solid #d9d9d9;cursor:pointer;}.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td.actived{background:#ddefff;}.data-toolbar-table-selector .data-toolbar-table-selector-info{text-align:center;}"]),Q=n(331),ee=function(e){var t=Object(i.useState)(e.maxRows||10),n=Object(a.a)(t,1)[0],r=Object(i.useState)(e.maxCols||10),o=Object(a.a)(r,1)[0],c=Object(i.useState)(e.minRows||10),s=Object(a.a)(c,1)[0],u=Object(i.useState)(e.minCols||10),d=Object(a.a)(u,1)[0],l=Object(i.useState)(10),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(i.useState)(10),v=Object(a.a)(b,2),m=v[0],j=v[1],g=Object(i.useState)(0),O=Object(a.a)(g,2),y=O[0],x=O[1],k=Object(i.useState)(0),C=Object(a.a)(k,2),N=C[0],E=C[1],_=function(t,a){for(var i=[],r=function(a){var r=Object(Q.a)({"data-toolbar-table-selector-td":!0,actived:t<y&&a<N});i.push(Object(w.jsx)("div",{className:r,onMouseDown:function(n){return function(t,n,a){e.onSelect(t,n+1,a+1)}(n,t,a)},onMouseOver:function(){return function(e,t){var a=Math.max(s,Math.min(n,e+2)),i=Math.max(d,Math.min(o,t+2));h(a),j(i),x(e+1),E(t+1)}(t,a)}},a))},c=0;c<a;c++)r(c);return i},S=void 0===y?0:y,T=void 0===N?0:N;return Object(w.jsx)(Z,{children:Object(w.jsxs)("div",{className:"data-toolbar-table-selector","data-element":"ui",children:[function(e,t){for(var n=[],a=0;a<e;a++)n.push(Object(w.jsx)("div",{className:"data-toolbar-table-selector-tr",children:_(a,t)},a));return n}(p,m),Object(w.jsxs)("div",{className:"data-toolbar-table-selector-info",children:[S,"x",T]})]})})},te=function(e){var t=e.language.get("toolbar"),n=t.heading;return[[{type:"button",name:"h1",icon:Object(w.jsx)(F.a,{type:"ts-h1",className:"icon"}),title:n.h1,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h1$/.test(t)},command:{name:"heading",args:["h1"]}},{type:"button",name:"h2",hotkey:"mod+opt+2",icon:Object(w.jsx)(F.a,{type:"ts-h2",className:"icon"}),title:n.h2,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h2$/.test(t)},command:{name:"heading",args:["h2"]}},{type:"button",name:"h3",hotkey:"mod+opt+3",icon:Object(w.jsx)(F.a,{type:"ts-h3",className:"icon"}),title:n.h3,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h3$/.test(t)},command:{name:"heading",args:["h3"]}},{type:"button",name:"h4",hotkey:"mod+opt+4",icon:Object(w.jsx)(F.a,{type:"ts-h4",className:"icon"}),title:n.h4,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h4$/.test(t)},command:{name:"heading",args:["h4"]}},{type:"button",name:"h5",hotkey:"mod+opt+5",icon:Object(w.jsx)(F.a,{type:"ts-h5",className:"icon"}),title:n.h5,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h5$/.test(t)},command:{name:"heading",args:["h5"]}},{type:"button",name:"h6",hotkey:"mod+opt+6",icon:Object(w.jsx)(F.a,{type:"ts-h6",className:"icon"}),title:n.h6,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h6$/.test(t)},command:{name:"heading",args:["h6"]}},{type:"button",name:"hr",icon:Object(w.jsx)(F.a,{type:"ts-separator",className:"icon"}),title:t.hr.title},{type:"button",name:"tasklist",icon:Object(w.jsx)(F.a,{type:"ts-checkbox",className:"icon"}),title:t.tasklist.title},{type:"button",name:"quote",icon:Object(w.jsx)(F.a,{type:"ts-quote",className:"icon"}),title:t.quote.title}]]},ne=function(e){var t=e.engine,n=e.setIsAction;return Object(w.jsxs)(G,{children:[Object(w.jsx)("div",{className:"title",children:y.c.t("STYLE")}),Object(w.jsx)(X.c,{className:"toolbar-row-menu",engine:t,items:te(t)}),Object(w.jsx)("div",{className:"title",children:y.c.t("GENERAL")}),Object(w.jsxs)("div",{className:"action-list",children:[Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){var a;e.preventDefault(),e.stopPropagation(),n(!1),(a=t.command).execute.apply(a,["image-uploader"].concat([]))},children:[Object(w.jsx)(F.a,{type:"ts-image",className:"icon img"}),y.c.t("DOCX_IMAGE")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){var a;e.preventDefault(),e.stopPropagation(),n(!1),(a=t.command).execute.apply(a,["video-uploader"].concat([]))},children:[Object(w.jsx)(F.a,{type:"ts-play-circle",className:"icon video"}),y.c.t("DOCX_VIDER")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){var a;e.preventDefault(),e.stopPropagation(),n(!1),(a=t.command).execute.apply(a,["audio-uploader"].concat([]))},children:[Object(w.jsx)(F.a,{type:"ts-audio",className:"icon audio"}),y.c.t("DOCX_AUDIO")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){var a;e.preventDefault(),e.stopPropagation(),n(!1),(a=t.command).execute.apply(a,["file-uploader"].concat([]))},children:[Object(w.jsx)(F.a,{type:"ts-attachment",className:"icon file"}),y.c.t("DOCX_ATTACHMENT")]}),Object(w.jsx)(s.k,{placement:"right",title:y.c.t("INSERT_TABLE_SUPPORTING_RICH_TEXT"),content:function(){return t.card.active||!t.command.queryEnabled("table")?"":Object(w.jsx)(ee,{onSelect:function(e,a,i){n(!1),t.command.execute("table",a,i)}})},trigger:"hover",children:Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)(F.a,{type:"ts-table",className:"icon table"}),Object(w.jsx)("div",{className:"name",children:y.c.t("DOCX_TABLE")}),Object(w.jsx)(F.a,{type:"ts-arrow-right",className:"icon arrow"})]})}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("codeblock")},children:[Object(w.jsx)(F.a,{type:"ts-code-block",className:"icon"}),y.c.t("CODE_BLOCK")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("flowchart",[])},children:[Object(w.jsx)(F.a,{type:"ts-flowchart",className:"icon flow"}),y.c.t("DOCX_FLOWCHART")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("uml-plugin",[])},children:[Object(w.jsx)(F.a,{type:"ts-uml",className:"icon uml-icon"}),y.c.t("DOCX_UML")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("math")},children:[Object(w.jsx)(F.a,{type:"ts-tex",className:"icon gs"}),y.c.t("DOCX_LATEX")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("web-card",[])},children:[Object(w.jsx)(F.a,{type:"ts-window",className:"icon web-card"}),y.c.t("DOCX_WEB_CARD")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("embed")},children:[Object(w.jsx)(F.a,{type:"ts-window",className:"icon"}),y.c.t("DOCX_WEB_EMBED")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("link",[])},children:[Object(w.jsx)(F.a,{type:"ts-link",className:"icon link"}),y.c.t("DOCX_LINK")]}),Object(w.jsxs)("div",{className:"item",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),n(!1),t.command.execute("status",[])},children:[Object(w.jsx)(F.a,{type:"ts-tag",className:"icon status"}),y.c.t("STATUS")]})]}),Object(w.jsx)("div",{className:"line"})]})},ae=["add-menu","edit-menu"],ie=Object(i.forwardRef)((function(e,t){var n=Object.assign({},(Object(W.a)(e),e)),r=Object(i.useState)(!1),o=Object(a.a)(r,2),u=o[0],d=o[1],l=Object(i.useState)(""),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(i.useState)(0),v=Object(a.a)(b,2),m=v[0],j=v[1],g=Object(i.useState)(null),O=Object(a.a)(g,2),y=O[0],x=O[1],k=Object(i.useState)(!1),C=Object(a.a)(k,2),N=C[0],E=C[1],_=n.engine,S=Object(i.useCallback)((function(){Object(c.a)(y).addClass("is-hover"),_.change.range.get().select(y,!0).collapse(!1).shrinkToElementNode().shrinkToTextNode(),E(["h1","h2","h3","h4","h5","h6","h7","h8","h9"].includes(null===y||void 0===y?void 0:y.name))}),[y,_]),T=Object(i.useCallback)((function(){Object(c.a)(y).removeClass("is-hover")}),[y]);Object(i.useEffect)((function(){u?S():T()}),[u]);var D=Object(i.useCallback)((function(e){var t="string"===typeof e?_.container.get().querySelector(e):e.get();if(!t)return-1;for(var n=0;t&&!_.root.equal(t);){var a=t.getBoundingClientRect(),i=t.parentElement;if(!i)break;var r=i.getBoundingClientRect();n+=a.top-r.top,t=i}var o=null===e||void 0===e?void 0:e.height();return n+(o>15?(o-24)/2:0)}),[_]);var I=function(e){var t=function(e){var t,n,a=!1,i=0,r=e,o=e;do{var c,s,u;i&&(r=null===(s=r)||void 0===s?void 0:s.parent()),i++,null!==(u=r)&&void 0!==u&&u.attributes("data-card-value")&&(a=!0)}while((null===(c=r)||void 0===c||!c.attributes("data-id"))&&r);i=0;do{var d,l;i&&(o=null===(l=o)||void 0===l?void 0:l.parent()),i++}while((null===(d=o)||void 0===d||!d.attributes("data-card-value"))&&o);return null!==(t=o)&&void 0!==t&&t.attributes("data-card-value")&&"checkbox"!==(null===(n=o)||void 0===n?void 0:n.attributes("data-card-key"))&&(a=!0),{isJsonComponent:a,pNode:r}}(e),n=t.isJsonComponent,a=t.pNode;if(["am-engine","editor-wrapper","row-menu-layer","row-select-menu-layer"].includes(null===a||void 0===a?void 0:a.attributes("class")))return!1;if(["svg","use","ul","ol","blockquote","td"].includes(null===a||void 0===a?void 0:a.name))return!1;if(n&&!["data-list-item"].includes(null===a||void 0===a?void 0:a.attributes("class")))return R(),!1;if(u)return!1;if(null===a||void 0===a||!a.attributes("data-id"))return!1;if((null===y||void 0===y?void 0:y.attributes("data-id"))===(null===a||void 0===a?void 0:a.attributes("data-id"))&&p)return!1;var i=D(a),r=function(e){var t,n=null===e||void 0===e||null===(t=e.text())||void 0===t?void 0:t.trim();return["\u200b"].includes(n)?"add-menu":n?ae[1]:ae[0]}(a);h(r),j(i),T(y),x(a)},R=function(){h(""),d(!1)},A=function(){return u},M=function(e){m&&y&&h(e?ae[0]:ae[1])};return Object(i.useImperativeHandle)(t,(function(){return{show:I,hide:R,onChangeHandle:M,getIsAction:A}})),Object(w.jsx)(q,{className:"row-menu-layer",style:{top:m,display:p?"block":"none"},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(e){e.preventDefault(),e.stopPropagation()},children:Object(w.jsx)(s.f,{dropdownRender:function(){return"edit-menu"===p?Object(w.jsx)(J,{engine:_,isHeading:N,setIsAction:d}):Object(w.jsx)(ne,{engine:_,setIsAction:d})},onOpenChange:function(e){d(e)},open:u,placement:"bottomRight",children:Object(w.jsx)(F.a,{className:"kee-icon".concat(u?" action":""),type:"edit-menu"===p?"ts-more-line":"ts-add-line"})})})})),re=U.c.div.withConfig({displayName:"style",componentId:"sc-18brqil-0"})(["position:absolute;left:0px;top:0px;.editor-toolbar{position:inherit !important;}"]),oe=function(e){var t=e.language.get("toolbar"),n=t.heading;return[[{type:"button",name:"h1",icon:Object(w.jsx)(F.a,{type:"ts-h1",className:"icon"}),title:n.h1,onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h1$/.test(t)},command:{name:"heading",args:["h1"]}},{type:"button",name:"h2",icon:Object(w.jsx)(F.a,{type:"ts-h2",className:"icon"}),title:n.h2,hotkey:"mod+opt+2",onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h2$/.test(t)},command:{name:"heading",args:["h2"]}},{type:"button",name:"h3",hotkey:"mod+opt+3",icon:Object(w.jsx)(F.a,{type:"ts-h3",className:"icon"}),title:n.h3,command:{name:"heading",args:["h3"]},placement:"bottom",onDisabled:function(){return!1},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h3$/.test(t)}},{type:"dropdown",className:"toolbar-action-more",name:"heading-more",content:Object(w.jsx)(F.a,{type:"ts-hn",className:"icon"}),onDisabled:function(){return!1},onActive:function(){return!1},title:"H4 ~ H9",items:[{key:"h4",className:"heading-item-h4",content:Object(w.jsx)(F.a,{type:"ts-h4",className:"icon"}),title:n.h4,command:{name:"heading",args:["h4"]},placement:"bottom",onActive:function(){var t=e.command.queryState("heading")||"p";return/^h4$/.test(t)}},{key:"h5",className:"heading-item-h5",content:Object(w.jsx)(F.a,{type:"ts-h5",className:"icon"}),title:n.h5,command:{name:"heading",args:["h5"]},placement:"bottom",onActive:function(){var t=e.command.queryState("heading")||"p";return/^h5$/.test(t)}},{key:"h6",className:"heading-item-h6",content:Object(w.jsx)(F.a,{type:"ts-h6",className:"icon"}),title:n.h6,command:{name:"heading",args:["h6"]},placement:"bottom",onActive:function(){var t=e.command.queryState("heading")||"p";return/^h6$/.test(t)}},{key:"h7",className:"heading-item-h6",content:Object(w.jsx)(F.a,{type:"ts-h7",className:"icon"}),title:"\u6807\u98987",placement:"bottom",command:{name:"heading",args:["h7"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h7$/.test(t)}},{key:"h8",className:"heading-item-h6",content:Object(w.jsx)(F.a,{type:"ts-h8",className:"icon"}),title:"\u6807\u98988",placement:"bottom",command:{name:"heading",args:["h8"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h8$/.test(t)}},{key:"h9",className:"heading-item-h6",content:Object(w.jsx)(F.a,{type:"ts-h9",className:"icon"}),title:"\u6807\u98989",placement:"bottom",command:{name:"heading",args:["h9"]},onActive:function(){var t=e.command.queryState("heading")||"p";return/^h9$/.test(t)}}]},{type:"button",name:"bold",icon:Object(w.jsx)(F.a,{type:"ts-bold",className:"icon"}),title:t.bold.title,onDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)||!e.command.queryEnabled("bold")}},{type:"button",name:"italic",icon:Object(w.jsx)(F.a,{type:"ts-italic",className:"icon"}),title:t.italic.title},{type:"button",name:"strikethrough",icon:Object(w.jsx)(F.a,{type:"ts-strikethrough",className:"icon"}),title:t.strikethrough.title},{type:"button",name:"underline",icon:Object(w.jsx)(F.a,{type:"ts-underline",className:"icon"}),title:t.underline.title},{type:"button",name:"tasklist",icon:Object(w.jsx)(F.a,{type:"ts-checkbox",className:"icon"}),title:t.tasklist.title},{type:"button",name:"link",icon:Object(w.jsx)(F.a,{type:"ts-link",className:"icon"}),command:{name:"link",args:["_blank"]},title:t.link.title,onDisabled:function(){var t=e.change,n=e.card,a=t.range.get(),i=n.find(a.startNode);return!!i&&!i.isCursor(a.startNode)||a.commonAncestorNode.find(c.d).length>0||!e.command.queryEnabled("link")}},{type:"dropdown",className:"toolbar-action-more center",name:"action-more",content:Object(w.jsx)(F.a,{type:"ts-more-dot",className:"icon"}),title:y.c.t("MORE"),onDisabled:function(){return!1},onActive:function(){return!1},hasArrow:!1,items:[{key:"quote",type:"button",name:"quote",icon:Object(w.jsx)(F.a,{type:"ts-quote",className:"icon"}),title:t.quote.title,command:{name:"quote",args:[]},placement:"bottom"},{key:"code",type:"button",name:"code",icon:Object(w.jsx)(F.a,{type:"ts-code",className:"icon"}),title:t.moremark.code,command:{name:"code",args:[]},placement:"bottom"},{key:"left",type:"button",name:"left",icon:Object(w.jsx)(F.a,{type:"ts-align-left",className:"icon"}),title:t.alignment.left,command:{name:"alignment",args:["left"]},onDisabled:function(){return"left"===e.command.queryState("alignment")},onActive:function(){return!1},placement:"bottom"},{key:"center",type:"button",name:"center",icon:Object(w.jsx)(F.a,{type:"ts-align-center",className:"icon"}),title:t.alignment.center,command:{name:"alignment",args:["center"]},onDisabled:function(){return"center"===e.command.queryState("alignment")},onActive:function(){return!1},placement:"bottom"},{key:"right",type:"button",name:"right",icon:Object(w.jsx)(F.a,{type:"ts-align-right",className:"icon"}),title:t.alignment.right,command:{name:"alignment",args:["right"]},onDisabled:function(){return"right"===e.command.queryState("alignment")},onActive:function(){return!1},placement:"bottom"},{key:"justify",type:"button",name:"justify",icon:Object(w.jsx)(F.a,{type:"ts-align-justify",className:"icon"}),title:t.alignment.justify,command:{name:"alignment",args:["justify"]},onDisabled:function(){return"justify"===e.command.queryState("alignment")},onActive:function(){return!1},placement:"bottom"}]}]]},ce=function(e){var t=e.engine;return Object(w.jsx)(Y,{onMouseDown:function(e){return e.stopPropagation()},children:Object(w.jsx)(X.c,{className:"selection-menu",engine:t,items:oe(t)})})},se=n(12),ue=n.n(se),de="ant-tooltip-hidden",le=Object(i.forwardRef)((function(e,t){var n=Object.assign({},(Object(W.a)(e),e)),r=Object(i.useState)(0),o=Object(a.a)(r,2),c=o[0],u=o[1],d=Object(i.useState)(0),l=Object(a.a)(d,2),f=l[0],p=l[1],h=Object(i.useState)(!1),b=Object(a.a)(h,2),v=b[0],m=b[1],j=Object(i.useState)(!0),g=Object(a.a)(j,2),O=g[0],y=g[1],x=n.engine,k=Object(i.useCallback)((function(){m(!0);var e=x.change.range.get(),t=null===e||void 0===e?void 0:e.getClientRect(),n=parseInt(t.y);u(parseInt(t.x)),p(n<140?140:n),y(!(n<140))}),[x]);Object(i.useEffect)((function(){var e,t=function(){v&&Object(se.debounce)(k,120)()};return null===(e=document.querySelector(".docs-container"))||void 0===e||e.addEventListener("scroll",t),function(){var e;null===(e=document.querySelector(".docs-container"))||void 0===e||e.removeEventListener("scroll",t)}}),[v,k]);var C=Object(i.useCallback)((function(){v&&setTimeout((function(){return m(!1)}))}),[v]);return Object(i.useImperativeHandle)(t,(function(){return{onSelectHandle:k,onSelectHide:C}})),Object(w.jsx)(re,{className:"doc-selected-menu-layer",style:{left:"".concat(c,"px"),top:"".concat(f,"px")},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(e){e.preventDefault(),e.stopPropagation()},children:Object(w.jsx)(s.f,{trigger:"click",dropdownRender:function(){return O?Object(w.jsx)(ce,{engine:x}):Object(w.jsx)(w.Fragment,{})},onOpenChange:function(e){m(e),e||document.querySelectorAll(".ant-tooltip-placement-bottom").forEach((function(e){var t=e.getAttribute("class");-1===t.indexOf(de)&&e.setAttribute("class",t.concat(" ".concat(de)))}))},open:v,placement:"top",getPopupContainer:function(){return document.querySelector(".doc-selected-menu-layer")||document.body},children:Object(w.jsx)("div",{})})})})),fe=U.c.div.withConfig({displayName:"style",componentId:"sc-xn44of-0"})(['max-height:calc(100vh - 80px);display:flex;flex-direction:column;height:100%;div[data-card-key]{margin:8px 0;}.data-anchor-button.data-anchor-button-active{display:none;}.__dumi-default-layout[data-site-mode="true"][data-route="/"],.__dumi-default-layout[data-site-mode="true"][data-route="/zh-CN"]{min-height:auto;padding-top:138px !important;}.__dumi-default-layout[data-site-mode="true"][data-route="/"],.__dumi-default-layout[data-site-mode="true"][data-route="/zh-CN"] .__dumi-default-navbar{box-shadow:none;}.__dumi-default-layout[data-site-mode="true"] .__dumi-default-navbar nav{align-items:center;}.__dumi-default-layout[data-site-mode="true"][data-route="/"] .__dumi-default-navbar nav > span > a.active::after,.__dumi-default-layout[data-site-mode="true"][data-route="/zh-CN"] .__dumi-default-navbar nav > span > a.active::after{display:none;}.__dumi-default-layout[data-site-mode="true"] .__dumi-default-navbar nav .__dumi-default-locale-select{height:32px;}.editor-ot-users-content{display:flex;flex-wrap:wrap;}.editor-ot-users .ant-avatar{margin:0 2px;}.editor-toolbar{width:100%;background:#ffffff;transform:',";transform:",";transform:",";}.__dumi-default-previewer-demo .editor-toolbar{top:0;}.editor-wrapper{position:relative;width:100%;height:",";margin-top:",";&.readonly{height:",";margin-top:",';.data-card-block-max > [data-card-element="body"] > [data-card-element="center"]{top:56px;}.card-maximize-header a::before{content:"";}}}.editor-container{position:relative;min-width:',";max-width:",";margin:0 auto;padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);-webkit-transition:margin 0.4s ease-out;-o-transition:margin 0.4s ease-out;transition:margin 0.4s ease-out;}.editor-content{min-height:",";}.editor-content .am-engine{padding:",";}.am-engine .is-hover{background-color:",";border-radius:4px;}.docs-container{flex:1;overflow-y:scroll;&.knowledge-base-preview{height:100%;.editor-container{max-width:",";margin-left:0;}.editor-content .am-engine{padding:",";}}}"],(function(e){return e.theme.$device.isMobile?"translateY(0px)":""}),(function(e){return e.theme.$device.isMobile?"translateY(calc(0px - constant(safe-area-inset-bottom)))":""}),(function(e){return e.theme.$device.isMobile?"translateY(calc(0px - env(safe-area-inset-bottom)))":""}),(function(e){return e.theme.$device.isMobile&&!e.hideLayout?"calc(100vh - 45px)":"100%"}),(function(e){return e.theme.$device.isMobile&&!e.hideLayout?"45px":"auto"}),(function(e){return e.theme.$device.isTemplatePreview?"100vh":e.theme.$device.isMobile&&!e.hideLayout?"calc(100vh - 45px)":"calc(100vh - 64px)"}),(function(e){return e.theme.$device.isTemplatePreview?"0":e.theme.$device.isMobile&&!e.hideLayout?"45px":"0"}),(function(e){return e.theme.$device.isMobile?"unset":"470px"}),(function(e){return e.theme.$device.isMobile?"unset":"790px"}),(function(e){return e.theme.$device.isMobile?"calc(100vh - 45px - 235px)":"600px"}),(function(e){return e.theme.$device.isMobile?"20px 15px 40px":"40px 60px 160px"}),(function(e){return e.theme.c_other_lv2}),(function(e){return e.theme.$device.isMobile?"unset":"75%"}),(function(e){return e.theme.$device.isMobile?"":"40px 50px 160px 100px"})),pe=n(2837),he=n(89),be=n(77),ve=function(e){var t=e.engine,n=e.items,a=e.className,i=[[{type:"collapse",icon:"collapse",groups:[{items:[{name:"image-uploader",icon:Object(w.jsx)(F.a,{type:"ts-image",className:"icon img"}),title:y.c.t("DOCX_IMAGE"),search:"".concat(y.c.t("DOCX_IMAGE"),",tupian,image,img")},{name:"video-uploader",icon:Object(w.jsx)(F.a,{type:"ts-play-circle",className:"icon img"}),title:y.c.t("DOCX_VIDER"),search:"".concat(y.c.t("DOCX_VIDER"),",shipin,video")},{name:"audio-uploader",icon:Object(w.jsx)(F.a,{type:"ts-audio",className:"icon img"}),title:y.c.t("DOCX_AUDIO"),search:"".concat(y.c.t("DOCX_AUDIO"),",yinpin")},{name:"file-uploader",icon:Object(w.jsx)(F.a,{type:"ts-attachment",className:"icon file"}),title:y.c.t("ATTACHMENT"),search:"".concat(y.c.t("ATTACHMENT"),",fujian,file")},{name:"table",icon:Object(w.jsx)(F.a,{type:"ts-table",className:"icon table"}),title:y.c.t("TABLE"),search:"".concat(y.c.t("TABLE"),",biaoge,table")},{name:"codeblock",icon:Object(w.jsx)(F.a,{type:"ts-code-block",className:"icon"}),title:y.c.t("CODE_BLOCK"),search:"".concat(y.c.t("CODE_BLOCK"),",code,codeblock")},{name:"flowchart",icon:Object(w.jsx)(F.a,{type:"ts-flowchart",className:"icon flow"}),title:y.c.t("FLOWCHART"),search:"".concat(y.c.t("FLOWCHART"),",liuchengtu,flowchart")},{name:"uml-plugin",icon:Object(w.jsx)(F.a,{type:"ts-uml",className:"icon uml-icon"}),title:"UML".concat(y.c.t("DIAGRAM")),search:"uml,umltu"},{name:"math",icon:Object(w.jsx)(F.a,{type:"ts-tex",className:"icon gs"}),title:y.c.t("DOCX_LATEX"),search:"".concat(y.c.t("DOCX_LATEX"),",math")},{name:"web-card",icon:Object(w.jsx)(F.a,{type:"ts-window",className:"icon web-card"}),title:y.c.t("WEB_PAGE_CARD"),search:"".concat(y.c.t("WEB_PAGE_CARD"),",webcard,wangyekapian")},{name:"embed",icon:Object(w.jsx)(F.a,{type:"ts-window",className:"icon web-card"}),title:y.c.t("WEB_PAGE_PREVIEW"),search:"".concat(y.c.t("WEB_PAGE"),",").concat(y.c.t("YU_LAN"),",embed,wangye")},{name:"link",icon:Object(w.jsx)(F.a,{type:"ts-link",className:"icon link"}),title:y.c.t("HYPERLINK"),search:"".concat(y.c.t("HYPERLINK"),",chaolianjie,link")},{name:"status",icon:Object(w.jsx)(F.a,{type:"ts-tag",className:"icon link"}),title:y.c.t("STATUS"),search:"".concat(y.c.t("STATUS"),",status,zhuangtai")}]}]}],["undo","redo","paintformat","removeformat"],["heading","fontfamily","fontsize"],["bold","italic","strikethrough","underline","moremark"],["fontcolor","backcolor"],["alignment"],["tasklist","indent","line-height"],["link","quote","hr"]];return be.a.isMobile||i.push([{type:"button",name:"recording",icon:Object(w.jsx)(F.a,{type:"ts-mic",className:"icon link"}),title:y.c.t("VOICE_MEMO"),onDisabled:function(){return t._readonly},onClick:function(){document.dispatchEvent(new CustomEvent(he.a.CUSTOM_RECORDING_SHOW_HIDDEN))}}]),Object(w.jsx)(X.c,{className:a,engine:t,items:n||i})},me=n(148),je=n(120),ge=U.c.div.withConfig({displayName:"style",componentId:"sc-up0th-0"})(["border:1px solid ",";position:fixed;z-index:4;top:95px;right:0;width:300px;height:calc(100vh - 95px);display:flex;flex-direction:column;background-color:#FFF;.head{position:relative;display:flex;justify-content:space-between;margin-bottom:10px;padding:10px 0;font-weight:700;font-size:14px;border-bottom:1px solid ",";.title{padding-left:20px;color:#333333;font-weight:600;font-size:16px;}.icon{margin-right:20px;width:20px;height:20px;cursor:pointer;svg{width:100%;height:100%;}}}.container{flex:1;}"],(function(e){return e.theme.c_other_lv3}),(function(e){return e.theme.c_other_lv3})),Oe=n(2467),ye=n(124),xe=U.c.div.withConfig({displayName:"style",componentId:"sc-j19mfg-0"})(["display:flex;flex-direction:column;height:calc(100vh - 160px);.loading{margin-top:50%;}.container{flex:1;overflow-y:scroll;","}.list{padding:0 0 20px;.top-layer{display:flex;justify-content:space-between;.info{display:flex;font-size:12px;.user{padding:0 5px;color:#3b81f7;}}.delete .icon{display:none;width:16px;height:16px;cursor:pointer;svg{width:100%;height:100%;fill:#999999;}}}.item{padding:10px 20px;border-radius:4px;&:hover{background:#f5f9ff;.icon{display:block;}}}.audio-component{padding:6px 0;}.text{display:-webkit-box;overflow:hidden;color:#333333;font-weight:400;font-size:14px;line-height:20px;-webkit-line-clamp:5;-webkit-box-orient:vertical;}}.loading-next{color:#999999;font-size:12px;text-align:center;}.index{padding:0 20px;.title{padding:30px 0 10px;color:#333333;font-weight:600;font-size:20px;}.item{display:flex;padding:16px 0;.img{padding:0 10px 0 0px;}.icon{width:32px;height:32px;svg{width:100%;height:100%;fill:",";}}.name{color:#333333;font-weight:600;font-size:14px;}.description{color:#999999;font-weight:400;font-size:12px;}}}.bottom{text-align:center;button{width:80%;height:46px;margin:20px 0;border-radius:23px !important;}}"],(function(e){return e.theme.scrollbar(4,4)}),(function(e){return e.theme.c_blue})),we=U.c.div.withConfig({displayName:"style",componentId:"sc-1u7win4-0"})(["width:100%;audio{width:100%;height:32px;background:#f5f9ff;border-radius:18px;}.audio{display:flex;align-items:center;width:100%;height:32px;padding:0 10px;background:#f5f9ff;border-radius:18px;.btn{height:24px;.icon{width:24px;height:24px;cursor:pointer;}svg{width:100%;height:100%;fill:",";}}.progress{.ant-slider-handle{background:#3b81f7;border:none;}.ant-slider-track{background:#3b81f7;}.ant-slider-rail{background:#cfe5ff;}position:relative;flex:1;margin:0 10px;}.time{color:#333333;font-size:12px;}}"],(function(e){return e.theme.c_blue})),ke=function(e){var t="";return"string"===typeof e?e:e.result?t+=e.result:(e.rt.forEach((function(e){e.ws.forEach((function(e){e.cw.forEach((function(e){t+=e.w}))}))})),t)},Ce=function(e){e<0&&(e=-e);var t={hour:Math.floor(e/36e5)%24,minute:Math.floor(e/6e4)%60,second:Math.floor(e/1e3)%60};return Object.values(t).map((function(e,t){return 0===t&&e<=0?0:e.toString().padStart(2,"0")})).filter((function(e){return e})).join(":")},Ne=function(e){return e.split(/(.*?[\u3002\uff01\uff1b\uff1f!;?])/g)},Ee=n(287),_e=Object(Ee.a)("recording_audio_cdn_arr"),Se=1e3,Te={notStart:{id:"notStart",name:y.c.t("NO_START")},play:{id:"play",name:y.c.t("PLAY")},pause:{id:"pause",name:y.c.t("PAUSE")}};var De=function(e){var t=e.voiceKey,n=void 0===t?"":t,o=e.voiceDuration,c=void 0===o?0:o,l=e.cTime,f=void 0===l?0:l,p=e.onCurrentTimeChange,b=void 0===p?function(){}:p,v=Object(i.useRef)(),m=Object(i.useState)({}),j=Object(a.a)(m,2),g=j[0],x=j[1],k=Object(i.useState)(Te.notStart.id),C=Object(a.a)(k,2),N=C[0],E=C[1],_=Object(i.useState)(f),S=Object(a.a)(_,2),T=S[0],D=S[1];Object(i.useEffect)((function(){var e=function(e){var t;n!==e.detail.voiceKey&&N===Te.play.id&&(null===(t=v.current)||void 0===t||t.pause(),E(Te.pause.id))};return document.addEventListener(he.a.CUSTOM_RECORDING_PLAY,e),function(){document.removeEventListener(he.a.CUSTOM_RECORDING_PLAY,e)}}),[N,n]);var I=Object(i.useCallback)((function(){var e,t=v.current,n=t.currentTime,a=t.duration;(D(n*Se),n===a||n===c)&&(null===(e=v.current)||void 0===e||e.pause(),E(Te.notStart.id))}),[c]),R=Object(i.useCallback)(Object(d.a)(Object(u.a)().mark((function e(){var t,a,i,o,c,d,l,f;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(a=JSON.parse(null!==(t=localStorage.getItem(_e))&&void 0!==t?t:"{}"),i=(new Date).getTime(),!((o=ue.a.get(a,[n],{})).url&&o.validTime>i)){e.next=8;break}return x(o),e.abrupt("return",o);case 8:return e.next=10,h.a.generateUrl({files:[{key:n,name:n,uid:n}]});case 10:if(c=e.sent,d=c.code,l=c.data,1e3===d){e.next=16;break}return s.r.error(y.c.t("GET_FILE")+"CDN"+y.c.t("FAILURE")),e.abrupt("return");case 16:return f=ue.a.get(l,"[0]",{}),x(f),a[n]=Object(r.a)(Object(r.a)({},f),{},{validTime:(new Date).getTime()+O.l}),localStorage.setItem(_e,JSON.stringify(a)),e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)}))),[n]),A=Object(i.useCallback)(function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),null!==g&&void 0!==g&&g.url){e.next=4;break}return e.next=4,R();case 4:if(v.current){e.next=6;break}return e.abrupt("return");case 6:N===Te.notStart.id&&(v.current.currentTime=0),N===Te.notStart.id||N===Te.pause.id?(null===(a=v.current)||void 0===a||a.play(),E(Te.play.id),document.dispatchEvent(new CustomEvent(he.a.CUSTOM_RECORDING_PLAY,{detail:{voiceKey:n}}))):N===Te.play.id&&(null===(i=v.current)||void 0===i||i.pause(),E(Te.pause.id));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[null===g||void 0===g?void 0:g.url,N,R,n]),M=Object(i.useCallback)((function(){T&&T<c&&(v.current.currentTime=T/Se)}),[T,c]),L=Object(i.useCallback)((function(e){var t=parseInt(e/100*c);D(t),b(t),v.current&&(v.current.currentTime=t/Se)}),[b,c]);return Object(w.jsxs)(we,{children:[g.url&&Object(w.jsx)("audio",{controls:!0,style:{display:"none"},ref:v,onLoadedMetadata:M,onTimeUpdate:I,children:Object(w.jsx)("source",{src:g.url,type:"audio/mp3"})}),Object(w.jsxs)("div",{className:"audio",children:[Object(w.jsx)("div",{className:"btn",onClick:A,children:Object(w.jsxs)(s.q,{placement:"bottom",title:N===Te.play.id?Te.pause.name:Te.play.name,children:[(N===Te.notStart.id||N===Te.pause.id)&&Object(w.jsx)(F.a,{type:"ts-play-circle",className:"icon"}),N===Te.play.id&&Object(w.jsx)(F.a,{type:"ts-stop-circle",className:"icon"})]})}),Object(w.jsx)("div",{className:"progress",children:Object(w.jsx)(s.n,{tooltip:{formatter:function(e){return Ce(e/100*c)}},onChange:L,value:T/c*100})}),Object(w.jsx)("div",{className:"time",children:Ce(c-T)})]})]})},Ie=n(76),Re=n(330),Ae=n(186),Me=n(2841);var Le=Object(Ae.b)((function(e){return{userInfo:e.User.info}}),(function(){return{}}))((function(e){var t=e.userInfo,n=void 0===t?{}:t,r=e.callback,o=e.docId,c=e.pageName,l=e.isRefresh,f=Object(Ie.b)().Service,p=Object(P.a)().t,h=Object(i.useState)([]),b=Object(a.a)(h,2),v=b[0],m=b[1],j=Object(i.useState)(!1),g=Object(a.a)(j,2),O=g[0],x=g[1],k=Object(i.useState)(!0),C=Object(a.a)(k,2),N=C[0],E=C[1],_=Object(i.useState)(!1),S=Object(a.a)(_,2),T=S[0],D=S[1],I=Object(i.useRef)(),R=Object(i.useRef)(1),A=Object(Oe.a)(f.Docs.RecordingList,{manual:!0}).runAsync,M=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){var t,n,a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({docId:o,page:R.current,pageSize:10});case 2:t=e.sent,n=t.code,a=t.data,1e3===n&&Array.isArray(a)?(R.current>1?(i=(i=Object(se.cloneDeep)(v)).concat(a),m(i),D(!1)):(E(!1),m(a)),a.length<10&&x(!0)):(E(!1),x(!0));case 6:case"end":return e.stop()}}),e)}))));Object(i.useEffect)((function(){M()}),[]),Object(i.useEffect)((function(){l&&(R.current=1,x(!1),M())}),[l]);var L=Object(ye.a)((function(){r({name:"recording"})})),U=Object(ye.a)((function(e){document.dispatchEvent(new CustomEvent(he.a.CUSTOM_RECORDING_PLAY,{detail:{voiceKey:""}})),r({name:"detail",info:e})})),H=Object(Oe.a)(f.Docs.RecordingDel,{manual:!0}).runAsync,z=Object(ye.a)(function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({docId:o,user_id:n.id,ids:[t]});case 2:a=e.sent,1e3===a.code&&(s.r.success(y.c.t("DELETION_SUCCESSFUL")),i=v.filter((function(e){return e.id!==t})),m(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(ye.a)((function(e,t){var n=v.reduce((function(n,a){return a.id===t&&(a.currentTime=e),n.push(a),n}),[]);m(n)})),W=Object(ye.a)((function(){if(!T&&!O){var e=I.current;e.clientHeight+e.scrollTop>=e.scrollHeight&&(R.current++,D(!0),M())}}));return N?Object(w.jsx)(xe,{children:Object(w.jsx)(s.p,{size:"large",className:"loading"})}):Object(w.jsxs)(xe,{style:{display:"list"!==c?"none":"flex"},children:[Object(w.jsx)("div",{className:"container",ref:I,onScroll:W,children:v.length>0?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"list",children:v.map((function(e){var t;return Object(w.jsxs)("div",{className:"item",children:[Object(w.jsxs)("div",{className:"top-layer",children:[Object(w.jsxs)("div",{className:"info",onClick:function(){return U(e)},children:[Object(w.jsx)("div",{children:Object(Re.c)(new Date(e.created_at).getTime())}),Object(w.jsx)("div",{className:"user",children:null===(t=e.creator)||void 0===t?void 0:t.real_name}),Object(w.jsx)("div",{children:p("INITIATED_SHORHAND")})]}),Object(w.jsx)("div",{className:"delete",children:Object(w.jsx)(s.j,{title:y.c.t("DELETE_YUYING"),onConfirm:function(){return z(e.id)},okText:y.c.t("DELETE_TEXT"),cancelText:y.c.t("CANCEL_GROUPING"),children:Object(w.jsx)(F.a,{type:"ts-trash",className:"icon"})})})]}),Object(w.jsx)("div",{className:"audio-component",children:Object(w.jsx)(De,{voiceKey:e.voice_key,voiceDuration:e.voice_duration,onCurrentTimeChange:function(t){return B(t,e.id)}})}),Object(w.jsx)("div",{className:"text",onClick:function(){return U(e)},children:e.voice_data.map((function(e){return ke(e)})).join("")})]},e.id)}))}),!O&&Object(w.jsxs)("div",{className:"loading-next",children:[Object(w.jsx)(Me.a,{spin:!0}),p("LOADING_NEXT_PAGE")]})]}):Object(w.jsxs)("div",{className:"index",children:[Object(w.jsx)("div",{className:"title",children:p("WELCOME_VOICE_SHORHAND")}),Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)("div",{className:"img",children:Object(w.jsx)(F.a,{type:"ts-mic",className:"icon"})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"name",children:p("VOICE_TO_TEXT_CONVERSION")}),Object(w.jsx)("div",{className:"description",children:p("RECORDING_REAL_TIME_TEXT_TRANSMISSION")})]})]}),Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)("div",{className:"img",children:Object(w.jsx)(F.a,{type:"ts-message",className:"icon"})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"name",children:p("QUICK_SUMMARY_GENERATION")}),Object(w.jsx)("div",{className:"description",children:p("MOUSE_CLICK_TEXT_SUMMARY_TO_BODY")})]})]}),Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)("div",{className:"img",children:Object(w.jsx)(F.a,{type:"ts-headphone",className:"icon"})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"name",children:p("ORIGINAL_SOUND_REPLAY")}),Object(w.jsx)("div",{className:"description",children:p("SAVE_ORIGINAL_RECORDING_NO_MISSED_HIGHLIGHTS")})]})]})]})}),Object(w.jsx)("div",{className:"bottom",children:Object(w.jsx)(s.b,{onClick:L,shape:"round",type:"primary",icon:Object(w.jsx)(F.a,{type:"ts-mic",className:"icon"}),children:p("START_RECORDING")})})]})})),Ue=n(237),He=U.c.div.withConfig({displayName:"style",componentId:"sc-n17k2y-0"})(["display:flex;flex-direction:column;height:calc(100vh - 160px);.container{flex:1;padding:20px;overflow-y:scroll;"," .top-info{display:flex;.user{padding:0 6px;color:#3b81f7;}}.recording{display:flex;align-items:center;width:100%;height:32px;margin:7px 0;background:#f5f9ff;border-radius:18px;.recording-icon{height:24px;margin-left:10px;.icon{width:24px;height:24px;}svg{width:100%;height:100%;fill:",";}}.text{padding:0 6px;}.count-item{.ms-view{color:#333333 !important;}}}.recording-text{width:100%;.middle-text,.finally-text{display:contents;.txt{display:unset;padding:2px 0;line-height:22px;cursor:pointer;&:hover{background-color:rgba(0,0,0,0.1);}}}}}.bottom{color:#fff;text-align:center;border-top:1px solid ",";button{position:relative;width:80%;height:46px;margin:20px 0;overflow:hidden;font-size:16px;border-radius:23px !important;}.ant-btn.ant-btn-primary.ant-btn-dangerous{background:rgba(234,105,105,1);-webkit-animation-name:breathe;-webkit-animation-duration:1500ms;-webkit-animation-timing-function:ease-in-out;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:alternate;&:hover{color:#fff !important;}}@keyframes breathe{0%{opacity:0.4;}100%{opacity:1;}}}.ant-btn.ant-btn-dangerous{color:#fff;}.ms-view{padding:5px 0;color:#999999;font-size:14px;}"],(function(e){return e.theme.scrollbar(4,4)}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_other_lv3})),Fe=n(214),Pe=n(232),ze=function(e){Object(_.a)(t,e);Object(S.a)(t);function t(e){Object(l.a)(this,t);var n=e.toString(),a=new Blob(["(".concat(n,")()")]);return Object(Fe.a)(undefined,new Worker(URL.createObjectURL(a)))}return Object(f.a)(t)}(Object(Pe.a)(Worker));var Be=function(e){var t=e.time;return Object(w.jsx)("div",{className:"ms-view",children:Ce(t)})},We=n(31),qe=n.n(We),Xe=n(2814),Ve={};Ve.SpeechTranscription=Xe.a;var Ge=Ve,Ye=n(231),Ke=new ze((function(){var e={transaction:function(t){var n=e.to16kHz(t),a=e.to16BitPCM(n);self.postMessage({buffer:a,buffer16kHz:n})},getPCM:function(t){var n=e.to16kHz(t);return e.to16BitPCM(n)},to16kHz:function(e){var t=new Float32Array(e),n=Math.round(t.length*(16e3/44100)),a=new Float32Array(n),i=(t.length-1)/(n-1);a[0]=t[0];for(var r=1;r<n-1;r++){var o=r*i,c=Math.floor(o).toFixed(),s=Math.ceil(o).toFixed(),u=o-c;a[r]=t[c]+(t[s]-t[c])*u}return a[n-1]=t[t.length-1],a},to16BitPCM:function(e){for(var t=2*e.length,n=new ArrayBuffer(t),a=new DataView(n),i=0,r=0;r<e.length;r++,i+=2){var o=Math.max(-1,Math.min(1,e[r]));a.setInt16(i,o<0?32768*o:32767*o,!0)}return Array.from(new Int8Array(a.buffer))},toBase64:function(e){for(var t="",n=new Uint8Array(e),a=n.byteLength,i=0;i<a;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}};self.onmessage=function(t){switch(t.data.command){case"transform":e.transaction(t.data.buffer);break;case"wavtransform":self.postMessage({buffer:t.data.buffer})}}})),$e=2280,Je="recording",Ze="over",Qe="",et=Object(i.forwardRef)((function(e,t){var n=e.engine,o=e.userInfo,c=e.docId,l=e.callback,f=Object(Ie.b)().Service,p=Object(i.useRef)([]),v=Object(i.useState)([]),m=Object(a.a)(v,2),j=m[0],g=m[1],x=Object(i.useRef)([]),k=Object(i.useState)([]),C=Object(a.a)(k,2),E=C[0],_=C[1],S=Object(i.useRef)(0),T=Object(i.useState)(0),D=Object(a.a)(T,2),I=D[0],R=D[1],A=Object(i.useState)(!0),M=Object(a.a)(A,2),L=M[0],U=M[1],H=Object(i.useRef)(!1),z=Object(i.useRef)(null),B=Object(i.useRef)(0),W=Object(i.useState)(0),q=Object(a.a)(W,2),X=q[0],V=q[1],G=Object(i.useRef)(null),Y=Object(i.useRef)(null),K=Object(i.useRef)([]),$=Object(i.useRef)([]),J=Object(i.useRef)(null),Z=Object(i.useRef)(null),Q=Object(i.useState)(null),ee=Object(a.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(i.useRef)(),ie=Object(P.a)().t,re=Object(i.useRef)({}),oe=Object(i.useState)(Je),ce=Object(a.a)(oe,2),se=ce[0],de=ce[1],le=Object(i.useRef)(""),fe=Object(i.useRef)(!1),pe=Object(i.useRef)(0),he=Object(i.useState)(0),be=Object(a.a)(he,2),ve=be[0],me=be[1],je=Object(i.useRef)(),ge=Object(Ye.c)().isOnline;le.current=function(){return se},Object(i.useEffect)((function(){Ke.onmessage=function(e){var t;(t=K.current).push.apply(t,Object(N.a)(e.data.buffer))},Fe()}),[]);var xe=Object(Oe.a)(f.Docs.RecordingAdd,{manual:!0}).runAsync,we=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(re.current);case 2:t=e.sent,n=t.code,a=t.data,1e3===n?(s.r.success(y.c.t("SUCCESSFUL_SAVE")),l({name:"detail",info:Object(r.a)(Object(r.a)({},a),{},{refresh:!0})})):l({name:"list",refresh:!0});case 6:case"end":return e.stop()}}),e)})))),Ce=Object(ye.a)((function(){clearInterval(z.current);try{var e,t,n;null===(e=Y.current)||void 0===e||e.disconnect(G.current),null===(t=G.current)||void 0===t||t.disconnect(),null===(n=J.current)||void 0===n||n.stop(),je.current.getTracks().forEach((function(e){e.stop()}))}catch(a){console.error("--",a)}})),Ee=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge){e.next=2;break}return e.abrupt("return");case 2:if(!fe.current){e.next=4;break}return e.abrupt("return");case 4:if(fe.current=!0,de(Ze),0!==x.current.length){e.next=12;break}if(x.current=p.current,0!==p.current.length){e.next=12;break}return s.r.error(y.c.t("NO_TEXT_RECOGNIZED")),l({name:"list"}),e.abrupt("return");case 12:re.current.voice_data=x.current,t=new Blob($.current,{type:"audio/mp3"}),n=window.URL.createObjectURL(t),ne(n),0===(null===t||void 0===t?void 0:t.size)?(s.r.warn(y.c.t("LOCAL_RECORDING_FAILURE")),re.current.voice_key="NULL",l({name:"list"})):(a=new window.File([t],"".concat(ie("VOICE_SHORHAND")).concat((new Date).getTime(),".mp3"),{type:t.type}),h.a.upload({files:[a],maxFileSize:Object(b.a)("TEAMSHARE_CLOUDDOC_UPLOAD_MAX_SIZE")||5,success:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re.current.voice_key=ue.a.get(t,"key",""),re.current.voice_duration&&we();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onUploading:function(e,t){me(t.percent)},onUpError:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("onUpError",t),pe.current<3&&ge&&Ee();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 17:case"end":return e.stop()}}),e)})))),_e=Object(ye.a)((function(){z.current=setInterval((function(){B.current+=1e3,V(B.current)}),1e3)})),Se=Object(ye.a)((function(e){var t=(null===e||void 0===e?void 0:e.cn).st,n=void 0===t?{}:t,a=parseInt(n.type);if(0===a)p.current=[],g(p.current),0===S.current||n.bg-S.current>=6e4?(S.current&&U(!0),S.current=n.bg,n.isStart=!0):U(!1),x.current.push(n),_(x.current);else if(1===a){L&&R(n.bg);var i=ke(n);p.current.push(i),g(p.current)}})),Te=Object(ye.a)((function(e,t){var n=e.payload;0===t?((H.current||0===x.current.length)&&(n.isStart=!0,H.current=!1,S.current=n.begin_time+""),x.current.push(n),_(x.current),p.current=[],g(p.current),U(!1)):1===t&&((0===S.current||n.time-S.current>=6e4)&&(S.current=n.time,R(n.time),U(!0),H.current=!0),p.current=[n.result],g(p.current))})),De=Object(Oe.a)(f.Docs.GetRecordingSigna,{manual:!0}).runAsync,Re=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(t=e.sent,n=t.code,a=t.data,1e3!==n){e.next=7;break}return e.abrupt("return",a);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})))),Ae=Object(ye.a)(function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t,n){var a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=K.current.splice(0,$e),n.sendAudio(new Int8Array(a)),i=setInterval((function(){if(0===K.current.length)return"end"===le.current()&&(n.sendAudio('{"end": true}'),clearInterval(i),Ee()),!1;(a=K.current.splice(0,$e)).length>0&&n.sendAudio(new Int8Array(a))}),40);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),(a=new Ge.SpeechTranscription({url:O.b,appkey:O.a,token:t})).on("changed",(function(e){Te(JSON.parse(e),1)})),a.on("closed",(function(){Ce()})),a.on("failed",(function(e){Ce(),console.error("Client recv failed:",e)})),a.on("end",(function(e){Te(JSON.parse(e),0)}));try{a.start(a.defaultStartParams(),!1,6e3).then((function(){Y.current.connect(G.current),G.current.connect(Z.current.destination),J.current.start(),_e(),setTimeout((function(){n("",a)}),100)}),(function(e){console.error("ws error:",e)}))}catch(i){console.error("--\x3eerror on start:",i)}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Le=Object(ye.a)(function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,a,i,r,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","?"+Object.entries(t).join("&").replaceAll(",","="));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t,n){var a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.readyState){e.next=2;break}return e.abrupt("return");case 2:a=K.current.splice(0,$e),n.send(new Int8Array(a)),i=setInterval((function(){if(1===n.readyState){if(0===K.current.length)return"end"===le.current()&&(n.send('{"end": true}'),clearInterval(i),Ee()),!1;(a=K.current.splice(0,$e)).length>0&&n.send(new Int8Array(a))}else clearInterval(i)}),40);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=4,n();case 4:if(i=e.sent,r="".concat(O.m).concat(i),o=null,!("WebSocket"in window)){e.next=11;break}o=new window.WebSocket(r),e.next=17;break;case 11:if(!("MozWebSocket"in window)){e.next=15;break}o=new window.MozWebSocket(r),e.next=17;break;case 15:return s.r.error(y.c.t("YOUR_BROWSER_DOES_NOT_SUPPORT_THIS_FEATURE"),y.c.t("PLEASE_CHANGE_BROWSER")),e.abrupt("return",null);case 17:o.onopen=function(e){Y.current.connect(G.current),G.current.connect(Z.current.destination),J.current.start(),_e(),setTimeout((function(){a(e,o)}),500)},o.onmessage=function(e){var t=JSON.parse(e.data);"result"===t.action?Se(JSON.parse(t.data)):"error"===t.action&&console.error(y.c.t("ERROR_OCCURRED"),t)},o.onerror=function(e){Ce(),console.error(y.c.t("CLOSE_CONNECTION"),o.onerror,e),Ee()},o.onclose=function(){Ce(),Ee()};case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){var t,n,a,i,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se===Je){e.next=2;break}return e.abrupt("return");case 2:if(n=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,(null!==(t=navigator.mediaDevices)&&void 0!==t&&t.getUserMedia||navigator.getUserMedia)&&n){e.next=7;break}return s.r.warning("".concat(y.c.t("YOUR_BROWSER_DOES_NOT_SUPPORT_RECORDING"),"\uff0c").concat(y.c.t("PLEASE_CHANGE_BROWSER"))),e.abrupt("return");case 7:if(Z.current=new n,G.current=Z.current.createScriptProcessor(0,1,1),a=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.current){e.next=2;break}return e.abrupt("return");case 2:return je.current=t,Y.current=Z.current.createMediaStreamSource(t),G.current.onaudioprocess=function(e){Ke.postMessage({command:"transform",buffer:e.inputBuffer.getChannelData(0)})},J.current=new MediaRecorder(t),J.current.onstop=function(){de("end")},J.current.ondataavailable=function(e){$.current.push(e.data)},e.next=10,Re();case 10:(n=e.sent)&&"aliyun"===n.type?Ae(n.token):n&&"xunfei"===n.type?Le(n.token):s.r.error(y.c.t("UNKNOWN_TYPE")),re.current={docId:c,user_id:o.id,type:n.type};case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(e){G.current=null,Y.current=null,Z.current=null,de(Qe),"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?s.r.warning(y.c.t("MICROPHONE_DEVICE_NOT_FOUND")):"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?s.r.warning(y.c.t("PLEASE_OPEN_MICROPHONE_PERMISSION_IN_BROWSER"),y.c.t("RECORD_AGAIN")):s.r.warning(y.c.t("CANNOT_USE_RECORDING_FUNCTION_TEMPORARILY"),y.c.t("PLEASE_CHECK_DEVICE")),l({name:"list"})},!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=18;break}return e.next=14,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).catch((function(e){i(e)}));case 14:r=e.sent,a(r),e.next=19;break;case 18:navigator.getUserMedia({audio:!0,video:!1},(function(e){a(e)}),(function(e){i(e)}));case 19:case"end":return e.stop()}}),e)})))),Pe=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.r.success({content:"".concat(y.c.t("NETWORK_RECOVERED"),", ").concat(y.c.t("DATA_IS_SYNCING_WITH_CLOUD"))}),Ee();case 2:case"end":return e.stop()}}),e)})))),ze=Object(ye.a)((function(){s.r.error({icon:Object(w.jsx)(F.a,{type:"ts-no-network-fill"}),content:"".concat(y.c.t("NETWORK_INTERRUPTED"),", ").concat(y.c.t("DATA_WILL_SYNC_WITH_CLOUD_NEXT_TIME_YOU_CONNECT"))}),Ce()}));Object(Ue.a)((function(){ge?Pe():ze()}),[ge]),Object(i.useEffect)((function(){var e=function(e){if(e=e||window.event,se===Je)return e&&(e.returnValue="".concat(y.c.t("YOU_ARE_STILL_RECORDING"),", ").concat(y.c.t("PLEASE_END_RECORDING_FIRST"))),"".concat(y.c.t("YOU_ARE_STILL_RECORDING"),"\uff0c").concat(y.c.t("PLEASE_END_RECORDING_FIRST"),"\uff01")};return window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),function(){window.removeEventListener("beforeunload",e),window.removeEventListener("pagehide",e)}}),[se,Pe,ze]);var We=Object(ye.a)(Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae.current.duration!==1/0){e.next=6;break}return e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:ae.current&&(ae.current.currentTime=1e7*Math.random()),e.next=0;break;case 6:re.current.voice_duration=Math.round(1e3*ae.current.duration),re.current.voice_key&&we();case 8:case"end":return e.stop()}}),e)})))),Xe=Object(ye.a)((function(e){n.node.insertText(e)}));return Object(i.useImperativeHandle)(t,(function(){return{audioStatus:se}}),[se]),Object(w.jsxs)(He,{children:[Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("div",{className:"top-info",children:[qe()().format("HH:mm"),Object(w.jsx)("div",{className:"user",children:o.realName}),ie("INITIATED_SHORHAND")]}),se&&Object(w.jsxs)("div",{className:"recording",children:[Object(w.jsx)("div",{className:"recording-icon",children:Object(w.jsx)(F.a,{type:"ts-mic",className:"icon"})}),Object(w.jsx)("div",{className:"text",children:ie("RECORDING_IN_PROGRESS")}),Object(w.jsx)("div",{className:"count-item",children:Object(w.jsx)(Be,{time:X})})]}),Object(w.jsxs)("div",{className:"recording-text",children:[E.map((function(e,t){var n=ke(e);return Object(w.jsxs)("div",{className:"finally-text",children:[e.isStart&&Object(w.jsx)("div",{className:"time",children:Object(w.jsx)(Be,{time:e.bg||e.begin_time})}),Ne(n).map((function(e){return Object(w.jsx)("span",{className:"txt",onClick:function(){return Xe(e)},children:Object(w.jsx)(s.q,{placement:"bottom",title:y.c.t("CLICK_TO_INSERT_INTO_THE_LEFT_DOCUMENT"),children:e})},e)}))]},t)})),L&&j.length>0&&Object(w.jsx)(Be,{time:I}),j.map((function(e,t){return Object(w.jsx)("div",{className:"middle-text",children:e},t)}))]}),te&&Object(w.jsxs)("audio",{ref:ae,controls:!0,onLoadedMetadata:We,style:{display:"none"},children:[Object(w.jsx)("source",{src:te,type:"audio/mp3"}),Object(w.jsx)("source",{src:te,type:"audio/mpeg"}),Object(w.jsx)("source",{src:te,type:"audio/ogg"}),Object(w.jsx)("embed",{src:te})]})]}),Object(w.jsxs)("div",{className:"bottom",children:["recording"===se&&Object(w.jsx)(s.b,{onClick:Ce,shape:"round",type:"primary",danger:!0,icon:Object(w.jsx)(F.a,{type:"ts-stop-circle",className:"icon"}),children:ie("STOP_RECORDING")}),"end"===se&&ge&&Object(w.jsx)(s.b,{shape:"round",danger:!0,disabled:!0,icon:Object(w.jsx)(Me.a,{spin:!0,className:"icon"}),children:ie("RECORDING_SAVE_PROGRESS",{s:ve})}),"end"===se&&!ge&&Object(w.jsx)(s.b,{shape:"round",danger:!0,disabled:!0,children:ie("PHONETIC_SHORTHAND_TIP15")})]})]})})),tt=Object(Ae.b)((function(e){return{userInfo:e.User.info}}),null,null,{forwardRef:!0})(et),nt=U.c.div.withConfig({displayName:"style",componentId:"sc-1l8s064-0"})(["padding:0 0 20px;display:flex;flex-direction:column;height:calc(100vh - 160px);.top-layer{display:flex;justify-content:space-between;.back{height:16px;.back-icon{width:16px;height:100%;margin-right:6px;cursor:pointer;svg{width:100%;height:100%;}}}.info{display:flex;align-items:center;font-size:12px;.user{padding:0 5px;color:#3b81f7;}}.delete .icon{display:none;width:16px;height:16px;cursor:pointer;svg{width:100%;height:100%;fill:#999999;}}}.item{display:flex;flex-direction:column;height:95%;padding:10px 20px;border-radius:4px;&:hover{.icon{display:block;}}}.audio-component{padding:6px 0;}.text{flex:1;overflow-y:scroll;"," .finally-text{display:contents;font-size:14px;.txt{display:unset;padding:2px 0;line-height:22px;cursor:pointer;&:hover{background-color:rgba(0,0,0,0.1);}}}.time{padding:5px 0;color:#999999;font-size:14px;}}"],(function(e){return e.theme.scrollbar(4,4)}));var at=Object(Ae.b)((function(e){return{userInfo:e.User.info}}),(function(){return{}}))((function(e){var t=e.engine,n=e.userInfo,a=e.detail,i=e.docId,r=e.callback,o=Object(Ie.b)().Service,c=Object(P.a)().t,l=Object(Oe.a)(o.Docs.RecordingDel,{manual:!0}).runAsync,f=Object(ye.a)(function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({docId:i,user_id:n.id,ids:[t]});case 2:a=e.sent,1e3===a.code&&(s.r.success(y.c.t("DELETION_SUCCESSFUL")),r({name:"list"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,i,n.id]),p=Object(ye.a)((function(){r({name:"list",refresh:!!a.refresh})})),h=Object(ye.a)((function(e){t.node.insertText(e)}));return Object(w.jsx)(nt,{children:Object(w.jsxs)("div",{className:"item",children:[Object(w.jsxs)("div",{className:"top-layer",children:[Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"back",onClick:p,children:Object(w.jsx)(s.q,{placement:"left",title:y.c.t("RETURN_TO_LIST"),children:Object(w.jsx)(F.a,{type:"ts-return",className:"back-icon"})})}),Object(w.jsx)("div",{children:Object(Re.c)(new Date(a.created_at).getTime())}),Object(w.jsx)("div",{className:"user",children:a.creator.real_name}),Object(w.jsx)("div",{children:c("INITIATED_SHORHAND")})]}),Object(w.jsx)("div",{className:"delete",children:Object(w.jsx)(s.j,{title:y.c.t("DELETE_YUYING"),onConfirm:function(){return f(a.id)},okText:y.c.t("DELETE_TEXT"),cancelText:y.c.t("CANCEL_GROUPING"),children:Object(w.jsx)(F.a,{type:"ts-trash",className:"icon"})})})]}),Object(w.jsx)("div",{className:"audio-component",children:Object(w.jsx)(De,{voiceKey:a.voice_key,voiceDuration:a.voice_duration,cTime:a.currentTime})}),Object(w.jsx)("div",{className:"text",children:a.voice_data.map((function(e,t){var n=ke(e);return Object(w.jsxs)("div",{className:"finally-text",children:[e.isStart&&Object(w.jsx)("div",{className:"time",children:Object(w.jsx)(Be,{time:e.bg||e.begin_time})}),Ne(n).map((function(e){return Object(w.jsx)("span",{className:"txt",onClick:function(){return h(e)},children:Object(w.jsx)(s.q,{placement:"bottom",title:y.c.t("CLICK_TO_INSERT_INTO_THE_LEFT_DOCUMENT"),children:e})},e)}))]},t)}))})]},a.id)})}));var it=function(e){var t=e.docId,n=e.engine,r=Object(P.a)().t,o=Object(i.useState)("list"),c=Object(a.a)(o,2),u=c[0],d=c[1],l=Object(i.useState)(""),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(i.useState)(!0),v=Object(a.a)(b,2),m=v[0],j=v[1],g=Object(i.useState)(!1),O=Object(a.a)(g,2),y=O[0],x=O[1],k=Object(i.useRef)();Object(i.useEffect)((function(){var e=function(e){var t=!m;!t||e.detail?(j(t),d("list")):s.r.warning(r("PHONETIC_SHORTHAND_TIP2"))};return document.addEventListener(he.a.CUSTOM_RECORDING_SHOW_HIDDEN,e),function(){document.removeEventListener(he.a.CUSTOM_RECORDING_SHOW_HIDDEN,e)}}),[m]);var C=Object(i.useCallback)((function(e){var t=e.name,n=e.info,a=void 0===n?"":n,i=e.refresh,r=void 0!==i&&i;d(t),a&&h(a),x(r||!1)}),[]),N=Object(i.useCallback)((function(){var e="";k.current&&(e=k.current.audioStatus),"recording"!==e?document.dispatchEvent(new CustomEvent(he.a.CUSTOM_RECORDING_SHOW_HIDDEN,{detail:"close"})):s.r.warning(r("PHONETIC_SHORTHAND_TIP"))}),[]);return m?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(ge,{children:[Object(w.jsxs)("div",{className:"head",children:[Object(w.jsx)("div",{className:"title",children:r("PHONETIC_SHORTHAND")}),Object(w.jsx)("div",{className:"close",onClick:N,children:Object(w.jsx)(F.a,{type:"ts-close-line",className:"icon"})})]}),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(Le,{docId:t,callback:C,pageName:u,isRefresh:y}),"detail"===u&&(null===p||void 0===p?void 0:p.id)&&Object(w.jsx)(at,{detail:p,docId:t,engine:n,callback:C,pageName:u}),"recording"===u&&Object(w.jsx)(tt,{ref:k,docId:t,callback:C,pageName:u,engine:n})]})]})},rt=n(24),ot=n(220),ct=n(2816),st=n(2817),ut=n.n(st),dt=n(88),lt="active",ft="exit",pt="error",ht="inactive",bt="error",vt="membersChange",mt="statusChange",jt="message",gt="appreciateUserList",Ot="latexSvg",yt="getWebCard",xt="setFilePermission",wt="DISCONNECTED",kt={TIMEOUT:4001,FORCE_DISCONNECTED:4002},Ct="CONNECTION_ERROR",Nt="UNKNOWN_ERROR",Et="FATAL",_t=function(e){Object(_.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(l.a)(this,n),a=t.call(this),Object(p.a)(Object(rt.a)(a),"engine",void 0),Object(p.a)(Object(rt.a)(a),"socket",void 0),Object(p.a)(Object(rt.a)(a),"members",[]),Object(p.a)(Object(rt.a)(a),"current",void 0),Object(p.a)(Object(rt.a)(a),"status",void 0),Object(p.a)(Object(rt.a)(a),"doc",void 0),Object(p.a)(Object(rt.a)(a),"isClosed",!0),Object(p.a)(Object(rt.a)(a),"heartbeat",void 0),Object(p.a)(Object(rt.a)(a),"appreciate",[]),Object(p.a)(Object(rt.a)(a),"comment",[]),a.engine=e,a}return Object(f.a)(n,[{key:"checkHeartbeat",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;if(this.socket){null!==(e=this.heartbeat)&&void 0!==e&&e.timeout&&clearTimeout(this.heartbeat.timeout);var a=setTimeout((function(){var e=new Date;t.isClosed||t.heartbeat&&!(e.getTime()-t.heartbeat.datetime.getTime()>=n)?t.heartbeat&&(t.heartbeat.timeout=a):(t.sendMessage("heartbeat",{time:e.getTime()}),t.heartbeat={timeout:a,datetime:e}),t.checkHeartbeat(n)}),1e3)}}},{key:"connect",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O.c;this.socket&&this.socket.close();var r=new ct.a(Object(d.a)(Object(u.a)().mark((function t(){var n,a;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){e(dt.a.getAuthorization())}));case 2:return n=t.sent,(a=new URL(e)).searchParams.set("token",n),t.abrupt("return",a.toString());case 6:case"end":return t.stop()}}),t)}))),[],{maxReconnectionDelay:3e4,minReconnectionDelay:1e4,reconnectionDelayGrowFactor:1e4,maxRetries:10});r.addEventListener("open",(function(){a.socket=r,a.load(r,t,i,n),a.isClosed=!1,a.socket.addEventListener("message",(function(e){var t=JSON.parse(e.data),n=t.data,i=t.action;if("members"===i)return a.addMembers(n),void a.engine.ot.setMembers(n);if("join"===i)return a.addMembers([n]),void a.engine.ot.addMember(n);if("leave"===i)return a.engine.ot.removeMember(n),void a.removeMember(n);if("ready"===i&&(a.current=n,a.engine.ot.setCurrentMember(n),a.emit("ready",a.engine.ot.getCurrentMember()),a.emit(vt,a.normalizeMembers()),a.transmit(lt)),"broadcast"===i){var r,o=n.uuid,c=n.body,s=n.type;if(o!==(null===(r=a.current)||void 0===r?void 0:r.uuid))if("select"===s)a.engine.ot.renderSelection(c);else a.emit(jt,{type:s,body:c})}O.i.docsAppreciate!==i&&O.i.docsCreateAppreciate!==i&&O.i.docsDeleteAppreciate!==i?(O.i.latex===i&&a.emit(Ot,n||""),O.i.getWebCard===i&&a.emit(yt,n||{}),O.i.docsSetFileMetadata===i&&document.dispatchEvent(new CustomEvent(he.a.DOC_FILE_INFO_CHANGE,{detail:{data:n}})),O.i.setFilePermission===i&&a.emit(xt,n||{})):a.setAppreciate(n)})),a.checkHeartbeat(1e4)})),r.addEventListener("close",(function(){a.status!==ft&&(a.sendMessageStatusError({socket:"close"}),a.onError({code:wt,level:Et,message:y.c.t("DISCONNECTED_TIPS")}))})),r.addEventListener("error",(function(e){a.sendMessageStatusError({socket:"error",error:e}),a.onError({code:Ct,level:Et,message:y.c.t("CONNECTION_ERROR"),error:e})}))}},{key:"load",value:function(e,t,n,a){var i=this,r=new ut.a.Connection(e).get(n,t);this.doc=r,r.subscribe((function(e){if(e)console.error("collab doc subscribe error",e);else try{i.engine.ot.initRemote(r,a,(function(e){i.broadcast("select",e)})),i.engine.socket=i,i.engine.ot.submitOps=function(e){i.doc.submitOp(e,{source:i.engine.ot.clientId},(function(t){i.sendMessageOPSError(t,e)}))},i.engine.focus()}catch(t){console.error("am-engine init failed:",t)}})),r.on("create",(function(){})),r.on("load",(function(){i.sendMessage("ready")})),r.on("op",(function(){})),r.on("del",(function(){})),r.on("error",(function(e){console.error(e)}))}},{key:"setAppreciate",value:function(e){this.appreciate=(null===e||void 0===e?void 0:e.users)||[],this.emit(gt,(null===e||void 0===e?void 0:e.users)||[])}},{key:"broadcast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sendMessage("broadcast",{type:e,body:t})}},{key:"sendMessage",value:function(e,t){var n,a,i;null===(n=this.socket)||void 0===n||n.send(JSON.stringify({action:e,data:Object(r.a)(Object(r.a)({},t),{},{doc_id:null===(a=this.doc)||void 0===a?void 0:a.id,uuid:null===(i=this.current)||void 0===i?void 0:i.uuid})}))}},{key:"sendMessageOPSError",value:function(e,t){var n,a,i;if(e){var r=String(e);null===(n=this.socket)||void 0===n||n.send(JSON.stringify({action:"reportError",data:{doc_id:null===(a=this.doc)||void 0===a?void 0:a.id,uuid:null===(i=this.current)||void 0===i?void 0:i.uuid},error:{type:"OPS_ERROR",ops:t,time:(new Date).getTime(),error:r}})),r.indexOf("Cannot read properties of undefined")>-1||s.i.error({title:O.g[Nt],keyboard:!1,content:r,okText:y.c.t("DETERMINE"),onOk:function(){window.location.reload()}})}}},{key:"sendMessageStatusError",value:function(e){var t,n,a;null===(t=this.socket)||void 0===t||t.send(JSON.stringify({action:"reportError",data:{doc_id:null===(n=this.doc)||void 0===n?void 0:n.id,uuid:null===(a=this.current)||void 0===a?void 0:a.uuid},error:Object(r.a)({type:"STATUS_ERROR",time:(new Date).getTime(),status:this.status},e)}))}},{key:"addMembers",value:function(e){var t=this;e.forEach((function(e){t.members.find((function(t){return e.uuid===t.uuid}))||t.members.push(e)})),setTimeout((function(){t.emit(vt,t.normalizeMembers())}),1e3)}},{key:"removeMember",value:function(e){this.members=this.members.filter((function(t){return t.uuid!==e.uuid})),this.emit(vt,this.normalizeMembers())}},{key:"normalizeMembers",value:function(){var e=[],t={};this.engine.ot.getMembers().forEach((function(e){t[e.uuid]=e.color}));for(var n={},a=this.members.length;a>0;a--){var i=this.members[a-1];if(!n[i.uuid]){var o=Object(r.a)({},i);o.color=t[i.uuid],n[i.uuid]=i,e.push(o)}}return e}},{key:"transmit",value:function(e){var t=this.status;this.status=e,this.emit(mt,{form:t,to:e})}},{key:"onError",value:function(e){this.emit(bt,e),this.status=pt}},{key:"isActive",value:function(){return this.status===lt}},{key:"exit",value:function(){this.status!==ft&&(this.transmit(ft),this.disconnect())}},{key:"disconnect",value:function(){if(this.socket)try{var e;this.socket.close(kt.FORCE_DISCONNECTED,"FORCE_DISCONNECTED"),null!==(e=this.heartbeat)&&void 0!==e&&e.timeout&&clearTimeout(this.heartbeat.timeout)}catch(t){console.error(t)}}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("beforeunload",(function(){return e.exit()})),window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.emit(ht)})),window.addEventListener("pagehide",(function(){return e.exit()}))}},{key:"unbindEvents",value:function(){var e=this;window.removeEventListener("beforeunload",(function(){return e.exit()})),window.removeEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.emit(ht)})),window.removeEventListener("pagehide",(function(){return e.exit()}))}}]),n}(ot.EventEmitter),St=_t,Tt=U.c.div.withConfig({displayName:"style",componentId:"sc-byt1x-0"})(["",";flex-direction:column;padding-bottom:30px;padding-bottom:calc(30px + constant(safe-area-inset-bottom));padding-bottom:calc(30px + env(safe-area-inset-bottom));.line{width:100%;margin-bottom:30px;border-bottom:1px solid ",";}.like-action{width:60px;height:60px;border:2px solid ",";border-radius:100px;",";.icon{width:38px;height:38px;color:",";cursor:pointer;svg{width:100%;height:100%;}}&.liked{background-color:",";border-color:",";.icon{color:",";}}}.like-tips{",";width:200px;padding:10px 0;color:",";}.like-user-list{min-height:40px;",";flex-wrap:wrap;max-width:100%;.avatar{width:32px;height:32px;margin-right:10px;margin-bottom:10px;border-radius:100px;}}"],(function(e){return e.theme.center}),(function(e){return e.theme.c_other_lv3}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.center}),(function(e){return e.theme.c_blue}),(function(e){return e.theme.c_yellow}),(function(e){return e.theme.c_yellow}),(function(e){return e.theme.c_white}),(function(e){return e.theme.f_default}),(function(e){return e.theme.c_text_lv1}),(function(e){return e.theme.center}));var Dt=Object(Ae.b)((function(e){return{userInfo:e.User.info}}),(function(){return{}}))((function(e){var t=e.otClient,n=e.userInfo,o=Object(i.useState)([]),c=Object(a.a)(o,2),u=c[0],d=c[1],l=Object(i.useState)(!1),f=Object(a.a)(l,2),p=f[0],h=f[1],b=Object(P.a)().t;Object(i.useEffect)((function(){if("function"===typeof t.sendMessage){setTimeout((function(){t.sendMessage(O.i.docsAppreciate,{})}),1e3);null===t||void 0===t||t.on(gt,(function(e){e.findIndex((function(e){return e.user_id===n.id}))>-1&&h(!0),d(e)}))}}),[t,n]);var v=Object(i.useCallback)((function(){if(p){t.sendMessage(O.i.docsDeleteAppreciate,{}),h(!1);var e=Object(se.cloneDeep)(u);return e.splice(e.findIndex((function(e){return e.id===n.id})),1),void d(e)}t.sendMessage(O.i.docsCreateAppreciate,{}),s.r.success(b("SUCCESSFUL_LIKE")),h(!0),d([].concat(Object(N.a)(u),[Object(r.a)({},n)]))}),[t,p,u,n]);return Object(w.jsxs)(Tt,{children:[Object(w.jsx)("div",{className:"line"}),Object(w.jsx)("div",{className:"".concat(p?"liked ":"","like-action"),onClick:v,children:Object(w.jsx)(F.a,{type:"ts-like-fill",className:"icon"})}),Object(w.jsx)("div",{className:"like-tips",children:Object(w.jsx)(s.e,{plain:!0,children:b(p?"YOU_HAVE_LIKED":"IF_YOU_HAVE_GAINED")})}),Object(w.jsx)("div",{className:"like-user-list",children:u.length>0&&u.map((function(e,t){return Object(w.jsx)(s.a,{alt:null===e||void 0===e?void 0:e.real_name,className:"avatar",style:{backgroundColor:"rgba(0,0,0,.03)"},src:e.avatar},(null===e||void 0===e?void 0:e.user_id)+"_"+t)}))})]})})),It=(n(2830),function(e,t){return{keys:["comment"],onSelect:function(n,a){var i,r,o=a||{},c=o.key,s=o.id;(null===(i=t.current)||void 0===i||i.select("comment"===c?s:void 0),t&&"comment"===c&&s)&&(null===(r=e.current)||void 0===r||r.command.executeMethod("mark-range","action",c,"preview",s))}}}),Rt=function(e,t){return{onClick:function(){if(Object(c.X)(e.current)){var n,a,i=null===(n=e.current)||void 0===n?void 0:n.command.executeMethod("mark-range","action","comment","preview");if(i)null===(a=t.current)||void 0===a||a.showEdit(i)}}}},At=n(322);var Mt=["onLoad","defaultValue"],Lt=function(e){var t=e.onLoad,n=e.defaultValue,u=Object(o.a)(e,Mt),d=Object(i.useRef)(null),l=Object(i.useRef)(null),f=Object(i.useRef)(null),p=Object(i.useState)({}),h=Object(a.a)(p,2)[1],b=function(){var e=Object(At.e)().search.substring(1),t={};e.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]}));var n=t.hideLayout;return n&&"false"!==n&&"0"!==n}(),v=Object(i.useState)(!0),m=Object(a.a)(v,2),j=m[0],g=m[1],y=Object(i.useState)(!1),x=Object(a.a)(y,2),k=x[0],N=x[1],E=Object(i.useRef)(null),_=Object(i.useRef)(null),S=Object(i.useRef)(null),T=Object(i.useState)({}),A=Object(a.a)(T,2),M=A[0],L=A[1],U=Object(Ae.c)(),H=Object(i.useState)((function(){return-1!==window.location.search.indexOf("isPreview=knowledgeBasePreview")})),F=Object(a.a)(H,1)[0],z=Object(P.a)().t;Object(i.useEffect)((function(){if(!j){var e=Object(se.throttle)((function(){var e,t,n,a=document.querySelector(O.d.editoContainerLayer),i=a.offsetLeft,o=a.offsetWidth,c=document.querySelector(O.d.docContainerLayer).offsetWidth;F&&(i=c-o),L(Object(r.a)({maxWidth:"".concat(O.e.maxWidth,"px"),width:"".concat(i<O.e.maxWidth?i:O.e.maxWidth,"px"),offsetLeft:i,editorWidth:o},i<=O.e.offsetLeftHide&&{display:"none"}));var s=document.querySelector(O.d.editoContainerLayer).offsetWidth,u=(null===(e=document.querySelector(O.d.commentLayer))||void 0===e?void 0:e.offsetWidth)||0,d=document.body.offsetWidth;null!==(t=f.current)&&void 0!==t&&t.isShow&&d-i-s<u&&f.current&&f.current.hideCommentHandle(),(null===(n=f.current)||void 0===n||!n.isShow)&&d-i-s>u&&f.current&&f.current.hideCommentHandle()}),60);return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[j]);var W,q,X=Object(r.a)(Object(r.a)({},u),{},{plugins:u.plugins||D,cards:u.cards||I,config:Object(r.a)(Object(r.a)(Object(r.a)({},u.config),R),{},{"mouse-move-show-menu":(W=E,q=S,{onMouseOver:function(e){var t;null===(t=W.current)||void 0===t||t.show(e)},onMouseOut:function(){var e;null===(e=W.current)||void 0===e||e.hide()},onSelectHandle:function(){var e;null===(e=q.current)||void 0===e||e.onSelectHandle()},onSelectHide:function(){var e;null===(e=q.current)||void 0===e||e.onSelectHide()},onChangeHandle:function(e){var t;null===(t=W.current)||void 0===t||t.onChangeHandle(e)},getIsAction:function(){var e;return null===(e=W.current)||void 0===e?void 0:e.getIsAction()}}),"mark-range":It(d,f),"comment-section":Rt(d,f)}),autoPrepend:!1,autoAppend:!1,onChange:Object(i.useCallback)((function(){}),[j])});return Object(i.useEffect)((function(){if(be.a.isMobile&&setTimeout((function(){["0","0px"].includes(Object(c.a)(".editor-toolbar").css("top"))&&Object(c.a)(".editor-toolbar").css("top","-120px")}),0),d.current){N(!0),d.current.on("card:maximize",(function(){Object(c.a)(".editor-toolbar").css("z-index","9999").css("top","56px")})),d.current.on("card:minimize",(function(){Object(c.a)(".editor-toolbar").css("z-index","").css("top","")}));var e=n;if(u.ot){var a=new St(d.current),i=u.ot,r=i.url,o=i.docId,f=i.onReady;a.connect(r,o,""),a.on("ready",(function(e){t&&t(d.current),f&&f(e),g(!1),_.current&&_.current.destroy(),_.current=null})),a.on("error",(function(e){var t=e.code,n=e.message,a=Object(w.jsxs)("p",{children:[n,Object(w.jsx)(pe.a,{})]});_.current?_.current.update({title:Object(se.get)(O.g,t,z("PLEASE_WAIT")),content:a}):_.current=s.i.error({title:Object(se.get)(O.g,t,z("PLEASE_WAIT")),keyboard:!1,centered:!0,content:a,okButtonProps:{style:{display:"none"}}})})),l.current=a}else d.current.setJsonValue(e,(function(){return t&&t(d.current),g(!1)}));return h(e),function(){var e;l.current&&(null===(e=l.current)||void 0===e||e.exit()),d.current=null,l.current=null,_.current&&_.current.destroy(),_.current=null}}}),[d]),Object(i.useEffect)((function(){if(u.ot&&l.current&&!j){var e=u.ot,t=e.onMembersChange,n=e.onStatusChange,a=e.onError,i=e.onMessage,r=e.onPermissionChange,o=function(e){var n=Object(se.cloneDeep)(e.filter((function(e){return e.id})));n.forEach((function(e){e.real_name=e.user_name})),t&&t(n),U(Object(je.a)(n,!0))};l.current.on("membersChange",o);var c=function(e,t){n&&n(e,t)};l.current.on("statusChange",c);var s=function(e){a&&a(e)};l.current.on("error",s);var d=function(e){i&&i(e)};l.current.on("message",d);var f=function(e){r&&r(e)};return l.current.on(xt,f),function(){var e,t,n,a,i;null===(e=l.current)||void 0===e||e.off("membersChange",o),null===(t=l.current)||void 0===t||t.off("statusChange",c),null===(n=l.current)||void 0===n||n.off("error",s),null===(a=l.current)||void 0===a||a.off("message",d),null===(i=l.current)||void 0===i||i.off(xt,f)}}}),[l,j,u.ot,U]),Object(w.jsxs)(fe,{hideLayout:b,children:[Object(w.jsx)(me.a,{show:j}),k&&d.current&&!u.readonly&&Object(w.jsx)(ve,{className:"toolbar",engine:d.current,items:u.toolbar}),Object(w.jsx)("div",{className:"docs-container".concat(F?" knowledge-base-preview":""),children:Object(w.jsxs)("div",{className:"editor-wrapper"+(u.readonly?" readonly":""),onMouseDown:function(e){var t=e.target;!t||["TEXTAREA","INPUT"].indexOf(t.nodeName)>-1||d.current&&d.current.isFocus()&&0===Object(c.a)(t).closest(".editor-content").length&&e.preventDefault()},children:[Object(w.jsxs)("div",{className:"editor-container",children:[Object(w.jsxs)("div",{className:"editor-content",onClick:function(e){var t=e.target;t&&d.current&&Object(c.a)(t).hasClass("editor-content")&&(e.preventDefault(),d.current.isFocus()||d.current.focus(!1))},children:[Object(w.jsx)(C,Object(r.a)(Object(r.a)({ref:d},X),{},{defaultValue:""})),d.current&&!be.a.isMobile&&Object(w.jsx)(ie,{ref:E,engine:d.current})]}),l.current&&Object(w.jsx)(Dt,{docId:u.docId,otClient:l.current})]}),d.current&&!be.a.isMobile&&u.toc&&Object(w.jsx)(B,{style:M,editor:d.current,isKnowledgeBasePreview:F}),d.current&&!be.a.isMobile&&!u.readonly&&Object(w.jsx)(it,{docId:u.docId,engine:d.current})]})}),d.current&&!be.a.isMobile&&Object(w.jsx)(le,{ref:S,engine:d.current})]})},Ut=Object(U.b)(["ul > li,ol > li{list-style:unset;}"]),Ht=n(518);var Ft=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Object(i.useMemo)((function(){return/macintosh|mac os x/i.test(window.navigator.userAgent)}),[]),r=Object(i.useMemo)((function(){return{ctrl:a?"metaKey":"ctrlKey",shift:"shiftKey",alt:"altKey",c:67,z:90,y:89,s:83,esc:27}}),[a]),o=Object(i.useMemo)((function(){return["ctrl","shift","alt"]}),[]),c=Object(i.useCallback)((function(e){return o.find((function(t){return t===e}))}),[o]),s=Object(i.useCallback)((function(e,t){return e.includes(t)}),[]),u=Object(i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(0!==e.length){var o=ue.a.cloneDeep(e),d=o.shift();if("string"===typeof d){var l=r[d];c(d)?n[l]&&u(o,n,t,i):n.keyCode===l&&u(o,n,t,i)}}else{if(n.altKey&&!s(i,"alt"))return;if(n.shiftKey&&!s(i,"shift"))return;if(n.ctrlKey&&!s(i,"ctrl"))return;a(n)}}),[s,c,r,t]),d=Object(i.useCallback)((function(n){e.forEach((function(e){var a=e;"string"===typeof e&&(a=[e]);var i=ue.a.cloneDeep(a);u(a,n,t,i)}))}),[e,u,t]);Object(i.useEffect)((function(){var e=n?"keyup":"keydown";return document.addEventListener(e,d),function(){return document.removeEventListener(e,d)}}),[d,n])},Pt=["div",{"data-selection-b614836d-ceb2-31f7-90e5-3c092ccca9f5":"%7B%22path%22%3A%7B%22start%22%3A%7B%22path%22%3A%5B0%2C0%2C0%5D%2C%22id%22%3A%22hc9b0489-LZ4WFPaP%22%2C%22bi%22%3A1%7D%2C%22end%22%3A%7B%22path%22%3A%5B0%2C0%2C0%5D%2C%22id%22%3A%22hc9b0489-LZ4WFPaP%22%2C%22bi%22%3A1%7D%7D%2C%22uuid%22%3A%22b614836d-ceb2-31f7-90e5-3c092ccca9f5%22%2C%22active%22%3Atrue%7D"},["h2",{"data-id":"hc9b0489-LZ4WFPaP",id:"hc9b0489-LZ4WFPaP"},"\u9700\u6c42\u8bf4\u660e",["br",{}]],["p",{"data-id":"pd157317-ACYMDhd8",style:"text-indent: 2em;"},"\u5e94\u5bf9\u96c6\u56e2\u591a\u7ec4\u7ec7\u9700\u6c42\u53caSaas\u5316\u7684\u9700\u6c42\uff0c\u9700\u8981\u5f15\u5165\u591a\u7ec4\u7ec7\u7684\u6982\u5ff5\u7ba1\u63a7\u73b0\u6709\u7684\u6240\u6709\u5e94\u7528\u6570\u636e\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6743\u9650\u9700\u8981\u6839\u636e\u7ec4\u7ec7\u6765\u5212\u5206\uff0c\u5e94\u7528\u6240\u4ea7\u751f\u7684\u8fd0\u884c\u6570\u636e\u4e5f\u9700\u8981\u6839\u636e\u7ec4\u7ec7\u6765\u5212\u5206\u3002"],["h3",{"data-id":"h26976cb-Q6eEPe1m",id:"h26976cb-Q6eEPe1m"},"\u540d\u8bcd\u8bf4\u660e"],["p",{"data-id":"pd157317-2dCLaEQA"},"\u7ec4\u7ec7\uff1aorganization"],["p",{"data-id":"pd157317-EktYDXGI"},"\u90e8\u95e8\uff1adepartment"],["h2",{"data-id":"hc9b0489-mmTGHned",id:"hc9b0489-mmTGHned"},"\u8bbe\u8ba1\u76ee\u6807"],["h3",{"data-id":"h26976cb-BMj5mibr",id:"h26976cb-BMj5mibr"},"\u6743\u9650\u7ec4\u7ec7\u9694\u79bb"],["p",{"data-id":"pd157317-2Kks8UYV",style:"text-indent: 2em;"},"\u6743\u9650\u7cfb\u7edf\u6839\u636e\u7ec4\u7ec7\u9694\u79bb\u5bf9\u5e94\u7ec4\u7ec7\u6743\u9650\uff0c\u6bcf\u4e2a\u7ec4\u7ec7\u72ec\u7acb\u62e5\u6709\u5404\u81ea\u7684\u89d2\u8272\u53ca\u6743\u9650\u6388\u4e88\u60c5\u51b5\u3002"],["h3",{"data-id":"h26976cb-l5pDH6UF",id:"h26976cb-l5pDH6UF"},"\u5e94\u7528\u7ec4\u7ec7\u9694\u79bb"],["p",{"data-id":"pd157317-31csSZNi"},"\u6240\u5bf9\u5e94\u7684\u6570\u636e\u90fd\u9700\u8981\u4e0e\u7ec4\u7ec7\u76f8\u7ed1\u5b9a\uff0c\u8fdb\u884c\u7ec4\u7ec7\u7ea7\u522b\u6570\u636e\u9694\u79bb\u3002"],["h3",{"data-id":"h26976cb-3JtMCIIF",id:"h26976cb-3JtMCIIF"},"\u7ec4\u7ec7\u7edf\u4e00\u7ba1\u7406"],["ul",{"data-id":"ucd67dc5-HQ5BAUj2"},["li",{"data-id":"l20de63f-LllWNQeE"},"\u4f01\u4e1a\u670d\u52a1\u63d0\u4f9b\u7edf\u4e00\u7684\u7ec4\u7ec7\u7ba1\u7406\u6a21\u5757\uff0c\u5546\u6237\u7cfb\u7edf\u76f4\u63a5\u4e0e\u4f01\u4e1a\u670d\u52a1\u8fdb\u884c\u7ec4\u7ec7\u6a21\u5757\u5bf9\u63a5\u3002\u53e6\u5916\u7ec4\u7ec7\u4ee5\u7ec4\u7ec7\u7f16\u7801\u4e3a\u552f\u4e00\u952e\u503c\uff08\u8fd9\u91cc\u8003\u8651\u662fxxxxxxx\u5df2\u6709\u4e00\u5957\u7ec4\u7ec7\u7f16\u7801\u4f53\u7cfb\uff0c\u5176\u4ed6\u5e94\u7528\u91c7\u53d6\u517c\u5bb9\u7684\u5f62\u6001\uff09"],["li",{"data-id":"l20de63f-PUfm20FM"},"\u589e\u52a0\u9ed8\u8ba4\u7ec4\u7ec7\uff0c\u57fa\u4e8e\u73b0\u6709\u6570\u636e\u57fa\u672c\u65e0\u7ec4\u7ec7\u7ed1\u5b9a\u6982\u5ff5\uff0c\u65e0\u641c\u7d22\u9700\u6c42\u7684\u53ef\u91c7\u7528\u9ed8\u8ba4\u7ec4\u7ec7\u7f16\u7801\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\uff1b\u82e5\u6709\u7ec4\u7ec7\u6570\u636e\u9694\u79bb\u9700\u6c42\uff0c\u5219\u9700\u8981\u8003\u8651\u6e05\u6d17\u6570\u636e\u3002\u4e3b\u8981\u4ee5\u5355\u636e\u670d\u52a1\uff0c\u5143\u6570\u636e\u670d\u52a1\u7684\u6570\u636e\u4e3a\u4e3b\u3002"]],["h2",{"data-id":"hc9b0489-kAfhHdY5",id:"hc9b0489-kAfhHdY5"},"\u7cfb\u7edf\u8bbe\u8ba1"],["div"],["div"],["h3",{"data-id":"h26976cb-XSMhhokP",id:"h26976cb-XSMhhokP"},"\u6838\u5fc3\u6d41\u7a0b\u65b9\u6848"],["h4",{"data-id":"h6e90be6-aDZl8SXk",id:"h6e90be6-aDZl8SXk"},"\u6743\u9650\u7ba1\u7406\u7cfb\u7edf"],["ul",{"data-id":"ucd67dc5-GKC4OOSS"},["li",{"data-id":"l20de63f-S3GRh2lX"},"\u7ec4\u7ec7\u67b6\u6784\u76f8\u5173\u7684\u57fa\u7840CRUD\u6d41\u7a0b\u56fe\u53c2\u8003\u4f01\u4e1a\u670d\u52a1",["br",{}]],["li",{"data-id":"l20de63f-0XUIlb9G"},"\u6743\u9650\u7ba1\u7406\u7cfb\u7edf\u539f\u6709\u903b\u8f91\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86\u7ec4\u7ec7\u4e0a\u4e00\u5c42\u7ea7\u6982\u5ff5\u53ca\u5bf9\u5e94\u7684\u7ed1\u5b9a\u5173\u7cfb"]],["p",{"data-id":"pd157317-r8PDYrtU"}],["h4",{"data-id":"h6e90be6-QHlj85Fa",id:"h6e90be6-QHlj85Fa"},"Keepppppp"],["p",{"data-id":"pd157317-9EpPUjNb"},["span"]],["h4",{"data-id":"h6e90be6-OHhgacXY",id:"h6e90be6-OHhgacXY"},"\u4f01\u4e1a\u670d\u52a1"],["ul",{"data-id":"ucd67dc5-aYcZT3YW"},["li",{"data-id":"l20de63f-ZKDCZ1WL"},"\u63d0\u4f9b\u57fa\u7840\u7684\u7ec4\u7ec7\u548c\u90e8\u95e8CRUD API\uff0c\u8fd9\u91cc\u552f\u4e00\u7ec4\u7ec7\u552f\u4e00\u952e\u503c\u4e3a",["span",{style:"color: #F5222D;"},["strong",{},"\u7ec4\u7ec7\u7f16\u7801"]],"\u3001",["span",{style:"color: #F5222D;"},["strong",{},"\u90e8\u95e8\u7f16\u7801"]],"\u3002"]],["p",{"data-id":"p6cd3e63-URFWbdAH",style:"text-indent: 2em;"},"\u6ce8\uff1a\u4f7f\u7528\u7f16\u7801\u7684\u539f\u56e0\u662f\u73b0\u6709terp\u4f7f\u7528\u7684\u662f\u7ec4\u7ec7\u7f16\u7801\uff0c\u5305\u62ec\u6570\u636e\u5c42\u9762\u4e0a\u7684\u5173\u8054"],["ul",{"data-id":"ucd67dc5-mDcaO93Y"},["li",{"data-id":"l20de63f-v2V2MesU"},"\u63d0\u4f9b\u5173\u8054\u7ec4\u7ec7\u57fa\u7840\u80fd\u529b\uff0c\u5173\u8054\u7ec4\u7ec7\u533a\u5206\u7236\u5b50\u5173\u7cfb\uff0c\u5982\u51e1\u5ba2\u3001\u8bc6\u624d\u53ef\u5173\u8054\u5feb\u5ba2\u7ec4\u7ec7\u4f5c\u4e3a\u90e8\u95e8\u5c42\u7ea7\u5b58\u5728\u3002"]],["p",{"data-id":"pd157317-uSIEfKw2",style:"text-indent: 2em;"},["span"]],["ul",{"data-id":"ucd67dc5-xcoAydLx"},["li",{"data-id":"l20de63f-KelOmmHf"},"\u63d0\u4f9b\u67e5\u8be2\u7528\u6237\u9009\u62e9\u7ec4\u7ec7API\uff0c\u4ee5\u4f7f\u5f97\u540c\u4e00\u7528\u6237\u5728\u9009\u62e9\u7ec4\u7ec7\u540e\uff0c\u53ef\u5728\u591a\u4e2a\u5e94\u7528\u4e2d\u9002\u7528\uff0c\u907f\u514d\u91cd\u590d\u9009\u62e9\u60c5\u51b5\u3002"]],["h4",{"data-id":"h6e90be6-B23MC9lN",id:"h6e90be6-B23MC9lN"},"\u7528\u6237\u670d\u52a1"],["ul",{"data-id":"ucd67dc5-JiJRvm7Q"},["li",{"data-id":"l20de63f-3niqWbQZ"},"\u6743\u9650\u5728\u57df\u3010xxxxxxx_id\u3011\u3001\u8d44\u6e90\u3010xxxxxxx_id\u3011\u3001\u64cd\u4f5c\u3010operation\u3011\u3001\u76ee\u6807id\u3010role_id\u6216user_id\u3011\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u7ec4\u7ec7code\u3002"],["li",{"data-id":"l20de63f-Kc1JxqRA"},"\u89d2\u8272\u5728\u57df\u3010xxxxxxx_id\u3011\u3001\u89d2\u8272\u3010role_id\u3011\u3001\u76ee\u6807id\u3010role_id\u6216user_id\u3011\u57fa\u7840\u4e0a\u589e\u52a0\u7ec4\u7ec7code\u3002"],["li",{"data-id":"l20de63f-HVETQMKe"},"\u589e\u52a0\u7528\u6237\u548c\u7ec4\u7ec7code\u3001\u90e8\u95e8code\u7684\u5173\u8054\u5173\u7cfb\u3010\u591a\u5bf9\u591a\u5173\u7cfb\u3011\u3002"],["li",{"data-id":"l20de63f-ggm0zJJo"},"\u6743\u9650\u4fe1\u606f\u3001\u89d2\u8272\u4fe1\u606f\u3001\u767d\u540d\u5355\u3001\u8fc7\u6ee4\u6761\u4ef6\u3001API\u6743\u9650\u589e\u52a0\u7ec4\u7ec7code\u5173\u8054\u3002\u3010\u4e00\u5bf9\u4e00\u5173\u7cfb\u3011\u3002"]],["h2",{"data-id":"hc9b0489-RoZiXPVI",id:"hc9b0489-RoZiXPVI"},"\u6570\u636e\u5e93\u8bbe\u8ba1"],["ul",{"data-id":"ucd67dc5-Mka099Vp"},["li",{"data-id":"l20de63f-Blc6bVp6"},"\u7531\u5bf9\u5e94\u670d\u52a1\u7684\u8be6\u7ec6\u8bbe\u8ba1\u63d0\u4f9b"]],["h2",{"data-id":"hc9b0489-0YWF94Hc",id:"hc9b0489-0YWF94Hc"},"API\u8bbe\u8ba1"],["ul",{"data-id":"ucd67dc5-B3B3VpNr"},["li",{"data-id":"l20de63f-Ni9RsEOI"},"\u7531\u5bf9\u5e94\u670d\u52a1\u7684\u8be6\u7ec6\u8bbe\u8ba1\u63d0\u4f9b"]],["h2",{"data-id":"hc9b0489-M36RI0gK",id:"hc9b0489-M36RI0gK"},"\u4ee3\u7801\u4ed3\u5e93"],["ul",{"data-id":"ucd67dc5-02lbtbd2"},["li",{"data-id":"l20de63f-sLyGxOSp"},"\u7531\u5bf9\u5e94\u670d\u52a1\u7684\u8be6\u7ec6\u8bbe\u8ba1\u63d0\u4f9b"]]];t.default=function(e){var t=e.userInfo,n=void 0===t?{}:t,r=e.tableInfo,o=void 0===r?{}:r;e.match,e.onUpdateTableInfo,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(i.useState)((function(){return e})),r=Object(a.a)(n,2),o=r[0],c=r[1],s=Object(ye.a)((function(e){c(e)}));Object(i.useEffect)((function(){c(e)}),[e].concat(Object(N.a)(t))),Object(i.useEffect)((function(){window.navigator.userAgent.includes("DingTalk")?Ht.biz.navigation.setTitle({title:o?"".concat(o," - Teamshare |").concat(y.c.t("HEAVENLY_BOOK")):"Teamshare | ".concat(y.c.t("HEAVENLY_BOOK")),onSuccess:function(){},onFail:function(){}}):document.title=o?"".concat(o," - Teamshare | ").concat(y.c.t("HEAVENLY_BOOK")):"Teamshare | ".concat(y.c.t("HEAVENLY_BOOK"))}),[o])}(null===o||void 0===o?void 0:o.name,[null===o||void 0===o?void 0:o.name]),Ft([["ctrl","s"]],(function(e){e.preventDefault(),e.stopPropagation()}));var c=Object(i.useState)(!1),s=Object(a.a)(c,2),u=s[0],d=(s[1],Object(i.useState)(null)),l=Object(a.a)(d,2),f=(l[0],l[1]);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Ut,{}),Object(w.jsx)("div",{style:{height:"100vh",width:"100vw"},children:Object(w.jsx)(Lt,{lang:O.n,placeholder:u?"":y.c.t("THIS_IS_THE_EDITING_AREA"),defaultValue:Pt,userInfo:n,comment:!0,readonly:u,onLoad:f,markdownMode:"confirm",toc:!0})})]})}}}]);